import{a as Qr}from"./chunk-FK6H3RFT.js";import{$ as D8,A as xm,Aa as Xl,B as xl,Ba as Or,C as wm,Ca as Zl,D as Em,Da as so,E as b8,Ea as O8,F as bm,Fa as F8,G as Xf,H as V_,Ha as B8,I as H_,J as zo,K as S8,L as Zf,M as jw,N as or,O as kr,P as Vs,Q as q_,R as on,S as Jn,T as ms,U as C8,V as I8,W as Uw,X as T8,Y as Sm,Z as Cm,_ as Gw,a as Oa,aa as OD,b as ya,ba as A8,c as Xn,ca as ys,d as v8,da as Im,e as _l,ea as R8,f as x8,fa as Tm,g as Ow,ga as Ch,h as vl,ha as M8,i as gs,ia as Dm,j as ym,ja as N8,k as kD,ka as FD,l as _m,la as P8,m as vc,ma as zw,n as w8,na as Vw,o as wi,oa as L8,p as bo,pa as sn,q as Fw,qa as BD,r as Fa,ra as Hw,s as Gs,sa as qw,t as zs,ta as k8,u as Bw,ua as qr,v as E8,va as Am,w as ki,wa as Ih,x as Bu,xa as Rm,y as vm,ya as Yl,z as Yf,za as _s}from"./chunk-KWTD5ST7.js";import{a as jD,b as j8,c as Gn,d as Ba,e as U8,h as G8,i as UD}from"./chunk-FAVDZ756.js";import{a as GD,b as z8}from"./chunk-DMHJOBWC.js";import"./chunk-NJ5AJFAG.js";import{a as dt,b as tn,c as z_,d as Dp,e as _r,g as $l,h as We}from"./chunk-WWX6BADO.js";var Ok=_r((_q,kk)=>{"use strict";(function(n){typeof _q=="object"&&typeof kk<"u"?kk.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return(function n(e,t,r){function i(a,l){if(!t[a]){if(!e[a]){var c=typeof z_=="function"&&z_;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=t[a]={exports:{}};e[a][0].call(d.exports,function(y){var p=e[a][1][y];return i(p||y)},d,d.exports,n,e,t,r)}return t[a].exports}for(var o=typeof z_=="function"&&z_,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(n,e,t){"use strict";var r=n("./utils"),i=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(s){for(var a,l,c,f,d,y,p,_=[],x=0,b=s.length,S=b,T=r.getTypeOf(s)!=="string";x<s.length;)S=b-x,c=T?(a=s[x++],l=x<b?s[x++]:0,x<b?s[x++]:0):(a=s.charCodeAt(x++),l=x<b?s.charCodeAt(x++):0,x<b?s.charCodeAt(x++):0),f=a>>2,d=(3&a)<<4|l>>4,y=1<S?(15&l)<<2|c>>6:64,p=2<S?63&c:64,_.push(o.charAt(f)+o.charAt(d)+o.charAt(y)+o.charAt(p));return _.join("")},t.decode=function(s){var a,l,c,f,d,y,p=0,_=0,x="data:";if(s.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===o.charAt(64)&&S--,s.charAt(s.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|S):new Array(0|S);p<s.length;)a=o.indexOf(s.charAt(p++))<<2|(f=o.indexOf(s.charAt(p++)))>>4,l=(15&f)<<4|(d=o.indexOf(s.charAt(p++)))>>2,c=(3&d)<<6|(y=o.indexOf(s.charAt(p++))),b[_++]=a,d!==64&&(b[_++]=l),y!==64&&(b[_++]=c);return b}},{"./support":30,"./utils":32}],2:[function(n,e,t){"use strict";var r=n("./external"),i=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(l,c,f,d,y){this.compressedSize=l,this.uncompressedSize=c,this.crc32=f,this.compression=d,this.compressedContent=y}a.prototype={getContentWorker:function(){var l=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,f){return l.pipe(new o).pipe(new s("uncompressedSize")).pipe(c.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,e,t){"use strict";var r=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,e,t){"use strict";var r=n("./utils"),i=(function(){for(var o,s=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[a]=o}return s})();e.exports=function(o,s){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?(function(a,l,c,f){var d=i,y=f+c;a^=-1;for(var p=f;p<y;p++)a=a>>>8^d[255&(a^l[p])];return-1^a})(0|s,o,o.length,0):(function(a,l,c,f){var d=i,y=f+c;a^=-1;for(var p=f;p<y;p++)a=a>>>8^d[255&(a^l.charCodeAt(p))];return-1^a})(0|s,o,o.length,0):0}},{"./utils":32}],5:[function(n,e,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,e,t){"use strict";var r=null;r=typeof Promise<"u"?Promise:n("lie"),e.exports={Promise:r}},{lie:37}],7:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),o=n("./utils"),s=n("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,f){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=f,this.meta={}}t.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(f){c.push({data:f,meta:c.meta})}},t.compressWorker=function(c){return new l("Deflate",c)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,e,t){"use strict";function r(d,y){var p,_="";for(p=0;p<y;p++)_+=String.fromCharCode(255&d),d>>>=8;return _}function i(d,y,p,_,x,b){var S,T,A=d.file,N=d.compression,k=b!==a.utf8encode,W=o.transformTo("string",b(A.name)),X=o.transformTo("string",a.utf8encode(A.name)),Y=A.comment,$=o.transformTo("string",b(Y)),V=o.transformTo("string",a.utf8encode(Y)),B=X.length!==A.name.length,v=V.length!==Y.length,I="",M="",j="",Q=A.dir,Z=A.date,q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!p||(q.crc32=d.crc32,q.compressedSize=d.compressedSize,q.uncompressedSize=d.uncompressedSize);var K=0;y&&(K|=8),k||!B&&!v||(K|=2048);var oe=0,_e=0;Q&&(oe|=16),x==="UNIX"?(_e=798,oe|=(function(ee,ce){var pe=ee;return ee||(pe=ce?16893:33204),(65535&pe)<<16})(A.unixPermissions,Q)):(_e=20,oe|=(function(ee){return 63&(ee||0)})(A.dosPermissions)),S=Z.getUTCHours(),S<<=6,S|=Z.getUTCMinutes(),S<<=5,S|=Z.getUTCSeconds()/2,T=Z.getUTCFullYear()-1980,T<<=4,T|=Z.getUTCMonth()+1,T<<=5,T|=Z.getUTCDate(),B&&(M=r(1,1)+r(l(W),4)+X,I+="up"+r(M.length,2)+M),v&&(j=r(1,1)+r(l($),4)+V,I+="uc"+r(j.length,2)+j);var F="";return F+=`
\0`,F+=r(K,2),F+=N.magic,F+=r(S,2),F+=r(T,2),F+=r(q.crc32,4),F+=r(q.compressedSize,4),F+=r(q.uncompressedSize,4),F+=r(W.length,2),F+=r(I.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+W+I,dirRecord:c.CENTRAL_FILE_HEADER+r(_e,2)+F+r($.length,2)+"\0\0\0\0"+r(oe,4)+r(_,4)+W+I+$}}var o=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),c=n("../signature");function f(d,y,p,_){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,s),f.prototype.push=function(d){var y=d.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(y+100*(p-_-1))/p:100}}))},f.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var p=i(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,p=i(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),y)this.push({data:(function(_){return c.DATA_DESCRIPTOR+r(_.crc32,4)+r(_.compressedSize,4)+r(_.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var p=this.bytesWritten-d,_=(function(x,b,S,T,A){var N=o.transformTo("string",A(T));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(x,2)+r(x,2)+r(b,4)+r(S,4)+r(N.length,2)+N})(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(p){y.processChunk(p)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(p){y.error(p)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(d){var y=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var p=0;p<y.length;p++)try{y[p].error(d)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},e.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,e,t){"use strict";var r=n("../compressions"),i=n("./ZipFileWorker");t.generateWorker=function(o,s,a){var l=new i(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{o.forEach(function(f,d){c++;var y=(function(b,S){var T=b||S,A=r[T];if(!A)throw new Error(T+" is not a valid compression method !");return A})(d.options.compression,s.compression),p=d.options.compressionOptions||s.compressionOptions||{},_=d.dir,x=d.date;d._compressWorker(y,p).withStreamInfo("file",{name:f,dir:_,date:x,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,e,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(r.prototype=n("./object")).loadAsync=n("./load"),r.support=n("./support"),r.defaults=n("./defaults"),r.version="3.10.1",r.loadAsync=function(i,o){return new r().loadAsync(i,o)},r.external=n("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,e,t){"use strict";var r=n("./utils"),i=n("./external"),o=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function c(f){return new i.Promise(function(d,y){var p=f.decompressed.getContentWorker().pipe(new a);p.on("error",function(_){y(_)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}e.exports=function(f,d){var y=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(p){var _=new s(d);return _.load(p),_}).then(function(p){var _=[i.Promise.resolve(p)],x=p.files;if(d.checkCRC32)for(var b=0;b<x.length;b++)_.push(c(x[b]));return i.Promise.all(_)}).then(function(p){for(var _=p.shift(),x=_.files,b=0;b<x.length;b++){var S=x[b],T=S.fileNameStr,A=r.resolve(S.fileNameStr);y.file(A,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(y.file(A).unsafeOriginalName=T)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,e,t){"use strict";var r=n("../utils"),i=n("../stream/GenericWorker");function o(s,a){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(o,i),o.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,e,t){"use strict";var r=n("readable-stream").Readable;function i(o,s,a){r.call(this,s),this._helper=o;var l=this;o.on("data",function(c,f){l.push(c)||l._helper.pause(),a&&a(f)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}n("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,e,t){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(n,e,t){"use strict";function r(A,N,k){var W,X=o.getTypeOf(N),Y=o.extend(k||{},l);Y.date=Y.date||new Date,Y.compression!==null&&(Y.compression=Y.compression.toUpperCase()),typeof Y.unixPermissions=="string"&&(Y.unixPermissions=parseInt(Y.unixPermissions,8)),Y.unixPermissions&&16384&Y.unixPermissions&&(Y.dir=!0),Y.dosPermissions&&16&Y.dosPermissions&&(Y.dir=!0),Y.dir&&(A=x(A)),Y.createFolders&&(W=_(A))&&b.call(this,W,!0);var $=X==="string"&&Y.binary===!1&&Y.base64===!1;k&&k.binary!==void 0||(Y.binary=!$),(N instanceof c&&N.uncompressedSize===0||Y.dir||!N||N.length===0)&&(Y.base64=!1,Y.binary=!0,N="",Y.compression="STORE",X="string");var V=null;V=N instanceof c||N instanceof s?N:y.isNode&&y.isStream(N)?new p(A,N):o.prepareContent(A,N,Y.binary,Y.optimizedBinaryString,Y.base64);var B=new f(A,V,Y);this.files[A]=B}var i=n("./utf8"),o=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),l=n("./defaults"),c=n("./compressedObject"),f=n("./zipObject"),d=n("./generate"),y=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var N=A.lastIndexOf("/");return 0<N?A.substring(0,N):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},b=function(A,N){return N=N!==void 0?N:l.createFolders,A=x(A),this.files[A]||r.call(this,A,null,{dir:!0,createFolders:N}),this.files[A]};function S(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var N,k,W;for(N in this.files)W=this.files[N],(k=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&A(k,W)},filter:function(A){var N=[];return this.forEach(function(k,W){A(k,W)&&N.push(W)}),N},file:function(A,N,k){if(arguments.length!==1)return A=this.root+A,r.call(this,A,N,k),this;if(S(A)){var W=A;return this.filter(function(Y,$){return!$.dir&&W.test(Y)})}var X=this.files[this.root+A];return X&&!X.dir?X:null},folder:function(A){if(!A)return this;if(S(A))return this.filter(function(X,Y){return Y.dir&&A.test(X)});var N=this.root+A,k=b.call(this,N),W=this.clone();return W.root=k.name,W},remove:function(A){A=this.root+A;var N=this.files[A];if(N||(A.slice(-1)!=="/"&&(A+="/"),N=this.files[A]),N&&!N.dir)delete this.files[A];else for(var k=this.filter(function(X,Y){return Y.name.slice(0,A.length)===A}),W=0;W<k.length;W++)delete this.files[k[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var N,k={};try{if((k=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");o.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var W=k.comment||this.comment||"";N=d.generateWorker(this,k,W)}catch(X){(N=new s("error")).error(X)}return new a(N,k.type||"string",k.mimeType)},generateAsync:function(A,N){return this.generateInternalStream(A).accumulate(N)},generateNodeStream:function(A,N){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(N)}};e.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,e,t){"use strict";e.exports=n("stream")},{stream:void 0}],17:[function(n,e,t){"use strict";var r=n("./DataReader");function i(o){r.call(this,o);for(var s=0;s<this.data.length;s++)o[s]=255&o[s]}n("../utils").inherits(i,r),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===c)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&c===f[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,e,t){"use strict";var r=n("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var s,a=0;for(this.checkOffset(o),s=this.index+o-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=o,a},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},e.exports=i},{"../utils":32}],19:[function(n,e,t){"use strict";var r=n("./Uint8ArrayReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,e,t){"use strict";var r=n("./DataReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,e,t){"use strict";var r=n("./ArrayReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,e,t){"use strict";var r=n("../utils"),i=n("../support"),o=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");e.exports=function(c){var f=r.getTypeOf(c);return r.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new a(c):i.uint8array?new l(r.transformTo("uint8array",c)):new o(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,e,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,e,t){"use strict";var r=n("./GenericWorker"),i=n("../utils");function o(s){r.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(o,r),o.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,e,t){"use strict";var r=n("./GenericWorker"),i=n("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,r),o.prototype.processChunk=function(s){this.streamInfo.crc32=i(s.data,this.streamInfo.crc32||0),this.push(s)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./GenericWorker");function o(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(o,i),o.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}i.prototype.processChunk.call(this,s)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./GenericWorker");function o(s){i.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,e,t){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(s){o.processChunk(s)}),i.on("end",function(){o.end()}),i.on("error",function(s){o.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=r},{}],29:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./ConvertWorker"),o=n("./GenericWorker"),s=n("../base64"),a=n("../support"),l=n("../external"),c=null;if(a.nodestream)try{c=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(y,p){return new l.Promise(function(_,x){var b=[],S=y._internalType,T=y._outputType,A=y._mimeType;y.on("data",function(N,k){b.push(N),p&&p(k)}).on("error",function(N){b=[],x(N)}).on("end",function(){try{var N=(function(k,W,X){switch(k){case"blob":return r.newBlob(r.transformTo("arraybuffer",W),X);case"base64":return s.encode(W);default:return r.transformTo(k,W)}})(T,(function(k,W){var X,Y=0,$=null,V=0;for(X=0;X<W.length;X++)V+=W[X].length;switch(k){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for($=new Uint8Array(V),X=0;X<W.length;X++)$.set(W[X],Y),Y+=W[X].length;return $;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+k+"'")}})(S,b),A);_(N)}catch(k){x(k)}b=[]}).resume()})}function d(y,p,_){var x=p;switch(p){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=p,this._mimeType=_,r.checkSupport(x),this._worker=y.pipe(new i(x)),y.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}d.prototype={accumulate:function(y){return f(this,y)},on:function(y,p){var _=this;return y==="data"?this._worker.on(y,function(x){p.call(_,x.data,x.meta)}):this._worker.on(y,function(){r.delay(p,arguments,_)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},y)}},e.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,e,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=i.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,e,t){"use strict";for(var r=n("./utils"),i=n("./support"),o=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}t.utf8encode=function(d){return i.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(y){var p,_,x,b,S,T=y.length,A=0;for(b=0;b<T;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<T&&(64512&(x=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),b++),A+=_<128?1:_<2048?2:_<65536?3:4;for(p=i.uint8array?new Uint8Array(A):new Array(A),b=S=0;S<A;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<T&&(64512&(x=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),b++),_<128?p[S++]=_:(_<2048?p[S++]=192|_>>>6:(_<65536?p[S++]=224|_>>>12:(p[S++]=240|_>>>18,p[S++]=128|_>>>12&63),p[S++]=128|_>>>6&63),p[S++]=128|63&_);return p})(d)},t.utf8decode=function(d){return i.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):(function(y){var p,_,x,b,S=y.length,T=new Array(2*S);for(p=_=0;p<S;)if((x=y[p++])<128)T[_++]=x;else if(4<(b=a[x]))T[_++]=65533,p+=b-1;else{for(x&=b===2?31:b===3?15:7;1<b&&p<S;)x=x<<6|63&y[p++],b--;1<b?T[_++]=65533:x<65536?T[_++]=x:(x-=65536,T[_++]=55296|x>>10&1023,T[_++]=56320|1023&x)}return T.length!==_&&(T.subarray?T=T.subarray(0,_):T.length=_),r.applyFromCharCode(T)})(d=r.transformTo(i.uint8array?"uint8array":"array",d))},r.inherits(c,s),c.prototype.processChunk=function(d){var y=r.transformTo(i.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var p=y;(y=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),y.set(p,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=(function(b,S){var T;for((S=S||b.length)>b.length&&(S=b.length),T=S-1;0<=T&&(192&b[T])==128;)T--;return T<0||T===0?S:T+a[b[T]]>S?T:S})(y),x=y;_!==y.length&&(i.uint8array?(x=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(x=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:t.utf8decode(x),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,r.inherits(f,s),f.prototype.processChunk=function(d){this.push({data:t.utf8encode(d.data),meta:d.meta})},t.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,e,t){"use strict";var r=n("./support"),i=n("./base64"),o=n("./nodejsUtils"),s=n("./external");function a(p){return p}function l(p,_){for(var x=0;x<p.length;++x)_[x]=255&p.charCodeAt(x);return _}n("setimmediate"),t.newBlob=function(p,_){t.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(p),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(p,_,x){var b=[],S=0,T=p.length;if(T<=x)return String.fromCharCode.apply(null,p);for(;S<T;)_==="array"||_==="nodebuffer"?b.push(String.fromCharCode.apply(null,p.slice(S,Math.min(S+x,T)))):b.push(String.fromCharCode.apply(null,p.subarray(S,Math.min(S+x,T)))),S+=x;return b.join("")},stringifyByChar:function(p){for(var _="",x=0;x<p.length;x++)_+=String.fromCharCode(p[x]);return _},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function f(p){var _=65536,x=t.getTypeOf(p),b=!0;if(x==="uint8array"?b=c.applyCanBeUsed.uint8array:x==="nodebuffer"&&(b=c.applyCanBeUsed.nodebuffer),b)for(;1<_;)try{return c.stringifyByChunk(p,x,_)}catch{_=Math.floor(_/2)}return c.stringifyByChar(p)}function d(p,_){for(var x=0;x<p.length;x++)_[x]=p[x];return _}t.applyFromCharCode=f;var y={};y.string={string:a,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return y.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},y.array={string:f,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},y.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},y.uint8array={string:f,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return o.newBufferFrom(p)}},y.nodebuffer={string:f,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return y.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:a},t.transformTo=function(p,_){if(_=_||"",!p)return _;t.checkSupport(p);var x=t.getTypeOf(_);return y[x][p](_)},t.resolve=function(p){for(var _=p.split("/"),x=[],b=0;b<_.length;b++){var S=_[b];S==="."||S===""&&b!==0&&b!==_.length-1||(S===".."?x.pop():x.push(S))}return x.join("/")},t.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(p){var _,x,b="";for(x=0;x<(p||"").length;x++)b+="\\x"+((_=p.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return b},t.delay=function(p,_,x){setImmediate(function(){p.apply(x||null,_||[])})},t.inherits=function(p,_){function x(){}x.prototype=_.prototype,p.prototype=new x},t.extend=function(){var p,_,x={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&x[_]===void 0&&(x[_]=arguments[p][_]);return x},t.prepareContent=function(p,_,x,b,S){return s.Promise.resolve(_).then(function(T){return r.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new s.Promise(function(A,N){var k=new FileReader;k.onload=function(W){A(W.target.result)},k.onerror=function(W){N(W.target.error)},k.readAsArrayBuffer(T)}):T}).then(function(T){var A=t.getTypeOf(T);return A?(A==="arraybuffer"?T=t.transformTo("uint8array",T):A==="string"&&(S?T=i.decode(T):x&&b!==!0&&(T=(function(N){return l(N,r.uint8array?new Uint8Array(N.length):new Array(N.length))})(T))),T):s.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),i=n("./utils"),o=n("./signature"),s=n("./zipEntry"),a=n("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(c)+")")}},isSignature:function(c,f){var d=this.reader.index;this.reader.setIndex(c);var y=this.reader.readString(4)===f;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",d=i.transformTo(f,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,f,d,y=this.zip64EndOfCentralSize-44;0<y;)c=this.reader.readInt(2),f=this.reader.readInt(4),d=this.reader.readData(f),this.zip64ExtensibleData[c]={id:c,length:f,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,f;for(c=0;c<this.files.length;c++)f=this.files[c],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var f=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=f-d;if(0<y)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),i=n("./utils"),o=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),l=n("./compressions"),c=n("./support");function f(d,y){this.options=d,this.loadOptions=y}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(_){for(var x in l)if(Object.prototype.hasOwnProperty.call(l,x)&&l[x].magic===_)return l[x];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,p,_,x=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<x;)y=d.readInt(2),p=d.readInt(2),_=d.readData(p),this.extraFields[y]={id:y,length:p,value:_};d.setIndex(x)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var p=i.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=i.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=r(d.value);return y.readInt(1)!==1||s(this.fileName)!==y.readInt(4)?null:a.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=r(d.value);return y.readInt(1)!==1||s(this.fileComment)!==y.readInt(4)?null:a.utf8decode(y.readData(d.length-5))}return null}},e.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,e,t){"use strict";function r(y,p,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var i=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),l=n("./stream/GenericWorker");r.prototype={internalStream:function(y){var p=null,_="string";try{if(!y)throw new Error("No output type specified.");var x=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var b=!this._dataBinary;b&&!x&&(p=p.pipe(new s.Utf8EncodeWorker)),!b&&x&&(p=p.pipe(new s.Utf8DecodeWorker))}catch(S){(p=new l("error")).error(S)}return new i(p,_,"")},async:function(y,p){return this.internalStream(y).accumulate(p)},nodeStream:function(y,p){return this.internalStream(y||"nodebuffer").toNodejsStream(p)},_compressWorker:function(y,p){if(this._data instanceof a&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(_,y,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=f;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,e,t){(function(r){"use strict";var i,o,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(y),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),i=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){y(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(y,0)};else{var f=new r.MessageChannel;f.port1.onmessage=y,i=function(){f.port2.postMessage(0)}}var d=[];function y(){var p,_;o=!0;for(var x=d.length;x;){for(_=d,d=[],p=-1;++p<x;)_[p]();x=d.length}o=!1}e.exports=function(p){d.push(p)!==1||o||i()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,e,t){"use strict";var r=n("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,x!==i&&p(this,x)}function f(x,b,S){this.promise=x,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(x,b,S){r(function(){var T;try{T=b(S)}catch(A){return o.reject(x,A)}T===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,T)})}function y(x){var b=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof b=="function")return function(){b.apply(x,arguments)}}function p(x,b){var S=!1;function T(k){S||(S=!0,o.reject(x,k))}function A(k){S||(S=!0,o.resolve(x,k))}var N=_(function(){b(A,T)});N.status==="error"&&T(N.value)}function _(x,b){var S={};try{S.value=x(b),S.status="success"}catch(T){S.status="error",S.value=T}return S}(e.exports=c).prototype.finally=function(x){if(typeof x!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(x()).then(function(){return S})},function(S){return b.resolve(x()).then(function(){throw S})})},c.prototype.catch=function(x){return this.then(null,x)},c.prototype.then=function(x,b){if(typeof x!="function"&&this.state===a||typeof b!="function"&&this.state===s)return this;var S=new this.constructor(i);return this.state!==l?d(S,this.state===a?x:b,this.outcome):this.queue.push(new f(S,x,b)),S},f.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},f.prototype.otherCallFulfilled=function(x){d(this.promise,this.onFulfilled,x)},f.prototype.callRejected=function(x){o.reject(this.promise,x)},f.prototype.otherCallRejected=function(x){d(this.promise,this.onRejected,x)},o.resolve=function(x,b){var S=_(y,b);if(S.status==="error")return o.reject(x,S.value);var T=S.value;if(T)p(x,T);else{x.state=a,x.outcome=b;for(var A=-1,N=x.queue.length;++A<N;)x.queue[A].callFulfilled(b)}return x},o.reject=function(x,b){x.state=s,x.outcome=b;for(var S=-1,T=x.queue.length;++S<T;)x.queue[S].callRejected(b);return x},c.resolve=function(x){return x instanceof this?x:o.resolve(new this(i),x)},c.reject=function(x){var b=new this(i);return o.reject(b,x)},c.all=function(x){var b=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,T=!1;if(!S)return this.resolve([]);for(var A=new Array(S),N=0,k=-1,W=new this(i);++k<S;)X(x[k],k);return W;function X(Y,$){b.resolve(Y).then(function(V){A[$]=V,++N!==S||T||(T=!0,o.resolve(W,A))},function(V){T||(T=!0,o.reject(W,V))})}},c.race=function(x){var b=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,T=!1;if(!S)return this.resolve([]);for(var A=-1,N=new this(i);++A<S;)k=x[A],b.resolve(k).then(function(W){T||(T=!0,o.resolve(N,W))},function(W){T||(T=!0,o.reject(N,W))});var k;return N}},{immediate:36}],38:[function(n,e,t){"use strict";var r={};(0,n("./lib/utils/common").assign)(r,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,e,t){"use strict";var r=n("./zlib/deflate"),i=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),l=Object.prototype.toString,c=0,f=-1,d=0,y=8;function p(x){if(!(this instanceof p))return new p(x);this.options=i.assign({level:f,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},x||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var S=r.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==c)throw new Error(s[S]);if(b.header&&r.deflateSetHeader(this.strm,b.header),b.dictionary){var T;if(T=typeof b.dictionary=="string"?o.string2buf(b.dictionary):l.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=r.deflateSetDictionary(this.strm,T))!==c)throw new Error(s[S]);this._dict_set=!0}}function _(x,b){var S=new p(b);if(S.push(x,!0),S.err)throw S.msg||s[S.err];return S.result}p.prototype.push=function(x,b){var S,T,A=this.strm,N=this.options.chunkSize;if(this.ended)return!1;T=b===~~b?b:b===!0?4:0,typeof x=="string"?A.input=o.string2buf(x):l.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(N),A.next_out=0,A.avail_out=N),(S=r.deflate(A,T))!==1&&S!==c)return this.onEnd(S),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(A.output,A.next_out))):this.onData(i.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&S!==1);return T===4?(S=r.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===c):T!==2||(this.onEnd(c),!(A.avail_out=0))},p.prototype.onData=function(x){this.chunks.push(x)},p.prototype.onEnd=function(x){x===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},t.Deflate=p,t.deflate=_,t.deflateRaw=function(x,b){return(b=b||{}).raw=!0,_(x,b)},t.gzip=function(x,b){return(b=b||{}).gzip=!0,_(x,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,e,t){"use strict";var r=n("./zlib/inflate"),i=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),l=n("./zlib/zstream"),c=n("./zlib/gzheader"),f=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var x=r.inflateInit2(this.strm,_.windowBits);if(x!==s.Z_OK)throw new Error(a[x]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function y(p,_){var x=new d(_);if(x.push(p,!0),x.err)throw x.msg||a[x.err];return x.result}d.prototype.push=function(p,_){var x,b,S,T,A,N,k=this.strm,W=this.options.chunkSize,X=this.options.dictionary,Y=!1;if(this.ended)return!1;b=_===~~_?_:_===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?k.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?k.input=new Uint8Array(p):k.input=p,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new i.Buf8(W),k.next_out=0,k.avail_out=W),(x=r.inflate(k,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&X&&(N=typeof X=="string"?o.string2buf(X):f.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,x=r.inflateSetDictionary(this.strm,N)),x===s.Z_BUF_ERROR&&Y===!0&&(x=s.Z_OK,Y=!1),x!==s.Z_STREAM_END&&x!==s.Z_OK)return this.onEnd(x),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&x!==s.Z_STREAM_END&&(k.avail_in!==0||b!==s.Z_FINISH&&b!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(k.output,k.next_out),T=k.next_out-S,A=o.buf2string(k.output,S),k.next_out=T,k.avail_out=W-T,T&&i.arraySet(k.output,k.output,S,T,0),this.onData(A)):this.onData(i.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(Y=!0)}while((0<k.avail_in||k.avail_out===0)&&x!==s.Z_STREAM_END);return x===s.Z_STREAM_END&&(b=s.Z_FINISH),b===s.Z_FINISH?(x=r.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===s.Z_OK):b!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(k.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},t.Inflate=d,t.inflate=y,t.inflateRaw=function(p,_){return(_=_||{}).raw=!0,y(p,_)},t.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},t.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var i={arraySet:function(s,a,l,c,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),f);else for(var d=0;d<c;d++)s[f+d]=a[l+d]},flattenChunks:function(s){var a,l,c,f,d,y;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(y=new Uint8Array(c),a=f=0,l=s.length;a<l;a++)d=s[a],y.set(d,f),f+=d.length;return y}},o={arraySet:function(s,a,l,c,f){for(var d=0;d<c;d++)s[f+d]=a[l+d]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},{}],42:[function(n,e,t){"use strict";var r=n("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,f){if(f<65537&&(c.subarray&&o||!c.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(c,f));for(var d="",y=0;y<f;y++)d+=String.fromCharCode(c[y]);return d}s[254]=s[254]=1,t.string2buf=function(c){var f,d,y,p,_,x=c.length,b=0;for(p=0;p<x;p++)(64512&(d=c.charCodeAt(p)))==55296&&p+1<x&&(64512&(y=c.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),b+=d<128?1:d<2048?2:d<65536?3:4;for(f=new r.Buf8(b),p=_=0;_<b;p++)(64512&(d=c.charCodeAt(p)))==55296&&p+1<x&&(64512&(y=c.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),d<128?f[_++]=d:(d<2048?f[_++]=192|d>>>6:(d<65536?f[_++]=224|d>>>12:(f[_++]=240|d>>>18,f[_++]=128|d>>>12&63),f[_++]=128|d>>>6&63),f[_++]=128|63&d);return f},t.buf2binstring=function(c){return l(c,c.length)},t.binstring2buf=function(c){for(var f=new r.Buf8(c.length),d=0,y=f.length;d<y;d++)f[d]=c.charCodeAt(d);return f},t.buf2string=function(c,f){var d,y,p,_,x=f||c.length,b=new Array(2*x);for(d=y=0;d<x;)if((p=c[d++])<128)b[y++]=p;else if(4<(_=s[p]))b[y++]=65533,d+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&d<x;)p=p<<6|63&c[d++],_--;1<_?b[y++]=65533:p<65536?b[y++]=p:(p-=65536,b[y++]=55296|p>>10&1023,b[y++]=56320|1023&p)}return l(b,y)},t.utf8border=function(c,f){var d;for((f=f||c.length)>c.length&&(f=c.length),d=f-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?f:d+s[c[d]]>f?d:f}},{"./common":41}],43:[function(n,e,t){"use strict";e.exports=function(r,i,o,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;o!==0;){for(o-=c=2e3<o?2e3:o;l=l+(a=a+i[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(n,e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,e,t){"use strict";var r=(function(){for(var i,o=[],s=0;s<256;s++){i=s;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;o[s]=i}return o})();e.exports=function(i,o,s,a){var l=r,c=a+s;i^=-1;for(var f=a;f<c;f++)i=i>>>8^l[255&(i^o[f])];return-1^i}},{}],46:[function(n,e,t){"use strict";var r,i=n("../utils/common"),o=n("./trees"),s=n("./adler32"),a=n("./crc32"),l=n("./messages"),c=0,f=4,d=0,y=-2,p=-1,_=4,x=2,b=8,S=9,T=286,A=30,N=19,k=2*T+1,W=15,X=3,Y=258,$=Y+X+1,V=42,B=113,v=1,I=2,M=3,j=4;function Q(G,be){return G.msg=l[be],be}function Z(G){return(G<<1)-(4<G?9:0)}function q(G){for(var be=G.length;0<=--be;)G[be]=0}function K(G){var be=G.state,Ie=be.pending;Ie>G.avail_out&&(Ie=G.avail_out),Ie!==0&&(i.arraySet(G.output,be.pending_buf,be.pending_out,Ie,G.next_out),G.next_out+=Ie,be.pending_out+=Ie,G.total_out+=Ie,G.avail_out-=Ie,be.pending-=Ie,be.pending===0&&(be.pending_out=0))}function oe(G,be){o._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,be),G.block_start=G.strstart,K(G.strm)}function _e(G,be){G.pending_buf[G.pending++]=be}function F(G,be){G.pending_buf[G.pending++]=be>>>8&255,G.pending_buf[G.pending++]=255&be}function ee(G,be){var Ie,U,ae=G.max_chain_length,he=G.strstart,Fe=G.prev_length,Ce=G.nice_match,we=G.strstart>G.w_size-$?G.strstart-(G.w_size-$):0,Ue=G.window,Le=G.w_mask,Be=G.prev,pt=G.strstart+Y,Tt=Ue[he+Fe-1],qe=Ue[he+Fe];G.prev_length>=G.good_match&&(ae>>=2),Ce>G.lookahead&&(Ce=G.lookahead);do if(Ue[(Ie=be)+Fe]===qe&&Ue[Ie+Fe-1]===Tt&&Ue[Ie]===Ue[he]&&Ue[++Ie]===Ue[he+1]){he+=2,Ie++;do;while(Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&he<pt);if(U=Y-(pt-he),he=pt-Y,Fe<U){if(G.match_start=be,Ce<=(Fe=U))break;Tt=Ue[he+Fe-1],qe=Ue[he+Fe]}}while((be=Be[be&Le])>we&&--ae!=0);return Fe<=G.lookahead?Fe:G.lookahead}function ce(G){var be,Ie,U,ae,he,Fe,Ce,we,Ue,Le,Be=G.w_size;do{if(ae=G.window_size-G.lookahead-G.strstart,G.strstart>=Be+(Be-$)){for(i.arraySet(G.window,G.window,Be,Be,0),G.match_start-=Be,G.strstart-=Be,G.block_start-=Be,be=Ie=G.hash_size;U=G.head[--be],G.head[be]=Be<=U?U-Be:0,--Ie;);for(be=Ie=Be;U=G.prev[--be],G.prev[be]=Be<=U?U-Be:0,--Ie;);ae+=Be}if(G.strm.avail_in===0)break;if(Fe=G.strm,Ce=G.window,we=G.strstart+G.lookahead,Ue=ae,Le=void 0,Le=Fe.avail_in,Ue<Le&&(Le=Ue),Ie=Le===0?0:(Fe.avail_in-=Le,i.arraySet(Ce,Fe.input,Fe.next_in,Le,we),Fe.state.wrap===1?Fe.adler=s(Fe.adler,Ce,Le,we):Fe.state.wrap===2&&(Fe.adler=a(Fe.adler,Ce,Le,we)),Fe.next_in+=Le,Fe.total_in+=Le,Le),G.lookahead+=Ie,G.lookahead+G.insert>=X)for(he=G.strstart-G.insert,G.ins_h=G.window[he],G.ins_h=(G.ins_h<<G.hash_shift^G.window[he+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[he+X-1])&G.hash_mask,G.prev[he&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=he,he++,G.insert--,!(G.lookahead+G.insert<X)););}while(G.lookahead<$&&G.strm.avail_in!==0)}function pe(G,be){for(var Ie,U;;){if(G.lookahead<$){if(ce(G),G.lookahead<$&&be===c)return v;if(G.lookahead===0)break}if(Ie=0,G.lookahead>=X&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),Ie!==0&&G.strstart-Ie<=G.w_size-$&&(G.match_length=ee(G,Ie)),G.match_length>=X)if(U=o._tr_tally(G,G.strstart-G.match_start,G.match_length-X),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=X){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else U=o._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(U&&(oe(G,!1),G.strm.avail_out===0))return v}return G.insert=G.strstart<X-1?G.strstart:X-1,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):G.last_lit&&(oe(G,!1),G.strm.avail_out===0)?v:I}function J(G,be){for(var Ie,U,ae;;){if(G.lookahead<$){if(ce(G),G.lookahead<$&&be===c)return v;if(G.lookahead===0)break}if(Ie=0,G.lookahead>=X&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=X-1,Ie!==0&&G.prev_length<G.max_lazy_match&&G.strstart-Ie<=G.w_size-$&&(G.match_length=ee(G,Ie),G.match_length<=5&&(G.strategy===1||G.match_length===X&&4096<G.strstart-G.match_start)&&(G.match_length=X-1)),G.prev_length>=X&&G.match_length<=G.prev_length){for(ae=G.strstart+G.lookahead-X,U=o._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-X),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=ae&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=X-1,G.strstart++,U&&(oe(G,!1),G.strm.avail_out===0))return v}else if(G.match_available){if((U=o._tr_tally(G,0,G.window[G.strstart-1]))&&oe(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return v}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(U=o._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<X-1?G.strstart:X-1,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):G.last_lit&&(oe(G,!1),G.strm.avail_out===0)?v:I}function xe(G,be,Ie,U,ae){this.good_length=G,this.max_lazy=be,this.nice_length=Ie,this.max_chain=U,this.func=ae}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*k),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*N+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(W+1),this.heap=new i.Buf16(2*T+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*T+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(G){var be;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=x,(be=G.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?V:B,G.adler=be.wrap===2?0:1,be.last_flush=c,o._tr_init(be),d):Q(G,y)}function re(G){var be=ve(G);return be===d&&(function(Ie){Ie.window_size=2*Ie.w_size,q(Ie.head),Ie.max_lazy_match=r[Ie.level].max_lazy,Ie.good_match=r[Ie.level].good_length,Ie.nice_match=r[Ie.level].nice_length,Ie.max_chain_length=r[Ie.level].max_chain,Ie.strstart=0,Ie.block_start=0,Ie.lookahead=0,Ie.insert=0,Ie.match_length=Ie.prev_length=X-1,Ie.match_available=0,Ie.ins_h=0})(G.state),be}function He(G,be,Ie,U,ae,he){if(!G)return y;var Fe=1;if(be===p&&(be=6),U<0?(Fe=0,U=-U):15<U&&(Fe=2,U-=16),ae<1||S<ae||Ie!==b||U<8||15<U||be<0||9<be||he<0||_<he)return Q(G,y);U===8&&(U=9);var Ce=new Se;return(G.state=Ce).strm=G,Ce.wrap=Fe,Ce.gzhead=null,Ce.w_bits=U,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=ae+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+X-1)/X),Ce.window=new i.Buf8(2*Ce.w_size),Ce.head=new i.Buf16(Ce.hash_size),Ce.prev=new i.Buf16(Ce.w_size),Ce.lit_bufsize=1<<ae+6,Ce.pending_buf_size=4*Ce.lit_bufsize,Ce.pending_buf=new i.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=be,Ce.strategy=he,Ce.method=Ie,re(G)}r=[new xe(0,0,0,0,function(G,be){var Ie=65535;for(Ie>G.pending_buf_size-5&&(Ie=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ce(G),G.lookahead===0&&be===c)return v;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var U=G.block_start+Ie;if((G.strstart===0||G.strstart>=U)&&(G.lookahead=G.strstart-U,G.strstart=U,oe(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-$&&(oe(G,!1),G.strm.avail_out===0))return v}return G.insert=0,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):(G.strstart>G.block_start&&(oe(G,!1),G.strm.avail_out),v)}),new xe(4,4,8,4,pe),new xe(4,5,16,8,pe),new xe(4,6,32,32,pe),new xe(4,4,16,16,J),new xe(8,16,32,32,J),new xe(8,16,128,128,J),new xe(8,32,128,256,J),new xe(32,128,258,1024,J),new xe(32,258,258,4096,J)],t.deflateInit=function(G,be){return He(G,be,b,15,8,0)},t.deflateInit2=He,t.deflateReset=re,t.deflateResetKeep=ve,t.deflateSetHeader=function(G,be){return G&&G.state?G.state.wrap!==2?y:(G.state.gzhead=be,d):y},t.deflate=function(G,be){var Ie,U,ae,he;if(!G||!G.state||5<be||be<0)return G?Q(G,y):y;if(U=G.state,!G.output||!G.input&&G.avail_in!==0||U.status===666&&be!==f)return Q(G,G.avail_out===0?-5:y);if(U.strm=G,Ie=U.last_flush,U.last_flush=be,U.status===V)if(U.wrap===2)G.adler=0,_e(U,31),_e(U,139),_e(U,8),U.gzhead?(_e(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),_e(U,255&U.gzhead.time),_e(U,U.gzhead.time>>8&255),_e(U,U.gzhead.time>>16&255),_e(U,U.gzhead.time>>24&255),_e(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),_e(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(_e(U,255&U.gzhead.extra.length),_e(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(G.adler=a(G.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(_e(U,0),_e(U,0),_e(U,0),_e(U,0),_e(U,0),_e(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),_e(U,3),U.status=B);else{var Fe=b+(U.w_bits-8<<4)<<8;Fe|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(Fe|=32),Fe+=31-Fe%31,U.status=B,F(U,Fe),U.strstart!==0&&(F(U,G.adler>>>16),F(U,65535&G.adler)),G.adler=1}if(U.status===69)if(U.gzhead.extra){for(ae=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending!==U.pending_buf_size));)_e(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){ae=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending===U.pending_buf_size)){he=1;break}he=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,_e(U,he)}while(he!==0);U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),he===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){ae=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending===U.pending_buf_size)){he=1;break}he=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,_e(U,he)}while(he!==0);U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),he===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&K(G),U.pending+2<=U.pending_buf_size&&(_e(U,255&G.adler),_e(U,G.adler>>8&255),G.adler=0,U.status=B)):U.status=B),U.pending!==0){if(K(G),G.avail_out===0)return U.last_flush=-1,d}else if(G.avail_in===0&&Z(be)<=Z(Ie)&&be!==f)return Q(G,-5);if(U.status===666&&G.avail_in!==0)return Q(G,-5);if(G.avail_in!==0||U.lookahead!==0||be!==c&&U.status!==666){var Ce=U.strategy===2?(function(we,Ue){for(var Le;;){if(we.lookahead===0&&(ce(we),we.lookahead===0)){if(Ue===c)return v;break}if(we.match_length=0,Le=o._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Le&&(oe(we,!1),we.strm.avail_out===0))return v}return we.insert=0,Ue===f?(oe(we,!0),we.strm.avail_out===0?M:j):we.last_lit&&(oe(we,!1),we.strm.avail_out===0)?v:I})(U,be):U.strategy===3?(function(we,Ue){for(var Le,Be,pt,Tt,qe=we.window;;){if(we.lookahead<=Y){if(ce(we),we.lookahead<=Y&&Ue===c)return v;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=X&&0<we.strstart&&(Be=qe[pt=we.strstart-1])===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]){Tt=we.strstart+Y;do;while(Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&Be===qe[++pt]&&pt<Tt);we.match_length=Y-(Tt-pt),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=X?(Le=o._tr_tally(we,1,we.match_length-X),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Le=o._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Le&&(oe(we,!1),we.strm.avail_out===0))return v}return we.insert=0,Ue===f?(oe(we,!0),we.strm.avail_out===0?M:j):we.last_lit&&(oe(we,!1),we.strm.avail_out===0)?v:I})(U,be):r[U.level].func(U,be);if(Ce!==M&&Ce!==j||(U.status=666),Ce===v||Ce===M)return G.avail_out===0&&(U.last_flush=-1),d;if(Ce===I&&(be===1?o._tr_align(U):be!==5&&(o._tr_stored_block(U,0,0,!1),be===3&&(q(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),K(G),G.avail_out===0))return U.last_flush=-1,d}return be!==f?d:U.wrap<=0?1:(U.wrap===2?(_e(U,255&G.adler),_e(U,G.adler>>8&255),_e(U,G.adler>>16&255),_e(U,G.adler>>24&255),_e(U,255&G.total_in),_e(U,G.total_in>>8&255),_e(U,G.total_in>>16&255),_e(U,G.total_in>>24&255)):(F(U,G.adler>>>16),F(U,65535&G.adler)),K(G),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?d:1)},t.deflateEnd=function(G){var be;return G&&G.state?(be=G.state.status)!==V&&be!==69&&be!==73&&be!==91&&be!==103&&be!==B&&be!==666?Q(G,y):(G.state=null,be===B?Q(G,-3):d):y},t.deflateSetDictionary=function(G,be){var Ie,U,ae,he,Fe,Ce,we,Ue,Le=be.length;if(!G||!G.state||(he=(Ie=G.state).wrap)===2||he===1&&Ie.status!==V||Ie.lookahead)return y;for(he===1&&(G.adler=s(G.adler,be,Le,0)),Ie.wrap=0,Le>=Ie.w_size&&(he===0&&(q(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0),Ue=new i.Buf8(Ie.w_size),i.arraySet(Ue,be,Le-Ie.w_size,Ie.w_size,0),be=Ue,Le=Ie.w_size),Fe=G.avail_in,Ce=G.next_in,we=G.input,G.avail_in=Le,G.next_in=0,G.input=be,ce(Ie);Ie.lookahead>=X;){for(U=Ie.strstart,ae=Ie.lookahead-(X-1);Ie.ins_h=(Ie.ins_h<<Ie.hash_shift^Ie.window[U+X-1])&Ie.hash_mask,Ie.prev[U&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=U,U++,--ae;);Ie.strstart=U,Ie.lookahead=X-1,ce(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=X-1,Ie.match_available=0,G.next_in=Ce,G.input=we,G.avail_in=Fe,Ie.wrap=he,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,e,t){"use strict";e.exports=function(r,i){var o,s,a,l,c,f,d,y,p,_,x,b,S,T,A,N,k,W,X,Y,$,V,B,v,I;o=r.state,s=r.next_in,v=r.input,a=s+(r.avail_in-5),l=r.next_out,I=r.output,c=l-(i-r.avail_out),f=l+(r.avail_out-257),d=o.dmax,y=o.wsize,p=o.whave,_=o.wnext,x=o.window,b=o.hold,S=o.bits,T=o.lencode,A=o.distcode,N=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;e:do{S<15&&(b+=v[s++]<<S,S+=8,b+=v[s++]<<S,S+=8),W=T[b&N];t:for(;;){if(b>>>=X=W>>>24,S-=X,(X=W>>>16&255)===0)I[l++]=65535&W;else{if(!(16&X)){if((64&X)==0){W=T[(65535&W)+(b&(1<<X)-1)];continue t}if(32&X){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}Y=65535&W,(X&=15)&&(S<X&&(b+=v[s++]<<S,S+=8),Y+=b&(1<<X)-1,b>>>=X,S-=X),S<15&&(b+=v[s++]<<S,S+=8,b+=v[s++]<<S,S+=8),W=A[b&k];n:for(;;){if(b>>>=X=W>>>24,S-=X,!(16&(X=W>>>16&255))){if((64&X)==0){W=A[(65535&W)+(b&(1<<X)-1)];continue n}r.msg="invalid distance code",o.mode=30;break e}if($=65535&W,S<(X&=15)&&(b+=v[s++]<<S,(S+=8)<X&&(b+=v[s++]<<S,S+=8)),d<($+=b&(1<<X)-1)){r.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=X,S-=X,(X=l-c)<$){if(p<(X=$-X)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(B=x,(V=0)===_){if(V+=y-X,X<Y){for(Y-=X;I[l++]=x[V++],--X;);V=l-$,B=I}}else if(_<X){if(V+=y+_-X,(X-=_)<Y){for(Y-=X;I[l++]=x[V++],--X;);if(V=0,_<Y){for(Y-=X=_;I[l++]=x[V++],--X;);V=l-$,B=I}}}else if(V+=_-X,X<Y){for(Y-=X;I[l++]=x[V++],--X;);V=l-$,B=I}for(;2<Y;)I[l++]=B[V++],I[l++]=B[V++],I[l++]=B[V++],Y-=3;Y&&(I[l++]=B[V++],1<Y&&(I[l++]=B[V++]))}else{for(V=l-$;I[l++]=I[V++],I[l++]=I[V++],I[l++]=I[V++],2<(Y-=3););Y&&(I[l++]=I[V++],1<Y&&(I[l++]=I[V++]))}break}}break}}while(s<a&&l<f);s-=Y=S>>3,b&=(1<<(S-=Y<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<f?f-l+257:257-(l-f),o.hold=b,o.bits=S}},{}],49:[function(n,e,t){"use strict";var r=n("../utils/common"),i=n("./adler32"),o=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),l=1,c=2,f=0,d=-2,y=1,p=852,_=592;function x(V){return(V>>>24&255)+(V>>>8&65280)+((65280&V)<<8)+((255&V)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(V){var B;return V&&V.state?(B=V.state,V.total_in=V.total_out=B.total=0,V.msg="",B.wrap&&(V.adler=1&B.wrap),B.mode=y,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(p),B.distcode=B.distdyn=new r.Buf32(_),B.sane=1,B.back=-1,f):d}function T(V){var B;return V&&V.state?((B=V.state).wsize=0,B.whave=0,B.wnext=0,S(V)):d}function A(V,B){var v,I;return V&&V.state?(I=V.state,B<0?(v=0,B=-B):(v=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?d:(I.window!==null&&I.wbits!==B&&(I.window=null),I.wrap=v,I.wbits=B,T(V))):d}function N(V,B){var v,I;return V?(I=new b,(V.state=I).window=null,(v=A(V,B))!==f&&(V.state=null),v):d}var k,W,X=!0;function Y(V){if(X){var B;for(k=new r.Buf32(512),W=new r.Buf32(32),B=0;B<144;)V.lens[B++]=8;for(;B<256;)V.lens[B++]=9;for(;B<280;)V.lens[B++]=7;for(;B<288;)V.lens[B++]=8;for(a(l,V.lens,0,288,k,0,V.work,{bits:9}),B=0;B<32;)V.lens[B++]=5;a(c,V.lens,0,32,W,0,V.work,{bits:5}),X=!1}V.lencode=k,V.lenbits=9,V.distcode=W,V.distbits=5}function $(V,B,v,I){var M,j=V.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new r.Buf8(j.wsize)),I>=j.wsize?(r.arraySet(j.window,B,v-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(I<(M=j.wsize-j.wnext)&&(M=I),r.arraySet(j.window,B,v-I,M,j.wnext),(I-=M)?(r.arraySet(j.window,B,v-I,I,0),j.wnext=I,j.whave=j.wsize):(j.wnext+=M,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=M))),0}t.inflateReset=T,t.inflateReset2=A,t.inflateResetKeep=S,t.inflateInit=function(V){return N(V,15)},t.inflateInit2=N,t.inflate=function(V,B){var v,I,M,j,Q,Z,q,K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re,He,G,be,Ie,U,ae=0,he=new r.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return d;(v=V.state).mode===12&&(v.mode=13),Q=V.next_out,M=V.output,q=V.avail_out,j=V.next_in,I=V.input,Z=V.avail_in,K=v.hold,oe=v.bits,_e=Z,F=q,be=f;e:for(;;)switch(v.mode){case y:if(v.wrap===0){v.mode=13;break}for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(2&v.wrap&&K===35615){he[v.check=0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0),oe=K=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&K)<<8)+(K>>8))%31){V.msg="incorrect header check",v.mode=30;break}if((15&K)!=8){V.msg="unknown compression method",v.mode=30;break}if(oe-=4,G=8+(15&(K>>>=4)),v.wbits===0)v.wbits=G;else if(G>v.wbits){V.msg="invalid window size",v.mode=30;break}v.dmax=1<<G,V.adler=v.check=1,v.mode=512&K?10:12,oe=K=0;break;case 2:for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(v.flags=K,(255&v.flags)!=8){V.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){V.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=K>>8&1),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0,v.mode=3;case 3:for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.head&&(v.head.time=K),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,he[2]=K>>>16&255,he[3]=K>>>24&255,v.check=o(v.check,he,4,0)),oe=K=0,v.mode=4;case 4:for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.head&&(v.head.xflags=255&K,v.head.os=K>>8),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0,v.mode=5;case 5:if(1024&v.flags){for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.length=K,v.head&&(v.head.extra_len=K),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(Z<(ee=v.length)&&(ee=Z),ee&&(v.head&&(G=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),r.arraySet(v.head.extra,I,j,ee,G)),512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,v.length-=ee),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(Z===0)break e;for(ee=0;G=I[j+ee++],v.head&&G&&v.length<65536&&(v.head.name+=String.fromCharCode(G)),G&&ee<Z;);if(512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,G)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(Z===0)break e;for(ee=0;G=I[j+ee++],v.head&&G&&v.length<65536&&(v.head.comment+=String.fromCharCode(G)),G&&ee<Z;);if(512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,G)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K!==(65535&v.check)){V.msg="header crc mismatch",v.mode=30;break}oe=K=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),V.adler=v.check=0,v.mode=12;break;case 10:for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}V.adler=v.check=x(K),oe=K=0,v.mode=11;case 11:if(v.havedict===0)return V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,2;V.adler=v.check=1,v.mode=12;case 12:if(B===5||B===6)break e;case 13:if(v.last){K>>>=7&oe,oe-=7&oe,v.mode=27;break}for(;oe<3;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}switch(v.last=1&K,oe-=1,3&(K>>>=1)){case 0:v.mode=14;break;case 1:if(Y(v),v.mode=20,B!==6)break;K>>>=2,oe-=2;break e;case 2:v.mode=17;break;case 3:V.msg="invalid block type",v.mode=30}K>>>=2,oe-=2;break;case 14:for(K>>>=7&oe,oe-=7&oe;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if((65535&K)!=(K>>>16^65535)){V.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&K,oe=K=0,v.mode=15,B===6)break e;case 15:v.mode=16;case 16:if(ee=v.length){if(Z<ee&&(ee=Z),q<ee&&(ee=q),ee===0)break e;r.arraySet(M,I,j,ee,Q),Z-=ee,j+=ee,q-=ee,Q+=ee,v.length-=ee;break}v.mode=12;break;case 17:for(;oe<14;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(v.nlen=257+(31&K),K>>>=5,oe-=5,v.ndist=1+(31&K),K>>>=5,oe-=5,v.ncode=4+(15&K),K>>>=4,oe-=4,286<v.nlen||30<v.ndist){V.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;oe<3;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.lens[Fe[v.have++]]=7&K,K>>>=3,oe-=3}for(;v.have<19;)v.lens[Fe[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,Ie={bits:v.lenbits},be=a(0,v.lens,0,19,v.lencode,0,v.work,Ie),v.lenbits=Ie.bits,be){V.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;xe=(ae=v.lencode[K&(1<<v.lenbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(Se<16)K>>>=J,oe-=J,v.lens[v.have++]=Se;else{if(Se===16){for(U=J+2;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K>>>=J,oe-=J,v.have===0){V.msg="invalid bit length repeat",v.mode=30;break}G=v.lens[v.have-1],ee=3+(3&K),K>>>=2,oe-=2}else if(Se===17){for(U=J+3;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}oe-=J,G=0,ee=3+(7&(K>>>=J)),K>>>=3,oe-=3}else{for(U=J+7;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}oe-=J,G=0,ee=11+(127&(K>>>=J)),K>>>=7,oe-=7}if(v.have+ee>v.nlen+v.ndist){V.msg="invalid bit length repeat",v.mode=30;break}for(;ee--;)v.lens[v.have++]=G}}if(v.mode===30)break;if(v.lens[256]===0){V.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,Ie={bits:v.lenbits},be=a(l,v.lens,0,v.nlen,v.lencode,0,v.work,Ie),v.lenbits=Ie.bits,be){V.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,Ie={bits:v.distbits},be=a(c,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,Ie),v.distbits=Ie.bits,be){V.msg="invalid distances set",v.mode=30;break}if(v.mode=20,B===6)break e;case 20:v.mode=21;case 21:if(6<=Z&&258<=q){V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,s(V,F),Q=V.next_out,M=V.output,q=V.avail_out,j=V.next_in,I=V.input,Z=V.avail_in,K=v.hold,oe=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;xe=(ae=v.lencode[K&(1<<v.lenbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(xe&&(240&xe)==0){for(ve=J,re=xe,He=Se;xe=(ae=v.lencode[He+((K&(1<<ve+re)-1)>>ve)])>>>16&255,Se=65535&ae,!(ve+(J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}K>>>=ve,oe-=ve,v.back+=ve}if(K>>>=J,oe-=J,v.back+=J,v.length=Se,xe===0){v.mode=26;break}if(32&xe){v.back=-1,v.mode=12;break}if(64&xe){V.msg="invalid literal/length code",v.mode=30;break}v.extra=15&xe,v.mode=22;case 22:if(v.extra){for(U=v.extra;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.length+=K&(1<<v.extra)-1,K>>>=v.extra,oe-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;xe=(ae=v.distcode[K&(1<<v.distbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if((240&xe)==0){for(ve=J,re=xe,He=Se;xe=(ae=v.distcode[He+((K&(1<<ve+re)-1)>>ve)])>>>16&255,Se=65535&ae,!(ve+(J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}K>>>=ve,oe-=ve,v.back+=ve}if(K>>>=J,oe-=J,v.back+=J,64&xe){V.msg="invalid distance code",v.mode=30;break}v.offset=Se,v.extra=15&xe,v.mode=24;case 24:if(v.extra){for(U=v.extra;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.offset+=K&(1<<v.extra)-1,K>>>=v.extra,oe-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){V.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(q===0)break e;if(ee=F-q,v.offset>ee){if((ee=v.offset-ee)>v.whave&&v.sane){V.msg="invalid distance too far back",v.mode=30;break}ce=ee>v.wnext?(ee-=v.wnext,v.wsize-ee):v.wnext-ee,ee>v.length&&(ee=v.length),pe=v.window}else pe=M,ce=Q-v.offset,ee=v.length;for(q<ee&&(ee=q),q-=ee,v.length-=ee;M[Q++]=pe[ce++],--ee;);v.length===0&&(v.mode=21);break;case 26:if(q===0)break e;M[Q++]=v.length,q--,v.mode=21;break;case 27:if(v.wrap){for(;oe<32;){if(Z===0)break e;Z--,K|=I[j++]<<oe,oe+=8}if(F-=q,V.total_out+=F,v.total+=F,F&&(V.adler=v.check=v.flags?o(v.check,M,F,Q-F):i(v.check,M,F,Q-F)),F=q,(v.flags?K:x(K))!==v.check){V.msg="incorrect data check",v.mode=30;break}oe=K=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K!==(4294967295&v.total)){V.msg="incorrect length check",v.mode=30;break}oe=K=0}v.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return d}return V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,(v.wsize||F!==V.avail_out&&v.mode<30&&(v.mode<27||B!==4))&&$(V,V.output,V.next_out,F-V.avail_out)?(v.mode=31,-4):(_e-=V.avail_in,F-=V.avail_out,V.total_in+=_e,V.total_out+=F,v.total+=F,v.wrap&&F&&(V.adler=v.check=v.flags?o(v.check,M,F,V.next_out-F):i(v.check,M,F,V.next_out-F)),V.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(_e==0&&F===0||B===4)&&be===f&&(be=-5),be)},t.inflateEnd=function(V){if(!V||!V.state)return d;var B=V.state;return B.window&&(B.window=null),V.state=null,f},t.inflateGetHeader=function(V,B){var v;return V&&V.state?(2&(v=V.state).wrap)==0?d:((v.head=B).done=!1,f):d},t.inflateSetDictionary=function(V,B){var v,I=B.length;return V&&V.state?(v=V.state).wrap!==0&&v.mode!==11?d:v.mode===11&&i(1,B,I,0)!==v.check?-3:$(V,B,I,I)?(v.mode=31,-4):(v.havedict=1,f):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,e,t){"use strict";var r=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(l,c,f,d,y,p,_,x){var b,S,T,A,N,k,W,X,Y,$=x.bits,V=0,B=0,v=0,I=0,M=0,j=0,Q=0,Z=0,q=0,K=0,oe=null,_e=0,F=new r.Buf16(16),ee=new r.Buf16(16),ce=null,pe=0;for(V=0;V<=15;V++)F[V]=0;for(B=0;B<d;B++)F[c[f+B]]++;for(M=$,I=15;1<=I&&F[I]===0;I--);if(I<M&&(M=I),I===0)return y[p++]=20971520,y[p++]=20971520,x.bits=1,0;for(v=1;v<I&&F[v]===0;v++);for(M<v&&(M=v),V=Z=1;V<=15;V++)if(Z<<=1,(Z-=F[V])<0)return-1;if(0<Z&&(l===0||I!==1))return-1;for(ee[1]=0,V=1;V<15;V++)ee[V+1]=ee[V]+F[V];for(B=0;B<d;B++)c[f+B]!==0&&(_[ee[c[f+B]]++]=B);if(k=l===0?(oe=ce=_,19):l===1?(oe=i,_e-=257,ce=o,pe-=257,256):(oe=s,ce=a,-1),V=v,N=p,Q=B=K=0,T=-1,A=(q=1<<(j=M))-1,l===1&&852<q||l===2&&592<q)return 1;for(;;){for(W=V-Q,Y=_[B]<k?(X=0,_[B]):_[B]>k?(X=ce[pe+_[B]],oe[_e+_[B]]):(X=96,0),b=1<<V-Q,v=S=1<<j;y[N+(K>>Q)+(S-=b)]=W<<24|X<<16|Y|0,S!==0;);for(b=1<<V-1;K&b;)b>>=1;if(b!==0?(K&=b-1,K+=b):K=0,B++,--F[V]==0){if(V===I)break;V=c[f+_[B]]}if(M<V&&(K&A)!==T){for(Q===0&&(Q=M),N+=v,Z=1<<(j=V-Q);j+Q<I&&!((Z-=F[j+Q])<=0);)j++,Z<<=1;if(q+=1<<j,l===1&&852<q||l===2&&592<q)return 1;y[T=K&A]=M<<24|j<<16|N-p|0}}return K!==0&&(y[N+K]=V-Q<<24|64<<16|0),x.bits=M,0}},{"../utils/common":41}],51:[function(n,e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,e,t){"use strict";var r=n("../utils/common"),i=0,o=1;function s(ae){for(var he=ae.length;0<=--he;)ae[he]=0}var a=0,l=29,c=256,f=c+1+l,d=30,y=19,p=2*f+1,_=15,x=16,b=7,S=256,T=16,A=17,N=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(f+2));s($);var V=new Array(2*d);s(V);var B=new Array(512);s(B);var v=new Array(256);s(v);var I=new Array(l);s(I);var M,j,Q,Z=new Array(d);function q(ae,he,Fe,Ce,we){this.static_tree=ae,this.extra_bits=he,this.extra_base=Fe,this.elems=Ce,this.max_length=we,this.has_stree=ae&&ae.length}function K(ae,he){this.dyn_tree=ae,this.max_code=0,this.stat_desc=he}function oe(ae){return ae<256?B[ae]:B[256+(ae>>>7)]}function _e(ae,he){ae.pending_buf[ae.pending++]=255&he,ae.pending_buf[ae.pending++]=he>>>8&255}function F(ae,he,Fe){ae.bi_valid>x-Fe?(ae.bi_buf|=he<<ae.bi_valid&65535,_e(ae,ae.bi_buf),ae.bi_buf=he>>x-ae.bi_valid,ae.bi_valid+=Fe-x):(ae.bi_buf|=he<<ae.bi_valid&65535,ae.bi_valid+=Fe)}function ee(ae,he,Fe){F(ae,Fe[2*he],Fe[2*he+1])}function ce(ae,he){for(var Fe=0;Fe|=1&ae,ae>>>=1,Fe<<=1,0<--he;);return Fe>>>1}function pe(ae,he,Fe){var Ce,we,Ue=new Array(_+1),Le=0;for(Ce=1;Ce<=_;Ce++)Ue[Ce]=Le=Le+Fe[Ce-1]<<1;for(we=0;we<=he;we++){var Be=ae[2*we+1];Be!==0&&(ae[2*we]=ce(Ue[Be]++,Be))}}function J(ae){var he;for(he=0;he<f;he++)ae.dyn_ltree[2*he]=0;for(he=0;he<d;he++)ae.dyn_dtree[2*he]=0;for(he=0;he<y;he++)ae.bl_tree[2*he]=0;ae.dyn_ltree[2*S]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function xe(ae){8<ae.bi_valid?_e(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function Se(ae,he,Fe,Ce){var we=2*he,Ue=2*Fe;return ae[we]<ae[Ue]||ae[we]===ae[Ue]&&Ce[he]<=Ce[Fe]}function ve(ae,he,Fe){for(var Ce=ae.heap[Fe],we=Fe<<1;we<=ae.heap_len&&(we<ae.heap_len&&Se(he,ae.heap[we+1],ae.heap[we],ae.depth)&&we++,!Se(he,Ce,ae.heap[we],ae.depth));)ae.heap[Fe]=ae.heap[we],Fe=we,we<<=1;ae.heap[Fe]=Ce}function re(ae,he,Fe){var Ce,we,Ue,Le,Be=0;if(ae.last_lit!==0)for(;Ce=ae.pending_buf[ae.d_buf+2*Be]<<8|ae.pending_buf[ae.d_buf+2*Be+1],we=ae.pending_buf[ae.l_buf+Be],Be++,Ce===0?ee(ae,we,he):(ee(ae,(Ue=v[we])+c+1,he),(Le=k[Ue])!==0&&F(ae,we-=I[Ue],Le),ee(ae,Ue=oe(--Ce),Fe),(Le=W[Ue])!==0&&F(ae,Ce-=Z[Ue],Le)),Be<ae.last_lit;);ee(ae,S,he)}function He(ae,he){var Fe,Ce,we,Ue=he.dyn_tree,Le=he.stat_desc.static_tree,Be=he.stat_desc.has_stree,pt=he.stat_desc.elems,Tt=-1;for(ae.heap_len=0,ae.heap_max=p,Fe=0;Fe<pt;Fe++)Ue[2*Fe]!==0?(ae.heap[++ae.heap_len]=Tt=Fe,ae.depth[Fe]=0):Ue[2*Fe+1]=0;for(;ae.heap_len<2;)Ue[2*(we=ae.heap[++ae.heap_len]=Tt<2?++Tt:0)]=1,ae.depth[we]=0,ae.opt_len--,Be&&(ae.static_len-=Le[2*we+1]);for(he.max_code=Tt,Fe=ae.heap_len>>1;1<=Fe;Fe--)ve(ae,Ue,Fe);for(we=pt;Fe=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],ve(ae,Ue,1),Ce=ae.heap[1],ae.heap[--ae.heap_max]=Fe,ae.heap[--ae.heap_max]=Ce,Ue[2*we]=Ue[2*Fe]+Ue[2*Ce],ae.depth[we]=(ae.depth[Fe]>=ae.depth[Ce]?ae.depth[Fe]:ae.depth[Ce])+1,Ue[2*Fe+1]=Ue[2*Ce+1]=we,ae.heap[1]=we++,ve(ae,Ue,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],(function(qe,qt){var xt,Qe,Kt,ft,Pr,mt,Zt=qt.dyn_tree,hn=qt.max_code,dr=qt.stat_desc.static_tree,Dt=qt.stat_desc.has_stree,sr=qt.stat_desc.extra_bits,At=qt.stat_desc.extra_base,Vt=qt.stat_desc.max_length,Vn=0;for(ft=0;ft<=_;ft++)qe.bl_count[ft]=0;for(Zt[2*qe.heap[qe.heap_max]+1]=0,xt=qe.heap_max+1;xt<p;xt++)Vt<(ft=Zt[2*Zt[2*(Qe=qe.heap[xt])+1]+1]+1)&&(ft=Vt,Vn++),Zt[2*Qe+1]=ft,hn<Qe||(qe.bl_count[ft]++,Pr=0,At<=Qe&&(Pr=sr[Qe-At]),mt=Zt[2*Qe],qe.opt_len+=mt*(ft+Pr),Dt&&(qe.static_len+=mt*(dr[2*Qe+1]+Pr)));if(Vn!==0){do{for(ft=Vt-1;qe.bl_count[ft]===0;)ft--;qe.bl_count[ft]--,qe.bl_count[ft+1]+=2,qe.bl_count[Vt]--,Vn-=2}while(0<Vn);for(ft=Vt;ft!==0;ft--)for(Qe=qe.bl_count[ft];Qe!==0;)hn<(Kt=qe.heap[--xt])||(Zt[2*Kt+1]!==ft&&(qe.opt_len+=(ft-Zt[2*Kt+1])*Zt[2*Kt],Zt[2*Kt+1]=ft),Qe--)}})(ae,he),pe(Ue,Tt,ae.bl_count)}function G(ae,he,Fe){var Ce,we,Ue=-1,Le=he[1],Be=0,pt=7,Tt=4;for(Le===0&&(pt=138,Tt=3),he[2*(Fe+1)+1]=65535,Ce=0;Ce<=Fe;Ce++)we=Le,Le=he[2*(Ce+1)+1],++Be<pt&&we===Le||(Be<Tt?ae.bl_tree[2*we]+=Be:we!==0?(we!==Ue&&ae.bl_tree[2*we]++,ae.bl_tree[2*T]++):Be<=10?ae.bl_tree[2*A]++:ae.bl_tree[2*N]++,Ue=we,Tt=(Be=0)===Le?(pt=138,3):we===Le?(pt=6,3):(pt=7,4))}function be(ae,he,Fe){var Ce,we,Ue=-1,Le=he[1],Be=0,pt=7,Tt=4;for(Le===0&&(pt=138,Tt=3),Ce=0;Ce<=Fe;Ce++)if(we=Le,Le=he[2*(Ce+1)+1],!(++Be<pt&&we===Le)){if(Be<Tt)for(;ee(ae,we,ae.bl_tree),--Be!=0;);else we!==0?(we!==Ue&&(ee(ae,we,ae.bl_tree),Be--),ee(ae,T,ae.bl_tree),F(ae,Be-3,2)):Be<=10?(ee(ae,A,ae.bl_tree),F(ae,Be-3,3)):(ee(ae,N,ae.bl_tree),F(ae,Be-11,7));Ue=we,Tt=(Be=0)===Le?(pt=138,3):we===Le?(pt=6,3):(pt=7,4)}}s(Z);var Ie=!1;function U(ae,he,Fe,Ce){F(ae,(a<<1)+(Ce?1:0),3),(function(we,Ue,Le,Be){xe(we),Be&&(_e(we,Le),_e(we,~Le)),r.arraySet(we.pending_buf,we.window,Ue,Le,we.pending),we.pending+=Le})(ae,he,Fe,!0)}t._tr_init=function(ae){Ie||((function(){var he,Fe,Ce,we,Ue,Le=new Array(_+1);for(we=Ce=0;we<l-1;we++)for(I[we]=Ce,he=0;he<1<<k[we];he++)v[Ce++]=we;for(v[Ce-1]=we,we=Ue=0;we<16;we++)for(Z[we]=Ue,he=0;he<1<<W[we];he++)B[Ue++]=we;for(Ue>>=7;we<d;we++)for(Z[we]=Ue<<7,he=0;he<1<<W[we]-7;he++)B[256+Ue++]=we;for(Fe=0;Fe<=_;Fe++)Le[Fe]=0;for(he=0;he<=143;)$[2*he+1]=8,he++,Le[8]++;for(;he<=255;)$[2*he+1]=9,he++,Le[9]++;for(;he<=279;)$[2*he+1]=7,he++,Le[7]++;for(;he<=287;)$[2*he+1]=8,he++,Le[8]++;for(pe($,f+1,Le),he=0;he<d;he++)V[2*he+1]=5,V[2*he]=ce(he,5);M=new q($,k,c+1,f,_),j=new q(V,W,0,d,_),Q=new q(new Array(0),X,0,y,b)})(),Ie=!0),ae.l_desc=new K(ae.dyn_ltree,M),ae.d_desc=new K(ae.dyn_dtree,j),ae.bl_desc=new K(ae.bl_tree,Q),ae.bi_buf=0,ae.bi_valid=0,J(ae)},t._tr_stored_block=U,t._tr_flush_block=function(ae,he,Fe,Ce){var we,Ue,Le=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=(function(Be){var pt,Tt=4093624447;for(pt=0;pt<=31;pt++,Tt>>>=1)if(1&Tt&&Be.dyn_ltree[2*pt]!==0)return i;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return o;for(pt=32;pt<c;pt++)if(Be.dyn_ltree[2*pt]!==0)return o;return i})(ae)),He(ae,ae.l_desc),He(ae,ae.d_desc),Le=(function(Be){var pt;for(G(Be,Be.dyn_ltree,Be.l_desc.max_code),G(Be,Be.dyn_dtree,Be.d_desc.max_code),He(Be,Be.bl_desc),pt=y-1;3<=pt&&Be.bl_tree[2*Y[pt]+1]===0;pt--);return Be.opt_len+=3*(pt+1)+5+5+4,pt})(ae),we=ae.opt_len+3+7>>>3,(Ue=ae.static_len+3+7>>>3)<=we&&(we=Ue)):we=Ue=Fe+5,Fe+4<=we&&he!==-1?U(ae,he,Fe,Ce):ae.strategy===4||Ue===we?(F(ae,2+(Ce?1:0),3),re(ae,$,V)):(F(ae,4+(Ce?1:0),3),(function(Be,pt,Tt,qe){var qt;for(F(Be,pt-257,5),F(Be,Tt-1,5),F(Be,qe-4,4),qt=0;qt<qe;qt++)F(Be,Be.bl_tree[2*Y[qt]+1],3);be(Be,Be.dyn_ltree,pt-1),be(Be,Be.dyn_dtree,Tt-1)})(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,Le+1),re(ae,ae.dyn_ltree,ae.dyn_dtree)),J(ae),Ce&&xe(ae)},t._tr_tally=function(ae,he,Fe){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=he>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&he,ae.pending_buf[ae.l_buf+ae.last_lit]=255&Fe,ae.last_lit++,he===0?ae.dyn_ltree[2*Fe]++:(ae.matches++,he--,ae.dyn_ltree[2*(v[Fe]+c+1)]++,ae.dyn_dtree[2*oe(he)]++),ae.last_lit===ae.lit_bufsize-1},t._tr_align=function(ae){F(ae,2,3),ee(ae,S,$),(function(he){he.bi_valid===16?(_e(he,he.bi_buf),he.bi_buf=0,he.bi_valid=0):8<=he.bi_valid&&(he.pending_buf[he.pending++]=255&he.bi_buf,he.bi_buf>>=8,he.bi_valid-=8)})(ae)}},{"../utils/common":41}],53:[function(n,e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,e,t){(function(r){(function(i,o){"use strict";if(!i.setImmediate){var s,a,l,c,f=1,d={},y=!1,p=i.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(i);_=_&&_.setTimeout?_:i,s={}.toString.call(i.process)==="[object process]"?function(T){process.nextTick(function(){b(T)})}:(function(){if(i.postMessage&&!i.importScripts){var T=!0,A=i.onmessage;return i.onmessage=function(){T=!1},i.postMessage("","*"),i.onmessage=A,T}})()?(c="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(T){i.postMessage(c+T,"*")}):i.MessageChannel?((l=new MessageChannel).port1.onmessage=function(T){b(T.data)},function(T){l.port2.postMessage(T)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(T){var A=p.createElement("script");A.onreadystatechange=function(){b(T),A.onreadystatechange=null,a.removeChild(A),A=null},a.appendChild(A)}):function(T){setTimeout(b,0,T)},_.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var A=new Array(arguments.length-1),N=0;N<A.length;N++)A[N]=arguments[N+1];var k={callback:T,args:A};return d[f]=k,s(f),f++},_.clearImmediate=x}function x(T){delete d[T]}function b(T){if(y)setTimeout(b,0,T);else{var A=d[T];if(A){y=!0;try{(function(N){var k=N.callback,W=N.args;switch(W.length){case 0:k();break;case 1:k(W[0]);break;case 2:k(W[0],W[1]);break;case 3:k(W[0],W[1],W[2]);break;default:k.apply(o,W)}})(A)}finally{x(T),y=!1}}}}function S(T){T.source===i&&typeof T.data=="string"&&T.data.indexOf(c)===0&&b(+T.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var $k=_r((Aet,Mq)=>{"use strict";Mq.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}});var Yk=_r((Ret,Nq)=>{"use strict";Nq.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}});var Pq=_r((Met,CC)=>{"use strict";CC.exports.lpad=function(e,t,r){for(;e.length<t;)e=r+e;return e};CC.exports.rpad=function(e,t,r){for(;e.length<t;)e=e+r;return e};CC.exports.writeField=function(e,t,r,i){for(var o=0;o<t;o++)e.setUint8(i,r.charCodeAt(o)),i++;return i}});var kq=_r((Net,IC)=>{"use strict";var fme=Yk(),dme={string:"C",number:"N",boolean:"L",null:"C"};IC.exports.multi=pme;IC.exports.bytesPer=mme;IC.exports.obj=Lq;function pme(n){var e={};n.forEach(t);function t(r){gme(e,r)}return Lq(e)}function gme(n,e){for(var t in e){var r=typeof e[t]<"u"&&e[t]!==null;(typeof n[t]>"u"||r)&&(n[t]=e[t])}return n}function Lq(n){var e={},t=[];for(var r in n)e[r]=n[r]===null?"null":typeof n[r];for(var i in e){var o=dme[e[i]];o&&t.push({name:i,type:o,size:fme[o]})}return t}function mme(n){return n.reduce(function(e,t){return e+t.size},1)}});var Bq=_r((Let,Fq)=>{"use strict";var Pet=Yk(),jy=Pq(),Oq=kq();Fq.exports=function(e,t){var r=t||Oq.multi(e),i=32*r.length+1,o=Oq.bytesPer(r),s=new ArrayBuffer(i+32+o*e.length+1),a=new Date,l=new DataView(s);l.setUint8(0,3),l.setUint8(1,a.getFullYear()-1900),l.setUint8(2,a.getMonth()+1),l.setUint8(3,a.getDate()),l.setUint32(4,e.length,!0);var c=i+32;l.setUint16(8,c,!0),l.setUint16(10,o,!0),l.setInt8(32+i-1,13),r.forEach(function(d,y){d.name.split("").slice(0,10).forEach(function(p,_){l.setInt8(32+y*32+_,p.charCodeAt(0))}),l.setInt8(32+y*32+11,d.type.charCodeAt(0)),l.setInt8(32+y*32+16,d.size),d.type=="N"&&l.setInt8(32+y*32+17,3)});var f=i+32;return e.forEach(function(d,y){l.setUint8(f,32),f++,r.forEach(function(p){var _=d[p.name];switch((_===null||typeof _>"u")&&(_=""),p.type){case"L":l.setUint8(f,_?84:70),f++;break;case"D":f=jy.writeField(l,8,jy.lpad(_.toString(),8," "),f);break;case"N":f=jy.writeField(l,p.size,jy.lpad(_.toString(),p.size," ").substr(0,18),f);break;case"C":f=jy.writeField(l,p.size,jy.rpad(_.toString(),p.size," "),f);break;default:throw new Error("Unknown field type")}})}),l.setUint8(f,26),l}});var Uq=_r((ket,jq)=>{"use strict";jq.exports.structure=Bq()});var Xk=_r((Oet,Gq)=>{"use strict";Gq.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'});var Zk=_r((Fet,TC)=>{"use strict";TC.exports.enlarge=function(e,t){return t[0]<e.xmin&&(e.xmin=t[0]),t[0]>e.xmax&&(e.xmax=t[0]),t[1]<e.ymin&&(e.ymin=t[1]),t[1]>e.ymax&&(e.ymax=t[1]),e};TC.exports.enlargeExtent=function(e,t){return t.xmax>e.xmax&&(e.xmax=t.xmax),t.xmin<e.xmin&&(e.xmin=t.xmin),t.ymax>e.ymax&&(e.ymax=t.ymax),t.ymin<e.ymin&&(e.ymin=t.ymin),e};TC.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}});var Vq=_r((Bet,Uy)=>{"use strict";var zq=Zk();Uy.exports.write=function(e,t,r,i){var o=28,s=100,a=0,l=0;e.forEach(function(f,d){r.setInt32(a,d+1),r.setInt32(a+4,10),r.setInt32(a+8,1,!0),r.setFloat64(a+12,f[0],!0),r.setFloat64(a+20,f[1],!0),i.setInt32(l,s/2),i.setInt32(l+4,10),l+=8,a+=o,s+=o})};Uy.exports.extent=function(n){return n.reduce(function(e,t){return zq.enlarge(e,t)},zq.blank())};Uy.exports.parts=function(e,t){return e.length};Uy.exports.shxLength=function(n){return n.length*8};Uy.exports.shpLength=function(n){return n.length*28}});var Wq=_r((jet,Gy)=>{"use strict";var DC=Zk(),Hq=$k();Gy.exports.write=function(e,t,r,i,o){var s=0,a=0,l=100;e.forEach(c);function c(f,d){var y=AC(f),p=qq([f],o),_=y.length*16+48+(p-1)*4,x=y.reduce(function(T,A){return DC.enlarge(T,A)},DC.blank());i.setInt32(a,l/2),i.setInt32(a+4,_/2),a+=8,l+=_+8,r.setInt32(s,d+1),r.setInt32(s+4,_/2),r.setInt32(s+8,o,!0),r.setFloat64(s+12,x.xmin,!0),r.setFloat64(s+20,x.ymin,!0),r.setFloat64(s+28,x.xmax,!0),r.setFloat64(s+36,x.ymax,!0),r.setInt32(s+44,p,!0),r.setInt32(s+48,y.length,!0),r.setInt32(s+52,0,!0);for(var b=f.reduce(function(T,A){return Array.isArray(A[0][0])?T=T.concat(A):T.push(A),T},[]),S=1;S<p;S++)r.setInt32(s+52+S*4,b.reduce(function(T,A,N){return N<S?T+A.length:T},0),!0);y.forEach(function(A,N){r.setFloat64(s+56+N*16+(p-1)*4,A[0],!0),r.setFloat64(s+56+N*16+(p-1)*4+8,A[1],!0)}),s+=_+8}};Gy.exports.shpLength=function(n){return n.length*56+AC(n).length*16};Gy.exports.shxLength=function(n){return n.length*8};Gy.exports.extent=function(n){return AC(n).reduce(function(e,t){return DC.enlarge(e,t)},DC.blank())};function qq(n,e){var t=1;return(e===Hq.geometries.POLYGON||e===Hq.geometries.POLYLINE)&&(t=n.reduce(function(r,i){return r+=i.length,Array.isArray(i[0][0][0])&&(r+=i.reduce(function(o,s){return o+s.length-1},0)),r},0)),t}Gy.exports.parts=qq;function AC(n,e){return e===void 0&&(e=[]),typeof n[0][0]=="object"?n.reduce(function(t,r){return t.concat(AC(r))},e):n}});var Kk=_r((Uet,Zq)=>{"use strict";var yme=$k(),_me=Uq(),vme=Xk(),xme=Vq(),$q=Wq(),wme={1:xme,5:$q,3:$q};Zq.exports=Eme;function Eme(n,e,t,r){var i=yme.geometries[e],o=wme[i],s=o.parts(t,i),a=100+(s-t.length)*4+o.shpLength(t),l=100+o.shxLength(t),c=new ArrayBuffer(a),f=new DataView(c),d=new ArrayBuffer(l),y=new DataView(d),p=o.extent(t);Yq(f,i),Yq(y,i),Xq(p,f),Xq(p,y),o.write(t,p,new DataView(c,100),new DataView(d,100),i),f.setInt32(24,a/2),y.setInt32(24,50+t.length*4);var _=_me.structure(n);r(null,{shp:f,shx:y,dbf:_,prj:vme})}function Yq(n,e){n.setInt32(0,9994),n.setInt32(28,1e3,!0),n.setInt32(32,e,!0)}function Xq(n,e){e.setFloat64(36,n.xmin,!0),e.setFloat64(44,n.ymin,!0),e.setFloat64(52,n.xmax,!0),e.setFloat64(60,n.ymax,!0)}});var Jq=_r((Get,zy)=>{"use strict";zy.exports.point=_x("Point","POINT");zy.exports.line=_x("LineString","POLYLINE");zy.exports.multiline=_x("MultiLineString","POLYLINE");zy.exports.polygon=_x("Polygon","POLYGON");zy.exports.multipolygon=_x("MultiPolygon","POLYGON");function _x(n,e){return function(t){var r=t.features.filter(Sme(n));return{geometries:e==="POLYLINE"?[r.map(Kq)]:r.map(Kq),properties:r.map(bme),type:e}}}function Kq(n){return n.geometry.coordinates}function bme(n){return n.properties}function Sme(n){return Array.isArray(n)?function(e){return n.includes(e.geometry.type)}:function(e){return e.geometry.type===n}}});var Jk=_r((zet,Qq)=>{"use strict";var Cme=Kk(),vx=Jq(),Ime=Xk(),Tme=Ok();Qq.exports=function(n,e,t=!1){let r=new Tme,i=r;e&&e.folder&&(i=r.folder(e.folder));var o=e&&e.prj?e.prj:Ime;[vx.point(n),vx.line(n),vx.polygon(n),vx.multipolygon(n),vx.multiline(n)].forEach(function(a){a.geometries.length&&a.geometries[0].length&&Cme(a.properties,a.type,a.geometries,function(l,c){var f=e&&e.types&&e.types[a.type.toLowerCase()]?e.types[a.type.toLowerCase()]:a.type;i.file(f+".shp",c.shp.buffer,{binary:!0}),i.file(f+".shx",c.shx.buffer,{binary:!0}),i.file(f+".dbf",c.dbf.buffer,{binary:!0}),i.file(f+".prj",o)})});var s={};return!e||!e.outputType?s.type="base64":s.type=e.outputType,!e||!e.compression?s.compression="DEFLATE":s.compression=e.compression,t?r.generateNodeStream(tn(dt({},s),{streamFiles:!0})):r.generateAsync(s)}});var eW=_r((Qk,eO)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof Qk<"u"?e():(e(),n.FileSaver={})})(Qk,function(){"use strict";function n(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,c){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,c)},f.onerror=function(){console.error("could not download file")},f.send()}function t(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,c){var f=i.URL||i.webkitURL,d=document.createElement("a");l=l||a.name||"download",d.download=l,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?r(d):t(d.href)?e(a,l,c):r(d,d.target="_blank")):(d.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,c),l);else if(t(a))e(a,l,c);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){r(f)})}}:function(a,l,c,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,c);var d=a.type==="application/octet-stream",y=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&y||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var S=_.result;S=p?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=S:location=S,f=null},_.readAsDataURL(a)}else{var x=i.URL||i.webkitURL,b=x.createObjectURL(a);f?f.location=b:location.href=b,f=null,setTimeout(function(){x.revokeObjectURL(b)},4e4)}});i.saveAs=s.saveAs=s,typeof eO<"u"&&(eO.exports=s)})});var nW=_r((Het,tW)=>{"use strict";var Dme=Jk(),Ame=eW().saveAs;tW.exports=function(n,e){let t="download";e&&(e.filename||e.folder)&&(t=e.filename||e.folder),Dme(n,e).then(function(r){Ame(r,t+".zip")})}});var rW=_r((qet,RC)=>{"use strict";RC.exports.download=nW();RC.exports.write=Kk();RC.exports.zip=Jk()});var FW=_r((ert,fO)=>{"use strict";function OW(n,e,t){let r=t&&t.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+n);let i=typeof n=="object"?n.outer:n,o=i.slice(0,i.indexOf(">")+1),s=['"',"'"];for(let a=0;a<s.length;a++){let l=s[a],c=e+"\\="+l+"([^"+l+"]*)"+l;r&&console.log("[xml-utils] pattern:",c);let d=new RegExp(c).exec(o);if(r&&console.log("[xml-utils] match:",d),d)return d[1]}}fO.exports=OW;fO.exports.default=OW});var jW=_r((trt,dO)=>{"use strict";function BW(n,e,t){let i=new RegExp(e).exec(n.slice(t));return i?t+i.index:-1}dO.exports=BW;dO.exports.default=BW});var GW=_r((nrt,pO)=>{"use strict";function UW(n,e,t){let i=new RegExp(e).exec(n.slice(t));return i?t+i.index+i[0].length-1:-1}pO.exports=UW;pO.exports.default=UW});var VW=_r((rrt,gO)=>{"use strict";function zW(n,e){let t=new RegExp(e,"g"),r=n.match(t);return r?r.length:0}gO.exports=zW;gO.exports.default=zW});var WW=_r((irt,yO)=>{"use strict";var e0e=jW(),mO=GW(),HW=VW();function qW(n,e,t){let r=t&&t.debug||!1,i=!(t&&typeof t.nested===!1),o=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);let s=e0e(n,`<${e}[ 
>/]`,o);if(r&&console.log("[xml-utils] start:",s),s===-1)return;let a=n.slice(s+e.length),l=mO(a,"^[^<]*[ /]>",0),c=l!==-1&&a[l-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",c),c===!1)if(i){let p=0,_=1,x=0;for(;(l=mO(a,"[ /]"+e+">",p))!==-1;){let b=a.substring(p,l+1);if(_+=HW(b,"<"+e+`[ 
	>]`),x+=HW(b,"</"+e+">"),x>=_)break;p=l}}else l=mO(a,"[ /]"+e+">",0);let f=s+e.length+l+1;if(r&&console.log("[xml-utils] end:",f),f===-1)return;let d=n.slice(s,f),y;return c?y=null:y=d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),{inner:y,outer:d,start:s,end:f}}yO.exports=qW;yO.exports.default=qW});var YW=_r((ort,_O)=>{"use strict";var t0e=WW();function $W(n,e,t){let r=[],i=t&&t.debug||!1,o=t&&typeof t.nested=="boolean"?t.nested:!0,s=t&&t.startIndex||0,a;for(;a=t0e(n,e,{debug:i,startIndex:s});)o?s=a.start+1+e.length:s=a.end,r.push(a);return i&&console.log("findTagsByName found",r.length,"tags"),r}_O.exports=$W;_O.exports.default=$W});var f$=_r(()=>{"use strict"});var d$=_r(()=>{"use strict"});var p$=_r(()=>{"use strict"});var RX=_r((W3,$3)=>{"use strict";(function(n,e){typeof W3=="object"&&typeof $3<"u"?$3.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).jsts=e()})(W3,function(){"use strict";function n(m,u){(u==null||u>m.length)&&(u=m.length);for(var h=0,g=Array(u);h<u;h++)g[h]=m[h];return g}function e(m,u,h){return u=l(u),(function(g,w){if(w&&(typeof w=="object"||typeof w=="function"))return w;if(w!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D})(g)})(m,f()?Reflect.construct(u,h||[],l(m).constructor):u.apply(m,h))}function t(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function r(m,u,h){if(f())return Reflect.construct.apply(null,arguments);var g=[null];g.push.apply(g,u);var w=new(m.bind.apply(m,g));return h&&d(w,h.prototype),w}function i(m,u){for(var h=0;h<u.length;h++){var g=u[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,_(g.key),g)}}function o(m,u,h){return u&&i(m.prototype,u),h&&i(m,h),Object.defineProperty(m,"prototype",{writable:!1}),m}function s(m,u){var h=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(!h){if(Array.isArray(m)||(h=x(m))||u){h&&(m=h);var g=0,w=function(){};return{s:w,n:function(){return g>=m.length?{done:!0}:{done:!1,value:m[g++]}},e:function(ie){throw ie},f:w}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D,O=!0,H=!1;return{s:function(){h=h.call(m)},n:function(){var ie=h.next();return O=ie.done,ie},e:function(ie){H=!0,D=ie},f:function(){try{O||h.return==null||h.return()}finally{if(H)throw D}}}}function a(){return a=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(m,u,h){var g=(function(D,O){for(;!{}.hasOwnProperty.call(D,O)&&(D=l(D))!==null;);return D})(m,u);if(g){var w=Object.getOwnPropertyDescriptor(g,u);return w.get?w.get.call(arguments.length<3?m:h):w.value}},a.apply(null,arguments)}function l(m){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},l(m)}function c(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),u&&d(m,u)}function f(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!m})()}function d(m,u){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},d(m,u)}function y(m,u,h,g){var w=a(l(1&g?m.prototype:m),u,h);return 2&g&&typeof w=="function"?function(D){return w.apply(h,D)}:w}function p(m){return(function(u){if(Array.isArray(u))return n(u)})(m)||(function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)})(m)||x(m)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _(m){var u=(function(h,g){if(typeof h!="object"||!h)return h;var w=h[Symbol.toPrimitive];if(w!==void 0){var D=w.call(h,g);if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)})(m,"string");return typeof u=="symbol"?u:u+""}function x(m,u){if(m){if(typeof m=="string")return n(m,u);var h={}.toString.call(m).slice(8,-1);return h==="Object"&&m.constructor&&(h=m.constructor.name),h==="Map"||h==="Set"?Array.from(m):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?n(m,u):void 0}}function b(m){var u=typeof Map=="function"?new Map:void 0;return b=function(h){if(h===null||!(function(w){try{return Function.toString.call(w).indexOf("[native code]")!==-1}catch{return typeof w=="function"}})(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(h))return u.get(h);u.set(h,g)}function g(){return r(h,arguments,l(this).constructor)}return g.prototype=Object.create(h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d(g,h)},b(m)}var S=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=m.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=m.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==m.JOIN_ROUND&&(this._quadrantSegments=m.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(u){this._joinStyle=u}},{key:"setSimplifyFactor",value:function(u){this._simplifyFactor=u<0?0:u}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(u){this._endCapStyle=u}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(u){this._mitreLimit=u}},{key:"setSingleSided",value:function(u){this._isSingleSided=u}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=m.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=m.CAP_ROUND,this._joinStyle=m.JOIN_ROUND,this._mitreLimit=m.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=m.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setQuadrantSegments(u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.setQuadrantSegments(h),this.setEndCapStyle(g)}else if(arguments.length===4){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3];this.setQuadrantSegments(w),this.setEndCapStyle(D),this.setJoinStyle(O),this.setMitreLimit(H)}}}},{key:"bufferDistanceError",value:function(u){var h=Math.PI/2/u;return 1-Math.cos(h/2)}}])})();S.CAP_ROUND=1,S.CAP_FLAT=2,S.CAP_SQUARE=3,S.JOIN_ROUND=1,S.JOIN_MITRE=2,S.JOIN_BEVEL=3,S.DEFAULT_QUADRANT_SEGMENTS=8,S.DEFAULT_MITRE_LIMIT=5,S.DEFAULT_SIMPLIFY_FACTOR=.01;var T=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({Exception:u})[0],g}return c(u,m),o(u,[{key:"toString",value:function(){return this.message}}])})(b(Error)),A=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({IllegalArgumentException:u})[0],g}return c(u,m),o(u)})(T),N=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})();function k(){}function W(){}function X(){}var Y,$,V,B,v,I,M,j,Q=(function(){return o(function m(){t(this,m)},null,[{key:"equalsWithTolerance",value:function(m,u,h){return Math.abs(m-u)<=h}}])})(),Z=(function(){return o(function m(u,h){t(this,m),this.low=h||0,this.high=u||0},null,[{key:"toBinaryString",value:function(m){var u,h="";for(u=2147483648;u>0;u>>>=1)h+=(m.high&u)===u?"1":"0";for(u=2147483648;u>0;u>>>=1)h+=(m.low&u)===u?"1":"0";return h}}])})();function q(){}function K(){}q.NaN=NaN,q.isNaN=function(m){return Number.isNaN(m)},q.isInfinite=function(m){return!Number.isFinite(m)},q.MAX_VALUE=Number.MAX_VALUE,q.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,q.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(I=2146435072,M=new Float64Array(1),j=new Int32Array(M.buffer),q.doubleToLongBits=function(m){M[0]=m;var u=0|j[0],h=0|j[1];return(h&I)===I&&1048575&h&&u!==0&&(u=0,h=2146959360),new Z(h,u)},q.longBitsToDouble=function(m){return j[0]=m.low,j[1]=m.high,M[0]}):(Y=1023,$=Math.log2,V=Math.floor,B=Math.pow,v=(function(){for(var m=53;m>0;m--){var u=B(2,m)-1;if(V($(u))+1===m)return u}return 0})(),q.doubleToLongBits=function(m){var u,h,g,w,D,O,H,ie,de;if(m<0||1/m===Number.NEGATIVE_INFINITY?(O=1<<31,m=-m):O=0,m===0)return new Z(ie=O,de=0);if(m===1/0)return new Z(ie=2146435072|O,de=0);if(m!=m)return new Z(ie=2146959360,de=0);if(w=0,de=0,(u=V(m))>1)if(u<=v)(w=V($(u)))<=20?(de=0,ie=u<<20-w&1048575):(de=u%(h=B(2,g=w-20))<<32-g,ie=u/h&1048575);else for(g=u,de=0;(g=V(h=g/2))!==0;)w++,de>>>=1,de|=(1&ie)<<31,ie>>>=1,h!==g&&(ie|=524288);if(H=w+Y,D=u===0,u=m-u,w<52&&u!==0)for(g=0;;){if((h=2*u)>=1?(u=h-1,D?(H--,D=!1):(g<<=1,g|=1,w++)):(u=h,D?--H==0&&(w++,D=!1):(g<<=1,w++)),w===20)ie|=g,g=0;else if(w===52){de|=g;break}if(h===1){w<20?ie|=g<<20-w:w<52&&(de|=g<<52-w);break}}return ie|=H<<20,new Z(ie|=O,de)},q.longBitsToDouble=function(m){var u,h,g,w,D=m.high,O=m.low,H=D&1<<31?-1:1;for(g=((2146435072&D)>>20)-Y,w=0,h=1<<19,u=1;u<=20;u++)D&h&&(w+=B(2,-u)),h>>>=1;for(h=1<<31,u=21;u<=52;u++)O&h&&(w+=B(2,-u)),h>>>=1;if(g===-1023){if(w===0)return 0*H;g=-1022}else{if(g===1024)return w===0?H/0:NaN;w+=1}return H*w*B(2,g)});var oe=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({RuntimeException:u})[0],g}return c(u,m),o(u)})(T),_e=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,null,[{key:"constructor_",value:function(){if(arguments.length===0)oe.constructor_.call(this);else if(arguments.length===1){var h=arguments[0];oe.constructor_.call(this,h)}}}])})(oe),F=(function(){function m(){t(this,m)}return o(m,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)m.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new _e("Should never reach here"+(u!==null?": "+u:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var u=arguments[0];m.isTrue(u,null)}else if(arguments.length===2){var h=arguments[1];if(!arguments[0])throw h===null?new _e:new _e(h)}}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];m.equals(u,h,null)}else if(arguments.length===3){var g=arguments[0],w=arguments[1],D=arguments[2];if(!w.equals(g))throw new _e("Expected "+g+" but encountered "+w+(D!==null?": "+D:""))}}}])})(),ee=new ArrayBuffer(8),ce=new Float64Array(ee),pe=new Int32Array(ee),J=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getM",value:function(){return q.NaN}},{key:"setOrdinate",value:function(u,h){switch(u){case m.X:this.x=h;break;case m.Y:this.y=h;break;case m.Z:this.setZ(h);break;default:throw new A("Invalid ordinate index: "+u)}}},{key:"equals2D",value:function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var h=arguments[0],g=arguments[1];return!!Q.equalsWithTolerance(this.x,h.x,g)&&!!Q.equalsWithTolerance(this.y,h.y,g)}}},{key:"setM",value:function(u){throw new A("Invalid ordinate index: "+m.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(u){switch(u){case m.X:return this.x;case m.Y:return this.y;case m.Z:return this.getZ()}throw new A("Invalid ordinate index: "+u)}},{key:"equals3D",value:function(u){return this.x===u.x&&this.y===u.y&&(this.getZ()===u.getZ()||q.isNaN(this.getZ())&&q.isNaN(u.getZ()))}},{key:"equals",value:function(u){return u instanceof m&&this.equals2D(u)}},{key:"equalInZ",value:function(u,h){return Q.equalsWithTolerance(this.getZ(),u.getZ(),h)}},{key:"setX",value:function(u){this.x=u}},{key:"compareTo",value:function(u){var h=u;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(u){this.z=u}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return F.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw u}}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(u){var h=this.x-u.x,g=this.y-u.y,w=this.getZ()-u.getZ();return Math.sqrt(h*h+g*g+w*w)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(u){this.y=u}},{key:"distance",value:function(u){var h=this.x-u.x,g=this.y-u.y;return Math.sqrt(h*h+g*g)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*u+m.hashCode(this.x))+m.hashCode(this.y)}},{key:"setCoordinate",value:function(u){this.x=u.x,this.y=u.y,this.z=u.getZ()}},{key:"interfaces_",get:function(){return[k,W,X]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)m.constructor_.call(this,0,0);else if(arguments.length===1){var u=arguments[0];m.constructor_.call(this,u.x,u.y,u.getZ())}else if(arguments.length===2){var h=arguments[0],g=arguments[1];m.constructor_.call(this,h,g,m.NULL_ORDINATE)}else if(arguments.length===3){var w=arguments[0],D=arguments[1],O=arguments[2];this.x=w,this.y=D,this.z=O}}},{key:"hashCode",value:function(u){return ce[0]=u,pe[0]^pe[1]}}])})(),xe=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compare",value:function(u,h){var g=m.compare(u.x,h.x);if(g!==0)return g;var w=m.compare(u.y,h.y);return w!==0?w:this._dimensionsToTest<=2?0:m.compare(u.getZ(),h.getZ())}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)m.constructor_.call(this,2);else if(arguments.length===1){var u=arguments[0];if(u!==2&&u!==3)throw new A("only 2 or 3 dimensions may be specified");this._dimensionsToTest=u}}},{key:"compare",value:function(u,h){return u<h?-1:u>h?1:q.isNaN(u)?q.isNaN(h)?0:-1:q.isNaN(h)?1:0}}])})();J.DimensionalComparator=xe,J.NULL_ORDINATE=q.NaN,J.X=0,J.Y=1,J.Z=2,J.M=3;var Se=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()}},{key:"intersection",value:function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new m;var h=this._minx>u._minx?this._minx:u._minx,g=this._miny>u._miny?this._miny:u._miny;return new m(h,this._maxx<u._maxx?this._maxx:u._maxx,g,this._maxy<u._maxy?this._maxy:u._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof m){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];return!this.isNull()&&g>=this._minx&&g<=this._maxx&&w>=this._miny&&w<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof J){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){if(arguments[0]instanceof J&&arguments[1]instanceof J){var g=arguments[0],w=arguments[1];return!this.isNull()&&!((g.x<w.x?g.x:w.x)>this._maxx)&&!((g.x>w.x?g.x:w.x)<this._minx)&&!((g.y<w.y?g.y:w.y)>this._maxy)&&!((g.y>w.y?g.y:w.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var D=arguments[0],O=arguments[1];return!this.isNull()&&!(D>this._maxx||D<this._minx||O>this._maxy||O<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return Math.sqrt(u*u+h*h)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.isNull()?(this._minx=g,this._maxx=g,this._miny=w,this._maxy=w):(g<this._minx&&(this._minx=g),g>this._maxx&&(this._maxx=g),w<this._miny&&(this._miny=w),w>this._maxy&&(this._maxy=w))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u<h?u:h}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(u){var h=u;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0}},{key:"translate",value:function(u,h){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+h,this.getMaxY()+h)}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(u){return!(!this.isNull()&&!u.isNull())||u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u>h?u:h}},{key:"expandBy",value:function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=g,this._maxy+=g,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof J){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];return this.covers(g,w)}}},{key:"centre",value:function(){return this.isNull()?null:new J((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.init(g.x,w.x,g.y,w.y)}else if(arguments.length===4){var D=arguments[0],O=arguments[1],H=arguments[2],ie=arguments[3];D<O?(this._minx=D,this._maxx=O):(this._minx=O,this._maxx=D),H<ie?(this._miny=H,this._maxy=ie):(this._miny=ie,this._maxy=H)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(u){if(this.intersects(u))return 0;var h=0;this._maxx<u._minx?h=u._minx-this._maxx:this._minx>u._maxx&&(h=this._minx-u._maxx);var g=0;return this._maxy<u._miny?g=u._miny-this._maxy:this._miny>u._maxy&&(g=this._miny-u._maxy),h===0?g:g===0?h:Math.sqrt(h*h+g*g)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*(u=37*(u=37*u+J.hashCode(this._minx))+J.hashCode(this._maxx))+J.hashCode(this._miny))+J.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[k,X]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];this.init(h)}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.init(g.x,w.x,g.y,w.y)}else if(arguments.length===4){var D=arguments[0],O=arguments[1],H=arguments[2],ie=arguments[3];this.init(D,O,H,ie)}}},{key:"intersects",value:function(){if(arguments.length===3){var u=arguments[0],h=arguments[1],g=arguments[2];return g.x>=(u.x<h.x?u.x:h.x)&&g.x<=(u.x>h.x?u.x:h.x)&&g.y>=(u.y<h.y?u.y:h.y)&&g.y<=(u.y>h.y?u.y:h.y)}if(arguments.length===4){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3],ie=Math.min(O.x,H.x),de=Math.max(O.x,H.x),Te=Math.min(w.x,D.x),Pe=Math.max(w.x,D.x);return!(Te>de)&&!(Pe<ie)&&(ie=Math.min(O.y,H.y),de=Math.max(O.y,H.y),Te=Math.min(w.y,D.y),Pe=Math.max(w.y,D.y),!(Te>de)&&!(Pe<ie))}}}])})(),ve=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(u){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(u){return this===u||this.equalsExact(u,0)}},{key:"geometryChanged",value:function(){this.apply(m.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(u){return u!==null&&this.norm().equalsExact(u.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var u;if(arguments.length===1){var h=arguments[0];return u=h,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(h)}if(arguments.length===2){var g=arguments[0],w=arguments[1];return u=g,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(g,w)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(u){if(u.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION)throw new A("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(u,h,g){return g===0?u.equals(h):u.distance(h)<=g}},{key:"norm",value:function(){var u=this.copy();return u.normalize(),u}},{key:"reverse",value:function(){var u=this.reverseInternal();return this.envelope!=null&&(u.envelope=this.envelope.copy()),u.setSRID(this.getSRID()),u}},{key:"copy",value:function(){var u=this.copyInternal();return u.envelope=this._envelope==null?null:this._envelope.copy(),u._SRID=this._SRID,u._userData=this._userData,u}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Se(this._envelope)}},{key:"setSRID",value:function(u){this._SRID=u}},{key:"setUserData",value:function(u){this._userData=u}},{key:"compare",value:function(u,h){for(var g=u.iterator(),w=h.iterator();g.hasNext()&&w.hasNext();){var D=g.next(),O=w.next(),H=D.compareTo(O);if(H!==0)return H}return g.hasNext()?1:w.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(u){return this.getClass()===u.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===m.TYPECODE_MULTIPOINT||this.getTypeCode()===m.TYPECODE_MULTILINESTRING||this.getTypeCode()===m.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[W,k,X]}},{key:"getClass",value:function(){return m}}],[{key:"hasNonEmptyElements",value:function(u){for(var h=0;h<u.length;h++)if(!u[h].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(u){for(var h=0;h<u.length;h++)if(u[h]===null)return!0;return!1}}])})();ve.constructor_=function(m){m&&(this._envelope=null,this._userData=null,this._factory=m,this._SRID=m.getSRID())},ve.TYPECODE_POINT=0,ve.TYPECODE_MULTIPOINT=1,ve.TYPECODE_LINESTRING=2,ve.TYPECODE_LINEARRING=3,ve.TYPECODE_MULTILINESTRING=4,ve.TYPECODE_POLYGON=5,ve.TYPECODE_MULTIPOLYGON=6,ve.TYPECODE_GEOMETRYCOLLECTION=7,ve.TYPENAME_POINT="Point",ve.TYPENAME_MULTIPOINT="MultiPoint",ve.TYPENAME_LINESTRING="LineString",ve.TYPENAME_LINEARRING="LinearRing",ve.TYPENAME_MULTILINESTRING="MultiLineString",ve.TYPENAME_POLYGON="Polygon",ve.TYPENAME_MULTIPOLYGON="MultiPolygon",ve.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",ve.geometryChangedFilter={get interfaces_(){return[N]},filter:function(m){m.geometryChangedAction()}};var re=(function(){function m(){t(this,m)}return o(m,null,[{key:"toLocationSymbol",value:function(u){switch(u){case m.EXTERIOR:return"e";case m.BOUNDARY:return"b";case m.INTERIOR:return"i";case m.NONE:return"-"}throw new A("Unknown location value: "+u)}}])})();re.INTERIOR=0,re.BOUNDARY=1,re.EXTERIOR=2,re.NONE=-1;var He=(function(){return o(function m(){t(this,m)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),G=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({NoSuchElementException:u})[0],g}return c(u,m),o(u)})(T),be=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({UnsupportedOperationException:u})[0],g}return c(u,m),o(u)})(T),Ie=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u,[{key:"contains",value:function(){}}])})(He),U=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).map=new Map,h instanceof He&&g.addAll(h),g}return c(u,m),o(u,[{key:"contains",value:function(h){var g=h.hashCode?h.hashCode():h;return!!this.map.has(g)}},{key:"add",value:function(h){var g=h.hashCode?h.hashCode():h;return!this.map.has(g)&&!!this.map.set(g,h)}},{key:"addAll",value:function(h){var g,w=s(h);try{for(w.s();!(g=w.n()).done;){var D=g.value;this.add(D)}}catch(O){w.e(O)}finally{w.f()}return!0}},{key:"remove",value:function(){throw new be}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new ae(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(Ie),ae=(function(){return o(function m(u){t(this,m),this.iterator=u.values();var h=this.iterator.next(),g=h.done,w=h.value;this.done=g,this.value=w},[{key:"next",value:function(){if(this.done)throw new G;var m=this.value,u=this.iterator.next(),h=u.done,g=u.value;return this.done=h,this.value=g,m}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new be}}])})(),he=(function(){function m(){t(this,m)}return o(m,null,[{key:"opposite",value:function(u){return u===m.LEFT?m.RIGHT:u===m.RIGHT?m.LEFT:u}}])})();he.ON=0,he.LEFT=1,he.RIGHT=2;var Fe=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({EmptyStackException:u})[0],g}return c(u,m),o(u)})(T),Ce=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({IndexOutOfBoundsException:u})[0],g}return c(u,m),o(u)})(T),we=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(He),Ue=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).array=[],h}return c(u,m),o(u,[{key:"add",value:function(h){return this.array.push(h),!0}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ce;return this.array[h]}},{key:"push",value:function(h){return this.array.push(h),h}},{key:"pop",value:function(){if(this.array.length===0)throw new Fe;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new Fe;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(h){return this.array.indexOf(h)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(we);function Le(m,u){return m.interfaces_&&m.interfaces_.indexOf(u)>-1}var Be=(function(){return o(function m(u){t(this,m),this.str=u},[{key:"append",value:function(m){this.str+=m}},{key:"setCharAt",value:function(m,u){this.str=this.str.substr(0,m)+u+this.str.substr(m+1)}},{key:"toString",value:function(){return this.str}}])})(),pt=(function(){function m(u){t(this,m),this.value=u}return o(m,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(u){return this.value<u?-1:this.value>u?1:0}}],[{key:"compare",value:function(u,h){return u<h?-1:u>h?1:0}},{key:"isNan",value:function(u){return Number.isNaN(u)}},{key:"valueOf",value:function(u){return new m(u)}}])})(),Tt=(function(){return o(function m(){t(this,m)},null,[{key:"isWhitespace",value:function(m){return m<=32&&m>=0||m===127}},{key:"toUpperCase",value:function(m){return m.toUpperCase()}}])})(),qe=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"le",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<=u._lo}},{key:"extractSignificantDigits",value:function(u,h){var g=this.abs(),w=m.magnitude(g._hi),D=m.TEN.pow(w);(g=g.divide(D)).gt(m.TEN)?(g=g.divide(m.TEN),w+=1):g.lt(m.ONE)&&(g=g.multiply(m.TEN),w-=1);for(var O=w+1,H=new Be,ie=m.MAX_PRINT_DIGITS-1,de=0;de<=ie;de++){u&&de===O&&H.append(".");var Te=Math.trunc(g._hi);if(Te<0)break;var Pe=!1,nt=0;Te>9?(Pe=!0,nt="9"):nt="0"+Te,H.append(nt),g=g.subtract(m.valueOf(Te)).multiply(m.TEN),Pe&&g.selfAdd(m.TEN);var vt=!0,Rt=m.magnitude(g._hi);if(Rt<0&&Math.abs(Rt)>=ie-de&&(vt=!1),!vt)break}return h[0]=w,H.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof m){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(u){return this.le(u)?this:u}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var g,w,D,O,H=arguments[0],ie=arguments[1],de=null,Te=null,Pe=null,nt=null;return D=this._hi/H,nt=(de=(Pe=m.SPLIT*D)-(de=Pe-D))*(Te=(nt=m.SPLIT*H)-(Te=nt-H))-(O=D*H)+de*(w=H-Te)+(g=D-de)*Te+g*w,nt=D+(Pe=(this._hi-O-nt+this._lo-D*ie)/H),this._hi=nt,this._lo=D-nt+Pe,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof m){var u,h,g,w,D=arguments[0],O=null,H=null,ie=null,de=null;return u=(g=this._hi/D._hi)-(O=(ie=m.SPLIT*g)-(O=ie-g)),de=O*(H=(de=m.SPLIT*D._hi)-(H=de-D._hi))-(w=g*D._hi)+O*(h=D._hi-H)+u*H+u*h,new m(de=g+(ie=(this._hi-w-de+this._lo-g*D._lo)/D._hi),g-de+ie)}if(typeof arguments[0]=="number"){var Te=arguments[0];return q.isNaN(Te)?m.createNaN():m.copy(this).selfDivide(Te,0)}}},{key:"ge",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>=u._lo}},{key:"pow",value:function(u){if(u===0)return m.valueOf(1);var h=new m(this),g=m.valueOf(1),w=Math.abs(u);if(w>1)for(;w>0;)w%2==1&&g.selfMultiply(h),(w/=2)>0&&(h=h.sqr());else g=h;return u<0?g.reciprocal():g}},{key:"ceil",value:function(){if(this.isNaN())return m.NaN;var u=Math.ceil(this._hi),h=0;return u===this._hi&&(h=Math.ceil(this._lo)),new m(u,h)}},{key:"compareTo",value:function(u){var h=u;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}}},{key:"max",value:function(u){return this.ge(u)?this:u}},{key:"sqrt",value:function(){if(this.isZero())return m.valueOf(0);if(this.isNegative())return m.NaN;var u=1/Math.sqrt(this._hi),h=this._hi*u,g=m.valueOf(h),w=this.subtract(g.sqr())._hi*(.5*u);return g.add(w)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h,g,w,D,O,H=arguments[0],ie=null;return ie=(w=this._hi+H)-(D=w-this._hi),g=(O=(ie=H-D+(this._hi-ie))+this._lo)+(w-(h=w+O)),this._hi=h+g,this._lo=g+(h-this._hi),this}}else if(arguments.length===2){var de,Te,Pe,nt,vt=arguments[0],Rt=arguments[1],Wt=null,ir=null,Kn=null;Pe=this._hi+vt,Te=this._lo+Rt,ir=Pe-(Kn=Pe-this._hi),Wt=Te-(nt=Te-this._lo);var Lr=(de=Pe+(Kn=(ir=vt-Kn+(this._hi-ir))+Te))+(Kn=(Wt=Rt-nt+(this._lo-Wt))+(Kn+(Pe-de))),Eo=Kn+(de-Lr);return this._hi=Lr,this._lo=Eo,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var g,w,D=arguments[0],O=arguments[1],H=null,ie=null,de=null,Te=null;H=(de=m.SPLIT*this._hi)-this._hi,Te=m.SPLIT*D,H=de-H,g=this._hi-H,ie=Te-D;var Pe=(de=this._hi*D)+(Te=H*(ie=Te-ie)-de+H*(w=D-ie)+g*ie+g*w+(this._hi*O+this._lo*D)),nt=Te+(H=de-Pe);return this._hi=Pe,this._lo=nt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return m.NaN;var u=Math.floor(this._hi),h=0;return u===this._hi&&(h=Math.floor(this._lo)),new m(u,h)}},{key:"negate",value:function(){return this.isNaN()?this:new m(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return null;throw u}}},{key:"multiply",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return u.isNaN()?m.createNaN():m.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return q.isNaN(h)?m.createNaN():m.copy(this).selfMultiply(h,0)}}},{key:"isNaN",value:function(){return q.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var u=m.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),g=this.extractSignificantDigits(!0,h),w=h[0]+1,D=g;if(g.charAt(0)===".")D="0"+g;else if(w<0)D="0."+m.stringOfChar("0",-w)+g;else if(g.indexOf(".")===-1){var O=w-g.length;D=g+m.stringOfChar("0",O)+".0"}return this.isNegative()?"-"+D:D}},{key:"reciprocal",value:function(){var u,h,g,w,D=null,O=null,H=null,ie=null;u=(g=1/this._hi)-(D=(H=m.SPLIT*g)-(D=H-g)),O=(ie=m.SPLIT*this._hi)-this._hi;var de=g+(H=(1-(w=g*this._hi)-(ie=D*(O=ie-O)-w+D*(h=this._hi-O)+u*O+u*h)-g*this._lo)/this._hi);return new m(de,g-de+H)}},{key:"toSciNotation",value:function(){if(this.isZero())return m.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),g=this.extractSignificantDigits(!1,h),w=m.SCI_NOT_EXPONENT_CHAR+h[0];if(g.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+g);var D="";g.length>1&&(D=g.substring(1));var O=g.charAt(0)+"."+D;return this.isNegative()?"-"+O+w:O+w}},{key:"abs",value:function(){return this.isNaN()?m.NaN:this.isNegative()?this.negate():new m(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<u._lo}},{key:"add",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return m.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return m.copy(this).selfAdd(h)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof m){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this._hi=g,this._lo=w}}},{key:"gt",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>u._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?m.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[X,k,W]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this.init(u)}else if(arguments[0]instanceof m){var h=arguments[0];this.init(h)}else if(typeof arguments[0]=="string"){var g=arguments[0];m.constructor_.call(this,m.parse(g))}}else if(arguments.length===2){var w=arguments[0],D=arguments[1];this.init(w,D)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1],g=arguments[2],w=arguments[3];return m.determinant(m.valueOf(u),m.valueOf(h),m.valueOf(g),m.valueOf(w))}if(arguments[3]instanceof m&&arguments[2]instanceof m&&arguments[0]instanceof m&&arguments[1]instanceof m){var D=arguments[1],O=arguments[2],H=arguments[3];return arguments[0].multiply(H).selfSubtract(D.multiply(O))}}},{key:"sqr",value:function(u){return m.valueOf(u).selfMultiply(u)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var u=arguments[0];return m.parse(u)}if(typeof arguments[0]=="number")return new m(arguments[0])}},{key:"sqrt",value:function(u){return m.valueOf(u).sqrt()}},{key:"parse",value:function(u){for(var h=0,g=u.length;Tt.isWhitespace(u.charAt(h));)h++;var w=!1;if(h<g){var D=u.charAt(h);D!=="-"&&D!=="+"||(h++,D==="-"&&(w=!0))}for(var O=new m,H=0,ie=0,de=0,Te=!1;!(h>=g);){var Pe=u.charAt(h);if(h++,Tt.isDigit(Pe)){var nt=Pe-"0";O.selfMultiply(m.TEN),O.selfAdd(nt),H++}else{if(Pe!=="."){if(Pe==="e"||Pe==="E"){var vt=u.substring(h);try{de=pt.parseInt(vt)}catch(Lr){throw Lr instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+vt+" in string "+u):Lr}break}throw new NumberFormatException("Unexpected character '"+Pe+"' at position "+h+" in string "+u)}ie=H,Te=!0}}var Rt=O;Te||(ie=H);var Wt=H-ie-de;if(Wt===0)Rt=O;else if(Wt>0){var ir=m.TEN.pow(Wt);Rt=O.divide(ir)}else if(Wt<0){var Kn=m.TEN.pow(-Wt);Rt=O.multiply(Kn)}return w?Rt.negate():Rt}},{key:"createNaN",value:function(){return new m(q.NaN,q.NaN)}},{key:"copy",value:function(u){return new m(u)}},{key:"magnitude",value:function(u){var h=Math.abs(u),g=Math.log(h)/Math.log(10),w=Math.trunc(Math.floor(g));return 10*Math.pow(10,w)<=h&&(w+=1),w}},{key:"stringOfChar",value:function(u,h){for(var g=new Be,w=0;w<h;w++)g.append(u);return g.toString()}}])})();qe.PI=new qe(3.141592653589793,12246467991473532e-32),qe.TWO_PI=new qe(6.283185307179586,24492935982947064e-32),qe.PI_2=new qe(1.5707963267948966,6123233995736766e-32),qe.E=new qe(2.718281828459045,14456468917292502e-32),qe.NaN=new qe(q.NaN,q.NaN),qe.EPS=123259516440783e-46,qe.SPLIT=134217729,qe.MAX_PRINT_DIGITS=32,qe.TEN=qe.valueOf(10),qe.ONE=qe.valueOf(1),qe.SCI_NOT_EXPONENT_CHAR="E",qe.SCI_NOT_ZERO="0.0E0";var qt=(function(){function m(){t(this,m)}return o(m,null,[{key:"orientationIndex",value:function(u,h,g){var w=m.orientationIndexFilter(u,h,g);if(w<=1)return w;var D=qe.valueOf(h.x).selfAdd(-u.x),O=qe.valueOf(h.y).selfAdd(-u.y),H=qe.valueOf(g.x).selfAdd(-h.x),ie=qe.valueOf(g.y).selfAdd(-h.y);return D.selfMultiply(ie).selfSubtract(O.selfMultiply(H)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof qe&&arguments[2]instanceof qe&&arguments[0]instanceof qe&&arguments[1]instanceof qe){var u=arguments[1],h=arguments[2],g=arguments[3];return arguments[0].multiply(g).selfSubtract(u.multiply(h)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3],ie=qe.valueOf(w),de=qe.valueOf(D),Te=qe.valueOf(O),Pe=qe.valueOf(H);return ie.multiply(Pe).selfSubtract(de.multiply(Te)).signum()}}},{key:"intersection",value:function(u,h,g,w){var D=new qe(u.y).selfSubtract(h.y),O=new qe(h.x).selfSubtract(u.x),H=new qe(u.x).selfMultiply(h.y).selfSubtract(new qe(h.x).selfMultiply(u.y)),ie=new qe(g.y).selfSubtract(w.y),de=new qe(w.x).selfSubtract(g.x),Te=new qe(g.x).selfMultiply(w.y).selfSubtract(new qe(w.x).selfMultiply(g.y)),Pe=O.multiply(Te).selfSubtract(de.multiply(H)),nt=ie.multiply(H).selfSubtract(D.multiply(Te)),vt=D.multiply(de).selfSubtract(ie.multiply(O)),Rt=Pe.selfDivide(vt).doubleValue(),Wt=nt.selfDivide(vt).doubleValue();return q.isNaN(Rt)||q.isInfinite(Rt)||q.isNaN(Wt)||q.isInfinite(Wt)?null:new J(Rt,Wt)}},{key:"orientationIndexFilter",value:function(u,h,g){var w=null,D=(u.x-g.x)*(h.y-g.y),O=(u.y-g.y)*(h.x-g.x),H=D-O;if(D>0){if(O<=0)return m.signum(H);w=D+O}else{if(!(D<0)||O>=0)return m.signum(H);w=-D-O}var ie=m.DP_SAFE_EPSILON*w;return H>=ie||-H>=ie?m.signum(H):2}},{key:"signum",value:function(u){return u>0?1:u<0?-1:0}}])})();qt.DP_SAFE_EPSILON=1e-15;var xt=(function(){return o(function m(){t(this,m)},[{key:"getM",value:function(m){if(this.hasM()){var u=this.getDimension()-this.getMeasures();return this.getOrdinate(m,u)}return q.NaN}},{key:"setOrdinate",value:function(m,u,h){}},{key:"getZ",value:function(m){return this.hasZ()?this.getOrdinate(m,2):q.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(m,u){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(m){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(m){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(m){}},{key:"copy",value:function(){}},{key:"getY",value:function(m){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[W]}}])})();xt.X=0,xt.Y=1,xt.Z=2,xt.M=3;var Qe=(function(){function m(){t(this,m)}return o(m,null,[{key:"index",value:function(u,h,g){return qt.orientationIndex(u,h,g)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var u=arguments[0],h=u.length-1;if(h<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=u[0],w=0,D=1;D<=h;D++){var O=u[D];O.y>g.y&&(g=O,w=D)}var H=w;do(H-=1)<0&&(H=h);while(u[H].equals2D(g)&&H!==w);var ie=w;do ie=(ie+1)%h;while(u[ie].equals2D(g)&&ie!==w);var de=u[H],Te=u[ie];if(de.equals2D(g)||Te.equals2D(g)||de.equals2D(Te))return!1;var Pe=m.index(de,g,Te);return Pe===0?de.x>Te.x:Pe>0}if(Le(arguments[0],xt)){var nt=arguments[0],vt=nt.size()-1;if(vt<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var Rt=nt.getCoordinate(0),Wt=0,ir=1;ir<=vt;ir++){var Kn=nt.getCoordinate(ir);Kn.y>Rt.y&&(Rt=Kn,Wt=ir)}var Lr=null,Eo=Wt;do(Eo-=1)<0&&(Eo=vt),Lr=nt.getCoordinate(Eo);while(Lr.equals2D(Rt)&&Eo!==Wt);var Bo=null,hl=Wt;do hl=(hl+1)%vt,Bo=nt.getCoordinate(hl);while(Bo.equals2D(Rt)&&hl!==Wt);if(Lr.equals2D(Rt)||Bo.equals2D(Rt)||Lr.equals2D(Bo))return!1;var Gf=m.index(Lr,Rt,Bo);return Gf===0?Lr.x>Bo.x:Gf>0}}}])})();Qe.CLOCKWISE=-1,Qe.RIGHT=Qe.CLOCKWISE,Qe.COUNTERCLOCKWISE=1,Qe.LEFT=Qe.COUNTERCLOCKWISE,Qe.COLLINEAR=0,Qe.STRAIGHT=Qe.COLLINEAR;var Kt=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(m,u){var h=this.getRightmostSideOfSegment(m,u);return h<0&&(h=this.getRightmostSideOfSegment(m,u-1)),h<0&&(this._minCoord=null,this.checkForRightmostCoordinate(m)),h}},{key:"findRightmostEdgeAtVertex",value:function(){var m=this._minDe.getEdge().getCoordinates();F.isTrue(this._minIndex>0&&this._minIndex<m.length,"rightmost point expected to be interior vertex of edge");var u=m[this._minIndex-1],h=m[this._minIndex+1],g=Qe.index(this._minCoord,h,u),w=!1;(u.y<this._minCoord.y&&h.y<this._minCoord.y&&g===Qe.COUNTERCLOCKWISE||u.y>this._minCoord.y&&h.y>this._minCoord.y&&g===Qe.CLOCKWISE)&&(w=!0),w&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(m,u){var h=m.getEdge().getCoordinates();if(u<0||u+1>=h.length||h[u].y===h[u+1].y)return-1;var g=he.LEFT;return h[u].y<h[u+1].y&&(g=he.RIGHT),g}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(m){for(var u=m.getEdge().getCoordinates(),h=0;h<u.length-1;h++)(this._minCoord===null||u[h].x>this._minCoord.x)&&(this._minDe=m,this._minIndex=h,this._minCoord=u[h])}},{key:"findRightmostEdgeAtNode",value:function(){var m=this._minDe.getNode().getEdges();this._minDe=m.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next();h.isForward()&&this.checkForRightmostCoordinate(h)}F.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===he.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),ft=(function(m){function u(h,g){var w;return t(this,u),(w=e(this,u,[g?h+" [ "+g+" ]":h])).pt=g?new J(g):void 0,w.name=Object.keys({TopologyException:u})[0],w}return c(u,m),o(u,[{key:"getCoordinate",value:function(){return this.pt}}])})(oe),Pr=(function(){return o(function m(){t(this,m),this.array=[]},[{key:"addLast",value:function(m){this.array.push(m)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),mt=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).array=[],h instanceof He&&g.addAll(h),g}return c(u,m),o(u,[{key:"interfaces_",get:function(){return[we,He]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(h){return arguments.length===1?this.array.push(h):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(h){var g,w=s(h);try{for(w.s();!(g=w.n()).done;){var D=g.value;this.array.push(D)}}catch(O){w.e(O)}finally{w.f()}}},{key:"set",value:function(h,g){var w=this.array[h];return this.array[h]=g,w}},{key:"iterator",value:function(){return new Zt(this)}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ce;return this.array[h]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(h){h?this.array.sort(function(g,w){return h.compare(g,w)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(h){for(var g=0,w=this.array.length;g<w;g++)if(this.array[g]===h)return!!this.array.splice(g,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(we),Zt=(function(){return o(function m(u){t(this,m),this.arrayList=u,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new G;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(m){return this.arrayList.set(this.position-1,m)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),hn=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var m=this._dirEdgeList.iterator();m.hasNext();)m.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(m){for(var u=null,h=m.getEdges().iterator();h.hasNext();){var g=h.next();if(g.isVisited()||g.getSym().isVisited()){u=g;break}}if(u===null)throw new ft("unable to find edge to compute depths at "+m.getCoordinate());m.getEdges().computeDepths(u);for(var w=m.getEdges().iterator();w.hasNext();){var D=w.next();D.setVisited(!0),this.copySymDepths(D)}}},{key:"computeDepth",value:function(m){this.clearVisitedEdges();var u=this._finder.getEdge();u.getNode(),u.getLabel(),u.setEdgeDepths(he.RIGHT,m),this.copySymDepths(u),this.computeDepths(u)}},{key:"create",value:function(m){this.addReachable(m),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var m=this._dirEdgeList.iterator();m.hasNext();){var u=m.next();u.getDepth(he.RIGHT)>=1&&u.getDepth(he.LEFT)<=0&&!u.isInteriorAreaEdge()&&u.setInResult(!0)}}},{key:"computeDepths",value:function(m){var u=new U,h=new Pr,g=m.getNode();for(h.addLast(g),u.add(g),m.setVisited(!0);!h.isEmpty();){var w=h.removeFirst();u.add(w),this.computeNodeDepth(w);for(var D=w.getEdges().iterator();D.hasNext();){var O=D.next().getSym();if(!O.isVisited()){var H=O.getNode();u.contains(H)||(h.addLast(H),u.add(H))}}}}},{key:"compareTo",value:function(m){var u=m;return this._rightMostCoord.x<u._rightMostCoord.x?-1:this._rightMostCoord.x>u._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var m=new Se,u=this._dirEdgeList.iterator();u.hasNext();)for(var h=u.next().getEdge().getCoordinates(),g=0;g<h.length-1;g++)m.expandToInclude(h[g]);this._env=m}return this._env}},{key:"addReachable",value:function(m){var u=new Ue;for(u.add(m);!u.empty();){var h=u.pop();this.add(h,u)}}},{key:"copySymDepths",value:function(m){var u=m.getSym();u.setDepth(he.LEFT,m.getDepth(he.RIGHT)),u.setDepth(he.RIGHT,m.getDepth(he.LEFT))}},{key:"add",value:function(m,u){m.setVisited(!0),this._nodes.add(m);for(var h=m.getEdges().iterator();h.hasNext();){var g=h.next();this._dirEdgeList.add(g);var w=g.getSym().getNode();w.isVisited()||u.push(w)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new mt,this._nodes=new mt,this._rightMostCoord=null,this._env=null,this._finder=new Kt}}])})(),dr=(function(){return o(function m(){t(this,m)},null,[{key:"intersection",value:function(m,u,h,g){var w=m.x<u.x?m.x:u.x,D=m.y<u.y?m.y:u.y,O=m.x>u.x?m.x:u.x,H=m.y>u.y?m.y:u.y,ie=h.x<g.x?h.x:g.x,de=h.y<g.y?h.y:g.y,Te=h.x>g.x?h.x:g.x,Pe=h.y>g.y?h.y:g.y,nt=((w>ie?w:ie)+(O<Te?O:Te))/2,vt=((D>de?D:de)+(H<Pe?H:Pe))/2,Rt=m.x-nt,Wt=m.y-vt,ir=u.x-nt,Kn=u.y-vt,Lr=h.x-nt,Eo=h.y-vt,Bo=g.x-nt,hl=g.y-vt,Gf=Wt-Kn,M_=ir-Rt,N_=Rt*Kn-ir*Wt,P_=Eo-hl,L_=Bo-Lr,k_=Lr*hl-Bo*Eo,O_=Gf*L_-P_*M_,gm=(M_*k_-L_*N_)/O_,Ip=(P_*N_-Gf*k_)/O_;return q.isNaN(gm)||q.isInfinite(gm)||q.isNaN(Ip)||q.isInfinite(Ip)?null:new J(gm+nt,Ip+vt)}}])})(),Dt=(function(){return o(function m(){t(this,m)},null,[{key:"arraycopy",value:function(m,u,h,g,w){for(var D=0,O=u;O<u+w;O++)h[g+D]=m[O],D++}},{key:"getProperty",value:function(m){return{"line.separator":`
`}[m]}}])})(),sr=(function(){function m(){t(this,m)}return o(m,null,[{key:"log10",value:function(u){var h=Math.log(u);return q.isInfinite(h)||q.isNaN(h)?h:h/m.LOG_10}},{key:"min",value:function(u,h,g,w){var D=u;return h<D&&(D=h),g<D&&(D=g),w<D&&(D=w),D}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1],g=arguments[2];return u<h?h:u>g?g:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var w=arguments[0],D=arguments[1],O=arguments[2];return w<D?D:w>O?O:w}}},{key:"wrap",value:function(u,h){return u<0?h- -u%h:u%h}},{key:"max",value:function(){if(arguments.length===3){var u=arguments[1],h=arguments[2],g=arguments[0];return u>g&&(g=u),h>g&&(g=h),g}if(arguments.length===4){var w=arguments[1],D=arguments[2],O=arguments[3],H=arguments[0];return w>H&&(H=w),D>H&&(H=D),O>H&&(H=O),H}}},{key:"average",value:function(u,h){return(u+h)/2}}])})();sr.LOG_10=Math.log(10);var At=(function(){function m(){t(this,m)}return o(m,null,[{key:"segmentToSegment",value:function(u,h,g,w){if(u.equals(h))return m.pointToSegment(u,g,w);if(g.equals(w))return m.pointToSegment(w,u,h);var D=!1;if(Se.intersects(u,h,g,w)){var O=(h.x-u.x)*(w.y-g.y)-(h.y-u.y)*(w.x-g.x);if(O===0)D=!0;else{var H=(u.y-g.y)*(w.x-g.x)-(u.x-g.x)*(w.y-g.y),ie=((u.y-g.y)*(h.x-u.x)-(u.x-g.x)*(h.y-u.y))/O,de=H/O;(de<0||de>1||ie<0||ie>1)&&(D=!0)}}else D=!0;return D?sr.min(m.pointToSegment(u,g,w),m.pointToSegment(h,g,w),m.pointToSegment(g,u,h),m.pointToSegment(w,u,h)):0}},{key:"pointToSegment",value:function(u,h,g){if(h.x===g.x&&h.y===g.y)return u.distance(h);var w=(g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y),D=((u.x-h.x)*(g.x-h.x)+(u.y-h.y)*(g.y-h.y))/w;if(D<=0)return u.distance(h);if(D>=1)return u.distance(g);var O=((h.y-u.y)*(g.x-h.x)-(h.x-u.x)*(g.y-h.y))/w;return Math.abs(O)*Math.sqrt(w)}},{key:"pointToLinePerpendicular",value:function(u,h,g){var w=(g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y),D=((h.y-u.y)*(g.x-h.x)-(h.x-u.x)*(g.y-h.y))/w;return Math.abs(D)*Math.sqrt(w)}},{key:"pointToSegmentString",value:function(u,h){if(h.length===0)throw new A("Line array must contain at least one vertex");for(var g=u.distance(h[0]),w=0;w<h.length-1;w++){var D=m.pointToSegment(u,h[w],h[w+1]);D<g&&(g=D)}return g}}])})(),Vt=(function(){return o(function m(){t(this,m)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Le(arguments[0],xt);else if(arguments.length!==2){if(arguments.length===3){var m=arguments[0],u=arguments[1];return this.create(m,u)}}}}])})(),Vn=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})(),vn=(function(){return o(function m(){t(this,m)},null,[{key:"ofLine",value:function(m){var u=m.size();if(u<=1)return 0;var h=0,g=new J;m.getCoordinate(0,g);for(var w=g.x,D=g.y,O=1;O<u;O++){m.getCoordinate(O,g);var H=g.x,ie=g.y,de=H-w,Te=ie-D;h+=Math.sqrt(de*de+Te*Te),w=H,D=ie}return h}}])})(),$t=o(function m(){t(this,m)}),Fn=(function(){function m(){t(this,m)}return o(m,null,[{key:"copyCoord",value:function(u,h,g,w){for(var D=Math.min(u.getDimension(),g.getDimension()),O=0;O<D;O++)g.setOrdinate(w,O,u.getOrdinate(h,O))}},{key:"isRing",value:function(u){var h=u.size();return h===0||!(h<=3)&&u.getOrdinate(0,xt.X)===u.getOrdinate(h-1,xt.X)&&u.getOrdinate(0,xt.Y)===u.getOrdinate(h-1,xt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Le(arguments[0],xt)&&Number.isInteger(arguments[1])){var u=arguments[0],h=arguments[1];m.scroll(u,h,m.isRing(u))}else if(Le(arguments[0],xt)&&arguments[1]instanceof J){var g=arguments[0],w=arguments[1],D=m.indexOf(w,g);if(D<=0)return null;m.scroll(g,D)}}else if(arguments.length===3){var O=arguments[0],H=arguments[1],ie=arguments[2];if(H<=0)return null;for(var de=O.copy(),Te=ie?O.size()-1:O.size(),Pe=0;Pe<Te;Pe++)for(var nt=0;nt<O.getDimension();nt++)O.setOrdinate(Pe,nt,de.getOrdinate((H+Pe)%Te,nt));if(ie)for(var vt=0;vt<O.getDimension();vt++)O.setOrdinate(Te,vt,O.getOrdinate(0,vt))}}},{key:"isEqual",value:function(u,h){var g=u.size();if(g!==h.size())return!1;for(var w=Math.min(u.getDimension(),h.getDimension()),D=0;D<g;D++)for(var O=0;O<w;O++){var H=u.getOrdinate(D,O),ie=h.getOrdinate(D,O);if(u.getOrdinate(D,O)!==h.getOrdinate(D,O)&&(!q.isNaN(H)||!q.isNaN(ie)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var u=arguments[0];return m.minCoordinateIndex(u,0,u.size()-1)}if(arguments.length===3){for(var h=arguments[0],g=arguments[2],w=-1,D=null,O=arguments[1];O<=g;O++){var H=h.getCoordinate(O);(D===null||D.compareTo(H)>0)&&(D=H,w=O)}return w}}},{key:"extend",value:function(u,h,g){var w=u.create(g,h.getDimension()),D=h.size();if(m.copy(h,0,w,0,D),D>0)for(var O=D;O<g;O++)m.copy(h,D-1,w,O,1);return w}},{key:"reverse",value:function(u){for(var h=u.size()-1,g=Math.trunc(h/2),w=0;w<=g;w++)m.swap(u,w,h-w)}},{key:"swap",value:function(u,h,g){if(h===g)return null;for(var w=0;w<u.getDimension();w++){var D=u.getOrdinate(h,w);u.setOrdinate(h,w,u.getOrdinate(g,w)),u.setOrdinate(g,w,D)}}},{key:"copy",value:function(u,h,g,w,D){for(var O=0;O<D;O++)m.copyCoord(u,h+O,g,w+O)}},{key:"ensureValidRing",value:function(u,h){var g=h.size();return g===0?h:g<=3?m.createClosedRing(u,h,4):h.getOrdinate(0,xt.X)===h.getOrdinate(g-1,xt.X)&&h.getOrdinate(0,xt.Y)===h.getOrdinate(g-1,xt.Y)?h:m.createClosedRing(u,h,g+1)}},{key:"indexOf",value:function(u,h){for(var g=0;g<h.size();g++)if(u.x===h.getOrdinate(g,xt.X)&&u.y===h.getOrdinate(g,xt.Y))return g;return-1}},{key:"createClosedRing",value:function(u,h,g){var w=u.create(g,h.getDimension()),D=h.size();m.copy(h,0,w,0,D);for(var O=D;O<g;O++)m.copy(h,0,w,O,1);return w}},{key:"minCoordinate",value:function(u){for(var h=null,g=0;g<u.size();g++){var w=u.getCoordinate(g);(h===null||h.compareTo(w)>0)&&(h=w)}return h}}])})(),at=(function(){function m(){t(this,m)}return o(m,null,[{key:"toDimensionSymbol",value:function(u){switch(u){case m.FALSE:return m.SYM_FALSE;case m.TRUE:return m.SYM_TRUE;case m.DONTCARE:return m.SYM_DONTCARE;case m.P:return m.SYM_P;case m.L:return m.SYM_L;case m.A:return m.SYM_A}throw new A("Unknown dimension value: "+u)}},{key:"toDimensionValue",value:function(u){switch(Tt.toUpperCase(u)){case m.SYM_FALSE:return m.FALSE;case m.SYM_TRUE:return m.TRUE;case m.SYM_DONTCARE:return m.DONTCARE;case m.SYM_P:return m.P;case m.SYM_L:return m.L;case m.SYM_A:return m.A}throw new A("Unknown dimension symbol: "+u)}}])})();at.P=0,at.L=1,at.A=2,at.FALSE=-1,at.TRUE=-2,at.DONTCARE=-3,at.SYM_FALSE="F",at.SYM_TRUE="T",at.SYM_DONTCARE="*",at.SYM_P="0",at.SYM_L="1",at.SYM_A="2";var Gr=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})(),ii=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m,u){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),oi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Se:this._points.expandEnvelope(new Se)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var w=h;if(this._points.size()!==w._points.size())return!1;for(var D=0;D<this._points.size();D++)if(!this.equal(this._points.getCoordinate(D),w._points.getCoordinate(D),g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<Math.trunc(this._points.size()/2);h++){var g=this._points.size()-1-h;if(!this._points.getCoordinate(h).equals(this._points.getCoordinate(g))){if(this._points.getCoordinate(h).compareTo(this._points.getCoordinate(g))>0){var w=this._points.copy();Fn.reverse(w),this._points=w}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?at.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Fn.reverse(h),this.getFactory().createLineString(h)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return vn.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var h=arguments[0],g=0,w=0;g<this._points.size()&&w<h._points.size();){var D=this._points.getCoordinate(g).compareTo(h._points.getCoordinate(w));if(D!==0)return D;g++,w++}return g<this._points.size()?1:w<h._points.size()?-1:0}if(arguments.length===2){var O=arguments[0];return arguments[1].compare(this._points,O._points)}}},{key:"apply",value:function(){if(Le(arguments[0],Vn))for(var h=arguments[0],g=0;g<this._points.size();g++)h.filter(this._points.getCoordinate(g));else if(Le(arguments[0],ii)){var w=arguments[0];if(this._points.size()===0)return null;for(var D=0;D<this._points.size()&&(w.filter(this._points,D),!w.isDone());D++);w.isGeometryChanged()&&this.geometryChanged()}else Le(arguments[0],Gr)?arguments[0].filter(this):Le(arguments[0],N)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new be}},{key:"isEquivalentClass",value:function(h){return h instanceof u}},{key:"getCoordinateN",value:function(h){return this._points.getCoordinate(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(h){if(h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),h.size()===1)throw new A("Invalid number of points in LineString (found "+h.size()+" - must be 0 or >= 2)");this._points=h}},{key:"isCoordinate",value:function(h){for(var g=0;g<this._points.size();g++)if(this._points.getCoordinate(g).equals(h))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(h){return this.getFactory().createPoint(this._points.getCoordinate(h))}},{key:"interfaces_",get:function(){return[$t]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],g=arguments[1];ve.constructor_.call(this,g),this.init(h)}}}}])})(ve),Mt=o(function m(){t(this,m)}),Mi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Se;var h=new Se;return h.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),h}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new u(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&(!(!this.isEmpty()||!h.isEmpty())||this.isEmpty()===h.isEmpty()&&this.equal(h.getCoordinate(),this.getCoordinate(),g))}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0];return this.getCoordinate().compareTo(h.getCoordinate())}if(arguments.length===2){var g=arguments[0];return arguments[1].compare(this._coordinates,g._coordinates)}}},{key:"apply",value:function(){if(Le(arguments[0],Vn)){var h=arguments[0];if(this.isEmpty())return null;h.filter(this.getCoordinate())}else if(Le(arguments[0],ii)){var g=arguments[0];if(this.isEmpty())return null;g.filter(this._coordinates,0),g.isGeometryChanged()&&this.geometryChanged()}else Le(arguments[0],Gr)?arguments[0].filter(this):Le(arguments[0],N)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(h){h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),F.isTrue(h.size()<=1),this._coordinates=h}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Mt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var h=arguments[0],g=arguments[1];ve.constructor_.call(this,g),this.init(h)}}])})(ve),Hi=(function(){function m(){t(this,m)}return o(m,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];return Math.abs(m.ofRingSigned(u))}if(Le(arguments[0],xt)){var h=arguments[0];return Math.abs(m.ofRingSigned(h))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var h=0,g=u[0].x,w=1;w<u.length-1;w++){var D=u[w].x-g,O=u[w+1].y;h+=D*(u[w-1].y-O)}return h/2}if(Le(arguments[0],xt)){var H=arguments[0],ie=H.size();if(ie<3)return 0;var de=new J,Te=new J,Pe=new J;H.getCoordinate(0,Te),H.getCoordinate(1,Pe);var nt=Te.x;Pe.x-=nt;for(var vt=0,Rt=1;Rt<ie-1;Rt++)de.y=Te.y,Te.x=Pe.x,Te.y=Pe.y,H.getCoordinate(Rt+1,Pe),Pe.x-=nt,vt+=Te.x*(de.y-Pe.y);return vt/2}}}])})(),In=(function(){return o(function m(){t(this,m)},null,[{key:"sort",value:function(){var m=arguments,u=arguments[0];if(arguments.length===1)u.sort(function(nt,vt){return nt.compareTo(vt)});else if(arguments.length===2)u.sort(function(nt,vt){return m[1].compare(nt,vt)});else if(arguments.length===3){var h=u.slice(arguments[1],arguments[2]);h.sort();var g=u.slice(0,arguments[1]).concat(h,u.slice(arguments[2],u.length));u.splice(0,u.length);var w,D=s(g);try{for(D.s();!(w=D.n()).done;){var O=w.value;u.push(O)}}catch(nt){D.e(nt)}finally{D.f()}}else if(arguments.length===4){var H=u.slice(arguments[1],arguments[2]);H.sort(function(nt,vt){return m[3].compare(nt,vt)});var ie=u.slice(0,arguments[1]).concat(H,u.slice(arguments[2],u.length));u.splice(0,u.length);var de,Te=s(ie);try{for(Te.s();!(de=Te.n()).done;){var Pe=de.value;u.push(Pe)}}catch(nt){Te.e(nt)}finally{Te.f()}}}},{key:"asList",value:function(m){var u,h=new mt,g=s(m);try{for(g.s();!(u=g.n()).done;){var w=u.value;h.add(w)}}catch(D){g.e(D)}finally{g.f()}return h}},{key:"copyOf",value:function(m,u){return m.slice(0,u)}}])})(),Cr=o(function m(){t(this,m)}),nr=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var h=new Array(this.getNumPoints()).fill(null),g=-1,w=this._shell.getCoordinates(),D=0;D<w.length;D++)h[++g]=w[D];for(var O=0;O<this._holes.length;O++)for(var H=this._holes[O].getCoordinates(),ie=0;ie<H.length;ie++)h[++g]=H[ie];return h}},{key:"getArea",value:function(){var h=0;h+=Hi.ofRing(this._shell.getCoordinateSequence());for(var g=0;g<this._holes.length;g++)h-=Hi.ofRing(this._holes[g].getCoordinateSequence());return h}},{key:"copyInternal",value:function(){for(var h=this._shell.copy(),g=new Array(this._holes.length).fill(null),w=0;w<this._holes.length;w++)g[w]=this._holes[w].copy();return new u(h,g,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var h=this._shell.getCoordinateSequence(),g=this.getEnvelopeInternal(),w=0;w<5;w++){var D=h.getX(w);if(D!==g.getMinX()&&D!==g.getMaxX())return!1;var O=h.getY(w);if(O!==g.getMinY()&&O!==g.getMaxY())return!1}for(var H=h.getX(0),ie=h.getY(0),de=1;de<=4;de++){var Te=h.getX(de),Pe=h.getY(de);if(Te!==H==(Pe!==ie))return!1;H=Te,ie=Pe}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var w=h,D=this._shell,O=w._shell;if(!D.equalsExact(O,g)||this._holes.length!==w._holes.length)return!1;for(var H=0;H<this._holes.length;H++)if(!this._holes[H].equalsExact(w._holes[H],g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var h=0;h<this._holes.length;h++)this._holes[h]=this.normalized(this._holes[h],!1);In.sort(this._holes)}else if(arguments.length===2){var g=arguments[0],w=arguments[1];if(g.isEmpty())return null;var D=g.getCoordinateSequence(),O=Fn.minCoordinateIndex(D,0,D.size()-2);Fn.scroll(D,O,!0),Qe.isCCW(D)===w&&Fn.reverse(D)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var h=this.getExteriorRing().reverse(),g=new Array(this.getNumInteriorRing()).fill(null),w=0;w<g.length;w++)g[w]=this.getInteriorRingN(w).reverse();return this.getFactory().createPolygon(h,g)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var h=0;h+=this._shell.getLength();for(var g=0;g<this._holes.length;g++)h+=this._holes[g].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=this._shell.getNumPoints(),g=0;g<this._holes.length;g++)h+=this._holes[g].getNumPoints();return h}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(h,g){var w=h.copy();return this.normalize(w,g),w}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],g=this._shell,w=h._shell;return g.compareToSameClass(w)}if(arguments.length===2){var D=arguments[1],O=arguments[0],H=this._shell,ie=O._shell,de=H.compareToSameClass(ie,D);if(de!==0)return de;for(var Te=this.getNumInteriorRing(),Pe=O.getNumInteriorRing(),nt=0;nt<Te&&nt<Pe;){var vt=this.getInteriorRingN(nt),Rt=O.getInteriorRingN(nt),Wt=vt.compareToSameClass(Rt,D);if(Wt!==0)return Wt;nt++}return nt<Te?1:nt<Pe?-1:0}}},{key:"apply",value:function(){if(Le(arguments[0],Vn)){var h=arguments[0];this._shell.apply(h);for(var g=0;g<this._holes.length;g++)this._holes[g].apply(h)}else if(Le(arguments[0],ii)){var w=arguments[0];if(this._shell.apply(w),!w.isDone())for(var D=0;D<this._holes.length&&(this._holes[D].apply(w),!w.isDone());D++);w.isGeometryChanged()&&this.geometryChanged()}else if(Le(arguments[0],Gr))arguments[0].filter(this);else if(Le(arguments[0],N)){var O=arguments[0];O.filter(this),this._shell.apply(O);for(var H=0;H<this._holes.length;H++)this._holes[H].apply(O)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var h=new Array(this._holes.length+1).fill(null);h[0]=this._shell;for(var g=0;g<this._holes.length;g++)h[g+1]=this._holes[g];return h.length<=1?this.getFactory().createLinearRing(h[0].getCoordinateSequence()):this.getFactory().createMultiLineString(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(h){return this._holes[h]}},{key:"interfaces_",get:function(){return[Cr]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var h=arguments[0],g=arguments[1],w=arguments[2];if(ve.constructor_.call(this,w),h===null&&(h=this.getFactory().createLinearRing()),g===null&&(g=[]),ve.hasNullElements(g))throw new A("holes must not contain null elements");if(h.isEmpty()&&ve.hasNonEmptyElements(g))throw new A("shell is empty but holes are not");this._shell=h,this._holes=g}}])})(ve),qi=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u)})(Ie),vo=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).array=[],h instanceof He&&g.addAll(h),g}return c(u,m),o(u,[{key:"contains",value:function(h){var g,w=s(this.array);try{for(w.s();!(g=w.n()).done;)if(g.value.compareTo(h)===0)return!0}catch(D){w.e(D)}finally{w.f()}return!1}},{key:"add",value:function(h){if(this.contains(h))return!1;for(var g=0,w=this.array.length;g<w;g++)if(this.array[g].compareTo(h)===1)return!!this.array.splice(g,0,h);return this.array.push(h),!0}},{key:"addAll",value:function(h){var g,w=s(h);try{for(w.s();!(g=w.n()).done;){var D=g.value;this.add(D)}}catch(O){w.e(O)}finally{w.f()}return!0}},{key:"remove",value:function(){throw new be}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new sh(this.array)}}])})(qi),sh=(function(){return o(function m(u){t(this,m),this.array=u,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new G;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new be}}])})(),Wi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){for(var h=new Se,g=0;g<this._geometries.length;g++)h.expandToInclude(this._geometries[g].getEnvelopeInternal());return h}},{key:"getGeometryN",value:function(h){return this._geometries[h]}},{key:"getCoordinates",value:function(){for(var h=new Array(this.getNumPoints()).fill(null),g=-1,w=0;w<this._geometries.length;w++)for(var D=this._geometries[w].getCoordinates(),O=0;O<D.length;O++)h[++g]=D[O];return h}},{key:"getArea",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getArea();return h}},{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var w=h;if(this._geometries.length!==w._geometries.length)return!1;for(var D=0;D<this._geometries.length;D++)if(!this._geometries[D].equalsExact(w._geometries[D],g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<this._geometries.length;h++)this._geometries[h].normalize();In.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var h=at.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,this._geometries[g].getBoundaryDimension());return h}},{key:"reverseInternal",value:function(){for(var h=this._geometries.length,g=new mt(h),w=0;w<h;w++)g.add(this._geometries[w].reverse());return this.getFactory().buildGeometry(g)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var h=at.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,this._geometries[g].getDimension());return h}},{key:"getLength",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getNumPoints();return h}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],g=new vo(In.asList(this._geometries)),w=new vo(In.asList(h._geometries));return this.compare(g,w)}if(arguments.length===2){for(var D=arguments[1],O=arguments[0],H=this.getNumGeometries(),ie=O.getNumGeometries(),de=0;de<H&&de<ie;){var Te=this.getGeometryN(de),Pe=O.getGeometryN(de),nt=Te.compareToSameClass(Pe,D);if(nt!==0)return nt;de++}return de<H?1:de<ie?-1:0}}},{key:"apply",value:function(){if(Le(arguments[0],Vn))for(var h=arguments[0],g=0;g<this._geometries.length;g++)this._geometries[g].apply(h);else if(Le(arguments[0],ii)){var w=arguments[0];if(this._geometries.length===0)return null;for(var D=0;D<this._geometries.length&&(this._geometries[D].apply(w),!w.isDone());D++);w.isGeometryChanged()&&this.geometryChanged()}else if(Le(arguments[0],Gr)){var O=arguments[0];O.filter(this);for(var H=0;H<this._geometries.length;H++)this._geometries[H].apply(O)}else if(Le(arguments[0],N)){var ie=arguments[0];ie.filter(this);for(var de=0;de<this._geometries.length;de++)this._geometries[de].apply(ie)}}},{key:"getBoundary",value:function(){return ve.checkNotGeometryCollection(this),F.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return ve.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],g=arguments[1];if(ve.constructor_.call(this,g),h===null&&(h=[]),ve.hasNullElements(h))throw new A("geometries must not contain null elements");this._geometries=h}}}}])})(ve),ca=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var h=arguments[0];return this._geometries[h].getCoordinate()}return y(u,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Mt]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Wi.constructor_.call(this,h,g)}}])})(Wi),Ns=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||y(u,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Fn.reverse(h),this.getFactory().createLinearRing(h)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!y(u,"isClosed",this,1).call(this))throw new A("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<u.MINIMUM_VALID_SIZE)throw new A("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];oi.constructor_.call(this,h,g),this.validateConstruction()}}])})(oi);Ns.MINIMUM_VALID_SIZE=4;var No=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"setOrdinate",value:function(h,g){switch(h){case u.X:this.x=g;break;case u.Y:this.y=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"getZ",value:function(){return J.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case u.X:return this.x;case u.Y:return this.y}throw new A("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)J.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h.x,h.y)}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g.x,g.y)}}else if(arguments.length===2){var w=arguments[0],D=arguments[1];J.constructor_.call(this,w,D,J.NULL_ORDINATE)}}}])})(J);No.X=0,No.Y=1,No.Z=-1,No.M=-1;var Po=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,g){switch(h){case u.X:this.x=g;break;case u.Y:this.y=g;break;case u.M:this._m=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getZ",value:function(){return J.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case u.X:return this.x;case u.Y:return this.y;case u.M:return this._m}throw new A("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)J.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h.x,h.y),this._m=h._m}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g.x,g.y),this._m=this.getM()}}else if(arguments.length===3){var w=arguments[0],D=arguments[1],O=arguments[2];J.constructor_.call(this,w,D,J.NULL_ORDINATE),this._m=O}}}])})(J);Po.X=0,Po.Y=1,Po.Z=-1,Po.M=2;var Ps=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,g){switch(h){case J.X:this.x=g;break;case J.Y:this.y=g;break;case J.Z:this.z=g;break;case J.M:this._m=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getOrdinate",value:function(h){switch(h){case J.X:return this.x;case J.Y:return this.y;case J.Z:return this.getZ();case J.M:return this.getM()}throw new A("Invalid ordinate index: "+h)}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)J.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h),this._m=h._m}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g),this._m=this.getM()}}else if(arguments.length===4){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3];J.constructor_.call(this,w,D,O),this._m=H}}}])})(J),Ol=(function(){function m(){t(this,m)}return o(m,null,[{key:"measures",value:function(u){return u instanceof No?0:u instanceof Po||u instanceof Ps?1:0}},{key:"dimension",value:function(u){return u instanceof No?2:u instanceof Po?3:u instanceof Ps?4:3}},{key:"create",value:function(){if(arguments.length===1){var u=arguments[0];return m.create(u,0)}if(arguments.length===2){var h=arguments[0],g=arguments[1];return h===2?new No:h===3&&g===0?new J:h===3&&g===1?new Po:h===4&&g===1?new Ps:new J}}}])})(),Ls=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getCoordinate",value:function(h){return this.get(h)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Le(arguments[0],He)){for(var h=arguments[1],g=!1,w=arguments[0].iterator();w.hasNext();)this.add(w.next(),h),g=!0;return g}return y(u,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var h=y(u,"clone",this,1).call(this),g=0;g<this.size();g++)h.add(g,this.get(g).clone());return h}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(u.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(u.coordArrayType);for(var h=this.size(),g=new Array(h).fill(null),w=0;w<h;w++)g[w]=this.get(h-w-1);return g}}},{key:"add",value:function(){if(arguments.length===1){var h=arguments[0];return y(u,"add",this,1).call(this,h)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var g=arguments[0],w=arguments[1];return this.add(g,w,!0),!0}if(arguments[0]instanceof J&&typeof arguments[1]=="boolean"){var D=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(D))return null;y(u,"add",this,1).call(this,D)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var O=arguments[0],H=arguments[1];return this.add(O,H),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var ie=arguments[0],de=arguments[1];if(arguments[2])for(var Te=0;Te<ie.length;Te++)this.add(ie[Te],de);else for(var Pe=ie.length-1;Pe>=0;Pe--)this.add(ie[Pe],de);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof J){var nt=arguments[0],vt=arguments[1];if(!arguments[2]){var Rt=this.size();if(Rt>0&&(nt>0&&this.get(nt-1).equals2D(vt)||nt<Rt&&this.get(nt).equals2D(vt)))return null}y(u,"add",this,1).call(this,nt,vt)}}else if(arguments.length===4){var Wt=arguments[0],ir=arguments[1],Kn=arguments[2],Lr=arguments[3],Eo=1;Kn>Lr&&(Eo=-1);for(var Bo=Kn;Bo!==Lr;Bo+=Eo)this.add(Wt[Bo],ir);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var h=this.get(0).copy();this.add(h,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.ensureCapacity(h.length),this.add(h,!0)}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.ensureCapacity(g.length),this.add(g,w)}}}}])})(mt);Ls.coordArrayType=new Array(0).fill(null);var si=(function(){function m(){t(this,m)}return o(m,null,[{key:"isRing",value:function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])}},{key:"ptNotInList",value:function(u,h){for(var g=0;g<u.length;g++){var w=u[g];if(m.indexOf(w,h)<0)return w}return null}},{key:"scroll",value:function(u,h){var g=m.indexOf(h,u);if(g<0)return null;var w=new Array(u.length).fill(null);Dt.arraycopy(u,g,w,0,u.length-g),Dt.arraycopy(u,0,w,u.length-g,g),Dt.arraycopy(w,0,u,0,u.length)}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];if(u===h)return!0;if(u===null||h===null||u.length!==h.length)return!1;for(var g=0;g<u.length;g++)if(!u[g].equals(h[g]))return!1;return!0}if(arguments.length===3){var w=arguments[0],D=arguments[1],O=arguments[2];if(w===D)return!0;if(w===null||D===null||w.length!==D.length)return!1;for(var H=0;H<w.length;H++)if(O.compare(w[H],D[H])!==0)return!1;return!0}}},{key:"intersection",value:function(u,h){for(var g=new Ls,w=0;w<u.length;w++)h.intersects(u[w])&&g.add(u[w],!0);return g.toCoordinateArray()}},{key:"measures",value:function(u){if(u===null||u.length===0)return 0;var h,g=0,w=s(u);try{for(w.s();!(h=w.n()).done;){var D=h.value;g=Math.max(g,Ol.measures(D))}}catch(O){w.e(O)}finally{w.f()}return g}},{key:"hasRepeatedPoints",value:function(u){for(var h=1;h<u.length;h++)if(u[h-1].equals(u[h]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(u){return m.hasRepeatedPoints(u)?new Ls(u,!1).toCoordinateArray():u}},{key:"reverse",value:function(u){for(var h=u.length-1,g=Math.trunc(h/2),w=0;w<=g;w++){var D=u[w];u[w]=u[h-w],u[h-w]=D}}},{key:"removeNull",value:function(u){for(var h=0,g=0;g<u.length;g++)u[g]!==null&&h++;var w=new Array(h).fill(null);if(h===0)return w;for(var D=0,O=0;O<u.length;O++)u[O]!==null&&(w[D++]=u[O]);return w}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var u=arguments[0],h=new Array(u.length).fill(null),g=0;g<u.length;g++)h[g]=u[g].copy();return h}if(arguments.length===5)for(var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3],ie=arguments[4],de=0;de<ie;de++)O[H+de]=w[D+de].copy()}},{key:"isEqualReversed",value:function(u,h){for(var g=0;g<u.length;g++){var w=u[g],D=h[u.length-g-1];if(w.compareTo(D)!==0)return!1}return!0}},{key:"envelope",value:function(u){for(var h=new Se,g=0;g<u.length;g++)h.expandToInclude(u[g]);return h}},{key:"toCoordinateArray",value:function(u){return u.toArray(m.coordArrayType)}},{key:"dimension",value:function(u){if(u===null||u.length===0)return 3;var h,g=0,w=s(u);try{for(w.s();!(h=w.n()).done;){var D=h.value;g=Math.max(g,Ol.dimension(D))}}catch(O){w.e(O)}finally{w.f()}return g}},{key:"atLeastNCoordinatesOrNothing",value:function(u,h){return h.length>=u?h:[]}},{key:"indexOf",value:function(u,h){for(var g=0;g<h.length;g++)if(u.equals(h[g]))return g;return-1}},{key:"increasingDirection",value:function(u){for(var h=0;h<Math.trunc(u.length/2);h++){var g=u.length-1-h,w=u[h].compareTo(u[g]);if(w!==0)return w}return 1}},{key:"compare",value:function(u,h){for(var g=0;g<u.length&&g<h.length;){var w=u[g].compareTo(h[g]);if(w!==0)return w;g++}return g<h.length?-1:g<u.length?1:0}},{key:"minCoordinate",value:function(u){for(var h=null,g=0;g<u.length;g++)(h===null||h.compareTo(u[g])>0)&&(h=u[g]);return h}},{key:"extract",value:function(u,h,g){h=sr.clamp(h,0,u.length);var w=(g=sr.clamp(g,-1,u.length))-h+1;g<0&&(w=0),h>=u.length&&(w=0),g<h&&(w=0);var D=new Array(w).fill(null);if(w===0)return D;for(var O=0,H=h;H<=g;H++)D[O++]=u[H];return D}}])})(),Df=(function(){return o(function m(){t(this,m)},[{key:"compare",value:function(m,u){var h=m,g=u;return si.compare(h,g)}},{key:"interfaces_",get:function(){return[K]}}])})(),Af=(function(){return o(function m(){t(this,m)},[{key:"compare",value:function(m,u){var h=m,g=u;if(h.length<g.length)return-1;if(h.length>g.length)return 1;if(h.length===0)return 0;var w=si.compare(h,g);return si.isEqualReversed(h,g)?0:w}},{key:"OLDcompare",value:function(m,u){var h=m,g=u;if(h.length<g.length)return-1;if(h.length>g.length)return 1;if(h.length===0)return 0;for(var w=si.increasingDirection(h),D=si.increasingDirection(g),O=w>0?0:h.length-1,H=D>0?0:h.length-1,ie=0;ie<h.length;ie++){var de=h[O].compareTo(g[H]);if(de!==0)return de;O+=w,H+=D}return 0}},{key:"interfaces_",get:function(){return[K]}}])})();si.ForwardComparator=Df,si.BidirectionalComparator=Af,si.coordArrayType=new Array(0).fill(null);var Su=(function(){return o(function m(u){t(this,m),this.str=u},[{key:"append",value:function(m){this.str+=m}},{key:"setCharAt",value:function(m,u){this.str=this.str.substr(0,m)+u+this.str.substr(m+1)}},{key:"toString",value:function(){return this.str}}])})(),ah=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getM",value:function(u){return this.hasM()?this._coordinates[u].getM():q.NaN}},{key:"setOrdinate",value:function(u,h,g){switch(h){case xt.X:this._coordinates[u].x=g;break;case xt.Y:this._coordinates[u].y=g;break;default:this._coordinates[u].setOrdinate(h,g)}}},{key:"getZ",value:function(u){return this.hasZ()?this._coordinates[u].getZ():q.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(u,h){switch(h){case xt.X:return this._coordinates[u].x;case xt.Y:return this._coordinates[u].y;default:return this._coordinates[u].getOrdinate(h)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var h=arguments[0];arguments[1].setCoordinate(this._coordinates[h])}}},{key:"getCoordinateCopy",value:function(u){var h=this.createCoordinate();return h.setCoordinate(this._coordinates[u]),h}},{key:"createCoordinate",value:function(){return Ol.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(u){return this._coordinates[u].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(u){for(var h=0;h<this._coordinates.length;h++)u.expandToInclude(this._coordinates[h]);return u}},{key:"copy",value:function(){for(var u=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++){var g=this.createCoordinate();g.setCoordinate(this._coordinates[h]),u[h]=g}return new m(u,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var u=new Su(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)u.append(", "),u.append(this._coordinates[h]);return u.append(")"),u.toString()}return"()"}},{key:"getY",value:function(u){return this._coordinates[u].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[xt,X]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];m.constructor_.call(this,u,si.dimension(u),si.measures(u))}else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var g=0;g<h;g++)this._coordinates[g]=new J}else if(Le(arguments[0],xt)){var w=arguments[0];if(w===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=w.getDimension(),this._measures=w.getMeasures(),this._coordinates=new Array(w.size()).fill(null);for(var D=0;D<this._coordinates.length;D++)this._coordinates[D]=w.getCoordinateCopy(D)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var O=arguments[0],H=arguments[1];m.constructor_.call(this,O,H,si.measures(O))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ie=arguments[0],de=arguments[1];this._coordinates=new Array(ie).fill(null),this._dimension=de;for(var Te=0;Te<ie;Te++)this._coordinates[Te]=Ol.create(de)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Pe=arguments[0],nt=arguments[1],vt=arguments[2];this._dimension=nt,this._measures=vt,this._coordinates=Pe===null?new Array(0).fill(null):Pe}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var Rt=arguments[0],Wt=arguments[1],ir=arguments[2];this._coordinates=new Array(Rt).fill(null),this._dimension=Wt,this._measures=ir;for(var Kn=0;Kn<Rt;Kn++)this._coordinates[Kn]=this.createCoordinate()}}}}])})(),lh=(function(){function m(){t(this,m)}return o(m,[{key:"readResolve",value:function(){return m.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new ah(arguments[0]);if(Le(arguments[0],xt))return new ah(arguments[0])}else{if(arguments.length===2){var u=arguments[1];return u>3&&(u=3),u<2&&(u=2),new ah(arguments[0],u)}if(arguments.length===3){var h=arguments[2],g=arguments[1]-h;return h>1&&(h=1),g>3&&(g=3),g<2&&(g=2),new ah(arguments[0],g+h,h)}}}},{key:"interfaces_",get:function(){return[Vt,X]}}],[{key:"instance",value:function(){return m.instanceObject}}])})();lh.instanceObject=new lh;var Rf=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var h=new mt,g=0;g<this._geometries.length;g++)for(var w=this._geometries[g].getBoundary(),D=0;D<w.getNumGeometries();D++)h.add(w.getGeometryN(D));var O=new Array(h.size()).fill(null);return this.getFactory().createMultiLineString(h.toArray(O))}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Cr]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Wi.constructor_.call(this,h,g)}}])})(Wi),up=(function(){return o(function m(){t(this,m)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),Ma=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).map=new Map,h}return c(u,m),o(u,[{key:"get",value:function(h){return this.map.get(h)||null}},{key:"put",value:function(h,g){return this.map.set(h,g),g}},{key:"values",value:function(){for(var h=new mt,g=this.map.values(),w=g.next();!w.done;)h.add(w.value),w=g.next();return h}},{key:"entrySet",value:function(){var h=new U;return this.map.entries().forEach(function(g){return h.add(g)}),h}},{key:"size",value:function(){return this.map.size()}}])})(up),hs=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this._modelType===h._modelType&&this._scale===h._scale}},{key:"compareTo",value:function(u){var h=u,g=this.getMaximumSignificantDigits(),w=h.getMaximumSignificantDigits();return pt.compare(g,w)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===m.FLOATING||this._modelType===m.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var u="UNKNOWN";return this._modelType===m.FLOATING?u="Floating":this._modelType===m.FLOATING_SINGLE?u="Floating-Single":this._modelType===m.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var u=arguments[0];return q.isNaN(u)||this._modelType===m.FLOATING_SINGLE?u:this._modelType===m.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof J){var h=arguments[0];if(this._modelType===m.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}}},{key:"getMaximumSignificantDigits",value:function(){var u=16;return this._modelType===m.FLOATING?u=16:this._modelType===m.FLOATING_SINGLE?u=6:this._modelType===m.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u}},{key:"setScale",value:function(u){this._scale=Math.abs(u)}},{key:"interfaces_",get:function(){return[X,k]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=m.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Cu){var u=arguments[0];this._modelType=u,u===m.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var h=arguments[0];this._modelType=m.FIXED,this.setScale(h)}else if(arguments[0]instanceof m){var g=arguments[0];this._modelType=g._modelType,this._scale=g._scale}}}},{key:"mostPrecise",value:function(u,h){return u.compareTo(h)>=0?u:h}}])})(),Cu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"readResolve",value:function(){return m.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){this._name=null;var u=arguments[0];this._name=u,m.nameToTypeMap.put(u,this)}}])})();Cu.nameToTypeMap=new Ma,hs.Type=Cu,hs.FIXED=new Cu("FIXED"),hs.FLOATING=new Cu("FLOATING"),hs.FLOATING_SINGLE=new Cu("FLOATING SINGLE"),hs.maximumPreciseValue=9007199254740992;var uh=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?at.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new be}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[$t]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Wi.constructor_.call(this,h,g)}}])})(Wi),Iu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"createEmpty",value:function(u){switch(u){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new A("Invalid dimension: "+u)}}},{key:"toGeometry",value:function(u){return u.isNull()?this.createPoint():u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new J(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new J(u.getMinX(),u.getMinY()),new J(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new J(u.getMinX(),u.getMinY()),new J(u.getMinX(),u.getMaxY()),new J(u.getMaxX(),u.getMaxY()),new J(u.getMaxX(),u.getMinY()),new J(u.getMinX(),u.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLineString(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Le(arguments[0],xt))return new oi(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new uh(null,this):arguments.length===1?new uh(arguments[0],this):void 0}},{key:"buildGeometry",value:function(u){for(var h=null,g=!1,w=!1,D=u.iterator();D.hasNext();){var O=D.next(),H=O.getTypeCode();h===null&&(h=H),H!==h&&(g=!0),O instanceof Wi&&(w=!0)}if(h===null)return this.createGeometryCollection();if(g||w)return this.createGeometryCollection(m.toGeometryArray(u));var ie=u.iterator().next();if(u.size()>1){if(ie instanceof nr)return this.createMultiPolygon(m.toPolygonArray(u));if(ie instanceof oi)return this.createMultiLineString(m.toLineStringArray(u));if(ie instanceof Mi)return this.createMultiPoint(m.toPointArray(u));F.shouldNeverReachHere("Unhandled geometry type: "+ie.getGeometryType())}return ie}},{key:"createMultiPointFromCoords",value:function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(Le(arguments[0],xt))return new Mi(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Le(arguments[0],xt)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof Ns){var g=arguments[0];return this.createPolygon(g,null)}}else if(arguments.length===2)return new nr(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Wi(null,this):arguments.length===1?new Wi(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Le(arguments[0],xt))return new Ns(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new Rf(null,this):arguments.length===1?new Rf(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new ca(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new ca(arguments[0],this);if(Le(arguments[0],xt)){var u=arguments[0];if(u===null)return this.createMultiPoint(new Array(0).fill(null));for(var h=new Array(u.size()).fill(null),g=0;g<u.size();g++){var w=this.getCoordinateSequenceFactory().create(1,u.getDimension(),u.getMeasures());Fn.copy(u,g,w,0,1),h[g]=this.createPoint(w)}return this.createMultiPoint(h)}}}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)m.constructor_.call(this,new hs,0);else if(arguments.length===1){if(Le(arguments[0],Vt)){var u=arguments[0];m.constructor_.call(this,new hs,0,u)}else if(arguments[0]instanceof hs){var h=arguments[0];m.constructor_.call(this,h,0,m.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];m.constructor_.call(this,g,w,m.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var D=arguments[0],O=arguments[1],H=arguments[2];this._precisionModel=D,this._coordinateSequenceFactory=H,this._SRID=O}}},{key:"toMultiPolygonArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toGeometryArray",value:function(u){if(u===null)return null;var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return lh.instance()}},{key:"toMultiLineStringArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toLineStringArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toMultiPointArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toLinearRingArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toPointArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toPolygonArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"createPointFromInternalCoord",value:function(u,h){return h.getPrecisionModel().makePrecise(u),h.getFactory().createPoint(u)}}])})(),Mf="XY",im="XYZ",Fl="XYM",Nf="XYZM",om={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ni="EMPTY",ch=1,xo=2,ha=3,cp=4,Lo=5,ro=6;for(var Tu in om)om[Tu].toUpperCase();var sm=(function(){return o(function m(u){t(this,m),this.wkt=u,this.index_=-1},[{key:"isAlpha_",value:function(m){return m>="a"&&m<="z"||m>="A"&&m<="Z"}},{key:"isNumeric_",value:function(m,u){return m>="0"&&m<="9"||m=="."&&!(u!==void 0&&u)}},{key:"isWhiteSpace_",value:function(m){return m==" "||m=="	"||m=="\r"||m==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var m,u=this.nextChar_(),h=this.index_,g=u;if(u=="(")m=xo;else if(u==",")m=Lo;else if(u==")")m=ha;else if(this.isNumeric_(u)||u=="-")m=cp,g=this.readNumber_();else if(this.isAlpha_(u))m=ch,g=this.readText_();else{if(this.isWhiteSpace_(u))return this.nextToken();if(u!=="")throw new Error("Unexpected character: "+u);m=ro}return{position:h,value:g,type:m}}},{key:"readNumber_",value:function(){var m,u=this.index_,h=!1,g=!1;do m=="."?h=!0:m!="e"&&m!="E"||(g=!0),m=this.nextChar_();while(this.isNumeric_(m,h)||!g&&(m=="e"||m=="E")||g&&(m=="-"||m=="+"));return parseFloat(this.wkt.substring(u,this.index_--))}},{key:"readText_",value:function(){var m,u=this.index_;do m=this.nextChar_();while(this.isAlpha_(m));return this.wkt.substring(u,this.index_--).toUpperCase()}}])})(),D_=(function(){return o(function m(u,h){t(this,m),this.lexer_=u,this.token_,this.layout_=Mf,this.factory=h},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(m){return this.token_.type==m}},{key:"match",value:function(m){var u=this.isTokenType(m);return u&&this.consume_(),u}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var m=Mf,u=this.token_;if(this.isTokenType(ch)){var h=u.value;h==="Z"?m=im:h==="M"?m=Fl:h==="ZM"&&(m=Nf),m!==Mf&&this.consume_()}return m}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(xo)){var m=[];do m.push(this.parseGeometry_());while(this.match(Lo));if(this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(xo)){var m=this.parsePoint_();if(this.match(ha))return m}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(xo)){var m=this.parsePointList_();if(this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(xo)){var m=this.parseLineStringTextList_();if(this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var m;if(this.match(xo)){if(m=this.token_.type==xo?this.parsePointTextList_():this.parsePointList_(),this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(xo)){var m=this.parseLineStringTextList_();if(this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(xo)){var m=this.parsePolygonTextList_();if(this.match(ha))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var m=[],u=this.layout_.length,h=0;h<u;++h){var g=this.token_;if(!this.match(cp))break;m.push(g.value)}if(m.length==u)return m;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var m=[this.parsePoint_()];this.match(Lo);)m.push(this.parsePoint_());return m}},{key:"parsePointTextList_",value:function(){for(var m=[this.parsePointText_()];this.match(Lo);)m.push(this.parsePointText_());return m}},{key:"parseLineStringTextList_",value:function(){for(var m=[this.parseLineStringText_()];this.match(Lo);)m.push(this.parseLineStringText_());return m}},{key:"parsePolygonTextList_",value:function(){for(var m=[this.parsePolygonText_()];this.match(Lo);)m.push(this.parsePolygonText_());return m}},{key:"isEmptyGeometry_",value:function(){var m=this.isTokenType(ch)&&this.token_.value==Ni;return m&&this.consume_(),m}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var m=this.factory,u=function(Wt){return r(J,p(Wt))},h=function(Wt){var ir=Wt.map(function(Kn){return m.createLinearRing(Kn.map(u))});return ir.length>1?m.createPolygon(ir[0],ir.slice(1)):m.createPolygon(ir[0])},g=this.token_;if(this.match(ch)){var w=g.value;if(this.layout_=this.parseGeometryLayout_(),w=="GEOMETRYCOLLECTION"){var D=this.parseGeometryCollectionText_();return m.createGeometryCollection(D)}switch(w){case"POINT":var O=this.parsePointText_();return O?m.createPoint(r(J,p(O))):m.createPoint();case"LINESTRING":var H=this.parseLineStringText_().map(u);return m.createLineString(H);case"LINEARRING":var ie=this.parseLineStringText_().map(u);return m.createLinearRing(ie);case"POLYGON":var de=this.parsePolygonText_();return de&&de.length!==0?h(de):m.createPolygon();case"MULTIPOINT":var Te=this.parseMultiPointText_();if(!Te||Te.length===0)return m.createMultiPoint();var Pe=Te.map(u).map(function(Wt){return m.createPoint(Wt)});return m.createMultiPoint(Pe);case"MULTILINESTRING":var nt=this.parseMultiLineStringText_().map(function(Wt){return m.createLineString(Wt.map(u))});return m.createMultiLineString(nt);case"MULTIPOLYGON":var vt=this.parseMultiPolygonText_();if(!vt||vt.length===0)return m.createMultiPolygon();var Rt=vt.map(h);return m.createMultiPolygon(Rt);default:throw new Error("Invalid geometry type: "+w)}}throw new Error(this.formatErrorMessage_())}}])})();function am(m){if(m.isEmpty())return"";var u=m.getCoordinate(),h=[u.x,u.y];return u.z===void 0||Number.isNaN(u.z)||h.push(u.z),u.m===void 0||Number.isNaN(u.m)||h.push(u.m),h.join(" ")}function ks(m){for(var u=m.getCoordinates().map(function(D){var O=[D.x,D.y];return D.z===void 0||Number.isNaN(D.z)||O.push(D.z),D.m===void 0||Number.isNaN(D.m)||O.push(D.m),O}),h=[],g=0,w=u.length;g<w;++g)h.push(u[g].join(" "));return h.join(", ")}function hp(m){var u=[];u.push("("+ks(m.getExteriorRing())+")");for(var h=0,g=m.getNumInteriorRing();h<g;++h)u.push("("+ks(m.getInteriorRingN(h))+")");return u.join(", ")}var lm={Point:am,LineString:ks,LinearRing:ks,Polygon:hp,MultiPoint:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+am(m.getGeometryN(h))+")");return u.join(", ")},MultiLineString:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+ks(m.getGeometryN(h))+")");return u.join(", ")},MultiPolygon:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+hp(m.getGeometryN(h))+")");return u.join(", ")},GeometryCollection:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push(hh(m.getGeometryN(h)));return u.join(", ")}};function hh(m){var u=m.getGeometryType(),h=lm[u];u=u.toUpperCase();var g=(function(w){var D="";if(w.isEmpty())return D;var O=w.getCoordinate();return O.z===void 0||Number.isNaN(O.z)||(D+="Z"),O.m===void 0||Number.isNaN(O.m)||(D+="M"),D})(m);return g.length>0&&(u+=" "+g),m.isEmpty()?u+" "+Ni:u+" ("+h(m)+")"}var fh=(function(){return o(function m(u){t(this,m),this.geometryFactory=u||new Iu,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(m){var u=new sm(m);return new D_(u,this.geometryFactory).parse()}},{key:"write",value:function(m){return hh(m)}}])})(),fp=(function(){return o(function m(u){t(this,m),this.parser=new fh(u)},[{key:"write",value:function(m){return this.parser.write(m)}}],[{key:"toLineString",value:function(m,u){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+m.x+" "+m.y+", "+u.x+" "+u.y+" )"}}])})(),Jr=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getIndexAlongSegment",value:function(u,h){return this.computeIntLineIndex(),this._intLineIndex[u][h]}},{key:"getTopologySummary",value:function(){var u=new Su;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()}},{key:"computeIntersection",value:function(u,h,g,w){this._inputLines[0][0]=u,this._inputLines[0][1]=h,this._inputLines[1][0]=g,this._inputLines[1][1]=w,this._result=this.computeIntersect(u,h,g,w)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[u][0])&&!this._intPt[h].equals2D(this._inputLines[u][1]))return!0;return!1}}},{key:"getIntersection",value:function(u){return this._intPt[u]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==m.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(u,h){return m.computeEdgeDistance(this._intPt[h],this._inputLines[u][0],this._inputLines[u][1])}},{key:"isCollinear",value:function(){return this._result===m.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return fp.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+fp.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(u,h){return this._inputLines[u][h]}},{key:"isIntersection",value:function(u){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(u))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(u,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][h]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new J,this._intPt[1]=new J,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(u,h,g){var w=Math.abs(g.x-h.x),D=Math.abs(g.y-h.y),O=-1;if(u.equals(h))O=0;else if(u.equals(g))O=w>D?w:D;else{var H=Math.abs(u.x-h.x),ie=Math.abs(u.y-h.y);(O=w>D?H:ie)!==0||u.equals(h)||(O=Math.max(H,ie))}return F.isTrue(!(O===0&&!u.equals(h)),"Bad distance calculation"),O}},{key:"nonRobustComputeEdgeDistance",value:function(u,h,g){var w=u.x-h.x,D=u.y-h.y,O=Math.sqrt(w*w+D*D);return F.isTrue(!(O===0&&!u.equals(h)),"Invalid distance calculation"),O}}])})();Jr.DONT_INTERSECT=0,Jr.DO_INTERSECT=1,Jr.COLLINEAR=2,Jr.NO_INTERSECTION=0,Jr.POINT_INTERSECTION=1,Jr.COLLINEAR_INTERSECTION=2;var Du=(function(m){function u(){return t(this,u),e(this,u)}return c(u,m),o(u,[{key:"isInSegmentEnvelopes",value:function(h){var g=new Se(this._inputLines[0][0],this._inputLines[0][1]),w=new Se(this._inputLines[1][0],this._inputLines[1][1]);return g.contains(h)&&w.contains(h)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return y(u,"computeIntersection",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1],w=arguments[2];if(this._isProper=!1,Se.intersects(g,w,h)&&Qe.index(g,w,h)===0&&Qe.index(w,g,h)===0)return this._isProper=!0,(h.equals(g)||h.equals(w))&&(this._isProper=!1),this._result=Jr.POINT_INTERSECTION,null;this._result=Jr.NO_INTERSECTION}},{key:"intersection",value:function(h,g,w,D){var O=this.intersectionSafe(h,g,w,D);return this.isInSegmentEnvelopes(O)||(O=new J(u.nearestEndpoint(h,g,w,D))),this._precisionModel!==null&&this._precisionModel.makePrecise(O),O}},{key:"checkDD",value:function(h,g,w,D,O){var H=qt.intersection(h,g,w,D),ie=this.isInSegmentEnvelopes(H);Dt.out.println("DD in env = "+ie+"  --------------------- "+H),O.distance(H)>1e-4&&Dt.out.println("Distance = "+O.distance(H))}},{key:"intersectionSafe",value:function(h,g,w,D){var O=dr.intersection(h,g,w,D);return O===null&&(O=u.nearestEndpoint(h,g,w,D)),O}},{key:"computeCollinearIntersection",value:function(h,g,w,D){var O=Se.intersects(h,g,w),H=Se.intersects(h,g,D),ie=Se.intersects(w,D,h),de=Se.intersects(w,D,g);return O&&H?(this._intPt[0]=w,this._intPt[1]=D,Jr.COLLINEAR_INTERSECTION):ie&&de?(this._intPt[0]=h,this._intPt[1]=g,Jr.COLLINEAR_INTERSECTION):O&&ie?(this._intPt[0]=w,this._intPt[1]=h,!w.equals(h)||H||de?Jr.COLLINEAR_INTERSECTION:Jr.POINT_INTERSECTION):O&&de?(this._intPt[0]=w,this._intPt[1]=g,!w.equals(g)||H||ie?Jr.COLLINEAR_INTERSECTION:Jr.POINT_INTERSECTION):H&&ie?(this._intPt[0]=D,this._intPt[1]=h,!D.equals(h)||O||de?Jr.COLLINEAR_INTERSECTION:Jr.POINT_INTERSECTION):H&&de?(this._intPt[0]=D,this._intPt[1]=g,!D.equals(g)||O||ie?Jr.COLLINEAR_INTERSECTION:Jr.POINT_INTERSECTION):Jr.NO_INTERSECTION}},{key:"computeIntersect",value:function(h,g,w,D){if(this._isProper=!1,!Se.intersects(h,g,w,D))return Jr.NO_INTERSECTION;var O=Qe.index(h,g,w),H=Qe.index(h,g,D);if(O>0&&H>0||O<0&&H<0)return Jr.NO_INTERSECTION;var ie=Qe.index(w,D,h),de=Qe.index(w,D,g);return ie>0&&de>0||ie<0&&de<0?Jr.NO_INTERSECTION:O===0&&H===0&&ie===0&&de===0?this.computeCollinearIntersection(h,g,w,D):(O===0||H===0||ie===0||de===0?(this._isProper=!1,h.equals2D(w)||h.equals2D(D)?this._intPt[0]=h:g.equals2D(w)||g.equals2D(D)?this._intPt[0]=g:O===0?this._intPt[0]=new J(w):H===0?this._intPt[0]=new J(D):ie===0?this._intPt[0]=new J(h):de===0&&(this._intPt[0]=new J(g))):(this._isProper=!0,this._intPt[0]=this.intersection(h,g,w,D)),Jr.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(h,g,w,D){var O=h,H=At.pointToSegment(h,w,D),ie=At.pointToSegment(g,w,D);return ie<H&&(H=ie,O=g),(ie=At.pointToSegment(w,h,g))<H&&(H=ie,O=w),(ie=At.pointToSegment(D,h,g))<H&&(H=ie,O=D),O}}])})(Jr),dp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"countSegment",value:function(u,h){if(u.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&h.y===this._p.y){var g=u.x,w=h.x;return g>w&&(g=h.x,w=u.x),this._p.x>=g&&this._p.x<=w&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&u.y<=this._p.y){var D=Qe.index(u,h,this._p);if(D===Qe.COLLINEAR)return this._isPointOnSegment=!0,null;h.y<u.y&&(D=-D),D===Qe.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==re.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?re.BOUNDARY:this._crossingCount%2==1?re.INTERIOR:re.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof J&&Le(arguments[1],xt)){for(var u=arguments[1],h=new m(arguments[0]),g=new J,w=new J,D=1;D<u.size();D++)if(u.getCoordinate(D,g),u.getCoordinate(D-1,w),h.countSegment(g,w),h.isOnSegment())return h.getLocation();return h.getLocation()}if(arguments[0]instanceof J&&arguments[1]instanceof Array){for(var O=arguments[1],H=new m(arguments[0]),ie=1;ie<O.length;ie++){var de=O[ie],Te=O[ie-1];if(H.countSegment(de,Te),H.isOnSegment())return H.getLocation()}return H.getLocation()}}}])})(),Pf=(function(){function m(){t(this,m)}return o(m,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof J&&Le(arguments[1],xt)){for(var u=arguments[0],h=arguments[1],g=new Du,w=new J,D=new J,O=h.size(),H=1;H<O;H++)if(h.getCoordinate(H-1,w),h.getCoordinate(H,D),g.computeIntersection(u,w,D),g.hasIntersection())return!0;return!1}if(arguments[0]instanceof J&&arguments[1]instanceof Array){for(var ie=arguments[0],de=arguments[1],Te=new Du,Pe=1;Pe<de.length;Pe++){var nt=de[Pe-1],vt=de[Pe];if(Te.computeIntersection(ie,nt,vt),Te.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(u,h){return dp.locatePointInRing(u,h)}},{key:"isInRing",value:function(u,h){return m.locateInRing(u,h)!==re.EXTERIOR}}])})(),Si=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"setAllLocations",value:function(u){for(var h=0;h<this.location.length;h++)this.location[h]=u}},{key:"isNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==re.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(u){for(var h=0;h<this.location.length;h++)this.location[h]===re.NONE&&(this.location[h]=u)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(u){if(u.location.length>this.location.length){var h=new Array(3).fill(null);h[he.ON]=this.location[he.ON],h[he.LEFT]=re.NONE,h[he.RIGHT]=re.NONE,this.location=h}for(var g=0;g<this.location.length;g++)this.location[g]===re.NONE&&g<u.location.length&&(this.location[g]=u.location[g])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var u=this.location[he.LEFT];this.location[he.LEFT]=this.location[he.RIGHT],this.location[he.RIGHT]=u}},{key:"toString",value:function(){var u=new Be;return this.location.length>1&&u.append(re.toLocationSymbol(this.location[he.LEFT])),u.append(re.toLocationSymbol(this.location[he.ON])),this.location.length>1&&u.append(re.toLocationSymbol(this.location[he.RIGHT])),u.toString()}},{key:"setLocations",value:function(u,h,g){this.location[he.ON]=u,this.location[he.LEFT]=h,this.location[he.RIGHT]=g}},{key:"get",value:function(u){return u<this.location.length?this.location[u]:re.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===re.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var u=arguments[0];this.setLocation(he.ON,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.location[h]=g}}},{key:"init",value:function(u){this.location=new Array(u).fill(null),this.setAllLocations(re.NONE)}},{key:"isEqualOnSide",value:function(u,h){return this.location[h]===u.location[h]}},{key:"allPositionsEqual",value:function(u){for(var h=0;h<this.location.length;h++)if(this.location[h]!==u)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];this.init(u.length)}else if(Number.isInteger(arguments[0])){var h=arguments[0];this.init(1),this.location[he.ON]=h}else if(arguments[0]instanceof m){var g=arguments[0];if(this.init(g.location.length),g!==null)for(var w=0;w<this.location.length;w++)this.location[w]=g.location[w]}}else if(arguments.length===3){var D=arguments[0],O=arguments[1],H=arguments[2];this.init(3),this.location[he.ON]=D,this.location[he.LEFT]=O,this.location[he.RIGHT]=H}}}])})(),Os=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getGeometryCount",value:function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u}},{key:"setAllLocations",value:function(u,h){this.elt[u].setAllLocations(h)}},{key:"isNull",value:function(u){return this.elt[u].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.elt[h].setAllLocationsIfNull(g)}}},{key:"isLine",value:function(u){return this.elt[u].isLine()}},{key:"merge",value:function(u){for(var h=0;h<2;h++)this.elt[h]===null&&u.elt[h]!==null?this.elt[h]=new Si(u.elt[h]):this.elt[h].merge(u.elt[h])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(he.ON)}if(arguments.length===2){var h=arguments[0],g=arguments[1];return this.elt[h].get(g)}}},{key:"toString",value:function(){var u=new Be;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}}},{key:"isAnyNull",value:function(u){return this.elt[u].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.elt[u].setLocation(he.ON,h)}else if(arguments.length===3){var g=arguments[0],w=arguments[1],D=arguments[2];this.elt[g].setLocation(w,D)}}},{key:"isEqualOnSide",value:function(u,h){return this.elt[0].isEqualOnSide(u.elt[0],h)&&this.elt[1].isEqualOnSide(u.elt[1],h)}},{key:"allPositionsEqual",value:function(u,h){return this.elt[u].allPositionsEqual(h)}},{key:"toLine",value:function(u){this.elt[u].isArea()&&(this.elt[u]=new Si(this.elt[u].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var u=arguments[0];this.elt[0]=new Si(u),this.elt[1]=new Si(u)}else if(arguments[0]instanceof m){var h=arguments[0];this.elt[0]=new Si(h.elt[0]),this.elt[1]=new Si(h.elt[1])}}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.elt[0]=new Si(re.NONE),this.elt[1]=new Si(re.NONE),this.elt[g].setLocation(w)}else if(arguments.length===3){var D=arguments[0],O=arguments[1],H=arguments[2];this.elt[0]=new Si(D,O,H),this.elt[1]=new Si(D,O,H)}else if(arguments.length===4){var ie=arguments[0],de=arguments[1],Te=arguments[2],Pe=arguments[3];this.elt[0]=new Si(re.NONE,re.NONE,re.NONE),this.elt[1]=new Si(re.NONE,re.NONE,re.NONE),this.elt[ie].setLocations(de,Te,Pe)}}},{key:"toLineLabel",value:function(u){for(var h=new m(re.NONE),g=0;g<2;g++)h.setLocation(g,u.getLocation(g));return h}}])})(),Bl=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var m=new Array(this._pts.size()).fill(null),u=0;u<this._pts.size();u++)m[u]=this._pts.get(u);this._ring=this._geometryFactory.createLinearRing(m),this._isHole=Qe.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(m){this._startDe=m;var u=m,h=!0;do{if(u===null)throw new ft("Found null DirectedEdge");if(u.getEdgeRing()===this)throw new ft("Directed Edge visited twice during ring-building at "+u.getCoordinate());this._edges.add(u);var g=u.getLabel();F.isTrue(g.isArea()),this.mergeLabel(g),this.addPoints(u.getEdge(),u.isForward(),h),h=!1,this.setEdgeRing(u,this),u=this.getNext(u)}while(u!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(m){return this._pts.get(m)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var m=this._startDe;do{var u=m.getNode().getEdges().getOutgoingDegree(this);u>this._maxNodeDegree&&(this._maxNodeDegree=u),m=this.getNext(m)}while(m!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(m,u,h){var g=m.getCoordinates();if(u){var w=1;h&&(w=0);for(var D=w;D<g.length;D++)this._pts.add(g[D])}else{var O=g.length-2;h&&(O=g.length-1);for(var H=O;H>=0;H--)this._pts.add(g[H])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var m=this._startDe;do m.getEdge().setInResult(!0),m=m.getNext();while(m!==this._startDe)}},{key:"containsPoint",value:function(m){var u=this.getLinearRing();if(!u.getEnvelopeInternal().contains(m)||!Pf.isInRing(m,u.getCoordinates()))return!1;for(var h=this._holes.iterator();h.hasNext();)if(h.next().containsPoint(m))return!1;return!0}},{key:"addHole",value:function(m){this._holes.add(m)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var m=arguments[0];this.mergeLabel(m,0),this.mergeLabel(m,1)}else if(arguments.length===2){var u=arguments[1],h=arguments[0].getLocation(u,he.RIGHT);if(h===re.NONE)return null;if(this._label.getLocation(u)===re.NONE)return this._label.setLocation(u,h),null}}},{key:"setShell",value:function(m){this._shell=m,m!==null&&m.addHole(this)}},{key:"toPolygon",value:function(m){for(var u=new Array(this._holes.size()).fill(null),h=0;h<this._holes.size();h++)u[h]=this._holes.get(h).getLinearRing();return m.createPolygon(this.getLinearRing(),u)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new mt,this._pts=new mt,this._label=new Os(re.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new mt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var m=arguments[0],u=arguments[1];this._geometryFactory=u,this.computePoints(m),this.computeRing()}}}}])})(),pp=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"setEdgeRing",value:function(h,g){h.setMinEdgeRing(g)}},{key:"getNext",value:function(h){return h.getNextMin()}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Bl.constructor_.call(this,h,g)}}])})(Bl),A_=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"buildMinimalRings",value:function(){var h=new mt,g=this._startDe;do{if(g.getMinEdgeRing()===null){var w=new pp(g,this._geometryFactory);h.add(w)}g=g.getNext()}while(g!==this._startDe);return h}},{key:"setEdgeRing",value:function(h,g){h.setEdgeRing(g)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var h=this._startDe;do h.getNode().getEdges().linkMinimalDirectedEdges(this),h=h.getNext();while(h!==this._startDe)}},{key:"getNext",value:function(h){return h.getNext()}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Bl.constructor_.call(this,h,g)}}])})(Bl),ln=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(m){this._isVisited=m}},{key:"setInResult",value:function(m){this._isInResult=m}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(m){this._label=m}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(m){this._isCovered=m,this._isCoveredSet=!0}},{key:"updateIM",value:function(m){F.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(m)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this._label=m}}}}])})(),Lf=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"isIncidentEdgeInResult",value:function(){for(var h=this.getEdges().getEdges().iterator();h.hasNext();)if(h.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(h){h.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(h){}},{key:"computeMergedLocation",value:function(h,g){var w=re.NONE;if(w=this._label.getLocation(g),!h.isNull(g)){var D=h.getLocation(g);w!==re.BOUNDARY&&(w=D)}return w}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return y(u,"setLabel",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1];this._label===null?this._label=new Os(h,g):this._label.setLocation(h,g)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof u){var h=arguments[0];this.mergeLabel(h._label)}else if(arguments[0]instanceof Os)for(var g=arguments[0],w=0;w<2;w++){var D=this.computeMergedLocation(g,w);this._label.getLocation(w)===re.NONE&&this._label.setLocation(w,D)}}},{key:"add",value:function(h){this._edges.insert(h),h.setNode(this)}},{key:"setLabelBoundary",value:function(h){if(this._label===null)return null;var g=re.NONE;this._label!==null&&(g=this._label.getLocation(h));var w=null;switch(g){case re.BOUNDARY:w=re.INTERIOR;break;case re.INTERIOR:default:w=re.BOUNDARY}this._label.setLocation(h,w)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var h=arguments[0],g=arguments[1];this._coord=h,this._edges=g,this._label=new Os(0,re.NONE)}}])})(ln),R_=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u)})(up);function um(m){return m==null?0:m.color}function Bn(m){return m==null?null:m.parent}function wo(m,u){m!==null&&(m.color=u)}function gp(m){return m==null?null:m.left}function cm(m){return m==null?null:m.right}var jl=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).root_=null,h.size_=0,h}return c(u,m),o(u,[{key:"get",value:function(h){for(var g=this.root_;g!==null;){var w=h.compareTo(g.key);if(w<0)g=g.left;else{if(!(w>0))return g.value;g=g.right}}return null}},{key:"put",value:function(h,g){if(this.root_===null)return this.root_={key:h,value:g,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var w,D,O=this.root_;do if(w=O,(D=h.compareTo(O.key))<0)O=O.left;else{if(!(D>0)){var H=O.value;return O.value=g,H}O=O.right}while(O!==null);var ie={key:h,left:null,right:null,value:g,parent:w,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return D<0?w.left=ie:w.right=ie,this.fixAfterInsertion(ie),this.size_++,null}},{key:"fixAfterInsertion",value:function(h){var g;for(h.color=1;h!=null&&h!==this.root_&&h.parent.color===1;)Bn(h)===gp(Bn(Bn(h)))?um(g=cm(Bn(Bn(h))))===1?(wo(Bn(h),0),wo(g,0),wo(Bn(Bn(h)),1),h=Bn(Bn(h))):(h===cm(Bn(h))&&(h=Bn(h),this.rotateLeft(h)),wo(Bn(h),0),wo(Bn(Bn(h)),1),this.rotateRight(Bn(Bn(h)))):um(g=gp(Bn(Bn(h))))===1?(wo(Bn(h),0),wo(g,0),wo(Bn(Bn(h)),1),h=Bn(Bn(h))):(h===gp(Bn(h))&&(h=Bn(h),this.rotateRight(h)),wo(Bn(h),0),wo(Bn(Bn(h)),1),this.rotateLeft(Bn(Bn(h))));this.root_.color=0}},{key:"values",value:function(){var h=new mt,g=this.getFirstEntry();if(g!==null)for(h.add(g.value);(g=u.successor(g))!==null;)h.add(g.value);return h}},{key:"entrySet",value:function(){var h=new U,g=this.getFirstEntry();if(g!==null)for(h.add(g);(g=u.successor(g))!==null;)h.add(g);return h}},{key:"rotateLeft",value:function(h){if(h!=null){var g=h.right;h.right=g.left,g.left!=null&&(g.left.parent=h),g.parent=h.parent,h.parent==null?this.root_=g:h.parent.left===h?h.parent.left=g:h.parent.right=g,g.left=h,h.parent=g}}},{key:"rotateRight",value:function(h){if(h!=null){var g=h.left;h.left=g.right,g.right!=null&&(g.right.parent=h),g.parent=h.parent,h.parent==null?this.root_=g:h.parent.right===h?h.parent.right=g:h.parent.left=g,g.right=h,h.parent=g}}},{key:"getFirstEntry",value:function(){var h=this.root_;if(h!=null)for(;h.left!=null;)h=h.left;return h}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(h){for(var g=this.root_;g!==null;){var w=h.compareTo(g.key);if(w<0)g=g.left;else{if(!(w>0))return!0;g=g.right}}return!1}}],[{key:"successor",value:function(h){var g;if(h===null)return null;if(h.right!==null){for(g=h.right;g.left!==null;)g=g.left;return g}g=h.parent;for(var w=h;g!==null&&w===g.right;)w=g,g=g.parent;return g}}])})(R_),kf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"find",value:function(m){return this.nodeMap.get(m)}},{key:"addNode",value:function(){if(arguments[0]instanceof J){var m=arguments[0],u=this.nodeMap.get(m);return u===null&&(u=this.nodeFact.createNode(m),this.nodeMap.put(m,u)),u}if(arguments[0]instanceof Lf){var h=arguments[0],g=this.nodeMap.get(h.getCoordinate());return g===null?(this.nodeMap.put(h.getCoordinate(),h),h):(g.mergeLabel(h),g)}}},{key:"print",value:function(m){for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(m){for(var u=new mt,h=this.iterator();h.hasNext();){var g=h.next();g.getLabel().getLocation(m)===re.BOUNDARY&&u.add(g)}return u}},{key:"add",value:function(m){var u=m.getCoordinate();this.addNode(u).add(m)}}],[{key:"constructor_",value:function(){this.nodeMap=new jl,this.nodeFact=null;var m=arguments[0];this.nodeFact=m}}])})(),Pi=(function(){function m(){t(this,m)}return o(m,null,[{key:"isNorthern",value:function(u){return u===m.NE||u===m.NW}},{key:"isOpposite",value:function(u,h){return u!==h&&(u-h+4)%4===2}},{key:"commonHalfPlane",value:function(u,h){if(u===h)return u;if((u-h+4)%4===2)return-1;var g=u<h?u:h;return g===0&&(u>h?u:h)===3?3:g}},{key:"isInHalfPlane",value:function(u,h){return h===m.SE?u===m.SE||u===m.SW:u===h||u===h+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new A("Cannot compute the quadrant for point ( "+u+", "+h+" )");return u>=0?h>=0?m.NE:m.SE:h>=0?m.NW:m.SW}if(arguments[0]instanceof J&&arguments[1]instanceof J){var g=arguments[0],w=arguments[1];if(w.x===g.x&&w.y===g.y)throw new A("Cannot compute the quadrant for two identical points "+g);return w.x>=g.x?w.y>=g.y?m.NE:m.SE:w.y>=g.y?m.NW:m.SW}}}])})();Pi.NE=0,Pi.NW=1,Pi.SW=2,Pi.SE=3;var hm=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compareDirection",value:function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Qe.index(u._p0,u._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(u){this._node=u}},{key:"print",value:function(u){var h=Math.atan2(this._dy,this._dx),g=this.getClass().getName(),w=g.lastIndexOf("."),D=g.substring(w+1);u.print("  "+D+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)}},{key:"compareTo",value:function(u){var h=u;return this.compareDirection(h)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var u=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),g=h.lastIndexOf(".");return"  "+h.substring(g+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label}},{key:"computeLabel",value:function(u){}},{key:"init",value:function(u,h){this._p0=u,this._p1=h,this._dx=h.x-u.x,this._dy=h.y-u.y,this._quadrant=Pi.quadrant(this._dx,this._dy),F.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var h=arguments[0],g=arguments[1],w=arguments[2];m.constructor_.call(this,h,g,w,null)}else if(arguments.length===4){var D=arguments[0],O=arguments[1],H=arguments[2],ie=arguments[3];m.constructor_.call(this,D),this.init(O,H),this._label=ie}}}])})(),ul=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(h){return this._depth[h]}},{key:"setVisited",value:function(h){this._isVisited=h}},{key:"computeDirectedLabel",value:function(){this._label=new Os(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(h,g){if(this._depth[h]!==-999&&this._depth[h]!==g)throw new ft("assigned depths do not match",this.getCoordinate());this._depth[h]=g}},{key:"isInteriorAreaEdge",value:function(){for(var h=!0,g=0;g<2;g++)this._label.isArea(g)&&this._label.getLocation(g,he.LEFT)===re.INTERIOR&&this._label.getLocation(g,he.RIGHT)===re.INTERIOR||(h=!1);return h}},{key:"setNextMin",value:function(h){this._nextMin=h}},{key:"print",value:function(h){y(u,"print",this,1).call(this,h),h.print(" "+this._depth[he.LEFT]+"/"+this._depth[he.RIGHT]),h.print(" ("+this.getDepthDelta()+")"),this._isInResult&&h.print(" inResult")}},{key:"setMinEdgeRing",value:function(h){this._minEdgeRing=h}},{key:"isLineEdge",value:function(){var h=this._label.isLine(0)||this._label.isLine(1),g=!this._label.isArea(0)||this._label.allPositionsEqual(0,re.EXTERIOR),w=!this._label.isArea(1)||this._label.allPositionsEqual(1,re.EXTERIOR);return h&&g&&w}},{key:"setEdgeRing",value:function(h){this._edgeRing=h}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var h=this._edge.getDepthDelta();return this._isForward||(h=-h),h}},{key:"setInResult",value:function(h){this._isInResult=h}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(h){this.print(h),h.print(" "),this._isForward?this._edge.print(h):this._edge.printReverse(h)}},{key:"setSym",value:function(h){this._sym=h}},{key:"setVisitedEdge",value:function(h){this.setVisited(h),this._sym.setVisited(h)}},{key:"setEdgeDepths",value:function(h,g){var w=this.getEdge().getDepthDelta();this._isForward||(w=-w);var D=1;h===he.LEFT&&(D=-1);var O=he.opposite(h),H=g+w*D;this.setDepth(h,g),this.setDepth(O,H)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(h){this._next=h}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var h=arguments[0],g=arguments[1];if(hm.constructor_.call(this,h),this._isForward=g,g)this.init(h.getCoordinate(0),h.getCoordinate(1));else{var w=h.getNumPoints()-1;this.init(h.getCoordinate(w),h.getCoordinate(w-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(h,g){return h===re.EXTERIOR&&g===re.INTERIOR?1:h===re.INTERIOR&&g===re.EXTERIOR?-1:0}}])})(hm),fm=(function(){return o(function m(){t(this,m)},[{key:"createNode",value:function(m){return new Lf(m,null)}}])})(),Of=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(m){m.println("Edges:");for(var u=0;u<this._edges.size();u++){m.println("edge "+u+":");var h=this._edges.get(u);h.print(m),h.eiList.print(m)}}},{key:"find",value:function(m){return this._nodes.find(m)}},{key:"addNode",value:function(){if(arguments[0]instanceof Lf){var m=arguments[0];return this._nodes.addNode(m)}if(arguments[0]instanceof J){var u=arguments[0];return this._nodes.addNode(u)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var m=this._nodes.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(m){Dt.out.println(m)}},{key:"isBoundaryNode",value:function(m,u){var h=this._nodes.find(u);if(h===null)return!1;var g=h.getLabel();return g!==null&&g.getLocation(m)===re.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var m=this._nodes.iterator();m.hasNext();)m.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(m,u,h,g){return!!m.equals(h)&&Qe.index(m,u,g)===Qe.COLLINEAR&&Pi.quadrant(m,u)===Pi.quadrant(h,g)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(m){Dt.out.print(m)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(m,u){for(var h=0;h<this._edges.size();h++){var g=this._edges.get(h),w=g.getCoordinates();if(this.matchInSameDirection(m,u,w[0],w[1])||this.matchInSameDirection(m,u,w[w.length-1],w[w.length-2]))return g}return null}},{key:"insertEdge",value:function(m){this._edges.add(m)}},{key:"findEdgeEnd",value:function(m){for(var u=this.getEdgeEnds().iterator();u.hasNext();){var h=u.next();if(h.getEdge()===m)return h}return null}},{key:"addEdges",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next();this._edges.add(h);var g=new ul(h,!0),w=new ul(h,!1);g.setSym(w),w.setSym(g),this.add(g),this.add(w)}}},{key:"add",value:function(m){this._nodes.add(m),this._edgeEndList.add(m)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(m,u){for(var h=0;h<this._edges.size();h++){var g=this._edges.get(h),w=g.getCoordinates();if(m.equals(w[0])&&u.equals(w[1]))return g}return null}}],[{key:"constructor_",value:function(){if(this._edges=new mt,this._nodes=null,this._edgeEndList=new mt,arguments.length===0)this._nodes=new kf(new fm);else if(arguments.length===1){var m=arguments[0];this._nodes=new kf(m)}}},{key:"linkResultDirectedEdges",value:function(m){for(var u=m.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()}}])})(),mp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"sortShellsAndHoles",value:function(u,h,g){for(var w=u.iterator();w.hasNext();){var D=w.next();D.isHole()?g.add(D):h.add(D)}}},{key:"computePolygons",value:function(u){for(var h=new mt,g=u.iterator();g.hasNext();){var w=g.next().toPolygon(this._geometryFactory);h.add(w)}return h}},{key:"placeFreeHoles",value:function(u,h){for(var g=h.iterator();g.hasNext();){var w=g.next();if(w.getShell()===null){var D=m.findEdgeRingContaining(w,u);if(D===null)throw new ft("unable to assign hole to a shell",w.getCoordinate(0));w.setShell(D)}}}},{key:"buildMinimalEdgeRings",value:function(u,h,g){for(var w=new mt,D=u.iterator();D.hasNext();){var O=D.next();if(O.getMaxNodeDegree()>2){O.linkDirectedEdgesForMinimalEdgeRings();var H=O.buildMinimalRings(),ie=this.findShell(H);ie!==null?(this.placePolygonHoles(ie,H),h.add(ie)):g.addAll(H)}else w.add(O)}return w}},{key:"buildMaximalEdgeRings",value:function(u){for(var h=new mt,g=u.iterator();g.hasNext();){var w=g.next();if(w.isInResult()&&w.getLabel().isArea()&&w.getEdgeRing()===null){var D=new A_(w,this._geometryFactory);h.add(D),D.setInResult()}}return h}},{key:"placePolygonHoles",value:function(u,h){for(var g=h.iterator();g.hasNext();){var w=g.next();w.isHole()&&w.setShell(u)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(u){for(var h=0,g=null,w=u.iterator();w.hasNext();){var D=w.next();D.isHole()||(g=D,h++)}return F.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),g}},{key:"add",value:function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var h=arguments[0],g=arguments[1];Of.linkResultDirectedEdges(g);var w=this.buildMaximalEdgeRings(h),D=new mt,O=this.buildMinimalEdgeRings(w,this._shellList,D);this.sortShellsAndHoles(O,this._shellList,D),this.placeFreeHoles(this._shellList,D)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new mt;var u=arguments[0];this._geometryFactory=u}},{key:"findEdgeRingContaining",value:function(u,h){for(var g=u.getLinearRing(),w=g.getEnvelopeInternal(),D=g.getCoordinateN(0),O=null,H=null,ie=h.iterator();ie.hasNext();){var de=ie.next(),Te=de.getLinearRing(),Pe=Te.getEnvelopeInternal();if(!Pe.equals(w)&&Pe.contains(w)){D=si.ptNotInList(g.getCoordinates(),Te.getCoordinates());var nt=!1;Pf.isInRing(D,Te.getCoordinates())&&(nt=!0),nt&&(O===null||H.contains(Pe))&&(H=(O=de).getLinearRing().getEnvelopeInternal())}}return O}}])})(),yp=(function(){return o(function m(){t(this,m)},[{key:"getBounds",value:function(){}}])})(),ko=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[yp,X]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var m=arguments[0],u=arguments[1];this._bounds=m,this._item=u}}])})(),gc=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var m=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),m}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(m){for(var u=null,h=this._items.get(m);2*m<=this._size&&((u=2*m)!==this._size&&this._items.get(u+1).compareTo(this._items.get(u))<0&&u++,this._items.get(u).compareTo(h)<0);m=u)this._items.set(m,this._items.get(u));this._items.set(m,h)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(m){this._items.add(null),this._size+=1;var u=this._size;for(this._items.set(0,m);m.compareTo(this._items.get(Math.trunc(u/2)))<0;u/=2)this._items.set(u,this._items.get(Math.trunc(u/2)));this._items.set(u,m)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new mt,this._items.add(null)}}])})(),Ff=(function(){return o(function m(){t(this,m)},[{key:"insert",value:function(m,u){}},{key:"remove",value:function(m,u){}},{key:"query",value:function(){}}])})(),es=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(m){F.isTrue(this._bounds===null),this._childBoundables.add(m)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[yp,X]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new mt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this._level=m}}}}])})(),Na={reverseOrder:function(){return{compare:function(m,u){return u.compareTo(m)}}},min:function(m){return Na.sort(m),m.get(0)},sort:function(m,u){var h=m.toArray();u?In.sort(h,u):In.sort(h);for(var g=m.iterator(),w=0,D=h.length;w<D;w++)g.next(),g.set(h[w])},singletonList:function(m){var u=new mt;return u.add(m),u}},_p=(function(){function m(){t(this,m)}return o(m,null,[{key:"maxDistance",value:function(u,h,g,w,D,O,H,ie){var de=m.distance(u,h,D,O);return de=Math.max(de,m.distance(u,h,H,ie)),de=Math.max(de,m.distance(g,w,D,O)),de=Math.max(de,m.distance(g,w,H,ie))}},{key:"distance",value:function(u,h,g,w){var D=g-u,O=w-h;return Math.sqrt(D*D+O*O)}},{key:"maximumDistance",value:function(u,h){var g=Math.min(u.getMinX(),h.getMinX()),w=Math.min(u.getMinY(),h.getMinY()),D=Math.max(u.getMaxX(),h.getMaxX()),O=Math.max(u.getMaxY(),h.getMaxY());return m.distance(g,w,D,O)}},{key:"minMaxDistance",value:function(u,h){var g=u.getMinX(),w=u.getMinY(),D=u.getMaxX(),O=u.getMaxY(),H=h.getMinX(),ie=h.getMinY(),de=h.getMaxX(),Te=h.getMaxY(),Pe=m.maxDistance(g,w,g,O,H,ie,H,Te);return Pe=Math.min(Pe,m.maxDistance(g,w,g,O,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,w,g,O,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,w,g,O,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,w,D,w,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,w,D,w,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,w,D,w,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,w,D,w,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,O,g,O,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,O,g,O,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,O,g,O,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,O,g,O,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,O,D,w,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,O,D,w,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,O,D,w,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,O,D,w,de,Te,de,ie))}}])})(),Au=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"maximumDistance",value:function(){return _p.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(u,h){var g=m.isComposite(this._boundable1),w=m.isComposite(this._boundable2);if(g&&w)return m.area(this._boundable1)>m.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,u,h),null):(this.expand(this._boundable2,this._boundable1,!0,u,h),null);if(g)return this.expand(this._boundable1,this._boundable2,!1,u,h),null;if(w)return this.expand(this._boundable2,this._boundable1,!0,u,h),null;throw new A("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(m.isComposite(this._boundable1)||m.isComposite(this._boundable2))}},{key:"compareTo",value:function(u){var h=u;return this._distance<h._distance?-1:this._distance>h._distance?1:0}},{key:"expand",value:function(u,h,g,w,D){for(var O=u.getChildBoundables().iterator();O.hasNext();){var H=O.next(),ie=null;(ie=g?new m(h,H,this._itemDistance):new m(H,h,this._itemDistance)).getDistance()<D&&w.add(ie)}}},{key:"getBoundable",value:function(u){return u===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],h=arguments[1],g=arguments[2];this._boundable1=u,this._boundable2=h,this._itemDistance=g,this._distance=this.distance()}},{key:"area",value:function(u){return u.getBounds().getArea()}},{key:"isComposite",value:function(u){return u instanceof es}}])})(),vp=(function(){return o(function m(){t(this,m)},[{key:"visitItem",value:function(m){}}])})(),Fs=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"queryInternal",value:function(){if(Le(arguments[2],vp)&&arguments[0]instanceof Object&&arguments[1]instanceof es)for(var u=arguments[0],h=arguments[2],g=arguments[1].getChildBoundables(),w=0;w<g.size();w++){var D=g.get(w);this.getIntersectsOp().intersects(D.getBounds(),u)&&(D instanceof es?this.queryInternal(u,D,h):D instanceof ko?h.visitItem(D.getItem()):F.shouldNeverReachHere())}else if(Le(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof es)for(var O=arguments[0],H=arguments[2],ie=arguments[1].getChildBoundables(),de=0;de<ie.size();de++){var Te=ie.get(de);this.getIntersectsOp().intersects(Te.getBounds(),O)&&(Te instanceof es?this.queryInternal(O,Te,H):Te instanceof ko?H.add(Te.getItem()):F.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(u){return u.get(u.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var g=h.next();g instanceof es?u+=this.size(g):g instanceof ko&&(u+=1)}return u}}},{key:"removeItem",value:function(u,h){for(var g=null,w=u.getChildBoundables().iterator();w.hasNext();){var D=w.next();D instanceof ko&&D.getItem()===h&&(g=D)}return g!==null&&(u.getChildBoundables().remove(g),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new mt:u}if(arguments.length===1){for(var h=arguments[0],g=new mt,w=h.getChildBoundables().iterator();w.hasNext();){var D=w.next();if(D instanceof es){var O=this.itemsTree(D);O!==null&&g.add(O)}else D instanceof ko?g.add(D.getItem()):F.shouldNeverReachHere()}return g.size()<=0?null:g}}},{key:"insert",value:function(u,h){F.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new ko(u,h))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var u=arguments[0],h=new mt;return this.boundablesAtLevel(u,this._root,h),h}if(arguments.length===3){var g=arguments[0],w=arguments[1],D=arguments[2];if(F.isTrue(g>-2),w.getLevel()===g)return D.add(w),null;for(var O=w.getChildBoundables().iterator();O.hasNext();){var H=O.next();H instanceof es?this.boundablesAtLevel(g,H,D):(F.isTrue(H instanceof ko),g===-1&&D.add(H))}return null}}},{key:"query",value:function(){if(arguments.length===1){var u=arguments[0];this.build();var h=new mt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.queryInternal(u,this._root,h),h}if(arguments.length===2){var g=arguments[0],w=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.queryInternal(g,this._root,w)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,h)}if(arguments.length===3){var g=arguments[0],w=arguments[1],D=arguments[2],O=this.removeItem(w,D);if(O)return!0;for(var H=null,ie=w.getChildBoundables().iterator();ie.hasNext();){var de=ie.next();if(this.getIntersectsOp().intersects(de.getBounds(),g)&&de instanceof es&&(O=this.remove(g,de,D))){H=de;break}}return H!==null&&H.getChildBoundables().isEmpty()&&w.getChildBoundables().remove(H),O}}},{key:"createHigherLevels",value:function(u,h){F.isTrue(!u.isEmpty());var g=this.createParentBoundables(u,h+1);return g.size()===1?g.get(0):this.createHigherLevels(g,h+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var g=h.next();if(g instanceof es){var w=this.depth(g);w>u&&(u=w)}}return u+1}}},{key:"createParentBoundables",value:function(u,h){F.isTrue(!u.isEmpty());var g=new mt;g.add(this.createNode(h));var w=new mt(u);Na.sort(w,this.getComparator());for(var D=w.iterator();D.hasNext();){var O=D.next();this.lastNode(g).getChildBoundables().size()===this.getNodeCapacity()&&g.add(this.createNode(h)),this.lastNode(g).addChildBoundable(O)}return g}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new mt,this._nodeCapacity=null,arguments.length===0)m.constructor_.call(this,m.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var u=arguments[0];F.isTrue(u>1,"Node capacity must be greater than 1"),this._nodeCapacity=u}}},{key:"compareDoubles",value:function(u,h){return u>h?1:u<h?-1:0}}])})();Fs.IntersectsOp=function(){},Fs.DEFAULT_NODE_CAPACITY=10;var Ru=(function(){return o(function m(){t(this,m)},[{key:"distance",value:function(m,u){}}])})(),fa=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"createParentBoundablesFromVerticalSlices",value:function(h,g){F.isTrue(h.length>0);for(var w=new mt,D=0;D<h.length;D++)w.addAll(this.createParentBoundablesFromVerticalSlice(h[D],g));return w}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var h=arguments[0],g=arguments[1];return this.nearestNeighbourK(h,q.POSITIVE_INFINITY,g)}if(arguments.length===3){var w=arguments[0],D=arguments[2],O=arguments[1],H=new gc;H.add(w);for(var ie=new gc;!H.isEmpty()&&O>=0;){var de=H.poll(),Te=de.getDistance();if(Te>=O)break;de.isLeaves()?ie.size()<D?ie.add(de):(ie.peek().getDistance()>Te&&(ie.poll(),ie.add(de)),O=ie.peek().getDistance()):de.expandToQueue(H,O)}return u.getItems(ie)}}},{key:"createNode",value:function(h){return new mc(h)}},{key:"size",value:function(){return arguments.length===0?y(u,"size",this,1).call(this):y(u,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Se))return y(u,"insert",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1];if(h.isNull())return null;y(u,"insert",this,1).call(this,h,g)}},{key:"getIntersectsOp",value:function(){return u.intersectsOp}},{key:"verticalSlices",value:function(h,g){for(var w=Math.trunc(Math.ceil(h.size()/g)),D=new Array(g).fill(null),O=h.iterator(),H=0;H<g;H++){D[H]=new mt;for(var ie=0;O.hasNext()&&ie<w;){var de=O.next();D[H].add(de),ie++}}return D}},{key:"query",value:function(){if(arguments.length===1){var h=arguments[0];return y(u,"query",this,1).call(this,h)}if(arguments.length===2){var g=arguments[0],w=arguments[1];y(u,"query",this,1).call(this,g,w)}}},{key:"getComparator",value:function(){return u.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(h,g){return y(u,"createParentBoundables",this,1).call(this,h,g)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Se){var h=arguments[0],g=arguments[1];return y(u,"remove",this,1).call(this,h,g)}return y(u,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?y(u,"depth",this,1).call(this):y(u,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(h,g){F.isTrue(!h.isEmpty());var w=Math.trunc(Math.ceil(h.size()/this.getNodeCapacity())),D=new mt(h);Na.sort(D,u.xComparator);var O=this.verticalSlices(D,Math.trunc(Math.ceil(Math.sqrt(w))));return this.createParentBoundablesFromVerticalSlices(O,g)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Le(arguments[0],Ru)){var h=arguments[0];if(this.isEmpty())return null;var g=new Au(this.getRoot(),this.getRoot(),h);return this.nearestNeighbour(g)}if(arguments[0]instanceof Au){var w=arguments[0],D=q.POSITIVE_INFINITY,O=null,H=new gc;for(H.add(w);!H.isEmpty()&&D>0;){var ie=H.poll(),de=ie.getDistance();if(de>=D)break;ie.isLeaves()?(D=de,O=ie):ie.expandToQueue(H,D)}return O===null?null:[O.getBoundable(0).getItem(),O.getBoundable(1).getItem()]}}else{if(arguments.length===2){var Te=arguments[0],Pe=arguments[1];if(this.isEmpty()||Te.isEmpty())return null;var nt=new Au(this.getRoot(),Te.getRoot(),Pe);return this.nearestNeighbour(nt)}if(arguments.length===3){var vt=arguments[2],Rt=new ko(arguments[0],arguments[1]),Wt=new Au(this.getRoot(),Rt,vt);return this.nearestNeighbour(Wt)[0]}if(arguments.length===4){var ir=arguments[2],Kn=arguments[3],Lr=new ko(arguments[0],arguments[1]),Eo=new Au(this.getRoot(),Lr,ir);return this.nearestNeighbourK(Eo,Kn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var h=arguments[0],g=arguments[1],w=q.POSITIVE_INFINITY,D=new gc;for(D.add(h);!D.isEmpty();){var O=D.poll(),H=O.getDistance();if(H>g)return!1;if(O.maximumDistance()<=g)return!0;if(O.isLeaves()){if((w=H)<=g)return!0}else O.expandToQueue(D,w)}return!1}if(arguments.length===3){var ie=arguments[0],de=arguments[1],Te=arguments[2],Pe=new Au(this.getRoot(),ie.getRoot(),de);return this.isWithinDistance(Pe,Te)}}},{key:"interfaces_",get:function(){return[Ff,X]}}],[{key:"constructor_",value:function(){if(arguments.length===0)u.constructor_.call(this,u.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var h=arguments[0];Fs.constructor_.call(this,h)}}},{key:"centreX",value:function(h){return u.avg(h.getMinX(),h.getMaxX())}},{key:"avg",value:function(h,g){return(h+g)/2}},{key:"getItems",value:function(h){for(var g=new Array(h.size()).fill(null),w=0;!h.isEmpty();){var D=h.poll();g[w]=D.getBoundable(0).getItem(),w++}return g}},{key:"centreY",value:function(h){return u.avg(h.getMinY(),h.getMaxY())}}])})(Fs),mc=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeBounds",value:function(){for(var h=null,g=this.getChildBoundables().iterator();g.hasNext();){var w=g.next();h===null?h=new Se(w.getBounds()):h.expandToInclude(w.getBounds())}return h}}],[{key:"constructor_",value:function(){var h=arguments[0];es.constructor_.call(this,h)}}])})(es);fa.STRtreeNode=mc,fa.xComparator=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[K]}},{key:"compare",value:function(m,u){return Fs.compareDoubles(fa.centreX(m.getBounds()),fa.centreX(u.getBounds()))}}])})()),fa.yComparator=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[K]}},{key:"compare",value:function(m,u){return Fs.compareDoubles(fa.centreY(m.getBounds()),fa.centreY(u.getBounds()))}}])})()),fa.intersectsOp=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(m,u){return m.intersects(u)}}])})()),fa.DEFAULT_NODE_CAPACITY=10;var dm=(function(){function m(){t(this,m)}return o(m,null,[{key:"relativeSign",value:function(u,h){return u<h?-1:u>h?1:0}},{key:"compare",value:function(u,h,g){if(h.equals2D(g))return 0;var w=m.relativeSign(h.x,g.x),D=m.relativeSign(h.y,g.y);switch(u){case 0:return m.compareValue(w,D);case 1:return m.compareValue(D,w);case 2:return m.compareValue(D,-w);case 3:return m.compareValue(-w,D);case 4:return m.compareValue(-w,-D);case 5:return m.compareValue(-D,-w);case 6:return m.compareValue(-D,w);case 7:return m.compareValue(w,-D)}return F.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(u,h){return u<0?-1:u>0?1:h<0?-1:h>0?1:0}}])})(),R=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(m){m.print(this.coord),m.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(m){var u=m;return this.segmentIndex<u.segmentIndex?-1:this.segmentIndex>u.segmentIndex?1:this.coord.equals2D(u.coord)?0:this._isInterior?u._isInterior?dm.compare(this._segmentOctant,this.coord,u.coord):1:-1}},{key:"isEndPoint",value:function(m){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===m}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this._segString=m,this.coord=new J(u),this.segmentIndex=h,this._segmentOctant=g,this._isInterior=!u.equals2D(m.getCoordinate(h))}}])})(),te=(function(){return o(function m(){t(this,m)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),ge=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var m=new Ls;this.addEndpoints();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next();this.addEdgeCoordinates(h,g,m),h=g}return m.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var m=new mt;this.findCollapsesFromInsertedNodes(m),this.findCollapsesFromExistingVertices(m);for(var u=m.iterator();u.hasNext();){var h=u.next().intValue();this.add(this._edge.getCoordinate(h),h)}}},{key:"createSplitEdgePts",value:function(m,u){var h=u.segmentIndex-m.segmentIndex+2;if(h===2)return[new J(m.coord),new J(u.coord)];var g=this._edge.getCoordinate(u.segmentIndex),w=u.isInterior()||!u.coord.equals2D(g);w||h--;var D=new Array(h).fill(null),O=0;D[O++]=new J(m.coord);for(var H=m.segmentIndex+1;H<=u.segmentIndex;H++)D[O++]=this._edge.getCoordinate(H);return w&&(D[O]=new J(u.coord)),D}},{key:"print",value:function(m){m.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"findCollapsesFromExistingVertices",value:function(m){for(var u=0;u<this._edge.size()-2;u++){var h=this._edge.getCoordinate(u);this._edge.getCoordinate(u+1);var g=this._edge.getCoordinate(u+2);h.equals2D(g)&&m.add(pt.valueOf(u+1))}}},{key:"addEdgeCoordinates",value:function(m,u,h){var g=this.createSplitEdgePts(m,u);h.add(g,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(m){this.addEndpoints(),this.addCollapsedNodes();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next(),w=this.createSplitEdge(h,g);m.add(w),h=g}}},{key:"findCollapseIndex",value:function(m,u,h){if(!m.coord.equals2D(u.coord))return!1;var g=u.segmentIndex-m.segmentIndex;return u.isInterior()||g--,g===1&&(h[0]=m.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(m){for(var u=new Array(1).fill(null),h=this.iterator(),g=h.next();h.hasNext();){var w=h.next();this.findCollapseIndex(g,w,u)&&m.add(pt.valueOf(u[0])),g=w}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var m=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(m),m)}},{key:"createSplitEdge",value:function(m,u){var h=this.createSplitEdgePts(m,u);return new tt(h,this._edge.getData())}},{key:"add",value:function(m,u){var h=new R(this._edge,m,u,this._edge.getSegmentOctant(u)),g=this._nodeMap.get(h);return g!==null?(F.isTrue(g.coord.equals2D(m),"Found equal nodes with different coordinates"),g):(this._nodeMap.put(h,h),h)}},{key:"checkSplitEdgesCorrectness",value:function(m){var u=this._edge.getCoordinates(),h=m.get(0).getCoordinate(0);if(!h.equals2D(u[0]))throw new oe("bad split edge start point at "+h);var g=m.get(m.size()-1).getCoordinates(),w=g[g.length-1];if(!w.equals2D(u[u.length-1]))throw new oe("bad split edge end point at "+w)}}],[{key:"constructor_",value:function(){this._nodeMap=new jl,this._edge=null;var m=arguments[0];this._edge=m}}])})(),Ee=(function(){function m(){t(this,m)}return o(m,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new A("Cannot compute the octant for point ( "+u+", "+h+" )");var g=Math.abs(u),w=Math.abs(h);return u>=0?h>=0?g>=w?0:1:g>=w?7:6:h>=0?g>=w?3:2:g>=w?4:5}if(arguments[0]instanceof J&&arguments[1]instanceof J){var D=arguments[0],O=arguments[1],H=O.x-D.x,ie=O.y-D.y;if(H===0&&ie===0)throw new A("Cannot compute the octant for two identical points "+D);return m.octant(H,ie)}}}])})(),Ne=(function(){return o(function m(){t(this,m)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(m){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(m){}},{key:"getData",value:function(){}}])})(),Ke=(function(){return o(function m(){t(this,m)},[{key:"addIntersection",value:function(m,u){}},{key:"interfaces_",get:function(){return[Ne]}}])})(),tt=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(u){return this._pts[u]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))}},{key:"setData",value:function(u){this._data=u}},{key:"safeOctant",value:function(u,h){return u.equals2D(h)?0:Ee.octant(u,h)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.addIntersectionNode(u,h)}else if(arguments.length===4){var g=arguments[1],w=arguments[3],D=new J(arguments[0].getIntersection(w));this.addIntersection(D,g)}}},{key:"toString",value:function(){return fp.toLineString(new ah(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(u,h){var g=h,w=g+1;if(w<this._pts.length){var D=this._pts[w];u.equals2D(D)&&(g=w)}return this._nodeList.add(u,g)}},{key:"addIntersections",value:function(u,h,g){for(var w=0;w<u.getIntersectionNum();w++)this.addIntersection(u,h,g,w)}},{key:"interfaces_",get:function(){return[Ke]}}],[{key:"constructor_",value:function(){this._nodeList=new ge(this),this._pts=null,this._data=null;var u=arguments[0],h=arguments[1];this._pts=u,this._data=h}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var u=arguments[0],h=new mt;return m.getNodedSubstrings(u,h),h}if(arguments.length===2)for(var g=arguments[1],w=arguments[0].iterator();w.hasNext();)w.next().getNodeList().addSplitEdges(g)}}])})(),St=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof m){var u=arguments[0],h=Qe.index(this.p0,this.p1,u.p0),g=Qe.index(this.p0,this.p1,u.p1);return h>=0&&g>=0||h<=0&&g<=0?Math.max(h,g):0}if(arguments[0]instanceof J){var w=arguments[0];return Qe.index(this.p0,this.p1,w)}}},{key:"toGeometry",value:function(u){return u.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)}},{key:"intersection",value:function(u){var h=new Du;return h.computeIntersection(this.p0,this.p1,u.p0,u.p1),h.hasIntersection()?h.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof J){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new J(u);var h=this.projectionFactor(u),g=new J;return g.x=this.p0.x+h*(this.p1.x-this.p0.x),g.y=this.p0.y+h*(this.p1.y-this.p0.y),g}if(arguments[0]instanceof m){var w=arguments[0],D=this.projectionFactor(w.p0),O=this.projectionFactor(w.p1);if(D>=1&&O>=1||D<=0&&O<=0)return null;var H=this.project(w.p0);D<0&&(H=this.p0),D>1&&(H=this.p1);var ie=this.project(w.p1);return O<0&&(ie=this.p0),O>1&&(ie=this.p1),new m(H,ie)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(u){return u===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(u){return At.pointToLinePerpendicular(u,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return m.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,w=h*h+g*g;return w<=0?q.NaN:((u.x-this.p0.x)*h+(u.y-this.p0.y)*g)/w}},{key:"closestPoints",value:function(u){var h=this.intersection(u);if(h!==null)return[h,h];var g=new Array(2).fill(null),w=q.MAX_VALUE,D=null,O=this.closestPoint(u.p0);w=O.distance(u.p0),g[0]=O,g[1]=u.p0;var H=this.closestPoint(u.p1);(D=H.distance(u.p1))<w&&(w=D,g[0]=H,g[1]=u.p1);var ie=u.closestPoint(this.p0);(D=ie.distance(this.p0))<w&&(w=D,g[0]=this.p0,g[1]=ie);var de=u.closestPoint(this.p1);return(D=de.distance(this.p1))<w&&(w=D,g[0]=this.p1,g[1]=de),g}},{key:"closestPoint",value:function(u){var h=this.projectionFactor(u);return h>0&&h<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(u){var h=u,g=this.p0.compareTo(h.p0);return g!==0?g:this.p1.compareTo(h.p1)}},{key:"reverse",value:function(){var u=this.p0;this.p0=this.p1,this.p1=u}},{key:"equalsTopo",value:function(u){return this.p0.equals(u.p0)&&this.p1.equals(u.p1)||this.p0.equals(u.p1)&&this.p1.equals(u.p0)}},{key:"lineIntersection",value:function(u){return dr.intersection(this.p0,this.p1,u.p0,u.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(u,h){var g=this.p0.x+u*(this.p1.x-this.p0.x),w=this.p0.y+u*(this.p1.y-this.p0.y),D=this.p1.x-this.p0.x,O=this.p1.y-this.p0.y,H=Math.sqrt(D*D+O*O),ie=0,de=0;if(h!==0){if(H<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");ie=h*D/H,de=h*O/H}return new J(g-de,w+ie)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=g.x,this.p1.y=g.y}}},{key:"segmentFraction",value:function(u){var h=this.projectionFactor(u);return h<0?h=0:(h>1||q.isNaN(h))&&(h=1),h}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(u){var h=this.p1.getY()-this.p0.getY(),g=this.p0.getX()-this.p1.getX(),w=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),D=h*h+g*g,O=h*h-g*g,H=u.getX(),ie=u.getY();return new J((-O*H-2*h*g*ie-2*h*w)/D,(O*ie-2*h*g*H-2*g*w)/D)}},{key:"distance",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return At.segmentToSegment(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof J){var h=arguments[0];return At.pointToSegment(h,this.p0,this.p1)}}},{key:"pointAlong",value:function(u){var h=new J;return h.x=this.p0.x+u*(this.p1.x-this.p0.x),h.y=this.p0.y+u*(this.p1.y-this.p0.y),h}},{key:"hashCode",value:function(){var u=q.doubleToLongBits(this.p0.x);u^=31*q.doubleToLongBits(this.p0.y);var h=Math.trunc(u)^Math.trunc(u>>32),g=q.doubleToLongBits(this.p1.x);return g^=31*q.doubleToLongBits(this.p1.y),h^(Math.trunc(g)^Math.trunc(g>>32))}},{key:"interfaces_",get:function(){return[k,X]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)m.constructor_.call(this,new J,new J);else if(arguments.length===1){var u=arguments[0];m.constructor_.call(this,u.p0,u.p1)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.p0=h,this.p1=g}else if(arguments.length===4){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3];m.constructor_.call(this,new J(w,D),new J(O,H))}}},{key:"midPoint",value:function(u,h){return new J((u.x+h.x)/2,(u.y+h.y)/2)}}])})(),Ft=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var m=arguments[1],u=arguments[2],h=arguments[3];arguments[0].getLineSegment(m,this._overlapSeg1),u.getLineSegment(h,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new St,this._overlapSeg2=new St}}])})(),rn=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(m,u){u.p0=this._pts[m],u.p1=this._pts[m+1]}},{key:"computeSelect",value:function(m,u,h,g){var w=this._pts[u],D=this._pts[h];if(h-u==1)return g.select(this,u),null;if(!m.intersects(w,D))return null;var O=Math.trunc((u+h)/2);u<O&&this.computeSelect(m,u,O,g),O<h&&this.computeSelect(m,O,h,g)}},{key:"getCoordinates",value:function(){for(var m=new Array(this._end-this._start+1).fill(null),u=0,h=this._start;h<=this._end;h++)m[u++]=this._pts[h];return m}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var m=arguments[0],u=arguments[1];this.computeOverlaps(this._start,this._end,m,m._start,m._end,u)}else if(arguments.length===6){var h=arguments[0],g=arguments[1],w=arguments[2],D=arguments[3],O=arguments[4],H=arguments[5];if(g-h==1&&O-D==1)return H.overlap(this,h,w,D),null;if(!this.overlaps(h,g,w,D,O))return null;var ie=Math.trunc((h+g)/2),de=Math.trunc((D+O)/2);h<ie&&(D<de&&this.computeOverlaps(h,ie,w,D,de,H),de<O&&this.computeOverlaps(h,ie,w,de,O,H)),ie<g&&(D<de&&this.computeOverlaps(ie,g,w,D,de,H),de<O&&this.computeOverlaps(ie,g,w,de,O,H))}}},{key:"setId",value:function(m){this._id=m}},{key:"select",value:function(m,u){this.computeSelect(m,this._start,this._end,u)}},{key:"getEnvelope",value:function(){if(this._env===null){var m=this._pts[this._start],u=this._pts[this._end];this._env=new Se(m,u)}return this._env}},{key:"overlaps",value:function(m,u,h,g,w){return Se.intersects(this._pts[m],this._pts[u],h._pts[g],h._pts[w])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this._pts=m,this._start=u,this._end=h,this._context=g}}])})(),Sn=(function(){function m(){t(this,m)}return o(m,null,[{key:"findChainEnd",value:function(u,h){for(var g=h;g<u.length-1&&u[g].equals2D(u[g+1]);)g++;if(g>=u.length-1)return u.length-1;for(var w=Pi.quadrant(u[g],u[g+1]),D=h+1;D<u.length&&!(!u[D-1].equals2D(u[D])&&Pi.quadrant(u[D-1],u[D])!==w);)D++;return D-1}},{key:"getChains",value:function(){if(arguments.length===1){var u=arguments[0];return m.getChains(u,null)}if(arguments.length===2){var h=arguments[0],g=arguments[1],w=new mt,D=0;do{var O=m.findChainEnd(h,D),H=new rn(h,D,O,g);w.add(H),D=O}while(D<h.length-1);return w}}}])})(),rr=(function(){return o(function m(){t(this,m)},[{key:"computeNodes",value:function(m){}},{key:"getNodedSubstrings",value:function(){}}])})(),di=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(m){this._segInt=m}},{key:"interfaces_",get:function(){return[rr]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setSegmentIntersector(m)}}}}])})(),Ci=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return tt.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(h){for(var g=Sn.getChains(h.getCoordinates(),h).iterator();g.hasNext();){var w=g.next();w.setId(this._idCounter++),this._index.insert(w.getEnvelope(),w),this._monoChains.add(w)}}},{key:"computeNodes",value:function(h){this._nodedSegStrings=h;for(var g=h.iterator();g.hasNext();)this.add(g.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var h=new zr(this._segInt),g=this._monoChains.iterator();g.hasNext();)for(var w=g.next(),D=this._index.query(w.getEnvelope()).iterator();D.hasNext();){var O=D.next();if(O.getId()>w.getId()&&(w.computeOverlaps(O,h),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new mt,this._index=new fa,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var h=arguments[0];di.constructor_.call(this,h)}}}}])})(di),zr=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"overlap",value:function(){if(arguments.length!==4)return y(u,"overlap",this,1).apply(this,arguments);var h=arguments[1],g=arguments[2],w=arguments[3],D=arguments[0].getContext(),O=g.getContext();this._si.processIntersections(D,h,O,w)}}],[{key:"constructor_",value:function(){this._si=null;var h=arguments[0];this._si=h}}])})(Ft);Ci.SegmentOverlapAction=zr;var Ir=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isDeletable",value:function(u,h,g,w){var D=this._inputLine[u],O=this._inputLine[h],H=this._inputLine[g];return!!this.isConcave(D,O,H)&&!!this.isShallow(D,O,H,w)&&this.isShallowSampled(D,O,u,g,w)}},{key:"deleteShallowConcavities",value:function(){for(var u=1,h=this.findNextNonDeletedIndex(u),g=this.findNextNonDeletedIndex(h),w=!1;g<this._inputLine.length;){var D=!1;this.isDeletable(u,h,g,this._distanceTol)&&(this._isDeleted[h]=m.DELETE,D=!0,w=!0),u=D?g:h,h=this.findNextNonDeletedIndex(u),g=this.findNextNonDeletedIndex(h)}return w}},{key:"isShallowConcavity",value:function(u,h,g,w){return Qe.index(u,h,g)===this._angleOrientation&&At.pointToSegment(h,u,g)<w}},{key:"isShallowSampled",value:function(u,h,g,w,D){var O=Math.trunc((w-g)/m.NUM_PTS_TO_CHECK);O<=0&&(O=1);for(var H=g;H<w;H+=O)if(!this.isShallow(u,h,this._inputLine[H],D))return!1;return!0}},{key:"isConcave",value:function(u,h,g){var w=Qe.index(u,h,g)===this._angleOrientation;return w}},{key:"simplify",value:function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Qe.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(u){for(var h=u+1;h<this._inputLine.length&&this._isDeleted[h]===m.DELETE;)h++;return h}},{key:"isShallow",value:function(u,h,g,w){return At.pointToSegment(h,u,g)<w}},{key:"collapseLine",value:function(){for(var u=new Ls,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==m.DELETE&&u.add(this._inputLine[h]);return u.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Qe.COUNTERCLOCKWISE;var u=arguments[0];this._inputLine=u}},{key:"simplify",value:function(u,h){return new m(u).simplify(h)}}])})();Ir.INIT=0,Ir.DELETE=1,Ir.KEEP=1,Ir.NUM_PTS_TO_CHECK=10;var Li=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getCoordinates",value:function(){return this._ptList.toArray(m.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"addPt",value:function(u){var h=new J(u);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(u,h){if(h)for(var g=0;g<u.length;g++)this.addPt(u[g]);else for(var w=u.length-1;w>=0;w--)this.addPt(u[w])}},{key:"isRedundant",value:function(u){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return u.distance(h)<this._minimimVertexDistance}},{key:"toString",value:function(){return new Iu().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var u=new J(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(u.equals(h))return null;this._ptList.add(u)}},{key:"setMinimumVertexDistance",value:function(u){this._minimimVertexDistance=u}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new mt}}])})();Li.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Tr=(function(){function m(){t(this,m)}return o(m,null,[{key:"toDegrees",value:function(u){return 180*u/Math.PI}},{key:"normalize",value:function(u){for(;u>Math.PI;)u-=m.PI_TIMES_2;for(;u<=-Math.PI;)u+=m.PI_TIMES_2;return u}},{key:"angle",value:function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var h=arguments[0],g=arguments[1],w=g.x-h.x,D=g.y-h.y;return Math.atan2(D,w)}}},{key:"isAcute",value:function(u,h,g){var w=u.x-h.x,D=u.y-h.y;return w*(g.x-h.x)+D*(g.y-h.y)>0}},{key:"isObtuse",value:function(u,h,g){var w=u.x-h.x,D=u.y-h.y;return w*(g.x-h.x)+D*(g.y-h.y)<0}},{key:"interiorAngle",value:function(u,h,g){var w=m.angle(h,u),D=m.angle(h,g);return Math.abs(D-w)}},{key:"normalizePositive",value:function(u){if(u<0){for(;u<0;)u+=m.PI_TIMES_2;u>=m.PI_TIMES_2&&(u=0)}else{for(;u>=m.PI_TIMES_2;)u-=m.PI_TIMES_2;u<0&&(u=0)}return u}},{key:"angleBetween",value:function(u,h,g){var w=m.angle(h,u),D=m.angle(h,g);return m.diff(w,D)}},{key:"diff",value:function(u,h){var g=null;return(g=u<h?h-u:u-h)>Math.PI&&(g=2*Math.PI-g),g}},{key:"toRadians",value:function(u){return u*Math.PI/180}},{key:"getTurn",value:function(u,h){var g=Math.sin(h-u);return g>0?m.COUNTERCLOCKWISE:g<0?m.CLOCKWISE:m.NONE}},{key:"angleBetweenOriented",value:function(u,h,g){var w=m.angle(h,u),D=m.angle(h,g)-w;return D<=-Math.PI?D+m.PI_TIMES_2:D>Math.PI?D-m.PI_TIMES_2:D}}])})();Tr.PI_TIMES_2=2*Math.PI,Tr.PI_OVER_2=Math.PI/2,Tr.PI_OVER_4=Math.PI/4,Tr.COUNTERCLOCKWISE=Qe.COUNTERCLOCKWISE,Tr.CLOCKWISE=Qe.CLOCKWISE,Tr.NONE=Qe.COLLINEAR;var da=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"addNextSegment",value:function(u,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var g=Qe.index(this._s0,this._s1,this._s2),w=g===Qe.CLOCKWISE&&this._side===he.LEFT||g===Qe.COUNTERCLOCKWISE&&this._side===he.RIGHT;g===0?this.addCollinear(h):w?this.addOutsideTurn(g,h):this.addInsideTurn(g,h)}},{key:"addLineEndCap",value:function(u,h){var g=new St(u,h),w=new St;this.computeOffsetSegment(g,he.LEFT,this._distance,w);var D=new St;this.computeOffsetSegment(g,he.RIGHT,this._distance,D);var O=h.x-u.x,H=h.y-u.y,ie=Math.atan2(H,O);switch(this._bufParams.getEndCapStyle()){case S.CAP_ROUND:this._segList.addPt(w.p1),this.addDirectedFillet(h,ie+Math.PI/2,ie-Math.PI/2,Qe.CLOCKWISE,this._distance),this._segList.addPt(D.p1);break;case S.CAP_FLAT:this._segList.addPt(w.p1),this._segList.addPt(D.p1);break;case S.CAP_SQUARE:var de=new J;de.x=Math.abs(this._distance)*Math.cos(ie),de.y=Math.abs(this._distance)*Math.sin(ie);var Te=new J(w.p1.x+de.x,w.p1.y+de.y),Pe=new J(D.p1.x+de.x,D.p1.y+de.y);this._segList.addPt(Te),this._segList.addPt(Pe)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(u,h,g,w){var D=dr.intersection(h.p0,h.p1,g.p0,g.p1);if(D!==null&&(w<=0?1:D.distance(u)/Math.abs(w))<=this._bufParams.getMitreLimit())return this._segList.addPt(D),null;this.addLimitedMitreJoin(h,g,w,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(u,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*m.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===S.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===S.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(u){this._segList.addPt(new J(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new J(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new J(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new J(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(u,h){this._segList.addPts(u,h)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(u,h,g,w,D){var O=h.x-u.x,H=h.y-u.y,ie=Math.atan2(H,O),de=g.x-u.x,Te=g.y-u.y,Pe=Math.atan2(Te,de);w===Qe.CLOCKWISE?ie<=Pe&&(ie+=2*Math.PI):ie>=Pe&&(ie-=2*Math.PI),this._segList.addPt(h),this.addDirectedFillet(u,ie,Pe,w,D),this._segList.addPt(g)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(u,h,g){this._s1=u,this._s2=h,this._side=g,this._seg1.setCoordinates(u,h),this.computeOffsetSegment(this._seg1,g,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(u,h,g,w){var D=this._seg0.p1,O=Tr.angle(D,this._seg0.p0),H=Tr.angleBetweenOriented(this._seg0.p0,D,this._seg1.p1)/2,ie=Tr.normalize(O+H),de=Tr.normalize(ie+Math.PI),Te=w*g,Pe=g-Te*Math.abs(Math.sin(H)),nt=D.x+Te*Math.cos(de),vt=D.y+Te*Math.sin(de),Rt=new J(nt,vt),Wt=new St(D,Rt),ir=Wt.pointAlongOffset(1,Pe),Kn=Wt.pointAlongOffset(1,-Pe);this._side===he.LEFT?(this._segList.addPt(ir),this._segList.addPt(Kn)):(this._segList.addPt(Kn),this._segList.addPt(ir))}},{key:"addDirectedFillet",value:function(u,h,g,w,D){var O=w===Qe.CLOCKWISE?-1:1,H=Math.abs(h-g),ie=Math.trunc(H/this._filletAngleQuantum+.5);if(ie<1)return null;for(var de=H/ie,Te=new J,Pe=0;Pe<ie;Pe++){var nt=h+O*Pe*de;Te.x=u.x+D*Math.cos(nt),Te.y=u.y+D*Math.sin(nt),this._segList.addPt(Te)}}},{key:"computeOffsetSegment",value:function(u,h,g,w){var D=h===he.LEFT?1:-1,O=u.p1.x-u.p0.x,H=u.p1.y-u.p0.y,ie=Math.sqrt(O*O+H*H),de=D*g*O/ie,Te=D*g*H/ie;w.p0.x=u.p0.x-Te,w.p0.y=u.p0.y+de,w.p1.x=u.p1.x-Te,w.p1.y=u.p1.y+de}},{key:"addInsideTurn",value:function(u,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*m.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var g=new J((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(g);var w=new J((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(w)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(u){var h=new J(u.x+this._distance,u.y);this._segList.addPt(h),this.addDirectedFillet(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(u,h){this._segList.addPt(u.p1),this._segList.addPt(h.p0)}},{key:"init",value:function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Li,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*m.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===S.JOIN_BEVEL||this._bufParams.getJoinStyle()===S.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Qe.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new St,this._seg1=new St,this._offset0=new St,this._offset1=new St,this._side=0,this._hasNarrowConcaveAngle=!1;var u=arguments[0],h=arguments[1],g=arguments[2];this._precisionModel=u,this._bufParams=h,this._li=new Du,this._filletAngleQuantum=Math.PI/2/h.getQuadrantSegments(),h.getQuadrantSegments()>=8&&h.getJoinStyle()===S.JOIN_ROUND&&(this._closingSegLengthFactor=m.MAX_CLOSING_SEG_LEN_FACTOR),this.init(g)}}])})();da.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,da.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,da.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,da.MAX_CLOSING_SEG_LEN_FACTOR=80;var cl=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getOffsetCurve",value:function(u,h){if(this._distance=h,h===0)return null;var g=h<0,w=Math.abs(h),D=this.getSegGen(w);u.length<=1?this.computePointCurve(u[0],D):this.computeOffsetCurve(u,g,D);var O=D.getCoordinates();return g&&si.reverse(O),O}},{key:"computeSingleSidedBufferCurve",value:function(u,h,g){var w=this.simplifyTolerance(this._distance);if(h){g.addSegments(u,!0);var D=Ir.simplify(u,-w),O=D.length-1;g.initSideSegments(D[O],D[O-1],he.LEFT),g.addFirstSegment();for(var H=O-2;H>=0;H--)g.addNextSegment(D[H],!0)}else{g.addSegments(u,!1);var ie=Ir.simplify(u,w),de=ie.length-1;g.initSideSegments(ie[0],ie[1],he.LEFT),g.addFirstSegment();for(var Te=2;Te<=de;Te++)g.addNextSegment(ie[Te],!0)}g.addLastSegment(),g.closeRing()}},{key:"computeRingBufferCurve",value:function(u,h,g){var w=this.simplifyTolerance(this._distance);h===he.RIGHT&&(w=-w);var D=Ir.simplify(u,w),O=D.length-1;g.initSideSegments(D[O-1],D[0],h);for(var H=1;H<=O;H++){var ie=H!==1;g.addNextSegment(D[H],ie)}g.closeRing()}},{key:"computeLineBufferCurve",value:function(u,h){var g=this.simplifyTolerance(this._distance),w=Ir.simplify(u,g),D=w.length-1;h.initSideSegments(w[0],w[1],he.LEFT);for(var O=2;O<=D;O++)h.addNextSegment(w[O],!0);h.addLastSegment(),h.addLineEndCap(w[D-1],w[D]);var H=Ir.simplify(u,-g),ie=H.length-1;h.initSideSegments(H[ie],H[ie-1],he.LEFT);for(var de=ie-2;de>=0;de--)h.addNextSegment(H[de],!0);h.addLastSegment(),h.addLineEndCap(H[1],H[0]),h.closeRing()}},{key:"computePointCurve",value:function(u,h){switch(this._bufParams.getEndCapStyle()){case S.CAP_ROUND:h.createCircle(u);break;case S.CAP_SQUARE:h.createSquare(u)}}},{key:"getLineCurve",value:function(u,h){if(this._distance=h,this.isLineOffsetEmpty(h))return null;var g=Math.abs(h),w=this.getSegGen(g);if(u.length<=1)this.computePointCurve(u[0],w);else if(this._bufParams.isSingleSided()){var D=h<0;this.computeSingleSidedBufferCurve(u,D,w)}else this.computeLineBufferCurve(u,w);return w.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(u){return u*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(u,h,g){if(this._distance=g,u.length<=2)return this.getLineCurve(u,g);if(g===0)return m.copyCoordinates(u);var w=this.getSegGen(g);return this.computeRingBufferCurve(u,h,w),w.getCoordinates()}},{key:"computeOffsetCurve",value:function(u,h,g){var w=this.simplifyTolerance(this._distance);if(h){var D=Ir.simplify(u,-w),O=D.length-1;g.initSideSegments(D[O],D[O-1],he.LEFT),g.addFirstSegment();for(var H=O-2;H>=0;H--)g.addNextSegment(D[H],!0)}else{var ie=Ir.simplify(u,w),de=ie.length-1;g.initSideSegments(ie[0],ie[1],he.LEFT),g.addFirstSegment();for(var Te=2;Te<=de;Te++)g.addNextSegment(ie[Te],!0)}g.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(u){return u===0||u<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(u){return new da(this._precisionModel,this._bufParams,u)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],h=arguments[1];this._precisionModel=u,this._bufParams=h}},{key:"copyCoordinates",value:function(u){for(var h=new Array(u.length).fill(null),g=0;g<h.length;g++)h[g]=new J(u[g]);return h}}])})(),Ul=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var m=arguments[0],u=new mt,h=this._subgraphs.iterator();h.hasNext();){var g=h.next(),w=g.getEnvelope();m.y<w.getMinY()||m.y>w.getMaxY()||this.findStabbedSegments(m,g.getDirectedEdges(),u)}return u}if(arguments.length===3){if(Le(arguments[2],we)&&arguments[0]instanceof J&&arguments[1]instanceof ul){for(var D=arguments[0],O=arguments[1],H=arguments[2],ie=O.getEdge().getCoordinates(),de=0;de<ie.length-1;de++)if(this._seg.p0=ie[de],this._seg.p1=ie[de+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<D.x||this._seg.isHorizontal()||D.y<this._seg.p0.y||D.y>this._seg.p1.y||Qe.index(this._seg.p0,this._seg.p1,D)===Qe.RIGHT)){var Te=O.getDepth(he.LEFT);this._seg.p0.equals(ie[de])||(Te=O.getDepth(he.RIGHT));var Pe=new Bf(this._seg,Te);H.add(Pe)}}else if(Le(arguments[2],we)&&arguments[0]instanceof J&&Le(arguments[1],we))for(var nt=arguments[0],vt=arguments[2],Rt=arguments[1].iterator();Rt.hasNext();){var Wt=Rt.next();Wt.isForward()&&this.findStabbedSegments(nt,Wt,vt)}}}},{key:"getDepth",value:function(m){var u=this.findStabbedSegments(m);return u.size()===0?0:Na.min(u)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new St;var m=arguments[0];this._subgraphs=m}}])})(),Bf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(m){var u=m;if(this._upwardSeg.minX()>=u._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=u._upwardSeg.minX())return-1;var h=this._upwardSeg.orientationIndex(u._upwardSeg);return h!==0||(h=-1*u._upwardSeg.orientationIndex(this._upwardSeg))!==0?h:this._upwardSeg.compareTo(u._upwardSeg)}},{key:"compareX",value:function(m,u){var h=m.p0.compareTo(u.p0);return h!==0?h:m.p1.compareTo(u.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var m=arguments[0],u=arguments[1];this._upwardSeg=new St(m),this._leftDepth=u}}])})();Ul.DepthSegment=Bf;var dh=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,null,[{key:"constructor_",value:function(){T.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(T),Gl=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getY",value:function(){var u=this.y/this.w;if(q.isNaN(u)||q.isInfinite(u))throw new dh;return u}},{key:"getX",value:function(){var u=this.x/this.w;if(q.isNaN(u)||q.isInfinite(u))throw new dh;return u}},{key:"getCoordinate",value:function(){var u=new J;return u.x=this.getX(),u.y=this.getY(),u}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var u=arguments[0];this.x=u.x,this.y=u.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var h=arguments[0],g=arguments[1];this.x=h,this.y=g,this.w=1}else if(arguments[0]instanceof m&&arguments[1]instanceof m){var w=arguments[0],D=arguments[1];this.x=w.y*D.w-D.y*w.w,this.y=D.x*w.w-w.x*D.w,this.w=w.x*D.y-D.x*w.y}else if(arguments[0]instanceof J&&arguments[1]instanceof J){var O=arguments[0],H=arguments[1];this.x=O.y-H.y,this.y=H.x-O.x,this.w=O.x*H.y-H.x*O.y}}else if(arguments.length===3){var ie=arguments[0],de=arguments[1],Te=arguments[2];this.x=ie,this.y=de,this.w=Te}else if(arguments.length===4){var Pe=arguments[0],nt=arguments[1],vt=arguments[2],Rt=arguments[3],Wt=Pe.y-nt.y,ir=nt.x-Pe.x,Kn=Pe.x*nt.y-nt.x*Pe.y,Lr=vt.y-Rt.y,Eo=Rt.x-vt.x,Bo=vt.x*Rt.y-Rt.x*vt.y;this.x=ir*Bo-Eo*Kn,this.y=Lr*Kn-Wt*Bo,this.w=Wt*Eo-Lr*ir}}}])})(),ph=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"area",value:function(){return m.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return m.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(u){if(u===null)throw new A("Supplied point is null.");return m.interpolateZ(u,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return m.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return m.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return m.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return m.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return m.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return m.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var u=arguments[0],h=arguments[1],g=arguments[2];this.p0=u,this.p1=h,this.p2=g}},{key:"area",value:function(u,h,g){return Math.abs(((g.x-u.x)*(h.y-u.y)-(h.x-u.x)*(g.y-u.y))/2)}},{key:"signedArea",value:function(u,h,g){return((g.x-u.x)*(h.y-u.y)-(h.x-u.x)*(g.y-u.y))/2}},{key:"det",value:function(u,h,g,w){return u*w-h*g}},{key:"interpolateZ",value:function(u,h,g,w){var D=h.x,O=h.y,H=g.x-D,ie=w.x-D,de=g.y-O,Te=w.y-O,Pe=H*Te-ie*de,nt=u.x-D,vt=u.y-O,Rt=(Te*nt-ie*vt)/Pe,Wt=(-de*nt+H*vt)/Pe;return h.getZ()+Rt*(g.getZ()-h.getZ())+Wt*(w.getZ()-h.getZ())}},{key:"longestSideLength",value:function(u,h,g){var w=u.distance(h),D=h.distance(g),O=g.distance(u),H=w;return D>H&&(H=D),O>H&&(H=O),H}},{key:"circumcentreDD",value:function(u,h,g){var w=qe.valueOf(u.x).subtract(g.x),D=qe.valueOf(u.y).subtract(g.y),O=qe.valueOf(h.x).subtract(g.x),H=qe.valueOf(h.y).subtract(g.y),ie=qe.determinant(w,D,O,H).multiply(2),de=w.sqr().add(D.sqr()),Te=O.sqr().add(H.sqr()),Pe=qe.determinant(D,de,H,Te),nt=qe.determinant(w,de,O,Te),vt=qe.valueOf(g.x).subtract(Pe.divide(ie)).doubleValue(),Rt=qe.valueOf(g.y).add(nt.divide(ie)).doubleValue();return new J(vt,Rt)}},{key:"isAcute",value:function(u,h,g){return!!Tr.isAcute(u,h,g)&&!!Tr.isAcute(h,g,u)&&!!Tr.isAcute(g,u,h)}},{key:"circumcentre",value:function(u,h,g){var w=g.x,D=g.y,O=u.x-w,H=u.y-D,ie=h.x-w,de=h.y-D,Te=2*m.det(O,H,ie,de),Pe=m.det(H,O*O+H*H,de,ie*ie+de*de),nt=m.det(O,O*O+H*H,ie,ie*ie+de*de);return new J(w-Pe/Te,D+nt/Te)}},{key:"perpendicularBisector",value:function(u,h){var g=h.x-u.x,w=h.y-u.y,D=new Gl(u.x+g/2,u.y+w/2,1),O=new Gl(u.x-w+g/2,u.y+g+w/2,1);return new Gl(D,O)}},{key:"angleBisector",value:function(u,h,g){var w=h.distance(u),D=w/(w+h.distance(g)),O=g.x-u.x,H=g.y-u.y;return new J(u.x+D*O,u.y+D*H)}},{key:"area3D",value:function(u,h,g){var w=h.x-u.x,D=h.y-u.y,O=h.getZ()-u.getZ(),H=g.x-u.x,ie=g.y-u.y,de=g.getZ()-u.getZ(),Te=D*de-O*ie,Pe=O*H-w*de,nt=w*ie-D*H,vt=Te*Te+Pe*Pe+nt*nt,Rt=Math.sqrt(vt)/2;return Rt}},{key:"centroid",value:function(u,h,g){var w=(u.x+h.x+g.x)/3,D=(u.y+h.y+g.y)/3;return new J(w,D)}},{key:"inCentre",value:function(u,h,g){var w=h.distance(g),D=u.distance(g),O=u.distance(h),H=w+D+O,ie=(w*u.x+D*h.x+O*g.x)/H,de=(w*u.y+D*h.y+O*g.y)/H;return new J(ie,de)}}])})(),gh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(m,u,h,g,w){if(u===0&&m.length<Ns.MINIMUM_VALID_SIZE)return null;var D=g,O=w;m.length>=Ns.MINIMUM_VALID_SIZE&&Qe.isCCW(m)&&(D=w,O=g,h=he.opposite(h));var H=this._curveBuilder.getRingCurve(m,h,u);this.addCurve(H,D,O)}},{key:"addRingBothSides",value:function(m,u){this.addRingSide(m,u,he.LEFT,re.EXTERIOR,re.INTERIOR),this.addRingSide(m,u,he.RIGHT,re.INTERIOR,re.EXTERIOR)}},{key:"addPoint",value:function(m){if(this._distance<=0)return null;var u=m.getCoordinates(),h=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(h,re.EXTERIOR,re.INTERIOR)}},{key:"addPolygon",value:function(m){var u=this._distance,h=he.LEFT;this._distance<0&&(u=-this._distance,h=he.RIGHT);var g=m.getExteriorRing(),w=si.removeRepeatedPoints(g.getCoordinates());if(this._distance<0&&this.isErodedCompletely(g,this._distance)||this._distance<=0&&w.length<3)return null;this.addRingSide(w,u,h,re.EXTERIOR,re.INTERIOR);for(var D=0;D<m.getNumInteriorRing();D++){var O=m.getInteriorRingN(D),H=si.removeRepeatedPoints(O.getCoordinates());this._distance>0&&this.isErodedCompletely(O,-this._distance)||this.addRingSide(H,u,he.opposite(h),re.INTERIOR,re.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(m,u){var h=new ph(m[0],m[1],m[2]),g=h.inCentre();return At.pointToSegment(g,h.p0,h.p1)<Math.abs(u)}},{key:"addLineString",value:function(m){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var u=si.removeRepeatedPoints(m.getCoordinates());if(si.isRing(u)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(u,this._distance);else{var h=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(h,re.EXTERIOR,re.INTERIOR)}}},{key:"addCurve",value:function(m,u,h){if(m===null||m.length<2)return null;var g=new tt(m,new Os(0,re.BOUNDARY,u,h));this._curveList.add(g)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(m){if(m.isEmpty())return null;if(m instanceof nr)this.addPolygon(m);else if(m instanceof oi)this.addLineString(m);else if(m instanceof Mi)this.addPoint(m);else if(m instanceof ca)this.addCollection(m);else if(m instanceof uh)this.addCollection(m);else if(m instanceof Rf)this.addCollection(m);else{if(!(m instanceof Wi))throw new be(m.getGeometryType());this.addCollection(m)}}},{key:"isErodedCompletely",value:function(m,u){var h=m.getCoordinates();if(h.length<4)return u<0;if(h.length===4)return this.isTriangleErodedCompletely(h,u);var g=m.getEnvelopeInternal(),w=Math.min(g.getHeight(),g.getWidth());return u<0&&2*Math.abs(u)>w}},{key:"addCollection",value:function(m){for(var u=0;u<m.getNumGeometries();u++){var h=m.getGeometryN(u);this.add(h)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new mt;var m=arguments[0],u=arguments[1],h=arguments[2];this._inputGeom=m,this._distance=u,this._curveBuilder=h}}])})(),yc=(function(){return o(function m(){t(this,m)},[{key:"locate",value:function(m){}}])})(),Oo=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,m.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new G;var u=this._parent.getGeometryN(this._index++);return u instanceof Wi?(this._subcollectionIterator=new m(u),this._subcollectionIterator.next()):u}},{key:"remove",value:function(){throw new be(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[te]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()}},{key:"isAtomic",value:function(u){return!(u instanceof Wi)}}])})(),mh=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"locate",value:function(u){return m.locate(u,this._geom)}},{key:"interfaces_",get:function(){return[yc]}}],[{key:"constructor_",value:function(){this._geom=null;var u=arguments[0];this._geom=u}},{key:"locatePointInPolygon",value:function(u,h){if(h.isEmpty())return re.EXTERIOR;var g=h.getExteriorRing(),w=m.locatePointInRing(u,g);if(w!==re.INTERIOR)return w;for(var D=0;D<h.getNumInteriorRing();D++){var O=h.getInteriorRingN(D),H=m.locatePointInRing(u,O);if(H===re.BOUNDARY)return re.BOUNDARY;if(H===re.INTERIOR)return re.EXTERIOR}return re.INTERIOR}},{key:"locatePointInRing",value:function(u,h){return h.getEnvelopeInternal().intersects(u)?Pf.locateInRing(u,h.getCoordinates()):re.EXTERIOR}},{key:"containsPointInPolygon",value:function(u,h){return re.EXTERIOR!==m.locatePointInPolygon(u,h)}},{key:"locateInGeometry",value:function(u,h){if(h instanceof nr)return m.locatePointInPolygon(u,h);if(h instanceof Wi)for(var g=new Oo(h);g.hasNext();){var w=g.next();if(w!==h){var D=m.locateInGeometry(u,w);if(D!==re.EXTERIOR)return D}}return re.EXTERIOR}},{key:"isContained",value:function(u,h){return re.EXTERIOR!==m.locate(u,h)}},{key:"locate",value:function(u,h){return h.isEmpty()?re.EXTERIOR:h.getEnvelopeInternal().intersects(u)?m.locateInGeometry(u,h):re.EXTERIOR}}])})(),yh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(m){this.getEdges();var u=this._edgeList.indexOf(m),h=u-1;return u===0&&(h=this._edgeList.size()-1),this._edgeList.get(h)}},{key:"propagateSideLabels",value:function(m){for(var u=re.NONE,h=this.iterator();h.hasNext();){var g=h.next().getLabel();g.isArea(m)&&g.getLocation(m,he.LEFT)!==re.NONE&&(u=g.getLocation(m,he.LEFT))}if(u===re.NONE)return null;for(var w=u,D=this.iterator();D.hasNext();){var O=D.next(),H=O.getLabel();if(H.getLocation(m,he.ON)===re.NONE&&H.setLocation(m,he.ON,w),H.isArea(m)){var ie=H.getLocation(m,he.LEFT),de=H.getLocation(m,he.RIGHT);if(de!==re.NONE){if(de!==w)throw new ft("side location conflict",O.getCoordinate());ie===re.NONE&&F.shouldNeverReachHere("found single null side (at "+O.getCoordinate()+")"),w=ie}else F.isTrue(H.getLocation(m,he.LEFT)===re.NONE,"found single null side"),H.setLocation(m,he.RIGHT,w),H.setLocation(m,he.LEFT,w)}}}},{key:"getCoordinate",value:function(){var m=this.iterator();return m.hasNext()?m.next().getCoordinate():null}},{key:"print",value:function(m){Dt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"isAreaLabelsConsistent",value:function(m){return this.computeEdgeEndLabels(m.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(m){var u=this.getEdges();if(u.size()<=0)return!0;var h=u.size()-1,g=u.get(h).getLabel().getLocation(m,he.LEFT);F.isTrue(g!==re.NONE,"Found unlabelled area edge");for(var w=g,D=this.iterator();D.hasNext();){var O=D.next().getLabel();F.isTrue(O.isArea(m),"Found non-area edge");var H=O.getLocation(m,he.LEFT),ie=O.getLocation(m,he.RIGHT);if(H===ie||ie!==w)return!1;w=H}return!0}},{key:"findIndex",value:function(m){this.iterator();for(var u=0;u<this._edgeList.size();u++)if(this._edgeList.get(u)===m)return u;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new mt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(m,u,h){return this._ptInAreaLocation[m]===re.NONE&&(this._ptInAreaLocation[m]=mh.locate(u,h[m].getGeometry())),this._ptInAreaLocation[m]}},{key:"toString",value:function(){var m=new Be;m.append("EdgeEndStar:   "+this.getCoordinate()),m.append(`
`);for(var u=this.iterator();u.hasNext();){var h=u.next();m.append(h),m.append(`
`)}return m.toString()}},{key:"computeEdgeEndLabels",value:function(m){for(var u=this.iterator();u.hasNext();)u.next().computeLabel(m)}},{key:"computeLabelling",value:function(m){this.computeEdgeEndLabels(m[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var u=[!1,!1],h=this.iterator();h.hasNext();)for(var g=h.next().getLabel(),w=0;w<2;w++)g.isLine(w)&&g.getLocation(w)===re.BOUNDARY&&(u[w]=!0);for(var D=this.iterator();D.hasNext();)for(var O=D.next(),H=O.getLabel(),ie=0;ie<2;ie++)if(H.isAnyNull(ie)){var de=re.NONE;if(u[ie])de=re.EXTERIOR;else{var Te=O.getCoordinate();de=this.getLocation(ie,Te,m)}H.setAllLocationsIfNull(ie,de)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(m,u){this._edgeMap.put(m,u),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new jl,this._edgeList=null,this._ptInAreaLocation=[re.NONE,re.NONE]}}])})(),xp=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var h=null,g=null,w=this._SCANNING_FOR_INCOMING,D=0;D<this._resultAreaEdgeList.size();D++){var O=this._resultAreaEdgeList.get(D),H=O.getSym();if(O.getLabel().isArea())switch(h===null&&O.isInResult()&&(h=O),w){case this._SCANNING_FOR_INCOMING:if(!H.isInResult())continue;g=H,w=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!O.isInResult())continue;g.setNext(O),w=this._SCANNING_FOR_INCOMING}}if(w===this._LINKING_TO_OUTGOING){if(h===null)throw new ft("no outgoing dirEdge found",this.getCoordinate());F.isTrue(h.isInResult(),"unable to link last incoming dirEdge"),g.setNext(h)}}},{key:"insert",value:function(h){var g=h;this.insertEdgeEnd(g,g)}},{key:"getRightmostEdge",value:function(){var h=this.getEdges(),g=h.size();if(g<1)return null;var w=h.get(0);if(g===1)return w;var D=h.get(g-1),O=w.getQuadrant(),H=D.getQuadrant();return Pi.isNorthern(O)&&Pi.isNorthern(H)?w:Pi.isNorthern(O)||Pi.isNorthern(H)?w.getDy()!==0?w:D.getDy()!==0?D:(F.shouldNeverReachHere("found two horizontal edges incident on node"),null):D}},{key:"print",value:function(h){Dt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var g=this.iterator();g.hasNext();){var w=g.next();h.print("out "),w.print(h),h.println(),h.print("in "),w.getSym().print(h),h.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new mt;for(var h=this.iterator();h.hasNext();){var g=h.next();(g.isInResult()||g.getSym().isInResult())&&this._resultAreaEdgeList.add(g)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(h){for(var g=this.iterator();g.hasNext();){var w=g.next().getLabel();w.setAllLocationsIfNull(0,h.getLocation(0)),w.setAllLocationsIfNull(1,h.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var h=null,g=null,w=this._edgeList.size()-1;w>=0;w--){var D=this._edgeList.get(w),O=D.getSym();g===null&&(g=O),h!==null&&O.setNext(h),h=D}g.setNext(h)}},{key:"computeDepths",value:function(){if(arguments.length===1){var h=arguments[0],g=this.findIndex(h),w=h.getDepth(he.LEFT),D=h.getDepth(he.RIGHT),O=this.computeDepths(g+1,this._edgeList.size(),w);if(this.computeDepths(0,g,O)!==D)throw new ft("depth mismatch at "+h.getCoordinate())}else if(arguments.length===3){for(var H=arguments[1],ie=arguments[2],de=arguments[0];de<H;de++){var Te=this._edgeList.get(de);Te.setEdgeDepths(he.RIGHT,ie),ie=Te.getDepth(he.LEFT)}return ie}}},{key:"mergeSymLabels",value:function(){for(var h=this.iterator();h.hasNext();){var g=h.next();g.getLabel().merge(g.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(h){for(var g=null,w=null,D=this._SCANNING_FOR_INCOMING,O=this._resultAreaEdgeList.size()-1;O>=0;O--){var H=this._resultAreaEdgeList.get(O),ie=H.getSym();switch(g===null&&H.getEdgeRing()===h&&(g=H),D){case this._SCANNING_FOR_INCOMING:if(ie.getEdgeRing()!==h)continue;w=ie,D=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(H.getEdgeRing()!==h)continue;w.setNextMin(H),D=this._SCANNING_FOR_INCOMING}}D===this._LINKING_TO_OUTGOING&&(F.isTrue(g!==null,"found null for first outgoing dirEdge"),F.isTrue(g.getEdgeRing()===h,"unable to link last incoming dirEdge"),w.setNextMin(g))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var h=0,g=this.iterator();g.hasNext();)g.next().isInResult()&&h++;return h}if(arguments.length===1){for(var w=arguments[0],D=0,O=this.iterator();O.hasNext();)O.next().getEdgeRing()===w&&D++;return D}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var h=re.NONE,g=this.iterator();g.hasNext();){var w=g.next(),D=w.getSym();if(!w.isLineEdge()){if(w.isInResult()){h=re.INTERIOR;break}if(D.isInResult()){h=re.EXTERIOR;break}}}if(h===re.NONE)return null;for(var O=h,H=this.iterator();H.hasNext();){var ie=H.next(),de=ie.getSym();ie.isLineEdge()?ie.getEdge().setCovered(O===re.INTERIOR):(ie.isInResult()&&(O=re.EXTERIOR),de.isInResult()&&(O=re.INTERIOR))}}},{key:"computeLabelling",value:function(h){y(u,"computeLabelling",this,1).call(this,h),this._label=new Os(re.NONE);for(var g=this.iterator();g.hasNext();)for(var w=g.next().getEdge().getLabel(),D=0;D<2;D++){var O=w.getLocation(D);O!==re.INTERIOR&&O!==re.BOUNDARY||this._label.setLocation(D,re.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(yh),wp=(function(m){function u(){return t(this,u),e(this,u)}return c(u,m),o(u,[{key:"createNode",value:function(h){return new Lf(h,new xp)}}])})(fm),ts=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compareTo",value:function(u){var h=u;return m.compareOriented(this._pts,this._orientation,h._pts,h._orientation)}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var u=arguments[0];this._pts=u,this._orientation=m.orientation(u)}},{key:"orientation",value:function(u){return si.increasingDirection(u)===1}},{key:"compareOriented",value:function(u,h,g,w){for(var D=h?1:-1,O=w?1:-1,H=h?u.length:-1,ie=w?g.length:-1,de=h?0:u.length-1,Te=w?0:g.length-1;;){var Pe=u[de].compareTo(g[Te]);if(Pe!==0)return Pe;var nt=(de+=D)===H,vt=(Te+=O)===ie;if(nt&&!vt)return-1;if(!nt&&vt)return 1;if(nt&&vt)return 0}}}])})(),Mu=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"print",value:function(m){m.print("MULTILINESTRING ( ");for(var u=0;u<this._edges.size();u++){var h=this._edges.get(u);u>0&&m.print(","),m.print("(");for(var g=h.getCoordinates(),w=0;w<g.length;w++)w>0&&m.print(","),m.print(g[w].x+" "+g[w].y);m.println(")")}m.print(")  ")}},{key:"addAll",value:function(m){for(var u=m.iterator();u.hasNext();)this.add(u.next())}},{key:"findEdgeIndex",value:function(m){for(var u=0;u<this._edges.size();u++)if(this._edges.get(u).equals(m))return u;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(m){return this._edges.get(m)}},{key:"findEqualEdge",value:function(m){var u=new ts(m.getCoordinates());return this._ocaMap.get(u)}},{key:"add",value:function(m){this._edges.add(m);var u=new ts(m.getCoordinates());this._ocaMap.put(u,m)}}],[{key:"constructor_",value:function(){this._edges=new mt,this._ocaMap=new jl}}])})(),_h=(function(){return o(function m(){t(this,m)},[{key:"processIntersections",value:function(m,u,h,g){}},{key:"isDone",value:function(){}}])})(),pm=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isTrivialIntersection",value:function(u,h,g,w){if(u===g&&this._li.getIntersectionNum()===1){if(m.isAdjacentSegments(h,w))return!0;if(u.isClosed()){var D=u.size()-1;if(h===0&&w===D||w===0&&h===D)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(u,h,g,w){if(u===g&&h===w)return null;this.numTests++;var D=u.getCoordinates()[h],O=u.getCoordinates()[h+1],H=g.getCoordinates()[w],ie=g.getCoordinates()[w+1];this._li.computeIntersection(D,O,H,ie),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,h,g,w)||(this._hasIntersection=!0,u.addIntersections(this._li,h,0),g.addIntersections(this._li,w,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[_h]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u}},{key:"isAdjacentSegments",value:function(u,h){return Math.abs(u-h)===1}}])})(),Pa=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(m){m.print(this.coord),m.print(" seg # = "+this.segmentIndex),m.println(" dist = "+this.dist)}},{key:"compareTo",value:function(m){var u=m;return this.compare(u.segmentIndex,u.dist)}},{key:"isEndPoint",value:function(m){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===m}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(m,u){return this.segmentIndex<m?-1:this.segmentIndex>m?1:this.dist<u?-1:this.dist>u?1:0}},{key:"interfaces_",get:function(){return[k]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var m=arguments[0],u=arguments[1],h=arguments[2];this.coord=new J(m),this.segmentIndex=u,this.dist=h}}])})(),vh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"print",value:function(m){m.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(m){this.addEndpoints();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next(),w=this.createSplitEdge(h,g);m.add(w),h=g}}},{key:"addEndpoints",value:function(){var m=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[m],m,0)}},{key:"createSplitEdge",value:function(m,u){var h=u.segmentIndex-m.segmentIndex+2,g=this.edge.pts[u.segmentIndex],w=u.dist>0||!u.coord.equals2D(g);w||h--;var D=new Array(h).fill(null),O=0;D[O++]=new J(m.coord);for(var H=m.segmentIndex+1;H<=u.segmentIndex;H++)D[O++]=this.edge.pts[H];return w&&(D[O]=u.coord),new js(D,new Os(this.edge._label))}},{key:"add",value:function(m,u,h){var g=new Pa(m,u,h),w=this._nodeMap.get(g);return w!==null?w:(this._nodeMap.put(g,g),g)}},{key:"isIntersection",value:function(m){for(var u=this.iterator();u.hasNext();)if(u.next().coord.equals(m))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new jl,this.edge=null;var m=arguments[0];this.edge=m}}])})(),Ep=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])||m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"isCoveredBy",value:function(){return(m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])||m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<u.length;h++){var g=Math.trunc(h/3),w=h%3;this._matrix[g][w]=at.toDimensionValue(u.charAt(h))}else if(arguments.length===3){var D=arguments[0],O=arguments[1],H=arguments[2];this._matrix[D][O]=H}}},{key:"isContains",value:function(){return m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<u.length;h++){var g=Math.trunc(h/3),w=h%3;this.setAtLeast(g,w,at.toDimensionValue(u.charAt(h)))}else if(arguments.length===3){var D=arguments[0],O=arguments[1],H=arguments[2];this._matrix[D][O]<H&&(this._matrix[D][O]=H)}}},{key:"setAtLeastIfValid",value:function(u,h,g){u>=0&&h>=0&&this.setAtLeast(u,h,g)}},{key:"isWithin",value:function(){return m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE}},{key:"isTouches",value:function(u,h){return u>h?this.isTouches(h,u):(u===at.A&&h===at.A||u===at.L&&h===at.L||u===at.L&&h===at.A||u===at.P&&h===at.A||u===at.P&&h===at.L)&&this._matrix[re.INTERIOR][re.INTERIOR]===at.FALSE&&(m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))}},{key:"isOverlaps",value:function(u,h){return u===at.P&&h===at.P||u===at.A&&h===at.A?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR]):u===at.L&&h===at.L&&this._matrix[re.INTERIOR][re.INTERIOR]===1&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR])}},{key:"isEquals",value:function(u,h){return u===h&&m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"toString",value:function(){for(var u=new Su("123456789"),h=0;h<3;h++)for(var g=0;g<3;g++)u.setCharAt(3*h+g,at.toDimensionSymbol(this._matrix[h][g]));return u.toString()}},{key:"setAll",value:function(u){for(var h=0;h<3;h++)for(var g=0;g<3;g++)this._matrix[h][g]=u}},{key:"get",value:function(u,h){return this._matrix[u][h]}},{key:"transpose",value:function(){var u=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=u,u=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=u,u=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=u,this}},{key:"matches",value:function(u){if(u.length!==9)throw new A("Should be length 9: "+u);for(var h=0;h<3;h++)for(var g=0;g<3;g++)if(!m.matches(this._matrix[h][g],u.charAt(3*h+g)))return!1;return!0}},{key:"add",value:function(u){for(var h=0;h<3;h++)for(var g=0;g<3;g++)this.setAtLeast(h,g,u.get(h,g))}},{key:"isDisjoint",value:function(){return this._matrix[re.INTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.INTERIOR][re.BOUNDARY]===at.FALSE&&this._matrix[re.BOUNDARY][re.INTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.BOUNDARY]===at.FALSE}},{key:"isCrosses",value:function(u,h){return u===at.P&&h===at.L||u===at.P&&h===at.A||u===at.L&&h===at.A?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR]):u===at.L&&h===at.P||u===at.A&&h===at.P||u===at.A&&h===at.L?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR]):u===at.L&&h===at.L&&this._matrix[re.INTERIOR][re.INTERIOR]===0}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(at.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var u=arguments[0];m.constructor_.call(this),this.set(u)}else if(arguments[0]instanceof m){var h=arguments[0];m.constructor_.call(this),this._matrix[re.INTERIOR][re.INTERIOR]=h._matrix[re.INTERIOR][re.INTERIOR],this._matrix[re.INTERIOR][re.BOUNDARY]=h._matrix[re.INTERIOR][re.BOUNDARY],this._matrix[re.INTERIOR][re.EXTERIOR]=h._matrix[re.INTERIOR][re.EXTERIOR],this._matrix[re.BOUNDARY][re.INTERIOR]=h._matrix[re.BOUNDARY][re.INTERIOR],this._matrix[re.BOUNDARY][re.BOUNDARY]=h._matrix[re.BOUNDARY][re.BOUNDARY],this._matrix[re.BOUNDARY][re.EXTERIOR]=h._matrix[re.BOUNDARY][re.EXTERIOR],this._matrix[re.EXTERIOR][re.INTERIOR]=h._matrix[re.EXTERIOR][re.INTERIOR],this._matrix[re.EXTERIOR][re.BOUNDARY]=h._matrix[re.EXTERIOR][re.BOUNDARY],this._matrix[re.EXTERIOR][re.EXTERIOR]=h._matrix[re.EXTERIOR][re.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var u=arguments[0],h=arguments[1];return h===at.SYM_DONTCARE||h===at.SYM_TRUE&&(u>=0||u===at.TRUE)||h===at.SYM_FALSE&&u===at.FALSE||h===at.SYM_P&&u===at.P||h===at.SYM_L&&u===at.L||h===at.SYM_A&&u===at.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var g=arguments[1];return new m(arguments[0]).matches(g)}}},{key:"isTrue",value:function(u){return u>=0||u===at.TRUE}}])})(),bp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(u){return u===null||u.length===0?null:(this.ensureCapacity(this._size+u.length),Dt.arraycopy(u,0,this._data,this._size,u.length),void(this._size+=u.length))}},{key:"ensureCapacity",value:function(u){if(u<=this._data.length)return null;var h=Math.max(u,2*this._data.length);this._data=In.copyOf(this._data,h)}},{key:"toArray",value:function(){var u=new Array(this._size).fill(null);return Dt.arraycopy(this._data,0,u,0,this._size),u}},{key:"add",value:function(u){this.ensureCapacity(this._size+1),this._data[this._size]=u,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)m.constructor_.call(this,10);else if(arguments.length===1){var u=arguments[0];this._data=new Array(u).fill(null)}}}])})(),_c=(function(){function m(){t(this,m)}return o(m,[{key:"getChainStartIndices",value:function(u){var h=0,g=new bp(Math.trunc(u.length/2));g.add(h);do{var w=this.findChainEnd(u,h);g.add(w),h=w}while(h<u.length-1);return g.toArray()}},{key:"findChainEnd",value:function(u,h){for(var g=Pi.quadrant(u[h],u[h+1]),w=h+1;w<u.length&&Pi.quadrant(u[w-1],u[w])===g;)w++;return w-1}},{key:"OLDgetChainStartIndices",value:function(u){var h=0,g=new mt;g.add(h);do{var w=this.findChainEnd(u,h);g.add(w),h=w}while(h<u.length-1);return m.toIntArray(g)}}],[{key:"toIntArray",value:function(u){for(var h=new Array(u.size()).fill(null),g=0;g<h.length;g++)h[g]=u.get(g).intValue();return h}}])})(),xh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(m){var u=this.pts[this.startIndex[m]].x,h=this.pts[this.startIndex[m+1]].x;return u>h?u:h}},{key:"getMinX",value:function(m){var u=this.pts[this.startIndex[m]].x,h=this.pts[this.startIndex[m+1]].x;return u<h?u:h}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this.computeIntersectsForChain(this.startIndex[m],this.startIndex[m+1],u,u.startIndex[h],u.startIndex[h+1],g)}else if(arguments.length===6){var w=arguments[0],D=arguments[1],O=arguments[2],H=arguments[3],ie=arguments[4],de=arguments[5];if(D-w==1&&ie-H==1)return de.addIntersections(this.e,w,O.e,H),null;if(!this.overlaps(w,D,O,H,ie))return null;var Te=Math.trunc((w+D)/2),Pe=Math.trunc((H+ie)/2);w<Te&&(H<Pe&&this.computeIntersectsForChain(w,Te,O,H,Pe,de),Pe<ie&&this.computeIntersectsForChain(w,Te,O,Pe,ie,de)),Te<D&&(H<Pe&&this.computeIntersectsForChain(Te,D,O,H,Pe,de),Pe<ie&&this.computeIntersectsForChain(Te,D,O,Pe,ie,de))}}},{key:"overlaps",value:function(m,u,h,g,w){return Se.intersects(this.pts[m],this.pts[u],h.pts[g],h.pts[w])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(m,u){for(var h=0;h<this.startIndex.length-1;h++)for(var g=0;g<m.startIndex.length-1;g++)this.computeIntersectsForChain(h,m,g,u)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var m=arguments[0];this.e=m,this.pts=m.getCoordinates();var u=new _c;this.startIndex=u.getChainStartIndices(this.pts)}}])})(),Bs=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getDepth",value:function(u,h){return this._depth[u][h]}},{key:"setDepth",value:function(u,h,g){this._depth[u][h]=g}},{key:"isNull",value:function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var h=0;h<3;h++)if(this._depth[u][h]!==m.NULL_VALUE)return!1;return!0}if(arguments.length===1){var g=arguments[0];return this._depth[g][1]===m.NULL_VALUE}if(arguments.length===2){var w=arguments[0],D=arguments[1];return this._depth[w][D]===m.NULL_VALUE}}},{key:"normalize",value:function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var h=this._depth[u][1];this._depth[u][2]<h&&(h=this._depth[u][2]),h<0&&(h=0);for(var g=1;g<3;g++){var w=0;this._depth[u][g]>h&&(w=1),this._depth[u][g]=w}}}},{key:"getDelta",value:function(u){return this._depth[u][he.RIGHT]-this._depth[u][he.LEFT]}},{key:"getLocation",value:function(u,h){return this._depth[u][h]<=0?re.EXTERIOR:re.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<2;h++)for(var g=1;g<3;g++){var w=u.getLocation(h,g);w!==re.EXTERIOR&&w!==re.INTERIOR||(this.isNull(h,g)?this._depth[h][g]=m.depthAtLocation(w):this._depth[h][g]+=m.depthAtLocation(w))}else if(arguments.length===3){var D=arguments[0],O=arguments[1];arguments[2]===re.INTERIOR&&this._depth[D][O]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var u=0;u<2;u++)for(var h=0;h<3;h++)this._depth[u][h]=m.NULL_VALUE}},{key:"depthAtLocation",value:function(u){return u===re.EXTERIOR?0:u===re.INTERIOR?1:m.NULL_VALUE}}])})();Bs.NULL_VALUE=-1;var js=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var h=new Array(2).fill(null);return h[0]=this.pts[0],h[1]=this.pts[1],new u(h,Os.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(h){this._isIsolated=h}},{key:"setName",value:function(h){this._name=h}},{key:"equals",value:function(h){if(!(h instanceof u))return!1;var g=h;if(this.pts.length!==g.pts.length)return!1;for(var w=!0,D=!0,O=this.pts.length,H=0;H<this.pts.length;H++)if(this.pts[H].equals2D(g.pts[H])||(w=!1),this.pts[H].equals2D(g.pts[--O])||(D=!1),!w&&!D)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var h=arguments[0];return this.pts[h]}}},{key:"print",value:function(h){h.print("edge "+this._name+": "),h.print("LINESTRING (");for(var g=0;g<this.pts.length;g++)g>0&&h.print(","),h.print(this.pts[g].x+" "+this.pts[g].y);h.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(h){u.updateIM(this._label,h)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(h){h.print("edge "+this._name+": ");for(var g=this.pts.length-1;g>=0;g--)h.print(this.pts[g]+" ");h.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new xh(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Se;for(var h=0;h<this.pts.length;h++)this._env.expandToInclude(this.pts[h])}return this._env}},{key:"addIntersection",value:function(h,g,w,D){var O=new J(h.getIntersection(D)),H=g,ie=h.getEdgeDistance(w,D),de=H+1;if(de<this.pts.length){var Te=this.pts[de];O.equals2D(Te)&&(H=de,ie=0)}this.eiList.add(O,H,ie)}},{key:"toString",value:function(){var h=new Su;h.append("edge "+this._name+": "),h.append("LINESTRING (");for(var g=0;g<this.pts.length;g++)g>0&&h.append(","),h.append(this.pts[g].x+" "+this.pts[g].y);return h.append(")  "+this._label+" "+this._depthDelta),h.toString()}},{key:"isPointwiseEqual",value:function(h){if(this.pts.length!==h.pts.length)return!1;for(var g=0;g<this.pts.length;g++)if(!this.pts[g].equals2D(h.pts[g]))return!1;return!0}},{key:"setDepthDelta",value:function(h){this._depthDelta=h}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(h,g,w){for(var D=0;D<h.getIntersectionNum();D++)this.addIntersection(h,g,w,D)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new vh(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Bs,this._depthDelta=0,arguments.length===1){var h=arguments[0];u.constructor_.call(this,h,null)}else if(arguments.length===2){var g=arguments[0],w=arguments[1];this.pts=g,this._label=w}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Ep&&arguments[0]instanceof Os))return y(u,"updateIM",this).apply(this,arguments);var h=arguments[0],g=arguments[1];g.setAtLeastIfValid(h.getLocation(0,he.ON),h.getLocation(1,he.ON),1),h.isArea()&&(g.setAtLeastIfValid(h.getLocation(0,he.LEFT),h.getLocation(1,he.LEFT),2),g.setAtLeastIfValid(h.getLocation(0,he.RIGHT),h.getLocation(1,he.RIGHT),2))}}])})(ln),Nu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"setWorkingPrecisionModel",value:function(u){this._workingPrecisionModel=u}},{key:"insertUniqueEdge",value:function(u){var h=this._edgeList.findEqualEdge(u);if(h!==null){var g=h.getLabel(),w=u.getLabel();h.isPointwiseEqual(u)||(w=new Os(u.getLabel())).flip(),g.merge(w);var D=m.depthDelta(w),O=h.getDepthDelta()+D;h.setDepthDelta(O)}else this._edgeList.add(u),u.setDepthDelta(m.depthDelta(u.getLabel()))}},{key:"buildSubgraphs",value:function(u,h){for(var g=new mt,w=u.iterator();w.hasNext();){var D=w.next(),O=D.getRightmostCoordinate(),H=new Ul(g).getDepth(O);D.computeDepth(H),D.findResultEdges(),g.add(D),h.add(D.getDirectedEdges(),D.getNodes())}}},{key:"createSubgraphs",value:function(u){for(var h=new mt,g=u.getNodes().iterator();g.hasNext();){var w=g.next();if(!w.isVisited()){var D=new hn;D.create(w),h.add(D)}}return Na.sort(h,Na.reverseOrder()),h}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(u){if(this._workingNoder!==null)return this._workingNoder;var h=new Ci,g=new Du;return g.setPrecisionModel(u),h.setSegmentIntersector(new pm(g)),h}},{key:"buffer",value:function(u,h){var g=this._workingPrecisionModel;g===null&&(g=u.getPrecisionModel()),this._geomFact=u.getFactory();var w=new cl(g,this._bufParams),D=new gh(u,h,w).getCurves();if(D.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(D,g),this._graph=new Of(new wp),this._graph.addEdges(this._edgeList.getEdges());var O=this.createSubgraphs(this._graph),H=new mp(this._geomFact);this.buildSubgraphs(O,H);var ie=H.getPolygons();return ie.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(ie)}},{key:"computeNodedEdges",value:function(u,h){var g=this.getNoder(h);g.computeNodes(u);for(var w=g.getNodedSubstrings().iterator();w.hasNext();){var D=w.next(),O=D.getCoordinates();if(O.length!==2||!O[0].equals2D(O[1])){var H=D.getData(),ie=new js(D.getCoordinates(),new Os(H));this.insertUniqueEdge(ie)}}}},{key:"setNoder",value:function(u){this._workingNoder=u}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Mu;var u=arguments[0];this._bufParams=u}},{key:"depthDelta",value:function(u){var h=u.getLocation(0,he.LEFT),g=u.getLocation(0,he.RIGHT);return h===re.INTERIOR&&g===re.EXTERIOR?1:h===re.EXTERIOR&&g===re.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(u){for(var h=new Iu,g=new mt;u.hasNext();){var w=u.next(),D=h.createLineString(w.getCoordinates());g.add(D)}return h.buildGeometry(g)}}])})(),Pu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"rescale",value:function(){if(Le(arguments[0],He))for(var u=arguments[0].iterator();u.hasNext();){var h=u.next();this.rescale(h.getCoordinates())}else if(arguments[0]instanceof Array){for(var g=arguments[0],w=0;w<g.length;w++)g[w].x=g[w].x/this._scaleFactor+this._offsetX,g[w].y=g[w].y/this._scaleFactor+this._offsetY;g.length===2&&g[0].equals2D(g[1])&&Dt.out.println(g)}}},{key:"scale",value:function(){if(Le(arguments[0],He)){for(var u=arguments[0],h=new mt(u.size()),g=u.iterator();g.hasNext();){var w=g.next();h.add(new tt(this.scale(w.getCoordinates()),w.getData()))}return h}if(arguments[0]instanceof Array){for(var D=arguments[0],O=new Array(D.length).fill(null),H=0;H<D.length;H++)O[H]=new J(Math.round((D[H].x-this._offsetX)*this._scaleFactor),Math.round((D[H].y-this._offsetY)*this._scaleFactor),D[H].getZ());return si.removeRepeatedPoints(O)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u}},{key:"computeNodes",value:function(u){var h=u;this._isScaled&&(h=this.scale(u)),this._noder.computeNodes(h)}},{key:"interfaces_",get:function(){return[rr]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],h=arguments[1];m.constructor_.call(this,u,h,0,0)}else if(arguments.length===4){var g=arguments[0],w=arguments[1];this._noder=g,this._scaleFactor=w,this._isScaled=!this.isIntegerPrecision()}}}])})(),Lu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next().getCoordinates();this.checkEndPtVertexIntersections(h[0],this._segStrings),this.checkEndPtVertexIntersections(h[h.length-1],this._segStrings)}else if(arguments.length===2){for(var g=arguments[0],w=arguments[1].iterator();w.hasNext();)for(var D=w.next().getCoordinates(),O=1;O<D.length-1;O++)if(D[O].equals(g))throw new oe("found endpt/interior pt intersection at index "+O+" :pt "+g)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var h=u.next(),g=this._segStrings.iterator();g.hasNext();){var w=g.next();this.checkInteriorIntersections(h,w)}else if(arguments.length===2)for(var D=arguments[0],O=arguments[1],H=D.getCoordinates(),ie=O.getCoordinates(),de=0;de<H.length-1;de++)for(var Te=0;Te<ie.length-1;Te++)this.checkInteriorIntersections(D,de,O,Te);else if(arguments.length===4){var Pe=arguments[0],nt=arguments[1],vt=arguments[2],Rt=arguments[3];if(Pe===vt&&nt===Rt)return null;var Wt=Pe.getCoordinates()[nt],ir=Pe.getCoordinates()[nt+1],Kn=vt.getCoordinates()[Rt],Lr=vt.getCoordinates()[Rt+1];if(this._li.computeIntersection(Wt,ir,Kn,Lr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Wt,ir)||this.hasInteriorIntersection(this._li,Kn,Lr)))throw new oe("found non-noded intersection at "+Wt+"-"+ir+" and "+Kn+"-"+Lr)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next();this.checkCollapses(h)}else if(arguments.length===1)for(var g=arguments[0].getCoordinates(),w=0;w<g.length-2;w++)this.checkCollapse(g[w],g[w+1],g[w+2])}},{key:"hasInteriorIntersection",value:function(u,h,g){for(var w=0;w<u.getIntersectionNum();w++){var D=u.getIntersection(w);if(!D.equals(h)&&!D.equals(g))return!0}return!1}},{key:"checkCollapse",value:function(u,h,g){if(u.equals(g))throw new oe("found non-noded collapse at "+m.fact.createLineString([u,h,g]))}}],[{key:"constructor_",value:function(){this._li=new Du,this._segStrings=null;var u=arguments[0];this._segStrings=u}}])})();Lu.fact=new Iu;var wh=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"intersectsScaled",value:function(u,h){var g=Math.min(u.x,h.x),w=Math.max(u.x,h.x),D=Math.min(u.y,h.y),O=Math.max(u.y,h.y),H=this._maxx<g||this._minx>w||this._maxy<D||this._miny>O;if(H)return!1;var ie=this.intersectsToleranceSquare(u,h);return F.isTrue(!(H&&ie),"Found bad envelope test"),ie}},{key:"initCorners",value:function(u){var h=.5;this._minx=u.x-h,this._maxx=u.x+h,this._miny=u.y-h,this._maxy=u.y+h,this._corner[0]=new J(this._maxx,this._maxy),this._corner[1]=new J(this._minx,this._maxy),this._corner[2]=new J(this._minx,this._miny),this._corner[3]=new J(this._maxx,this._miny)}},{key:"intersects",value:function(u,h){return this._scaleFactor===1?this.intersectsScaled(u,h):(this.copyScaled(u,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(u){return Math.round(u*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(u,h){h.x=this.scale(u.x),h.y=this.scale(u.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var u=m.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Se(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(u,h){return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(u,h){var g=!1,w=!1;return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(g=!0),this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(w=!0),this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!g||!w)||!!u.equals(this._pt)||!!h.equals(this._pt))))}},{key:"addSnappedNode",value:function(u,h){var g=u.getCoordinate(h),w=u.getCoordinate(h+1);return!!this.intersects(g,w)&&(u.addIntersection(this.getCoordinate(),h),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],h=arguments[1],g=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=h,this._li=g,h<=0)throw new A("Scale factor must be non-zero");h!==1&&(this._pt=new J(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new J,this._p1Scaled=new J),this.initCorners(this._pt)}}])})();wh.SAFE_ENV_EXPANSION_FACTOR=.75;var jf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var m=arguments[1];arguments[0].getLineSegment(m,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new St}}])})(),Ii=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var m=arguments[0];return this.snap(m,null,-1)}if(arguments.length===3){var u=arguments[0],h=arguments[1],g=arguments[2],w=u.getSafeEnvelope(),D=new Sp(u,h,g);return this._index.query(w,new((function(){return o(function O(){t(this,O)},[{key:"interfaces_",get:function(){return[vp]}},{key:"visitItem",value:function(O){O.select(w,D)}}])})())),D.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var m=arguments[0];this._index=m}}])})(),Sp=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof rn))return y(u,"select",this,1).apply(this,arguments);var h=arguments[1],g=arguments[0].getContext();if(this._parentEdge===g&&(h===this._hotPixelVertexIndex||h+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(g,h)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var h=arguments[0],g=arguments[1],w=arguments[2];this._hotPixel=h,this._parentEdge=g,this._hotPixelVertexIndex=w}}])})(jf);Ii.HotPixelSnapAction=Sp;var zl=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(m,u,h,g){if(m===h&&u===g)return null;var w=m.getCoordinates()[u],D=m.getCoordinates()[u+1],O=h.getCoordinates()[g],H=h.getCoordinates()[g+1];if(this._li.computeIntersection(w,D,O,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var ie=0;ie<this._li.getIntersectionNum();ie++)this._interiorIntersections.add(this._li.getIntersection(ie));m.addIntersections(this._li,u,0),h.addIntersections(this._li,g,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[_h]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var m=arguments[0];this._li=m,this._interiorIntersections=new mt}}])})(),Vl=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(m){var u=tt.getNodedSubstrings(m),h=new Lu(u);try{h.checkValid()}catch(g){if(!(g instanceof T))throw g;g.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return tt.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(m,u){var h=this.findInteriorIntersections(m,u);this.computeIntersectionSnaps(h),this.computeVertexSnaps(m)}},{key:"findInteriorIntersections",value:function(m,u){var h=new zl(u);return this._noder.setSegmentIntersector(h),this._noder.computeNodes(m),h.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Le(arguments[0],He))for(var m=arguments[0].iterator();m.hasNext();){var u=m.next();this.computeVertexSnaps(u)}else if(arguments[0]instanceof tt)for(var h=arguments[0],g=h.getCoordinates(),w=0;w<g.length;w++){var D=new wh(g[w],this._scaleFactor,this._li);this._pointSnapper.snap(D,h,w)&&h.addIntersection(g[w],w)}}},{key:"computeNodes",value:function(m){this._nodedSegStrings=m,this._noder=new Ci,this._pointSnapper=new Ii(this._noder.getIndex()),this.snapRound(m,this._li)}},{key:"computeIntersectionSnaps",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next(),g=new wh(h,this._scaleFactor,this._li);this._pointSnapper.snap(g)}}},{key:"interfaces_",get:function(){return[rr]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var m=arguments[0];this._pm=m,this._li=new Du,this._li.setPrecisionModel(m),this._scaleFactor=m.getScale()}}])})(),Hl=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"bufferFixedPrecision",value:function(u){var h=new Pu(new Vl(new hs(1)),u.getScale()),g=new Nu(this._bufParams);g.setWorkingPrecisionModel(u),g.setNoder(h),this._resultGeometry=g.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var u=m.MAX_PRECISION_DIGITS;u>=0;u--){try{this.bufferReducedPrecision(u)}catch(D){if(!(D instanceof ft))throw D;this._saveException=D}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var h=arguments[0],g=m.precisionScaleFactor(this._argGeom,this._distance,h),w=new hs(g);this.bufferFixedPrecision(w)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===hs.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(u){this._bufParams.setQuadrantSegments(u)}},{key:"bufferOriginalPrecision",value:function(){try{var u=new Nu(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof oe))throw h;this._saveException=h}}},{key:"getResultGeometry",value:function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(u){this._bufParams.setEndCapStyle(u)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new S,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this._argGeom=h,this._bufParams=g}}},{key:"bufferOp",value:function(){if(arguments.length===2){var u=arguments[1];return new m(arguments[0]).getResultGeometry(u)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var h=arguments[1],g=arguments[2],w=new m(arguments[0]);return w.setQuadrantSegments(g),w.getResultGeometry(h)}if(arguments[2]instanceof S&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var D=arguments[1];return new m(arguments[0],arguments[2]).getResultGeometry(D)}}else if(arguments.length===4){var O=arguments[1],H=arguments[2],ie=arguments[3],de=new m(arguments[0]);return de.setQuadrantSegments(H),de.setEndCapStyle(ie),de.getResultGeometry(O)}}},{key:"precisionScaleFactor",value:function(u,h,g){var w=u.getEnvelopeInternal(),D=sr.max(Math.abs(w.getMaxX()),Math.abs(w.getMaxY()),Math.abs(w.getMinX()),Math.abs(w.getMinY()))+2*(h>0?h:0),O=g-Math.trunc(Math.log(D)/Math.log(10)+1);return Math.pow(10,O)}}])})();Hl.CAP_ROUND=S.CAP_ROUND,Hl.CAP_BUTT=S.CAP_FLAT,Hl.CAP_FLAT=S.CAP_FLAT,Hl.CAP_SQUARE=S.CAP_SQUARE,Hl.MAX_PRECISION_DIGITS=12;var Cp=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Uf=(function(){return o(function m(u){t(this,m),this.geometryFactory=u||new Iu},[{key:"read",value:function(m){var u,h=(u=typeof m=="string"?JSON.parse(m):m).type;if(!ns[h])throw new Error("Unknown GeoJSON type: "+u.type);return Cp.indexOf(h)!==-1?ns[h].call(this,u.coordinates):h==="GeometryCollection"?ns[h].call(this,u.geometries):ns[h].call(this,u)}},{key:"write",value:function(m){var u=m.getGeometryType();if(!Fo[u])throw new Error("Geometry is not supported");return Fo[u].call(this,m)}}])})(),ns={Feature:function(m){var u={};for(var h in m)u[h]=m[h];if(m.geometry){var g=m.geometry.type;if(!ns[g])throw new Error("Unknown GeoJSON type: "+m.type);u.geometry=this.read(m.geometry)}return m.bbox&&(u.bbox=ns.bbox.call(this,m.bbox)),u},FeatureCollection:function(m){var u={};if(m.features){u.features=[];for(var h=0;h<m.features.length;++h)u.features.push(this.read(m.features[h]))}return m.bbox&&(u.bbox=this.parse.bbox.call(this,m.bbox)),u},coordinates:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(r(J,p(g)))}return u},bbox:function(m){return this.geometryFactory.createLinearRing([new J(m[0],m[1]),new J(m[2],m[1]),new J(m[2],m[3]),new J(m[0],m[3]),new J(m[0],m[1])])},Point:function(m){var u=r(J,p(m));return this.geometryFactory.createPoint(u)},MultiPoint:function(m){for(var u=[],h=0;h<m.length;++h)u.push(ns.Point.call(this,m[h]));return this.geometryFactory.createMultiPoint(u)},LineString:function(m){var u=ns.coordinates.call(this,m);return this.geometryFactory.createLineString(u)},MultiLineString:function(m){for(var u=[],h=0;h<m.length;++h)u.push(ns.LineString.call(this,m[h]));return this.geometryFactory.createMultiLineString(u)},Polygon:function(m){for(var u=ns.coordinates.call(this,m[0]),h=this.geometryFactory.createLinearRing(u),g=[],w=1;w<m.length;++w){var D=m[w],O=ns.coordinates.call(this,D),H=this.geometryFactory.createLinearRing(O);g.push(H)}return this.geometryFactory.createPolygon(h,g)},MultiPolygon:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(ns.Polygon.call(this,g))}return this.geometryFactory.createMultiPolygon(u)},GeometryCollection:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(this.read(g))}return this.geometryFactory.createGeometryCollection(u)}},Fo={coordinate:function(m){var u=[m.x,m.y];return m.z&&u.push(m.z),m.m&&u.push(m.m),u},Point:function(m){return{type:"Point",coordinates:Fo.coordinate.call(this,m.getCoordinate())}},MultiPoint:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],w=Fo.Point.call(this,g);u.push(w.coordinates)}return{type:"MultiPoint",coordinates:u}},LineString:function(m){for(var u=[],h=m.getCoordinates(),g=0;g<h.length;++g){var w=h[g];u.push(Fo.coordinate.call(this,w))}return{type:"LineString",coordinates:u}},MultiLineString:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],w=Fo.LineString.call(this,g);u.push(w.coordinates)}return{type:"MultiLineString",coordinates:u}},Polygon:function(m){var u=[],h=Fo.LineString.call(this,m._shell);u.push(h.coordinates);for(var g=0;g<m._holes.length;++g){var w=m._holes[g],D=Fo.LineString.call(this,w);u.push(D.coordinates)}return{type:"Polygon",coordinates:u}},MultiPolygon:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],w=Fo.Polygon.call(this,g);u.push(w.coordinates)}return{type:"MultiPolygon",coordinates:u}},GeometryCollection:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],w=g.getGeometryType();u.push(Fo[w].call(this,g))}return{type:"GeometryCollection",geometries:u}}};return{BufferOp:Hl,GeoJSONReader:(function(){return o(function m(u){t(this,m),this.parser=new Uf(u||new Iu)},[{key:"read",value:function(m){return this.parser.read(m)}}])})(),GeoJSONWriter:(function(){return o(function m(){t(this,m),this.parser=new Uf(this.geometryFactory)},[{key:"write",value:function(m){return this.parser.write(m)}}])})()}})});var BK=_r((fF,FK)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof fF=="object"?FK.exports=e():n.compareVersions=e()})(fF,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function e(c,f){return c.indexOf(f)===-1?c.length:c.indexOf(f)}function t(c){var f=c.replace(/^v/,"").replace(/\+.*$/,""),d=e(f,"-"),y=f.substring(0,d).split(".");return y.push(f.substring(d+1)),y}function r(c){return isNaN(Number(c))?c:Number(c)}function i(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function o(c,f){[c,f].forEach(i);for(var d=t(c),y=t(f),p=0;p<Math.max(d.length-1,y.length-1);p++){var _=parseInt(d[p]||0,10),x=parseInt(y[p]||0,10);if(_>x)return 1;if(x>_)return-1}var b=d[d.length-1],S=y[y.length-1];if(b&&S){var T=b.split(".").map(r),A=S.split(".").map(r);for(p=0;p<Math.max(T.length,A.length);p++){if(T[p]===void 0||typeof A[p]=="string"&&typeof T[p]=="number")return-1;if(A[p]===void 0||typeof T[p]=="string"&&typeof A[p]=="number"||T[p]>A[p])return 1;if(A[p]>T[p])return-1}}else if(b||S)return b?-1:1;return 0}var s=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function l(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(s.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+s.join("|"))}return o.validate=function(c){return typeof c=="string"&&n.test(c)},o.compare=function(c,f,d){l(d);var y=o(c,f);return a[d].indexOf(y)>-1},o})});var zK=_r((Pwt,GK)=>{"use strict";var dF=BK(),gF="1.1.0",lt=!0,Xt={classification:"https://stac-extensions.github.io/classification/v2.0.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.2.0/schema.json",eo:"https://stac-extensions.github.io/eo/v2.0.0/schema.json",file:"https://stac-extensions.github.io/file/v2.1.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.2.0/schema.json",projection:"https://stac-extensions.github.io/projection/v2.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v2.0.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.1.0/schema.json",version:"https://stac-extensions.github.io/version/v1.2.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},Jg={itemAndCollection:{"classification:":Xt.classification,"cube:":Xt.datacube,"eo:":Xt.eo,"file:":Xt.file,"label:":Xt.label,"pc:":Xt.pointcloud,"processing:":Xt.processing,"proj:":Xt.projection,"raster:":Xt.raster,"sar:":Xt.sar,"sat:":Xt.sat,"sci:":Xt.scientific,"view:":Xt.view,version:Xt.version,deprecated:Xt.version,published:Xt.timestamps,expires:Xt.timestamps,unpublished:Xt.timestamps},catalog:{},collection:{},item:{}};Jg.collection=Object.assign(Jg.collection,Jg.itemAndCollection);Jg.item=Object.assign(Jg.item,Jg.itemAndCollection);var uw={parseExtension(n){let e=n.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(e)return{id:e[1],version:e[2]};let t=n.match(/(\d+\.\d+(\.\d+)([a-z_.-][\w.-]+)?)/i);if(t)return{id:n,version:t[1]};if(n in Xt)return{id:n,version:"0.0.0"}}},Yn={version:gF,extensions:{},set(n){if(typeof n.stac_version!="string"?Yn.version="0.6.0":Yn.version=n.stac_version,Array.isArray(n.stac_extensions))for(let e of n.stac_extensions){let t=uw.parseExtension(e);t&&(Yn.extensions[t.id]=t.version)}},before(n,e=null){return Yn.compare("<",n,e)},compare(n,e,t=null){let r=t?Yn.extensions[t]:Yn.version;return typeof r>"u"?!1:dF.compare(r,e,n)}},Ae={type(n){let e=typeof n;if(e==="object"){if(n===null)return"null";if(Array.isArray(n))return"array"}return e},is(n,e){return Array.isArray(e)?e.includes(Ae.type(n)):Ae.type(n)===e},isDefined(n){return typeof n<"u"},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},rename(n,e,t){return typeof n[e]<"u"&&typeof n[t]>"u"?(n[t]=n[e],delete n[e],!0):!1},copy(n,e,t){return typeof n[e]<"u"&&typeof n[t]>"u"?(n[t]=n[e],!0):!1},forAll(n,e,t){if(n[e]&&typeof n[e]=="object")for(let r in n[e])t(n[e][r])},toArray(n,e){return typeof n[e]<"u"&&!Array.isArray(n[e])?(n[e]=[n[e]],!0):!1},flattenArray(n,e,t,r=!1){if(Array.isArray(n[e])){for(let i in n[e])if(typeof t[i]=="string"){let o=n[e][i];n[t[i]]=r?[o]:o}return delete n[e],!0}return!1},flattenOneElementArray(n,e,t=!1){return!t&&Array.isArray(n[e])?n[e].length===1?(n[e]=n[e][0],!0):!1:!0},removeFromArray(n,e,t){if(Array.isArray(n[e])){let r=n[e].indexOf(t);return r>-1&&n[e].splice(r,1),!0}return!1},pickFirst(n,e){return Array.isArray(n[e])&&n[e].length>0?(n[e]=n[e][0],!0):(delete n[e],!1)},ensure(n,e,t){return Ae.type(t)!==Ae.type(n[e])&&(n[e]=t),!0},upgradeExtension(n,e){let{id:t,version:r}=uw.parseExtension(e),i=n.stac_extensions.findIndex(o=>{let s=uw.parseExtension(o);return s&&s.id===t&&dF.compare(s.version,r,"<")});return i!==-1?(n.stac_extensions[i]=e,!0):!1},addExtension(n,e){let{id:t,version:r}=uw.parseExtension(e),i=n.stac_extensions.findIndex(o=>{if(o===e)return!0;let s=uw.parseExtension(o);return!!(s&&s.id===t&&dF.compare(s.version,r,"<"))});return i===-1?n.stac_extensions.push(e):n.stac_extensions[i]=e,n.stac_extensions.sort(),!0},removeExtension(n,e){return Ae.removeFromArray(n,"stac_extensions",e)},migrateExtensionShortnames(n){let e=Object.keys(Xt),t=Object.values(Xt);return Ae.mapValues(n,"stac_extensions",e,t)},populateExtensions(n,e){let t=[];(e=="catalog"||e=="collection")&&t.push(n),(e=="item"||e=="collection")&&Ae.isObject(n.assets)&&(t=t.concat(Object.values(n.assets))),e=="collection"&&Ae.isObject(n.item_assets)&&(t=t.concat(Object.values(n.item_assets))),e=="collection"&&Ae.isObject(n.summaries)&&t.push(n.summaries),e=="item"&&Ae.isObject(n.properties)&&t.push(n.properties),t.push(n.links);let r;for(;r=t.pop();)Object.keys(r).forEach(i=>{Array.isArray(r.bands)&&(t=t.concat(r.bands));let o=i.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(o)){let s=Jg[e][o[0]];Ae.is(s,"string")&&Ae.addExtension(n,s)}})},mapValues(n,e,t,r){let i=o=>{let s=t.indexOf(o);return s>=0?r[s]:o};return Array.isArray(n[e])?n[e]=n[e].map(i):typeof n[e]<"u"&&(n[e]=i(n[e])),!0},mapObject(n,e){for(let t in n)n[t]=e(n[t],t)},moveTo(n,e,t,r=!1,i=!1){let o;return r?i?o=s=>Array.isArray(s):o=s=>Array.isArray(s)&&s.length===1:o=Ae.isDefined,o(n[e])?(t[e]=r&&!i?n[e][0]:n[e],delete n[e],!0):!1},runAll(n,e,t,r){for(let i in n)i.startsWith("migrate")||n[i](e,t,r)},toUTC(n,e){if(Ae.is(n[e],"string"))try{return n[e]=this.toISOString(n[e]),!0}catch{}return delete n[e],!1},toISOString(n){return n instanceof Date||(n=new Date(n)),n.toISOString().replace(/\.0+(?=[-\+Z])/,"")},formatString(n,e,t){let r=i=>Ae.is(i,["string","number"])?t.replaceAll("{}",i):i;Array.isArray(n[e])?n[e]=n[e].map(r):n[e]=r(n[e])}},ih={multihash:null,hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))},uint8ToHex(n){return n.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")},toMultihash(n,e,t){if(!ih.multihash||!Ae.is(n[e],"string"))return!1;try{let r=ih.multihash.encode(ih.hexToUint8(n[e]),t);return n[e]=ih.uint8ToHex(r),!0}catch(r){return console.warn(r),!1}}},mF={migrate(n,e=!0){return Yn.set(n),e&&(n.stac_version=gF),n.type="Catalog",Ae.ensure(n,"stac_extensions",[]),Yn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"id",""),Ae.ensure(n,"description",""),Ae.ensure(n,"links",[]),Ae.runAll(mF,n,n),Yn.before("0.8.0")&&Ae.populateExtensions(n,"catalog"),n}},yF={migrate(n,e=!0){return mF.migrate(n,e),n.type="Collection",Yn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"license","other"),Ae.ensure(n,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),Ae.runAll(yF,n,n),Ae.isObject(n.properties)&&(Ae.removeFromArray(n,"stac_extensions","commons"),delete n.properties),Yn.before("0.8.0")&&Ae.populateExtensions(n,"collection"),Yn.before("1.0.0-beta.1")&&Ae.mapValues(n,"stac_extensions",["assets"],["item-assets"]),n},extent(n){if(Ae.ensure(n,"extent",{}),Yn.before("0.8.0")&&(Array.isArray(n.extent.spatial)&&(n.extent.spatial={bbox:[n.extent.spatial]}),Array.isArray(n.extent.temporal)&&(n.extent.temporal={interval:[n.extent.temporal]})),Ae.ensure(n.extent,"spatial",{}),Ae.ensure(n.extent.spatial,"bbox",[]),Ae.ensure(n.extent,"temporal",{}),Ae.ensure(n.extent.temporal,"interval",[]),Yn.before("1.0.0-rc.3")){if(n.extent.temporal.interval.length>1){let e,t;for(let r of n.extent.temporal.interval){if(r[0]===null)e=null;else if(typeof r[0]=="string"&&e!==null)try{let i=new Date(r[0]);(typeof e>"u"||i<e)&&(e=i)}catch{}if(r[1]===null)t=null;else if(typeof r[1]=="string"&&t!==null)try{let i=new Date(r[1]);(typeof t>"u"||i>t)&&(t=i)}catch{}}n.extent.temporal.interval.unshift([e?Ae.toISOString(e):null,t?Ae.toISOString(t):null])}if(n.extent.spatial.bbox.length>1){let e=n.extent.spatial.bbox.reduce((t,r)=>Array.isArray(r)?Math.max(r.length,t):t,4);if(e>=4){let t=new Array(e).fill(null),r=e/2;for(let i of n.extent.spatial.bbox){if(!Array.isArray(i)||i.length<4)break;for(let o in i){let s=i[o];t[o]===null?t[o]=s:o<r?t[o]=Math.min(s,t[o]):t[o]=Math.max(s,t[o])}}t.findIndex(i=>i===null)===-1&&n.extent.spatial.bbox.unshift(t)}}}},collectionAssets(n){Yn.before("1.0.0-rc.1")&&Ae.removeExtension(n,"collection-assets"),cw.migrateAll(n)},itemAsset(n){Yn.before("1.0.0-beta.2")&&Ae.rename(n,"item_assets","assets"),Ae.removeExtension(n,Xt["item-assets"]),cw.migrateAll(n,"item_assets")},summaries(n){if(Ae.ensure(n,"summaries",{}),Yn.before("0.8.0")&&Ae.isObject(n.other_properties)){for(let e in n.other_properties){let t=n.other_properties[e];Array.isArray(t.extent)&&t.extent.length===2?n.summaries[e]={minimum:t.extent[0],maximum:t.extent[1]}:Array.isArray(t.values)&&(t.values.filter(r=>Array.isArray(r)).length===t.values.length?n.summaries[e]=t.values.reduce((r,i)=>r.concat(i),[]):n.summaries[e]=t.values)}delete n.other_properties}if(Yn.before("1.0.0-beta.1")&&Ae.isObject(n.properties)&&!n.links.find(e=>["child","item"].includes(e.rel)))for(let e in n.properties){let t=n.properties[e];Array.isArray(t)||(t=[t]),n.summaries[e]=t}Yn.before("1.0.0-rc.1")&&Ae.mapObject(n.summaries,e=>(Ae.rename(e,"min","minimum"),Ae.rename(e,"max","maximum"),e)),hw.migrate(n.summaries,n,!0),Ae.moveTo(n.summaries,"sci:doi",n,!0)&&Ae.addExtension(n,Xt.scientific),Ae.moveTo(n.summaries,"sci:publications",n,!0,!0)&&Ae.addExtension(n,Xt.scientific),Ae.moveTo(n.summaries,"sci:citation",n,!0)&&Ae.addExtension(n,Xt.scientific),Ae.moveTo(n.summaries,"cube:dimensions",n,!0)&&Ae.addExtension(n,Xt.datacube),Object.keys(n.summaries).length===0&&delete n.summaries}},_F={migrate(n,e=null,t=!0){Yn.set(n),t&&(n.stac_version=gF),Ae.ensure(n,"stac_extensions",[]),Yn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"id",""),Ae.ensure(n,"type","Feature"),Ae.isObject(n.geometry)||(n.geometry=null),n.geometry!==null&&Ae.ensure(n,"bbox",[]),Ae.ensure(n,"properties",{}),Ae.ensure(n,"links",[]),Ae.ensure(n,"assets",{});let r=!1;return Ae.isObject(e)&&Ae.isObject(e.properties)&&(Ae.removeFromArray(n,"stac_extensions","commons"),n.properties=Object.assign({},e.properties,n.properties),r=!0),Ae.runAll(_F,n,n),hw.migrate(n.properties,n),cw.migrateAll(n),(Yn.before("0.8.0")||r)&&Ae.populateExtensions(n,"item"),n}},jK={migrate(n,e=!0){return Ae.ensure(n,"collections",[]),Ae.ensure(n,"links",[]),Ae.runAll(jK,n,n),n.collections=n.collections.map(t=>yF.migrate(t,e)),n}},UK={migrate(n,e=!0){return Ae.ensure(n,"type","FeatureCollection"),Ae.ensure(n,"features",[]),Ae.ensure(n,"links",[]),Ae.runAll(UK,n,n),n.features=n.features.map(t=>_F.migrate(t,null,e)),n}},cw={migrateAll(n,e="assets"){for(let t in n[e])cw.migrate(n[e][t],n)},migrate(n,e){return Ae.runAll(cw,n,e),hw.migrate(n,e),n},mediaTypes(n){Ae.is(n.type,"string")&&Ae.mapValues(n,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])}},pF={migrateAll(n,e){if(Yn.before("1.0.0")){let t=Ae.isObject(e.properties)&&Array.isArray(e.properties.bands)?e.properties.bands:[];if(Array.isArray(n["eo:bands"]))for(let r in n["eo:bands"]){let i=n["eo:bands"][r];Ae.is(i,"number")&&Ae.isObject(t[i])&&(i=t[i]),Ae.isObject(i)||(i={}),n["eo:bands"][r]=i}}if(Yn.before("1.1.0-beta.1")&&(Array.isArray(n["raster:bands"])||Array.isArray(n["eo:bands"]))){Ae.ensure(n,"bands",[]);let t=n["raster:bands"]||[],r=n["eo:bands"]||[],i=Math.max(t.length,r.length);for(let o=0;o<i;o++)Ae.ensure(n.bands,o,{}),Object.assign(n.bands[o],t[o],r[o]),n.bands[o]=pF.migrate(n.bands[o],e);delete n["raster:bands"],delete n["eo:bands"]}},migrate(n,e){return Ae.runAll(pF,n,e),hw.migrate(n,e),n},eo(n){Yn.before("2.0.0-beta.1","eo")&&(Ae.rename(n,"common_name","eo:common_name"),Ae.rename(n,"center_wavelength","eo:center_wavelength"),Ae.rename(n,"full_width_half_max","eo:full_width_half_max"),Ae.rename(n,"solar_illumination","eo:solar_illumination"))},raster(n){Yn.before("2.0.0-beta.1","raster")&&(Ae.rename(n,"sampling","raster:sampling"),Ae.rename(n,"bits_per_sample","raster:bits_per_sample"),Ae.rename(n,"spatial_resolution","raster:spatial_resolution"),Ae.rename(n,"scale","raster:scale"),Ae.rename(n,"offset","raster:offset"),Ae.rename(n,"histogram","raster:histogram"))}},hw={migrate(n,e,t=!1){return Ae.runAll(hw,n,e,t),n},_commonMetadata(n,e){Yn.before("1.0.0-rc.3")&&(Ae.toUTC(n,"created"),Ae.toUTC(n,"updated")),pF.migrateAll(n,e)},_timestamps(n,e){Ae.toUTC(n,"published"),Ae.toUTC(n,"expires"),Ae.toUTC(n,"unpublished"),Ae.upgradeExtension(e,Xt.timestamps)},_versioningIndicator(n,e){Ae.upgradeExtension(e,Xt.version)},checksum(n,e){Yn.before("0.9.0")&&ih.multihash&&(Ae.rename(n,"checksum:md5","checksum:multihash")&&ih.toMultihash(n,"checksum:multihash","md5"),Ae.rename(n,"checksum:sha1","checksum:multihash")&&ih.toMultihash(n,"checksum:multihash","sha1"),Ae.rename(n,"checksum:sha2","checksum:multihash")&&ih.toMultihash(n,"checksum:multihash","sha2-256"),Ae.rename(n,"checksum:sha3","checksum:multihash")&&ih.toMultihash(n,"checksum:multihash","sha3-256")),Yn.before("1.0.0-rc.1")&&Ae.rename(n,"checksum:multihash","file:checksum")&&Ae.addExtension(e,Xt.file),Ae.removeExtension(e,"checksum")},classification(n,e){Yn.before("1.1.0","classification")&&Ae.forAll(n,"classification:classes",t=>Ae.rename(t,"color-hint","color_hint")),Yn.before("2.0.0","classification")&&Ae.forAll(n,"classification:classes",t=>Ae.ensure(t,"name",t.description)),Ae.upgradeExtension(e,Xt.classification)},cube(n,e){Ae.upgradeExtension(e,Xt.datacube)},dtr(n,e){Yn.before("0.9.0")&&(Ae.rename(n,"dtr:start_datetime","start_datetime"),Ae.rename(n,"dtr:end_datetime","end_datetime"),Ae.removeExtension(e,"datetime-range"))},eo(n,e){Yn.before("0.9.0")&&(Ae.rename(n,"eo:epsg","proj:epsg")&&Ae.addExtension(e,Xt.projection),Ae.rename(n,"eo:platform","platform"),Ae.rename(n,"eo:instrument","instruments")&&Ae.toArray(n,"instruments"),Ae.rename(n,"eo:constellation","constellation"),Ae.rename(n,"eo:off_nadir","view:off_nadir")&&Ae.addExtension(e,Xt.view),Ae.rename(n,"eo:azimuth","view:azimuth")&&Ae.addExtension(e,Xt.view),Ae.rename(n,"eo:incidence_angle","view:incidence_angle")&&Ae.addExtension(e,Xt.view),Ae.rename(n,"eo:sun_azimuth","view:sun_azimuth")&&Ae.addExtension(e,Xt.view),Ae.rename(n,"eo:sun_elevation","view:sun_elevation")&&Ae.addExtension(e,Xt.view)),Yn.before("1.0.0-beta.1")&&Ae.rename(n,"eo:gsd","gsd"),Ae.upgradeExtension(e,Xt.eo)},file(n,e,t){Ae.rename(n,"file:bits_per_sample","raster:bits_per_sample")&&Ae.addExtension(e,Xt.raster),Ae.rename(n,"file:data_type","data_type"),Ae.rename(n,"file:unit","unit"),Array.isArray(n["file:nodata"])&&n["file:nodata"].length>1&&Ae.copy(n,"file:nodata","nodata:values"),Ae.rename(n,"file:nodata","nodata")&&!t&&Ae.pickFirst(n,"nodata"),Ae.upgradeExtension(e,Xt.file)},label(n,e){Yn.before("0.8.0")&&(Ae.rename(n,"label:property","label:properties"),Ae.rename(n,"label:task","label:tasks"),Ae.rename(n,"label:overview","label:overviews")&&Ae.toArray(n,"label:overviews"),Ae.rename(n,"label:method","label:methods"),Ae.toArray(n,"label:classes")),Ae.upgradeExtension(e,Xt.label)},pc(n,e){Yn.before("0.8.0")&&Ae.rename(n,"pc:schema","pc:schemas"),Ae.upgradeExtension(e,Xt.pointcloud)},processing(n,e){Ae.upgradeExtension(e,Xt.processing)},proj(n,e){Ae.rename(n,"proj:epsg","proj:code")&&Ae.formatString(n,"proj:code","EPSG:{}"),Ae.upgradeExtension(e,Xt.projection)},raster(n,e){Ae.upgradeExtension(e,Xt.raster)},sar(n,e,t){Ae.rename(n,"sar:incidence_angle","view:incidence_angle")&&Ae.addExtension(e,Xt.view),Ae.rename(n,"sar:pass_direction","sat:orbit_state")&&Ae.mapValues(n,"sat:orbit_state",[null],["geostationary"])&&Ae.addExtension(e,Xt.sat),Yn.before("0.7.0")&&(Ae.flattenArray(n,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],t),Ae.flattenArray(n,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],t),Ae.flattenArray(n,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],t),Ae.rename(n,"sar:off_nadir","view:off_nadir")&&Ae.addExtension(e,Xt.view)),Yn.before("0.9.0")&&(Ae.rename(n,"sar:platform","platform"),Ae.rename(n,"sar:instrument","instruments")&&Ae.toArray(n,"instruments"),Ae.rename(n,"sar:constellation","constellation"),Ae.rename(n,"sar:type","sar:product_type"),Ae.rename(n,"sar:polarization","sar:polarizations"),Ae.flattenOneElementArray(n,"sar:absolute_orbit",t)&&Ae.rename(n,"sar:absolute_orbit","sat:absolute_orbit")&&Ae.addExtension(e,Xt.sat),Ae.flattenOneElementArray(n,"sar:relative_orbit",t)&&Ae.rename(n,"sar:relative_orbit","sat:relative_orbit")&&Ae.addExtension(e,Xt.sat)),Ae.upgradeExtension(e,Xt.sar)},sat(n,e){Yn.before("0.9.0")&&(Ae.rename(n,"sat:off_nadir_angle","sat:off_nadir"),Ae.rename(n,"sat:azimuth_angle","sat:azimuth"),Ae.rename(n,"sat:sun_azimuth_angle","sat:sun_azimuth"),Ae.rename(n,"sat:sun_elevation_angle","sat:sun_elevation")),Ae.upgradeExtension(e,Xt.sat)},sci(n,e){Ae.upgradeExtension(e,Xt.scientific)},item(n){Yn.before("0.8.0")&&(Ae.rename(n,"item:license","license"),Ae.rename(n,"item:providers","providers"))},table(n,e){Ae.upgradeExtension(e,Xt.table)},view(n,e){Ae.upgradeExtension(e,Xt.view)}},w_={item(n,e=null,t=!0){return _F.migrate(n,e,t)},catalog(n,e=!0){return mF.migrate(n,e)},collection(n,e=!0){return yF.migrate(n,e)},collectionCollection(n,e=!0){return jK.migrate(n,e)},itemCollection(n,e=!0){return UK.migrate(n,e)},stac(n,e=!0){return n.type==="Feature"?w_.item(n,null,e):n.type==="FeatureCollection"?w_.itemCollection(n,e):n.type==="Collection"||!n.type&&Ae.isDefined(n.extent)&&Ae.isDefined(n.license)?w_.collection(n,e):!n.type&&Array.isArray(n.collections)?w_.collectionCollection(n,e):w_.catalog(n,e)},enableMultihash(n){ih.multihash=n}};GK.exports=w_});var WK=_r((S_,C_)=>{"use strict";(function(n){var e=typeof S_=="object"&&S_&&!S_.nodeType&&S_,t=typeof C_=="object"&&C_&&!C_.nodeType&&C_,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(n=r);var i,o=2147483647,s=36,a=1,l=26,c=38,f=700,d=72,y=128,p="-",_=/^xn--/,x=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=s-a,A=Math.floor,N=String.fromCharCode,k;function W(q){throw new RangeError(S[q])}function X(q,K){for(var oe=q.length,_e=[];oe--;)_e[oe]=K(q[oe]);return _e}function Y(q,K){var oe=q.split("@"),_e="";oe.length>1&&(_e=oe[0]+"@",q=oe[1]),q=q.replace(b,".");var F=q.split("."),ee=X(F,K).join(".");return _e+ee}function $(q){for(var K=[],oe=0,_e=q.length,F,ee;oe<_e;)F=q.charCodeAt(oe++),F>=55296&&F<=56319&&oe<_e?(ee=q.charCodeAt(oe++),(ee&64512)==56320?K.push(((F&1023)<<10)+(ee&1023)+65536):(K.push(F),oe--)):K.push(F);return K}function V(q){return X(q,function(K){var oe="";return K>65535&&(K-=65536,oe+=N(K>>>10&1023|55296),K=56320|K&1023),oe+=N(K),oe}).join("")}function B(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:s}function v(q,K){return q+22+75*(q<26)-((K!=0)<<5)}function I(q,K,oe){var _e=0;for(q=oe?A(q/f):q>>1,q+=A(q/K);q>T*l>>1;_e+=s)q=A(q/T);return A(_e+(T+1)*q/(q+c))}function M(q){var K=[],oe=q.length,_e,F=0,ee=y,ce=d,pe,J,xe,Se,ve,re,He,G,be;for(pe=q.lastIndexOf(p),pe<0&&(pe=0),J=0;J<pe;++J)q.charCodeAt(J)>=128&&W("not-basic"),K.push(q.charCodeAt(J));for(xe=pe>0?pe+1:0;xe<oe;){for(Se=F,ve=1,re=s;xe>=oe&&W("invalid-input"),He=B(q.charCodeAt(xe++)),(He>=s||He>A((o-F)/ve))&&W("overflow"),F+=He*ve,G=re<=ce?a:re>=ce+l?l:re-ce,!(He<G);re+=s)be=s-G,ve>A(o/be)&&W("overflow"),ve*=be;_e=K.length+1,ce=I(F-Se,_e,Se==0),A(F/_e)>o-ee&&W("overflow"),ee+=A(F/_e),F%=_e,K.splice(F++,0,ee)}return V(K)}function j(q){var K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re=[],He,G,be,Ie;for(q=$(q),He=q.length,K=y,oe=0,ee=d,ce=0;ce<He;++ce)ve=q[ce],ve<128&&re.push(N(ve));for(_e=F=re.length,F&&re.push(p);_e<He;){for(pe=o,ce=0;ce<He;++ce)ve=q[ce],ve>=K&&ve<pe&&(pe=ve);for(G=_e+1,pe-K>A((o-oe)/G)&&W("overflow"),oe+=(pe-K)*G,K=pe,ce=0;ce<He;++ce)if(ve=q[ce],ve<K&&++oe>o&&W("overflow"),ve==K){for(J=oe,xe=s;Se=xe<=ee?a:xe>=ee+l?l:xe-ee,!(J<Se);xe+=s)Ie=J-Se,be=s-Se,re.push(N(v(Se+Ie%be,0))),J=A(Ie/be);re.push(N(v(J,0))),ee=I(oe,G,_e==F),oe=0,++_e}++oe,++K}return re.join("")}function Q(q){return Y(q,function(K){return _.test(K)?M(K.slice(4).toLowerCase()):K})}function Z(q){return Y(q,function(K){return x.test(K)?"xn--"+j(K):K})}if(i={version:"1.3.2",ucs2:{decode:$,encode:V},decode:M,encode:j,toASCII:Z,toUnicode:Q},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(C_.exports==e)t.exports=i;else for(k in i)i.hasOwnProperty(k)&&(e[k]=i[k]);else n.punycode=i})(S_)});var YK=_r(($K,sD)=>{"use strict";(function(n,e){"use strict";typeof sD=="object"&&sD.exports?sD.exports=e():typeof define=="function"&&define.amd?define(e):n.IPv6=e(n)})($K,function(n){"use strict";var e=n&&n.IPv6;function t(i){var o=i.toLowerCase(),s=o.split(":"),a=s.length,l=8;s[0]===""&&s[1]===""&&s[2]===""?(s.shift(),s.shift()):s[0]===""&&s[1]===""?s.shift():s[a-1]===""&&s[a-2]===""&&s.pop(),a=s.length,s[a-1].indexOf(".")!==-1&&(l=7);var c;for(c=0;c<a&&s[c]!=="";c++);if(c<l)for(s.splice(c,1,"0000");s.length<l;)s.splice(c,0,"0000");for(var f,d=0;d<l;d++){f=s[d].split("");for(var y=0;y<3&&(f[0]==="0"&&f.length>1);y++)f.splice(0,1);s[d]=f.join("")}var p=-1,_=0,x=0,b=-1,S=!1;for(d=0;d<l;d++)S?s[d]==="0"?x+=1:(S=!1,x>_&&(p=b,_=x)):s[d]==="0"&&(S=!0,b=d,x=1);x>_&&(p=b,_=x),_>1&&s.splice(p,_,""),a=s.length;var T="";for(s[0]===""&&(T=":"),d=0;d<a&&(T+=s[d],d!==a-1);d++)T+=":";return s[a-1]===""&&(T+=":"),T}function r(){return n.IPv6===this&&(n.IPv6=e),this}return{best:t,noConflict:r}})});var ZK=_r((XK,aD)=>{"use strict";(function(n,e){"use strict";typeof aD=="object"&&aD.exports?aD.exports=e():typeof define=="function"&&define.amd?define(e):n.SecondLevelDomains=e(n)})(XK,function(n){"use strict";var e=n&&n.SecondLevelDomains,t={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return!1;var o=r.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return!1;var s=t.list[r.slice(i+1)];return s?s.indexOf(" "+r.slice(o+1,i)+" ")>=0:!1},is:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return!1;var o=r.lastIndexOf(".",i-1);if(o>=0)return!1;var s=t.list[r.slice(i+1)];return s?s.indexOf(" "+r.slice(0,i)+" ")>=0:!1},get:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return null;var o=r.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return null;var s=t.list[r.slice(i+1)];return!s||s.indexOf(" "+r.slice(o+1,i)+" ")<0?null:r.slice(o+1)},noConflict:function(){return n.SecondLevelDomains===this&&(n.SecondLevelDomains=e),this}};return t})});var uD=_r((KK,lD)=>{"use strict";(function(n,e){"use strict";typeof lD=="object"&&lD.exports?lD.exports=e(WK(),YK(),ZK()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):n.URI=e(n.punycode,n.IPv6,n.SecondLevelDomains,n)})(KK,function(n,e,t,r){"use strict";var i=r&&r.URI;function o(v,I){var M=arguments.length>=1,j=arguments.length>=2;if(!(this instanceof o))return M?j?new o(v,I):new o(v):new o;if(v===void 0){if(M)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?v=location.href+"":v=""}if(v===null&&M)throw new TypeError("null is not a valid argument for URI");return this.href(v),I!==void 0?this.absoluteTo(I):this}function s(v){return/^[0-9]+$/.test(v)}o.version="1.19.11";var a=o.prototype,l=Object.prototype.hasOwnProperty;function c(v){return v.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(v){return v===void 0?"Undefined":String(Object.prototype.toString.call(v)).slice(8,-1)}function d(v){return f(v)==="Array"}function y(v,I){var M={},j,Q;if(f(I)==="RegExp")M=null;else if(d(I))for(j=0,Q=I.length;j<Q;j++)M[I[j]]=!0;else M[I]=!0;for(j=0,Q=v.length;j<Q;j++){var Z=M&&M[v[j]]!==void 0||!M&&I.test(v[j]);Z&&(v.splice(j,1),Q--,j--)}return v}function p(v,I){var M,j;if(d(I)){for(M=0,j=I.length;M<j;M++)if(!p(v,I[M]))return!1;return!0}var Q=f(I);for(M=0,j=v.length;M<j;M++)if(Q==="RegExp"){if(typeof v[M]=="string"&&v[M].match(I))return!0}else if(v[M]===I)return!0;return!1}function _(v,I){if(!d(v)||!d(I)||v.length!==I.length)return!1;v.sort(),I.sort();for(var M=0,j=v.length;M<j;M++)if(v[M]!==I[M])return!1;return!0}function x(v){var I=/^\/+|\/+$/g;return v.replace(I,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(v){if(!(!v||!v.nodeName)){var I=v.nodeName.toLowerCase();if(!(I==="input"&&v.type!=="image"))return o.domAttributes[I]}};function b(v){return escape(v)}function S(v){return encodeURIComponent(v).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}o.encode=S,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=S,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(v,I){var M=o.encode(v+"");return I===void 0&&(I=o.escapeQuerySpace),I?M.replace(/%20/g,"+"):M},o.decodeQuery=function(v,I){v+="",I===void 0&&(I=o.escapeQuerySpace);try{return o.decode(I?v.replace(/\+/g,"%20"):v)}catch{return v}};var T={encode:"encode",decode:"decode"},A,N=function(v,I){return function(M){try{return o[I](M+"").replace(o.characters[v][I].expression,function(j){return o.characters[v][I].map[j]})}catch{return M}}};for(A in T)o[A+"PathSegment"]=N("pathname",T[A]),o[A+"UrnPathSegment"]=N("urnpath",T[A]);var k=function(v,I,M){return function(j){var Q;M?Q=function(oe){return o[I](o[M](oe))}:Q=o[I];for(var Z=(j+"").split(v),q=0,K=Z.length;q<K;q++)Z[q]=Q(Z[q]);return Z.join(v)}};o.decodePath=k("/","decodePathSegment"),o.decodeUrnPath=k(":","decodeUrnPathSegment"),o.recodePath=k("/","encodePathSegment","decode"),o.recodeUrnPath=k(":","encodeUrnPathSegment","decode"),o.encodeReserved=N("reserved","encode"),o.parse=function(v,I){var M;return I||(I={preventInvalidHostname:o.preventInvalidHostname}),v=v.replace(o.leading_whitespace_expression,""),v=v.replace(o.ascii_tab_whitespace,""),M=v.indexOf("#"),M>-1&&(I.fragment=v.substring(M+1)||null,v=v.substring(0,M)),M=v.indexOf("?"),M>-1&&(I.query=v.substring(M+1)||null,v=v.substring(0,M)),v=v.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),v=v.replace(/^[/\\]{2,}/i,"//"),v.substring(0,2)==="//"?(I.protocol=null,v=v.substring(2),v=o.parseAuthority(v,I)):(M=v.indexOf(":"),M>-1&&(I.protocol=v.substring(0,M)||null,I.protocol&&!I.protocol.match(o.protocol_expression)?I.protocol=void 0:v.substring(M+1,M+3).replace(/\\/g,"/")==="//"?(v=v.substring(M+3),v=o.parseAuthority(v,I)):(v=v.substring(M+1),I.urn=!0))),I.path=v,I},o.parseHost=function(v,I){v||(v=""),v=v.replace(/\\/g,"/");var M=v.indexOf("/"),j,Q;if(M===-1&&(M=v.length),v.charAt(0)==="[")j=v.indexOf("]"),I.hostname=v.substring(1,j)||null,I.port=v.substring(j+2,M)||null,I.port==="/"&&(I.port=null);else{var Z=v.indexOf(":"),q=v.indexOf("/"),K=v.indexOf(":",Z+1);K!==-1&&(q===-1||K<q)?(I.hostname=v.substring(0,M)||null,I.port=null):(Q=v.substring(0,M).split(":"),I.hostname=Q[0]||null,I.port=Q[1]||null)}return I.hostname&&v.substring(M).charAt(0)!=="/"&&(M++,v="/"+v),I.preventInvalidHostname&&o.ensureValidHostname(I.hostname,I.protocol),I.port&&o.ensureValidPort(I.port),v.substring(M)||"/"},o.parseAuthority=function(v,I){return v=o.parseUserinfo(v,I),o.parseHost(v,I)},o.parseUserinfo=function(v,I){var M=v,j=v.indexOf("\\");j!==-1&&(v=v.replace(/\\/g,"/"));var Q=v.indexOf("/"),Z=v.lastIndexOf("@",Q>-1?Q:v.length-1),q;return Z>-1&&(Q===-1||Z<Q)?(q=v.substring(0,Z).split(":"),I.username=q[0]?o.decode(q[0]):null,q.shift(),I.password=q[0]?o.decode(q.join(":")):null,v=M.substring(Z+1)):(I.username=null,I.password=null),v},o.parseQuery=function(v,I){if(!v)return{};if(v=v.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!v)return{};for(var M={},j=v.split("&"),Q=j.length,Z,q,K,oe=0;oe<Q;oe++)Z=j[oe].split("="),q=o.decodeQuery(Z.shift(),I),K=Z.length?o.decodeQuery(Z.join("="),I):null,q!=="__proto__"&&(l.call(M,q)?((typeof M[q]=="string"||M[q]===null)&&(M[q]=[M[q]]),M[q].push(K)):M[q]=K);return M},o.build=function(v){var I="",M=!1;return v.protocol&&(I+=v.protocol+":"),!v.urn&&(I||v.hostname)&&(I+="//",M=!0),I+=o.buildAuthority(v)||"",typeof v.path=="string"&&(v.path.charAt(0)!=="/"&&M&&(I+="/"),I+=v.path),typeof v.query=="string"&&v.query&&(I+="?"+v.query),typeof v.fragment=="string"&&v.fragment&&(I+="#"+v.fragment),I},o.buildHost=function(v){var I="";if(v.hostname)o.ip6_expression.test(v.hostname)?I+="["+v.hostname+"]":I+=v.hostname;else return"";return v.port&&(I+=":"+v.port),I},o.buildAuthority=function(v){return o.buildUserinfo(v)+o.buildHost(v)},o.buildUserinfo=function(v){var I="";return v.username&&(I+=o.encode(v.username)),v.password&&(I+=":"+o.encode(v.password)),I&&(I+="@"),I},o.buildQuery=function(v,I,M){var j="",Q,Z,q,K;for(Z in v)if(Z!=="__proto__"&&l.call(v,Z))if(d(v[Z]))for(Q={},q=0,K=v[Z].length;q<K;q++)v[Z][q]!==void 0&&Q[v[Z][q]+""]===void 0&&(j+="&"+o.buildQueryParameter(Z,v[Z][q],M),I!==!0&&(Q[v[Z][q]+""]=!0));else v[Z]!==void 0&&(j+="&"+o.buildQueryParameter(Z,v[Z],M));return j.substring(1)},o.buildQueryParameter=function(v,I,M){return o.encodeQuery(v,M)+(I!==null?"="+o.encodeQuery(I,M):"")},o.addQuery=function(v,I,M){if(typeof I=="object")for(var j in I)l.call(I,j)&&o.addQuery(v,j,I[j]);else if(typeof I=="string"){if(v[I]===void 0){v[I]=M;return}else typeof v[I]=="string"&&(v[I]=[v[I]]);d(M)||(M=[M]),v[I]=(v[I]||[]).concat(M)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(v,I,M){if(typeof I=="object")for(var j in I)l.call(I,j)&&o.setQuery(v,j,I[j]);else if(typeof I=="string")v[I]=M===void 0?null:M;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(v,I,M){var j,Q,Z;if(d(I))for(j=0,Q=I.length;j<Q;j++)v[I[j]]=void 0;else if(f(I)==="RegExp")for(Z in v)I.test(Z)&&(v[Z]=void 0);else if(typeof I=="object")for(Z in I)l.call(I,Z)&&o.removeQuery(v,Z,I[Z]);else if(typeof I=="string")M!==void 0?f(M)==="RegExp"?!d(v[I])&&M.test(v[I])?v[I]=void 0:v[I]=y(v[I],M):v[I]===String(M)&&(!d(M)||M.length===1)?v[I]=void 0:d(v[I])&&(v[I]=y(v[I],M)):v[I]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(v,I,M,j){switch(f(I)){case"String":break;case"RegExp":for(var Q in v)if(l.call(v,Q)&&I.test(Q)&&(M===void 0||o.hasQuery(v,Q,M)))return!0;return!1;case"Object":for(var Z in I)if(l.call(I,Z)&&!o.hasQuery(v,Z,I[Z]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(f(M)){case"Undefined":return I in v;case"Boolean":var q=!!(d(v[I])?v[I].length:v[I]);return M===q;case"Function":return!!M(v[I],I,v);case"Array":if(!d(v[I]))return!1;var K=j?p:_;return K(v[I],M);case"RegExp":return d(v[I])?j?p(v[I],M):!1:!!(v[I]&&v[I].match(M));case"Number":M=String(M);case"String":return d(v[I])?j?p(v[I],M):!1:v[I]===M;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var v=[],I=[],M=0,j=0;j<arguments.length;j++){var Q=new o(arguments[j]);v.push(Q);for(var Z=Q.segment(),q=0;q<Z.length;q++)typeof Z[q]=="string"&&I.push(Z[q]),Z[q]&&M++}if(!I.length||!M)return new o("");var K=new o("").segment(I);return(v[0].path()===""||v[0].path().slice(0,1)==="/")&&K.path("/"+K.path()),K.normalize()},o.commonPath=function(v,I){var M=Math.min(v.length,I.length),j;for(j=0;j<M;j++)if(v.charAt(j)!==I.charAt(j)){j--;break}return j<1?v.charAt(0)===I.charAt(0)&&v.charAt(0)==="/"?"/":"":((v.charAt(j)!=="/"||I.charAt(j)!=="/")&&(j=v.substring(0,j).lastIndexOf("/")),v.substring(0,j+1))},o.withinString=function(v,I,M){M||(M={});var j=M.start||o.findUri.start,Q=M.end||o.findUri.end,Z=M.trim||o.findUri.trim,q=M.parens||o.findUri.parens,K=/[a-z0-9-]=["']?$/i;for(j.lastIndex=0;;){var oe=j.exec(v);if(!oe)break;var _e=oe.index;if(M.ignoreHtml){var F=v.slice(Math.max(_e-3,0),_e);if(F&&K.test(F))continue}for(var ee=_e+v.slice(_e).search(Q),ce=v.slice(_e,ee),pe=-1;;){var J=q.exec(ce);if(!J)break;var xe=J.index+J[0].length;pe=Math.max(pe,xe)}if(pe>-1?ce=ce.slice(0,pe)+ce.slice(pe).replace(Z,""):ce=ce.replace(Z,""),!(ce.length<=oe[0].length)&&!(M.ignore&&M.ignore.test(ce))){ee=_e+ce.length;var Se=I(ce,_e,ee,v);if(Se===void 0){j.lastIndex=ee;continue}Se=String(Se),v=v.slice(0,_e)+Se+v.slice(ee),j.lastIndex=_e+Se.length}}return j.lastIndex=0,v},o.ensureValidHostname=function(v,I){var M=!!v,j=!!I,Q=!1;if(j&&(Q=p(o.hostProtocols,I)),Q&&!M)throw new TypeError("Hostname cannot be empty, if protocol is "+I);if(v&&v.match(o.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(n.toASCII(v).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(v){if(v){var I=Number(v);if(!(s(I)&&I>0&&I<65536))throw new TypeError('Port "'+v+'" is not a valid port')}},o.noConflict=function(v){if(v){var I={URI:this.noConflict()};return r.URITemplate&&typeof r.URITemplate.noConflict=="function"&&(I.URITemplate=r.URITemplate.noConflict()),r.IPv6&&typeof r.IPv6.noConflict=="function"&&(I.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict=="function"&&(I.SecondLevelDomains=r.SecondLevelDomains.noConflict()),I}else r.URI===this&&(r.URI=i);return this},a.build=function(v){return v===!0?this._deferred_build=!0:(v===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new o(this)},a.valueOf=a.toString=function(){return this.build(!1)._string};function W(v){return function(I,M){return I===void 0?this._parts[v]||"":(this._parts[v]=I||null,this.build(!M),this)}}function X(v,I){return function(M,j){return M===void 0?this._parts[v]||"":(M!==null&&(M=M+"",M.charAt(0)===I&&(M=M.substring(1))),this._parts[v]=M,this.build(!j),this)}}a.protocol=W("protocol"),a.username=W("username"),a.password=W("password"),a.hostname=W("hostname"),a.port=W("port"),a.query=X("query","?"),a.fragment=X("fragment","#"),a.search=function(v,I){var M=this.query(v,I);return typeof M=="string"&&M.length?"?"+M:M},a.hash=function(v,I){var M=this.fragment(v,I);return typeof M=="string"&&M.length?"#"+M:M},a.pathname=function(v,I){if(v===void 0||v===!0){var M=this._parts.path||(this._parts.hostname?"/":"");return v?(this._parts.urn?o.decodeUrnPath:o.decodePath)(M):M}else return this._parts.urn?this._parts.path=v?o.recodeUrnPath(v):"":this._parts.path=v?o.recodePath(v):"/",this.build(!I),this},a.path=a.pathname,a.href=function(v,I){var M;if(v===void 0)return this.toString();this._string="",this._parts=o._parts();var j=v instanceof o,Q=typeof v=="object"&&(v.hostname||v.path||v.pathname);if(v.nodeName){var Z=o.getDomAttribute(v);v=v[Z]||"",Q=!1}if(!j&&Q&&v.pathname!==void 0&&(v=v.toString()),typeof v=="string"||v instanceof String)this._parts=o.parse(String(v),this._parts);else if(j||Q){var q=j?v._parts:v;for(M in q)M!=="query"&&l.call(this._parts,M)&&(this._parts[M]=q[M]);q.query&&this.query(q.query,!1)}else throw new TypeError("invalid input");return this.build(!I),this},a.is=function(v){var I=!1,M=!1,j=!1,Q=!1,Z=!1,q=!1,K=!1,oe=!this._parts.urn;switch(this._parts.hostname&&(oe=!1,M=o.ip4_expression.test(this._parts.hostname),j=o.ip6_expression.test(this._parts.hostname),I=M||j,Q=!I,Z=Q&&t&&t.has(this._parts.hostname),q=Q&&o.idn_expression.test(this._parts.hostname),K=Q&&o.punycode_expression.test(this._parts.hostname)),v.toLowerCase()){case"relative":return oe;case"absolute":return!oe;case"domain":case"name":return Q;case"sld":return Z;case"ip":return I;case"ip4":case"ipv4":case"inet4":return M;case"ip6":case"ipv6":case"inet6":return j;case"idn":return q;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return K}return null};var Y=a.protocol,$=a.port,V=a.hostname;a.protocol=function(v,I){if(v&&(v=v.replace(/:(\/\/)?$/,""),!v.match(o.protocol_expression)))throw new TypeError('Protocol "'+v+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return Y.call(this,v,I)},a.scheme=a.protocol,a.port=function(v,I){return this._parts.urn?v===void 0?"":this:(v!==void 0&&(v===0&&(v=null),v&&(v+="",v.charAt(0)===":"&&(v=v.substring(1)),o.ensureValidPort(v))),$.call(this,v,I))},a.hostname=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v!==void 0){var M={preventInvalidHostname:this._parts.preventInvalidHostname},j=o.parseHost(v,M);if(j!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');v=M.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(v,this._parts.protocol)}return V.call(this,v,I)},a.origin=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var M=this.protocol(),j=this.authority();return j?(M?M+"://":"")+this.authority():""}else{var Q=o(v);return this.protocol(Q.protocol()).authority(Q.authority()).build(!I),this}},a.host=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var M=o.parseHost(v,this._parts);if(M!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},a.authority=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var M=o.parseAuthority(v,this._parts);if(M!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},a.userinfo=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var M=o.buildUserinfo(this._parts);return M&&M.substring(0,M.length-1)}else return v[v.length-1]!=="@"&&(v+="@"),o.parseUserinfo(v,this._parts),this.build(!I),this},a.resource=function(v,I){var M;return v===void 0?this.path()+this.search()+this.hash():(M=o.parse(v),this._parts.path=M.path,this._parts.query=M.query,this._parts.fragment=M.fragment,this.build(!I),this)},a.subdomain=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,M)||""}else{var j=this._parts.hostname.length-this.domain().length,Q=this._parts.hostname.substring(0,j),Z=new RegExp("^"+c(Q));if(v&&v.charAt(v.length-1)!=="."&&(v+="."),v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return v&&o.ensureValidHostname(v,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Z,v),this.build(!I),this}},a.domain=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(I=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.match(/\./g);if(M&&M.length<2)return this._parts.hostname;var j=this._parts.hostname.length-this.tld(I).length-1;return j=this._parts.hostname.lastIndexOf(".",j-1)+1,this._parts.hostname.substring(j)||""}else{if(!v)throw new TypeError("cannot set domain empty");if(v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(v,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=v;else{var Q=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(Q,v)}return this.build(!I),this}},a.tld=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(I=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.lastIndexOf("."),j=this._parts.hostname.substring(M+1);return I!==!0&&t&&t.list[j.toLowerCase()]&&t.get(this._parts.hostname)||j}else{var Q;if(v)if(v.match(/[^a-zA-Z0-9-]/))if(t&&t.is(v))Q=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Q,v);else throw new TypeError('TLD "'+v+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");Q=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Q,v)}else throw new TypeError("cannot set TLD empty");return this.build(!I),this}},a.directory=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var M=this._parts.path.length-this.filename().length-1,j=this._parts.path.substring(0,M)||(this._parts.hostname?"/":"");return v?o.decodePath(j):j}else{var Q=this._parts.path.length-this.filename().length,Z=this._parts.path.substring(0,Q),q=new RegExp("^"+c(Z));return this.is("relative")||(v||(v="/"),v.charAt(0)!=="/"&&(v="/"+v)),v&&v.charAt(v.length-1)!=="/"&&(v+="/"),v=o.recodePath(v),this._parts.path=this._parts.path.replace(q,v),this.build(!I),this}},a.filename=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v!="string"){if(!this._parts.path||this._parts.path==="/")return"";var M=this._parts.path.lastIndexOf("/"),j=this._parts.path.substring(M+1);return v?o.decodePathSegment(j):j}else{var Q=!1;v.charAt(0)==="/"&&(v=v.substring(1)),v.match(/\.?\//)&&(Q=!0);var Z=new RegExp(c(this.filename())+"$");return v=o.recodePath(v),this._parts.path=this._parts.path.replace(Z,v),Q?this.normalizePath(I):this.build(!I),this}},a.suffix=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path||this._parts.path==="/")return"";var M=this.filename(),j=M.lastIndexOf("."),Q,Z;return j===-1?"":(Q=M.substring(j+1),Z=/^[a-z0-9%]+$/i.test(Q)?Q:"",v?o.decodePathSegment(Z):Z)}else{v.charAt(0)==="."&&(v=v.substring(1));var q=this.suffix(),K;if(q)v?K=new RegExp(c(q)+"$"):K=new RegExp(c("."+q)+"$");else{if(!v)return this;this._parts.path+="."+o.recodePath(v)}return K&&(v=o.recodePath(v),this._parts.path=this._parts.path.replace(K,v)),this.build(!I),this}},a.segment=function(v,I,M){var j=this._parts.urn?":":"/",Q=this.path(),Z=Q.substring(0,1)==="/",q=Q.split(j);if(v!==void 0&&typeof v!="number"&&(M=I,I=v,v=void 0),v!==void 0&&typeof v!="number")throw new Error('Bad segment "'+v+'", must be 0-based integer');if(Z&&q.shift(),v<0&&(v=Math.max(q.length+v,0)),I===void 0)return v===void 0?q:q[v];if(v===null||q[v]===void 0)if(d(I)){q=[];for(var K=0,oe=I.length;K<oe;K++)!I[K].length&&(!q.length||!q[q.length-1].length)||(q.length&&!q[q.length-1].length&&q.pop(),q.push(x(I[K])))}else(I||typeof I=="string")&&(I=x(I),q[q.length-1]===""?q[q.length-1]=I:q.push(I));else I?q[v]=x(I):q.splice(v,1);return Z&&q.unshift(""),this.path(q.join(j),M)},a.segmentCoded=function(v,I,M){var j,Q,Z;if(typeof v!="number"&&(M=I,I=v,v=void 0),I===void 0){if(j=this.segment(v,I,M),!d(j))j=j!==void 0?o.decode(j):void 0;else for(Q=0,Z=j.length;Q<Z;Q++)j[Q]=o.decode(j[Q]);return j}if(!d(I))I=typeof I=="string"||I instanceof String?o.encode(I):I;else for(Q=0,Z=I.length;Q<Z;Q++)I[Q]=o.encode(I[Q]);return this.segment(v,I,M)};var B=a.query;return a.query=function(v,I){if(v===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="function"){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),j=v.call(this,M);return this._parts.query=o.buildQuery(j||M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this}else return v!==void 0&&typeof v!="string"?(this._parts.query=o.buildQuery(v,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this):B.call(this,v,I)},a.setQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="string"||v instanceof String)j[v]=I!==void 0?I:null;else if(typeof v=="object")for(var Q in v)l.call(v,Q)&&(j[Q]=v[Q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.addQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(j,v,I===void 0?null:I),this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.removeQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(j,v,I),this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.hasQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(j,v,I,M)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(v){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!v)),this},a.normalizeHostname=function(v){return this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!v)),this},a.normalizePort=function(v){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!v)),this},a.normalizePath=function(v){var I=this._parts.path;if(!I)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!v),this;if(this._parts.path==="/")return this;I=o.recodePath(I);var M,j="",Q,Z;for(I.charAt(0)!=="/"&&(M=!0,I="/"+I),(I.slice(-3)==="/.."||I.slice(-2)==="/.")&&(I+="/"),I=I.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),M&&(j=I.substring(1).match(/^(\.\.\/)+/)||"",j&&(j=j[0]));Q=I.search(/\/\.\.(\/|$)/),Q!==-1;){if(Q===0){I=I.substring(3);continue}Z=I.substring(0,Q).lastIndexOf("/"),Z===-1&&(Z=Q),I=I.substring(0,Z)+I.substring(Q+3)}return M&&this.is("relative")&&(I=j+I.substring(1)),this._parts.path=I,this.build(!v),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(v){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!v)),this},a.normalizeFragment=function(v){return this._parts.fragment||(this._parts.fragment=null,this.build(!v)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var v=o.encode,I=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=v,o.decode=I}return this},a.unicode=function(){var v=o.encode,I=o.decode;o.encode=S,o.decode=unescape;try{this.normalize()}finally{o.encode=v,o.decode=I}return this},a.readable=function(){var v=this.clone();v.username("").password("").normalize();var I="";if(v._parts.protocol&&(I+=v._parts.protocol+"://"),v._parts.hostname&&(v.is("punycode")&&n?(I+=n.toUnicode(v._parts.hostname),v._parts.port&&(I+=":"+v._parts.port)):I+=v.host()),v._parts.hostname&&v._parts.path&&v._parts.path.charAt(0)!=="/"&&(I+="/"),I+=v.path(!0),v._parts.query){for(var M="",j=0,Q=v._parts.query.split("&"),Z=Q.length;j<Z;j++){var q=(Q[j]||"").split("=");M+="&"+o.decodeQuery(q[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),q[1]!==void 0&&(M+="="+o.decodeQuery(q[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}I+="?"+M.substring(1)}return I+=o.decodeQuery(v.hash(),!0),I},a.absoluteTo=function(v){var I=this.clone(),M=["protocol","username","password","hostname","port"],j,Q,Z;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v instanceof o||(v=new o(v)),I._parts.protocol||(I._parts.protocol=v._parts.protocol,this._parts.hostname))return I;for(Q=0;Z=M[Q];Q++)I._parts[Z]=v._parts[Z];return I._parts.path?(I._parts.path.substring(-2)===".."&&(I._parts.path+="/"),I.path().charAt(0)!=="/"&&(j=v.directory(),j=j||(v.path().indexOf("/")===0?"/":""),I._parts.path=(j?j+"/":"")+I._parts.path,I.normalizePath())):(I._parts.path=v._parts.path,I._parts.query||(I._parts.query=v._parts.query)),I.build(),I},a.relativeTo=function(v){var I=this.clone().normalize(),M,j,Q,Z,q;if(I._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v=new o(v).normalize(),M=I._parts,j=v._parts,Z=I.path(),q=v.path(),Z.charAt(0)!=="/")throw new Error("URI is already relative");if(q.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(M.protocol===j.protocol&&(M.protocol=null),M.username!==j.username||M.password!==j.password||M.protocol!==null||M.username!==null||M.password!==null)return I.build();if(M.hostname===j.hostname&&M.port===j.port)M.hostname=null,M.port=null;else return I.build();if(Z===q)return M.path="",I.build();if(Q=o.commonPath(Z,q),!Q)return I.build();var K=j.path.substring(Q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return M.path=K+M.path.substring(Q.length)||"./",I.build()},a.equals=function(v){var I=this.clone(),M=new o(v),j={},Q={},Z={},q,K,oe;if(I.normalize(),M.normalize(),I.toString()===M.toString())return!0;if(q=I.query(),K=M.query(),I.query(""),M.query(""),I.toString()!==M.toString()||q.length!==K.length)return!1;j=o.parseQuery(q,this._parts.escapeQuerySpace),Q=o.parseQuery(K,this._parts.escapeQuerySpace);for(oe in j)if(l.call(j,oe)){if(d(j[oe])){if(!_(j[oe],Q[oe]))return!1}else if(j[oe]!==Q[oe])return!1;Z[oe]=!0}for(oe in Q)if(l.call(Q,oe)&&!Z[oe])return!1;return!0},a.preventInvalidHostname=function(v){return this._parts.preventInvalidHostname=!!v,this},a.duplicateQueryParameters=function(v){return this._parts.duplicateQueryParameters=!!v,this},a.escapeQuerySpace=function(v){return this._parts.escapeQuerySpace=!!v,this},o})});var zD;function Ww(){return zD}function xc(n){let e=zD;return zD=n,e}var V8=Symbol("NotFound");function Mm(n){return n===V8||n?.name==="\u0275NotFound"}var Hs=null,$w=!1,VD=1,QJ=null,_a=Symbol("SIGNAL");function fn(n){let e=Hs;return Hs=n,e}function Kw(){return Hs}var Ap={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Nm(n){if($w)throw new Error("");if(Hs===null)return;Hs.consumerOnSignalRead(n);let e=Hs.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Hs.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Hs.producers,t!==void 0&&t.producer===n)){Hs.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Hs&&(!r||tQ(i,Hs)))return;let o=km(Hs),s={producer:n,consumer:Hs,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Hs.producersTail=s,e!==void 0?e.nextProducer=s:Hs.producers=s,o&&$8(n,s)}function H8(){VD++}function Jw(n){if(!(km(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===VD)){if(!n.producerMustRecompute(n)&&!Lm(n)){Zw(n);return}n.producerRecomputeValue(n),Zw(n)}}function HD(n){if(n.consumers===void 0)return;let e=$w;$w=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||eQ(r)}}finally{$w=e}}function qD(){return Hs?.consumerAllowSignalWrites!==!1}function eQ(n){n.dirty=!0,HD(n),n.consumerMarkedDirty?.(n)}function Zw(n){n.dirty=!1,n.lastCleanEpoch=VD}function Rp(n){return n&&q8(n),fn(n)}function q8(n){n.producersTail=void 0,n.recomputing=!0}function Pm(n,e){fn(e),n&&W8(n)}function W8(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(km(n))do t=WD(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Lm(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Jw(t),r!==t.version))return!0}return!1}function Mp(n){if(km(n)){let e=n.producers;for(;e!==void 0;)e=WD(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function $8(n,e){let t=n.consumersTail,r=km(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)$8(i.producer,i)}function WD(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!km(e)){let o=e.producers;for(;o!==void 0;)o=WD(o)}return t}function km(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Qw(n){QJ?.(n)}function tQ(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function eE(n,e){return Object.is(n,e)}function tE(n,e){let t=Object.create(nQ);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Jw(t),Nm(t),t.value===W_)throw t.error;return t.value};return r[_a]=t,Qw(t),r}var Yw=Symbol("UNSET"),Xw=Symbol("COMPUTING"),W_=Symbol("ERRORED"),nQ=tn(dt({},Ap),{value:Yw,dirty:!0,error:null,equal:eE,kind:"computed",producerMustRecompute(n){return n.value===Yw||n.value===Xw},producerRecomputeValue(n){if(n.value===Xw)throw new Error("");let e=n.value;n.value=Xw;let t=Rp(n),r,i=!1;try{r=n.computation(),fn(null),i=e!==Yw&&e!==W_&&r!==W_&&n.equal(e,r)}catch(o){r=W_,n.error=o}finally{Pm(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function rQ(){throw new Error}var Y8=rQ;function X8(n){Y8(n)}function $D(n){Y8=n}var iQ=null;function YD(n,e){let t=Object.create(nE);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Z8(t);return r[_a]=t,Qw(t),[r,s=>Om(t,s),s=>XD(t,s)]}function Z8(n){return Nm(n),n.value}function Om(n,e){qD()||X8(n),n.equal(n.value,e)||(n.value=e,oQ(n))}function XD(n,e){qD()||X8(n),Om(n,e(n.value))}var nE=tn(dt({},Ap),{equal:eE,value:void 0,kind:"signal"});function oQ(n){n.version++,H8(),HD(n),iQ?.(n)}function Dn(n){return typeof n=="function"}function Fm(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rE=Fm(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Np(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var gr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Dn(r))try{r()}catch(o){e=o instanceof rE?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{K8(o)}catch(s){e=e??[],s instanceof rE?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rE(e)}}add(e){var t;if(e&&e!==this)if(this.closed)K8(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Np(t,e)}remove(e){let{_finalizers:t}=this;t&&Np(t,e),e instanceof n&&e._removeParent(this)}};gr.EMPTY=(()=>{let n=new gr;return n.closed=!0,n})();var ZD=gr.EMPTY;function iE(n){return n instanceof gr||n&&"closed"in n&&Dn(n.remove)&&Dn(n.add)&&Dn(n.unsubscribe)}function K8(n){Dn(n)?n():n.unsubscribe()}var ju={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Bm={setTimeout(n,e,...t){let{delegate:r}=Bm;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Bm;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function oE(n){Bm.setTimeout(()=>{let{onUnhandledError:e}=ju;if(e)e(n);else throw n})}function $_(){}var J8=KD("C",void 0,void 0);function Q8(n){return KD("E",void 0,n)}function e6(n){return KD("N",n,void 0)}function KD(n,e,t){return{kind:n,value:e,error:t}}var Pp=null;function jm(n){if(ju.useDeprecatedSynchronousErrorHandling){let e=!Pp;if(e&&(Pp={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Pp;if(Pp=null,t)throw r}}else n()}function t6(n){ju.useDeprecatedSynchronousErrorHandling&&Pp&&(Pp.errorThrown=!0,Pp.error=n)}var Lp=class extends gr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,iE(e)&&e.add(this)):this.destination=lQ}static create(e,t,r){return new Um(e,t,r)}next(e){this.isStopped?QD(e6(e),this):this._next(e)}error(e){this.isStopped?QD(Q8(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?QD(J8,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},sQ=Function.prototype.bind;function JD(n,e){return sQ.call(n,e)}var eA=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){sE(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){sE(r)}else sE(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){sE(t)}}},Um=class extends Lp{constructor(e,t,r){super();let i;if(Dn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ju.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&JD(e.next,o),error:e.error&&JD(e.error,o),complete:e.complete&&JD(e.complete,o)}):i=e}this.destination=new eA(i)}};function sE(n){ju.useDeprecatedSynchronousErrorHandling?t6(n):oE(n)}function aQ(n){throw n}function QD(n,e){let{onStoppedNotification:t}=ju;t&&Bm.setTimeout(()=>t(n,e))}var lQ={closed:!0,next:$_,error:aQ,complete:$_};var Gm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function va(n){return n}function tA(...n){return nA(n)}function nA(n){return n.length===0?va:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Hn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=cQ(t)?t:new Um(t,r,i);return jm(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=n6(r),new r((i,o)=>{let s=new Um({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Gm](){return this}pipe(...t){return nA(t)(this)}toPromise(t){return t=n6(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function n6(n){var e;return(e=n??ju.Promise)!==null&&e!==void 0?e:Promise}function uQ(n){return n&&Dn(n.next)&&Dn(n.error)&&Dn(n.complete)}function cQ(n){return n&&n instanceof Lp||uQ(n)&&iE(n)}function rA(n){return Dn(n?.lift)}function qn(n){return e=>{if(rA(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ln(n,e,t,r,i){return new iA(n,e,t,r,i)}var iA=class extends Lp{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function zm(){return qn((n,e)=>{let t=null;n._refCount++;let r=Ln(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Vm=class extends Hn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gr;let t=this.getSubject();e.add(this.source.subscribe(Ln(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gr.EMPTY)}return e}refCount(){return zm()(this)}};var Hm={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Hm;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new gr(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Hm;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Hm;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var r6=Fm(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var en=(()=>{class n extends Hn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new aE(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new r6}next(t){jm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){jm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){jm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ZD:(this.currentObservers=null,o.push(t),new gr(()=>{this.currentObservers=null,Np(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Hn;return t.source=this,t}}return n.create=(e,t)=>new aE(e,t),n})(),aE=class extends en{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ZD}};var Vo=class extends en{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var oA={now(){return(oA.delegate||Date).now()},delegate:void 0};var lE=class extends gr{constructor(e,t){super()}schedule(e,t=0){return this}};var Y_={setInterval(n,e,...t){let{delegate:r}=Y_;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Y_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var qm=class extends lE{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Y_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Y_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Np(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Wm=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wm.now=oA.now;var $m=class extends Wm{constructor(e,t=Wm.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wc=new $m(qm),sA=wc;var uE=class extends qm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Hm.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(Hm.cancelAnimationFrame(t),e._scheduled=void 0)}};var cE=class extends $m{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var hE=new cE(uE);var qs=new Hn(n=>n.complete());function fE(n){return n&&Dn(n.schedule)}function aA(n){return n[n.length-1]}function i6(n){return Dn(aA(n))?n.pop():void 0}function Ec(n){return fE(aA(n))?n.pop():void 0}function o6(n,e){return typeof aA(n)=="number"?n.pop():e}function a6(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(d){s(d)}}function l(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function s6(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function kp(n){return this instanceof kp?(this.v=n,this):new kp(n)}function l6(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){r[p]&&(i[p]=function(x){return new Promise(function(b,S){o.push([p,x,b,S])>1||l(p,x)})},_&&(i[p]=_(i[p])))}function l(p,_){try{c(r[p](_))}catch(x){y(o[0][3],x)}}function c(p){p.value instanceof kp?Promise.resolve(p.value.v).then(f,d):y(o[0][2],p)}function f(p){l("next",p)}function d(p){l("throw",p)}function y(p,_){p(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}function u6(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof s6=="function"?s6(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var dE=n=>n&&typeof n.length=="number"&&typeof n!="function";function pE(n){return Dn(n?.then)}function gE(n){return Dn(n[Gm])}function mE(n){return Symbol.asyncIterator&&Dn(n?.[Symbol.asyncIterator])}function yE(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _E=hQ();function vE(n){return Dn(n?.[_E])}function xE(n){return l6(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield kp(t.read());if(i)return yield kp(void 0);yield yield kp(r)}}finally{t.releaseLock()}})}function wE(n){return Dn(n?.getReader)}function Ti(n){if(n instanceof Hn)return n;if(n!=null){if(gE(n))return fQ(n);if(dE(n))return dQ(n);if(pE(n))return pQ(n);if(mE(n))return c6(n);if(vE(n))return gQ(n);if(wE(n))return mQ(n)}throw yE(n)}function fQ(n){return new Hn(e=>{let t=n[Gm]();if(Dn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dQ(n){return new Hn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function pQ(n){return new Hn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,oE)})}function gQ(n){return new Hn(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function c6(n){return new Hn(e=>{yQ(n,e).catch(t=>e.error(t))})}function mQ(n){return c6(xE(n))}function yQ(n,e){var t,r,i,o;return a6(this,void 0,void 0,function*(){try{for(t=u6(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ja(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function EE(n,e=0){return qn((t,r)=>{t.subscribe(Ln(r,i=>ja(r,n,()=>r.next(i),e),()=>ja(r,n,()=>r.complete(),e),i=>ja(r,n,()=>r.error(i),e)))})}function bE(n,e=0){return qn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function h6(n,e){return Ti(n).pipe(bE(e),EE(e))}function f6(n,e){return Ti(n).pipe(bE(e),EE(e))}function d6(n,e){return new Hn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function p6(n,e){return new Hn(t=>{let r;return ja(t,e,()=>{r=n[_E](),ja(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Dn(r?.return)&&r.return()})}function SE(n,e){if(!n)throw new Error("Iterable cannot be null");return new Hn(t=>{ja(t,e,()=>{let r=n[Symbol.asyncIterator]();ja(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function g6(n,e){return SE(xE(n),e)}function m6(n,e){if(n!=null){if(gE(n))return h6(n,e);if(dE(n))return d6(n,e);if(pE(n))return f6(n,e);if(mE(n))return SE(n,e);if(vE(n))return p6(n,e);if(wE(n))return g6(n,e)}throw yE(n)}function Xi(n,e){return e?m6(n,e):Ti(n)}function dn(...n){let e=Ec(n);return Xi(n,e)}function Ym(n,e){let t=Dn(n)?n:()=>n,r=i=>i.error(t());return new Hn(e?i=>e.schedule(r,0,i):r)}function CE(n){return!!n&&(n instanceof Hn||Dn(n.lift)&&Dn(n.subscribe))}var Th=Fm(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function y6(n){return n instanceof Date&&!isNaN(n)}function ar(n,e){return qn((t,r)=>{let i=0;t.subscribe(Ln(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:_Q}=Array;function vQ(n,e){return _Q(e)?n(...e):n(e)}function _6(n){return ar(e=>vQ(n,e))}var{isArray:xQ}=Array,{getPrototypeOf:wQ,prototype:EQ,keys:bQ}=Object;function v6(n){if(n.length===1){let e=n[0];if(xQ(e))return{args:e,keys:null};if(SQ(e)){let t=bQ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function SQ(n){return n&&typeof n=="object"&&wQ(n)===EQ}function x6(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function IE(...n){let e=Ec(n),t=i6(n),{args:r,keys:i}=v6(n);if(r.length===0)return Xi([],e);let o=new Hn(CQ(r,e,i?s=>x6(i,s):va));return t?o.pipe(_6(t)):o}function CQ(n,e,t=va){return r=>{w6(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)w6(e,()=>{let c=Xi(n[l],e),f=!1;c.subscribe(Ln(r,d=>{o[l]=d,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function w6(n,e,t){n?ja(t,n,e):e()}function E6(n,e,t,r,i,o,s,a){let l=[],c=0,f=0,d=!1,y=()=>{d&&!l.length&&!c&&e.complete()},p=x=>c<r?_(x):l.push(x),_=x=>{o&&e.next(x),c++;let b=!1;Ti(t(x,f++)).subscribe(Ln(e,S=>{i?.(S),o?p(S):e.next(S)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<r;){let S=l.shift();s?ja(e,s,()=>_(S)):_(S)}y()}catch(S){e.error(S)}}))};return n.subscribe(Ln(e,p,()=>{d=!0,y()})),()=>{a?.()}}function Ho(n,e,t=1/0){return Dn(e)?Ho((r,i)=>ar((o,s)=>e(r,o,i,s))(Ti(n(r,i))),t):(typeof e=="number"&&(t=e),qn((r,i)=>E6(r,i,n,t)))}function TE(n=1/0){return Ho(va,n)}function b6(){return TE(1)}function Xm(...n){return b6()(Xi(n,Ec(n)))}function X_(n){return new Hn(e=>{Ti(n()).subscribe(e)})}function Zm(n=0,e,t=sA){let r=-1;return e!=null&&(fE(e)?t=e:r=e),new Hn(i=>{let o=y6(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function lA(n=0,e=wc){return n<0&&(n=0),Zm(n,n,e)}function DE(...n){let e=Ec(n),t=o6(n,1/0),r=n;return r.length?r.length===1?Ti(r[0]):TE(t)(Xi(r,e)):qs}function Ws(n,e){return qn((t,r)=>{let i=0;t.subscribe(Ln(r,o=>n.call(e,o,i++)&&r.next(o)))})}function S6(n){return qn((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let c=i;i=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Ln(t,c=>{r=!0,i=c,o||Ti(n(c)).subscribe(o=Ln(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function AE(n,e=wc){return S6(()=>Zm(n,e))}function Kf(n){return qn((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ln(t,void 0,void 0,s=>{o=Ti(n(s,Kf(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function C6(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Ln(s,f=>{let d=c++;l=a?n(l,f,d):(a=!0,f),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Km(n,e){return Dn(e)?Ho(n,e,1):Ho(n,1)}function Jf(n){return qn((e,t)=>{let r=!1;e.subscribe(Ln(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Uu(n){return n<=0?()=>qs:qn((e,t)=>{let r=0;e.subscribe(Ln(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function RE(n,e=va){return n=n??IQ,qn((t,r)=>{let i,o=!0;t.subscribe(Ln(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function IQ(n,e){return n===e}function ME(n=TQ){return qn((e,t)=>{let r=!1;e.subscribe(Ln(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function TQ(){return new Th}function Z_(n){return qn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Dh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ws((i,o)=>n(i,o,r)):va,Uu(1),t?Jf(e):ME(()=>new Th))}function Jm(n){return n<=0?()=>qs:qn((e,t)=>{let r=[];e.subscribe(Ln(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function uA(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ws((i,o)=>n(i,o,r)):va,Jm(1),t?Jf(e):ME(()=>new Th))}function cA(n,e){return qn(C6(n,e,arguments.length>=2,!0))}function Qm(...n){let e=Ec(n);return qn((t,r)=>{(e?Xm(n,t,e):Xm(n,t)).subscribe(r)})}function vs(n,e){return qn((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ln(r,l=>{i?.unsubscribe();let c=0,f=o++;Ti(n(l,f)).subscribe(i=Ln(r,d=>r.next(e?e(l,d,f,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ah(n){return qn((e,t)=>{Ti(n).subscribe(Ln(t,()=>t.complete(),$_)),!t.closed&&e.subscribe(t)})}function So(n,e,t){let r=Dn(n)||e||t?{next:n,error:e,complete:t}:n;return r?qn((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ln(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):va}function I6(n,e){return qn((t,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,c=!1,f=()=>{l?.unsubscribe(),l=null,o&&(p(),c&&r.complete())},d=()=>{l=null,c&&r.complete()},y=_=>l=Ti(n(_)).subscribe(Ln(r,f,d)),p=()=>{if(s){s=!1;let _=a;a=null,r.next(_),!c&&y(_)}};t.subscribe(Ln(r,_=>{s=!0,a=_,!(l&&!l.closed)&&(i?p():y(_))},()=>{c=!0,!(o&&s&&l&&!l.closed)&&r.complete()}))})}function hA(n,e=wc,t){let r=Zm(n,e);return I6(()=>r,t)}function T6(n){let e=fn(null);try{return n()}finally{fn(e)}}var D6=tn(dt({},Ap),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function A6(n){if(n.dirty=!1,n.version>0&&!Lm(n))return;n.version++;let e=Rp(n);try{n.cleanup(),n.fn()}finally{Pm(n,e)}}var kE="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Lt=class extends Error{code;constructor(e,t){super(Up(e,t)),this.code=e}};function DQ(n){return`NG0${Math.abs(n)}`}function Up(n,e){return`${DQ(n)}${e?": "+e:""}`}var Gp=globalThis;function Fr(n){for(let e in n)if(n[e]===Fr)return e;throw Error("")}function Mh(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Mh).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function EA(n,e){return n?e?`${n} ${e}`:n:e||""}var AQ=Fr({__forward_ref__:Fr});function tv(n){return n.__forward_ref__=tv,n.toString=function(){return Mh(this())},n}function xs(n){return bA(n)?n():n}function bA(n){return typeof n=="function"&&n.hasOwnProperty(AQ)&&n.__forward_ref__===tv}function _t(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Nh(n){return{providers:n.providers||[],imports:n.imports||[]}}function nv(n){return RQ(n,OE)}function SA(n){return nv(n)!==null}function RQ(n,e){return n.hasOwnProperty(e)&&n[e]||null}function MQ(n){let e=n?.[OE]??null;return e||null}function dA(n){return n&&n.hasOwnProperty(PE)?n[PE]:null}var OE=Fr({\u0275prov:Fr}),PE=Fr({\u0275inj:Fr}),Ut=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=_t({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function CA(n){return n&&!!n.\u0275providers}var IA=Fr({\u0275cmp:Fr}),TA=Fr({\u0275dir:Fr}),DA=Fr({\u0275pipe:Fr}),AA=Fr({\u0275mod:Fr}),J_=Fr({\u0275fac:Fr}),zp=Fr({__NG_ELEMENT_ID__:Fr}),R6=Fr({__NG_ENV_ID__:Fr});function t0(n){return typeof n=="string"?n:n==null?"":String(n)}function N6(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():t0(n)}var P6=Fr({ngErrorCode:Fr}),NQ=Fr({ngErrorMessage:Fr}),PQ=Fr({ngTokenPath:Fr});function RA(n,e){return L6("",-200,e)}function FE(n,e){throw new Lt(-201,!1)}function L6(n,e,t){let r=new Lt(e,n);return r[P6]=e,r[NQ]=n,t&&(r[PQ]=t),r}function LQ(n){return n[P6]}var pA;function k6(){return pA}function xa(n){let e=pA;return pA=n,e}function MA(n,e,t){let r=nv(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;FE(n,"Injector")}var kQ={},Op=kQ,OQ="__NG_DI_FLAG__",gA=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Fp(t)||0;try{return this.injector.get(e,r&8?null:Op,r)}catch(i){if(Mm(i))return i;throw i}}};function FQ(n,e=0){let t=Ww();if(t===void 0)throw new Lt(-203,!1);if(t===null)return MA(n,void 0,e);{let r=BQ(e),i=t.retrieve(n,r);if(Mm(i)){if(r.optional)return null;throw i}return i}}function Wn(n,e=0){return(k6()||FQ)(xs(n),e)}function Me(n,e){return Wn(n,Fp(e))}function Fp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function BQ(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function mA(n){let e=[];for(let t=0;t<n.length;t++){let r=xs(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Lt(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=jQ(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(Wn(i,o))}else e.push(Wn(r))}return e}function jQ(n){return n[OQ]}function Qf(n,e){let t=n.hasOwnProperty(J_);return t?n[J_]:null}function O6(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function F6(n){return n.flat(Number.POSITIVE_INFINITY)}function BE(n,e){n.forEach(t=>Array.isArray(t)?BE(t,e):e(t))}function NA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rv(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function B6(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function j6(n,e,t){let r=n0(n,e);return r>=0?n[r|1]=t:(r=~r,B6(n,r,e,t)),r}function jE(n,e){let t=n0(n,e);if(t>=0)return n[t|1]}function n0(n,e){return UQ(n,e,1)}function UQ(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Vp={},Kl=[],Ph=new Ut(""),PA=new Ut("",-1),LA=new Ut(""),Q_=class{get(e,t=Op){if(t===Op){let i=L6("",-201);throw i.name="\u0275NotFound",i}return t}};function kA(n){return n[AA]||null}function Lh(n){return n[IA]||null}function OA(n){return n[TA]||null}function U6(n){return n[DA]||null}function Hp(n){return{\u0275providers:n}}function G6(n){return Hp([{provide:Ph,multi:!0,useValue:n}])}function z6(...n){return{\u0275providers:FA(!0,n),\u0275fromNgModule:!0}}function FA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return BE(e,s=>{let a=s;LE(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&V6(i,o),t}function V6(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];BA(i,o=>{e(o,r)})}}function LE(n,e,t,r){if(n=xs(n),!n)return!1;let i=null,o=dA(n),s=!o&&Lh(n);if(!o&&!s){let l=n.ngModule;if(o=dA(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)LE(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{BE(o.imports,f=>{LE(f,e,t,r)&&(c||=[],c.push(f))})}finally{}c!==void 0&&V6(c,e)}if(!a){let c=Qf(i)||(()=>new i);e({provide:i,useFactory:c,deps:Kl},i),e({provide:LA,useValue:i,multi:!0},i),e({provide:Ph,useValue:()=>Wn(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;BA(l,f=>{e(f,c)})}}else return!1;return i!==n&&n.providers!==void 0}function BA(n,e){for(let t of n)CA(t)&&(t=t.\u0275providers),Array.isArray(t)?BA(t,e):e(t)}var GQ=Fr({provide:String,useValue:Fr});function H6(n){return n!==null&&typeof n=="object"&&GQ in n}function zQ(n){return!!(n&&n.useExisting)}function VQ(n){return!!(n&&n.useFactory)}function Bp(n){return typeof n=="function"}function q6(n){return!!n.useClass}var iv=new Ut(""),NE={},M6={},fA;function r0(){return fA===void 0&&(fA=new Q_),fA}var Oi=class{},jp=class extends Oi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,_A(e,s=>this.processProvider(s)),this.records.set(PA,e0(void 0,this)),i.has("environment")&&this.records.set(Oi,e0(void 0,this));let o=this.records.get(iv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(LA,Kl,{self:!0}))}retrieve(e,t){let r=Fp(t)||0;try{return this.get(e,Op,r)}catch(i){if(Mm(i))return i;throw i}}destroy(){K_(this),this._destroyed=!0;let e=fn(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fn(e)}}onDestroy(e){return K_(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){K_(this);let t=xc(this),r=xa(void 0),i;try{return e()}finally{xc(t),xa(r)}}get(e,t=Op,r){if(K_(this),e.hasOwnProperty(R6))return e[R6](this);let i=Fp(r),o,s=xc(this),a=xa(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let f=YQ(e)&&nv(e);f&&this.injectableDefInScope(f)?c=e0(yA(e),NE):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?r0():this.parent;return t=i&8&&t===Op?null:t,l.get(e,t)}catch(l){let c=LQ(l);throw c===-200||c===-201?new Lt(c,null):l}finally{xa(a),xc(s)}}resolveInjectorInitializers(){let e=fn(null),t=xc(this),r=xa(void 0),i;try{let o=this.get(Ph,Kl,{self:!0});for(let s of o)s()}finally{xc(t),xa(r),fn(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Mh(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xs(e);let t=Bp(e)?e:xs(e&&e.provide),r=qQ(e);if(!Bp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=e0(void 0,NE,!0),i.factory=()=>mA(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=fn(null);try{if(t.value===M6)throw RA(Mh(e));return t.value===NE&&(t.value=M6,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&$Q(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{fn(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xs(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yA(n){let e=nv(n),t=e!==null?e.factory:Qf(n);if(t!==null)return t;if(n instanceof Ut)throw new Lt(204,!1);if(n instanceof Function)return HQ(n);throw new Lt(204,!1)}function HQ(n){if(n.length>0)throw new Lt(204,!1);let t=MQ(n);return t!==null?()=>t.factory(n):()=>new n}function qQ(n){if(H6(n))return e0(void 0,n.useValue);{let e=jA(n);return e0(e,NE)}}function jA(n,e,t){let r;if(Bp(n)){let i=xs(n);return Qf(i)||yA(i)}else if(H6(n))r=()=>xs(n.useValue);else if(VQ(n))r=()=>n.useFactory(...mA(n.deps||[]));else if(zQ(n))r=(i,o)=>Wn(xs(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=xs(n&&(n.useClass||n.provide));if(WQ(n))r=()=>new i(...mA(n.deps));else return Qf(i)||yA(i)}return r}function K_(n){if(n.destroyed)throw new Lt(205,!1)}function e0(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function WQ(n){return!!n.deps}function $Q(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function YQ(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function _A(n,e){for(let t of n)Array.isArray(t)?_A(t,e):t&&CA(t)?_A(t.\u0275providers,e):e(t)}function wa(n,e){let t;n instanceof jp?(K_(n),t=n):t=new gA(n);let r,i=xc(t),o=xa(void 0);try{return e()}finally{xc(i),xa(o)}}function W6(){return k6()!==void 0||Ww()!=null}var Gu=0,Jt=1,pn=2,qo=3,Ql=4,eu=5,i0=6,o0=7,ao=8,kh=9,Sc=10,Zi=11,s0=12,UA=13,qp=14,wl=15,td=16,Wp=17,Cc=18,ov=19,GA=20,Rh=21,UE=22,Oh=23,El=24,$p=25,Yp=26,Ki=27,$6=1,zA=6,nd=7,sv=8,Xp=9,Ji=10;function Ic(n){return Array.isArray(n)&&typeof n[$6]=="object"}function zu(n){return Array.isArray(n)&&n[$6]===!0}function VA(n){return(n.flags&4)!==0}function rd(n){return n.componentOffset>-1}function a0(n){return(n.flags&1)===1}function id(n){return!!n.template}function l0(n){return(n[pn]&512)!==0}function Zp(n){return(n[pn]&256)===256}var HA="svg",Y6="math";function tu(n){for(;Array.isArray(n);)n=n[Gu];return n}function qA(n,e){return tu(e[n])}function Tc(n,e){return tu(e[n.index])}function av(n,e){return n.data[e]}function WA(n,e){return n[e]}function $A(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function nu(n,e){let t=e[n];return Ic(t)?t:t[Gu]}function X6(n){return(n[pn]&4)===4}function GE(n){return(n[pn]&128)===128}function Z6(n){return zu(n[qo])}function ru(n,e){return e==null?null:n[e]}function YA(n){n[Wp]=0}function XA(n){n[pn]&1024||(n[pn]|=1024,GE(n)&&od(n))}function K6(n,e){for(;n>0;)e=e[qp],n--;return e}function lv(n){return!!(n[pn]&9216||n[El]?.dirty)}function zE(n){n[Sc].changeDetectionScheduler?.notify(8),n[pn]&64&&(n[pn]|=1024),lv(n)&&od(n)}function od(n){n[Sc].changeDetectionScheduler?.notify(0);let e=ed(n);for(;e!==null&&!(e[pn]&8192||(e[pn]|=8192,!GE(e)));)e=ed(e)}function ZA(n,e){if(Zp(n))throw new Lt(911,!1);n[Rh]===null&&(n[Rh]=[]),n[Rh].push(e)}function J6(n,e){if(n[Rh]===null)return;let t=n[Rh].indexOf(e);t!==-1&&n[Rh].splice(t,1)}function ed(n){let e=n[qo];return zu(e)?e[qo]:e}function KA(n){return n[o0]??=[]}function JA(n){return n.cleanup??=[]}function Q6(n,e,t,r){let i=KA(e);i.push(t),n.firstCreatePass&&JA(n).push(r,i.length-1)}var kn={lFrame:p7(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vA=!1;function e7(){return kn.lFrame.elementDepthCount}function t7(){kn.lFrame.elementDepthCount++}function QA(){kn.lFrame.elementDepthCount--}function VE(){return kn.bindingsEnabled}function n7(){return kn.skipHydrationRootTNode!==null}function eR(n){return kn.skipHydrationRootTNode===n}function tR(){kn.skipHydrationRootTNode=null}function Zn(){return kn.lFrame.lView}function rs(){return kn.lFrame.tView}function An(n){return kn.lFrame.contextLView=n,n[ao]}function Rn(n){return kn.lFrame.contextLView=null,n}function ws(){let n=nR();for(;n!==null&&n.type===64;)n=n.parent;return n}function nR(){return kn.lFrame.currentTNode}function r7(){let n=kn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function u0(n,e){let t=kn.lFrame;t.currentTNode=n,t.isParent=e}function rR(){return kn.lFrame.isParent}function i7(){kn.lFrame.isParent=!1}function o7(){return kn.lFrame.contextLView}function iR(){return vA}function c0(n){let e=vA;return vA=n,e}function s7(){let n=kn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function a7(){return kn.lFrame.bindingIndex}function l7(n){return kn.lFrame.bindingIndex=n}function uv(){return kn.lFrame.bindingIndex++}function oR(n){let e=kn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function u7(){return kn.lFrame.inI18n}function c7(n,e){let t=kn.lFrame;t.bindingIndex=t.bindingRootIndex=n,HE(e)}function h7(){return kn.lFrame.currentDirectiveIndex}function HE(n){kn.lFrame.currentDirectiveIndex=n}function f7(n){let e=kn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function sR(){return kn.lFrame.currentQueryIndex}function qE(n){kn.lFrame.currentQueryIndex=n}function XQ(n){let e=n[Jt];return e.type===2?e.declTNode:e.type===1?n[eu]:null}function aR(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=XQ(o),i===null||(o=o[qp],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=kn.lFrame=d7();return r.currentTNode=e,r.lView=n,!0}function WE(n){let e=d7(),t=n[Jt];kn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function d7(){let n=kn.lFrame,e=n===null?null:n.child;return e===null?p7(n):e}function p7(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function g7(){let n=kn.lFrame;return kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lR=g7;function $E(){let n=g7();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function m7(n){return(kn.lFrame.contextLView=K6(n,kn.lFrame.contextLView))[ao]}function Fh(){return kn.lFrame.selectedIndex}function sd(n){kn.lFrame.selectedIndex=n}function y7(){let n=kn.lFrame;return av(n.tView,n.selectedIndex)}function $n(){kn.lFrame.currentNamespace=HA}function gi(){ZQ()}function ZQ(){kn.lFrame.currentNamespace=null}function _7(){return kn.lFrame.currentNamespace}var v7=!0;function YE(){return v7}function cv(n){v7=n}function xA(n,e=null,t=null,r){let i=uR(n,e,t,r);return i.resolveInjectorInitializers(),i}function uR(n,e=null,t=null,r,i=new Set){let o=[t||Kl,z6(n)];return r=r||(typeof n=="object"?void 0:Mh(n)),new jp(o,e||r0(),r||null,i)}var Di=class n{static THROW_IF_NOT_FOUND=Op;static NULL=new Q_;static create(e,t){if(Array.isArray(e))return xA({name:""},t,e,"");{let r=e.name??"";return xA({name:r},e.parent,e.providers,r)}}static \u0275prov=_t({token:n,providedIn:"any",factory:()=>Wn(PA)});static __NG_ELEMENT_ID__=-1},wr=new Ut(""),Vu=(()=>{class n{static __NG_ELEMENT_ID__=KQ;static __NG_ENV_ID__=t=>t}return n})(),ev=class extends Vu{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Zp(this._lView)}onDestroy(e){let t=this._lView;return ZA(t,e),()=>J6(t,e)}};function KQ(){return new ev(Zn())}var Jl=class{_console=console;handleError(e){this._console.error("ERROR",e)}},bl=new Ut("",{providedIn:"root",factory:()=>{let n=Me(Oi),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Jl),e.handleError(t))}}}),x7={provide:Ph,useValue:()=>void Me(Jl),multi:!0},JQ=new Ut("",{providedIn:"root",factory:()=>{let n=Me(wr).defaultView;if(!n)return;let e=Me(bl),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),Me(Vu).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function cR(){return Hp([G6(()=>void Me(JQ))])}function un(n,e){let[t,r,i]=YD(n,e?.equal),o=t,s=o[_a];return o.set=r,o.update=i,o.asReadonly=hR.bind(o),o}function hR(){let n=this[_a];if(n.readonlyFn===void 0){let e=()=>this();e[_a]=n,n.readonlyFn=e}return n.readonlyFn}var h0=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=QQ}return n})();function QQ(){return new h0(Zn(),ws())}var bc=class{},hv=new Ut("",{providedIn:"root",factory:()=>!1});var fR=new Ut(""),dR=new Ut(""),Bh=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Vo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Hn(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=_t({token:n,providedIn:"root",factory:()=>new n})}return n})();function Kp(...n){}var fv=(()=>{class n{static \u0275prov=_t({token:n,providedIn:"root",factory:()=>new wA})}return n})(),wA=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function wv(n){return{toString:n}.toString()}function see(n){return typeof n=="function"}var n2=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function J7(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ld=(()=>{let n=()=>Q7;return n.ngInherit=!0,n})();function Q7(n){return n.type.prototype.ngOnChanges&&(n.setInput=lee),aee}function aee(){let n=tB(this),e=n?.current;if(e){let t=n.previous;if(t===Vp)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function lee(n,e,t,r,i){let o=this.declaredInputs[r],s=tB(n)||uee(n,{previous:Vp,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new n2(c&&c.currentValue,t,l===Vp),J7(n,e,i,t)}var eB="__ngSimpleChanges__";function tB(n){return n[eB]||null}function uee(n,e){return n[eB]=e}var w7=[];var Wr=function(n,e=null,t){for(let r=0;r<w7.length;r++){let i=w7[r];i(n,e,t)}};function cee(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Q7(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function nB(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function KE(n,e,t){rB(n,e,3,t)}function JE(n,e,t,r){(n[pn]&3)===t&&rB(n,e,t,r)}function pR(n,e){let t=n[pn];(t&3)===e&&(t&=16383,t+=1,n[pn]=t)}function rB(n,e,t,r){let i=r!==void 0?n[Wp]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Wp]+=65536),(a<o||o==-1)&&(hee(n,t,e,l),n[Wp]=(n[Wp]&4294901760)+l+2),l++}function E7(n,e){Wr(4,n,e);let t=fn(null);try{e.call(n)}finally{fn(t),Wr(5,n,e)}}function hee(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pn]>>14<n[Wp]>>16&&(n[pn]&3)===e&&(n[pn]+=16384,E7(a,o)):E7(a,o)}var d0=-1,Qp=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function fee(n){return(n.flags&8)!==0}function dee(n){return(n.flags&16)!==0}function pee(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];mee(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function gee(n){return n===3||n===4||n===6}function mee(n){return n.charCodeAt(0)===64}function b2(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?b7(n,t,i,null,e[++r]):b7(n,t,i,null,null))}}return n}function b7(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function iB(n){return n!==d0}function r2(n){return n&32767}function yee(n){return n>>16}function i2(n,e){let t=yee(n),r=e;for(;t>0;)r=r[qp],t--;return r}var SR=!0;function o2(n){let e=SR;return SR=n,e}var _ee=256,oB=_ee-1,sB=5,vee=0,Dc={};function xee(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(zp)&&(r=t[zp]),r==null&&(r=t[zp]=vee++);let i=r&oB,o=1<<i;e.data[n+(i>>sB)]|=o}function s2(n,e){let t=aB(n,e);if(t!==-1)return t;let r=e[Jt];r.firstCreatePass&&(n.injectorIndex=e.length,gR(r.data,n),gR(e,null),gR(r.blueprint,null));let i=tM(n,e),o=n.injectorIndex;if(iB(i)){let s=r2(i),a=i2(i,e),l=a[Jt].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function gR(n,e){n.push(0,0,0,0,0,0,0,0,e)}function aB(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function tM(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=fB(i),r===null)return d0;if(t++,i=i[qp],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return d0}function CR(n,e,t){xee(n,e,t)}function lB(n,e,t){if(t&8||n!==void 0)return n;FE(e,"NodeInjector")}function uB(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[kh],o=xa(void 0);try{return i?i.get(e,r,t&8):MA(e,r,t&8)}finally{xa(o)}}return lB(r,e,t)}function cB(n,e,t,r=0,i){if(n!==null){if(e[pn]&2048&&!(r&2)){let s=See(n,e,t,r,Dc);if(s!==Dc)return s}let o=hB(n,e,t,r,Dc);if(o!==Dc)return o}return uB(e,t,r,i)}function hB(n,e,t,r,i){let o=Eee(t);if(typeof o=="function"){if(!aR(e,n,r))return r&1?lB(i,t,r):uB(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))FE(t);else return s}finally{lR()}}else if(typeof o=="number"){let s=null,a=aB(n,e),l=d0,c=r&1?e[wl][eu]:null;for((a===-1||r&4)&&(l=a===-1?tM(n,e):e[a+8],l===d0||!C7(r,!1)?a=-1:(s=e[Jt],a=r2(l),e=i2(l,e)));a!==-1;){let f=e[Jt];if(S7(o,a,f.data)){let d=wee(a,e,t,s,r,c);if(d!==Dc)return d}l=e[a+8],l!==d0&&C7(r,e[Jt].data[a+8]===c)&&S7(o,a,e)?(s=f,a=r2(l),e=i2(l,e)):a=-1}}return i}function wee(n,e,t,r,i,o){let s=e[Jt],a=s.data[n+8],l=r==null?rd(a)&&SR:r!=s&&(a.type&3)!==0,c=i&1&&o===a,f=QE(a,s,t,l,c);return f!==null?gv(e,s,f,a,i):Dc}function QE(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,f=o>>20,d=r?a:a+f,y=i?a+f:c;for(let p=d;p<y;p++){let _=s[p];if(p<l&&t===_||p>=l&&_.type===t)return p}if(i){let p=s[l];if(p&&id(p)&&p.type===t)return l}return null}function gv(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Qp){let a=o;if(a.resolving){let p=N6(s[t]);throw RA(p)}let l=o2(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],f,d=a.injectImpl?xa(a.injectImpl):null,y=aR(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&cee(t,s[t],e)}finally{d!==null&&xa(d),o2(l),a.resolving=!1,lR()}}return o}function Eee(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(zp)?n[zp]:void 0;return typeof e=="number"?e>=0?e&oB:bee:e}function S7(n,e,t){let r=1<<n;return!!(t[e+(n>>sB)]&r)}function C7(n,e){return!(n&2)&&!(n&1&&e)}var Jp=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return cB(this._tNode,this._lView,e,Fp(r),t)}};function bee(){return new Jp(ws(),Zn())}function ig(n){return wv(()=>{let e=n.prototype.constructor,t=e[J_]||IR(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[J_]||IR(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function IR(n){return bA(n)?()=>{let e=IR(xs(n));return e&&e()}:Qf(n)}function See(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pn]&2048&&!l0(s);){let a=hB(o,s,t,r|2,Dc);if(a!==Dc)return a;let l=o.parent;if(!l){let c=s[GA];if(c){let f=c.get(t,Dc,r);if(f!==Dc)return f}l=fB(s),s=s[qp]}o=l}return i}function fB(n){let e=n[Jt],t=e.type;return t===2?e.declTNode:t===1?n[eu]:null}function Cee(){return m0(ws(),Zn())}function m0(n,e){return new li(Tc(n,e))}var li=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Cee}return n})();function Iee(n){return n instanceof li?n.nativeElement:n}function Tee(){return this._results[Symbol.iterator]()}var a2=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new en}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=F6(e);(this._changesDetected=!O6(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Tee};function dB(n){return(n.flags&128)===128}var nM=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(nM||{}),pB=new Map,Dee=0;function Aee(){return Dee++}function Ree(n){pB.set(n[ov],n)}function TR(n){pB.delete(n[ov])}var I7="__ngContext__";function p0(n,e){Ic(e)?(n[I7]=e[ov],Ree(e)):n[I7]=e}function gB(n){return yB(n[s0])}function mB(n){return yB(n[Ql])}function yB(n){for(;n!==null&&!zu(n);)n=n[Ql];return n}var DR;function rM(n){DR=n}function _B(){if(DR!==void 0)return DR;if(typeof document<"u")return document;throw new Lt(210,!1)}var y0=new Ut("",{providedIn:"root",factory:()=>Mee}),Mee="ng",S2=new Ut(""),og=new Ut("",{providedIn:"platform",factory:()=>"unknown"});var iM=new Ut(""),C2=new Ut("",{providedIn:"root",factory:()=>_B().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Nee="h",Pee="b";var vB="r";var xB="di";var wB=!1,EB=new Ut("",{providedIn:"root",factory:()=>wB});var Lee=(n,e,t,r)=>{};function kee(n,e,t,r){Lee(n,e,t,r)}function oM(n){return(n.flags&32)===32}var Oee=()=>null;function bB(n,e,t=!1){return Oee(n,e,t)}function SB(n,e){let t=n.contentQueries;if(t!==null){let r=fn(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];qE(o),a.contentQueries(2,e[s],s)}}}finally{fn(r)}}}function AR(n,e,t){qE(0);let r=fn(null);try{e(n,t)}finally{fn(r)}}function sM(n,e,t){if(VA(e)){let r=fn(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{fn(r)}}}var jh=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(jh||{});var l2=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kE})`}};function aM(n){return n instanceof l2?n.changingThisBreaksApplicationSecurity:n}function CB(n,e){let t=IB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kE})`)}return t===e}function IB(n){return n instanceof l2&&n.getTypeName()||null}var Fee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function TB(n){return n=String(n),n.match(Fee)?n:"unsafe:"+n}var Bee=/^>|^->|<!--|-->|--!>|<!-$/g,jee=/(<|>)/g,Uee="\u200B$1\u200B";function Gee(n){return n.replace(Bee,e=>e.replace(jee,Uee))}function zee(n,e){return n.createText(e)}function Vee(n,e,t){n.setValue(e,t)}function Hee(n,e){return n.createComment(Gee(e))}function DB(n,e,t){return n.createElement(e,t)}function u2(n,e,t,r,i){n.insertBefore(e,t,r,i)}function AB(n,e,t){n.appendChild(e,t)}function T7(n,e,t,r,i){r!==null?u2(n,e,t,r,i):AB(n,e,t)}function RB(n,e,t,r){n.removeChild(null,e,t,r)}function qee(n,e,t){n.setAttribute(e,"style",t)}function Wee(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function MB(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&pee(n,e,r),i!==null&&Wee(n,e,i),o!==null&&qee(n,e,o)}var lM=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(lM||{});function uM(n){let e=$ee();return e?e.sanitize(lM.URL,n)||"":CB(n,"URL")?aM(n):TB(t0(n))}function $ee(){let n=Zn();return n&&n[Sc].sanitizer}function Gh(n){return n.ownerDocument}function NB(n){return n instanceof Function?n():n}function Yee(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var PB="ng-template";function Xee(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Yee(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(cM(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function cM(n){return n.type===4&&n.value!==PB}function Zee(n,e,t){let r=n.type===4&&!t?PB:n.value;return e===r}function Kee(n,e,t){let r=4,i=n.attrs,o=i!==null?ete(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Hu(r)&&!Hu(l))return!1;if(s&&Hu(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!Zee(n,l,t)||l===""&&e.length===1){if(Hu(r))return!1;s=!0}}else if(r&8){if(i===null||!Xee(n,i,l,t)){if(Hu(r))return!1;s=!0}}else{let c=e[++a],f=Jee(l,i,cM(n),t);if(f===-1){if(Hu(r))return!1;s=!0;continue}if(c!==""){let d;if(f>o?d="":d=i[f+1].toLowerCase(),r&2&&c!==d){if(Hu(r))return!1;s=!0}}}}return Hu(r)||s}function Hu(n){return(n&1)===0}function Jee(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return tte(e,n)}function Qee(n,e,t=!1){for(let r=0;r<e.length;r++)if(Kee(n,e[r],t))return!0;return!1}function ete(n){for(let e=0;e<n.length;e++){let t=n[e];if(gee(t))return e}return n.length}function tte(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function D7(n,e){return n?":not("+e.trim()+")":e}function nte(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Hu(s)&&(e+=D7(o,i),i=""),r=s,o=o||!Hu(r);t++}return i!==""&&(e+=D7(o,i)),e}function rte(n){return n.map(nte).join(",")}function ite(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Hu(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ou={};function hM(n,e,t,r,i,o,s,a,l,c,f){let d=Ki+r,y=d+i,p=ote(d,y),_=typeof c=="function"?c():c;return p[Jt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:f}}function ote(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ou);return t}function ste(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=hM(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function fM(n,e,t,r,i,o,s,a,l,c,f){let d=e.blueprint.slice();return d[Gu]=i,d[pn]=r|4|128|8|64|1024,(c!==null||n&&n[pn]&2048)&&(d[pn]|=2048),YA(d),d[qo]=d[qp]=n,d[ao]=t,d[Sc]=s||n&&n[Sc],d[Zi]=a||n&&n[Zi],d[kh]=l||n&&n[kh]||null,d[eu]=o,d[ov]=Aee(),d[i0]=f,d[GA]=c,d[wl]=e.type==2?n[wl]:d,d}function ate(n,e,t){let r=Tc(e,n),i=ste(t),o=n[Sc].rendererFactory,s=dM(n,fM(n,i,null,LB(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function LB(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function kB(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function dM(n,e){return n[s0]?n[UA][Ql]=e:n[s0]=e,n[UA]=e,e}function Ct(n=1){OB(rs(),Zn(),Fh()+n,!1)}function OB(n,e,t,r){if(!r)if((e[pn]&3)===3){let o=n.preOrderCheckHooks;o!==null&&KE(e,o,t)}else{let o=n.preOrderHooks;o!==null&&JE(e,o,0,t)}sd(t)}var I2=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(I2||{});function RR(n,e,t,r){let i=fn(null);try{let[o,s,a]=n.inputs[t],l=null;(s&I2.SignalBased)!==0&&(l=e[o][_a]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):J7(e,l,o,r)}finally{fn(i)}}var Ac=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ac||{}),lte;function pM(n,e){return lte(n,e)}var eg=new Set,T2=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(T2||{}),sg=new Ut(""),A7=new Set;function zh(n){A7.has(n)||(A7.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var FB=!1,MR=class extends en{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,W6()&&(this.destroyRef=Me(Vu,{optional:!0})??void 0,this.pendingTasks=Me(Bh,{optional:!0})??void 0)}emit(e){let t=fn(null);try{super.next(e)}finally{fn(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof gr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},mi=MR;function BB(n){let e,t;function r(){n=Kp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function R7(n){return queueMicrotask(()=>n()),()=>{n=Kp}}var gM="isAngularZone",c2=gM+"_ID",ute=0,vr=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new mi(!1);onMicrotaskEmpty=new mi(!1);onStable=new mi(!1);onError=new mi(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=FB}=e;if(typeof Zone>"u")throw new Lt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fte(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(gM)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Lt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Lt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,cte,Kp,Kp);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},cte={};function mM(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function hte(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){BB(()=>{n.callbackScheduled=!1,NR(n),n.isCheckStableRunning=!0,mM(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),NR(n)}function fte(n){let e=()=>{hte(n)},t=ute++;n._inner=n._inner.fork({name:"angular",properties:{[gM]:!0,[c2]:t,[c2+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(dte(l))return r.invokeTask(o,s,a,l);try{return M7(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),N7(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return M7(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!pte(l)&&e(),N7(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,NR(n),mM(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function NR(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function M7(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function N7(n){n._nesting--,mM(n)}var h2=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new mi;onMicrotaskEmpty=new mi;onStable=new mi;onError=new mi;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function dte(n){return jB(n,"__ignore_ng_zone__")}function pte(n){return jB(n,"__scheduler_tick__")}function jB(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var yM=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=_t({token:n,providedIn:"root",factory:()=>new n})}return n})(),UB=[0,1,2,3],GB=(()=>{class n{ngZone=Me(vr);scheduler=Me(bc);errorHandler=Me(Jl,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Me(sg,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Wr(16),this.executing=!0;for(let r of UB)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Wr(17)}register(t){let{view:r}=t;r!==void 0?((r[$p]??=[]).push(t),od(r),r[pn]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(T2.AFTER_NEXT_RENDER,t):t()}static \u0275prov=_t({token:n,providedIn:"root",factory:()=>new n})}return n})(),f2=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$p];e&&(this.view[$p]=e.filter(t=>t!==this))}};function ud(n,e){let t=e?.injector??Me(Di);return zh("NgAfterNextRender"),mte(n,t,e,!0)}function gte(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function mte(n,e,t,r){let i=e.get(yM);i.impl??=e.get(GB);let o=e.get(sg,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Vu):null,a=e.get(h0,null,{optional:!0}),l=new f2(i.impl,gte(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var zB=new Ut("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function VB(n,e,t){let r=n.get(zB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function yte(n,e){let t=n.get(zB);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function _te(n,e){for(let[t,r]of e)VB(n,r.animateFns)}function P7(n,e,t,r){let i=n?.[Yp]?.enter;e!==null&&i&&i.has(t.index)&&_te(r,i)}function f0(n,e,t,r,i,o,s,a){if(i!=null){let l,c=!1;zu(i)?l=i:Ic(i)&&(c=!0,i=i[Gu]);let f=tu(i);n===0&&r!==null?(P7(a,r,o,t),s==null?AB(e,r,f):u2(e,r,f,s||null,!0)):n===1&&r!==null?(P7(a,r,o,t),u2(e,r,f,s||null,!0)):n===2?L7(a,o,t,d=>{RB(e,f,c,d)}):n===3&&L7(a,o,t,()=>{e.destroyNode(f)}),l!=null&&Mte(e,n,t,l,o,r,s)}}function vte(n,e){HB(n,e),e[Gu]=null,e[eu]=null}function xte(n,e,t,r,i,o){r[Gu]=i,r[eu]=e,A2(n,r,t,1,i,o)}function HB(n,e){e[Sc].changeDetectionScheduler?.notify(9),A2(n,e,e[Zi],2,null,null)}function wte(n){let e=n[s0];if(!e)return mR(n[Jt],n);for(;e;){let t=null;if(Ic(e))t=e[s0];else{let r=e[Ji];r&&(t=r)}if(!t){for(;e&&!e[Ql]&&e!==n;)Ic(e)&&mR(e[Jt],e),e=e[qo];e===null&&(e=n),Ic(e)&&mR(e[Jt],e),t=e&&e[Ql]}e=t}}function _M(n,e){let t=n[Xp],r=t.indexOf(e);t.splice(r,1)}function D2(n,e){if(Zp(e))return;let t=e[Zi];t.destroyNode&&A2(n,e,t,3,null,null),wte(e)}function mR(n,e){if(Zp(e))return;let t=fn(null);try{e[pn]&=-129,e[pn]|=256,e[El]&&Mp(e[El]),Ste(n,e),bte(n,e),e[Jt].type===1&&e[Zi].destroy();let r=e[td];if(r!==null&&zu(e[qo])){r!==e[qo]&&_M(r,e);let i=e[Cc];i!==null&&i.detachView(n)}TR(e)}finally{fn(t)}}function L7(n,e,t,r){let i=n?.[Yp];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&eg.add(n),VB(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:f}=c();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Ete(n,r)}else n&&eg.delete(n),r(!1)},i)}function Ete(n,e){let t=n[Yp]?.running;if(t){t.then(()=>{n[Yp].running=void 0,eg.delete(n),e(!0)});return}e(!1)}function bte(n,e){let t=n.cleanup,r=e[o0];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[o0]=null);let i=e[Rh];if(i!==null){e[Rh]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Oh];if(o!==null){e[Oh]=null;for(let s of o)s.destroy()}}function Ste(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Qp)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Wr(4,a,l);try{l.call(a)}finally{Wr(5,a,l)}}else{Wr(4,i,o);try{o.call(i)}finally{Wr(5,i,o)}}}}}function Cte(n,e,t){return Ite(n,e.parent,t)}function Ite(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Gu];if(rd(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===jh.None||i===jh.Emulated)return null}return Tc(r,t)}function Tte(n,e,t){return Ate(n,e,t)}function Dte(n,e,t){return n.type&40?Tc(n,t):null}var Ate=Dte,k7;function vM(n,e,t,r){let i=Cte(n,r,e),o=e[Zi],s=r.parent||e[eu],a=Tte(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)T7(o,i,t[l],a,!1);else T7(o,i,t,a,!1);k7!==void 0&&k7(o,r,e,t,i)}function dv(n,e){if(e!==null){let t=e.type;if(t&3)return Tc(e,n);if(t&4)return PR(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return dv(n,r);{let i=n[e.index];return zu(i)?PR(-1,i):tu(i)}}else{if(t&128)return dv(n,e.next);if(t&32)return pM(e,n)()||tu(n[e.index]);{let r=qB(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ed(n[wl]);return dv(i,r)}else return dv(n,e.next)}}}return null}function qB(n,e){if(e!==null){let r=n[wl][eu],i=e.projection;return r.projection[i]}return null}function PR(n,e){let t=Ji+n+1;if(t<e.length){let r=e[t],i=r[Jt].firstChild;if(i!==null)return dv(r,i)}return e[nd]}function xM(n,e,t,r,i,o,s){for(;t!=null;){let a=r[kh];if(t.type===128){t=t.next;continue}let l=r[t.index],c=t.type;if(s&&e===0&&(l&&p0(tu(l),r),t.flags|=2),!oM(t))if(c&8)xM(n,e,t.child,r,i,o,!1),f0(e,n,a,i,l,t,o,r);else if(c&32){let f=pM(t,r),d;for(;d=f();)f0(e,n,a,i,d,t,o,r);f0(e,n,a,i,l,t,o,r)}else c&16?Rte(n,e,r,t,i,o):f0(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function A2(n,e,t,r,i,o){xM(t,r,n.firstChild,e,i,o,!1)}function Rte(n,e,t,r,i,o){let s=t[wl],l=s[eu].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let f=l[c];f0(e,n,t[kh],i,f,r,o,t)}else{let c=l,f=s[qo];dB(r)&&(c.flags|=128),xM(n,e,c,f,i,o,!0)}}function Mte(n,e,t,r,i,o,s){let a=r[nd],l=tu(r);a!==l&&f0(e,n,t,o,a,i,s);for(let c=Ji;c<r.length;c++){let f=r[c];A2(f[Jt],f,n,e,o,a)}}function Nte(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ac.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ac.Important),n.setStyle(t,r,i,o))}}function WB(n,e,t,r,i){let o=Fh(),s=r&2;try{sd(-1),s&&e.length>Ki&&OB(n,e,Ki,!1),Wr(s?2:0,i,t),t(r,i)}finally{sd(o),Wr(s?3:1,i,t)}}function R2(n,e,t){Ute(n,e,t),(t.flags&64)===64&&Gte(n,e,t)}function Ev(n,e,t=Tc){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Pte(n,e,t,r){let o=r.get(EB,wB)||t===jh.ShadowDom,s=n.selectRootElement(e,o);return Lte(s),s}function Lte(n){kte(n)}var kte=()=>null;function Ote(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Fte(n,e,t,r,i,o){let s=e[Jt];if(SM(n,s,e,t,r)){rd(n)&&jte(e,n.index);return}n.type&3&&(t=Ote(t)),Bte(n,e,t,r,i,o)}function Bte(n,e,t,r,i,o){if(n.type&3){let s=Tc(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function jte(n,e){let t=nu(e,n);t[pn]&16||(t[pn]|=64)}function Ute(n,e,t){let r=t.directiveStart,i=t.directiveEnd;rd(t)&&ate(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||s2(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=gv(e,n,s,t);if(p0(l,e),o!==null&&Vte(e,s-r,l,a,t,o),id(a)){let c=nu(t.index,e);c[ao]=gv(e,n,s,t)}}}function Gte(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=h7();try{sd(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];HE(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&zte(l,c)}}finally{sd(-1),HE(s)}}function zte(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function wM(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];Qee(e,o.selectors,!1)&&(r??=[],id(o)?r.unshift(o):r.push(o))}return r}function Vte(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];RR(r,t,l,c)}}function EM(n,e,t,r,i){let o=Ki+t,s=e[Jt],a=i(s,e,n,r,t);e[o]=a,u0(n,!0);let l=n.type===2;return l?(MB(e[Zi],a,n),(e7()===0||a0(n))&&p0(a,e),t7()):p0(a,e),YE()&&(!l||!oM(n))&&vM(s,e,a,n),n}function bM(n){let e=n;return rR()?i7():(e=e.parent,u0(e,!1)),e}function Hte(n,e){let t=n[kh];if(!t)return;let r;try{r=t.get(bl,null)}catch{r=null}r?.(e)}function SM(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],f=s[l+1],d=e.data[c];RR(d,t[c],f,i),a=!0}if(o)for(let l of o){let c=t[l],f=e.data[l];RR(f,c,r,i),a=!0}return a}function qte(n,e){let t=nu(e,n),r=t[Jt];Wte(r,t);let i=t[Gu];i!==null&&t[i0]===null&&(t[i0]=bB(i,t[kh])),Wr(18),CM(r,t,t[ao]),Wr(19,t[ao])}function Wte(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function CM(n,e,t){WE(e);try{let r=n.viewQuery;r!==null&&AR(1,r,t);let i=n.template;i!==null&&WB(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Cc]?.finishViewCreation(n),n.staticContentQueries&&SB(n,e),n.staticViewQueries&&AR(2,n.viewQuery,t);let o=n.components;o!==null&&$te(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pn]&=-5,$E()}}function $te(n,e){for(let t=0;t<e.length;t++)qte(n,e[t])}function M2(n,e,t,r){let i=fn(null);try{let o=e.tView,a=n[pn]&4096?4096:16,l=fM(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[td]=c;let f=n[Cc];return f!==null&&(l[Cc]=f.createEmbeddedView(o)),CM(o,l,t),l}finally{fn(i)}}function mv(n,e){return!e||e.firstChild===null||dB(n)}function yv(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(tu(o)),zu(o)&&$B(o,r);let s=t.type;if(s&8)yv(n,e,t.child,r);else if(s&32){let a=pM(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=qB(e,t);if(Array.isArray(a))r.push(...a);else{let l=ed(e[wl]);yv(l[Jt],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function $B(n,e){for(let t=Ji;t<n.length;t++){let r=n[t],i=r[Jt].firstChild;i!==null&&yv(r[Jt],r,i,e)}n[nd]!==n[Gu]&&e.push(n[nd])}function YB(n){if(n[$p]!==null){for(let e of n[$p])e.impl.addSequence(e);n[$p].length=0}}var XB=[];function Yte(n){return n[El]??Xte(n)}function Xte(n){let e=XB.pop()??Object.create(Kte);return e.lView=n,e}function Zte(n){n.lView[El]!==n&&(n.lView=null,XB.push(n))}var Kte=tn(dt({},Ap),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{od(n.lView)},consumerOnSignalRead(){this.lView[El]=this}});function Jte(n){let e=n[El]??Object.create(Qte);return e.lView=n,e}var Qte=tn(dt({},Ap),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ed(n.lView);for(;e&&!ZB(e[Jt]);)e=ed(e);e&&XA(e)},consumerOnSignalRead(){this.lView[El]=this}});function ZB(n){return n.type!==2}function KB(n){if(n[Oh]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Oh])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pn]&8192)}}var ene=100;function JB(n,e=0){let r=n[Sc].rendererFactory,i=!1;i||r.begin?.();try{tne(n,e)}finally{i||r.end?.()}}function tne(n,e){let t=iR();try{c0(!0),LR(n,e);let r=0;for(;lv(n);){if(r===ene)throw new Lt(103,!1);r++,LR(n,1)}}finally{c0(t)}}function nne(n,e,t,r){if(Zp(e))return;let i=e[pn],o=!1,s=!1;WE(e);let a=!0,l=null,c=null;o||(ZB(n)?(c=Yte(e),l=Rp(c)):Kw()===null?(a=!1,c=Jte(e),l=Rp(c)):e[El]&&(Mp(e[El]),e[El]=null));try{YA(e),l7(n.bindingStartIndex),t!==null&&WB(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let p=n.preOrderCheckHooks;p!==null&&KE(e,p,null)}else{let p=n.preOrderHooks;p!==null&&JE(e,p,0,null),pR(e,0)}if(s||rne(e),KB(e),QB(e,0),n.contentQueries!==null&&SB(n,e),!o)if(f){let p=n.contentCheckHooks;p!==null&&KE(e,p)}else{let p=n.contentHooks;p!==null&&JE(e,p,1),pR(e,1)}one(n,e);let d=n.components;d!==null&&tj(e,d,0);let y=n.viewQuery;if(y!==null&&AR(2,y,r),!o)if(f){let p=n.viewCheckHooks;p!==null&&KE(e,p)}else{let p=n.viewHooks;p!==null&&JE(e,p,2),pR(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[UE]){for(let p of e[UE])p();e[UE]=null}o||(YB(e),e[pn]&=-73)}catch(f){throw o||od(e),f}finally{c!==null&&(Pm(c,l),a&&Zte(c)),$E()}}function QB(n,e){for(let t=gB(n);t!==null;t=mB(t))for(let r=Ji;r<t.length;r++){let i=t[r];ej(i,e)}}function rne(n){for(let e=gB(n);e!==null;e=mB(e)){if(!(e[pn]&2))continue;let t=e[Xp];for(let r=0;r<t.length;r++){let i=t[r];XA(i)}}}function ine(n,e,t){Wr(18);let r=nu(e,n);ej(r,t),Wr(19,r[ao])}function ej(n,e){GE(n)&&LR(n,e)}function LR(n,e){let r=n[Jt],i=n[pn],o=n[El],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Lm(o)),s||=!1,o&&(o.dirty=!1),n[pn]&=-9217,s)nne(r,n,r.template,n[ao]);else if(i&8192){let a=fn(null);try{KB(n),QB(n,1);let l=r.components;l!==null&&tj(n,l,1),YB(n)}finally{fn(a)}}}function tj(n,e,t){for(let r=0;r<e.length;r++)ine(n,e[r],t)}function one(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)sd(~i);else{let o=i,s=t[++r],a=t[++r];c7(s,o);let l=e[o];Wr(24,l),a(2,l),Wr(25,l)}}}finally{sd(-1)}}function IM(n,e){let t=iR()?64:1088;for(n[Sc].changeDetectionScheduler?.notify(e);n;){n[pn]|=t;let r=ed(n);if(l0(n)&&!r)return n;n=r}return null}function nj(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function rj(n,e){let t=Ji+e;if(t<n.length)return n[t]}function N2(n,e,t,r=!0){let i=e[Jt];if(sne(i,e,n,t),r){let s=PR(t,n),a=e[Zi],l=a.parentNode(n[nd]);l!==null&&xte(i,n[eu],a,e,l,s)}let o=e[i0];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ij(n,e){let t=_v(n,e);return t!==void 0&&D2(t[Jt],t),t}function _v(n,e){if(n.length<=Ji)return;let t=Ji+e,r=n[t];if(r){let i=r[td];i!==null&&i!==n&&_M(i,r),e>0&&(n[t-1][Ql]=r[Ql]);let o=rv(n,Ji+e);vte(r[Jt],r);let s=o[Cc];s!==null&&s.detachView(o[Jt]),r[qo]=null,r[Ql]=null,r[pn]&=-129}return r}function sne(n,e,t,r){let i=Ji+r,o=t.length;r>0&&(t[i-1][Ql]=e),r<o-Ji?(e[Ql]=t[i],NA(t,Ji+r,e)):(t.push(e),e[Ql]=null),e[qo]=t;let s=e[td];s!==null&&t!==s&&oj(s,e);let a=e[Cc];a!==null&&a.insertView(n),zE(e),e[pn]|=128}function oj(n,e){let t=n[Xp],r=e[qo];if(Ic(r))n[pn]|=2;else{let i=r[qo][wl];e[wl]!==i&&(n[pn]|=2)}t===null?n[Xp]=[e]:t.push(e)}var ad=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Jt];return yv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ao]}set context(e){this._lView[ao]=e}get destroyed(){return Zp(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qo];if(zu(e)){let t=e[sv],r=t?t.indexOf(this):-1;r>-1&&(_v(e,r),rv(t,r))}this._attachedToViewContainer=!1}D2(this._lView[Jt],this._lView)}onDestroy(e){ZA(this._lView,e)}markForCheck(){IM(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[pn]&=-129}reattach(){zE(this._lView),this._lView[pn]|=128}detectChanges(){this._lView[pn]|=1024,JB(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=l0(this._lView),t=this._lView[td];t!==null&&!e&&_M(t,this._lView),HB(this._lView[Jt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Lt(902,!1);this._appRef=e;let t=l0(this._lView),r=this._lView[td];r!==null&&!t&&oj(r,this._lView),zE(this._lView)}};var iu=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=ane;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=M2(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ad(o)}}return n})();function ane(){return P2(ws(),Zn())}function P2(n,e){return n.type&4?new iu(e,n,m0(n,e)):null}function bv(n,e,t,r,i){let o=n.data[e];if(o===null)o=lne(n,e,t,r,i),u7()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=r7();o.injectorIndex=s===null?-1:s.injectorIndex}return u0(o,!0),o}function lne(n,e,t,r,i){let o=nR(),s=rR(),a=s?o:o&&o.parent,l=n.data[e]=cne(n,a,t,e,r,i);return une(n,l,o,s),l}function une(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function cne(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return n7()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var IDe=new RegExp(`^(\\d+)*(${Pee}|${Nee})*(.*)`);function hne(n){let e=n[zA]??[],r=n[qo][Zi],i=[];for(let o of e)o.data[xB]!==void 0?i.push(o):fne(o,r);n[zA]=i}function fne(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[vB];for(;t<i;){let o=r.nextSibling;RB(e,r,!1),r=o,t++}}}var dne=()=>null,pne=()=>null;function kR(n,e){return dne(n,e)}function sj(n,e,t){return pne(n,e,t)}var aj=class{},L2=class{},OR=class{resolveComponentFactory(e){throw new Lt(917,!1)}},Sv=class{static NULL=new OR},Es=class{},_0=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>gne()}return n})();function gne(){let n=Zn(),e=ws(),t=nu(e.index,n);return(Ic(t)?t:n)[Zi]}var lj=(()=>{class n{static \u0275prov=_t({token:n,providedIn:"root",factory:()=>null})}return n})();var e2={},FR=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,e2,r);return i!==e2||t===e2?i:this.parentInjector.get(e,t,r)}};function d2(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=EA(i,a);else if(o==2){let l=a,c=e[++s];r=EA(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Ai(n,e=0){let t=Zn();if(t===null)return Wn(n,e);let r=ws();return cB(r,t,xs(n),e)}function uj(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,c=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,c]=f.resolveHostDirectives(s);break}_ne(n,e,t,a,o,l,c)}o!==null&&r!==null&&mne(t,r,o)}function mne(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Lt(-301,!1);r.push(e[i],o)}}function yne(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function _ne(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let y=0;y<a;y++){let p=r[y];!l&&id(p)&&(l=!0,yne(n,t,y)),CR(s2(t,e),n,p.type)}Sne(t,n.data.length,a);for(let y=0;y<a;y++){let p=r[y];p.providersResolver&&p.providersResolver(p)}let c=!1,f=!1,d=kB(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let p=r[y];if(t.mergedAttrs=b2(t.mergedAttrs,p.hostAttrs),xne(n,t,e,d,p),bne(d,p,i),s!==null&&s.has(p)){let[x,b]=s.get(p);t.directiveToIndex.set(p.type,[d,x+t.directiveStart,b+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let _=p.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!f&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),d++}vne(n,t,o)}function vne(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))O7(0,e,i,r),O7(1,e,i,r),B7(e,r,!1);else{let o=t.get(i);F7(0,e,o,r),F7(1,e,o,r),B7(e,r,!0)}}}function O7(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),cj(e,o)}}function F7(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),cj(e,s)}}function cj(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function B7(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||cM(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let f of c)if(f===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let f=0;f<c.length;f+=2)if(c[f]===e){s??=[],s.push(c[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function xne(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Qf(i.type,!0)),s=new Qp(o,id(i),Ai,null);n.blueprint[r]=s,t[r]=s,wne(n,e,r,kB(n,t,i.hostVars,ou),i)}function wne(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ene(s)!=a&&s.push(a),s.push(t,r,o)}}function Ene(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function bne(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;id(e)&&(t[""]=n)}}function Sne(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function TM(n,e,t,r,i,o,s,a){let l=e[Jt],c=l.consts,f=ru(c,s),d=bv(l,n,t,r,f);return o&&uj(l,e,d,ru(c,a),i),d.mergedAttrs=b2(d.mergedAttrs,d.attrs),d.attrs!==null&&d2(d,d.attrs,!1),d.mergedAttrs!==null&&d2(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function DM(n,e){nB(n,e),VA(e)&&n.queries.elementEnd(e)}function Cne(n,e,t,r,i,o){let s=e.consts,a=ru(s,i),l=bv(e,n,t,r,a);if(l.mergedAttrs=b2(l.mergedAttrs,l.attrs),o!=null){let c=ru(s,o);l.localNames=[];for(let f=0;f<c.length;f+=2)l.localNames.push(c[f],-1)}return l.attrs!==null&&d2(l,l.attrs,!1),l.mergedAttrs!==null&&d2(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function AM(n){return fj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function hj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function fj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ine(n,e,t){return n[e]=t}function tg(n,e,t){if(t===ou)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dj(n,e,t,r){let i=tg(n,e,t);return tg(n,e+1,r)||i}function t2(n,e,t){return function r(i){let o=rd(n)?nu(n.index,e):e;IM(o,5);let s=e[ao],a=j7(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=j7(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function j7(n,e,t,r){let i=fn(null);try{return Wr(6,e,t),t(r)!==!1}catch(o){return Hte(n,o),!1}finally{Wr(7,e,t),fn(i)}}function pj(n,e,t,r,i,o,s,a){let l=a0(n),c=!1,f=null;if(!r&&l&&(f=Dne(e,t,o,n.index)),f!==null){let d=f.__ngLastListenerFn__||f;d.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,c=!0}else{let d=Tc(n,t),y=r?r(d):d;kee(t,y,o,a);let p=i.listen(y,o,a);if(!Tne(o)){let _=r?x=>r(tu(x[n.index])):n.index;gj(_,e,t,o,a,p,!1)}}return c}function Tne(n){return n.startsWith("animation")||n.startsWith("transition")}function Dne(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[o0],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function gj(n,e,t,r,i,o,s){let a=e.firstCreatePass?JA(e):null,l=KA(t),c=l.length;l.push(i,o),a&&a.push(r,n,c,(c+1)*(s?-1:1))}function U7(n,e,t,r,i,o){let s=e[t],a=e[Jt],c=a.data[t].outputs[r],d=s[c].subscribe(o);gj(n.index,a,e,i,o,d,!0)}var BR=Symbol("BINDING");var p2=class extends Sv{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Lh(e);return new ng(t,this.ngModule)}};function Ane(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&I2.SignalBased)!==0};return i&&(o.transform=i),o})}function Rne(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Mne(n,e,t){let r=e instanceof Oi?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new FR(t,r):t}function Nne(n){let e=n.get(Es,null);if(e===null)throw new Lt(407,!1);let t=n.get(lj,null),r=n.get(bc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Pne(n,e){let t=mj(n);return DB(e,t,t==="svg"?HA:t==="math"?Y6:null)}function mj(n){return(n.selectors[0][0]||"div").toLowerCase()}var ng=class extends L2{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ane(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Rne(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=rte(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Wr(22);let a=fn(null);try{let l=this.componentDef,c=Lne(r,l,s,o),f=Mne(l,i||this.ngModule,e),d=Nne(f),y=d.rendererFactory.createRenderer(null,l),p=r?Pte(y,r,l.encapsulation,f):Pne(l,y),_=s?.some(G7)||o?.some(S=>typeof S!="function"&&S.bindings.some(G7)),x=fM(null,c,null,512|LB(l),null,null,d,y,f,null,bB(p,f,!0));x[Ki]=p,WE(x);let b=null;try{let S=TM(Ki,x,2,"#host",()=>c.directiveRegistry,!0,0);MB(y,p,S),p0(p,x),R2(c,x,S),sM(c,S,x),DM(c,S),t!==void 0&&One(S,this.ngContentSelectors,t),b=nu(S.index,x),x[ao]=b[ao],CM(c,x,null)}catch(S){throw b!==null&&TR(b),TR(x),S}finally{Wr(23),$E()}return new g2(this.componentType,x,!!_)}finally{fn(a)}}};function Lne(n,e,t,r){let i=n?["ng-version","20.3.15"]:ite(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[BR].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let d=r[f];if(typeof d!="function")for(let y of d.bindings){a+=y[BR].requiredVars;let p=f+1;y.create&&(y.targetIdx=p,(o??=[]).push(y)),y.update&&(y.targetIdx=p,(s??=[]).push(y))}}let l=[e];if(r)for(let f of r){let d=typeof f=="function"?f:f.type,y=OA(d);l.push(y)}return hM(0,null,kne(o,s),1,a,l,null,null,null,[i],null)}function kne(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function G7(n){let e=n[BR].kind;return e==="input"||e==="twoWay"}var g2=class extends aj{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=av(t[Jt],Ki),this.location=m0(this._tNode,t),this.instance=nu(this._tNode.index,t)[ao],this.hostView=this.changeDetectorRef=new ad(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=SM(r,i[Jt],i,e,t);this.previousInputValues.set(e,t);let s=nu(r.index,i);IM(s,1)}get injector(){return new Jp(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function One(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ua=(()=>{class n{static __NG_ELEMENT_ID__=Fne}return n})();function Fne(){let n=ws();return _j(n,Zn())}var Bne=Ua,yj=class extends Bne{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return m0(this._hostTNode,this._hostLView)}get injector(){return new Jp(this._hostTNode,this._hostLView)}get parentInjector(){let e=tM(this._hostTNode,this._hostLView);if(iB(e)){let t=i2(e,this._hostLView),r=r2(e),i=t[Jt].data[r+8];return new Jp(i,t)}else return new Jp(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=z7(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ji}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=kR(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,mv(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!see(e),c;if(l)c=t;else{let b=t||{};c=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,s=b.directives,a=b.bindings}let f=l?e:new ng(Lh(e)),d=r||this.parentInjector;if(!o&&f.ngModule==null){let S=(l?d:this.parentInjector).get(Oi,null);S&&(o=S)}let y=Lh(f.componentType??{}),p=kR(this._lContainer,y?.id??null),_=p?.firstChild??null,x=f.create(d,i,_,o,s,a);return this.insertImpl(x.hostView,c,mv(this._hostTNode,p)),x}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Z6(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[qo],c=new yj(l,l[eu],l[qo]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return N2(s,i,o,r),e.attachToViewContainerRef(),NA(yR(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=z7(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_v(this._lContainer,t);r&&(rv(yR(this._lContainer),t),D2(r[Jt],r))}detach(e){let t=this._adjustIndex(e,-1),r=_v(this._lContainer,t);return r&&rv(yR(this._lContainer),t)!=null?new ad(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function z7(n){return n[sv]}function yR(n){return n[sv]||(n[sv]=[])}function _j(n,e){let t,r=e[n.index];return zu(r)?t=r:(t=nj(r,e,null,n),e[n.index]=t,dM(e,t)),Une(t,e,n,r),new yj(t,n,e)}function jne(n,e){let t=n[Zi],r=t.createComment(""),i=Tc(e,n),o=t.parentNode(i);return u2(t,o,r,t.nextSibling(i),!1),r}var Une=Vne,Gne=()=>!1;function zne(n,e,t){return Gne(n,e,t)}function Vne(n,e,t,r){if(n[nd])return;let i;t.type&8?i=tu(r):i=jne(e,t),n[nd]=i}var jR=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},UR=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)RM(e,t).matches!==null&&this.queries[t].setDirty()}},GR=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=Kne(e):this.predicate=e}},zR=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},VR=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,Hne(t,o)),this.matchTNodeWithReadOption(e,t,QE(t,e,o,!1,!1))}else r===iu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,QE(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===li||i===Ua||i===iu&&t.type&4)this.addMatch(t.index,-2);else{let o=QE(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Hne(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function qne(n,e){return n.type&11?m0(n,e):n.type&4?P2(n,e):null}function Wne(n,e,t,r){return t===-1?qne(e,n):t===-2?$ne(n,e,r):gv(n,n[Jt],t,e)}function $ne(n,e,t){if(t===li)return m0(e,n);if(t===iu)return P2(e,n);if(t===Ua)return _j(e,n)}function vj(n,e,t,r){let i=e[Cc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let f=o[c];a.push(Wne(e,f,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function HR(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=vj(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],f=e[-l];for(let d=Ji;d<f.length;d++){let y=f[d];y[td]===y[qo]&&HR(y[Jt],y,c,r)}if(f[Xp]!==null){let d=f[Xp];for(let y=0;y<d.length;y++){let p=d[y];HR(p[Jt],p,c,r)}}}}}return r}function Yne(n,e){return n[Cc].queries[e].queryList}function Xne(n,e,t){let r=new a2((t&4)===4);return Q6(n,e,r,r.destroy),(e[Cc]??=new UR).queries.push(new jR(r))-1}function Zne(n,e,t){let r=rs();return r.firstCreatePass&&(Jne(r,new GR(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),Xne(r,Zn(),e)}function Kne(n){return n.split(",").map(e=>e.trim())}function Jne(n,e,t){n.queries===null&&(n.queries=new zR),n.queries.track(new VR(e,t))}function RM(n,e){return n.queries.getByIndex(e)}function Qne(n,e){let t=n[Jt],r=RM(t,e);return r.crossesNgTemplate?HR(t,n,e,[]):vj(t,n,r,e)}var Uh=class{},k2=class{};var m2=class extends Uh{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new p2(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=kA(e);this._bootstrapComponents=NB(o.bootstrap),this._r3Injector=uR(e,t,[{provide:Uh,useValue:this},{provide:Sv,useValue:this.componentFactoryResolver},...r],Mh(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},y2=class extends k2{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new m2(this.moduleType,e,[])}};var vv=class extends Uh{injector;componentFactoryResolver=new p2(this);instance=null;constructor(e){super();let t=new jp([...e.providers,{provide:Uh,useValue:this},{provide:Sv,useValue:this.componentFactoryResolver}],e.parent||r0(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Cv(n,e,t=null){return new vv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var ere=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=FA(!1,t.type),i=r.length>0?Cv([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=_t({token:n,providedIn:"environment",factory:()=>new n(Wn(Oi))})}return n})();function lr(n){return wv(()=>{let e=xj(n),t=tn(dt({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nM.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ere).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||jh.Emulated,styles:n.styles||Kl,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&zh("NgStandalone"),wj(t);let r=n.dependencies;return t.directiveDefs=V7(r,tre),t.pipeDefs=V7(r,U6),t.id=ire(t),t})}function tre(n){return Lh(n)||OA(n)}function cd(n){return wv(()=>({type:n.type,bootstrap:n.bootstrap||Kl,declarations:n.declarations||Kl,imports:n.imports||Kl,exports:n.exports||Kl,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nre(n,e){if(n==null)return Vp;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=I2.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function rre(n){if(n==null)return Vp;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function su(n){return wv(()=>{let e=xj(n);return wj(e),e})}function MM(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xj(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Vp,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Kl,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nre(n.inputs,e),outputs:rre(n.outputs),debugInfo:null}}function wj(n){n.features?.forEach(e=>e(n))}function V7(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function ire(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ej(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=b2(n.mergedAttrs,n.attrs);let f=n.tView=hM(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),u0(n,!1);let l=sre(t,e,n,r);YE()&&vM(t,e,l,n),p0(l,e);let c=nj(l,e,l,n);e[r+Ki]=c,dM(e,c),zne(c,n,e)}function ore(n,e,t,r,i,o,s,a,l,c,f){let d=t+Ki,y;return e.firstCreatePass?(y=bv(e,d,4,s||null,a||null),VE()&&uj(e,n,y,ru(e.consts,c),wM),nB(e,y)):y=e.data[d],Ej(y,n,e,t,r,i,o,l),a0(y)&&R2(e,n,y),c!=null&&Ev(n,y,f),y}function _2(n,e,t,r,i,o,s,a,l,c,f){let d=t+Ki,y;if(e.firstCreatePass){if(y=bv(e,d,4,s||null,a||null),c!=null){let p=ru(e.consts,c);y.localNames=[];for(let _=0;_<p.length;_+=2)y.localNames.push(p[_],-1)}}else y=e.data[d];return Ej(y,n,e,t,r,i,o,l),c!=null&&Ev(n,y,f),y}function Dr(n,e,t,r,i,o,s,a){let l=Zn(),c=rs(),f=ru(c.consts,o);return ore(l,c,n,e,t,r,i,f,void 0,s,a),Dr}var sre=are;function are(n,e,t,r){return cv(!0),e[Zi].createComment("")}var NM=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var PM=new Ut("");function v0(n){return!!n&&typeof n.then=="function"}function LM(n){return!!n&&typeof n.subscribe=="function"}var bj=new Ut("");var kM=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Me(bj,{optional:!0})??[];injector=Me(Di);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=wa(this.injector,i);if(v0(o))t.push(o);else if(LM(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O2=new Ut("");function Sj(){$D(()=>{let n="";throw new Lt(600,n)})}function Cj(n){return n.isBoundToModule}var lre=10;var au=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Me(bl);afterRenderManager=Me(yM);zonelessEnabled=Me(hv);rootEffectScheduler=Me(fv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new en;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Me(Bh);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ar(t=>!t))}constructor(){Me(sg,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Me(Oi);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Di.NULL){return this._injector.get(vr).run(()=>{Wr(10);let s=t instanceof L2;if(!this._injector.get(kM).done){let _="";throw new Lt(405,_)}let l;s?l=t:l=this._injector.get(Sv).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=Cj(l)?void 0:this._injector.get(Uh),f=r||l.selector,d=l.create(i,[],f,c),y=d.location.nativeElement,p=d.injector.get(PM,null);return p?.registerApplication(y),d.onDestroy(()=>{this.detachView(d.hostView),pv(this.components,d),p?.unregisterApplication(y)}),this._loadComponent(d),Wr(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Wr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(T2.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Lt(101,!1);let t=fn(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,fn(t),this.afterTick.next(),Wr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Es,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<lre;)Wr(14),this.synchronizeOnce(),Wr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!lv(i))continue;let o=r&&!this.zonelessEnabled?0:1;JB(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>lv(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;pv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(O2,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Lt(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function pv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var PDe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var qR=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function _R(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function ure(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),f=e[o],d=_R(o,c,o,f,t);if(d!==0){d<0&&n.updateValue(o,f),o++;continue}let y=n.at(s),p=e[l],_=_R(s,y,l,p,t);if(_!==0){_<0&&n.updateValue(s,p),s--,l--;continue}let x=t(o,c),b=t(s,y),S=t(o,f);if(Object.is(S,b)){let T=t(l,p);Object.is(T,x)?(n.swap(o,s),n.updateValue(s,p),l--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(r??=new v2,i??=q7(n,o,s,t),WR(n,r,o,S))n.updateValue(o,f),o++,s++;else if(i.has(S))r.set(x,n.detach(o)),s--;else{let T=n.create(o,e[o]);n.attach(o,T),o++,s++}}for(;o<=l;)H7(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let f=n.at(o),d=c.value,y=_R(o,f,o,d,t);if(y!==0)y<0&&n.updateValue(o,d),o++,c=l.next();else{r??=new v2,i??=q7(n,o,s,t);let p=t(o,d);if(WR(n,r,o,p))n.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(p))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let _=t(o,f);r.set(_,n.detach(o)),s--}}}for(;!c.done;)H7(n,r,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function WR(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function H7(n,e,t,r,i){if(WR(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function q7(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var v2=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function hd(n,e,t,r,i,o,s,a){zh("NgControlFlow");let l=Zn(),c=rs(),f=ru(c.consts,o);return _2(l,c,n,e,t,r,i,f,256,s,a),OM}function OM(n,e,t,r,i,o,s,a){zh("NgControlFlow");let l=Zn(),c=rs(),f=ru(c.consts,o);return _2(l,c,n,e,t,r,i,f,512,s,a),OM}function fd(n,e){zh("NgControlFlow");let t=Zn(),r=uv(),i=t[r]!==ou?t[r]:-1,o=i!==-1?x2(t,Ki+i):void 0,s=0;if(tg(t,r,n)){let a=fn(null);try{if(o!==void 0&&ij(o,s),n!==-1){let l=Ki+n,c=x2(t,l),f=ZR(t[Jt],l),d=sj(c,f,t),y=M2(t,f,e,{dehydratedView:d});N2(c,y,s,mv(f,d))}}finally{fn(a)}}else if(o!==void 0){let a=rj(o,s);a!==void 0&&(a[ao]=e)}}var $R=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ji}};var YR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Iv(n,e,t,r,i,o,s,a,l,c,f,d,y){zh("NgControlFlow");let p=Zn(),_=rs(),x=l!==void 0,b=Zn(),S=a?s.bind(b[wl][ao]):s,T=new YR(x,S);b[Ki+n]=T,_2(p,_,n+1,e,t,r,i,ru(_.consts,o),256),x&&_2(p,_,n+2,l,c,f,d,ru(_.consts,y),512)}var XR=class extends qR{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ji}at(e){return this.getLView(e)[ao].$implicit}attach(e,t){let r=t[i0];this.needsIndexUpdate||=e!==this.length,N2(this.lContainer,t,e,mv(this.templateTNode,r)),cre(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,hre(this.lContainer,e),fre(this.lContainer,e)}create(e,t){let r=kR(this.lContainer,this.templateTNode.tView.ssrId),i=M2(this.hostLView,this.templateTNode,new $R(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){D2(e[Jt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ao].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ao].$index=e}getLView(e){return dre(this.lContainer,e)}};function Tv(n){let e=fn(null),t=Fh();try{let r=Zn(),i=r[Jt],o=r[t],s=t+1,a=x2(r,s);if(o.liveCollection===void 0){let c=ZR(i,s);o.liveCollection=new XR(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(ure(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=uv(),f=l.length===0;if(tg(r,c,f)){let d=t+2,y=x2(r,d);if(f){let p=ZR(i,d),_=sj(y,p,r),x=M2(r,p,void 0,{dehydratedView:_});N2(y,x,0,mv(p,_))}else i.firstUpdatePass&&hne(y),ij(y,0)}}}finally{fn(e)}}function x2(n,e){return n[e]}function cre(n,e){if(n.length<=Ji)return;let t=Ji+e,r=n[t],i=r?r[Yp]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[kh];yte(o,i),eg.delete(r),i.detachedLeaveAnimationFns=void 0}}function hre(n,e){if(n.length<=Ji)return;let t=Ji+e,r=n[t],i=r?r[Yp]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function fre(n,e){return _v(n,e)}function dre(n,e){return rj(n,e)}function ZR(n,e){return av(n,e)}function xn(n,e,t){let r=Zn(),i=uv();if(tg(r,i,e)){let o=rs(),s=y7();Fte(s,r,n,e,r[Zi],t)}return xn}function W7(n,e,t,r,i){SM(e,n,t,i?"class":"style",r)}function Ve(n,e,t,r){let i=Zn(),o=i[Jt],s=n+Ki,a=o.firstCreatePass?TM(s,i,2,e,wM,VE(),t,r):o.data[s];if(EM(a,i,n,e,Ij),a0(a)){let l=i[Jt];R2(l,i,a),sM(l,a,i)}return r!=null&&Ev(i,a),Ve}function $e(){let n=rs(),e=ws(),t=bM(e);return n.firstCreatePass&&DM(n,t),eR(t)&&tR(),QA(),t.classesWithoutHost!=null&&fee(t)&&W7(n,t,Zn(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&dee(t)&&W7(n,t,Zn(),t.stylesWithoutHost,!1),$e}function kt(n,e,t,r){return Ve(n,e,t,r),$e(),kt}function Fi(n,e,t,r){let i=Zn(),o=i[Jt],s=n+Ki,a=o.firstCreatePass?Cne(s,o,2,e,t,r):o.data[s];return EM(a,i,n,e,Ij),r!=null&&Ev(i,a),Fi}function Qi(){let n=ws(),e=bM(n);return eR(e)&&tR(),QA(),Qi}function Rc(n,e,t,r){return Fi(n,e,t,r),Qi(),Rc}var Ij=(n,e,t,r,i)=>(cv(!0),DB(e[Zi],r,_7()));function x0(n,e,t){let r=Zn(),i=r[Jt],o=n+Ki,s=i.firstCreatePass?TM(o,r,8,"ng-container",wM,VE(),e,t):i.data[o];if(EM(s,r,n,"ng-container",pre),a0(s)){let a=r[Jt];R2(a,r,s),sM(a,s,r)}return t!=null&&Ev(r,s),x0}function w0(){let n=rs(),e=ws(),t=bM(e);return n.firstCreatePass&&DM(n,t),w0}var pre=(n,e,t,r,i)=>(cv(!0),Hee(e[Zi],""));function ui(){return Zn()}var XE=void 0;function gre(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var mre=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],XE,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],XE,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",XE,"{1} 'at' {0}",XE],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",gre],vR={};function Sl(n){let e=yre(n),t=$7(e);if(t)return t;let r=e.split("-")[0];if(t=$7(r),t)return t;if(r==="en")return mre;throw new Lt(701,!1)}function $7(n){return n in vR||(vR[n]=Gp.ng&&Gp.ng.common&&Gp.ng.common.locales&&Gp.ng.common.locales[n]),vR[n]}var lo=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(lo||{});function yre(n){return n.toLowerCase().replace(/_/g,"-")}var Dv="en-US";var _re=Dv;function Tj(n){typeof n=="string"&&(_re=n.toLowerCase().replace(/_/g,"-"))}function Qt(n,e,t){let r=Zn(),i=rs(),o=ws();return vre(i,r,r[Zi],o,n,e,t),Qt}function Av(n,e,t){let r=Zn(),i=rs(),o=ws();return(o.type&3||t)&&pj(o,i,r,t,r[Zi],n,e,t2(o,r,e)),Av}function vre(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=t2(r,e,o),pj(r,n,e,s,t,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let d=0;d<f.length;d+=2){let y=f[d],p=f[d+1];l??=t2(r,e,o),U7(r,e,y,p,i,l)}if(c&&c.length)for(let d of c)l??=t2(r,e,o),U7(r,e,d,i,i,l)}}function nn(n=1){return m7(n)}function F2(n,e,t){Zne(n,e,t)}function B2(n){let e=Zn(),t=rs(),r=sR();qE(r+1);let i=RM(t,r);if(n.dirty&&X6(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=Qne(e,r);n.reset(o,Iee),n.notifyOnChanges()}return!0}return!1}function j2(){return Yne(Zn(),sR())}function Rv(n){let e=o7();return WA(e,Ki+n)}function ZE(n,e){return n<<17|e<<2}function rg(n){return n>>17&32767}function xre(n){return(n&2)==2}function wre(n,e){return n&131071|e<<17}function KR(n){return n|2}function g0(n){return(n&131068)>>2}function xR(n,e){return n&-131069|e<<2}function Ere(n){return(n&1)===1}function JR(n){return n|1}function bre(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=rg(s),l=g0(s);n[r]=t;let c=!1,f;if(Array.isArray(t)){let d=t;f=d[1],(f===null||n0(d,f)>0)&&(c=!0)}else f=t;if(i)if(l!==0){let y=rg(n[a+1]);n[r+1]=ZE(y,a),y!==0&&(n[y+1]=xR(n[y+1],r)),n[a+1]=wre(n[a+1],r)}else n[r+1]=ZE(a,0),a!==0&&(n[a+1]=xR(n[a+1],r)),a=r;else n[r+1]=ZE(l,0),a===0?a=r:n[l+1]=xR(n[l+1],r),l=r;c&&(n[r+1]=KR(n[r+1])),Y7(n,f,r,!0),Y7(n,f,r,!1),Sre(e,f,n,r,o),s=ZE(a,l),o?e.classBindings=s:e.styleBindings=s}function Sre(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&n0(o,e)>=0&&(t[r+1]=JR(t[r+1]))}function Y7(n,e,t,r){let i=n[t+1],o=e===null,s=r?rg(i):g0(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];Cre(l,e)&&(a=!0,n[s+1]=r?JR(c):KR(c)),s=r?rg(c):g0(c)}a&&(n[t+1]=r?KR(i):JR(i))}function Cre(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?n0(n,e)>=0:!1}function Mv(n,e,t){return Dj(n,e,t,!1),Mv}function lu(n,e){return Dj(n,e,null,!0),lu}function Dj(n,e,t,r){let i=Zn(),o=rs(),s=oR(2);if(o.firstUpdatePass&&Tre(o,n,s,r),e!==ou&&tg(i,s,e)){let a=o.data[Fh()];Nre(o,a,i,i[Zi],n,i[s+1]=Pre(e,t),r,s)}}function Ire(n,e){return e>=n.expandoStartIndex}function Tre(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Fh()],s=Ire(n,t);Lre(o,r)&&e===null&&!s&&(e=!1),e=Dre(i,o,e,r),bre(i,o,e,t,s,r)}}function Dre(n,e,t,r){let i=f7(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=wR(null,n,e,t,r),t=xv(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=wR(i,n,e,t,r),o===null){let l=Are(n,e,r);l!==void 0&&Array.isArray(l)&&(l=wR(null,n,e,l[1],r),l=xv(l,e.attrs,r),Rre(n,e,r,l))}else o=Mre(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Are(n,e,t){let r=t?e.classBindings:e.styleBindings;if(g0(r)!==0)return n[rg(r)]}function Rre(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[rg(i)]=r}function Mre(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=xv(r,s,t)}return xv(r,e.attrs,t)}function wR(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=xv(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function xv(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),j6(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Nre(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],f=Ere(c)?X7(l,e,t,i,g0(c),s):void 0;if(!w2(f)){w2(o)||xre(c)&&(o=X7(l,null,t,i,a,s));let d=qA(Fh(),t);Nte(r,s,d,i,o)}}function X7(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),f=c?l[1]:l,d=f===null,y=t[i+1];y===ou&&(y=d?Kl:void 0);let p=d?jE(y,r):f===r?y:void 0;if(c&&!w2(p)&&(p=jE(l,r)),w2(p)&&(a=p,s))return a;let _=n[i+1];i=s?rg(_):g0(_)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=jE(l,r))}return a}function w2(n){return n!==void 0}function Pre(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mh(aM(n)))),n}function Lre(n,e){return(n.flags&(e?8:16))!==0}function yt(n,e=""){let t=Zn(),r=rs(),i=n+Ki,o=r.firstCreatePass?bv(r,i,1,e,null):r.data[i],s=kre(r,t,o,e,n);t[i]=s,YE()&&vM(r,t,s,o),u0(o,!1)}var kre=(n,e,t,r,i)=>(cv(!0),zee(e[Zi],r));function Ore(n,e,t,r=""){return tg(n,uv(),t)?e+t0(t)+r:ou}function Fre(n,e,t,r,i,o=""){let s=a7(),a=dj(n,s,t,i);return oR(2),a?e+t0(t)+r+t0(i)+o:ou}function Mc(n){return uo("",n),Mc}function uo(n,e,t){let r=Zn(),i=Ore(r,n,e,t);return i!==ou&&Aj(r,Fh(),i),uo}function U2(n,e,t,r,i){let o=Zn(),s=Fre(o,n,e,t,r,i);return s!==ou&&Aj(o,Fh(),s),U2}function Aj(n,e,t){let r=qA(e,n);Vee(n[Zi],r,t)}function Bre(n,e,t){let r=rs();if(r.firstCreatePass){let i=id(n);QR(t,r.data,r.blueprint,i,!0),QR(e,r.data,r.blueprint,i,!1)}}function QR(n,e,t,r,i){if(n=xs(n),Array.isArray(n))for(let o=0;o<n.length;o++)QR(n[o],e,t,r,i);else{let o=rs(),s=Zn(),a=ws(),l=Bp(n)?n:xs(n.provide),c=jA(n),f=a.providerIndexes&1048575,d=a.directiveStart,y=a.providerIndexes>>20;if(Bp(n)||!n.multi){let p=new Qp(c,i,Ai,null),_=bR(l,e,i?f:f+y,d);_===-1?(CR(s2(a,s),o,l),ER(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[_]=p,s[_]=p)}else{let p=bR(l,e,f+y,d),_=bR(l,e,f,f+y),x=p>=0&&t[p],b=_>=0&&t[_];if(i&&!b||!i&&!x){CR(s2(a,s),o,l);let S=Gre(i?Ure:jre,t.length,i,r,c,n);!i&&b&&(t[_].providerFactory=S),ER(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=Rj(t[i?_:p],c,!i&&r);ER(o,n,p>-1?p:_,S)}!i&&r&&b&&t[_].componentProviders++}}}function ER(n,e,t,r){let i=Bp(e),o=q6(e);if(i||o){let l=(o?xs(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=c.indexOf(t);f===-1?c.push(t,[r,l]):c[f+1].push(r,l)}else c.push(t,l)}}}function Rj(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function bR(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function jre(n,e,t,r,i){return eM(this.multi,[])}function Ure(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=gv(r,r[Jt],this.providerFactory.index,i);s=l.slice(0,a),eM(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],eM(o,s);return s}function eM(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Gre(n,e,t,r,i,o){let s=new Qp(n,t,Ai,null);return s.multi=[],s.index=e,s.componentProviders=0,Rj(s,i,r&&!t),s}function Nv(n,e=[]){return t=>{t.providersResolver=(r,i)=>Bre(r,i?i(n):n,e)}}function zre(n,e){let t=n[e];return t===ou?void 0:t}function Vre(n,e,t,r,i,o,s){let a=e+t;return dj(n,a,i,o)?Ine(n,a+2,s?r.call(s,i,o):r(i,o)):zre(n,a+2)}function FM(n,e){let t=rs(),r,i=n+Ki;t.firstCreatePass?(r=Hre(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Qf(r.type,!0)),s,a=xa(Ai);try{let l=o2(!1),c=o();return o2(l),$A(t,Zn(),i,c),c}finally{xa(a)}}function Hre(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function BM(n,e,t,r){let i=n+Ki,o=Zn(),s=WA(o,i);return qre(o,i)?Vre(o,s7(),e,s.transform,t,r,s):s.transform(t,r)}function qre(n,e){return n[Jt].data[e].pure}function jM(n,e){return P2(n,e)}var E2=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},UM=(()=>{class n{compileModuleSync(t){return new y2(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kA(t),o=NB(i.declarations).reduce((s,a)=>{let l=Lh(a);return l&&s.push(new ng(l)),s},[]);return new E2(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Wre=(()=>{class n{zone=Me(vr);changeDetectionScheduler=Me(bc);applicationRef=Me(au);applicationErrorHandler=Me(bl);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mj=new Ut("",{factory:()=>!1});function GM({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new vr(tn(dt({},VM()),{scheduleInRootZone:t})),[{provide:vr,useFactory:n},{provide:Ph,multi:!0,useFactory:()=>{let r=Me(Wre,{optional:!0});return()=>r.initialize()}},{provide:Ph,multi:!0,useFactory:()=>{let r=Me($re);return()=>{r.initialize()}}},e===!0?{provide:fR,useValue:!0}:[],{provide:dR,useValue:t??FB},{provide:bl,useFactory:()=>{let r=Me(vr),i=Me(Oi),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Jl),o.handleError(s))})}}}]}function zM(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=GM({ngZoneFactory:()=>{let i=VM(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&zh("NgZone_CoalesceEvent"),new vr(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Hp([{provide:Mj,useValue:!0},{provide:hv,useValue:!1},r])}function VM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var $re=(()=>{class n{subscription=new gr;initialized=!1;zone=Me(vr);pendingTasks=Me(Bh);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{vr.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{vr.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Nj=(()=>{class n{applicationErrorHandler=Me(bl);appRef=Me(au);taskService=Me(Bh);ngZone=Me(vr);zonelessEnabled=Me(hv);tracing=Me(sg,{optional:!0});disableScheduling=Me(fR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new gr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(c2):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Me(dR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof h2||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?R7:BB;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(c2+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,R7(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yre(){return typeof $localize<"u"&&$localize.locale||Dv}var Pv=new Ut("",{providedIn:"root",factory:()=>Me(Pv,{optional:!0,skipSelf:!0})||Yre()});function Nc(n){return T6(n)}function Lv(n,e){return tE(n,e?.equal)}var HM=class{[_a];constructor(e){this[_a]=e}destroy(){this[_a].destroy()}};function Vh(n,e){let t=e?.injector??Me(Di),r=e?.manualCleanup!==!0?t.get(Vu):null,i,o=t.get(h0,null,{optional:!0}),s=t.get(bc);return o!==null?(i=Kre(o.view,s,n),r instanceof ev&&r._lView===o.view&&(r=null)):i=Jre(n,t.get(fv),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new HM(i)}var Pj=tn(dt({},D6),{cleanupFns:void 0,zone:null,onDestroyFn:Kp,run(){let n=c0(!1);try{A6(this)}finally{c0(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=fn(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],fn(n)}}}),Xre=tn(dt({},Pj),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Mp(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),Zre=tn(dt({},Pj),{consumerMarkedDirty(){this.view[pn]|=8192,od(this.view),this.notifier.notify(13)},destroy(){Mp(this),this.onDestroyFn(),this.cleanup(),this.view[Oh]?.delete(this)}});function Kre(n,e,t){let r=Object.create(Zre);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=Lj(r,t),n[Oh]??=new Set,n[Oh].add(r),r.consumerMarkedDirty(r),r}function Jre(n,e,t){let r=Object.create(Xre);return r.fn=Lj(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function Lj(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var Bj=Symbol("InputSignalNode#UNSET"),_ie=tn(dt({},nE),{transformFn:void 0,applyValueToInputSignal(n,e){Om(n,e)}});function jj(n,e){let t=Object.create(_ie);t.value=n,t.transformFn=e?.transform;function r(){if(Nm(t),t.value===Bj){let i=null;throw new Lt(-950,i)}return t.value}return r[_a]=t,r}var vie=new Ut("");vie.__NG_ELEMENT_ID__=n=>{let e=ws();if(e===null)throw new Lt(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Lt(204,!1)};function kj(n,e){return jj(n,e)}function xie(n){return jj(Bj,n)}var Uj=(kj.required=xie,kj);var qM=new Ut(""),wie=new Ut("");function kv(n){return!n.moduleRef}function Eie(n){let e=kv(n)?n.r3Injector:n.moduleRef.injector,t=e.get(vr);return t.run(()=>{kv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(bl),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),kv(n)){let o=()=>e.destroy(),s=n.platformInjector.get(qM);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(qM);s.add(o),n.moduleRef.onDestroy(()=>{pv(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Sie(r,t,()=>{let o=e.get(Bh),s=o.add(),a=e.get(kM);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Pv,Dv);if(Tj(l||Dv),!e.get(wie,!0))return kv(n)?e.get(au):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(kv(n)){let f=e.get(au);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return bie?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var bie;function Sie(n,e,t){try{let r=t();return v0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var G2=null;function Cie(n=[],e){return Di.create({name:e,providers:[{provide:iv,useValue:"platform"},{provide:qM,useValue:new Set([()=>G2=null])},...n]})}function Iie(n=[]){if(G2)return G2;let e=Cie(n);return G2=e,Sj(),Tie(e),e}function Tie(n){let e=n.get(S2,null);wa(n,()=>{e?.forEach(t=>t())})}var E0=(()=>{class n{static __NG_ELEMENT_ID__=Die}return n})();function Die(n){return Aie(ws(),Zn(),(n&16)===16)}function Aie(n,e,t){if(rd(n)&&!t){let r=nu(n.index,e);return new ad(r,r)}else if(n.type&175){let r=e[wl];return new ad(r,e)}return null}var WM=class{constructor(){}supports(e){return AM(e)}create(e){return new $M(e)}},Rie=(n,e)=>e,$M=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Rie}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Oj(r,i,o)?t:r,a=Oj(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,f=l-i;if(c!=f){for(let y=0;y<c;y++){let p=y<o.length?o[y]:o[y]=0,_=p+y;f<=_&&_<c&&(o[y]=p+1)}let d=s.previousIndex;o[d]=f-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!AM(e))throw new Lt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,hj(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new YM(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new z2),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new z2),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},YM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},XM=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},z2=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new XM,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Oj(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Fj(){return new V2([new WM])}var V2=(()=>{class n{factories;static \u0275prov=_t({token:n,providedIn:"root",factory:Fj});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Me(n,{optional:!0,skipSelf:!0});return n.create(t,r||Fj())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Lt(901,!1)}}return n})();function Gj(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Wr(8);try{let o=i?.injector??Iie(r),s=[GM({}),{provide:bc,useExisting:Nj},x7,...t||[]],a=new vv({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Eie({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Wr(9)}}function b0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function zj(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function H2(n,e){let t=Lh(n),r=e.elementInjector||r0();return new ng(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var qj=null;function Hh(){return qj}function ZM(n){qj??=n}var Ov=class{},KM=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(Wj),providedIn:"platform"})}return n})();var Wj=(()=>{class n extends KM{_location;_history;_doc=Me(wr);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hh().getBaseHref(this._doc)}onPopState(t){let r=Hh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Hh().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function $j(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function Vj(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function dd(n){return n&&n[0]!=="?"?`?${n}`:n}var q2=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(Xj),providedIn:"root"})}return n})(),Yj=new Ut(""),Xj=(()=>{class n extends q2{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Me(wr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return $j(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+dd(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+dd(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+dd(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Wn(KM),Wn(Yj,8))};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pd=(()=>{class n{_subject=new en;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Pie(Vj(Hj(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+dd(r))}normalize(t){return n.stripTrailingSlash(Nie(this._basePath,Hj(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dd(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+dd(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=dd;static joinWithSlash=$j;static stripTrailingSlash=Vj;static \u0275fac=function(r){return new(r||n)(Wn(q2))};static \u0275prov=_t({token:n,factory:()=>Mie(),providedIn:"root"})}return n})();function Mie(){return new pd(Wn(q2))}function Nie(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Hj(n){return n.replace(/\/index.html$/,"")}function Pie(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var $s=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})($s||{}),ei=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(ei||{}),za=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(za||{}),Wh={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function eU(n){return Sl(n)[lo.LocaleId]}function tU(n,e,t){let r=Sl(n),i=[r[lo.DayPeriodsFormat],r[lo.DayPeriodsStandalone]],o=uu(i,e);return uu(o,t)}function nU(n,e,t){let r=Sl(n),i=[r[lo.DaysFormat],r[lo.DaysStandalone]],o=uu(i,e);return uu(o,t)}function rU(n,e,t){let r=Sl(n),i=[r[lo.MonthsFormat],r[lo.MonthsStandalone]],o=uu(i,e);return uu(o,t)}function iU(n,e){let r=Sl(n)[lo.Eras];return uu(r,e)}function Fv(n,e){let t=Sl(n);return uu(t[lo.DateFormat],e)}function Bv(n,e){let t=Sl(n);return uu(t[lo.TimeFormat],e)}function jv(n,e){let r=Sl(n)[lo.DateTimeFormat];return uu(r,e)}function Uv(n,e){let t=Sl(n),r=t[lo.NumberSymbols][e];if(typeof r>"u"){if(e===Wh.CurrencyDecimal)return t[lo.NumberSymbols][Wh.Decimal];if(e===Wh.CurrencyGroup)return t[lo.NumberSymbols][Wh.Group]}return r}function oU(n){if(!n[lo.ExtraData])throw new Lt(2303,!1)}function sU(n){let e=Sl(n);return oU(e),(e[lo.ExtraData][2]||[]).map(r=>typeof r=="string"?JM(r):[JM(r[0]),JM(r[1])])}function aU(n,e,t){let r=Sl(n);oU(r);let i=[r[lo.ExtraData][0],r[lo.ExtraData][1]],o=uu(i,e)||[];return uu(o,t)||[]}function uu(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Lt(2304,!1)}function JM(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Lie=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,W2={},kie=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function lU(n,e,t,r){let i=Hie(n);e=qh(t,e)||e;let s=[],a;for(;e;)if(a=kie.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=cU(r,l),i=Vie(i,r));let c="";return s.forEach(f=>{let d=Gie(f);c+=d?d(i,t,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function K2(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function qh(n,e){let t=eU(n);if(W2[t]??={},W2[t][e])return W2[t][e];let r="";switch(e){case"shortDate":r=Fv(n,za.Short);break;case"mediumDate":r=Fv(n,za.Medium);break;case"longDate":r=Fv(n,za.Long);break;case"fullDate":r=Fv(n,za.Full);break;case"shortTime":r=Bv(n,za.Short);break;case"mediumTime":r=Bv(n,za.Medium);break;case"longTime":r=Bv(n,za.Long);break;case"fullTime":r=Bv(n,za.Full);break;case"short":let i=qh(n,"shortTime"),o=qh(n,"shortDate");r=$2(jv(n,za.Short),[i,o]);break;case"medium":let s=qh(n,"mediumTime"),a=qh(n,"mediumDate");r=$2(jv(n,za.Medium),[s,a]);break;case"long":let l=qh(n,"longTime"),c=qh(n,"longDate");r=$2(jv(n,za.Long),[l,c]);break;case"full":let f=qh(n,"fullTime"),d=qh(n,"fullDate");r=$2(jv(n,za.Full),[f,d]);break}return r&&(W2[t][e]=r),r}function $2(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function qu(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Oie(n,e){return qu(n,3).substring(0,e)}function Co(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Fie(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Oie(a,e);let l=Uv(s,Wh.MinusSign);return qu(a,e,l,r,i)}}function Fie(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Lt(2301,!1)}}function yi(n,e,t=$s.Format,r=!1){return function(i,o){return Bie(i,o,n,e,t,r)}}function Bie(n,e,t,r,i,o){switch(t){case 2:return rU(e,i,r)[n.getMonth()];case 1:return nU(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=sU(e),f=aU(e,i,r),d=c.findIndex(y=>{if(Array.isArray(y)){let[p,_]=y,x=s>=p.hours&&a>=p.minutes,b=s<_.hours||s===_.hours&&a<_.minutes;if(p.hours<_.hours){if(x&&b)return!0}else if(x||b)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(d!==-1)return f[d]}return tU(e,i,r)[s<12?0:1];case 3:return iU(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Lt(2302,!1)}}function Y2(n){return function(e,t,r){let i=-1*r,o=Uv(t,Wh.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+qu(s,2,o)+qu(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+qu(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+qu(s,2,o)+":"+qu(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+qu(s,2,o)+":"+qu(Math.abs(i%60),2,o);default:throw new Lt(2310,!1)}}}var jie=0,Z2=4;function Uie(n){let e=K2(n,jie,1).getDay();return K2(n,0,1+(e<=Z2?Z2:Z2+7)-e)}function uU(n){let e=n.getDay(),t=e===0?-3:Z2-e;return K2(n.getFullYear(),n.getMonth(),n.getDate()+t)}function QM(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=uU(t),s=Uie(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return qu(i,n,Uv(r,Wh.MinusSign))}}function X2(n,e=!1){return function(t,r){let o=uU(t).getFullYear();return qu(o,n,Uv(r,Wh.MinusSign),e)}}var e5={};function Gie(n){if(e5[n])return e5[n];let e;switch(n){case"G":case"GG":case"GGG":e=yi(3,ei.Abbreviated);break;case"GGGG":e=yi(3,ei.Wide);break;case"GGGGG":e=yi(3,ei.Narrow);break;case"y":e=Co(0,1,0,!1,!0);break;case"yy":e=Co(0,2,0,!0,!0);break;case"yyy":e=Co(0,3,0,!1,!0);break;case"yyyy":e=Co(0,4,0,!1,!0);break;case"Y":e=X2(1);break;case"YY":e=X2(2,!0);break;case"YYY":e=X2(3);break;case"YYYY":e=X2(4);break;case"M":case"L":e=Co(1,1,1);break;case"MM":case"LL":e=Co(1,2,1);break;case"MMM":e=yi(2,ei.Abbreviated);break;case"MMMM":e=yi(2,ei.Wide);break;case"MMMMM":e=yi(2,ei.Narrow);break;case"LLL":e=yi(2,ei.Abbreviated,$s.Standalone);break;case"LLLL":e=yi(2,ei.Wide,$s.Standalone);break;case"LLLLL":e=yi(2,ei.Narrow,$s.Standalone);break;case"w":e=QM(1);break;case"ww":e=QM(2);break;case"W":e=QM(1,!0);break;case"d":e=Co(2,1);break;case"dd":e=Co(2,2);break;case"c":case"cc":e=Co(7,1);break;case"ccc":e=yi(1,ei.Abbreviated,$s.Standalone);break;case"cccc":e=yi(1,ei.Wide,$s.Standalone);break;case"ccccc":e=yi(1,ei.Narrow,$s.Standalone);break;case"cccccc":e=yi(1,ei.Short,$s.Standalone);break;case"E":case"EE":case"EEE":e=yi(1,ei.Abbreviated);break;case"EEEE":e=yi(1,ei.Wide);break;case"EEEEE":e=yi(1,ei.Narrow);break;case"EEEEEE":e=yi(1,ei.Short);break;case"a":case"aa":case"aaa":e=yi(0,ei.Abbreviated);break;case"aaaa":e=yi(0,ei.Wide);break;case"aaaaa":e=yi(0,ei.Narrow);break;case"b":case"bb":case"bbb":e=yi(0,ei.Abbreviated,$s.Standalone,!0);break;case"bbbb":e=yi(0,ei.Wide,$s.Standalone,!0);break;case"bbbbb":e=yi(0,ei.Narrow,$s.Standalone,!0);break;case"B":case"BB":case"BBB":e=yi(0,ei.Abbreviated,$s.Format,!0);break;case"BBBB":e=yi(0,ei.Wide,$s.Format,!0);break;case"BBBBB":e=yi(0,ei.Narrow,$s.Format,!0);break;case"h":e=Co(3,1,-12);break;case"hh":e=Co(3,2,-12);break;case"H":e=Co(3,1);break;case"HH":e=Co(3,2);break;case"m":e=Co(4,1);break;case"mm":e=Co(4,2);break;case"s":e=Co(5,1);break;case"ss":e=Co(5,2);break;case"S":e=Co(6,1);break;case"SS":e=Co(6,2);break;case"SSS":e=Co(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Y2(0);break;case"ZZZZZ":e=Y2(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Y2(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Y2(2);break;default:return null}return e5[n]=e,e}function cU(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function zie(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Vie(n,e,t){let i=n.getTimezoneOffset(),o=cU(e,i);return zie(n,-1*(o-i))}function Hie(n){if(Zj(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return K2(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Lie))return qie(r)}let e=new Date(n);if(!Zj(e))throw new Lt(2311,!1);return e}function qie(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,c),e}function Zj(n){return n instanceof Date&&!isNaN(n.valueOf())}var t5=/\s+/,Kj=[],$h=(()=>{class n{_ngEl;_renderer;initialClasses=Kj;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(t5):Kj}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(t5):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(t5).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Ai(li),Ai(_0))};static \u0275dir=su({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var J2=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},S0=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new J2(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Jj(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Jj(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ai(Ua),Ai(iu),Ai(V2))};static \u0275dir=su({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Jj(n,e){n.context.$implicit=e.item}var co=(()=>{class n{_viewContainer;_context=new Q2;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qj(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qj(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Ai(Ua),Ai(iu))};static \u0275dir=su({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Q2=class{$implicit=null;ngIf=null};function Qj(n,e){if(n&&!n.createEmbeddedView)throw new Lt(2020,!1)}function Wie(n,e){return new Lt(2100,!1)}var $ie="mediumDate",hU=new Ut(""),fU=new Ut(""),n5=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??$ie,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return lU(t,s,o||this.locale,a)}catch(s){throw Wie(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Ai(Pv,16),Ai(hU,24),Ai(fU,24))};static \u0275pipe=MM({name:"date",type:n,pure:!0})}return n})();var ti=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=cd({type:n});static \u0275inj=Nh({})}return n})();function r5(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Gv=class{};var i5="browser";function dU(n){return n===i5}var zv=class{_doc;constructor(e){this._doc=e}manager},eb=(()=>{class n extends zv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Wn(wr))};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})(),nb=new Ut(""),u5=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof eb));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof eb);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Lt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Wn(nb),Wn(vr))};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})(),o5="ng-app-id";function pU(n){for(let e of n)e.remove()}function gU(n,e){let t=e.createElement("style");return t.textContent=n,t}function Yie(n,e,t,r){let i=n.head?.querySelectorAll(`style[${o5}="${e}"],link[${o5}="${e}"]`);if(i)for(let o of i)o.removeAttribute(o5),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function a5(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var c5=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,Yie(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,gU);r?.forEach(i=>this.addUsage(i,this.external,a5))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(pU(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pU(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,gU(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,a5(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Wn(wr),Wn(y0),Wn(C2,8),Wn(og))};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})(),s5={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},h5=/%COMP%/g;var yU="%COMP%",Xie=`_nghost-${yU}`,Zie=`_ngcontent-${yU}`,Kie=!0,Jie=new Ut("",{providedIn:"root",factory:()=>Kie});function Qie(n){return Zie.replace(h5,n)}function eoe(n){return Xie.replace(h5,n)}function _U(n,e){return e.map(t=>t.replace(h5,n))}var f5=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l=null,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Vv(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof tb?i.applyToHost(t):i instanceof Hv&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case jh.Emulated:o=new tb(l,c,r,this.appId,f,s,a,d,y);break;case jh.ShadowDom:return new l5(l,c,t,r,s,a,this.nonce,d,y);default:o=new Hv(l,c,r,f,s,a,d,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Wn(u5),Wn(c5),Wn(y0),Wn(Jie),Wn(wr),Wn(vr),Wn(C2),Wn(sg,8))};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})(),Vv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(s5[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mU(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mU(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Lt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=s5[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=s5[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ac.DashCase|Ac.Important)?e.style.setProperty(t,r,i&Ac.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ac.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Hh().getGlobalEventTarget(this.doc,e),!e))throw new Lt(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function mU(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var l5=class extends Vv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=_U(i.id,f);for(let y of f){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=y,this.shadowRoot.appendChild(p)}let d=i.getExternalStyles?.();if(d)for(let y of d){let p=a5(y,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hv=class extends Vv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=c?_U(c,f):f,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&eg.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},tb=class extends Hv{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,c){let f=i+"-"+r.id;super(e,t,r,o,s,a,l,c,f),this.contentAttr=Qie(f),this.hostAttr=eoe(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var rb=class n extends Ov{supportsDOMEvents=!0;static makeCurrent(){ZM(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=toe();return t==null?null:noe(t)}resetBaseElement(){qv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return r5(document.cookie,e)}},qv=null;function toe(){return qv=qv||document.head.querySelector("base"),qv?qv.getAttribute("href"):null}function noe(n){return new URL(n,document.baseURI).pathname}var roe=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})(),vU=["alt","control","meta","shift"],ioe={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ooe={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xU=(()=>{class n extends zv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hh().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),vU.forEach(c=>{let f=r.indexOf(c);f>-1&&(r.splice(f,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=ioe[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),vU.forEach(s=>{if(s!==i){let a=ooe[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Wn(wr))};static \u0275prov=_t({token:n,factory:n.\u0275fac})}return n})();function d5(n,e,t){let r=dt({rootComponent:n,platformRef:t?.platformRef},soe(e));return Gj(r)}function soe(n){return{appProviders:[...hoe,...n?.providers??[]],platformProviders:coe}}function aoe(){rb.makeCurrent()}function loe(){return new Jl}function uoe(){return rM(document),document}var coe=[{provide:og,useValue:i5},{provide:S2,useValue:aoe,multi:!0},{provide:wr,useFactory:uoe}];var hoe=[{provide:iv,useValue:"root"},{provide:Jl,useFactory:loe},{provide:nb,useClass:eb,multi:!0,deps:[wr]},{provide:nb,useClass:xU,multi:!0,deps:[wr]},f5,c5,u5,{provide:Es,useExisting:f5},{provide:Gv,useClass:roe},[]];var wU=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Wn(wr))};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mn="primary",i1=Symbol("RouteTitle"),_5=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function R0(n){return new _5(n)}function doe(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function poe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pc(n[t],e[t]))return!1;return!0}function Pc(n,e){let t=n?v5(n):void 0,r=e?v5(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!AU(n[i],e[i]))return!1;return!0}function v5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function AU(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function RU(n){return n.length>0?n[n.length-1]:null}function Zh(n){return CE(n)?n:v0(n)?Xi(Promise.resolve(n)):dn(n)}var goe={exact:NU,subset:PU},MU={exact:moe,subset:yoe,ignored:()=>!0};function EU(n,e,t){return goe[t.paths](n.root,e.root,t.matrixParams)&&MU[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function moe(n,e){return Pc(n,e)}function NU(n,e,t){if(!lg(n.segments,e.segments)||!sb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!NU(n.children[r],e.children[r],t))return!1;return!0}function yoe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AU(n[t],e[t]))}function PU(n,e,t){return LU(n,e,e.segments,t)}function LU(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!lg(i,t)||e.hasChildren()||!sb(i,t,r))}else if(n.segments.length===t.length){if(!lg(n.segments,t)||!sb(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!PU(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!lg(n.segments,i)||!sb(n.segments,i,r)||!n.children[Mn]?!1:LU(n.children[Mn],e,o,r)}}function sb(n,e,t){return e.every((r,i)=>MU[t](n[i].parameters,r.parameters))}var Xh=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Br([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=R0(this.queryParams),this._queryParamMap}toString(){return xoe.serialize(this)}},Br=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ab(this)}},ag=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=R0(this.parameters),this._parameterMap}toString(){return OU(this)}};function _oe(n,e){return lg(n,e)&&n.every((t,r)=>Pc(t.parameters,e[r].parameters))}function lg(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function voe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Mn&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Mn&&(t=t.concat(e(i,r)))}),t}var vb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>new M0,providedIn:"root"})}return n})(),M0=class{parse(e){let t=new w5(e);return new Xh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wv(e.root,!0)}`,r=boe(e.queryParams),i=typeof e.fragment=="string"?`#${woe(e.fragment)}`:"";return`${t}${r}${i}`}},xoe=new M0;function ab(n){return n.segments.map(e=>OU(e)).join("/")}function Wv(n,e){if(!n.hasChildren())return ab(n);if(e){let t=n.children[Mn]?Wv(n.children[Mn],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Mn&&r.push(`${i}:${Wv(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=voe(n,(r,i)=>i===Mn?[Wv(n.children[Mn],!1)]:[`${i}:${Wv(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Mn]!=null?`${ab(n)}/${t[0]}`:`${ab(n)}/(${t.join("//")})`}}function kU(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ib(n){return kU(n).replace(/%3B/gi,";")}function woe(n){return encodeURI(n)}function x5(n){return kU(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lb(n){return decodeURIComponent(n)}function bU(n){return lb(n.replace(/\+/g,"%20"))}function OU(n){return`${x5(n.path)}${Eoe(n.parameters)}`}function Eoe(n){return Object.entries(n).map(([e,t])=>`;${x5(e)}=${x5(t)}`).join("")}function boe(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${ib(t)}=${ib(i)}`).join("&"):`${ib(t)}=${ib(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Soe=/^[^\/()?;#]+/;function p5(n){let e=n.match(Soe);return e?e[0]:""}var Coe=/^[^\/()?;=#]+/;function Ioe(n){let e=n.match(Coe);return e?e[0]:""}var Toe=/^[^=?&#]+/;function Doe(n){let e=n.match(Toe);return e?e[0]:""}var Aoe=/^[^&#]+/;function Roe(n){let e=n.match(Aoe);return e?e[0]:""}var w5=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Br([],{}):new Br([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mn]=new Br(e,t)),r}parseSegment(){let e=p5(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Lt(4009,!1);return this.capture(e),new ag(lb(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Ioe(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=p5(this.remaining);i&&(r=i,this.capture(r))}e[lb(t)]=lb(r)}parseQueryParam(e){let t=Doe(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Roe(this.remaining);s&&(r=s,this.capture(r))}let i=bU(t),o=bU(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=p5(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Lt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Mn);let s=this.parseChildren();t[o??Mn]=Object.keys(s).length===1&&s[Mn]?s[Mn]:new Br([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Lt(4011,!1)}};function FU(n){return n.segments.length>0?new Br([],{[Mn]:n}):n}function BU(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=BU(i);if(r===Mn&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Br(n.segments,e);return Moe(t)}function Moe(n){if(n.numberOfChildren===1&&n.children[Mn]){let e=n.children[Mn];return new Br(n.segments.concat(e.segments),e.children)}return n}function N0(n){return n instanceof Xh}function Noe(n,e,t=null,r=null){let i=jU(n);return UU(i,e,t,r)}function jU(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new Br(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=FU(r);return e??i}function UU(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return g5(i,i,i,t,r);let o=Poe(e);if(o.toRoot())return g5(i,i,new Br([],{}),t,r);let s=Loe(o,i,n),a=s.processChildren?Yv(s.segmentGroup,s.index,o.commands):zU(s.segmentGroup,s.index,o.commands);return g5(i,s.segmentGroup,a,t,r)}function ub(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kv(n){return typeof n=="object"&&n!=null&&n.outlets}function g5(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let s;n===e?s=t:s=GU(n,e,t);let a=FU(BU(s));return new Xh(a,o,i)}function GU(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=GU(o,e,t)}),new Br(n.segments,r)}var cb=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ub(r[0]))throw new Lt(4003,!1);let i=r.find(Kv);if(i&&i!==RU(r))throw new Lt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Poe(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cb(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cb(t,e,r)}var T0=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Loe(n,e,t){if(n.isAbsolute)return new T0(e,!0,0);if(!t)return new T0(e,!1,NaN);if(t.parent===null)return new T0(t,!0,0);let r=ub(n.commands[0])?0:1,i=t.segments.length-1+r;return koe(t,i,n.numberOfDoubleDots)}function koe(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Lt(4005,!1);i=r.segments.length}return new T0(r,!1,i-o)}function Ooe(n){return Kv(n[0])?n[0].outlets:{[Mn]:n}}function zU(n,e,t){if(n??=new Br([],{}),n.segments.length===0&&n.hasChildren())return Yv(n,e,t);let r=Foe(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Br(n.segments.slice(0,r.pathIndex),{});return o.children[Mn]=new Br(n.segments.slice(r.pathIndex),n.children),Yv(o,0,i)}else return r.match&&i.length===0?new Br(n.segments,{}):r.match&&!n.hasChildren()?E5(n,e,t):r.match?Yv(n,0,i):E5(n,e,t)}function Yv(n,e,t){if(t.length===0)return new Br(n.segments,{});{let r=Ooe(t),i={};if(Object.keys(r).some(o=>o!==Mn)&&n.children[Mn]&&n.numberOfChildren===1&&n.children[Mn].segments.length===0){let o=Yv(n.children[Mn],e,t);return new Br(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=zU(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Br(n.segments,i)}}function Foe(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Kv(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!CU(l,c,s))return o;r+=2}else{if(!CU(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function E5(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Kv(o)){let l=Boe(o.outlets);return new Br(r,l)}if(i===0&&ub(t[0])){let l=n.segments[e];r.push(new ag(l.path,SU(t[0]))),i++;continue}let s=Kv(o)?o.outlets[Mn]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ub(a)?(r.push(new ag(s,SU(a))),i+=2):(r.push(new ag(s,{})),i++)}return new Br(r,{})}function Boe(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=E5(new Br([],{}),0,r))}),e}function SU(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CU(n,e,t){return n==t.path&&Pc(e,t.parameters)}var Xv="imperative",bs=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(bs||{}),hu=class{id;url;constructor(e,t){this.id=e,this.url=t}},P0=class extends hu{type=bs.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gd=class extends hu{urlAfterRedirects;type=bs.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Va=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Va||{}),hb=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(hb||{}),Yh=class extends hu{reason;code;type=bs.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},md=class extends hu{reason;code;type=bs.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Jv=class extends hu{error;target;type=bs.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fb=class extends hu{urlAfterRedirects;state;type=bs.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b5=class extends hu{urlAfterRedirects;state;type=bs.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},S5=class extends hu{urlAfterRedirects;state;shouldActivate;type=bs.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},C5=class extends hu{urlAfterRedirects;state;type=bs.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},I5=class extends hu{urlAfterRedirects;state;type=bs.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},T5=class{route;type=bs.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},D5=class{route;type=bs.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},A5=class{snapshot;type=bs.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R5=class{snapshot;type=bs.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},M5=class{snapshot;type=bs.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},N5=class{snapshot;type=bs.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qv=class{},L0=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function joe(n){return!(n instanceof Qv)&&!(n instanceof L0)}function Uoe(n,e){return n.providers&&!n._injector&&(n._injector=Cv(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wu(n){return n.outlet||Mn}function Goe(n,e){let t=n.filter(r=>Wu(r)===e);return t.push(...n.filter(r=>Wu(r)!==e)),t}function O0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var P5=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return O0(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new o1(this.rootInjector)}},o1=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new P5(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Wn(Oi))};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),db=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=L5(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=L5(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=k5(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return k5(e,this._root).map(t=>t.value)}};function L5(n,e){if(n===e.value)return e;for(let t of e.children){let r=L5(n,t);if(r)return r}return null}function k5(n,e){if(n===e.value)return[e];for(let t of e.children){let r=k5(n,t);if(r.length)return r.unshift(e),r}return[]}var Cl=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function I0(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var pb=class extends db{snapshot;constructor(e,t){super(e),this.snapshot=t,H5(this,e)}toString(){return this.snapshot.toString()}};function VU(n){let e=zoe(n),t=new Vo([new ag("",{})]),r=new Vo({}),i=new Vo({}),o=new Vo({}),s=new Vo(""),a=new ug(t,r,o,s,i,Mn,n,e.root);return a.snapshot=e.root,new pb(new Cl(a,[]),e)}function zoe(n){let e={},t={},r={},o=new D0([],e,r,"",t,Mn,n,null,{});return new mb("",new Cl(o,[]))}var ug=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ar(c=>c[i1]))??dn(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ar(e=>R0(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ar(e=>R0(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gb(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:dt(dt({},e.params),n.params),data:dt(dt({},e.data),n.data),resolve:dt(dt(dt(dt({},n.data),e.data),i?.data),n._resolvedData)}:r={params:dt({},n.params),data:dt({},n.data),resolve:dt(dt({},n.data),n._resolvedData??{})},i&&qU(i)&&(r.resolve[i1]=i.title),r}var D0=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[i1]}constructor(e,t,r,i,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=R0(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=R0(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mb=class extends db{url;constructor(e,t){super(t),this.url=e,H5(this,t)}toString(){return HU(this._root)}};function H5(n,e){e.value._routerState=n,e.children.forEach(t=>H5(n,t))}function HU(n){let e=n.children.length>0?` { ${n.children.map(HU).join(", ")} } `:"";return`${n.value}${e}`}function m5(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pc(e.params,t.params)||n.paramsSubject.next(t.params),poe(e.url,t.url)||n.urlSubject.next(t.url),Pc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function O5(n,e){let t=Pc(n.params,e.params)&&_oe(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||O5(n.parent,e.parent))}function qU(n){return typeof n.title=="string"||n.title===null}var Voe=new Ut(""),WU=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Mn;activateEvents=new mi;deactivateEvents=new mi;attachEvents=new mi;detachEvents=new mi;routerOutletData=Uj();parentContexts=Me(o1);location=Me(Ua);changeDetector=Me(E0);inputBinder=Me(xb,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Lt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Lt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Lt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Lt(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new F5(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=su({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ld]})}return n})(),F5=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ug?this.route:e===o1?this.childContexts:e===Voe?this.outletData:this.parent.get(e,t)}},xb=new Ut("");var $U=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=lr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&kt(0,"router-outlet")},dependencies:[WU],encapsulation:2})}return n})();function q5(n){let e=n.children&&n.children.map(q5),t=e?tn(dt({},n),{children:e}):dt({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mn&&(t.component=$U),t}function Hoe(n,e,t){let r=e1(n,e._root,t?t._root:void 0);return new pb(r,e)}function e1(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=qoe(n,e,t);return new Cl(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>e1(n,a)),s}}let r=Woe(e.value),i=e.children.map(o=>e1(n,o));return new Cl(r,i)}}function qoe(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return e1(n,r,i);return e1(n,r)})}function Woe(n){return new ug(new Vo(n.url),new Vo(n.params),new Vo(n.queryParams),new Vo(n.fragment),new Vo(n.data),n.outlet,n.component,n)}var t1=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},YU="ngNavigationCancelingError";function yb(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=N0(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=XU(!1,Va.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function XU(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[YU]=!0,t.cancellationCode=e,t}function $oe(n){return ZU(n)&&N0(n.url)}function ZU(n){return!!n&&n[YU]}var Yoe=(n,e,t,r)=>ar(i=>(new B5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),B5=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),m5(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=I0(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=I0(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=I0(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=I0(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new N5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new R5(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(m5(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),m5(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},_b=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},A0=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Xoe(n,e,t){let r=n._root,i=e?e._root:null;return $v(r,i,t,[r.value])}function Zoe(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function F0(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!SA(n)?n:e.get(n):r}function $v(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=I0(e);return n.children.forEach(s=>{Koe(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Zv(a,t.getContext(s),i)),i}function Koe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Joe(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new _b(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$v(n,e,a?a.children:null,r,i):$v(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new A0(a.outlet.component,s))}else s&&Zv(e,a,i),i.canActivateChecks.push(new _b(r)),o.component?$v(n,null,a?a.children:null,r,i):$v(n,null,t,r,i);return i}function Joe(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!lg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lg(n.url,e.url)||!Pc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!O5(n,e)||!Pc(n.queryParams,e.queryParams);case"paramsChange":default:return!O5(n,e)}}function Zv(n,e,t){let r=I0(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Zv(s,e.children.getContext(o),t):Zv(s,null,t):Zv(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new A0(e.outlet.component,i)):t.canDeactivateChecks.push(new A0(null,i)):t.canDeactivateChecks.push(new A0(null,i))}function s1(n){return typeof n=="function"}function Qoe(n){return typeof n=="boolean"}function ese(n){return n&&s1(n.canLoad)}function tse(n){return n&&s1(n.canActivate)}function nse(n){return n&&s1(n.canActivateChild)}function rse(n){return n&&s1(n.canDeactivate)}function ise(n){return n&&s1(n.canMatch)}function KU(n){return n instanceof Th||n?.name==="EmptyError"}var ob=Symbol("INITIAL_VALUE");function k0(){return vs(n=>IE(n.map(e=>e.pipe(Uu(1),Qm(ob)))).pipe(ar(e=>{for(let t of e)if(t!==!0){if(t===ob)return ob;if(t===!1||ose(t))return t}return!0}),Ws(e=>e!==ob),Uu(1)))}function ose(n){return N0(n)||n instanceof t1}function sse(n,e){return Ho(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?dn(tn(dt({},t),{guardsResult:!0})):ase(s,r,i,n).pipe(Ho(a=>a&&Qoe(a)?lse(r,o,n,e):dn(a)),ar(a=>tn(dt({},t),{guardsResult:a})))})}function ase(n,e,t,r){return Xi(n).pipe(Ho(i=>dse(i.component,i.route,t,e,r)),Dh(i=>i!==!0,!0))}function lse(n,e,t,r){return Xi(e).pipe(Km(i=>Xm(cse(i.route.parent,r),use(i.route,r),fse(n,i.path,t),hse(n,i.route,t))),Dh(i=>i!==!0,!0))}function use(n,e){return n!==null&&e&&e(new M5(n)),dn(!0)}function cse(n,e){return n!==null&&e&&e(new A5(n)),dn(!0)}function hse(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return dn(!0);let i=r.map(o=>X_(()=>{let s=O0(e)??t,a=F0(o,s),l=tse(a)?a.canActivate(e,n):wa(s,()=>a(e,n));return Zh(l).pipe(Dh())}));return dn(i).pipe(k0())}function fse(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Zoe(s)).filter(s=>s!==null).map(s=>X_(()=>{let a=s.guards.map(l=>{let c=O0(s.node)??t,f=F0(l,c),d=nse(f)?f.canActivateChild(r,n):wa(c,()=>f(r,n));return Zh(d).pipe(Dh())});return dn(a).pipe(k0())}));return dn(o).pipe(k0())}function dse(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return dn(!0);let s=o.map(a=>{let l=O0(e)??i,c=F0(a,l),f=rse(c)?c.canDeactivate(n,e,t,r):wa(l,()=>c(n,e,t,r));return Zh(f).pipe(Dh())});return dn(s).pipe(k0())}function pse(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return dn(!0);let o=i.map(s=>{let a=F0(s,n),l=ese(a)?a.canLoad(e,t):wa(n,()=>a(e,t));return Zh(l)});return dn(o).pipe(k0(),JU(r))}function JU(n){return tA(So(e=>{if(typeof e!="boolean")throw yb(n,e)}),ar(e=>e===!0))}function gse(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return dn(!0);let o=i.map(s=>{let a=F0(s,n),l=ise(a)?a.canMatch(e,t):wa(n,()=>a(e,t));return Zh(l)});return dn(o).pipe(k0(),JU(r))}var n1=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},r1=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function C0(n){return Ym(new n1(n))}function mse(n){return Ym(new Lt(4e3,!1))}function yse(n){return Ym(XU(!1,Va.GuardRejected))}var j5=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return dn(r);if(i.numberOfChildren>1||!i.children[Mn])return mse(`${e.redirectTo}`);i=i.children[Mn]}}applyRedirectCommands(e,t,r,i,o){return _se(t,i,o).pipe(ar(s=>{if(s instanceof Xh)throw new r1(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new r1(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Xh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Br(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Lt(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function _se(n,e,t){if(typeof n=="string")return dn(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:f,title:d}=e;return Zh(wa(t,()=>r({params:c,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:d})))}var U5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vse(n,e,t,r,i){let o=QU(n,e,t);return o.matched?(r=Uoe(e,r),gse(r,e,t,i).pipe(ar(s=>s===!0?o:dt({},U5)))):dn(o)}function QU(n,e,t){if(e.path==="**")return xse(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?dt({},U5):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||doe)(t,n,e);if(!i)return dt({},U5);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?dt(dt({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xse(n){return{matched:!0,parameters:n.length>0?RU(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function IU(n,e,t,r){return t.length>0&&bse(n,t,r)?{segmentGroup:new Br(e,Ese(r,new Br(t,n.children))),slicedSegments:[]}:t.length===0&&Sse(n,t,r)?{segmentGroup:new Br(n.segments,wse(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Br(n.segments,n.children),slicedSegments:t}}function wse(n,e,t,r){let i={};for(let o of t)if(wb(n,e,o)&&!r[Wu(o)]){let s=new Br([],{});i[Wu(o)]=s}return dt(dt({},r),i)}function Ese(n,e){let t={};t[Mn]=e;for(let r of n)if(r.path===""&&Wu(r)!==Mn){let i=new Br([],{});t[Wu(r)]=i}return t}function bse(n,e,t){return t.some(r=>wb(n,e,r)&&Wu(r)!==Mn)}function Sse(n,e,t){return t.some(r=>wb(n,e,r))}function wb(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Cse(n,e,t){return e.length===0&&!n.children[t]}var G5=class{};function Ise(n,e,t,r,i,o,s="emptyOnly"){return new z5(n,e,t,r,i,s,o).recognize()}var Tse=31,z5=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new j5(this.urlSerializer,this.urlTree)}noMatchError(e){return new Lt(4002,`'${e.segmentGroup}'`)}recognize(){let e=IU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ar(({children:t,rootSnapshot:r})=>{let i=new Cl(r,t),o=new mb("",i),s=Noe(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new D0([],Object.freeze({}),Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Mn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Mn,t).pipe(ar(r=>({children:r,rootSnapshot:t})),Kf(r=>{if(r instanceof r1)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof n1?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ar(s=>s instanceof Cl?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Xi(o).pipe(Km(s=>{let a=r.children[s],l=Goe(t,s);return this.processSegmentGroup(e,l,a,s,i)}),cA((s,a)=>(s.push(...a),s)),Jf(null),uA(),Ho(s=>{if(s===null)return C0(r);let a=eG(s);return Dse(a),dn(a)}))}processSegment(e,t,r,i,o,s,a){return Xi(t).pipe(Km(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(Kf(c=>{if(c instanceof n1)return dn(null);throw c}))),Dh(l=>!!l),Kf(l=>{if(KU(l))return Cse(r,i,o)?dn(new G5):C0(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return Wu(r)!==s&&(s===Mn||!wb(i,o,r))?C0(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):C0(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:y}=QU(t,i,o);if(!l)return C0(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tse&&(this.allowRedirects=!1));let p=new D0(o,c,Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,TU(i),Wu(i),i.component??i._loadedComponent??null,i,DU(i)),_=gb(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(_.params),p.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,p,e).pipe(vs(b=>this.applyRedirects.lineralizeSegments(i,b)),Ho(b=>this.processSegment(e,r,t,b.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=vse(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(vs(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(vs(({routes:c})=>{let f=r._loadedInjector??e,{parameters:d,consumedSegments:y,remainingSegments:p}=l,_=new D0(y,d,Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,TU(r),Wu(r),r.component??r._loadedComponent??null,r,DU(r)),x=gb(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(x.params),_.data=Object.freeze(x.data);let{segmentGroup:b,slicedSegments:S}=IU(t,y,p,c);if(S.length===0&&b.hasChildren())return this.processChildren(f,c,b,_).pipe(ar(A=>new Cl(_,A)));if(c.length===0&&S.length===0)return dn(new Cl(_,[]));let T=Wu(r)===o;return this.processSegment(f,c,b,S,T?Mn:o,!0,_).pipe(ar(A=>new Cl(_,A instanceof Cl?[A]:[])))}))):C0(t)))}getChildConfig(e,t,r){return t.children?dn({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?dn({routes:t._loadedRoutes,injector:t._loadedInjector}):pse(e,t,r,this.urlSerializer).pipe(Ho(i=>i?this.configLoader.loadChildren(e,t).pipe(So(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):yse(t))):dn({routes:[],injector:e})}};function Dse(n){n.sort((e,t)=>e.value.outlet===Mn?-1:t.value.outlet===Mn?1:e.value.outlet.localeCompare(t.value.outlet))}function Ase(n){let e=n.value.routeConfig;return e&&e.path===""}function eG(n){let e=[],t=new Set;for(let r of n){if(!Ase(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=eG(r.children);e.push(new Cl(r.value,i))}return e.filter(r=>!t.has(r))}function TU(n){return n.data||{}}function DU(n){return n.resolve||{}}function Rse(n,e,t,r,i,o){return Ho(s=>Ise(n,e,t,r,s.extractedUrl,i,o).pipe(ar(({state:a,tree:l})=>tn(dt({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Mse(n,e){return Ho(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dn(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of tG(l))s.add(c);let a=0;return Xi(s).pipe(Km(l=>o.has(l)?Nse(l,r,n,e):(l.data=gb(l,l.parent,n).resolve,dn(void 0))),So(()=>a++),Jm(1),Ho(l=>a===s.size?dn(t):qs))})}function tG(n){let e=n.children.map(t=>tG(t)).flat();return[n,...e]}function Nse(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!qU(i)&&(o[i1]=i.title),X_(()=>(n.data=gb(n,n.parent,t).resolve,Pse(o,n,e,r).pipe(ar(s=>(n._resolvedData=s,n.data=dt(dt({},n.data),s),null)))))}function Pse(n,e,t,r){let i=v5(n);if(i.length===0)return dn({});let o={};return Xi(i).pipe(Ho(s=>Lse(n[s],e,t,r).pipe(Dh(),So(a=>{if(a instanceof t1)throw yb(new M0,a);o[s]=a}))),Jm(1),ar(()=>o),Kf(s=>KU(s)?qs:Ym(s)))}function Lse(n,e,t,r){let i=O0(e)??r,o=F0(n,i),s=o.resolve?o.resolve(e,t):wa(i,()=>o(e,t));return Zh(s)}function y5(n){return vs(e=>{let t=n(e);return t?Xi(t).pipe(ar(()=>e)):dn(e)})}var nG=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Mn);return r}getResolvedTitleForRoute(t){return t.data[i1]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(kse),providedIn:"root"})}return n})(),kse=(()=>{class n extends nG{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Wn(wU))};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Eb=new Ut("",{providedIn:"root",factory:()=>({})}),bb=new Ut(""),rG=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Me(UM);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return dn(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zh(wa(t,()=>r.loadComponent())).pipe(ar(iG),vs(oG),So(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Z_(()=>{this.componentLoaders.delete(r)})),o=new Vm(i,()=>new en).pipe(zm());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Ose(r,this.compiler,t,this.onLoadEndListener).pipe(Z_(()=>{this.childrenLoaders.delete(r)})),s=new Vm(o,()=>new en).pipe(zm());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ose(n,e,t,r){return Zh(wa(t,()=>n.loadChildren())).pipe(ar(iG),vs(oG),Ho(i=>i instanceof k2||Array.isArray(i)?dn(i):Xi(e.compileModuleAsync(i))),ar(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(bb,[],{optional:!0,self:!0}).flat()),{routes:s.map(q5),injector:o}}))}function Fse(n){return n&&typeof n=="object"&&"default"in n}function iG(n){return Fse(n)?n.default:n}function oG(n){return dn(n)}var W5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(Bse),providedIn:"root"})}return n})(),Bse=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sG=new Ut("");var aG=new Ut(""),lG=(()=>{class n{currentNavigation=un(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new en;transitionAbortWithErrorSubject=new en;configLoader=Me(rG);environmentInjector=Me(Oi);destroyRef=Me(Vu);urlSerializer=Me(vb);rootContexts=Me(o1);location=Me(pd);inputBindingEnabled=Me(xb,{optional:!0})!==null;titleStrategy=Me(nG);options=Me(Eb,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Me(W5);createViewTransition=Me(sG,{optional:!0});navigationErrorHandler=Me(aG,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>dn(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new T5(i)),r=i=>this.events.next(new D5(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Nc(()=>{this.transitions?.next(tn(dt({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Vo(null),this.transitions.pipe(Ws(r=>r!==null),vs(r=>{let i=!1;return dn(r).pipe(vs(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Va.SupersededByNewNavigation),qs;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?tn(dt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new md(o.id,this.urlSerializer.serialize(o.rawUrl),"",hb.IgnoredSameUrlNavigation)),o.resolve(!1),qs;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return dn(o).pipe(vs(l=>(this.events.next(new P0(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?qs:Promise.resolve(l))),Rse(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),So(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let c=new fb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:f,restoredState:d,extras:y}=o,p=new P0(l,this.urlSerializer.serialize(c),f,d);this.events.next(p);let _=VU(this.rootComponentType).snapshot;return this.currentTransition=r=tn(dt({},o),{targetSnapshot:_,urlAfterRedirects:c,extras:tn(dt({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(x=>(x.finalUrl=c,x)),dn(r)}else return this.events.next(new md(o.id,this.urlSerializer.serialize(o.extractedUrl),"",hb.IgnoredByUrlHandlingStrategy)),o.resolve(!1),qs}),So(o=>{let s=new b5(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ar(o=>(this.currentTransition=r=tn(dt({},o),{guards:Xoe(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),sse(this.environmentInjector,o=>this.events.next(o)),So(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw yb(this.urlSerializer,o.guardsResult);let s=new S5(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ws(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Va.GuardRejected),!1)),y5(o=>{if(o.guards.canActivateChecks.length!==0)return dn(o).pipe(So(s=>{let a=new C5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),vs(s=>{let a=!1;return dn(s).pipe(Mse(this.paramsInheritanceStrategy,this.environmentInjector),So({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Va.NoDataFromResolver)}}))}),So(s=>{let a=new I5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),y5(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=O0(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(So(f=>{a.component=f}),ar(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return IE(s(o.targetSnapshot.root)).pipe(Jf(null),Uu(1))}),y5(()=>this.afterPreactivation()),vs(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Xi(a).pipe(ar(()=>r)):dn(r)}),ar(o=>{let s=Hoe(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=tn(dt({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),So(()=>{this.events.next(new Qv)}),Yoe(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Uu(1),Ah(new Hn(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ws(()=>!i&&!r.targetRouterState),So(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Va.Aborted)}))),So({next:o=>{i=!0,this.lastSuccessfulNavigation=Nc(this.currentNavigation),this.events.next(new gd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Ah(this.transitionAbortWithErrorSubject.pipe(So(o=>{throw o}))),Z_(()=>{i||this.cancelNavigationTransition(r,"",Va.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Kf(o=>{if(this.destroyed)return r.resolve(!1),qs;if(i=!0,ZU(o))this.events.next(new Yh(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),$oe(o)?this.events.next(new L0(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Jv(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=wa(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof t1){let{message:l,cancellationCode:c}=yb(this.urlSerializer,a);this.events.next(new Yh(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new L0(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return qs}))}))}cancelNavigationTransition(t,r,i){let o=new Yh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Nc(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jse(n){return n!==Xv}var Use=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(Gse),providedIn:"root"})}return n})(),V5=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Gse=(()=>{class n extends V5{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ig(n)))(i||n)}})();static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uG=(()=>{class n{urlSerializer=Me(vb);options=Me(Eb,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Me(pd);urlHandlingStrategy=Me(W5);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Xh;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Xh?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=VU(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:()=>Me(zse),providedIn:"root"})}return n})(),zse=(()=>{class n extends uG{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof P0?this.updateStateMemento():t instanceof md?this.commitTransition(r):t instanceof fb?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Qv?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yh&&t.code!==Va.SupersededByNewNavigation&&t.code!==Va.Redirect?this.restoreHistory(r):t instanceof Jv?this.restoreHistory(r,!0):t instanceof gd&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=dt(dt({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=dt(dt({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ig(n)))(i||n)}})();static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cG(n,e){n.events.pipe(Ws(t=>t instanceof gd||t instanceof Yh||t instanceof Jv||t instanceof md),ar(t=>t instanceof gd||t instanceof md?0:(t instanceof Yh?t.code===Va.Redirect||t.code===Va.SupersededByNewNavigation:!1)?2:1),Ws(t=>t!==2),Uu(1)).subscribe(()=>{e()})}var Vse={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hse={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$5=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Me(NM);stateManager=Me(uG);options=Me(Eb,{optional:!0})||{};pendingTasks=Me(Bh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Me(lG);urlSerializer=Me(vb);location=Me(pd);urlHandlingStrategy=Me(W5);injector=Me(Oi);_events=new en;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Me(Use);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Me(bb,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Me(xb,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new gr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Nc(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Yh&&r.code!==Va.Redirect&&r.code!==Va.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gd)this.navigated=!0;else if(r instanceof L0){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=dt({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jse(i.source)},s);this.scheduleNavigation(a,Xv,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}joe(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=dt({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(bl)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Nc(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(q5),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=dt(dt({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let y=i?i.snapshot:this.routerState.snapshot.root;d=jU(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return UU(d,t,f,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=N0(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Xv,null,r)}navigate(t,r={skipLocationChange:!1}){return qse(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Up(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=dt({},Vse):r===!1?i=dt({},Hse):i=r,N0(t))return EU(this.currentUrlTree,t,i);let o=this.parseUrl(t);return EU(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,y)=>{a=d,l=y});let f=this.pendingTasks.add();return cG(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qse(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Lt(4008,!1)}var Wse=new Ut("");function Y5(n,...e){return Hp([{provide:bb,multi:!0,useValue:n},[],{provide:ug,useFactory:$se,deps:[$5]},{provide:O2,multi:!0,useFactory:Yse},e.map(t=>t.\u0275providers)])}function $se(n){return n.routerState.root}function Yse(){let n=Me(Di);return e=>{let t=n.get(au);if(e!==t.components[0])return;let r=n.get($5),i=n.get(Xse);n.get(Zse)===1&&r.initialNavigation(),n.get(Kse,null,{optional:!0})?.setUpPreloading(),n.get(Wse,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Xse=new Ut("",{factory:()=>new en}),Zse=new Ut("",{providedIn:"root",factory:()=>1});var Kse=new Ut("");var hG=[];var fG={providers:[cR(),zM({eventCoalescing:!0}),Y5(hG)]};var _i={ADD:"add",REMOVE:"remove"};var $u={PROPERTYCHANGE:"propertychange"};var gt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};var X5=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Lc=X5;function dG(n,e,t){let r,i;t=t||Ys;let o=0,s=n.length,a=!1;for(;o<s;)r=o+(s-o>>1),i=+t(n[r],e),i<0?o=r+1:(s=r,a=!i);return a?o:~o}function Ys(n,e){return n>e?1:n<e?-1:0}function Sb(n,e){return n<e?1:n>e?-1:0}function yd(n,e,t){if(n[0]<=e)return 0;let r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){let o=n[i];if(o===e)return i;if(o<e)return t(e,n[i-1],o)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function pG(n,e,t){for(;e<t;){let r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function Nn(n,e){let t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function is(n,e){let t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function gG(n,e,t){let r=e||Ys;return n.every(function(i,o){if(o===0)return!0;let s=r(n[o-1],i);return!(s>0||t&&s===0)})}function Ss(){return!0}function fu(){return!1}function Kh(){}function Cb(n){let e,t,r;return function(){let i=Array.prototype.slice.call(arguments);return(!t||this!==r||!is(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function B0(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}var Z5=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var jr=Z5;var K5=class extends Lc{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;let r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){let t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;let o=t?new jr(e):e;o.target||(o.target=this.eventTarget_||this);let s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,a[r]=0),++s[r];let l;for(let c=0,f=i.length;c<f;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(o):l=i[c].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,Kh);delete s[r]}return l}disposeInternal(){this.listeners_&&Oa(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;let r=this.listeners_[e];if(!r)return;let i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=Kh,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}},du=K5;function cn(n,e,t,r,i){if(i){let s=t;t=function(a){return n.removeEventListener(e,t),s.call(r??this,a)}}else r&&r!==n&&(t=t.bind(r));let o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function j0(n,e,t,r){return cn(n,e,t,r,!0)}function On(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Oa(n))}var U0=class extends du{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(gt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){let r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=cn(this,e[o],t);return i}return cn(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){let i=e.length;r=new Array(i);for(let o=0;o<i;++o)r[o]=j0(this,e[o],t)}else r=j0(this,e,t);return t.ol_key=r,r}unInternal(e,t){let r=t.ol_key;if(r)Ib(r);else if(Array.isArray(e))for(let i=0,o=e.length;i<o;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}};U0.prototype.on;U0.prototype.once;U0.prototype.un;function Ib(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)On(n[e]);else On(n)}var Tb=U0;function It(){throw new Error("Unimplemented abstract method.")}var Qse=0;function ct(n){return n.ol_uid||(n.ol_uid=String(++Qse))}var Db=class extends jr{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}},J5=class extends Tb{constructor(e){super(),this.on,this.once,this.un,ct(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new Db(r,e,t)),r=$u.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new Db(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){let i=this.values_||(this.values_={});if(r)i[e]=t;else{let o=i[e];i[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(let r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){let r=this.values_[e];delete this.values_[e],ya(this.values_)&&(this.values_=null),t||this.notify(e,r)}}},Io=J5;var mG={LENGTH:"length"},G0=class extends jr{constructor(e,t,r){super(e),this.element=t,this.index=r}},Q5=class extends Io{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){let t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(mG.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new G0(_i.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){let t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){let t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;let t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new G0(_i.REMOVE,t,e)),t}setAt(e,t){let r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);let i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new G0(_i.REMOVE,i,e)),this.dispatchEvent(new G0(_i.ADD,t,e))}updateLength_(){this.set(mG.LENGTH,this.array_.length)}assertUnique_(e,t){let r=this.array_;for(let i=0,o=r.length;i<o;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}},vi=Q5;var eN=class extends jr{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}},_d=eN;var tN=class extends _d{constructor(e,t,r,i,o,s){super(e,t,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},pu=tN;var Pn={SINGLECLICK:"singleclick",CLICK:gt.CLICK,DBLCLICK:gt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var cg=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",eae=cg.includes("safari")&&!cg.includes("chrom"),yG=eae&&(cg.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(cg)),_G=cg.includes("webkit")&&!cg.includes("edge"),nN=cg.includes("macintosh"),vG=typeof devicePixelRatio<"u"?devicePixelRatio:1,Bi=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ab=typeof Image<"u"&&Image.prototype.decode,rN=typeof createImageBitmap=="function",Rb=(function(){let n=!1;try{let e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();var a1={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var iN=class extends du{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;let r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=cn(r,a1.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=cn(r,a1.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(gt.TOUCHMOVE,this.boundHandleTouchMove_,Rb?{passive:!1}:!1)}emulateClick_(e){let t=new pu(Pn.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new pu(Pn.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let r=new pu(Pn.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){let t=e,r=t.pointerId;if(t.type==Pn.POINTERUP||t.type==Pn.POINTERCANCEL){delete this.trackedTouches_[r];for(let i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==Pn.POINTERDOWN||t.type==Pn.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);let t=new pu(Pn.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(On),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);let t=new pu(Pn.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){let r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(cn(r,Pn.POINTERMOVE,this.handlePointerMove_,this),cn(r,Pn.POINTERUP,this.handlePointerUp_,this),cn(this.element_,Pn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(cn(this.element_.getRootNode(),Pn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;let t=new pu(Pn.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;let t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new pu(Pn.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){let t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(On(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(gt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(On(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(On),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},xG=iN;var kc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var Cs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Je={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function an(n,e){if(!n)throw new Error(e)}var l1=1/0,oN=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Oa(this.queuedElements_)}dequeue(){let e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));let i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){an(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let t=this.priorityFunction_(e);return t!=l1?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){let t=this.elements_,r=this.priorities_,i=t.length,o=t[e],s=r[e],a=e;for(;e<i>>1;){let l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),f=c<i&&r[c]<r[l]?c:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=o,r[e]=s,this.siftDown_(a,e)}siftDown_(e,t){let r=this.elements_,i=this.priorities_,o=r[t],s=i[t];for(;t>e;){let a=this.getParentIndex_(t);if(i[a]>s)r[t]=r[a],i[t]=i[a],t=a;else break}r[t]=o,i[t]=s}reprioritize(){let e=this.priorityFunction_,t=this.elements_,r=this.priorities_,i=0,o=t.length,s,a,l;for(a=0;a<o;++a)s=t[a],l=e(s),l==l1?delete this.queuedElements_[this.keyFunction_(s)]:(r[i]=l,t[i++]=s);t.length=i,r.length=i,this.heapify_()}},wG=oN;var sN=class extends wG{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){let t=super.enqueue(e);return t&&e[0].addEventListener(gt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){let t=e.target,r=t.getState();if(r===Je.LOADED||r===Je.ERROR||r===Je.EMPTY){r!==Je.ERROR&&t.removeEventListener(gt.CHANGE,this.boundHandleTileChange_);let i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){let i=this.dequeue()[0],o=i.getKey();i.getState()===Je.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load())}}},EG=sN;function bG(n,e,t,r,i){if(!n||!(t in n.wantedTiles))return l1;if(!n.wantedTiles[t][e.getKey()])return l1;let o=n.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}var $r={ANIMATING:0,INTERACTING:1};var gu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function aN(n,e,t){return(function(r,i,o,s,a){if(!r)return;if(!i&&!e)return r;let l=e?0:o[0]*i,c=e?0:o[1]*i,f=a?a[0]:0,d=a?a[1]:0,y=n[0]+l/2+f,p=n[2]-l/2+f,_=n[1]+c/2+d,x=n[3]-c/2+d;y>p&&(y=(p+y)/2,p=y),_>x&&(_=(x+_)/2,x=_);let b=Xn(r[0],y,p),S=Xn(r[1],_,x);if(s&&t&&i){let T=30*i;b+=-T*Math.log(1+Math.max(0,y-r[0])/T)+T*Math.log(1+Math.max(0,r[0]-p)/T),S+=-T*Math.log(1+Math.max(0,_-r[1])/T)+T*Math.log(1+Math.max(0,r[1]-x)/T)}return[b,S]})}function SG(n){return n}function lN(n){return Math.pow(n,3)}function Ha(n){return 1-lN(1-n)}function CG(n){return 3*n*n-2*n*n*n}function IG(n){return n}var uN=new Array(6);function Yr(){return[1,0,0,1,0,0]}function u1(n){return Nb(n,1,0,0,1,0,0)}function vd(n,e){let t=n[0],r=n[1],i=n[2],o=n[3],s=n[4],a=n[5],l=e[0],c=e[1],f=e[2],d=e[3],y=e[4],p=e[5];return n[0]=t*l+i*c,n[1]=r*l+o*c,n[2]=t*f+i*d,n[3]=r*f+o*d,n[4]=t*y+i*p+s,n[5]=r*y+o*p+a,n}function Nb(n,e,t,r,i,o,s){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=o,n[5]=s,n}function TG(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Ar(n,e){let t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function DG(n,e){let t=Math.cos(e),r=Math.sin(e);return vd(n,Nb(uN,t,r,-r,t,0,0))}function xd(n,e,t){return vd(n,Nb(uN,e,0,0,t,0,0))}function Pb(n,e,t){return vd(n,Nb(uN,1,0,0,1,e,t))}function ji(n,e,t,r,i,o,s,a){let l=Math.sin(o),c=Math.cos(o);return n[0]=r*c,n[1]=i*l,n[2]=-r*l,n[3]=i*c,n[4]=s*r*c-a*r*l+e,n[5]=s*i*l+a*i*c+t,n}function z0(n,e){let t=tae(e);an(t!==0,"Transformation matrix cannot be inverted");let r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5];return n[0]=s/t,n[1]=-i/t,n[2]=-o/t,n[3]=r/t,n[4]=(o*l-s*a)/t,n[5]=-(r*l-i*a)/t,n}function tae(n){return n[0]*n[3]-n[1]*n[2]}var nae=[1e5,1e5,1e5,1e5,2,2];function AG(n){return"matrix("+n.join(", ")+")"}function Mb(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function RG(n,e){let t=Mb(n),r=Mb(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*nae[i])!==0)return!1;return!0}function qa(n,e,t,r,i,o,s){o=o||[],s=s||2;let a=0;for(let l=e;l<t;l+=r){let c=n[l],f=n[l+1];o[a++]=i[0]*c+i[2]*f+i[4],o[a++]=i[1]*c+i[3]*f+i[5];for(let d=2;d<s;d++)o[a++]=n[l+d]}return o&&o.length!=a&&(o.length=a),o}function V0(n,e,t,r,i,o,s){s=s||[];let a=Math.cos(i),l=Math.sin(i),c=o[0],f=o[1],d=0;for(let y=e;y<t;y+=r){let p=n[y]-c,_=n[y+1]-f;s[d++]=c+p*a-_*l,s[d++]=f+p*l+_*a;for(let x=y+2;x<y+r;++x)s[d++]=n[x]}return s&&s.length!=d&&(s.length=d),s}function MG(n,e,t,r,i,o,s,a){a=a||[];let l=s[0],c=s[1],f=0;for(let d=e;d<t;d+=r){let y=n[d]-l,p=n[d+1]-c;a[f++]=l+i*y,a[f++]=c+o*p;for(let _=d+2;_<d+r;++_)a[f++]=n[_]}return a&&a.length!=f&&(a.length=f),a}function NG(n,e,t,r,i,o,s){s=s||[];let a=0;for(let l=e;l<t;l+=r){s[a++]=n[l]+i,s[a++]=n[l+1]+o;for(let c=l+2;c<l+r;++c)s[a++]=n[c]}return s&&s.length!=a&&(s.length=a),s}var PG=Yr(),rae=[NaN,NaN],cN=class extends Io{constructor(){super(),this.extent_=ki(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Cb((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);let i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return It()}closestPointXY(e,t,r,i){return It()}containsXY(e,t){return this.closestPointXY(e,t,rae,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return It()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&vm(t),this.extentRevision_=this.getRevision()}return C8(this.extent_,e)}rotate(e,t){It()}scale(e,t,r){It()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return It()}getType(){return It()}applyTransform(e){It()}intersectsExtent(e){return It()}translate(e,t){It()}transform(e,t){let r=sn(e),i=r.getUnits()=="tile-pixels"?function(o,s,a){let l=r.getExtent(),c=r.getWorldExtent(),f=or(c)/or(l);ji(PG,c[0],c[3],f,-f,0,0,0);let d=qa(o,0,o.length,a,PG,s),y=Ih(r,t);return y?y(d,d,a):d}:Ih(r,t);return this.applyTransform(i),this}},Lb=cN;var hN=class extends Lb{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return xm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return It()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=c1(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){It()}setLayout(e,t,r){let i;if(e)i=c1(e);else{for(let o=0;o<r;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=wd(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){let r=this.getFlatCoordinates();if(r){let i=this.getStride();V0(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=zo(this.getExtent()));let i=this.getFlatCoordinates();if(i){let o=this.getStride();MG(i,0,i.length,o,e,t,r,i),this.changed()}}translate(e,t){let r=this.getFlatCoordinates();if(r){let i=this.getStride();NG(r,0,r.length,i,e,t,r),this.changed()}}};function wd(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function c1(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function LG(n,e,t){let r=n.getFlatCoordinates();if(!r)return null;let i=n.getStride();return qa(r,0,r.length,i,e,t)}var Xs=hN;function fN(n,e,t,r){let i=0,o=n[t-r],s=n[t-r+1],a=0,l=0;for(;e<t;e+=r){let c=n[e]-o,f=n[e+1]-s;i+=l*c-a*f,a=c,l=f}return i/2}function dN(n,e,t,r){let i=0;for(let o=0,s=t.length;o<s;++o){let a=t[o];i+=fN(n,e,a,r),e=a}return i}function kG(n,e,t,r){let i=0;for(let o=0,s=t.length;o<s;++o){let a=t[o];i+=dN(n,e,a,r),e=a[a.length-1]}return i}function OG(n,e,t,r,i,o,s){let a=n[e],l=n[e+1],c=n[t]-a,f=n[t+1]-l,d;if(c===0&&f===0)d=e;else{let y=((i-a)*c+(o-l)*f)/(c*c+f*f);if(y>1)d=t;else if(y>0){for(let p=0;p<r;++p)s[p]=gs(n[e+p],n[t+p],y);s.length=r;return}else d=e}for(let y=0;y<r;++y)s[y]=n[d+y];s.length=r}function h1(n,e,t,r,i){let o=n[e],s=n[e+1];for(e+=r;e<t;e+=r){let a=n[e],l=n[e+1],c=_l(o,s,a,l);c>i&&(i=c),o=a,s=l}return i}function f1(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];i=h1(n,e,a,r,i),e=a}return i}function FG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];i=f1(n,e,a,r,i),e=a[a.length-1]}return i}function d1(n,e,t,r,i,o,s,a,l,c,f){if(e==t)return c;let d,y;if(i===0){if(y=_l(s,a,n[e],n[e+1]),y<c){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,y}return c}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(OG(n,p-r,p,r,s,a,f),y=_l(s,a,f[0],f[1]),y<c){for(c=y,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(y)-Math.sqrt(c))/i|0,1);if(o&&(OG(n,t-r,e,r,s,a,f),y=_l(s,a,f[0],f[1]),y<c)){for(c=y,d=0;d<r;++d)l[d]=f[d];l.length=r}return c}function p1(n,e,t,r,i,o,s,a,l,c,f){f=f||[NaN,NaN];for(let d=0,y=t.length;d<y;++d){let p=t[d];c=d1(n,e,p,r,i,o,s,a,l,c,f),e=p}return c}function BG(n,e,t,r,i,o,s,a,l,c,f){f=f||[NaN,NaN];for(let d=0,y=t.length;d<y;++d){let p=t[d];c=p1(n,e,p,r,i,o,s,a,l,c,f),e=p[p.length-1]}return c}function kb(n,e,t,r){for(let i=0,o=t.length;i<o;++i)n[e++]=t[i];return e}function hg(n,e,t,r){for(let i=0,o=t.length;i<o;++i){let s=t[i];for(let a=0;a<r;++a)n[e++]=s[a]}return e}function Ed(n,e,t,r,i){i=i||[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=hg(n,e,t[s],r);i[o++]=l,e=l}return i.length=o,i}function Ob(n,e,t,r,i){i=i||[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=Ed(n,e,t[s],r,i[o]);l.length===0&&(l[0]=e),i[o++]=l,e=l[l.length-1]}return i.length=o,i}function mu(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=e;s<t;s+=r)i[o++]=n.slice(s,s+r);return i.length=o,i}function bd(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s];i[o++]=mu(n,e,l,r,i[o]),e=l}return i.length=o,i}function g1(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s];i[o++]=l.length===1&&l[0]===e?[]:bd(n,e,l,r,i[o]),e=l[l.length-1]}return i.length=o,i}function fg(n,e,t,r,i,o,s){let a=(t-e)/r;if(a<3){for(;e<t;e+=r)o[s++]=n[e],o[s++]=n[e+1];return s}let l=new Array(a);l[0]=1,l[a-1]=1;let c=[e,t-r],f=0;for(;c.length>0;){let d=c.pop(),y=c.pop(),p=0,_=n[y],x=n[y+1],b=n[d],S=n[d+1];for(let T=y+r;T<d;T+=r){let A=n[T],N=n[T+1],k=v8(A,N,_,x,b,S);k>p&&(f=T,p=k)}p>i&&(l[(f-e)/r]=1,y+r<f&&c.push(y,f),f+r<d&&c.push(f,d))}for(let d=0;d<a;++d)l[d]&&(o[s++]=n[e+d*r],o[s++]=n[e+d*r+1]);return s}function Fb(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l];s=fg(n,e,f,r,i,o,s),a.push(s),e=f}return s}function Sd(n,e){return e*Math.round(n/e)}function iae(n,e,t,r,i,o,s){if(e==t)return s;let a=Sd(n[e],i),l=Sd(n[e+1],i);e+=r,o[s++]=a,o[s++]=l;let c,f;do if(c=Sd(n[e],i),f=Sd(n[e+1],i),e+=r,e==t)return o[s++]=c,o[s++]=f,s;while(c==a&&f==l);for(;e<t;){let d=Sd(n[e],i),y=Sd(n[e+1],i);if(e+=r,d==c&&y==f)continue;let p=c-a,_=f-l,x=d-a,b=y-l;if(p*b==_*x&&(p<0&&x<p||p==x||p>0&&x>p)&&(_<0&&b<_||_==b||_>0&&b>_)){c=d,f=y;continue}o[s++]=c,o[s++]=f,a=c,l=f,c=d,f=y}return o[s++]=c,o[s++]=f,s}function m1(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l];s=iae(n,e,f,r,i,o,s),a.push(s),e=f}return s}function jG(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l],d=[];s=m1(n,e,f,r,i,o,s,d),a.push(d),e=f[f.length-1]}return s}var pN=class n extends Xs{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new n(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Fa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return fN(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){let t=[];return t.length=fg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hg(this.flatCoordinates,0,e,this.stride),this.changed()}},gN=pN;var mN=class n extends Xs{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){let o=this.flatCoordinates,s=_l(e,t,o[0],o[1]);if(s<i){let a=this.stride;for(let l=0;l<a;++l)r[l]=o[l];return r.length=a,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Yf(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Bw(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=kb(this.flatCoordinates,0,e,this.stride),this.changed()}},Ui=mN;function UG(n,e,t,r,i){return!bm(i,function(s){return!Cd(n,e,t,r,s[0],s[1])})}function Cd(n,e,t,r,i,o){let s=0,a=n[t-r],l=n[t-r+1];for(;e<t;e+=r){let c=n[e],f=n[e+1];l<=o?f>o&&(c-a)*(o-l)-(i-a)*(f-l)>0&&s++:f<=o&&(c-a)*(o-l)-(i-a)*(f-l)<0&&s--,a=c,l=f}return s!==0}function y1(n,e,t,r,i,o){if(t.length===0||!Cd(n,e,t[0],r,i,o))return!1;for(let s=1,a=t.length;s<a;++s)if(Cd(n,t[s-1],t[s],r,i,o))return!1;return!0}function GG(n,e,t,r,i,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){let l=t[s];if(y1(n,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}function _1(n,e,t,r,i,o,s){let a,l,c,f,d,y,p,_=i[o+1],x=[];for(let T=0,A=t.length;T<A;++T){let N=t[T];for(f=n[N-r],y=n[N-r+1],a=e;a<N;a+=r)d=n[a],p=n[a+1],(_<=y&&p<=_||y<=_&&_<=p)&&(c=(_-y)/(p-y)*(d-f)+f,x.push(c)),f=d,y=p}let b=NaN,S=-1/0;for(x.sort(Ys),f=x[0],a=1,l=x.length;a<l;++a){d=x[a];let T=Math.abs(d-f);T>S&&(c=(f+d)/2,y1(n,e,t,r,c,_)&&(b=c,S=T)),f=d}return isNaN(b)&&(b=i[o]),s?(s.push(b,_,S),s):[b,_,S]}function Bb(n,e,t,r,i){let o=[];for(let s=0,a=t.length;s<a;++s){let l=t[s];o=_1(n,e,l,r,i,2*s,o),e=l[l.length-1]}return o}function jb(n,e,t,r,i){let o;for(e+=r;e<t;e+=r)if(o=i(n.slice(e-r,e),n.slice(e,e+r)),o)return o;return!1}function v1(n,e,t,r,i,o){return o=o??b8(ki(),n,e,t,r),Jn(i,o)?o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:jb(n,e,t,r,function(s,a){return I8(i,s,a)}):!1}function zG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){if(v1(n,e,t[o],r,i))return!0;e=t[o]}return!1}function yN(n,e,t,r,i){return!!(v1(n,e,t,r,i)||Cd(n,e,t,r,i[0],i[1])||Cd(n,e,t,r,i[0],i[3])||Cd(n,e,t,r,i[2],i[1])||Cd(n,e,t,r,i[2],i[3]))}function _N(n,e,t,r,i){if(!yN(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(UG(n,t[o-1],t[o],r,i)&&!v1(n,t[o-1],t[o],r,i))return!1;return!0}function VG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];if(_N(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}function HG(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){let o=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=o}e+=r,t-=r}}function vN(n,e,t,r){let i=0,o=n[t-r],s=n[t-r+1];for(;e<t;e+=r){let a=n[e],l=n[e+1];i+=(a-o)*(l+s),o=a,s=l}return i===0?void 0:i>0}function x1(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,s=t.length;o<s;++o){let a=t[o],l=vN(n,e,a,r);if(o===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function Ub(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];if(!x1(n,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function H0(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,s=t.length;o<s;++o){let a=t[o],l=vN(n,e,a,r);(o===0?i&&l||!i&&!l:i&&!l||!i&&l)&&HG(n,e,a,r),e=a}return e}function w1(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o)e=H0(n,e,t[o],r,i);return e}function Gb(n,e){let t=[],r=0,i=0,o;for(let s=0,a=e.length;s<a;++s){let l=e[s],c=vN(n,r,l,2);if(o===void 0&&(o=c),c===o)t.push(e.slice(i,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=s+1,r=l}return t}var E1=class n extends Xs{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Nn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Fa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),p1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return y1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return dN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),H0(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,bd(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=zo(this.getExtent());this.flatInteriorPoint_=_1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ui(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new gN(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s],c=new gN(t.slice(o,l),e);i.push(c),o=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;x1(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=H0(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=m1(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new n(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return _N(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=Ed(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},Wo=E1;function xN(n){if(ms(n))throw new Error("Cannot create polygon from empty extent");let e=n[0],t=n[1],r=n[2],i=n[3],o=[e,t,e,i,r,i,r,t,e,t];return new E1(o,"XY",[o.length])}function zb(n,e,t){e=e||32;let r=n.getStride(),i=n.getLayout(),o=n.getCenter(),s=r*(e+1),a=new Array(s);for(let f=0;f<s;f+=r){a[f]=0,a[f+1]=0;for(let d=2;d<r;d++)a[f+d]=o[d]}let l=[a.length],c=new E1(a,i,l);return qG(c,o,n.getRadius(),t),c}function qG(n,e,t,r){let i=n.getFlatCoordinates(),o=n.getStride(),s=i.length/o-1,a=r||0;for(let l=0;l<=s;++l){let c=l*o,f=a+vl(l,s)*2*Math.PI/s;i[c]=e[0]+t*Math.cos(f),i[c+1]=e[1]+t*Math.sin(f)}n.changed()}function wN(n,e,t,r){let i=on(e)/t[0],o=or(e)/t[1];return r?Math.min(n,Math.max(i,o)):Math.min(n,Math.min(i,o))}function EN(n,e,t){let r=Math.min(n,e),i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Xn(r,t/2,e*2)}function WG(n,e,t,r){return e=e!==void 0?e:!0,(function(i,o,s,a){if(i!==void 0){let l=n[0],c=n[n.length-1],f=t?wN(l,t,s,r):l;if(a)return e?EN(i,f,c):Xn(i,c,f);let d=Math.min(f,i),y=Math.floor(yd(n,d,o));return n[y]>f&&y<n.length-1?n[y+1]:n[y]}})}function $G(n,e,t,r,i,o){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(s,a,l,c){if(s!==void 0){let f=i?wN(e,i,l,o):e;if(c)return r?EN(s,f,t):Xn(s,t,f);let d=1e-9,y=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-a*(.5-d)+.5,_=Math.min(f,s),x=Math.floor(Math.log(e/_)/Math.log(n)+p),b=Math.max(y,x),S=e/Math.pow(n,b);return Xn(S,t,f)}})}function bN(n,e,t,r,i){return t=t!==void 0?t:!0,(function(o,s,a,l){if(o!==void 0){let c=r?wN(n,r,a,i):n;return!t||!l?Xn(o,e,c):EN(o,c,e)}})}function q0(n){if(n!==void 0)return 0}function SN(n){if(n!==void 0)return n}function YG(n){let e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function XG(n){let e=n===void 0?Ow(5):n;return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}var CN=0,TN=class extends Io{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Hw(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&L8(),e.center&&(e.center=Or(e.center,this.projection_)),e.extent&&(e.extent=so(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){let t=Object.assign({},e);for(let a in gu)delete t[a];this.setProperties(t,!0);let r=sae(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;let i=oae(e),o=r.constraint,s=aae(e);this.constraints_={center:i,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;let r=this.getCenterInternal();if(r){let i=e||[0,0,0,0];t=t||[0,0,0,0];let o=this.getResolution(),s=o/2*(i[3]-t[3]+t[1]-i[1]),a=o/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+s,r[1]-a])}}getUpdatedOptions_(e){let t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Or(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Or(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){let f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&Vb(r,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,c=[];for(;i<t;++i){let f=arguments[i],d={start:o,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||CG,callback:r};if(f.center&&(d.sourceCenter=s,d.targetCenter=f.center.slice(),s=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(f.zoom),a=d.targetResolution):f.resolution&&(d.sourceResolution=a,d.targetResolution=f.resolution,a=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;let y=vl(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+y,l=d.targetRotation}lae(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint($r.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[$r.ANIMATING]>0}getInteracting(){return this.hints_[$r.INTERACTING]>0}cancelAnimations(){this.setHint($r.ANIMATING,-this.hints_[$r.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){let i=this.animations_[t];if(i[0].callback&&Vb(i[0].callback,!1),!e)for(let o=0,s=i.length;o<s;++o){let a=i[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),t=!1;for(let r=this.animations_.length-1;r>=0;--r){let i=this.animations_[r],o=!0;for(let s=0,a=i.length;s<a;++s){let l=i[s];if(l.complete)continue;let c=e-l.start,f=l.duration>0?c/l.duration:1;f>=1?(l.complete=!0,f=1):o=!1;let d=l.easing(f);if(l.sourceCenter){let y=l.sourceCenter[0],p=l.sourceCenter[1],_=l.targetCenter[0],x=l.targetCenter[1];this.nextCenter_=l.targetCenter;let b=y+d*(_-y),S=p+d*(x-p);this.targetCenter_=[b,S]}if(l.sourceResolution&&l.targetResolution){let y=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){let p=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(y,0,p,!0);this.targetCenter_=this.calculateCenterZoom(_,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let y=d===1?vl(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){let p=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint($r.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let s=i[0].callback;s&&Vb(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r,i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],Im(r,e-this.getRotation()),D8(r,t)),r}calculateCenterZoom(e,t){let r,i=this.getCenterInternal(),o=this.getResolution();if(i!==void 0&&o!==void 0){let s=t[0]-e*(t[0]-i[0])/o,a=t[1]-e*(t[1]-i[1])/o;r=[s,a]}return r}getViewportSize_(e){let t=this.viewportSize_;if(e){let r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&Xl(e,this.getProjection())}getCenterInternal(){return this.get(gu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){let t=this.calculateExtentInternal(e);return Zl(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();let t=this.getCenterInternal();an(t,"The view center is not defined");let r=this.getResolution();an(r!==void 0,"The view resolution is not defined");let i=this.getRotation();return an(i!==void 0,"The view rotation is not defined"),Zf(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(gu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(so(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();let r=on(e)/t[0],i=or(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;let t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(o){return t/Math.pow(e,o*i)})}getRotation(){return this.get(gu.ROTATION)}getValueForResolutionFunction(e){let t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(r/i)/t;return(function(s){return Math.log(r/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e),r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){let e=this.getProjection(),t=this.getResolution(),r=this.getRotation(),i=this.getCenterInternal(),o=this.padding_;if(o){let s=this.getViewportSizeMinusPadding_();i=IN(i,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){let o=yd(this.resolutions_,e,1);t=o,r=this.resolutions_[o],o==this.resolutions_.length-1?i=2:i=r/this.resolutions_[o+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];let t=Xn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Xn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(an(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){an(!ms(e),"Cannot fit empty extent provided as `geometry`");let i=so(e,this.getProjection());r=xN(i)}else if(e.getType()==="Circle"){let i=so(e.getExtent(),this.getProjection());r=xN(i),r.rotate(this.getRotation(),zo(i))}else{let i=_s();i?r=e.clone().transform(i,this.getProjection()):r=e}this.fitInternal(r,t)}rotatedExtentForGeometry(e){let t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride(),a=1/0,l=1/0,c=-1/0,f=-1/0;for(let d=0,y=o.length;d<y;d+=s){let p=o[d]*r-o[d+1]*i,_=o[d]*i+o[d+1]*r;a=Math.min(a,p),l=Math.min(l,_),c=Math.max(c,p),f=Math.max(f,_)}return[a,l,c,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());let i=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1,s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;let a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);let c=this.getRotation(),f=Math.sin(c),d=Math.cos(c),y=zo(a);y[0]+=(i[1]-i[3])/2*l,y[1]+=(i[0]-i[2])/2*l;let p=y[0]*d-y[1]*f,_=y[1]*d+y[0]*f,x=this.getConstrainedCenter([p,_],l),b=t.callback?t.callback:Kh;t.duration!==void 0?this.animateInternal({resolution:l,center:x,duration:t.duration,easing:t.easing},b):(this.targetResolution_=l,this.targetCenter_=x,this.applyTargetState_(!1,!0),Vb(b,!0))}centerOn(e,t,r){this.centerOnInternal(Or(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(IN(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let o,s=this.padding_;if(s&&e){let a=this.getViewportSizeMinusPadding_(-r),l=IN(e,i,[a[0]/2+s[3],a[1]/2+s[0]],t,r);o=[e[0]-l[0],e[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let t=Xl(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){let t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Or(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){let r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Or(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){let r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Or(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){let r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,i,o));this.get(gu.ROTATION)!==i&&this.set(gu.ROTATION,i),this.get(gu.RESOLUTION)!==s&&(this.set(gu.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(gu.CENTER)||!ys(this.get(gu.CENTER),a))&&this.set(gu.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;let i=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!ys(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:e,easing:Ha,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint($r.INTERACTING,1)}endInteraction(e,t,r){r=r&&Or(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint($r.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){let r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){let r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;let r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}};function Vb(n,e){setTimeout(function(){n(e)},0)}function oae(n){if(n.extent!==void 0){let t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return aN(n.extent,n.constrainOnlyCenter,t)}let e=Hw(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){let t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,aN(t,!1,!1)}return SG}function sae(n){let e,t,r,s=n.minZoom!==void 0?n.minZoom:CN,a=n.maxZoom!==void 0?n.maxZoom:28,l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,y=Hw(n.projection,"EPSG:3857"),p=y.getExtent(),_=n.constrainOnlyCenter,x=n.extent;if(!c&&!x&&y.isGlobal()&&(_=!1,x=p),n.resolutions!==void 0){let b=n.resolutions;t=b[s],r=b[a]!==void 0?b[a]:b[b.length-1],n.constrainResolution?e=WG(b,f,!_&&x,d):e=bN(t,r,f,!_&&x,d)}else{let S=(p?Math.max(on(p),or(p)):360*zw.degrees/y.getMetersPerUnit())/256/Math.pow(2,CN),T=S/Math.pow(2,28-CN);t=n.maxResolution,t!==void 0?s=0:t=S/Math.pow(l,s),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,a):r=S/Math.pow(l,a):r=T),a=s+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,a-s),n.constrainResolution?e=$G(l,t,r,f,!_&&x,d):e=bN(t,r,f,!_&&x,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:s,zoomFactor:l}}function aae(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let t=n.constrainRotation;return t===void 0||t===!0?XG():t===!1?SN:typeof t=="number"?YG(t):SN}return q0}function lae(n){return!(n.sourceCenter&&n.targetCenter&&!ys(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function IN(n,e,t,r,i){let o=Math.cos(-i),s=Math.sin(-i),a=n[0]*o-n[1]*s,l=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,s=-s;let c=a*o-l*s,f=l*o+a*s;return[c,f]}var Il=TN;var b1="ol-hidden";var Id="ol-unselectable";var W0="ol-control",DN="ol-collapsed",uae=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),KG=["style","variant","weight","size","lineHeight","family"],Hb={normal:400,bold:700},qb=function(n){let e=n.match(uae);if(!e)return null;let t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=KG.length;r<i;++r){let o=e[r+1];o!==void 0&&(t[KG[r]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in Hb&&(t.weight=Hb[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t};function Qn(n,e,t,r){let i;return t&&t.length?i=t.shift():Bi?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}var AN;function $0(){return AN||(AN=Qn(1,1)),AN}function Jh(n){let e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function RN(n,e){let t=e.parentNode;t&&t.replaceChild(n,e)}function JG(n){for(;n.lastChild;)n.lastChild.remove()}function QG(n,e){let t=n.childNodes;for(let r=0;;++r){let i=t[r],o=e[r];if(!i&&!o)break;if(i!==o){if(!i){n.appendChild(o);continue}if(!o){n.removeChild(i),--r;continue}n.insertBefore(o,i)}}}function Wb(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){let t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){let r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function Yu(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}var MN=class extends Io{constructor(e){super();let t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)On(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){let t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==Kh&&this.listenerKeys.push(cn(e,kc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}},Qh=MN;var NN=class extends Qh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;let t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;let a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(gt.CLICK,this.handleClick_.bind(this),!1);let c=t+" "+Id+" "+W0+(this.collapsed_&&this.collapsible_?" "+DN:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=c,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){let t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){let i=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}updateElement_(e){return We(this,null,function*(){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let t=yield Promise.all(this.collectSourceAttributions_(e).map(i=>B0(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!is(t,this.renderedAttributions_)){JG(this.ulElement_);for(let i=0,o=t.length;i<o;++i){let s=document.createElement("li");s.innerHTML=t[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}})}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(DN),this.collapsed_?RN(this.collapseLabel_,this.label_):RN(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},e9=NN;var PN=class extends Qh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});let t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"\u21E7",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));let o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(gt.CLICK,this.handleClick_.bind(this),!1);let a=t+" "+Id+" "+W0,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(b1)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let t=this.getMap().getView();if(!t)return;let r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Ha}):t.setRotation(0))}render(e){let t=e.frameState;if(!t)return;let r=t.viewState.rotation;if(r!=this.rotation_){let i="rotate("+r+"rad)";if(this.autoHide_){let o=this.element.classList.contains(b1);!o&&r===0?this.element.classList.add(b1):o&&r!==0&&this.element.classList.remove(b1)}this.label_.style.transform=i}this.rotation_=r}},t9=PN;var LN=class extends Qh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});let t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof s=="string"?document.createTextNode(s):s),f.addEventListener(gt.CLICK,this.handleClick_.bind(this,r),!1);let d=document.createElement("button");d.className=o,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(gt.CLICK,this.handleClick_.bind(this,-r),!1);let y=t+" "+Id+" "+W0,p=this.element;p.className=y,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){let r=this.getMap().getView();if(!r)return;let i=r.getZoom();if(i!==void 0){let o=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:Ha})):r.setZoom(o)}}},n9=LN;function S1(n){n=n||{};let e=new vi;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new n9(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new t9(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new e9(n.attributionOptions)),e}var kN=class{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;let e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;let i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;let o=this.points_[t]-this.points_[r],s=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},r9=kN;var dg={ACTIVE:"active"};var ON=class extends Io{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(dg.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(dg.ACTIVE,e)}setMap(e){this.map_=e}};function i9(n,e,t){let r=n.getCenterInternal();if(r){let i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:IG,center:n.getConstrainedCenter(i)})}}function Y0(n,e,t,r){let i=n.getZoom();if(i===void 0)return;let o=n.getConstrainedZoom(i+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:r!==void 0?r:250,easing:Ha})}var yu=ON;var FN=class extends yu{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Pn.DBLCLICK){let r=e.originalEvent,i=e.map,o=e.coordinate,s=r.shiftKey?-this.delta_:this.delta_,a=i.getView();Y0(a,s,o,this.duration_),r.preventDefault(),t=!0}return!t}},o9=FN;function C1(n){let e=arguments;return function(t){let r=!0;for(let i=0,o=e.length;i<o&&(r=r&&e[i](t),!!r);++i);return r}}var s9=function(n){let e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},a9=function(n){let e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},cae=function(n){let e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},$b=function(n){let e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?cae(n):!0},Xu=Ss,l9=function(n){return n.type==Pn.CLICK},Yb=function(n){let e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(_G&&nN&&e.ctrlKey)},pg=fu;var Xb=function(n){return n.type==Pn.SINGLECLICK};var X0=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var u9=function(n){let e=n.originalEvent;return nN?e.metaKey:e.ctrlKey},gg=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Zb=function(n){let e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Kb=function(n){let e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"};var Jb=function(n){let e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};var BN=class extends yu{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Pn.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Pn.POINTERUP){let r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==Pn.POINTERDOWN){let r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==Pn.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function Z0(n){let e=n.length,t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}var Zs=BN;var jN=class extends Zs{constructor(e){super({stopDown:fu}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let t=e.condition?e.condition:C1(X0,Jb);this.condition_=e.onFocusOnly?C1($b,t):t,this.noKinetic_=!1}handleDragEvent(e){let t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());let r=this.targetPointers,i=t.getEventPixel(Z0(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();R8(o,a.getResolution()),Im(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){let t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),l=t.getCoordinateFromPixelInternal([a[0]-i*Math.cos(o),a[1]-i*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:Ha})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){let r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},c9=jN;var UN=class extends Zs{constructor(e){e=e||{},super({stopDown:fu}),this.condition_=e.condition?e.condition:a9,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Kb(e))return;let t=e.map,r=t.getView();if(r.getConstraints().rotation===q0)return;let i=t.getSize(),o=e.pixel,s=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(this.lastAngle_!==void 0){let a=s-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return Kb(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Kb(e)&&Yb(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},h9=UN;var GN=class extends Lc{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;let e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Wo([i])}getGeometry(){return this.geometry_}},f9=GN;var K0={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},mg=class extends jr{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}},zN=class extends Zs{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new f9(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Yb,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){let i=r[0]-t[0],o=r[1]-t[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new mg(K0.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;let t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new mg(t?K0.BOXEND:K0.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new mg(K0.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new mg(K0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new mg(K0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}},d9=zN;var VN=class extends d9{constructor(e){e=e||{};let t=e.condition?e.condition:gg;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){let r=this.getMap().getView(),i=this.getGeometry();if(this.out_){let o=r.rotatedExtentForGeometry(i),s=r.getResolutionForExtentInternal(o),a=r.getResolution()/s;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:Ha})}},p9=VN;var Td={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var HN=class extends yu{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return X0(t)&&Zb(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==gt.KEYDOWN){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==Td.DOWN||i==Td.LEFT||i==Td.RIGHT||i==Td.UP)){let s=e.map.getView(),a=s.getResolution()*this.pixelDelta_,l=0,c=0;i==Td.DOWN?c=-a:i==Td.LEFT?l=-a:i==Td.RIGHT?l=a:c=a;let f=[l,c];Im(f,s.getRotation()),i9(s,f,this.duration_),r.preventDefault(),t=!0}}return!t}},g9=HN;var qN=class extends yu{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!u9(t)&&Zb(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==gt.KEYDOWN||e.type==gt.KEYPRESS){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){let o=e.map,s=i==="+"?this.delta_:-this.delta_,a=o.getView();Y0(a,s,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}},m9=qN;var hae=40,fae=300,WN=class extends yu{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;let t=e.condition?e.condition:Xu;this.condition_=e.onFocusOnly?C1($b,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==gt.WHEEL)return!0;let r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=hae;break;case WheelEvent.DOM_DELTA_PAGE:o*=fae;break;default:}if(o===0)return!1;this.lastDelta_=o;let s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");let a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;let l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){let t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Xn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),Y0(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},y9=WN;var $N=class extends Zs{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=fu),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0,r=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){let l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=o;let s=e.map,a=s.getView();a.getConstraints().rotation!==q0&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Z0(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},_9=$N;var YN=class extends Zs{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=fu),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1,r=this.targetPointers[0],i=this.targetPointers[1],o=r.clientX-i.clientX,s=r.clientY-i.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;let l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(Z0(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){let r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},v9=YN;function x9(n){n=n||{};let e=new vi,t=new r9(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new h9),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new o9({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new c9({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new _9),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new v9({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new g9),e.push(new m9({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new y9({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new p9({duration:n.zoomDuration})),e}var ur={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var XN=class extends Io{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[ur.OPACITY]=e.opacity!==void 0?e.opacity:1,an(typeof t[ur.OPACITY]=="number","Layer opacity must be a number"),t[ur.VISIBLE]=e.visible!==void 0?e.visible:!0,t[ur.Z_INDEX]=e.zIndex,t[ur.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[ur.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[ur.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[ur.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Xn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return It()}getLayerStatesArray(e){return It()}getExtent(){return this.get(ur.EXTENT)}getMaxResolution(){return this.get(ur.MAX_RESOLUTION)}getMinResolution(){return this.get(ur.MIN_RESOLUTION)}getMinZoom(){return this.get(ur.MIN_ZOOM)}getMaxZoom(){return this.get(ur.MAX_ZOOM)}getOpacity(){return this.get(ur.OPACITY)}getSourceState(){return It()}getVisible(){return this.get(ur.VISIBLE)}getZIndex(){return this.get(ur.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(ur.EXTENT,e)}setMaxResolution(e){this.set(ur.MAX_RESOLUTION,e)}setMinResolution(e){this.set(ur.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(ur.MAX_ZOOM,e)}setMinZoom(e){this.set(ur.MIN_ZOOM,e)}setOpacity(e){an(typeof e=="number","Layer opacity must be a number"),this.set(ur.OPACITY,e)}setVisible(e){this.set(ur.VISIBLE,e)}setZIndex(e){this.set(ur.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Qb=XN;var Dd={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"},Zu=class extends jr{constructor(e,t){super(e),this.layer=t}},ZN={LAYERS:"layers"},KN=class n extends Qb{constructor(e){e=e||{};let t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(ZN.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new vi(r.slice(),{unique:!0}):an(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new vi(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(On),this.layersListenerKeys_.length=0;let e=this.getLayers();this.layersListenerKeys_.push(cn(e,_i.ADD,this.handleLayersAdd_,this),cn(e,_i.REMOVE,this.handleLayersRemove_,this));for(let r in this.listenerKeys_)this.listenerKeys_[r].forEach(On);Oa(this.listenerKeys_);let t=e.getArray();for(let r=0,i=t.length;r<i;r++){let o=t[r];this.registerLayerListeners_(o),this.dispatchEvent(new Zu(Dd.ADDLAYER,o))}this.changed()}registerLayerListeners_(e){let t=[cn(e,$u.PROPERTYCHANGE,this.handleLayerChange_,this),cn(e,gt.CHANGE,this.handleLayerChange_,this)];e instanceof n&&t.push(cn(e,Dd.ADDLAYER,this.handleLayerGroupAdd_,this),cn(e,Dd.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[ct(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Zu(Dd.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Zu(Dd.REMOVELAYER,e.layer))}handleLayersAdd_(e){let t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Zu(Dd.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){let t=e.element,r=ct(t);this.listenerKeys_[r].forEach(On),delete this.listenerKeys_[r],this.dispatchEvent(new Zu(Dd.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(ZN.LAYERS)}setLayers(e){let t=this.getLayers();if(t){let r=t.getArray();for(let i=0,o=r.length;i<o;++i)this.dispatchEvent(new Zu(Dd.REMOVELAYER,r[i]))}this.set(ZN.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){let t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});let i=this.getLayerState(),o=i.zIndex;!e&&i.zIndex===void 0&&(o=0);for(let s=r,a=t.length;s<a;s++){let l=t[s];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=kr(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=o)}return t}getSourceState(){return"ready"}},yg=KN;var Ri={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var JN=class extends Qb{constructor(e){let t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(ur.SOURCE,this.handleSourcePropertyChange_);let r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(ur.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(On(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=cn(e,gt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t,r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof Il?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(s=>s.layer===this),!i)return!1}else i=this.getLayerState();let o=this.getExtent();return I1(i,t.viewState)&&(!o||Jn(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t=this.getSource()?.getAttributions();if(!t)return[];let r=e instanceof Il?e.getViewStateAndExtent():e,i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){let r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){let t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(ur.MAP,e)}getMapInternal(){return this.get(ur.MAP)}setMap(e){this.mapPrecomposeKey_&&(On(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(On(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=cn(e,Ri.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=cn(this,gt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){let t=e.frameState.layerStatesArray,r=this.getLayerState(!1);an(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(ur.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function I1(n,e){if(!n.visible)return!1;let t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;let r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}var ef=JN;function eS(n,e,t=0,r=n.length-1,i=dae){for(;r>t;){if(r-t>600){let l=r-t+1,c=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(t,Math.floor(e-c*d/l+y)),_=Math.min(r,Math.floor(e+(l-c)*d/l+y));eS(n,e,p,_,i)}let o=n[e],s=t,a=r;for(T1(n,t,e),i(n[r],o)>0&&T1(n,t,r);s<a;){for(T1(n,s,a),s++,a--;i(n[s],o)<0;)s++;for(;i(n[a],o)>0;)a--}i(n[t],o)===0?T1(n,t,a):(a++,T1(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}}function T1(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}function dae(n,e){return n<e?-1:n>e?1:0}var ey=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,r=[];if(!nS(e,t))return r;let i=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){let a=t.children[s],l=t.leaf?i(a):a;nS(e,l)&&(t.leaf?r.push(a):eP(e,l)?this._all(a,r):o.push(a))}t=o.pop()}return r}collides(e){let t=this.data;if(!nS(e,t))return!1;let r=[];for(;t;){for(let i=0;i<t.children.length;i++){let o=t.children[i],s=t.leaf?this.toBBox(o):o;if(nS(e,s)){if(t.leaf||eP(e,s))return!0;r.push(o)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Q0([]),this}remove(e,t){if(!e)return this;let r=this.data,i=this.toBBox(e),o=[],s=[],a,l,c;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],a=s.pop(),c=!0),r.leaf){let f=pae(e,r.children,t);if(f!==-1)return r.children.splice(f,1),o.push(r),this._condense(o),this}!c&&!r.leaf&&eP(r,i)?(o.push(r),s.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){let o=r-t+1,s=this._maxEntries,a;if(o<=s)return a=Q0(e.slice(t,r+1)),J0(a,this.toBBox),a;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),a=Q0([]),a.leaf=!1,a.height=i;let l=Math.ceil(o/s),c=l*Math.ceil(Math.sqrt(s));w9(e,t,r,c,this.compareMinX);for(let f=t;f<=r;f+=c){let d=Math.min(f+c-1,r);w9(e,f,d,l,this.compareMinY);for(let y=f;y<=d;y+=l){let p=Math.min(y+l-1,d);a.children.push(this._build(e,y,p,i-1))}}return J0(a,this.toBBox),a}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let o=1/0,s=1/0,a;for(let l=0;l<t.children.length;l++){let c=t.children[l],f=QN(c),d=yae(e,c)-f;d<s?(s=d,o=f<o?f:o,a=c):d===s&&f<o&&(o=f,a=c)}t=a||t.children[0]}return t}_insert(e,t,r){let i=r?e:this.toBBox(e),o=[],s=this._chooseSubtree(i,this.data,t,o);for(s.children.push(e),A1(s,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)}_split(e,t){let r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);let s=this._chooseSplitIndex(r,o,i),a=Q0(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,J0(r,this.toBBox),J0(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=Q0([e,t]),this.data.height=e.height+1,this.data.leaf=!1,J0(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,o=1/0,s=1/0;for(let a=t;a<=r-t;a++){let l=D1(e,0,a,this.toBBox),c=D1(e,a,r,this.toBBox),f=_ae(l,c),d=QN(l)+QN(c);f<o?(o=f,i=a,s=d<s?d:s):f===o&&d<s&&(s=d,i=a)}return i||r-t}_chooseSplitAxis(e,t,r){let i=e.leaf?this.compareMinX:gae,o=e.leaf?this.compareMinY:mae,s=this._allDistMargin(e,t,r,i),a=this._allDistMargin(e,t,r,o);s<a&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);let o=this.toBBox,s=D1(e,0,t,o),a=D1(e,r-t,r,o),l=tS(s)+tS(a);for(let c=t;c<r-t;c++){let f=e.children[c];A1(s,e.leaf?o(f):f),l+=tS(s)}for(let c=r-t-1;c>=t;c--){let f=e.children[c];A1(a,e.leaf?o(f):f),l+=tS(a)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)A1(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():J0(e[t],this.toBBox)}};function pae(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function J0(n,e){D1(n,0,n.children.length,e,n)}function D1(n,e,t,r,i){i||(i=Q0(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<t;o++){let s=n.children[o];A1(i,n.leaf?r(s):s)}return i}function A1(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function gae(n,e){return n.minX-e.minX}function mae(n,e){return n.minY-e.minY}function QN(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function tS(n){return n.maxX-n.minX+(n.maxY-n.minY)}function yae(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function _ae(n,e){let t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,o-r)}function eP(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function nS(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function Q0(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function w9(n,e,t,r,i){let o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=r)continue;let s=e+Math.ceil((t-e)/r/2)*r;eS(n,s,e,t,i),o.push(e,s,s,t)}}var iS=[NaN,NaN,NaN,0],tP;function vae(){return tP||(tP=Qn(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),tP}var xae=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,wae=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Eae=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,bae=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function rS(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function M1(n){throw new Error('failed to parse "'+n+'" as color')}function E9(n){if(n.toLowerCase().startsWith("rgb")){let o=n.match(wae)||n.match(xae)||n.match(Eae);if(o){let s=o[4],a=100/255;return[Xn(rS(o[1],a)+.5|0,0,255),Xn(rS(o[2],a)+.5|0,0,255),Xn(rS(o[3],a)+.5|0,0,255),s!==void 0?Xn(rS(s,100),0,1):1]}M1(n)}if(n.startsWith("#")){if(bae.test(n)){let o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=o.length;l<c;l+=s){let f=parseInt(o.substring(l,l+s),16);s===1&&(f+=f<<4),a[l/s]=f}return a[3]=a[3]/255,a}M1(n)}let e=vae();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&M1(n));let r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return E9(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);let i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=ym(i[3]/255,3),i}function b9(n){return typeof n=="string"?n:P1(n)}var Sae=1024,R1={},nP=0;function S9(n){if(n.length===4)return n;let e=n.slice();return e[3]=1,e}function rP(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function iP(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function oP(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function sP(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function aP(n){let e=oP(n[0]),t=oP(n[1]),r=oP(n[2]),i=sP(e*.222488403+t*.716873169+r*.06060791),o=500*(sP(e*.452247074+t*.399439023+r*.148375274)-i),s=200*(i-sP(e*.016863605+t*.117638439+r*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*i-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function C9(n){let e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=iP(e),o=iP(e+t/500*Math.cos(r)),s=iP(e-t/200*Math.sin(r)),a=rP(o*3.021973625-i*1.617392459-s*.404875592),l=rP(o*-.943766287+i*1.916279586+s*.027607165),c=rP(o*.069407491-i*.22898585+s*1.159737864);return[Xn(a+.5|0,0,255),Xn(l+.5|0,0,255),Xn(c+.5|0,0,255),n[3]]}function N1(n){if(n==="none")return iS;if(R1.hasOwnProperty(n))return R1[n];if(nP>=Sae){let t=0;for(let r in R1)(t++&3)===0&&(delete R1[r],--nP)}let e=E9(n);e.length!==4&&M1(n);for(let t of e)isNaN(t)&&M1(n);return R1[n]=e,++nP,e}function Ks(n){return Array.isArray(n)?n:N1(n)}function P1(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);let i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function lP(n){return n[0]>0&&n[1]>0}function I9(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function er(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}var vg=0;var To=1<<vg++,wn=1<<vg++,Is=1<<vg++,os=1<<vg++,Ju=1<<vg++,Ad=1<<vg++,oS=Math.pow(2,vg)-1,cP={[To]:"boolean",[wn]:"number",[Is]:"string",[os]:"color",[Ju]:"number[]",[Ad]:"size"},Cae=Object.keys(cP).map(Number).sort(Ys);function Iae(n){return n in cP}function _g(n){let e=[];for(let t of Cae)L1(n,t)&&e.push(cP[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function L1(n,e){return(n&e)===e}function Ku(n,e){return n===e}var eo=class{constructor(e,t){if(!Iae(e))throw new Error(`literal expressions must have a specific type, got ${_g(e)}`);this.type=e,this.value=t}},k1=class{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}};function O1(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Do(n,e,t){switch(typeof n){case"boolean":{if(Ku(e,Is))return new eo(Is,n?"true":"false");if(!L1(e,To))throw new Error(`got a boolean, but expected ${_g(e)}`);return new eo(To,n)}case"number":{if(Ku(e,Ad))return new eo(Ad,er(n));if(Ku(e,To))return new eo(To,!!n);if(Ku(e,Is))return new eo(Is,n.toString());if(!L1(e,wn))throw new Error(`got a number, but expected ${_g(e)}`);return new eo(wn,n)}case"string":{if(Ku(e,os))return new eo(os,N1(n));if(Ku(e,To))return new eo(To,!!n);if(!L1(e,Is))throw new Error(`got a string, but expected ${_g(e)}`);return new eo(Is,n)}default:}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return Fae(n,e,t);for(let r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(Ku(e,Ad)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new eo(Ad,n)}if(Ku(e,os)){if(n.length===3)return new eo(os,[...n,1]);if(n.length===4)return new eo(os,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!L1(e,Ju))throw new Error(`got an array of numbers, but expected ${_g(e)}`);return new eo(Ju,n)}var je={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Tae={[je.Get]:gn(zn(1,1/0),T9),[je.Var]:gn(zn(1,1),Dae),[je.Has]:gn(zn(1,1/0),T9),[je.Id]:gn(Aae,ty),[je.Concat]:gn(zn(2,1/0),Rr(Is)),[je.GeometryType]:gn(Rae,ty),[je.LineMetric]:gn(ty),[je.Resolution]:gn(uP,ty),[je.Zoom]:gn(uP,ty),[je.Time]:gn(uP,ty),[je.Any]:gn(zn(2,1/0),Rr(To)),[je.All]:gn(zn(2,1/0),Rr(To)),[je.Not]:gn(zn(1,1),Rr(To)),[je.Equal]:gn(zn(2,2),Rr(oS)),[je.NotEqual]:gn(zn(2,2),Rr(oS)),[je.GreaterThan]:gn(zn(2,2),Rr(wn)),[je.GreaterThanOrEqualTo]:gn(zn(2,2),Rr(wn)),[je.LessThan]:gn(zn(2,2),Rr(wn)),[je.LessThanOrEqualTo]:gn(zn(2,2),Rr(wn)),[je.Multiply]:gn(zn(2,1/0),D9),[je.Coalesce]:gn(zn(2,1/0),D9),[je.Divide]:gn(zn(2,2),Rr(wn)),[je.Add]:gn(zn(2,1/0),Rr(wn)),[je.Subtract]:gn(zn(2,2),Rr(wn)),[je.Clamp]:gn(zn(3,3),Rr(wn)),[je.Mod]:gn(zn(2,2),Rr(wn)),[je.Pow]:gn(zn(2,2),Rr(wn)),[je.Abs]:gn(zn(1,1),Rr(wn)),[je.Floor]:gn(zn(1,1),Rr(wn)),[je.Ceil]:gn(zn(1,1),Rr(wn)),[je.Round]:gn(zn(1,1),Rr(wn)),[je.Sin]:gn(zn(1,1),Rr(wn)),[je.Cos]:gn(zn(1,1),Rr(wn)),[je.Atan]:gn(zn(1,2),Rr(wn)),[je.Sqrt]:gn(zn(1,1),Rr(wn)),[je.Match]:gn(zn(4,1/0),A9,Nae),[je.Between]:gn(zn(3,3),Rr(wn)),[je.Interpolate]:gn(zn(6,1/0),A9,Pae),[je.Case]:gn(zn(3,1/0),Mae,Lae),[je.In]:gn(zn(2,2),kae),[je.Number]:gn(zn(1,1/0),Rr(oS)),[je.String]:gn(zn(1,1/0),Rr(oS)),[je.Array]:gn(zn(1,1/0),Rr(wn)),[je.Color]:gn(zn(1,4),Rr(wn)),[je.Band]:gn(zn(1,3),Rr(wn)),[je.Palette]:gn(zn(2,2),Oae),[je.ToString]:gn(zn(1,1),Rr(To|wn|Is|os))};function T9(n,e,t){let r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){let s=n[o+1];switch(typeof s){case"number":{i[o]=new eo(wn,s);break}case"string":{i[o]=new eo(Is,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return i}function Dae(n,e,t){let r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new eo(Is,r)]}function Aae(n,e,t){t.featureId=!0}function Rae(n,e,t){t.geometryType=!0}function uP(n,e,t){t.mapState=!0}function ty(n,e,t){let r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function zn(n,e){return function(t,r,i){let o=t[0],s=t.length-1;if(n===e){if(s!==n){let a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){let a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function D9(n,e,t){let r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){let s=Do(n[o+1],e,t);i[o]=s}return i}function Rr(n){return function(e,t,r){let i=e.length-1,o=new Array(i);for(let s=0;s<i;++s){let a=Do(e[s+1],n,r);o[s]=a}return o}}function Mae(n,e,t){let r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function A9(n,e,t){let r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function Nae(n,e,t){let r=n.length-1,i=Is|wn|To,o=Do(n[1],i,t),s=Do(n[n.length-1],e,t),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{let c=Do(n[l+2],o.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{let c=Do(n[l+3],s.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[o,...a,s]}function Pae(n,e,t){let r=n[1],i;switch(r[0]){case"linear":i=1;break;case"exponential":let l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}let o=new eo(wn,i),s;try{s=Do(n[2],wn,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}let a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){try{let c=Do(n[l+3],wn,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{let c=Do(n[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[o,s,...a]}function Lae(n,e,t){let r=Do(n[n.length-1],e,t),i=new Array(n.length-1);for(let o=0;o<i.length-1;o+=2){try{let s=Do(n[o+1],To,t);i[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{let s=Do(n[o+2],r.type,t);i[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return i[i.length-1]=r,i}function kae(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Is}else i=wn;let o=new Array(r.length);for(let a=0;a<o.length;a++)try{let l=Do(r[a],i,t);o[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Do(n[1],i,t),...o]}function Oae(n,e,t){let r;try{r=Do(n[1],wn,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}let i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");let o=new Array(i.length);for(let s=0;s<o.length;s++){let a;try{a=Do(i[s],os,t)}catch(l){throw new Error(`failed to parse color at index ${s} in palette expression: ${l.message}`)}if(!(a instanceof eo))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[r,...o]}function gn(...n){return function(e,t,r){let i=e[0],o;for(let s=0;s<n.length;s++){let a=n[s](e,t,r);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new k1(t,i,...o)}}function Fae(n,e,t){let r=n[0],i=Tae[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function hP(n){if(!n)return"";let e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return hP(n.getGeometries()[0]);default:return""}}function fP(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Oc(n,e,t){let r=Do(n,e,t);return Qu(r,t)}function Qu(n,e){if(n instanceof eo){if(n.type===os&&typeof n.value=="string"){let r=N1(n.value);return function(){return r}}return function(){return n.value}}let t=n.operator;switch(t){case je.Number:case je.String:case je.Coalesce:return Bae(n,e);case je.Get:case je.Var:case je.Has:return jae(n,e);case je.Id:return r=>r.featureId;case je.GeometryType:return r=>r.geometryType;case je.Concat:{let r=n.args.map(i=>Qu(i,e));return i=>"".concat(...r.map(o=>o(i).toString()))}case je.Resolution:return r=>r.resolution;case je.Any:case je.All:case je.Between:case je.In:case je.Not:return Gae(n,e);case je.Equal:case je.NotEqual:case je.LessThan:case je.LessThanOrEqualTo:case je.GreaterThan:case je.GreaterThanOrEqualTo:return Uae(n,e);case je.Multiply:case je.Divide:case je.Add:case je.Subtract:case je.Clamp:case je.Mod:case je.Pow:case je.Abs:case je.Floor:case je.Ceil:case je.Round:case je.Sin:case je.Cos:case je.Atan:case je.Sqrt:return zae(n,e);case je.Case:return Vae(n,e);case je.Match:return Hae(n,e);case je.Interpolate:return qae(n,e);case je.ToString:return Wae(n,e);default:throw new Error(`Unsupported operator ${t}`)}}function Bae(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Qu(n.args[o],e);switch(t){case je.Coalesce:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case je.Number:case je.String:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function jae(n,e){let r=n.args[0].value;switch(n.operator){case je.Get:return i=>{let o=n.args,s=i.properties[r];for(let a=1,l=o.length;a<l;++a){let f=o[a].value;s=s[f]}return s};case je.Var:return i=>i.variables[r];case je.Has:return i=>{let o=n.args;if(!(r in i.properties))return!1;let s=i.properties[r];for(let a=1,l=o.length;a<l;++a){let f=o[a].value;if(!s||!Object.hasOwn(s,f))return!1;s=s[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Uae(n,e){let t=n.operator,r=Qu(n.args[0],e),i=Qu(n.args[1],e);switch(t){case je.Equal:return o=>r(o)===i(o);case je.NotEqual:return o=>r(o)!==i(o);case je.LessThan:return o=>r(o)<i(o);case je.LessThanOrEqualTo:return o=>r(o)<=i(o);case je.GreaterThan:return o=>r(o)>i(o);case je.GreaterThanOrEqualTo:return o=>r(o)>=i(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Gae(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Qu(n.args[o],e);switch(t){case je.Any:return o=>{for(let s=0;s<r;++s)if(i[s](o))return!0;return!1};case je.All:return o=>{for(let s=0;s<r;++s)if(!i[s](o))return!1;return!0};case je.Between:return o=>{let s=i[0](o),a=i[1](o),l=i[2](o);return s>=a&&s<=l};case je.In:return o=>{let s=i[0](o);for(let a=1;a<r;++a)if(s===i[a](o))return!0;return!1};case je.Not:return o=>!i[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function zae(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Qu(n.args[o],e);switch(t){case je.Multiply:return o=>{let s=1;for(let a=0;a<r;++a)s*=i[a](o);return s};case je.Divide:return o=>i[0](o)/i[1](o);case je.Add:return o=>{let s=0;for(let a=0;a<r;++a)s+=i[a](o);return s};case je.Subtract:return o=>i[0](o)-i[1](o);case je.Clamp:return o=>{let s=i[0](o),a=i[1](o);if(s<a)return a;let l=i[2](o);return s>l?l:s};case je.Mod:return o=>i[0](o)%i[1](o);case je.Pow:return o=>Math.pow(i[0](o),i[1](o));case je.Abs:return o=>Math.abs(i[0](o));case je.Floor:return o=>Math.floor(i[0](o));case je.Ceil:return o=>Math.ceil(i[0](o));case je.Round:return o=>Math.round(i[0](o));case je.Sin:return o=>Math.sin(i[0](o));case je.Cos:return o=>Math.cos(i[0](o));case je.Atan:return r===2?o=>Math.atan2(i[0](o),i[1](o)):o=>Math.atan(i[0](o));case je.Sqrt:return o=>Math.sqrt(i[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Vae(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qu(n.args[i],e);return i=>{for(let o=0;o<t-1;o+=2)if(r[o](i))return r[o+1](i);return r[t-1](i)}}function Hae(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qu(n.args[i],e);return i=>{let o=r[0](i);for(let s=1;s<t-1;s+=2)if(o===r[s](i))return r[s+1](i);return r[t-1](i)}}function qae(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Qu(n.args[i],e);return i=>{let o=r[0](i),s=r[1](i),a,l;for(let c=2;c<t;c+=2){let f=r[c](i),d=r[c+1](i),y=Array.isArray(d);if(y&&(d=S9(d)),f>=s)return c===2?d:y?$ae(o,s,a,l,f,d):F1(o,s,a,l,f,d);a=f,l=d}return l}}function Wae(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Qu(n.args[o],e);switch(t){case je.ToString:return o=>{let s=i[0](o);return n.args[0].type===os?P1(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function F1(n,e,t,r,i,o){let s=i-t;if(s===0)return r;let a=e-t,l=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return r+l*(o-r)}function $ae(n,e,t,r,i,o){if(i-t===0)return r;let a=aP(r),l=aP(o),c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);let f=[F1(n,e,t,a[0],i,l[0]),F1(n,e,t,a[1],i,l[1]),a[2]+F1(n,e,t,0,i,c),F1(n,e,t,r[3],i,o[3])];return C9(f)}var Et={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var dP=class extends du{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?Et.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(gt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Et.IDLE&&this.loader){this.state=Et.LOADING,this.changed();let e=this.getResolution(),t=Array.isArray(e)?e[0]:e;B0(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||rN&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=Et.LOADED}).catch(r=>{this.state=Et.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}};function R9(n,e,t){let r=n,i=!0,o=!1,s=!1,a=[j0(r,gt.LOAD,function(){s=!0,o||e()})];return r.src&&Ab?(o=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(s?e():t())})):a.push(j0(r,gt.ERROR,t)),function(){i=!1,a.forEach(On)}}function Yae(n,e){return new Promise((t,r)=>{function i(){s(),t(n)}function o(){s(),r(new Error("Image load error"))}function s(){n.removeEventListener("load",i),n.removeEventListener("error",o)}n.addEventListener("load",i),n.addEventListener("error",o),e&&(n.src=e)})}function pP(n,e){return e&&(n.src=e),n.src&&Ab?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):Yae(n)}function sS(n,e){return e&&(n.src=e),n.src&&Ab&&rN?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):pP(n)}var ny=dP;var mP=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let t in this.cache_){let r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){let i=gP(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){let i=gP(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,o){let s=gP(e,t,r),a=s in this.cache_;this.cache_[s]=i,o&&(i.getImageState()===Et.IDLE&&i.load(),i.getImageState()===Et.LOADING?i.ready().then(()=>{this.patternCache_[s]=$0().createPattern(i.getImage(1),"repeat")}):this.patternCache_[s]=$0().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function gP(n,e,t){let r=t?Ks(t):"null";return e+":"+n+":"+r}var Js=new mP;var B1=null,aS=class extends du{constructor(e,t,r,i,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=i===void 0?Et.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Et.LOADED){B1||(B1=Qn(1,1,void 0,{willReadFrequently:!0})),B1.drawImage(this.image_,0,0);try{B1.getImageData(0,0,1,1),this.tainted_=!1}catch{B1=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(gt.CHANGE)}handleImageError_(){this.imageState_=Et.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Et.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],t=this.size_[1],r=Qn(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Et.IDLE){this.image_||this.initializeImage_(),this.imageState_=Et.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&pP(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Et.LOADED)return;let t=this.image_,r=Qn(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=b9(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Et.LOADED||this.imageState_===Et.ERROR)e();else{let t=()=>{(this.imageState_===Et.LOADED||this.imageState_===Et.ERROR)&&(this.removeEventListener(gt.CHANGE,t),e())};this.addEventListener(gt.CHANGE,t)}})),this.ready_}};function xg(n,e,t,r,i,o){let s=e===void 0?void 0:Js.get(e,t,i);return s||(s=new aS(n,n&&"src"in n?n.src||void 0:e,t,r,i),Js.set(e,t,i,s,o)),o&&s&&!Js.getPattern(e,t,i)&&Js.set(e,t,i,s,o),s}var M9=aS;function Wa(n){return n?Array.isArray(n)?P1(n):typeof n=="object"&&"src"in n?Xae(n):n:null}function Xae(n){if(!n.offset||!n.size)return Js.getPattern(n.src,"anonymous",n.color);let e=n.src+":"+n.offset,t=Js.getPattern(e,void 0,n.color);if(t)return t;let r=Js.get(n.src,"anonymous",null);if(r.getImageState()!==Et.LOADED)return null;let i=Qn(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),xg(i.canvas,e,void 0,Et.LOADED,n.color,!0),Js.getPattern(e,void 0,n.color)}var lS="10px sans-serif",$o="#000",Fc="round",$a=[],Ya=0,Bc="round",tf=10,nf="#000",Rd="center",Eg="middle",rf=[0,0,0,0],of=1,wg=new Io,j1=null,N9,yP={},Zae=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function Kae(n,e,t){return`${n} ${e} 16px "${t}"`}var P9=(function(){let e,t;function r(o){return We(this,null,function*(){yield t.ready;let s=yield t.load(o);if(s.length===0)return!1;let a=qb(o),l=a.families[0].toLowerCase(),c=a.weight;return s.some(f=>{let d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),y=Hb[f.weight]||f.weight;return d===l&&f.style===a.style&&y==c})})}function i(){return We(this,null,function*(){yield t.ready;let o=!0,s=wg.getProperties(),a=Object.keys(s).filter(l=>s[l]<100);for(let l=a.length-1;l>=0;--l){let c=a[l],f=s[c];f<100&&((yield r(c))?(Oa(yP),wg.set(c,100)):(f+=10,wg.set(c,f,!0),f<100&&(o=!1)))}e=void 0,o||(e=setTimeout(i,100))})}return function(o){return We(this,null,function*(){t||(t=Bi?self.fonts:document.fonts);let s=qb(o);if(!s)return;let a=s.families,l=!1;for(let c of a){if(Zae.has(c))continue;let f=Kae(s.style,s.weight,c);wg.get(f)===void 0&&(wg.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))})}})(),Jae=(function(){let n;return function(e){let t=yP[e];if(t==null){if(Bi){let r=qb(e),i=L9(e,"\u017Dg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);yP[e]=t}return t}})();function L9(n,e){return j1||(j1=Qn(1,1)),n!=N9&&(j1.font=n,N9=j1.font),j1.measureText(e)}function k9(n,e){return L9(n,e).width}function _P(n,e,t){if(e in t)return t[e];let r=e.split(`
`).reduce((i,o)=>Math.max(i,k9(n,o)),0);return t[e]=r,r}function O9(n,e){let t=[],r=[],i=[],o=0,s=0,a=0,l=0;for(let c=0,f=e.length;c<=f;c+=2){let d=e[c];if(d===`
`||c===f){o=Math.max(o,s),i.push(s),s=0,a+=l,l=0;continue}let y=e[c+1]||n.font,p=k9(y,d);t.push(p),s+=p;let _=Jae(y);r.push(_),l=Math.max(l,_)}return{width:o,height:a,widths:t,heights:r,lineWidths:i}}function F9(n,e,t,r,i,o,s,a,l,c,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,c),n.scale(f[0],f[1]),Qae(r,n)):f[0]<0||f[1]<0?(n.translate(l,c),n.scale(f[0],f[1]),n.drawImage(r,i,o,s,a,0,0,s,a)):n.drawImage(r,i,o,s,a,l,c,s*f[0],a*f[1]),n.restore()}function Qae(n,e){let t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}var vP=class n{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=er(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return It()}getImage(e){return It()}getHitDetectionImage(){return It()}getPixelRatio(e){return 1}getImageState(){return It()}getImageSize(){return It()}getOrigin(){return It()}getSize(){return It()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=er(e)}listenImageChange(e){It()}load(){It()}unlistenImageChange(e){It()}ready(){return Promise.resolve()}},uS=vP;var xP=class n extends uS{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Et.LOADING:Et.LOADED,this.imageState_===Et.LOADING&&this.ready().then(()=>this.imageState_=Et.LOADED),this.render()}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){let e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(","),i=Js.get(r,null,null)?.getImage(1);if(!i){let o=this.renderOptions_,s=Math.ceil(o.size*e),a=Qn(s,s);this.draw_(o,a,e),i=a.canvas,Js.set(r,null,null,new M9(i,void 0,null,Et.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,o=this.radius2_===void 0?i:this.radius2_;if(i<o){let W=i;i=o,o=W}let s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),c=Math.sqrt(o*o-l*l),f=i-c,d=Math.sqrt(l*l+f*f),y=d/l;if(e==="miter"&&y<=r)return y*t;let p=t/2/y,_=t/2*(f/d),b=Math.sqrt((i+p)*(i+p)+_*_)-i;if(this.radius2_===void 0||e==="bevel")return b*2;let S=i*Math.sin(a),T=Math.sqrt(i*i-S*S),A=o-T,k=Math.sqrt(S*S+A*A)/S;if(k<=r){let W=k*t/2-o-i;return 2*Math.max(b,W)}return b*2}createRenderOptions(){let e=Fc,t=Bc,r=0,i=null,o=0,s,a=0;this.stroke_&&(s=Wa(this.stroke_.getColor()??nf),a=this.stroke_.getWidth()??of,i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Bc,e=this.stroke_.getLineCap()??Fc,r=this.stroke_.getMiterLimit()??tf);let l=this.calculateLineJoinSize_(t,a,r),c=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:f,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=$o),t.fillStyle=Wa(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Ks(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=Qn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_,r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{let i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);let o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){let l=o+a*s,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=$o,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},cS=xP;var wP=class n extends cS{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}},Ts=wP;var EP=class n{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){let t=xg(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Et.IDLE&&t.load(),t.getImageState()===Et.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){let e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?ct(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Ks(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},Er=EP;function B9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}var bP=class n extends uS{constructor(e){e=e||{};let t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;let s=e.img!==void 0?e.img:null,a=e.src;an(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||ct(s)),an(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),an(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Et.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?Et.LOADED:Et.IDLE:l=Et.LOADING:l=Et.LOADED),this.color_=e.color!==void 0?Ks(e.color):null,this.iconImage_=xg(s,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,f;if(e.size)[c,f]=e.size;else{let d=this.getImage(1);if(d.width&&d.height)c=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;let y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;let p=this.iconImage_.getSize();this.setScale(B9(p[0],p[1],e.width,e.height))};this.listenImageChange(y);return}}c!==void 0&&this.setScale(B9(c,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}let t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){let t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=xg(null,e,this.crossOrigin_,Et.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Et.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(gt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(gt.CHANGE,e)}ready(){return this.iconImage_.ready()}},Md=bP;var SP=class n{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},ci=SP;var Nd=class n{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=j9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=j9,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function U9(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(an(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}var CP=null;function IP(n,e){if(!CP){let t=new Er({color:"rgba(255,255,255,0.4)"}),r=new ci({color:"#3399CC",width:1.25});CP=[new Nd({image:new Ts({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return CP}function ry(){let n={},e=[255,255,255,1],t=[0,153,255,1],r=3;return n.Polygon=[new Nd({fill:new Er({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new Nd({stroke:new ci({color:e,width:r+2})}),new Nd({stroke:new ci({color:t,width:r})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new Nd({image:new Ts({radius:r*2,fill:new Er({color:t}),stroke:new ci({color:e,width:r/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function j9(n){return n.getGeometry()}var Xr=Nd;var ele="#333",TP=class n{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=er(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Er({color:ele}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Er?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=er(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},Pd=TP;function tle(n){return!0}function H9(n){let e=O1(),t=nle(n,e),r=fP();return function(i,o){if(r.properties=i.getPropertiesInternal(),r.resolution=o,e.featureId){let s=i.getId();s!==void 0?r.featureId=s:r.featureId=null}return e.geometryType&&(r.geometryType=hP(i.getGeometry())),t(r)}}function RP(n){let e=O1(),t=n.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=DP(n[s],e);let i=fP(),o=new Array(t);return function(s,a){if(i.properties=s.getPropertiesInternal(),i.resolution=a,e.featureId){let c=s.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<t;++c){let f=r[c](i);f&&(o[l]=f,l+=1)}return o.length=l,o}}function nle(n,e){let t=n.length,r=new Array(t);for(let i=0;i<t;++i){let o=n[i],s="filter"in o?Oc(o.filter,To,e):tle,a;if(Array.isArray(o.style)){let l=o.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=DP(o.style[c],e)}else a=[DP(o.style,e)];r[i]={filter:s,styles:a}}return function(i){let o=[],s=!1;for(let a=0;a<t;++a){let l=r[a].filter;if(l(i)&&!(n[a].else&&s)){s=!0;for(let c of r[a].styles){let f=c(i);f&&o.push(f)}}}return o}}function DP(n,e){let t=U1(n,"",e),r=G1(n,"",e),i=rle(n,e),o=ile(n,e),s=Xa(n,"z-index",e);if(!t&&!r&&!i&&!o&&!ya(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));let a=new Xr;return function(l){let c=!0;if(t){let f=t(l);f&&(c=!1),a.setFill(f)}if(r){let f=r(l);f&&(c=!1),a.setStroke(f)}if(i){let f=i(l);f&&(c=!1),a.setText(f)}if(o){let f=o(l);f&&(c=!1),a.setImage(f)}return s&&a.setZIndex(s(l)),c?null:a}}function U1(n,e,t){let r;if(e+"fill-pattern-src"in n)r=lle(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;r=MP(n,e+"fill-color",t)}if(!r)return null;let i=new Er;return function(o){let s=r(o);return s===iS?null:(i.setColor(s),i)}}function G1(n,e,t){let r=Xa(n,e+"stroke-width",t),i=MP(n,e+"stroke-color",t);if(!r&&!i)return null;let o=sf(n,e+"stroke-line-cap",t),s=sf(n,e+"stroke-line-join",t),a=q9(n,e+"stroke-line-dash",t),l=Xa(n,e+"stroke-line-dash-offset",t),c=Xa(n,e+"stroke-miter-limit",t),f=new ci;return function(d){if(i){let y=i(d);if(y===iS)return null;f.setColor(y)}if(r&&f.setWidth(r(d)),o){let y=o(d);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(y)}if(s){let y=s(d);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(y)}return a&&f.setLineDash(a(d)),l&&f.setLineDashOffset(l(d)),c&&f.setMiterLimit(c(d)),f}}function rle(n,e){let t="text-",r=sf(n,t+"value",e);if(!r)return null;let i=U1(n,t,e),o=U1(n,t+"background-",e),s=G1(n,t,e),a=G1(n,t+"background-",e),l=sf(n,t+"font",e),c=Xa(n,t+"max-angle",e),f=Xa(n,t+"offset-x",e),d=Xa(n,t+"offset-y",e),y=iy(n,t+"overflow",e),p=sf(n,t+"placement",e),_=Xa(n,t+"repeat",e),x=dS(n,t+"scale",e),b=iy(n,t+"rotate-with-view",e),S=Xa(n,t+"rotation",e),T=sf(n,t+"align",e),A=sf(n,t+"justify",e),N=sf(n,t+"baseline",e),k=iy(n,t+"keep-upright",e),W=q9(n,t+"padding",e),X=pS(n,t+"declutter-mode"),Y=new Pd({declutterMode:X});return function($){if(Y.setText(r($)),i&&Y.setFill(i($)),o&&Y.setBackgroundFill(o($)),s&&Y.setStroke(s($)),a&&Y.setBackgroundStroke(a($)),l&&Y.setFont(l($)),c&&Y.setMaxAngle(c($)),f&&Y.setOffsetX(f($)),d&&Y.setOffsetY(d($)),y&&Y.setOverflow(y($)),p){let V=p($);if(V!=="point"&&V!=="line")throw new Error("Expected point or line for text-placement");Y.setPlacement(V)}if(_&&Y.setRepeat(_($)),x&&Y.setScale(x($)),b&&Y.setRotateWithView(b($)),S&&Y.setRotation(S($)),T){let V=T($);if(V!=="left"&&V!=="center"&&V!=="right"&&V!=="end"&&V!=="start")throw new Error("Expected left, right, center, start, or end for text-align");Y.setTextAlign(V)}if(A){let V=A($);if(V!=="left"&&V!=="right"&&V!=="center")throw new Error("Expected left, right, or center for text-justify");Y.setJustify(V)}if(N){let V=N($);if(V!=="bottom"&&V!=="top"&&V!=="middle"&&V!=="alphabetic"&&V!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Y.setTextBaseline(V)}return W&&Y.setPadding(W($)),k&&Y.setKeepUpright(k($)),Y}}function ile(n,e){return"icon-src"in n?ole(n,e):"shape-points"in n?sle(n,e):"circle-radius"in n?ale(n,e):null}function ole(n,e){let t="icon-",r=t+"src",i=W9(n[r],r),o=hS(n,t+"anchor",e),s=dS(n,t+"scale",e),a=Xa(n,t+"opacity",e),l=hS(n,t+"displacement",e),c=Xa(n,t+"rotation",e),f=iy(n,t+"rotate-with-view",e),d=z9(n,t+"anchor-origin"),y=V9(n,t+"anchor-x-units"),p=V9(n,t+"anchor-y-units"),_=fle(n,t+"color"),x=cle(n,t+"cross-origin"),b=hle(n,t+"offset"),S=z9(n,t+"offset-origin"),T=fS(n,t+"width"),A=fS(n,t+"height"),N=ule(n,t+"size"),k=pS(n,t+"declutter-mode"),W=new Md({src:i,anchorOrigin:d,anchorXUnits:y,anchorYUnits:p,color:_,crossOrigin:x,offset:b,offsetOrigin:S,height:A,width:T,size:N,declutterMode:k});return function(X){return a&&W.setOpacity(a(X)),l&&W.setDisplacement(l(X)),c&&W.setRotation(c(X)),f&&W.setRotateWithView(f(X)),s&&W.setScale(s(X)),o&&W.setAnchor(o(X)),W}}function sle(n,e){let t="shape-",r=t+"points",i=t+"radius",o=AP(n[r],r),s=AP(n[i],i),a=U1(n,t,e),l=G1(n,t,e),c=dS(n,t+"scale",e),f=hS(n,t+"displacement",e),d=Xa(n,t+"rotation",e),y=iy(n,t+"rotate-with-view",e),p=fS(n,t+"radius2"),_=fS(n,t+"angle"),x=pS(n,t+"declutter-mode"),b=new cS({points:o,radius:s,radius2:p,angle:_,declutterMode:x});return function(S){return a&&b.setFill(a(S)),l&&b.setStroke(l(S)),f&&b.setDisplacement(f(S)),d&&b.setRotation(d(S)),y&&b.setRotateWithView(y(S)),c&&b.setScale(c(S)),b}}function ale(n,e){let t="circle-",r=U1(n,t,e),i=G1(n,t,e),o=Xa(n,t+"radius",e),s=dS(n,t+"scale",e),a=hS(n,t+"displacement",e),l=Xa(n,t+"rotation",e),c=iy(n,t+"rotate-with-view",e),f=pS(n,t+"declutter-mode"),d=new Ts({radius:5,declutterMode:f});return function(y){return o&&d.setRadius(o(y)),r&&d.setFill(r(y)),i&&d.setStroke(i(y)),a&&d.setDisplacement(a(y)),l&&d.setRotation(l(y)),c&&d.setRotateWithView(c(y)),s&&d.setScale(s(y)),d}}function Xa(n,e,t){if(!(e in n))return;let r=Oc(n[e],wn,t);return function(i){return AP(r(i),e)}}function sf(n,e,t){if(!(e in n))return null;let r=Oc(n[e],Is,t);return function(i){return W9(r(i),e)}}function lle(n,e,t){let r=sf(n,e+"pattern-src",t),i=G9(n,e+"pattern-offset",t),o=G9(n,e+"pattern-size",t),s=MP(n,e+"color",t);return function(a){return{src:r(a),offset:i&&i(a),size:o&&o(a),color:s&&s(a)}}}function iy(n,e,t){if(!(e in n))return null;let r=Oc(n[e],To,t);return function(i){let o=r(i);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function MP(n,e,t){if(!(e in n))return null;let r=Oc(n[e],os,t);return function(i){return $9(r(i),e)}}function q9(n,e,t){if(!(e in n))return null;let r=Oc(n[e],Ju,t);return function(i){return z1(r(i),e)}}function hS(n,e,t){if(!(e in n))return null;let r=Oc(n[e],Ju,t);return function(i){let o=z1(r(i),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function G9(n,e,t){if(!(e in n))return null;let r=Oc(n[e],Ju,t);return function(i){return Y9(r(i),e)}}function dS(n,e,t){if(!(e in n))return null;let r=Oc(n[e],Ju|wn,t);return function(i){return dle(r(i),e)}}function fS(n,e){let t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function ule(n,e){let t=n[e];if(t!==void 0){if(typeof t=="number")return er(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function cle(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function z9(n,e){let t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function V9(n,e){let t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function hle(n,e){let t=n[e];if(t!==void 0)return z1(t,e)}function pS(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function fle(n,e){let t=n[e];if(t!==void 0)return $9(t,e)}function z1(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);let t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function W9(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function AP(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function $9(n,e){if(typeof n=="string")return n;let t=z1(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function Y9(n,e){let t=z1(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function dle(n,e){return typeof n=="number"?n:Y9(n,e)}var X9={RENDER_ORDER:"renderOrder"},NP=class extends ef{constructor(e){e=e||{};let t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(X9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){let r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new ey(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(X9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?IP:e;let t=ple(e);this.styleFunction_=e===null?void 0:U9(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function ple(n){if(n===void 0)return IP;if(!n)return null;if(typeof n=="function"||n instanceof Xr)return n;if(!Array.isArray(n))return RP([n]);if(n.length===0)return[];let e=n.length,t=n[0];if(t instanceof Xr){let i=new Array(e);for(let o=0;o<e;++o){let s=n[o];if(!(s instanceof Xr))throw new Error("Expected a list of style instances");i[o]=s}return i}if("style"in t){let i=new Array(e);for(let o=0;o<e;++o){let s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");i[o]=s}return H9(i)}return RP(n)}var oy=NP;var PP=class extends jr{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}},Ld=PP;var LP=class extends Lc{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){It()}calculateMatrices2D(e){let t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;ji(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),z0(i,r)}forEachFeatureAtCoordinate(e,t,r,i,o,s,a,l){let c,f=t.viewState;function d(N,k,W,X){return o.call(s,k,N?W:null,X)}let y=f.projection,p=Dm(e.slice(),y),_=[[0,0]];if(y.canWrapX()&&i){let N=y.getExtent(),k=on(N);_.push([-k,0],[k,0])}let x=t.layerStatesArray,b=x.length,S=[],T=[];for(let N=0;N<_.length;N++)for(let k=b-1;k>=0;--k){let W=x[k],X=W.layer;if(X.hasRenderer()&&I1(W,f)&&a.call(l,X)){let Y=X.getRenderer(),$=X.getSource();if(Y&&$){let V=$.getWrapX()?p:e,B=d.bind(null,W.managed);T[0]=V[0]+_[N][0],T[1]=V[1]+_[N][1],c=Y.forEachFeatureAtCoordinate(T,t,r,B,S)}if(c)return c}}if(S.length===0)return;let A=1/S.length;return S.forEach((N,k)=>N.distanceSq+=k*A),S.sort((N,k)=>N.distanceSq-k.distanceSq),S.some(N=>c=N.callback(N.feature,N.layer,N.geometry)),c}hasFeatureAtCoordinate(e,t,r,i,o,s){return this.forEachFeatureAtCoordinate(e,t,r,i,Ss,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){It()}scheduleExpireIconCache(e){Js.canExpireCache()&&e.postRenderFunctions.push(gle)}};function gle(n,e){Js.expire()}var Z9=LP;var kP=class extends Z9{constructor(e){super(e),this.fontChangeListenerKey_=cn(wg,$u.PROPERTYCHANGE,e.redrawText,e),this.element_=Bi?Wb():document.createElement("div");let t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Id+" ol-layers";let r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){let r=this.getMap();if(r.hasListener(e)){let i=new Ld(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){On(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ri.PRECOMPOSE,e);let t=e.layerStatesArray.sort((c,f)=>c.zIndex-f.zIndex);t.some(c=>c.layer instanceof oy&&c.layer.getDeclutter())&&(e.declutter={});let i=e.viewState;this.children_.length=0;let o=[],s=null;for(let c=0,f=t.length;c<f;++c){let d=t[c];e.layerIndex=c;let y=d.layer,p=y.getSourceState();if(!I1(d,i)||p!="ready"&&p!="undefined"){y.unrender();continue}let _=y.render(e,s);_&&(_!==s&&(this.children_.push(_),s=_),o.push(d))}this.declutter(e,o),QG(this.element_,this.children_);let l=this.getMap().getTargetElement();if(Yu(l)){let c=l.getContext("2d");for(let f of this.children_){let d=f.firstElementChild||f,y=f.style.backgroundColor;if(y&&(!Yu(d)||d.width>0)&&(c.fillStyle=y,c.fillRect(0,0,l.width,l.height)),Yu(d)&&d.width>0){let p=f.style.opacity||d.style.opacity;c.globalAlpha=p===""?1:Number(p);let _=d.style.transform;if(_)c.setTransform(...Mb(_));else{let x=parseFloat(d.style.width)/d.width,b=parseFloat(d.style.height)/d.height;c.setTransform(x,0,0,b,0,0)}c.drawImage(d,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(Ri.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){let i=t[r],o=i.layer;o.getDeclutter()&&o.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}},K9=kP;function J9(n){if(n instanceof ef){n.setMapInternal(null);return}n instanceof yg&&n.getLayers().forEach(J9)}function Q9(n,e){if(n instanceof ef){n.setMapInternal(e);return}if(n instanceof yg){let t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)Q9(t[r],e)}}var OP=class extends Io{constructor(e){super(),e=e||{},this.on,this.once,this.un;let t=mle(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:vG,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Yr(),this.pixelToCoordinateTransform_=Yr(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Bi||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Bi||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Bi?new vi:S1()),this.interactions=t.interactions||(Bi?new vi:x9({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new EG(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Cs.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Cs.VIEW,this.handleViewChanged_),this.addChangeListener(Cs.SIZE,this.handleSizeChanged_),this.addChangeListener(Cs.TARGET,this.handleTargetChanged_),this.setProperties(t.values);let r=this;e.view&&!(e.view instanceof Il)&&e.view.then(function(i){r.setView(new Il(i))}),this.controls.addEventListener(_i.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(_i.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(_i.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(_i.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(_i.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(_i.REMOVE,i=>{let o=i.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Q9(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){let t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;let i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};let o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:Ss,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){let r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){let e=[];function t(r){r.forEach(function(i){i instanceof yg?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;let r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};let i=t.layerFilter!==void 0?t.layerFilter:Ss,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){let r=this.viewport_.getBoundingClientRect(),i=this.getSize(),o=r.width/i[0],s=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/o,(a.clientY-r.top)/s]}getTarget(){return this.get(Cs.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Xl(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){let t=this.frameState_;return t?Ar(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){let t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Cs.LAYERGROUP)}setLayers(e){let t=this.getLayerGroup();if(e instanceof vi){t.setLayers(e);return}let r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){let i=e[t];if(!i.visible)continue;let o=i.layer.getRenderer();if(o&&!o.ready)return!0;let s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){let t=Or(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){let t=this.frameState_;return t?Ar(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Cs.SIZE)}getView(){return this.get(Cs.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return bG(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;let r=new pu(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;let t=e.originalEvent,r=t.type;if(r===a1.POINTERDOWN||r===gt.WHEEL||r===gt.KEYDOWN){let i=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():i,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===i?i.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){let i=this.getInteractions().getArray().slice();for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){let e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,o=i;if(e){let s=e.viewHints;if(s[$r.ANIMATING]||s[$r.INTERACTING]){let a=Date.now()-e.time>8;i=a?0:8,o=a?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ri.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ri.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new _d(kc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new _d(kc.LOADSTART,this,e))));let r=this.postRenderFunctions_;if(e)for(let i=0,o=r.length;i<o;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)On(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(gt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!Yu(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);let r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}let e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(Yu(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new K9(this)),!Yu(t)){this.mapBrowserEventHandler_=new xG(this,this.moveTolerance_);for(let i in Pn)this.mapBrowserEventHandler_.addEventListener(Pn[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(gt.WHEEL,this.boundHandleBrowserEvent_,Rb?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{let i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[cn(r,gt.KEYDOWN,this.handleBrowserEvent,this),cn(r,gt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){let i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(On(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(On(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=cn(e,$u.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=cn(e,gt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(On),this.layerGroupPropertyListenerKeys_=null);let e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Zu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[cn(e,$u.PROPERTYCHANGE,this.render,this),cn(e,gt.CHANGE,this.render,this),cn(e,"addlayer",this.handleLayerAdd_,this),cn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;let e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){let i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){J9(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){let t=this.getSize(),r=this.getView(),i=this.frameState_,o=null;if(t!==void 0&&lP(t)&&r&&r.isDef()){let s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Zf(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:ct(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Zf(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!ms(this.previousExtent_)&&!xl(o.extent,this.previousExtent_))&&(this.dispatchEvent(new _d(kc.MOVESTART,this,i)),this.previousExtent_=vm(this.previousExtent_)),this.previousExtent_&&!o.viewHints[$r.ANIMATING]&&!o.viewHints[$r.INTERACTING]&&!xl(o.extent,this.previousExtent_)&&(this.dispatchEvent(new _d(kc.MOVEEND,this,o)),Fw(o.extent,this.previousExtent_))),this.dispatchEvent(new _d(kc.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(kc.LOADSTART)||this.hasListener(kc.LOADEND)||this.hasListener(Ri.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){let t=this.getLayerGroup();t&&this.handleLayerRemove_(new Zu("removelayer",t)),this.set(Cs.LAYERGROUP,e)}setSize(e){this.set(Cs.SIZE,e)}setTarget(e){this.set(Cs.TARGET,e)}setView(e){if(!e||e instanceof Il){this.set(Cs.VIEW,e);return}this.set(Cs.VIEW,new Il);let t=this;e.then(function(r){t.setView(new Il(r))})}updateSize(){let e=this.getTargetElement(),t;if(e){let i,o;if(Yu(e))i=e.width,o=e.height;else{let s=getComputedStyle(e);i=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth)}!isNaN(i)&&!isNaN(o)&&(t=[Math.max(0,i),Math.max(0,o)],!lP(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&N8("No map visible because the map container's width or height are 0."))}let r=this.getSize();t&&(!r||!is(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){let t=this.getView();t&&t.setViewportSize(e)}};function mle(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new yg({layers:n.layers});t[Cs.LAYERGROUP]=r,t[Cs.TARGET]=n.target,t[Cs.VIEW]=n.view instanceof Il?n.view:new Il;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new vi(n.controls.slice()):(an(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new vi(n.interactions.slice()):(an(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new vi(n.overlays.slice()):(an(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new vi,{controls:i,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}var ez=OP;var FP=class extends du{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(gt.CHANGE)}release(){this.setState(Je.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Je.EMPTY){if(this.state!==Je.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){It()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;let i=t-r+1e3/60;return i>=this.transition_?1:lN(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}},jc=FP;function af(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function V1(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}var yle=new Error("disposed"),sy=null;function tz(n){sy||(sy=Qn(n.width,n.height,void 0,{willReadFrequently:!0}));let e=sy.canvas,t=n.width;e.width!==t&&(e.width=t);let r=n.height;return e.height!==r&&(e.height=r),sy.clearRect(0,0,t,r),sy.drawImage(n,0,0),sy.getImageData(0,0,t,r).data}var _le=[256,256],BP=class extends jc{constructor(e){let t=Je.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;let e=af(this.data_);return e?[e.width,e.height]:_le}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Je.IDLE&&this.state!==Je.ERROR)return;this.state=Je.LOADING,this.changed();let e=this;this.loader_().then(function(t){e.data_=t,e.state=Je.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Je.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(yle),this.controller_=null),super.disposeInternal()}},lf=BP;var jP=class extends jc{constructor(e,t,r,i,o,s){super(e,t,s),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Bi?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Je.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Je.ERROR,this.unlistenImage_(),this.image_=vle(),this.changed()}handleImageLoad_(){if(Bi)this.state=Je.LOADED;else{let e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Je.LOADED:this.state=Je.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Je.ERROR&&(this.state=Je.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Je.IDLE&&(this.state=Je.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=R9(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};function vle(){let n=Qn(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var kd=jP;var gS=class{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function bg(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new gS(n,e,t,r)}var ay=gS;var UP,Sg=[];function nz(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function GP(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function xle(){if(UP===void 0){let n=Qn(6,6,Sg);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",nz(n,4,5,4,0),nz(n,4,5,0,5);let e=n.getImageData(0,0,3,3).data;UP=GP(e,0)||GP(e,4)||GP(e,8),Jh(n),Sg.push(n.canvas)}return UP}function ly(n,e,t,r){let i=Rm(t,e,n),o=BD(e,r,t),s=e.getMetersPerUnit();s!==void 0&&(o*=s);let a=n.getMetersPerUnit();a!==void 0&&(o/=a);let l=n.getExtent();if(!l||Gs(l,i)){let c=BD(n,o,i)/o;isFinite(c)&&c>0&&(o/=c)}return o}function mS(n,e,t,r){let i=zo(t),o=ly(n,e,i,r);return(!isFinite(o)||o<=0)&&bm(t,function(s){return o=ly(n,e,s,r),isFinite(o)&&o>0}),o}function yS(n,e,t,r,i,o,s,a,l,c,f,d,y,p){let _=Qn(Math.round(t*n),Math.round(t*e),Sg);if(d||(_.imageSmoothingEnabled=!1),l.length===0)return _.canvas;_.scale(t,t);function x(k){return Math.round(k*t)/t}_.globalCompositeOperation="lighter";let b=ki();l.forEach(function(k,W,X){wm(b,k.extent)});let S,T=t/r,A=(d?1:1+Math.pow(2,-24))/T;if(!y||l.length!==1||c!==0){if(S=Qn(Math.round(on(b)*T),Math.round(or(b)*T),Sg),d||(S.imageSmoothingEnabled=!1),i&&p){let k=(i[0]-b[0])*T,W=-(i[3]-b[3])*T,X=on(i)*T,Y=or(i)*T;S.rect(k,W,X,Y),S.clip()}l.forEach(function(k,W,X){if(k.image.width>0&&k.image.height>0){if(k.clipExtent){S.save();let v=(k.clipExtent[0]-b[0])*T,I=-(k.clipExtent[3]-b[3])*T,M=on(k.clipExtent)*T,j=or(k.clipExtent)*T;S.rect(d?v:Math.round(v),d?I:Math.round(I),d?M:Math.round(v+M)-Math.round(v),d?j:Math.round(I+j)-Math.round(I)),S.clip()}let Y=(k.extent[0]-b[0])*T,$=-(k.extent[3]-b[3])*T,V=on(k.extent)*T,B=or(k.extent)*T;S.drawImage(k.image,c,c,k.image.width-2*c,k.image.height-2*c,d?Y:Math.round(Y),d?$:Math.round($),d?V:Math.round(Y+V)-Math.round(Y),d?B:Math.round($+B)-Math.round($)),k.clipExtent&&S.restore()}})}let N=Vs(s);return a.getTriangles().forEach(function(k,W,X){let Y=k.source,$=k.target,V=Y[0][0],B=Y[0][1],v=Y[1][0],I=Y[1][1],M=Y[2][0],j=Y[2][1],Q=x(($[0][0]-N[0])/o),Z=x(-($[0][1]-N[1])/o),q=x(($[1][0]-N[0])/o),K=x(-($[1][1]-N[1])/o),oe=x(($[2][0]-N[0])/o),_e=x(-($[2][1]-N[1])/o),F=V,ee=B;V=0,B=0,v-=F,I-=ee,M-=F,j-=ee;let ce=[[v,I,0,0,q-Q],[M,j,0,0,oe-Q],[0,0,v,I,K-Z],[0,0,M,j,_e-Z]],pe=x8(ce);if(!pe)return;if(_.save(),_.beginPath(),xle()||!d){_.moveTo(q,K);let xe=4,Se=Q-q,ve=Z-K;for(let re=0;re<xe;re++)_.lineTo(q+x((re+1)*Se/xe),K+x(re*ve/(xe-1))),re!=xe-1&&_.lineTo(q+x((re+1)*Se/xe),K+x((re+1)*ve/(xe-1)));_.lineTo(oe,_e)}else _.moveTo(q,K),_.lineTo(Q,Z),_.lineTo(oe,_e);_.clip(),_.transform(pe[0],pe[2],pe[1],pe[3],Q,Z),_.translate(b[0]-F,b[3]-ee);let J;if(S)J=S.canvas,_.scale(A,-A);else{let xe=l[0],Se=xe.extent;J=xe.image,_.scale(on(Se)/J.width,-or(Se)/J.height)}_.drawImage(J,0,0),_.restore()}),S&&(Jh(S),Sg.push(S.canvas)),f&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,a.getTriangles().forEach(function(k,W,X){let Y=k.target,$=(Y[0][0]-N[0])/o,V=-(Y[0][1]-N[1])/o,B=(Y[1][0]-N[0])/o,v=-(Y[1][1]-N[1])/o,I=(Y[2][0]-N[0])/o,M=-(Y[2][1]-N[1])/o;_.beginPath(),_.moveTo(B,v),_.lineTo($,V),_.lineTo(I,M),_.closePath(),_.stroke()}),_.restore()),_.canvas}var wle=10,rz=.25,zP=class{constructor(e,t,r,i,o,s,a){this.sourceProj_=e,this.targetProj_=t;let l={},c=a?qw(A=>Ar(a,Rm(A,this.targetProj_,this.sourceProj_))):Ih(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){let N=A[0]+"/"+A[1];return l[N]||(l[N]=c(A)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&on(i)>=on(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?on(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?on(this.targetProj_.getExtent()):null;let f=Vs(r),d=q_(r),y=H_(r),p=V_(r),_=this.transformInv_(f),x=this.transformInv_(d),b=this.transformInv_(y),S=this.transformInv_(p),T=wle+(s?Math.max(0,Math.ceil(Math.log2(Xf(r)/(s*s*256*256)))):0);if(this.addQuad_(f,d,y,p,_,x,b,S,T),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(N,k,W){A=Math.min(A,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-A>this.sourceWorldWidth_/2){let k=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];k[0][0]-A>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-A>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-A>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);let W=Math.min(k[0][0],k[1][0],k[2][0]);Math.max(k[0][0],k[1][0],k[2][0])-W<this.sourceWorldWidth_/2&&(N.source=k)}})}l={}}addTriangle_(e,t,r,i,o,s){this.triangles_.push({source:[i,o,s],target:[e,t,r]})}addQuad_(e,t,r,i,o,s,a,l,c){let f=wi([o,s,a,l]),d=this.sourceWorldWidth_?on(f)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1,_=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let b=wi([e,t,r,i]);_=on(b)/this.targetWorldWidth_>rz||_}!p&&this.sourceProj_.isGlobal()&&d&&(_=d>rz||_)}if(!_&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Jn(f,this.maxSourceExtent_))return;let x=0;if(!_&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)_=!0;else if(x=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),x!=1&&x!=2&&x!=4&&x!=8)return}if(c>0){if(!_){let b=[(e[0]+r[0])/2,(e[1]+r[1])/2],S=this.transformInv_(b),T;p?T=(vl(o[0],y)+vl(a[0],y))/2-vl(S[0],y):T=(o[0]+a[0])/2-S[0];let A=(o[1]+a[1])/2-S[1];_=T*T+A*A>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){let b=[(t[0]+r[0])/2,(t[1]+r[1])/2],S=this.transformInv_(b),T=[(i[0]+e[0])/2,(i[1]+e[1])/2],A=this.transformInv_(T);this.addQuad_(e,t,b,T,o,s,S,A,c-1),this.addQuad_(T,b,r,i,A,S,a,l,c-1)}else{let b=[(e[0]+t[0])/2,(e[1]+t[1])/2],S=this.transformInv_(b),T=[(r[0]+i[0])/2,(r[1]+i[1])/2],A=this.transformInv_(T);this.addQuad_(e,b,T,i,o,S,A,l,c-1),this.addQuad_(b,t,r,T,S,s,a,A,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(x&11)==0&&this.addTriangle_(e,r,i,o,a,l),(x&14)==0&&this.addTriangle_(e,r,t,o,a,s),x&&((x&13)==0&&this.addTriangle_(t,i,e,s,l,o),(x&7)==0&&this.addTriangle_(t,i,r,s,l,a))}calculateSourceExtent(){let e=ki();return this.triangles_.forEach(function(t,r,i){let o=t.source;Em(e,o[0]),Em(e,o[1]),Em(e,o[2])}),e}getTriangles(){return this.triangles_}},uy=zP;var VP=class extends jc{constructor(e,t,r,i,o,s,a,l,c,f,d,y){super(o,Je.IDLE,y),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;let p=i.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent(),x=this.sourceTileGrid_.getExtent(),b=_?kr(p,_):p;if(Xf(b)===0){this.state=Je.EMPTY;return}let S=e.getExtent();S&&(x?x=kr(x,S):x=S);let T=i.getResolution(this.wrappedTileCoord_[0]),A=mS(e,r,b,T);if(!isFinite(A)||A<=0){this.state=Je.EMPTY;return}let N=f!==void 0?f:.5;if(this.triangulation_=new uy(e,r,b,x,A*N,T),this.triangulation_.getTriangles().length===0){this.state=Je.EMPTY;return}this.sourceZ_=t.getZForResolution(A);let k=this.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(k[1]=Xn(k[1],x[1],x[3]),k[3]=Xn(k[3],x[1],x[3])):k=kr(k,x)),!Xf(k))this.state=Je.EMPTY;else{let W=0,X=0;e.canWrapX()&&(W=on(S),X=Math.floor((k[0]-S[0])/W)),Sm(k.slice(),e,!0).forEach($=>{let V=t.getTileRangeForExtentAndZ($,this.sourceZ_);for(let B=V.minX;B<=V.maxX;B++)for(let v=V.minY;v<=V.maxY;v++){let I=c(this.sourceZ_,B,v,a);if(I){let M=X*W;this.sourceTiles_.push({tile:I,offset:M})}}++X}),this.sourceTiles_.length===0&&(this.state=Je.EMPTY)}}getImage(){return this.canvas_}reproject_(){let e=[];if(this.sourceTiles_.forEach(t=>{let r=t.tile;if(r&&r.getState()==Je.LOADED){let i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;let o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:i,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Je.ERROR;else{let t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=yS(i,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Je.LOADED}this.changed()}load(){if(this.state==Je.IDLE){this.state=Je.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let r=t.getState();if(r==Je.IDLE||r==Je.LOADING){e++;let i=cn(t,gt.CHANGE,o=>{let s=t.getState();(s==Je.LOADED||s==Je.ERROR||s==Je.EMPTY)&&(On(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Je.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(On),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Jh(this.canvas_.getContext("2d")),Sg.push(this.canvas_),this.canvas_=null),super.release()}},cy=VP;var HP=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){let e=this.pop();e instanceof Lc&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){let r=this.entries_[e];return an(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){let t=this.entries_[e];return an(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){let e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){let e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){let e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){an(!(e in this.entries_),"Tried to set a value for a key that is used already");let r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}},H1=HP;function uf(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function oz(n,e,t){return n+"/"+e+"/"+t}function Cg(n){return oz(n[0],n[1],n[2])}function Od(n,e,t,r,i){return`${ct(n)},${e},${oz(t,r,i)}`}function _S(n){return Ele(n[0],n[1],n[2])}function Ele(n,e,t){return(e<<n)+t}function sz(n,e){let t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;let o=e.getFullTileRange(t);return o?o.containsXY(r,i):!0}var qP=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy($0(),{get:(e,t)=>{if(typeof $0()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){let t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){let o=t[r];if(typeof o=="function"){o(e);continue}let s=t[++r];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},hy=qP;var ble=5,WP=class extends Tb{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=ble}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return It()}getData(e){return null}prepareFrame(e){return It()}renderFrame(e,t){return It()}forEachFeatureAtCoordinate(e,t,r,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===Et.LOADED||t.getState()===Et.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Et.LOADED&&t!=Et.ERROR&&e.addEventListener(gt.CHANGE,this.boundHandleImageChange_),t==Et.IDLE&&(e.load(),t=e.getState()),t==Et.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},vS=WP;var YP=[],fy=null;function Sle(){fy=Qn(1,1,void 0,{willReadFrequently:!0})}var $P=class extends vS{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Yr(),this.pixelTransform=Yr(),this.inversePixelTransform=Yr(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){fy||Sle(),fy.clearRect(0,0,1,1);let i;try{fy.drawImage(e,t,r,1,1,0,0,1,1),i=fy.getImageData(0,0,1,1).data}catch{return fy=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){let i=this.getLayer().getClassName(),o,s;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&is(Ks(e.style.backgroundColor),Ks(r)))){let a=e.firstElementChild;Yu(a)&&(s=a.getContext("2d"))}if(s&&RG(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=Bi?Wb():document.createElement("div"),o.className=i;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Qn();let l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){let i=Vs(r),o=q_(r),s=H_(r),a=V_(r);Ar(t.coordinateToPixelTransform,i),Ar(t.coordinateToPixelTransform,o),Ar(t.coordinateToPixelTransform,s),Ar(t.coordinateToPixelTransform,a);let l=this.inversePixelTransform;Ar(l,i),Ar(l,o),Ar(l,s),Ar(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){let r=e.extent,i=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(on(r)/i*s),l=Math.round(or(r)/i*s);ji(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-l/2),z0(this.inversePixelTransform,this.pixelTransform);let c=AG(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){let f=this.context.canvas;f.width!=a||f.height!=l?(f.width=a,f.height=l):this.context.clearRect(0,0,a,l),c!==f.style.transform&&(f.style.transform=c)}}dispatchRenderEvent_(e,t,r){let i=this.getLayer();if(i.hasListener(e)){let o=new Ld(e,this.inversePixelTransform,r,t);i.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ri.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ri.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new hy),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ri.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ri.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,o,s,a){let l=o/2,c=s/2,f=i/t,d=-f,y=-e[0]+a,p=-e[1];return ji(this.tempTransform,l,c,f,d,-r,y,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}},dy=$P;function XP(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;let r=n[t],i=r.has(e);return i||r.add(e),!i}function Cle(n,e,t){let r=n[t];return r?r.delete(e):!1}function az(n,e){let t=n.layerStatesArray[n.layerIndex];t.extent&&(e=kr(e,so(t.extent,n.viewState.projection)));let r=t.layer.getRenderSource();if(!r.getWrapX()){let i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=kr(e,i))}return e}var ZP=class extends dy{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=ki(),this.tempTileRange_=new ay(0,0,0,0),this.tempTileCoord_=uf(0,0,0);let r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new H1(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new H1(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){let o=this.tileCache_,a=this.getLayer().getSource(),l=Od(a,a.getKey(),e,t,r),c;if(o.containsKey(l))c=o.get(l);else{let f=i.viewState.projection,d=a.getProjection();if(c=a.getTile(e,t,r,i.pixelRatio,f,!d||qr(d,f)?void 0:this.getSourceTileCache()),!c)return null;o.set(l,c)}return c}getTile(e,t,r,i){let o=this.getOrCreateTile(e,t,r,i);return o||null}getData(e){let t=this.frameState;if(!t)return null;let r=this.getLayer(),i=Ar(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Gs(o,i))return null;let s=t.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(s.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(s.resolution);f>=l.getMinZoom();--f){let d=l.getTileCoordForCoordAndZ(i,f),y=this.getTile(f,d[1],d[2],t);if(!y||y.getState()!==Je.LOADED)continue;let p=l.getOrigin(f),_=er(l.getTileSize(f)),x=l.getResolution(f),b;if(y instanceof kd||y instanceof cy)b=y.getImage();else if(y instanceof lf){if(b=af(y.getData()),!b)continue}else continue;let S=Math.floor(c*((i[0]-p[0])/x-d[1]*_[0])),T=Math.floor(c*((p[1]-i[1])/x-d[2]*_[1])),A=Math.round(c*a.getGutterForProjection(s.projection));return this.getImageData(b,S+A,T+A)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;let t=this.getLayer().getSource();if(!t)return!1;let r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,o){let s=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),f=ct(l);f in e.wantedTiles||(e.wantedTiles[f]={});let d=e.wantedTiles[f],y=a.getMapInternal(),p=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),_=s.rotation,x=_?jw(s.center,s.resolution,_,e.size):void 0;for(let b=r;b>=p;--b){let S=c.getTileRangeForExtentAndZ(t,b,this.tempTileRange_),T=c.getResolution(b);for(let A=S.minX;A<=S.maxX;++A)for(let N=S.minY;N<=S.maxY;++N){if(_&&!c.tileCoordIntersectsViewport([b,A,N],x))continue;let k=this.getTile(b,A,N,e);if(!k||!XP(i,k,b))continue;let X=k.getKey();if(d[X]=!0,k.getState()===Je.IDLE&&!e.tileQueue.isKeyQueued(X)){let Y=uf(b,A,N,this.tempTileCoord_);e.tileQueue.enqueue([k,f,c.getTileCoordCenter(Y),T])}}}}findStaleTile_(e,t){let r=this.tileCache_,i=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){let c=Od(this.getLayer().getSource(),a[l],i,o,s);if(r.containsKey(c)){let f=r.peek(c);if(f.getState()===Je.LOADED)return f.endTransition(ct(this)),XP(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){let o=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!o)return!1;let s=!0,a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let f=o.minX;f<=o.maxX;++f)for(let d=o.minY;d<=o.maxY;++d){let y=Od(l,c,r,f,d),p=!1;if(a.containsKey(y)){let _=a.peek(y);_.getState()===Je.LOADED&&(XP(i,_,r),p=!0)}p||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;let r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,s=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),f=c.getSource(),d=f.getTileGridForProjection(o),y=d.getZForResolution(s,f.zDirection),p=d.getResolution(y),_=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let x=e.extent,b=f.getTilePixelRatio(l);this.prepareContainer(e,t);let S=this.context.canvas.width,T=this.context.canvas.height,A=r.extent&&so(r.extent,o);A&&(x=kr(x,so(r.extent,o)));let N=p*S/2/b,k=p*T/2/b,W=[a[0]-N,a[1]-k,a[0]+N,a[1]+k],X={};this.renderedTiles.length=0;let Y=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){let q=d.getZForResolution(i.nextResolution,f.zDirection),K=az(e,e.nextExtent);this.enqueueTiles(e,K,q,X,Y)}let $=az(e,x);if(this.enqueueTiles(e,$,y,X,0),Y>0&&setTimeout(()=>{this.enqueueTiles(e,$,y-1,X,Y-1)},0),!(y in X))return this.container;let V=ct(this),B=e.time;for(let q of X[y]){let K=q.getState();if(K===Je.EMPTY)continue;let oe=q.tileCoord;if(K===Je.LOADED&&q.getAlpha(V,B)===1){q.endTransition(V);continue}if(K!==Je.ERROR&&(this.renderComplete=!1),this.findStaleTile_(oe,X)){Cle(X,q,y),e.animate=!0;continue}if(this.findAltTiles_(d,oe,y+1,X))continue;let ee=d.getMinZoom();for(let ce=y-1;ce>=ee&&!this.findAltTiles_(d,oe,ce,X);--ce);}let v=p/s*l/b,I=this.getRenderContext(e);ji(this.tempTransform,S/2,T/2,v,v,0,-S/2,-T/2),r.extent&&this.clipUnrotated(I,e,A),f.getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,e);let M=Object.keys(X).map(Number);M.sort(Ys);let j,Q=[],Z=[];for(let q=M.length-1;q>=0;--q){let K=M[q],oe=f.getTilePixelSize(K,l,o),F=d.getResolution(K)/p,ee=oe[0]*F*v,ce=oe[1]*F*v,pe=d.getTileCoordForCoordAndZ(Vs(W),K),J=d.getTileCoordExtent(pe),xe=Ar(this.tempTransform,[b*(J[0]-W[0])/p,b*(W[3]-J[3])/p]),Se=b*f.getGutterForProjection(o);for(let ve of X[K]){if(ve.getState()!==Je.LOADED)continue;let re=ve.tileCoord,He=pe[1]-re[1],G=Math.round(xe[0]-(He-1)*ee),be=pe[2]-re[2],Ie=Math.round(xe[1]-(be-1)*ce),U=Math.round(xe[0]-He*ee),ae=Math.round(xe[1]-be*ce),he=G-U,Fe=Ie-ae,Ce=M.length===1,we=!1;j=[U,ae,U+he,ae,U+he,ae+Fe,U,ae+Fe];for(let Ue=0,Le=Q.length;Ue<Le;++Ue)if(!Ce&&K<Z[Ue]){let Be=Q[Ue];Jn([U,ae,U+he,ae+Fe],[Be[0],Be[3],Be[4],Be[7]])&&(we||(I.save(),we=!0),I.beginPath(),I.moveTo(j[0],j[1]),I.lineTo(j[2],j[3]),I.lineTo(j[4],j[5]),I.lineTo(j[6],j[7]),I.moveTo(Be[6],Be[7]),I.lineTo(Be[4],Be[5]),I.lineTo(Be[2],Be[3]),I.lineTo(Be[0],Be[1]),I.clip())}Q.push(j),Z.push(K),this.drawTile(ve,e,U,ae,he,Fe,Se,Ce),we&&I.restore(),this.renderedTiles.unshift(ve),this.updateUsedTiles(e.usedTiles,f,ve)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!xl(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&I.restore(),I.imageSmoothingEnabled=!0,this.renderComplete){let q=(K,oe)=>{let _e=ct(f),F=oe.wantedTiles[_e],ee=F?Object.keys(F).length:0;this.updateCacheSize(ee),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(q)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,o,s,a,l){let c;if(e instanceof lf){if(c=af(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;let f=this.getRenderContext(t),d=ct(this),y=t.layerStatesArray[t.layerIndex],p=y.opacity*(l?e.getAlpha(d,t.time):1),_=p!==f.globalAlpha;_&&(f.save(),f.globalAlpha=p),f.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,o,s),_&&f.restore(),p!==y.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){let e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){let i=ct(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}},xS=ZP;var Uc={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var KP=class extends ef{constructor(e){e=e||{};let t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Uc.PRELOAD)}setPreload(e){this.set(Uc.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Uc.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Uc.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},wS=KP;var JP=class extends wS{constructor(e){super(e)}createRenderer(){return new xS(this,{cacheSize:this.getCacheSize()})}},Ig=JP;var QP=class{drawCustom(e,t,r,i,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},ES=QP;var q1={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},W1=[q1.FILL],Gc=[q1.STROKE],cf=[q1.BEGIN_PATH],eL=[q1.CLOSE_PATH],Yt=q1;var tL=class extends ES{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){let r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,o=this.coordinates,s=o.length;for(let a=0,l=e.length;a<l;a+=t)i[0]=e[a],i[1]=e[a+1],Gs(r,i)&&(o[s++]=i[0],o[s++]=i[1]);return s}appendFlatLineCoordinates(e,t,r,i,o,s){let a=this.coordinates,l=a.length,c=this.getBufferedMaxExtent();s&&(t+=i);let f=e[t],d=e[t+1],y=this.tmpCoordinate_,p=!0,_,x,b;for(_=t+i;_<r;_+=i)y[0]=e[_],y[1]=e[_+1],b=E8(c,y),b!==x?(p&&(a[l++]=f,a[l++]=d,p=!1),a[l++]=y[0],a[l++]=y[1]):b===w8.INTERSECTING?(a[l++]=y[0],a[l++]=y[1],p=!1):p=!0,f=y[0],d=y[1],x=b;return(o&&p||_===t+i)&&(a[l++]=f,a[l++]=d),l}drawCustomCoordinates_(e,t,r,i,o){for(let s=0,a=r.length;s<a;++s){let l=r[s],c=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);o.push(c),t=l}return t}drawCustom(e,t,r,i,o){this.beginGeometry(e,t,o);let s=e.getType(),a=e.getStride(),l=this.coordinates.length,c,f,d,y,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),y=[];let _=e.getEndss();p=0;for(let x=0,b=_.length;x<b;++x){let S=[];p=this.drawCustomCoordinates_(c,p,_[x],a,S),y.push(S)}this.instructions.push([Yt.CUSTOM,l,y,e,r,g1,o]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,y,e,i||r,g1,o]);break;case"Polygon":case"MultiLineString":d=[],c=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([Yt.CUSTOM,l,d,e,r,bd,o]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,d,e,i||r,bd,o]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Yt.CUSTOM,l,f,e,r,mu,o]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,f,e,i||r,mu,o]);break;case"MultiPoint":c=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(c,a),f>l&&(this.instructions.push([Yt.CUSTOM,l,f,e,r,mu,o]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,f,e,i||r,mu,o]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),f=this.coordinates.length,this.instructions.push([Yt.CUSTOM,l,f,e,r,void 0,o]),this.hitDetectionInstructions.push([Yt.CUSTOM,l,f,e,i||r,void 0,o]);break;default:}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Yt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Yt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let t,r=e.length,i,o,s=-1;for(t=0;t<r;++t)i=e[t],o=i[0],o==Yt.END_GEOMETRY?s=t:o==Yt.BEGIN_GEOMETRY&&(i[2]=t,pG(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){let r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Wa(r||$o)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){let r=e.getColor();t.strokeStyle=Wa(r||nf);let i=e.getLineCap();t.lineCap=i!==void 0?i:Fc;let o=e.getLineDash();t.lineDash=o?o.slice():$a;let s=e.getLineDashOffset();t.lineDashOffset=s||Ya;let a=e.getLineJoin();t.lineJoin=a!==void 0?a:Bc;let l=e.getWidth();t.lineWidth=l!==void 0?l:of;let c=e.getMiterLimit();t.miterLimit=c!==void 0?c:tf,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){let r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){let t=e.fillStyle,r=[Yt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Yt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){let r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){let r=e.strokeStyle,i=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||o!=e.currentLineDash&&!is(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let t=[Yt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Fw(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;bo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},zc=tL;var nL=class extends zc{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Gs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);let i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,o);this.instructions.push([Yt.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);let i=e.getFlatCoordinates(),o=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||Gs(this.maxExtent,i.slice(l,l+2)))&&o.push(i[l],i[l+1]);let s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([Yt.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){let r=e.getAnchor(),i=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},lz=nL;var rL=class extends zc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){let o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),a=[Yt.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$a,Ya],cf);let a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Gc),this.endGeometry(t)}drawMultiLineString(e,t,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$a,Ya],cf);let a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride(),f=0;for(let d=0,y=a.length;d<y;++d)f=this.drawFlatCoordinates_(l,f,a[d],c);this.hitDetectionInstructions.push(Gc),this.endGeometry(t)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Gc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Gc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(cf)}},uz=rL;var iL=class extends zc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){let o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=r.length;this.instructions.push(cf),this.hitDetectionInstructions.push(cf);for(let c=0;c<l;++c){let f=r[c],d=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,f,i,!0,!a),p=[Yt.MOVE_TO_LINE_TO,d,y];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(eL),this.hitDetectionInstructions.push(eL)),t=f}return s&&(this.instructions.push(W1),this.hitDetectionInstructions.push(W1)),a&&(this.instructions.push(Gc),this.hitDetectionInstructions.push(Gc)),t}drawCircle(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,$o]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$a,Ya]);let a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);let f=[Yt.CIRCLE,c];this.instructions.push(cf,f),this.hitDetectionInstructions.push(cf,f),i.fillStyle!==void 0&&(this.instructions.push(W1),this.hitDetectionInstructions.push(W1)),i.strokeStyle!==void 0&&(this.instructions.push(Gc),this.hitDetectionInstructions.push(Gc)),this.endGeometry(t)}drawPolygon(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,$o]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$a,Ya]);let a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_FILL_STYLE,$o]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Yt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,$a,Ya]);let a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),f=0;for(let d=0,y=a.length;d<y;++d)f=this.drawFlatCoordinatess_(l,f,a[d],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=Sd(t[r],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}},oL=iL;function cz(n,e,t,r,i){let o=[],s=t,a=0,l=e.slice(t,2);for(;a<n&&s+i<r;){let[c,f]=l.slice(-2),d=e[s+i],y=e[s+i+1],p=Math.sqrt((d-c)*(d-c)+(y-f)*(y-f));if(a+=p,a>=n){let _=(n-a+p)/p,x=gs(c,d,_),b=gs(f,y,_);l.push(x,b),o.push(l),l=[x,b],a==n&&(s+=i),a=0}else if(a<n)l.push(e[s+i],e[s+i+1]),s+=i;else{let _=p-a,x=gs(c,d,_/p),b=gs(f,y,_/p);l.push(x,b),o.push(l),l=[x,b],a=0,s+=i}}return a>0&&o.push(l),o}function hz(n,e,t,r,i){let o=t,s=t,a=0,l=0,c=t,f,d,y,p,_,x,b,S,T,A;for(d=t;d<r;d+=i){let N=e[d],k=e[d+1];_!==void 0&&(T=N-_,A=k-x,p=Math.sqrt(T*T+A*A),b!==void 0&&(l+=y,f=Math.acos((b*T+S*A)/(y*p)),f>n&&(l>a&&(a=l,o=c,s=d),l=0,c=d-i)),y=p,b=T,S=A),_=N,x=k}return l+=p,l>a?[c,d]:[o,s]}var $1={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},sL=class extends zc{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$o]={fillStyle:$o},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){let i=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!o)return;let a=this.coordinates,l=a.length,c=e.getType(),f=null,d=e.getStride();if(s.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Jn(this.maxExtent,e.getExtent()))return;let y;if(f=e.getFlatCoordinates(),c=="LineString")y=[f.length];else if(c=="MultiLineString")y=e.getEnds();else if(c=="Polygon")y=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){let b=e.getEndss();y=[];for(let S=0,T=b.length;S<T;++S)y.push(b[S][0])}this.beginGeometry(e,t,r);let p=s.repeat,_=p?void 0:s.textAlign,x=0;for(let b=0,S=y.length;b<S;++b){let T;p?T=cz(p*this.resolution,f,x,y[b],d):T=[f.slice(x,y[b])];for(let A=0,N=T.length;A<N;++A){let k=T[A],W=0,X=k.length;if(_==null){let $=hz(s.maxAngle,k,0,k.length,2);W=$[0],X=$[1]}for(let $=W;$<X;$+=d)a.push(k[$],k[$+1]);let Y=a.length;x=y[b],this.drawChars_(l,Y),l=Y}}this.endGeometry(t)}else{let y=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),s.overflow||y.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":let N=e.getFlatInteriorPoints();f=[];for(let k=0,W=N.length;k<W;k+=3)s.overflow||y.push(N[k+2]/this.resolution),f.push(N[k],N[k+1]);if(f.length===0)return;d=2;break;default:}let p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(y&&(p-l)/2!==f.length/d){let N=l/2;y=y.filter((k,W)=>{let X=a[(N+W)*2]===f[W*d]&&a[(N+W)*2+1]===f[W*d+1];return X||--N,X})}this.saveTextStates_();let _=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,x=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,r);let b=s.padding;if(b!=rf&&(s.scale[0]<0||s.scale[1]<0)){let N=s.padding[0],k=s.padding[1],W=s.padding[2],X=s.padding[3];s.scale[0]<0&&(k=-k,X=-X),s.scale[1]<0&&(N=-N,W=-W),b=[N,k,W,X]}let S=this.pixelRatio;this.instructions.push([Yt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==rf?rf:b.map(function(N){return N*S}),_,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);let T=1/S,A=_?_.slice(0):null;A&&(A[1]=$o),this.hitDetectionInstructions.push([Yt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,b,A,x,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$o:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(t)}}saveTextStates_(){let e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||Rd,justify:t.justify,textBaseline:t.textBaseline||Eg,scale:t.scale});let s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))}drawChars_(e,t){let r=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,c=$1[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,y=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Yt.DRAW_CHARS,e,t,c,i.overflow,a,i.maxAngle,l,f,o,y*l,d,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Yt.DRAW_CHARS,e,t,c,i.overflow,a&&$o,i.maxAngle,l,f,o,y*l,d,s,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,o;if(!e)this.text_="";else{let s=e.getFill();s?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Wa(s.getColor()||$o)):(i=null,this.textFillState_=i);let a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);let x=a.getLineDash(),b=a.getLineDashOffset(),S=a.getWidth(),T=a.getMiterLimit();o.lineCap=a.getLineCap()||Fc,o.lineDash=x?x.slice():$a,o.lineDashOffset=b===void 0?Ya:b,o.lineJoin=a.getLineJoin()||Bc,o.lineWidth=S===void 0?of:S,o.miterLimit=T===void 0?tf:T,o.strokeStyle=Wa(a.getColor()||nf)}r=this.textState_;let l=e.getFont()||lS;P9(l);let c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Eg,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||rf,r.scale=c===void 0?[1,1]:c;let f=e.getOffsetX(),d=e.getOffsetY(),y=e.getRotateWithView(),p=e.getKeepUpright(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=_===void 0?0:_,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:ct(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+ct(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},fz=sL;var Ile={Circle:oL,Default:zc,Image:lz,LineString:uz,Polygon:oL,Text:fz},aL=class{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){let e={};for(let t in this.buildersByZIndex_){e[t]=e[t]||{};let r=this.buildersByZIndex_[t];for(let i in r){let o=r[i].finish();e[t][i]=o}}return e}getBuilder(e,t){let r=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let o=i[t];if(o===void 0){let s=Ile[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o}},bS=aL;function py(n,e,t,r){let i=n[e],o=n[e+1],s=0;for(let a=e+r;a<t;a+=r){let l=n[a],c=n[a+1];s+=Math.sqrt((l-i)*(l-i)+(c-o)*(c-o)),i=l,o=c}return s}function dz(n,e,t,r,i,o,s,a,l,c,f,d,y=!0){let p=n[e],_=n[e+1],x=0,b=0,S=0,T=0;function A(){x=p,b=_,e+=r,p=n[e],_=n[e+1],T+=S,S=Math.sqrt((p-x)*(p-x)+(_-b)*(_-b))}do A();while(e<t-r&&T+S<o);let N=S===0?0:(o-T)/S,k=gs(x,p,N),W=gs(b,_,N),X=e-r,Y=T,$=o+a*l(c,i,f);for(;e<t-r&&T+S<$;)A();N=S===0?0:($-T)/S;let V=gs(x,p,N),B=gs(b,_,N),v=!1;if(y)if(d){let Z=[k,W,V,B];V0(Z,0,4,2,d,Z,Z),v=Z[0]>Z[2]}else v=k>V;let I=Math.PI,M=[],j=X+r===e;e=X,S=0,T=Y,p=n[e],_=n[e+1];let Q;if(j){A(),Q=Math.atan2(_-b,p-x),v&&(Q+=Q>0?-I:I);let Z=(V+k)/2,q=(B+W)/2;return M[0]=[Z,q,($-o)/2,Q,i],M}i=i.replace(/\n/g," ");for(let Z=0,q=i.length;Z<q;){A();let K=Math.atan2(_-b,p-x);if(v&&(K+=K>0?-I:I),Q!==void 0){let pe=K-Q;if(pe+=pe>I?-2*I:pe<-I?2*I:0,Math.abs(pe)>s)return null}Q=K;let oe=Z,_e=0;for(;Z<q;++Z){let pe=v?q-Z-1:Z,J=a*l(c,i[pe],f);if(e+r<t&&T+S<o+_e+J/2)break;_e+=J}if(Z===oe)continue;let F=v?i.substring(q-oe,q-Z):i.substring(oe,Z);N=S===0?0:(o+_e/2-T)/S;let ee=gs(x,p,N),ce=gs(b,_,N);M.push([ee,ce,_e/2,K,F]),o+=_e}return M}var gy=ki(),Fd=[],hf=[],ff=[],Bd=[];function pz(n){return n[3].declutterBox}var gz=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function lL(n,e){return e==="start"?e=gz.test(n)?"right":"left":e==="end"&&(e=gz.test(n)?"left":"right"),$1[e]}function Tle(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Dle(n,e,t){return t%2===0&&(n+=e),n}var uL=class{constructor(e,t,r,i,o){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Yr(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new hy:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){let o=e+t+r+i;if(this.labels_[o])return this.labels_[o];let s=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[t],c=this.pixelRatio,f=[l.scale[0]*c,l.scale[1]*c],d=l.justify?$1[l.justify]:lL(Array.isArray(e)?e[0]:e,l.textAlign||Rd),y=i&&s.lineWidth?s.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(Tle,[]),{width:_,height:x,widths:b,heights:S,lineWidths:T}=O9(l,p),A=_+y,N=[],k=(A+2)*f[0],W=(x+y)*f[1],X={width:k<0?Math.floor(k):Math.ceil(k),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:N};(f[0]!=1||f[1]!=1)&&N.push("scale",f),i&&(N.push("strokeStyle",s.strokeStyle),N.push("lineWidth",y),N.push("lineCap",s.lineCap),N.push("lineJoin",s.lineJoin),N.push("miterLimit",s.miterLimit),N.push("setLineDash",[s.lineDash]),N.push("lineDashOffset",s.lineDashOffset)),r&&N.push("fillStyle",a.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");let Y=.5-d,$=d*A+Y*y,V=[],B=[],v=0,I=0,M=0,j=0,Q;for(let Z=0,q=p.length;Z<q;Z+=2){let K=p[Z];if(K===`
`){I+=v,v=0,$=d*A+Y*y,++j;continue}let oe=p[Z+1]||l.font;oe!==Q&&(i&&V.push("font",oe),r&&B.push("font",oe),Q=oe),v=Math.max(v,S[M]);let _e=[K,$+Y*b[M]+d*(b[M]-T[j]),.5*(y+v)+I];$+=b[M],i&&V.push("strokeText",_e),r&&B.push("fillText",_e),++M}return Array.prototype.push.apply(N,V),Array.prototype.push.apply(N,B),this.labels_[o]=X,X}replayTextBackground_(e,t,r,i,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,o,s,a,l,c,f,d,y,p,_,x,b){a*=y[0],l*=y[1];let S=r-a,T=i-l,A=o+c>e?e-c:o,N=s+f>t?t-f:s,k=_[3]+A*y[0]+_[1],W=_[0]+N*y[1]+_[2],X=S-_[3],Y=T-_[0];(x||d!==0)&&(Fd[0]=X,Bd[0]=X,Fd[1]=Y,hf[1]=Y,hf[0]=X+k,ff[0]=hf[0],ff[1]=Y+W,Bd[1]=ff[1]);let $;return d!==0?($=ji(Yr(),r,i,1,1,d,-r,-i),Ar($,Fd),Ar($,hf),Ar($,ff),Ar($,Bd),Bu(Math.min(Fd[0],hf[0],ff[0],Bd[0]),Math.min(Fd[1],hf[1],ff[1],Bd[1]),Math.max(Fd[0],hf[0],ff[0],Bd[0]),Math.max(Fd[1],hf[1],ff[1],Bd[1]),gy)):Bu(Math.min(X,X+k),Math.min(Y,Y+W),Math.max(X,X+k),Math.max(Y,Y+W),gy),p&&(S=Math.round(S),T=Math.round(T)),{drawImageX:S,drawImageY:T,drawImageW:A,drawImageH:N,originX:c,originY:f,declutterBox:{minX:gy[0],minY:gy[1],maxX:gy[2],maxY:gy[3],value:b},canvasTransform:$,scale:y}}replayImageOrLabel_(e,t,r,i,o,s,a){let l=!!(s||a),c=i.declutterBox,f=a?a[2]*i.scale[0]/2:0;return c.minX-f<=t[0]&&c.maxX+f>=0&&c.minY-f<=t[1]&&c.maxY+f>=0&&(l&&this.replayTextBackground_(e,Fd,hf,ff,Bd,s,a),F9(e,i.canvasTransform,o,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){let t=this.alignAndScaleFill_;if(t){let r=Ar(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){let o=this.textStates[t],s=this.createLabel(e,t,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=lL(Array.isArray(e)?e[0]:e,o.textAlign||Rd),f=$1[o.textBaseline||Eg],d=a&&a.lineWidth?a.lineWidth:0,y=s.width/l-2*o.scale[0],p=c*y+2*(.5-c)*d,_=f*s.height/l+2*(.5-f)*d;return{label:s,anchorX:p,anchorY:_}}execute_(e,t,r,i,o,s,a,l){let c=this.zIndexContext_,f;this.pixelCoordinates_&&is(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=qa(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),TG(this.renderedTransform_,r));let d=0,y=i.length,p=0,_,x,b,S,T,A,N,k,W,X,Y,$,V,B=0,v=0,I=this.coordinateCache_,M=this.viewRotation_,j=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Q={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},Z=this.instructions!=i||this.overlaps?0:200,q,K,oe,_e;for(;d<y;){let F=i[d];switch(F[0]){case Yt.BEGIN_GEOMETRY:q=F[1],_e=F[3],q.getGeometry()?a!==void 0&&!Jn(a,_e.getExtent())?d=F[2]+1:++d:d=F[2],c&&(c.zIndex=F[4]);break;case Yt.BEGIN_PATH:B>Z&&(this.fill_(e),B=0),v>Z&&(e.stroke(),v=0),!B&&!v&&(e.beginPath(),T=NaN,A=NaN),++d;break;case Yt.CIRCLE:p=F[1];let ce=f[p],pe=f[p+1],J=f[p+2],xe=f[p+3],Se=J-ce,ve=xe-pe,re=Math.sqrt(Se*Se+ve*ve);e.moveTo(ce+re,pe),e.arc(ce,pe,re,0,2*Math.PI,!0),++d;break;case Yt.CLOSE_PATH:e.closePath(),++d;break;case Yt.CUSTOM:p=F[1],_=F[2];let He=F[3],G=F[4],be=F[5];Q.geometry=He,Q.feature=q,d in I||(I[d]=[]);let Ie=I[d];be?be(f,p,_,2,Ie):(Ie[0]=f[p],Ie[1]=f[p+1],Ie.length=2),c&&(c.zIndex=F[6]),G(Ie,Q),++d;break;case Yt.DRAW_IMAGE:p=F[1],_=F[2],W=F[3],x=F[4],b=F[5];let U=F[6],ae=F[7],he=F[8],Fe=F[9],Ce=F[10],we=F[11],Ue=F[12],Le=F[13];S=F[14]||"declutter";let Be=F[15];if(!W&&F.length>=20){X=F[19],Y=F[20],$=F[21],V=F[22];let at=this.drawLabelWithPointPlacement_(X,Y,$,V);W=at.label,F[3]=W;let Gr=F[23];x=(at.anchorX-Gr)*this.pixelRatio,F[4]=x;let ii=F[24];b=(at.anchorY-ii)*this.pixelRatio,F[5]=b,U=W.height,F[6]=U,Le=W.width,F[13]=Le}let pt;F.length>25&&(pt=F[25]);let Tt,qe,qt;F.length>17?(Tt=F[16],qe=F[17],qt=F[18]):(Tt=rf,qe=null,qt=null),Ce&&j?we+=M:!Ce&&!j&&(we-=M);let xt=0;for(;p<_;p+=2){if(pt&&pt[xt++]<Le/this.pixelRatio)continue;let at=this.calculateImageOrLabelDimensions_(W.width,W.height,f[p],f[p+1],Le,U,x,b,he,Fe,we,Ue,o,Tt,!!qe||!!qt,q),Gr=[e,t,W,at,ae,qe,qt];if(l){let ii,oi,Mt;if(Be){let In=_-p;if(!Be[In]){Be[In]={args:Gr,declutterMode:S};continue}let Cr=Be[In];ii=Cr.args,oi=Cr.declutterMode,delete Be[In],Mt=pz(ii)}let Mi,Hi;if(ii&&(oi!=="declutter"||!l.collides(Mt))&&(Mi=!0),(S!=="declutter"||!l.collides(at.declutterBox))&&(Hi=!0),oi==="declutter"&&S==="declutter"){let In=Mi&&Hi;Mi=In,Hi=In}Mi&&(oi!=="none"&&l.insert(Mt),this.replayImageOrLabel_.apply(this,ii)),Hi&&(S!=="none"&&l.insert(at.declutterBox),this.replayImageOrLabel_.apply(this,Gr))}else this.replayImageOrLabel_.apply(this,Gr)}++d;break;case Yt.DRAW_CHARS:let Qe=F[1],Kt=F[2],ft=F[3],Pr=F[4];V=F[5];let mt=F[6],Zt=F[7],hn=F[8];$=F[9];let dr=F[10];X=F[11],Array.isArray(X)&&(X=X.reduce(Dle,"")),Y=F[12];let Dt=[F[13],F[13]];S=F[14]||"declutter";let sr=F[15],At=this.textStates[Y],Vt=At.font,Vn=[At.scale[0]*Zt,At.scale[1]*Zt],vn;Vt in this.widths_?vn=this.widths_[Vt]:(vn={},this.widths_[Vt]=vn);let $t=py(f,Qe,Kt,2),Fn=Math.abs(Vn[0])*_P(Vt,X,vn);if(Pr||Fn<=$t){let at=this.textStates[Y].textAlign,Gr=($t-Fn)*lL(X,at),ii=dz(f,Qe,Kt,2,X,Gr,mt,Math.abs(Vn[0]),_P,Vt,vn,j?0:this.viewRotation_,sr);e:if(ii){let oi=[],Mt,Mi,Hi,In,Cr;if($)for(Mt=0,Mi=ii.length;Mt<Mi;++Mt){Cr=ii[Mt],Hi=Cr[4],In=this.createLabel(Hi,Y,"",$),x=Cr[2]+(Vn[0]<0?-dr:dr),b=ft*In.height+(.5-ft)*2*dr*Vn[1]/Vn[0]-hn;let nr=this.calculateImageOrLabelDimensions_(In.width,In.height,Cr[0],Cr[1],In.width,In.height,x,b,0,0,Cr[3],Dt,!1,rf,!1,q);if(l&&S==="declutter"&&l.collides(nr.declutterBox))break e;oi.push([e,t,In,nr,1,null,null])}if(V)for(Mt=0,Mi=ii.length;Mt<Mi;++Mt){Cr=ii[Mt],Hi=Cr[4],In=this.createLabel(Hi,Y,V,""),x=Cr[2],b=ft*In.height-hn;let nr=this.calculateImageOrLabelDimensions_(In.width,In.height,Cr[0],Cr[1],In.width,In.height,x,b,0,0,Cr[3],Dt,!1,rf,!1,q);if(l&&S==="declutter"&&l.collides(nr.declutterBox))break e;oi.push([e,t,In,nr,1,null,null])}l&&S!=="none"&&l.load(oi.map(pz));for(let nr=0,qi=oi.length;nr<qi;++nr)this.replayImageOrLabel_.apply(this,oi[nr])}}++d;break;case Yt.END_GEOMETRY:if(s!==void 0){q=F[1];let at=s(q,_e,S);if(at)return at}++d;break;case Yt.FILL:Z?B++:this.fill_(e),++d;break;case Yt.MOVE_TO_LINE_TO:for(p=F[1],_=F[2],K=f[p],oe=f[p+1],e.moveTo(K,oe),T=K+.5|0,A=oe+.5|0,p+=2;p<_;p+=2)K=f[p],oe=f[p+1],N=K+.5|0,k=oe+.5|0,(p==_-2||N!==T||k!==A)&&(e.lineTo(K,oe),T=N,A=k);++d;break;case Yt.SET_FILL_STYLE:this.alignAndScaleFill_=F[2],B&&(this.fill_(e),B=0,v&&(e.stroke(),v=0)),e.fillStyle=F[1],++d;break;case Yt.SET_STROKE_STYLE:v&&(e.stroke(),v=0),this.setStrokeStyle_(e,F),++d;break;case Yt.STROKE:Z?v++:e.stroke(),++d;break;default:++d;break}}B&&this.fill_(e),v&&e.stroke()}execute(e,t,r,i,o,s){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,r,i,o){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,o)}},mz=uL;var jd=["Polygon","Circle","LineString","Image","Text","Default"],my=["Image","Text"],yz=jd.filter(n=>!my.includes(n)),hL=class{constructor(e,t,r,i,o,s,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Yr(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){let r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(let r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);let o=e[r];for(let s in o){let a=o[s];i[s]=new mz(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(let t in this.executorsByZIndex_){let r=this.executorsByZIndex_[t];for(let i=0,o=e.length;i<o;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,o,s){i=Math.round(i);let a=i*2+1,l=ji(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Qn(a,a));let f=this.hitDetectionContext_;f.canvas.width!==a||f.canvas.height!==a?(f.canvas.width=a,f.canvas.height=a):c||f.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=ki(),Em(d,e),bo(d,t*(this.renderBuffer_+i),d));let y=Ale(i),p;function _(k,W,X){let Y=f.getImageData(0,0,a,a).data;for(let $=0,V=y.length;$<V;$++)if(Y[y[$]]>0){if(!s||X==="none"||p!=="Image"&&p!=="Text"||s.includes(k)){let B=(y[$]-3)/4,v=i-B%a,I=i-(B/a|0),M=o(k,W,v*v+I*I);if(M)return M}f.clearRect(0,0,a,a);break}}let x=Object.keys(this.executorsByZIndex_).map(Number);x.sort(Ys);let b,S,T,A,N;for(b=x.length-1;b>=0;--b){let k=x[b].toString();for(T=this.executorsByZIndex_[k],S=jd.length-1;S>=0;--S)if(p=jd[S],A=T[p],A!==void 0&&(N=A.executeHitDetection(f,l,r,_,d),N))return N}}getClipCoords(e){let t=this.maxExtent_;if(!t)return null;let r=t[0],i=t[1],o=t[2],s=t[3],a=[r,i,r,s,o,s,o,i];return qa(a,0,8,2,e,a),a}isEmpty(){return ya(this.executorsByZIndex_)}execute(e,t,r,i,o,s,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?Sb:Ys),s=s||jd;let c=jd.length;for(let f=0,d=l.length;f<d;++f){let y=l[f].toString(),p=this.executorsByZIndex_[y];for(let _=0,x=s.length;_<x;++_){let b=s[_],S=p[b];if(S!==void 0){let T=a===null?void 0:S.getZIndexContext(),A=T?T.getContext():e,N=this.maxExtent_&&b!=="Image"&&b!=="Text";if(N&&(A.save(),this.clip(A,r)),!T||b==="Text"||b==="Image"?S.execute(A,t,r,i,o,a):T.pushFunction(k=>S.execute(k,t,r,i,o,a)),N&&A.restore(),T){T.offset();let k=l[f]*c+jd.indexOf(b);this.deferredZIndexContexts_[k]||(this.deferredZIndexContexts_[k]=[]),this.deferredZIndexContexts_[k].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Ys);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[r]].length=0}},cL={};function Ale(n){if(cL[n]!==void 0)return cL[n];let e=n*2+1,t=n*n,r=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){let a=o*o+s*s;if(a>t)break;let l=r[a];l||(l=[],r[a]=l),l.push(((n+o)*e+(n+s))*4+3),o>0&&l.push(((n-o)*e+(n+s))*4+3),s>0&&(l.push(((n+o)*e+(n-s))*4+3),o>0&&l.push(((n-o)*e+(n-s))*4+3))}let i=[];for(let o=0,s=r.length;o<s;++o)r[o]&&i.push(...r[o]);return cL[n]=i,i}var SS=hL;var fL=class extends ES{constructor(e,t,r,i,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?ym(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Yr()}drawImages_(e,t,r,i){if(!this.image_)return;let o=qa(e,t,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let f=0,d=o.length;f<d;f+=2){let y=o[f]-this.imageAnchorX_,p=o[f+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let _=y+this.imageAnchorX_,x=p+this.imageAnchorY_;ji(a,_,x,1,1,c,-_,-x),s.save(),s.transform.apply(s,a),s.translate(_,x),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=qa(e,t,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=i){let l=o[t]+this.textOffsetX_,c=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,c-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,c),this.textFillState_&&s.fillText(this.text_,l,c))}}moveToLineTo_(e,t,r,i,o){let s=this.context_,a=qa(e,t,r,i,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let c=2;c<l;c+=2)s.lineTo(a[c],a[c+1]);return o&&s.closePath(),r}drawRings_(e,t,r,i){for(let o=0,s=r.length;o<s;++o)t=this.moveToLineTo_(e,t,r[o],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=LG(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],o=Math.sqrt(r*r+i*i),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break;default:}}drawFeature(e,t){let r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){let t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){let t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getExtent();if(Jn(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let r=this.context_,i=e.getFlatCoordinates(),o=0,s=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=s.length;l<c;++l)o=this.moveToLineTo_(i,o,s[l],a,!1);r.stroke()}if(this.text_!==""){let r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){let t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_,r=e.getOrientedFlatCoordinates(),i=0,o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,l=o.length;a<l;++a){let c=o[a];i=this.drawRings_(r,i,c,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){let t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){let t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),is(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Rd;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{let r=e.getColor();this.fillState_={fillStyle:Wa(r||$o)}}if(!t)this.strokeState_=null;else{let r=t.getColor(),i=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),f=o||$a;this.strokeState_={lineCap:i!==void 0?i:Fc,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(s||Ya)*this.pixelRatio_,lineJoin:a!==void 0?a:Bc,lineWidth:(l!==void 0?l:of)*this.pixelRatio_,miterLimit:c!==void 0?c:tf,strokeStyle:Wa(r||nf)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}let r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/r,s[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{let t=e.getFill();if(!t)this.textFillState_=null;else{let p=t.getColor();this.textFillState_={fillStyle:Wa(p||$o)}}let r=e.getStroke();if(!r)this.textStrokeState_=null;else{let p=r.getColor(),_=r.getLineCap(),x=r.getLineDash(),b=r.getLineDashOffset(),S=r.getLineJoin(),T=r.getWidth(),A=r.getMiterLimit();this.textStrokeState_={lineCap:_!==void 0?_:Fc,lineDash:x||$a,lineDashOffset:b||Ya,lineJoin:S!==void 0?S:Bc,lineWidth:T!==void 0?T:of,miterLimit:A!==void 0?A:tf,strokeStyle:Wa(p||nf)}}let i=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:i!==void 0?i:lS,textAlign:d!==void 0?d:Rd,textBaseline:y!==void 0?y:Eg},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,_,x)=>p+=x%2?" ":_,""):f:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}},_z=fL;var Ea=.5;function CS(n,e,t,r,i,o,s,a,l){let c=l?Zl(i,l):i,f=n[0]*Ea,d=n[1]*Ea,y=Qn(f,d);y.imageSmoothingEnabled=!1;let p=y.canvas,_=new _z(y,Ea,i,null,s,a,l?Am(_s(),l):null),x=t.length,b=Math.floor((256*256*256-1)/x),S={};for(let A=1;A<=x;++A){let N=t[A-1],k=N.getStyleFunction()||r;if(!k)continue;let W=k(N,o);if(!W)continue;Array.isArray(W)||(W=[W]);let Y=(A*b).toString(16).padStart(7,"#00000");for(let $=0,V=W.length;$<V;++$){let B=W[$],v=B.getGeometryFunction()(N);if(!v||!Jn(c,v.getExtent()))continue;let I=B.clone(),M=I.getFill();M&&M.setColor(Y);let j=I.getStroke();j&&(j.setColor(Y),j.setLineDash(null)),I.setText(void 0);let Q=B.getImage();if(Q){let oe=Q.getImageSize();if(!oe)continue;let _e=Qn(oe[0],oe[1],void 0,{alpha:!1}),F=_e.canvas;_e.fillStyle=Y,_e.fillRect(0,0,F.width,F.height),I.setImage(new Md({img:F,anchor:Q.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Q.getOrigin(),opacity:1,size:Q.getSize(),scale:Q.getScale(),rotation:Q.getRotation(),rotateWithView:Q.getRotateWithView()}))}let Z=I.getZIndex()||0,q=S[Z];q||(q={},S[Z]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);let K=v.getType();if(K==="GeometryCollection"){let oe=v.getGeometriesArrayRecursive();for(let _e=0,F=oe.length;_e<F;++_e){let ee=oe[_e];q[ee.getType().replace("Multi","")].push(ee,I)}}else q[K.replace("Multi","")].push(v,I)}}let T=Object.keys(S).map(Number).sort(Ys);for(let A=0,N=T.length;A<N;++A){let k=S[T[A]];for(let W in k){let X=k[W];for(let Y=0,$=X.length;Y<$;Y+=2){_.setStyle(X[Y+1]);for(let V=0,B=e.length;V<B;++V)_.setTransform(e[V]),_.drawGeometry(X[Y])}}}return y.getImageData(0,0,p.width,p.height)}function IS(n,e,t){let r=[];if(t){let i=Math.floor(Math.round(n[0])*Ea),o=Math.floor(Math.round(n[1])*Ea),s=(Xn(i,0,t.width-1)+Xn(o,0,t.height-1)*t.width)*4,a=t.data[s],l=t.data[s+1],f=t.data[s+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}var Rle=.5,vz={Point:Fle,LineString:Lle,Polygon:jle,MultiPoint:Ble,MultiLineString:kle,MultiPolygon:Ole,GeometryCollection:Ple,Circle:Mle};function xz(n,e){return parseInt(ct(n),10)-parseInt(ct(e),10)}function Y1(n,e){let t=dL(n,e);return t*t}function dL(n,e){return Rle*n/e}function Mle(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(o||s){let l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function yy(n,e,t,r,i,o,s,a){let l=[],c=t.getImage();if(c){let y=!0,p=c.getImageState();p==Et.LOADED||p==Et.ERROR?y=!1:p==Et.IDLE&&c.load(),y&&l.push(c.ready())}let f=t.getFill();f&&f.loading()&&l.push(f.ready());let d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),Nle(n,e,t,r,o,s,a),d}function Nle(n,e,t,r,i,o,s){let a=t.getGeometryFunction()(e);if(!a)return;let l=a.simplifyTransformed(r,i);if(t.getRenderer())wz(n,l,t,e,s);else{let f=vz[l.getType()];f(n,l,t,e,s,o)}}function wz(n,e,t,r,i){if(e.getType()=="GeometryCollection"){let s=e.getGeometries();for(let a=0,l=s.length;a<l;++a)wz(n,s[a],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function Ple(n,e,t,r,i,o){let s=e.getGeometriesArray(),a,l;for(a=0,l=s.length;a<l;++a){let c=vz[s[a].getType()];c(n,s[a],t,r,i,o)}}function Lle(n,e,t,r,i){let o=t.getStroke();if(o){let a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,r,i)}let s=t.getText();if(s&&s.getText()){let a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function kle(n,e,t,r,i){let o=t.getStroke();if(o){let a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r,i)}let s=t.getText();if(s&&s.getText()){let a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function Ole(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(s||o){let l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function Fle(n,e,t,r,i,o){let s=t.getImage(),a=t.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=Et.LOADED)return;let f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,c),f.drawPoint(e,r,i)}if(l){let f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(a,c),f.drawText(e,r,i)}}function Ble(n,e,t,r,i,o){let s=t.getImage(),a=s&&s.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),f=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=Et.LOADED)return;let d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,f),d.drawMultiPoint(e,r,i)}if(c){let d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function jle(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(o||s){let l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}var pL=class extends dy{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ki(),this.wrappedRenderedExtent_=ki(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){let i=t.extent,o=t.viewState,s=o.center,a=o.resolution,l=o.projection,c=o.rotation,f=l.getExtent(),d=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),p=t.pixelRatio,_=t.viewHints,x=!(_[$r.ANIMATING]||_[$r.INTERACTING]),b=this.context,S=Math.round(on(i)/a*p),T=Math.round(or(i)/a*p),A=d.getWrapX()&&l.canWrapX(),N=A?on(f):null,k=A?Math.ceil((i[2]-f[2])/N)+1:1,W=A?Math.floor((i[0]-f[0])/N):0;do{let X=this.getRenderTransform(s,a,0,p,S,T,W*N);t.declutter&&(X=X.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],X,c,x,r===void 0?jd:r?my:yz,r?y&&t.declutter[y]:void 0)}while(++W<k)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Qn(this.context.canvas.width,this.context.canvas.height,YP))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Jh(this.context),YP.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){let r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;let i=e.viewState;this.prepareContainer(e,t);let o=this.context,s=this.replayGroup_,a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Ri.PRERENDER)||this.getLayer().hasListener(Ri.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(o,e);let l=i.projection;if(this.clipped_=!1,a&&r.extent&&this.clipping){let c=so(r.extent,l);a=Jn(c,e.extent),this.clipped_=a&&!zs(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let r=this.frameState.size.slice(),i=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),f=[],d=r[0]*Ea,y=r[1]*Ea;f.push(this.getRenderTransform(i,o,s,Ea,d,y,0).slice());let p=c.getSource(),_=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!zs(_,l)){let b=l[0],S=on(_),T=0,A;for(;b<_[0];)--T,A=S*T,f.push(this.getRenderTransform(i,o,s,Ea,d,y,A).slice()),b+=S;for(T=0,b=l[2];b>_[2];)++T,A=S*T,f.push(this.getRenderTransform(i,o,s,Ea,d,y,A).slice()),b-=S}let x=_s();this.hitDetectionImageData_=CS(r,f,this.renderedFeatures_,c.getStyleFunction(),l,o,s,Y1(o,this.renderedPixelRatio_),x?a:null)}t(IS(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,o){if(!this.replayGroup_)return;let s=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},f=function(y,p,_){let x=ct(y),b=c[x];if(b){if(b!==!0&&_<b.distanceSq){if(_===0)return c[x]=!0,o.splice(o.lastIndexOf(b),1),i(y,l,p);b.geometry=p,b.distanceSq=_}}else{if(_===0)return c[x]=!0,i(y,l,p);o.push(c[x]={feature:y,layer:l,geometry:p,distanceSq:_,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,r,f,d?t.declutter?.[d]?.all().map(y=>y.value):null)}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let t=this.getLayer(),r=t.getSource();if(!r)return!1;let i=e.viewHints[$r.ANIMATING],o=e.viewHints[$r.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&i||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=e.extent,c=e.viewState,f=c.projection,d=c.resolution,y=e.pixelRatio,p=t.getRevision(),_=t.getRenderBuffer(),x=t.getRenderOrder();x===void 0&&(x=xz);let b=c.center.slice(),S=bo(l,_*d),T=S.slice(),A=[S.slice()],N=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!zs(N,e.extent)){let j=on(N),Q=Math.max(on(S)/2,j);S[0]=N[0]-Q,S[2]=N[2]+Q,Dm(b,f);let Z=T8(A[0],f);Z[0]<N[0]&&Z[2]<N[2]?A.push([Z[0]+j,Z[1],Z[2]+j,Z[3]]):Z[0]>N[0]&&Z[2]>N[2]&&A.push([Z[0]-j,Z[1],Z[2]-j,Z[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==x&&this.renderedFrameDeclutter_===!!e.declutter&&zs(this.wrappedRenderedExtent_,S))return is(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let k=new bS(dL(d,y),S,d,y),W=_s(),X;if(W){for(let j=0,Q=A.length;j<Q;++j){let Z=A[j],q=Zl(Z,f);r.loadFeatures(q,O8(d,f),W)}X=Am(W,f)}else for(let j=0,Q=A.length;j<Q;++j)r.loadFeatures(A[j],d,f);let Y=Y1(d,y),$=!0,V=(j,Q)=>{let Z,q=j.getStyleFunction()||t.getStyleFunction();if(q&&(Z=q(j,d)),Z){let K=this.renderFeature(j,Y,Z,k,X,this.getLayer().getDeclutter(),Q);$=$&&!K}},B=Zl(S,f),v=r.getFeaturesInExtent(B);x&&v.sort(x);for(let j=0,Q=v.length;j<Q;++j)V(v[j],j);this.renderedFeatures_=v,this.ready=$;let I=k.finish(),M=new SS(S,d,y,r.getOverlaps(),I,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=x,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=S,this.renderedCenter_=b,this.renderedProjection_=f,this.renderedPixelRatio_=y,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,o,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,f=r.length;c<f;++c)l=yy(i,e,r[c],t,this.boundHandleStyleImageChange_,o,s,a)||l;else l=yy(i,e,r,t,this.boundHandleStyleImageChange_,o,s,a);return l}},Ez=pL;var gL=class extends oy{constructor(e){super(e)}createRenderer(){return new Ez(this)}},Tl=gL;var Ule=!1;function mL(n,e,t,r,i,o,s){let a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Ule,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let c=e.getType();try{let f;c=="text"||c=="json"?f=a.responseText:c=="xml"?f=a.responseXML||a.responseText:c=="arraybuffer"&&(f=a.response),f?o(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function yL(n,e){return function(t,r,i,o,s){mL(n,e,t,r,i,(a,l)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function bz(n,e){return[[-1/0,-1/0,1/0,1/0]]}var _L=class n extends Io{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){let t=e;this.setGeometry(t)}else{let t=e;this.setProperties(t)}}clone(){let e=new n(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());let t=this.getGeometry();t&&e.setGeometry(t.clone());let r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(On(this.geometryChangeKey_),this.geometryChangeKey_=null);let e=this.getGeometry();e&&(this.geometryChangeKey_=cn(e,gt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Gle(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Gle(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(an(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}var Zr=_L;function TS(n,e,t,r){let i=[],o=ki();for(let s=0,a=t.length;s<a;++s){let l=t[s];o=xm(n,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}function Tg(n,e,t,r,i,o,s){let a,l,c=(t-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let f=n[e],d=n[e+1],y=0,p=[0];for(let b=e+r;b<t;b+=r){let S=n[b],T=n[b+1];y+=Math.sqrt((S-f)*(S-f)+(T-d)*(T-d)),p.push(y),f=S,d=T}let _=i*y,x=dG(p,_);x<0?(l=(_-p[-x-2])/(p[-x-1]-p[-x-2]),a=e+(-x-2)*r):a=e+x*r}s=s>1?s:2,o=o||new Array(s);for(let f=0;f<s;++f)o[f]=a===void 0?NaN:l===void 0?n[a+f]:gs(n[a+f],n[a+r+f],l);return o}function DS(n,e,t,r,i,o){if(t==e)return null;let s;if(i<n[e+r-1])return o?(s=n.slice(e,e+r),s[r-1]=i,s):null;if(n[t-1]<i)return o?(s=n.slice(t-r,t),s[r-1]=i,s):null;if(i==n[e+r-1])return n.slice(e,e+r);let a=e/r,l=t/r;for(;a<l;){let y=a+l>>1;i<n[(y+1)*r-1]?l=y:a=y+1}let c=n[a*r-1];if(i==c)return n.slice((a-1)*r,(a-1)*r+r);let f=n[(a+1)*r-1],d=(i-c)/(f-c);s=[];for(let y=0;y<r-1;++y)s.push(gs(n[(a-1)*r+y],n[a*r+y],d));return s.push(i),s}function Sz(n,e,t,r,i,o,s){if(s)return DS(n,e,t[t.length-1],r,i,o);let a;if(i<n[r-1])return o?(a=n.slice(0,r),a[r-1]=i,a):null;if(n[n.length-1]<i)return o?(a=n.slice(n.length-r),a[r-1]=i,a):null;for(let l=0,c=t.length;l<c;++l){let f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return DS(n,e,f,r,i,!1);e=f}}return null}var AS=class n extends Xs{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){let e=new n(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){let o=this.flatCoordinates,s=e-o[0],a=t-o[1],l=s*s+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=o[c];else{let c=this.getRadius()/Math.sqrt(l);r[0]=o[0]+c*s,r[1]=o[1]+c*a;for(let f=2;f<this.stride;++f)r[f]=o[f]}return r.length=this.stride,l}return i}containsXY(e,t){let r=this.flatCoordinates,i=e-r[0],o=t-r[1];return i*i+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){let t=this.flatCoordinates,r=t[this.stride]-t[0];return Bu(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){let t=this.getExtent();if(Jn(e,t)){let r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:bm(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){let t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+r;for(let o=1;o<t;++o)i[t+o]=e[o];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);let i=this.flatCoordinates,o=kb(i,0,e,this.stride);i[o++]=i[0]+t;for(let s=1,a=this.stride;s<a;++s)i[o++]=i[s];i.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){let r=this.getCenter(),i=this.getStride();this.setCenter(V0(r,0,r.length,i,e,t,r)),this.changed()}};AS.prototype.transform;var Cz=AS;var xL=class n extends Lb{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(On),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(cn(e[t],gt.CHANGE,this.changed,this))}clone(){let e=new n(vL(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Fa(this.getExtent(),e,t))return i;let o=this.geometries_;for(let s=0,a=o.length;s<a;++s)i=o[s].closestPointXY(e,t,r,i);return i}containsXY(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){vm(e);let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)wm(e,t[r].getExtent());return e}getGeometries(){return vL(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[],t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=[],r=this.geometries_,i=!1;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(i=!0)}return i?new n(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=zo(this.getExtent()));let i=this.geometries_;for(let o=0,s=i.length;o<s;++o)i[o].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(vL(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function vL(n){return n.map(e=>e.clone())}var Ds=xL;var wL=class n extends Xs{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Nn(this.flatCoordinates,e),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Fa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return jb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,DS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Tg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return py(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){let t=[];return t.length=fg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return v1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hg(this.flatCoordinates,0,e,this.stride),this.changed()}},ho=wL;var EL=class n extends Xs{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{let i=e,o=[],s=[];for(let l=0,c=i.length;l<c;++l){let f=i[l];Nn(o,f.getFlatCoordinates()),s.push(o.length)}let a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){Nn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Fa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f1(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),p1(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,Sz(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return bd(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ho(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[],o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s],c=new ho(e.slice(o,l),r);i.push(c),o=l}return i}getLength(){let e=this.ends_,t=0,r=0;for(let i=0,o=e.length;i<o;++i)r+=py(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){let e=[],t=this.flatCoordinates,r=0,i=this.ends_,o=this.stride;for(let s=0,a=i.length;s<a;++s){let l=i[s],c=Tg(t,r,l,o,.5);Nn(e,c),r=l}return e}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=Fb(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new n(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return zG(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=Ed(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},Qs=EL;var bL=class n extends Xs{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Nn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Fa(this.getExtent(),e,t))return i;let o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){let c=_l(e,t,o[a],o[a+1]);if(c<i){i=c;for(let f=0;f<s;++f)r[f]=o[a+f];r.length=s}}return i}getCoordinates(){return mu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ui(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let o=0,s=e.length;o<s;o+=r){let a=new Ui(e.slice(o,o+r),t);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){let t=this.flatCoordinates,r=this.stride;for(let i=0,o=t.length;i<o;i+=r){let s=t[i],a=t[i+1];if(Bw(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hg(this.flatCoordinates,0,e,this.stride),this.changed()}},Dl=bL;var SL=class n extends Xs{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,o=[],s=[];for(let a=0,l=i.length;a<l;++a){let c=i[a],f=o.length,d=c.getEnds();for(let y=0,p=d.length;y<p;++y)d[y]+=f;Nn(o,c.getFlatCoordinates()),s.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=o,r=s}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;Nn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,o=t.length;i<o;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){let e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();let r=new n(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Fa(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(FG(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),BG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return GG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return kG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),w1(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,g1(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=TS(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Bb(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Dl(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;Ub(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=w1(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=jG(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new n(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{let o=this.endss_[e-1];t=o[o.length-1]}let r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let o=0,s=r.length;o<s;++o)r[o]-=t;return new Wo(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){let e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s].slice(),c=l[l.length-1];if(o!==0)for(let d=0,y=l.length;d<y;++d)l[d]-=o;let f=new Wo(t.slice(o,c),e,l);i.push(f),o=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return VG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);let r=Ob(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{let i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}},Al=SL;var Iz=Yr(),X1=class n{constructor(e,t,r,i,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Yf(this.flatCoordinates_):xm(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=zo(this.getExtent());this.flatInteriorPoints_=_1(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=Gb(this.flatCoordinates_,this.ends_),t=TS(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Bb(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Tg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,t=0,r=this.ends_;for(let i=0,o=r.length;i<o;++i){let s=r[i],a=Tg(e,t,s,2,.5);Nn(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=sn(e);let t=e.getExtent(),r=e.getWorldExtent();if(t&&r){let i=or(r)/or(t);ji(Iz,r[0],r[3],i,-i,0,0,0),qa(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Iz,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new n(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Cb((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);let r=this.simplifiedGeometry_.getFlatCoordinates(),i;switch(this.type_){case"LineString":r.length=fg(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Fb(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=m1(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break;default:}return i&&(this.simplifiedGeometry_=new n(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}};X1.prototype.getFlatCoordinates=X1.prototype.getOrientedFlatCoordinates;var Za=X1;var CL=class{constructor(e){this.rbush_=new ey(e),this.items_={}}insert(e,t){let r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[ct(t)]=r}load(e,t){let r=new Array(t.length);for(let i=0,o=t.length;i<o;i++){let s=e[i],a=t[i],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[i]=l,this.items_[ct(a)]=l}this.rbush_.load(r)}remove(e){let t=ct(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){let r=this.items_[ct(t)],i=[r.minX,r.minY,r.maxX,r.maxY];xl(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){let t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,o=e.length;i<o;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return ya(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let t=this.rbush_.toJSON();return Bu(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(let t in e.items_)this.items_[t]=e.items_[t]}},Z1=CL;var IL=class extends Io{constructor(e){super(),this.projection=sn(e.projection),this.attributions_=Tz(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Tz(e),this.changed()}setState(e){this.state_=e,this.changed()}};function Tz(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}var _y=IL;var ea={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};var Vc=class extends jr{constructor(e,t,r){super(e),this.feature=t,this.features=r}},TL=class extends _y{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Kh,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(an(this.format_,"`format` must be set when `url` is set"),this.loader_=yL(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:bz;let t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Z1:null,this.loadedExtentsRtree_=new Z1,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new vi(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let t=ct(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);let r=e.getGeometry();if(r){let i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Vc(ea.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Za||(this.featureChangeKeys_[e]=[cn(t,gt.CHANGE,this.handleFeatureChange_,this),cn(t,$u.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){let i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Za){let o=this.idIndex_[i];o instanceof Za?Array.isArray(o)?o.push(t):this.idIndex_[i]=[o,t]:r=!1}else r=!1}return r&&(an(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let t=[],r=[],i=[];for(let o=0,s=e.length;o<s;o++){let a=e[o],l=ct(a);this.addToIndex_(l,a)&&r.push(a)}for(let o=0,s=r.length;o<s;o++){let a=r[o],l=ct(a);this.setupChangeEvents_(l,a);let c=a.getGeometry();if(c){let f=c.getExtent();t.push(f),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(ea.ADDFEATURE))for(let o=0,s=r.length;o<s;o++)this.dispatchEvent(new Vc(ea.ADDFEATURE,r[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(ea.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(ea.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(_i.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(_i.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(let r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(On);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(let r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let t=new Vc(ea.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){let r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){let o=i.getGeometry();if(o instanceof Za||o.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){let i=r.getGeometry();if(i instanceof Za||i.intersectsExtent(e)){let o=t(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ya(this.nullGeometryFeatures_)||Nn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let i=Sm(e,t);return[].concat(...i.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){let r=e[0],i=e[1],o=null,s=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return t=t||Ss,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){let f=c.getGeometry(),d=a;if(a=f instanceof Za?0:f.closestPointXY(r,i,s,a),a<d){o=c;let y=Math.sqrt(a);l[0]=r-y,l[1]=i-y,l[2]=r+y,l[3]=i+y}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){let t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let t=e.target,r=ct(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{let s=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}let o=t.getId();if(o!==void 0){let s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new Vc(ea.CHANGEFEATURE,t))}hasFeature(e){let t=e.getId();return t!==void 0?t in this.idIndex_:ct(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ya(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){let i=this.loadedExtentsRtree_,o=this.strategy_(e,t,r);for(let s=0,a=o.length;s<a;++s){let l=o[s];i.forEachInExtent(l,function(f){return zs(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Vc(ea.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vc(ea.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Vc(ea.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(xl(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let t=ct(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(On),delete this.featureChangeKeys_[t];let i=e.getId();if(i!==void 0){let o=i.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(ea.REMOVEFEATURE)&&this.dispatchEvent(new Vc(ea.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(let t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){an(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(yL(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}},ba=TL;var vy=[0,0,0],Ud=5,DL=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,an(gG(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,an(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Vs(r)),an(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,an(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:256,an(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{let s=new ay(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){let a=this.getTileRangeForExtentAndZ(r,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){let i=this.getTileRangeForExtentAndZ(e,t);for(let o=i.minX,s=i.maxX;o<=s;++o)for(let a=i.minY,l=i.maxY;a<=l;++a)r([t,o,a])}forEachTileCoordParentTileRange(e,t,r,i){let o,s,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=bg(s,s,a,a,r)):o=this.getTileRangeForExtentAndZ(l,c,r),t(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){let o=e[1]*2,s=e[2]*2;return bg(o,o+1,s,s+1,t)}let i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;let i=e[0],o=e[1],s=e[2];if(t===i)return bg(o,s,o,s,r);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,t-i),c=Math.floor(o*l),f=Math.floor(s*l);if(t<i)return bg(c,c,f,f,r);let d=Math.floor(l*(o+1))-1,y=Math.floor(l*(s+1))-1;return bg(c,d,f,y,r)}let a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,vy);let i=vy[1],o=vy[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,vy);let s=vy[1],a=vy[2];return bg(i,s,o,a,r)}getTileCoordCenter(e){let t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=er(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){let r=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=er(this.getTileSize(e[0]),this.tmpSize_),s=r[0]+e[1]*o[0]*i,a=r[1]-(e[2]+1)*o[1]*i,l=s+o[0]*i,c=a+o[1]*i;return Bu(s,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,o){let s=this.getZForResolution(r),a=r/this.getResolution(s),l=this.getOrigin(s),c=er(this.getTileSize(s),this.tmpSize_),f=a*(e-l[0])/r/c[0],d=a*(l[1]-t)/r/c[1];return i?(f=vc(f,Ud)-1,d=vc(d,Ud)-1):(f=_m(f,Ud),d=_m(d,Ud)),uf(s,f,d,o)}getTileCoordForXYAndZ_(e,t,r,i,o){let s=this.getOrigin(r),a=this.getResolution(r),l=er(this.getTileSize(r),this.tmpSize_),c=(e-s[0])/a/l[0],f=(s[1]-t)/a/l[1];return i?(c=vc(c,Ud)-1,f=vc(f,Ud)-1):(c=_m(c,Ud),f=_m(f,Ud)),uf(r,c,f,o)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){let r=yd(this.resolutions_,e,t||0);return Xn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return yN(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){let t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}},df=DL;var AL=class extends df{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}};function Dz(n,e,t){let r=[],i=[],o=[],s=[],a=[];t=t!==void 0?t:[];let l="SupportedCRS",c="TileMatrix",f="Identifier",d="ScaleDenominator",y="TopLeftCorner",p="TileWidth",_="TileHeight",x=n[l],b=sn(x),S=b.getMetersPerUnit(),T=b.getAxisOrientation().startsWith("ne");return n[c].sort(function(A,N){return N[d]-A[d]}),n[c].forEach(function(A){let N;if(t.length>0?N=t.find(function(k){return A[f]==k[c]?!0:A[f].includes(":")?!1:n[f]+":"+A[f]===k[c]}):N=!0,N){i.push(A[f]);let k=A[d]*28e-5/S,W=A[p],X=A[_];T?o.push([A[y][1],A[y][0]]):o.push(A[y]),r.push(k),s.push(W==X?W:[W,X]),a.push([A.MatrixWidth,A.MatrixHeight])}}),new AL({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:s,sizes:a})}function Gd(n){let e=n.getDefaultTileGrid();return e||(e=Hle(n),n.setDefaultTileGrid(e)),e}function Az(n,e,t){let r=e[0],i=n.getTileCoordCenter(e),o=Rl(t);if(!Gs(o,i)){let s=on(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,n.getTileCoordForCoordAndZ(i,r)}return e}function Vle(n,e,t,r){r=r!==void 0?r:"top-left";let i=Rz(n,e,t);return new df({extent:n,origin:S8(n,r),resolutions:i,tileSize:t})}function ec(n){let e=n||{},t=e.extent||sn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Rz(t,e.maxZoom,e.tileSize,e.maxResolution)};return new df(r)}function Rz(n,e,t,r){e=e!==void 0?e:42,t=er(t!==void 0?t:256);let i=or(n),o=on(n);r=r>0?r:Math.max(o/t[0],i/t[1]);let s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=r/Math.pow(2,l);return a}function Hle(n,e,t,r){let i=Rl(n);return Vle(i,e,t,r)}function Rl(n){n=sn(n);let e=n.getExtent();if(!e){let t=180*zw.degrees/n.getMetersPerUnit();e=Bu(-t,-t,t,t)}return e}function Dg(n,e){let t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});let r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}var qle=/\{z\}/g,Wle=/\{x\}/g,$le=/\{y\}/g,Yle=/\{-y\}/g;function Mz(n,e,t,r,i){return n.replace(qle,e.toString()).replace(Wle,t.toString()).replace($le,r.toString()).replace(Yle,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function RS(n){let e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){let r=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o;for(o=r;o<=i;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){let r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function Xle(n,e){return(function(t,r,i){if(!t)return;let o,s=t[0];if(e){let a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return Mz(n,s,t[1],t[2],o)})}function MS(n,e){let t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Xle(n[i],e);return NS(r)}function NS(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;let i=_S(e),o=vl(i,n.length);return n[o](e,t,r)})}var RL=class extends _y{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;let t=[256,256];this.tileGrid&&er(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||ct(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){let t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,o,s){return It()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Gd(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){let i=this.getTileGridForProjection(r),o=this.getTilePixelRatio(t),s=er(i.getTileSize(e),this.tmpSize);return o==1?s:I9(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){let r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=Az(i,e,r)),sz(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}},xy=class extends jr{constructor(e,t){super(e),this.tile=t}},PS=RL;var zd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var ML=class n extends PS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===n.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){let t=e.target,r=ct(t),i=t.getState(),o;i==Je.LOADING?(this.tileLoadingKeys_[r]=!0,o=zd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==Je.ERROR?zd.TILELOADERROR:i==Je.LOADED?zd.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new xy(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){let t=RS(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;let t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(MS(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}},LS=ML;var NL=class extends LS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:PL,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:kd,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!qr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){let t=this.getProjection();if(this.tileGrid&&(!t||qr(t,e)))return this.tileGrid;let r=ct(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Gd(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,o,s){let a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,o),c=l?this.tileUrlFunction(l,i,o):void 0,f=new this.tileClass(a,c!==void 0?Je.IDLE:Je.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(gt.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,o,s){let a=this.getProjection();if(!a||!o||qr(a,o))return this.getTileInternal(e,t,r,i,a||o);let l=[e,t,r],c=this.getKey(),f=this.getTileGridForProjection(a),d=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(l,o),p=new cy(a,f,o,d,l,y,this.getTilePixelRatio(i),this.getGutter(),(_,x,b,S)=>this.getTileInternal(_,x,b,S,a,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=c,p}getTileInternal(e,t,r,i,o,s){let a=this.getKey(),l=Od(this,a,e,t,r);if(s&&s.containsKey(l))return s.get(l);let c=this.createTile_(e,t,r,i,o,a);return s?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){let r=sn(e);if(r){let i=ct(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}};function PL(n,e){if(Bi){let t=n.getCrossOrigin(),r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{let s=n.getImage();s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0),o.close?.(),s.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}var Vd=NL;var LL=class extends Vd{constructor(e){e=e||{};let t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:ec({extent:Rl(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}},Hc=LL;var OL='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',kL=class extends Hc{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[OL];let r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(o,s)=>{let a=o.getImage();!Bi&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||PL)(o,s)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}},Nz=kL;var FL=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Zr,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?sn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=sn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return It()}readFeature(e,t){return It()}readFeatures(e,t){return It()}readGeometry(e,t){return It()}readProjection(e){return It()}writeFeature(e,t){return It()}writeFeatures(e,t){return It()}writeGeometry(e,t){return It()}},Hd=FL;function Yo(n,e,t){let r=t?sn(t.featureProjection):null,i=t?sn(t.dataProjection):null,o=n;if(r&&i&&!qr(r,i)){e&&(o=n.clone());let s=e?r:i,a=e?i:r;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(Ih(s,a))}if(e&&t&&t.decimals!==void 0){let s=Math.pow(10,t.decimals),a=function(l){for(let c=0,f=l.length;c<f;++c)l[c]=Math.round(l[c]*s)/s;return l};o===n&&(o=n.clone()),o.applyTransform(a)}return o}var Zle={Point:Ui,LineString:ho,Polygon:Wo,MultiPoint:Dl,MultiLineString:Qs,MultiPolygon:Al};function Kle(n,e,t){return Array.isArray(e[0])?(Ub(n,0,e,t)||(n=n.slice(),w1(n,0,e,t)),n):(x1(n,0,e,t)||(n=n.slice(),H0(n,0,e,t)),n)}function BL(n,e){let t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>BL(tn(dt({},n),{geometry:o}))).flat();let r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);let i=t.layout.length;return Yo(new Za(r,r==="Polygon"?Kle(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function kS(n,e){if(!n)return null;if(Array.isArray(n)){let r=n.map(i=>kS(i,e));return new Ds(r)}let t=Zle[n.type];return Yo(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}var jL=class extends Hd{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(OS(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(OS(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return It()}readFeaturesFromObject(e,t){return It()}readGeometry(e,t){return this.readGeometryFromObject(OS(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return It()}readProjection(e){return this.readProjectionFromObject(OS(e))}readProjectionFromObject(e){return It()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return It()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return It()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return It()}};function OS(n){if(typeof n=="string"){let e=JSON.parse(n);return e||null}return n!==null?n:null}var Pz=jL;var UL=class extends Pz{constructor(e){e=e||{},super(),this.dataProjection=sn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=sn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};let i=zL(r.geometry,t);if(this.featureClass===Za)return BL({geometry:i,id:r.id,properties:r.properties},t);let o=new Zr;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(kS(i,t)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(e,t){let r=e,i=null;if(r.type==="FeatureCollection"){let o=e;i=[];let s=o.features;for(let a=0,l=s.length;a<l;++a){let c=this.readFeatureFromObject(s[a],t);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return Jle(e,t)}readProjectionFromObject(e){let t=e.crs,r;if(t)if(t.type=="name")r=sn(t.properties.name);else if(t.type==="EPSG")r=sn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);let r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;let o=e.getProperties(),s=e.getGeometry();return s&&(r.geometry=GL(s,t),delete o[e.getGeometryName()]),ya(o)||(r.properties=o),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);let r=[];for(let i=0,o=e.length;i<o;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return GL(e,this.adaptOptions(t))}};function zL(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=eue(n);break}case"LineString":{t=tue(n);break}case"Polygon":{t=oue(n);break}case"MultiPoint":{t=rue(n);break}case"MultiLineString":{t=nue(n);break}case"MultiPolygon":{t=iue(n);break}case"GeometryCollection":{t=Qle(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function Jle(n,e){let t=zL(n,e);return kS(t,e)}function Qle(n,e){return n.geometries.map(function(r){return zL(r,e)})}function eue(n){let e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:wd(e.length)}}function tue(n){let e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:wd(e[0]?.length||2)}}function nue(n){let e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=Ed(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:wd(t)}}function rue(n){let e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:wd(e[0]?.length||2)}}function iue(n){let e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=Ob(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:wd(r)}}function oue(n){let e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=Ed(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:wd(r)}}function GL(n,e){n=Yo(n,!0,e);let t=n.getType(),r;switch(t){case"Point":{r=hue(n,e);break}case"LineString":{r=aue(n,e);break}case"Polygon":{r=fue(n,e);break}case"MultiPoint":{r=uue(n,e);break}case"MultiLineString":{r=lue(n,e);break}case"MultiPolygon":{r=cue(n,e);break}case"GeometryCollection":{r=sue(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function sue(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return GL(r,e)})}}function aue(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function lue(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function uue(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function cue(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function hue(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function fue(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var fo=UL;var wy="http://www.w3.org/2001/XMLSchema-instance";function pf(n,e){return Ag().createElementNS(n,e)}function Ml(n,e){return Lz(n,e,[]).join("")}function Lz(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e?t.push(String(n.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)Lz(r,e,t)}return t}function Ka(n){return"documentElement"in n}function Ja(n){return new DOMParser().parseFromString(n,"application/xml")}function qL(n,e){return(function(t,r){let i=n.call(e??this,t,r);if(i!==void 0){let o=r[r.length-1];Nn(o,i)}})}function As(n,e){return(function(t,r){let i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function FS(n,e){return(function(t,r){let i=n.call(e??this,t,r);i!==void 0&&(r[r.length-1]=i)})}function ta(n,e,t){return(function(r,i){let o=n.call(t??this,r,i);if(o!==void 0){let s=i[i.length-1],a=e!==void 0?e:r.localName,l;a in s?l=s[a]:(l=[],s[a]=l),l.push(o)}})}function Oe(n,e,t){return(function(r,i){let o=n.call(t??this,r,i);if(o!==void 0){let s=i[i.length-1],a=e!==void 0?e:r.localName;s[a]=o}})}function ht(n,e){return(function(t,r,i){n.call(e??this,t,r,i),i[i.length-1].node.appendChild(t)})}function WL(n,e){let t,r;return function(i,o,s){if(t===void 0){t={};let a={};a[i.localName]=n,t[i.namespaceURI]=a,r=Nl(i.localName)}kz(t,r,o,s)}}function Nl(n,e){return(function(t,r,i){let s=r[r.length-1].node,a=n;a===void 0&&(a=i);let l=e!==void 0?e:s.namespaceURI;return pf(l,a)})}var ss=Nl();function na(n,e){let t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function rt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function qc(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){let o=n[i.namespaceURI];if(o!==void 0){let s=o[i.localName];s!==void 0&&s.call(r,i,t)}}}function Nt(n,e,t,r,i){return r.push(n),qc(e,t,r,i),r.pop()}function kz(n,e,t,r,i,o){let s=(i!==void 0?i:t).length,a,l;for(let c=0;c<s;++c)a=t[c],a!==void 0&&(l=e.call(o,a,r,i!==void 0?i[c]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(o,l,a,r))}function Kr(n,e,t,r,i,o,s){return i.push(n),kz(e,t,r,i,o,s),i.pop()}var VL;function Oz(){return VL===void 0&&typeof XMLSerializer<"u"&&(VL=new XMLSerializer),VL}var HL;function Ag(){return HL===void 0&&typeof document<"u"&&(HL=document.implementation.createDocument("","",null)),HL}var $L=class extends Hd{constructor(){super(),this.xmlSerializer_=Oz()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){let r=Ja(e);return this.readFeatureFromDocument(r,t)}return Ka(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){let r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){let r=Ja(e);return this.readFeaturesFromDocument(r,t)}return Ka(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){let r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Nn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return It()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){let r=Ja(e);return this.readGeometryFromDocument(r,t)}return Ka(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){let t=Ja(e);return this.readProjectionFromDocument(t)}return Ka(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){let r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){let r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){let r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}},BS=$L;function gf(n){let e=Ml(n,!1);return due(e)}function due(n){let e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function K1(n){let e=Ml(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function cr(n){let e=Ml(n,!1);return pue(e)}function pue(n){let e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function Sa(n){let e=Ml(n,!1);return gue(e)}function gue(n){let e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function bt(n){return Ml(n,!1).trim()}function Rg(n,e){xr(n,e?"1":"0")}function mue(n,e){n.appendChild(Ag().createCDATASection(e))}function Fz(n,e){let t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+Cm(t.getUTCMonth()+1,2)+"-"+Cm(t.getUTCDate(),2)+"T"+Cm(t.getUTCHours(),2)+":"+Cm(t.getUTCMinutes(),2)+":"+Cm(t.getUTCSeconds(),2)+"Z";n.appendChild(Ag().createTextNode(r))}function ra(n,e){let t=e.toPrecision();n.appendChild(Ag().createTextNode(t))}function J1(n,e){let t=e.toString();n.appendChild(Ag().createTextNode(t))}var yue=/^\s/,_ue=/\s$/,vue=/(\n|\t|\r|<|&| {2})/;function xr(n,e){typeof e=="string"&&(yue.test(e)||_ue.test(e)||vue.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),mue(n,t)}):n.appendChild(Ag().createTextNode(e))}var mf=["http://www.google.com/kml/ext/2.2"],Gt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],xue="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Bz={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},wue=rt(Gt,{ExtendedData:iV,Region:oV,MultiGeometry:Oe(tV,"geometry"),LineString:Oe(Qz,"geometry"),LinearRing:Oe(eV,"geometry"),Point:Oe(nV,"geometry"),Polygon:Oe(rV,"geometry"),Style:Oe(ik),StyleMap:rce,address:Oe(bt),description:Oe(bt),name:Oe(bt),open:Oe(gf),phoneNumber:Oe(bt),styleUrl:Oe(Yz),visibility:Oe(gf)},rt(mf,{MultiTrack:Oe(Hue,"geometry"),Track:Oe(Jz,"geometry")})),Eue=rt(Gt,{ExtendedData:iV,Region:oV,Link:gce,address:Oe(bt),description:Oe(bt),name:Oe(bt),open:Oe(gf),phoneNumber:Oe(bt),visibility:Oe(gf)}),bue=rt(Gt,{href:Oe($z)}),Sue=rt(Gt,{Altitude:Oe(cr),Longitude:Oe(cr),Latitude:Oe(cr),Tilt:Oe(cr),AltitudeMode:Oe(bt),Heading:Oe(cr),Roll:Oe(cr)}),Hz=rt(Gt,{LatLonAltBox:lce,Lod:cce}),Cue=rt(Gt,["Document","Placemark"]),Iue=rt(Gt,{Document:ht(bce),Placemark:ht(lV)}),Ey,US=null;var ZL,Q1,ex,tx,zS,KL=null;var nk,JL=null;var QL,Mg=null;var jz=null;var ek=null;function VS(n){return 32/Math.min(n[0],n[1])}function Tue(){Ey=[255,255,255,1],US=new Er({color:Ey}),ZL=[20,2],Q1="pixels",ex="pixels",tx=[64,64],zS="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",KL=new Md({anchor:ZL,anchorOrigin:"bottom-left",anchorXUnits:Q1,anchorYUnits:ex,crossOrigin:"anonymous",rotation:0,scale:VS(tx),size:tx,src:zS}),nk="NO_IMAGE",JL=new ci({color:Ey,width:1}),QL=new ci({color:[51,51,51,1],width:2}),Mg=new Pd({font:"bold 16px Helvetica",fill:US,stroke:QL,scale:.8}),jz=new Xr({fill:US,image:KL,text:Mg,stroke:JL,zIndex:0}),ek=[jz]}var jS;function Due(n){return n}var tk=class extends BS{constructor(e){super(),e=e||{},ek||Tue(),this.dataProjection=sn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:ek,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Due,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){let r=rt(Gt,{Document:qL(this.readDocumentOrFolder_,this),Folder:qL(this.readDocumentOrFolder_,this),Placemark:As(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=Nt([],r,e,t,this);if(i)return i}readPlacemark_(e,t){let r=Nt({geometry:null},wue,e,t,this);if(!r)return;let i=new Zr,o=e.getAttribute("id");o!==null&&i.setId(o);let s=t[0],a=r.geometry;if(a&&Yo(a,!1,s),i.setGeometry(a),delete r.geometry,this.extractStyles_){let l=r.Style,c=r.styleUrl,f=Rue(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){let r=e.getAttribute("id");if(r!==null){let i=ik.call(this,e,t);if(i){let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=i}}}readSharedStyleMap_(e,t){let r=e.getAttribute("id");if(r===null)return;let i=Zz.call(this,e,t);if(!i)return;let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=i}readFeatureFromNode(e,t){if(!Gt.includes(e.namespaceURI))return null;let r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!Gt.includes(e.namespaceURI))return[];let r,i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){let o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return o?[o]:[]}if(i=="kml"){r=[];for(let o=e.firstElementChild;o;o=o.nextElementSibling){let s=this.readFeaturesFromNode(o,t);s&&Nn(r,s)}return r}return[]}readName(e){if(e){if(typeof e=="string"){let t=Ja(e);return this.readNameFromDocument(t)}return Ka(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){let r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Gt.includes(t.namespaceURI)&&t.localName=="name")return bt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){let r=t.localName;if(Gt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){let i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){let t=[];if(typeof e=="string"){let r=Ja(e);Nn(t,this.readNetworkLinksFromDocument(r))}else Ka(e)?Nn(t,this.readNetworkLinksFromDocument(e)):Nn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Nn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Gt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){let i=Nt({},Eue,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;Gt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Nn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){let t=[];if(typeof e=="string"){let r=Ja(e);Nn(t,this.readRegionFromDocument(r))}else Ka(e)?Nn(t,this.readRegionFromDocument(e)):Nn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Nn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Gt.includes(r.namespaceURI)&&r.localName=="Region"){let i=Nt({},Hz,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;Gt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&Nn(t,this.readRegionFromNode(r))}return t}readCamera(e){let t=[];if(typeof e=="string"){let r=Ja(e);Nn(t,this.readCameraFromDocument(r))}else Ka(e)?Nn(t,this.readCameraFromDocument(e)):Nn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&Nn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Gt.includes(r.namespaceURI)&&r.localName==="Camera"){let i=Nt({},Sue,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;Gt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&Nn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);let r=pf(Gt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",mf[0]),r.setAttributeNS(i,"xmlns:xsi",wy),r.setAttributeNS(wy,"xsi:schemaLocation",xue);let o={node:r},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);let a=Cue[r.namespaceURI],l=na(s,a);return Kr(o,Iue,ss,l,[t],a,this),r}};function Aue(n,e){let t=[0,0],r="start",i=n.getImage();if(i){let a=i.getSize();if(a&&a.length==2){let l=i.getScaleArray(),c=i.getAnchor();t[0]=l[0]*(a[0]-c[0]),t[1]=l[1]*(a[1]/2-c[1]),r="left"}}let o=n.getText();return o?(o=o.clone(),o.setFont(o.getFont()||Mg.getFont()),o.setScale(o.getScale()||Mg.getScale()),o.setFill(o.getFill()||Mg.getFill()),o.setStroke(o.getStroke()||QL)):o=Mg.clone(),o.setText(e),o.setOffsetX(t[0]),o.setOffsetY(t[1]),o.setTextAlign(r),new Xr({image:i,text:o})}function Rue(n,e,t,r,i){return(function(o,s){let a=i,l="",c=[];if(a){let d=o.getGeometry();if(d)if(d instanceof Ds)c=d.getGeometriesArrayRecursive().filter(function(y){let p=y.getType();return p==="Point"||p==="MultiPoint"}),a=c.length>0;else{let y=d.getType();a=y==="Point"||y==="MultiPoint"}}a&&(l=o.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(jS||(jS=document.createElement("textarea")),jS.innerHTML=l,l=jS.value));let f=t;if(n?f=n:e&&(f=qz(e,t,r)),a){let d=Aue(f[0],l);if(c.length>0){d.setGeometry(new Ds(c));let y=new Xr({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[d,y].concat(f.slice(1))}return d}return f})}function qz(n,e,t){return Array.isArray(n)?n:typeof n=="string"?qz(t[n],e,t):e}function HS(n){let e=Ml(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){let r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function Wz(n){let e=Ml(n,!1),t=[];e=e.replace(/\s*,\s*/g,",");let r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i,i;for(;i=r.exec(e);){let o=parseFloat(i[1]),s=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;t.push(o,s,a),e=e.substr(i[0].length)}if(e==="")return t}function $z(n){let e=Ml(n,!1).trim(),t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Yz(n){let e=Ml(n,!1).trim().replace(/^(?!.*#)/,"#"),t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Mue(n){let e=n.getAttribute("xunits"),t=n.getAttribute("yunits"),r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:Bz[e],y:parseFloat(n.getAttribute("y")),yunits:Bz[t],origin:r}}function Xz(n){return cr(n)}var Nue=rt(Gt,{Pair:nce});function Zz(n,e){return Nt(void 0,Nue,n,e,this)}var Pue=rt(Gt,{Icon:Oe($ue),color:Oe(HS),heading:Oe(cr),hotSpot:Oe(Mue),scale:Oe(Xz)});function Lue(n,e){let t=Nt({},Pue,n,e);if(!t)return;let r=e[e.length-1],i="Icon"in t?t.Icon:{},o=!("Icon"in t)||Object.keys(i).length>0,s,a=i.href;a?s=a:o&&(s=zS);let l,c,f,d="bottom-left",y=t.hotSpot;y?(l=[y.x,y.y],c=y.xunits,f=y.yunits,d=y.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(l=ZL,c=Q1,f=ex):s.includes("arrow-reverse")?(l=[54,42],c=Q1,f=ex):s.includes("paddle")&&(l=[32,1],c=Q1,f=ex));let p,_=i.x,x=i.y;_!==void 0&&x!==void 0&&(p=[_,x]);let b,S=i.w,T=i.h;S!==void 0&&T!==void 0&&(b=[S,T]);let A,N=t.heading;N!==void 0&&(A=Ow(N));let k=t.scale,W=t.color;if(o){s==zS&&(b=tx);let X=new Md({anchor:l,anchorOrigin:d,anchorXUnits:c,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:A,scale:k,size:b,src:this.iconUrlFunction_(s),color:W}),Y=X.getScaleArray()[0],$=X.getSize();if($===null){let V=X.getImageState();if(V===Et.IDLE||V===Et.LOADING){let B=function(){let v=X.getImageState();if(!(v===Et.IDLE||v===Et.LOADING)){let I=X.getSize();if(I&&I.length==2){let M=VS(I);X.setScale(Y*M)}X.unlistenImageChange(B)}};X.listenImageChange(B),V===Et.IDLE&&X.load()}}else if($.length==2){let V=VS($);X.setScale(Y*V)}r.imageStyle=X}else r.imageStyle=nk}var kue=rt(Gt,{color:Oe(HS),scale:Oe(Xz)});function Oue(n,e){let t=Nt({},kue,n,e);if(!t)return;let r=e[e.length-1],i=new Pd({fill:new Er({color:"color"in t?t.color:Ey}),scale:t.scale});r.textStyle=i}var Fue=rt(Gt,{color:Oe(HS),width:Oe(cr)});function Bue(n,e){let t=Nt({},Fue,n,e);if(!t)return;let r=e[e.length-1],i=new ci({color:"color"in t?t.color:Ey,width:"width"in t?t.width:1});r.strokeStyle=i}var jue=rt(Gt,{color:Oe(HS),fill:Oe(gf),outline:Oe(gf)});function Uue(n,e){let t=Nt({},jue,n,e);if(!t)return;let r=e[e.length-1],i=new Er({color:"color"in t?t.color:Ey});r.fillStyle=i;let o=t.fill;o!==void 0&&(r.fill=o);let s=t.outline;s!==void 0&&(r.outline=s)}var Gue=rt(Gt,{coordinates:FS(Wz)});function Kz(n,e){return Nt(null,Gue,n,e)}function zue(n,e){let r=e[e.length-1].coordinates,i=Ml(n,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(s){let a=parseFloat(s[1]),l=parseFloat(s[2]),c=parseFloat(s[3]);r.push([a,l,c])}else r.push([])}var Vue=rt(mf,{Track:As(Jz)});function Hue(n,e){let t=Nt([],Vue,n,e);if(t)return new Qs(t)}var que=rt(Gt,{when:mce},rt(mf,{coord:zue}));function Jz(n,e){let t=Nt({coordinates:[],whens:[]},que,n,e);if(!t)return;let r=[],i=t.coordinates,o=t.whens;for(let s=0,a=Math.min(i.length,o.length);s<a;++s)i[s].length==3&&r.push(i[s][0],i[s][1],i[s][2],o[s]);return new ho(r,"XYZM")}var Wue=rt(Gt,{href:Oe($z)},rt(mf,{x:Oe(cr),y:Oe(cr),w:Oe(cr),h:Oe(cr)}));function $ue(n,e){let t=Nt({},Wue,n,e);return t||null}var Yue=rt(Gt,{coordinates:FS(Wz)});function rk(n,e){return Nt(null,Yue,n,e)}var qS=rt(Gt,{extrude:Oe(gf),tessellate:Oe(gf),altitudeMode:Oe(bt)});function Qz(n,e){let t=Nt({},qS,n,e),r=rk(n,e);if(r){let i=new ho(r,"XYZ");return i.setProperties(t,!0),i}}function eV(n,e){let t=Nt({},qS,n,e),r=rk(n,e);if(r){let i=new Wo(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}var Xue=rt(Gt,{LineString:As(Qz),LinearRing:As(eV),MultiGeometry:As(tV),Point:As(nV),Polygon:As(rV)});function tV(n,e){let t=Nt([],Xue,n,e);if(!t)return null;if(t.length===0)return new Ds(t);let r,i=!0,o=t[0].getType(),s;for(let a=1,l=t.length;a<l;++a)if(s=t[a],s.getType()!=o){i=!1;break}if(i){let a,l;if(o=="Point"){let c=t[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let f=1,d=t.length;f<d;++f)s=t[f],Nn(l,s.getFlatCoordinates());r=new Dl(l,a),YL(r,t)}else if(o=="LineString")r=new Qs(t),YL(r,t);else if(o=="Polygon")r=new Al(t),YL(r,t);else if(o=="GeometryCollection"||o.startsWith("Multi"))r=new Ds(t);else throw new Error("Unknown geometry type found")}else r=new Ds(t);return r}function nV(n,e){let t=Nt({},qS,n,e),r=rk(n,e);if(r){let i=new Ui(r,"XYZ");return i.setProperties(t,!0),i}}var Zue=rt(Gt,{innerBoundaryIs:fce,outerBoundaryIs:pce});function rV(n,e){let t=Nt({},qS,n,e),r=Nt([null],Zue,n,e);if(r&&r[0]){let i=r[0],o=[i.length];for(let a=1,l=r.length;a<l;++a)Nn(i,r[a]),o.push(i.length);let s=new Wo(i,"XYZ",o);return s.setProperties(t,!0),s}}var Kue=rt(Gt,{IconStyle:Lue,LabelStyle:Oue,LineStyle:Bue,PolyStyle:Uue});function ik(n,e){let t=Nt({},Kue,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:US,i=t.fill;i!==void 0&&!i&&(r=null);let o;"imageStyle"in t?t.imageStyle!=nk&&(o=t.imageStyle):o=KL;let s="textStyle"in t?t.textStyle:Mg,a="strokeStyle"in t?t.strokeStyle:JL,l=t.outline;return l!==void 0&&!l?[new Xr({geometry:function(c){let f=c.getGeometry(),d=f.getType();if(d==="GeometryCollection"){let y=f;return new Ds(y.getGeometriesArrayRecursive().filter(function(p){let _=p.getType();return _!=="Polygon"&&_!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return f},fill:r,image:o,stroke:a,text:s,zIndex:void 0}),new Xr({geometry:function(c){let f=c.getGeometry(),d=f.getType();if(d==="GeometryCollection"){let y=f;return new Ds(y.getGeometriesArrayRecursive().filter(function(p){let _=p.getType();return _==="Polygon"||_==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return f},fill:r,stroke:null,zIndex:void 0})]:[new Xr({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]}function YL(n,e){let t=e.length,r=new Array(e.length),i=new Array(e.length),o=new Array(e.length),s,a,l;s=!1,a=!1,l=!1;for(let c=0;c<t;++c){let f=e[c];r[c]=f.get("extrude"),i[c]=f.get("tessellate"),o[c]=f.get("altitudeMode"),s=s||r[c]!==void 0,a=a||i[c]!==void 0,l=l||o[c]}s&&n.set("extrude",r),a&&n.set("tessellate",i),l&&n.set("altitudeMode",o)}var Jue=rt(Gt,{displayName:Oe(bt),value:Oe(bt)});function Que(n,e){let t=n.getAttribute("name");qc(Jue,n,e);let r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}var ece=rt(Gt,{Data:Que,SchemaData:oce});function iV(n,e){qc(ece,n,e)}function oV(n,e){qc(Hz,n,e)}var tce=rt(Gt,{Style:Oe(ik),key:Oe(bt),styleUrl:Oe(Yz)});function nce(n,e){let t=Nt({},tce,n,e,this);if(!t)return;let r=t.key;if(r&&r=="normal"){let i=t.styleUrl;i&&(e[e.length-1]=i);let o=t.Style;o&&(e[e.length-1]=o)}}function rce(n,e){let t=Zz.call(this,n,e);if(!t)return;let r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}var ice=rt(Gt,{SimpleData:sce});function oce(n,e){qc(ice,n,e)}function sce(n,e){let t=n.getAttribute("name");if(t!==null){let r=bt(n),i=e[e.length-1];i[t]=r}}var ace=rt(Gt,{altitudeMode:Oe(bt),minAltitude:Oe(cr),maxAltitude:Oe(cr),north:Oe(cr),south:Oe(cr),east:Oe(cr),west:Oe(cr)});function lce(n,e){let t=Nt({},ace,n,e);if(!t)return;let r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}var uce=rt(Gt,{minLodPixels:Oe(cr),maxLodPixels:Oe(cr),minFadeExtent:Oe(cr),maxFadeExtent:Oe(cr)});function cce(n,e){let t=Nt({},uce,n,e);if(!t)return;let r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}var hce=rt(Gt,{LinearRing:As(Kz)});function fce(n,e){let t=Nt([],hce,n,e);t.length>0&&e[e.length-1].push(...t)}var dce=rt(Gt,{LinearRing:FS(Kz)});function pce(n,e){let t=Nt(void 0,dce,n,e);if(t){let r=e[e.length-1];r[0]=t}}function gce(n,e){qc(bue,n,e)}function mce(n,e){let r=e[e.length-1].whens,i=Ml(n,!1),o=Date.parse(i);r.push(isNaN(o)?0:o)}function WS(n,e){let t=Ks(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let o=0;o<4;++o){let s=Math.floor(i[o]).toString(16);i[o]=s.length==1?"0"+s:s}xr(n,i.join(""))}function yce(n,e,t){let r=t[t.length-1],i=r.layout,o=r.stride,s;if(i=="XY"||i=="XYM")s=2;else if(i=="XYZ"||i=="XYZM")s=3;else throw new Error("Invalid geometry layout");let a=e.length,l="";if(a>0){l+=e[0];for(let c=1;c<s;++c)l+=","+e[c];for(let c=o;c<a;c+=o){l+=" "+e[c];for(let f=1;f<s;++f)l+=","+e[c+f]}}xr(n,l)}var GS=rt(Gt,{Data:ht(_ce),value:ht(xce),displayName:ht(vce)});function _ce(n,e,t){n.setAttribute("name",e.name);let r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Kr(r,GS,ss,[i.displayName],t,["displayName"]),i!==null&&i.value&&Kr(r,GS,ss,[i.value],t,["value"])):Kr(r,GS,ss,[i],t,["value"])}function vce(n,e){xr(n,e)}function xce(n,e){xr(n,e)}var wce=rt(Gt,{Placemark:ht(lV)}),Ece=function(n,e,t){let r=e[e.length-1].node;return pf(r.namespaceURI,"Placemark")};function bce(n,e,t){Kr({node:n},wce,Ece,e,t,void 0,this)}var Sce=Nl("Data");function Cce(n,e,t){let r={node:n},i=e.names,o=e.values,s=i.length;for(let a=0;a<s;a++)Kr(r,GS,Sce,[{name:i[a],value:o[a]}],t)}var Uz=rt(Gt,["href"],rt(mf,["x","y","w","h"])),Gz=rt(Gt,{href:ht(xr)},rt(mf,{x:ht(ra),y:ht(ra),w:ht(ra),h:ht(ra)})),Ice=function(n,e,t){return pf(mf[0],"gx:"+t)};function Tce(n,e,t){let r={node:n},i=t[t.length-1].node,o=Uz[i.namespaceURI],s=na(e,o);Kr(r,Gz,ss,s,t,o),o=Uz[mf[0]],s=na(e,o),Kr(r,Gz,Ice,s,t,o)}var Dce=rt(Gt,["scale","heading","Icon","color","hotSpot"]),Ace=rt(Gt,{Icon:ht(Tce),color:ht(WS),heading:ht(ra),hotSpot:ht(nhe),scale:ht(cV)});function Rce(n,e,t){let r={node:n},i={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];let b=e.getAnchor(),S=e.getOrigin();if(S&&a&&S[0]!==0&&S[1]!==s[1]&&(l.x=S[0],l.y=a[1]-(S[1]+s[1])),b&&(b[0]!==s[0]/2||b[1]!==s[1]/2)){let T={x:b[0],xunits:"pixels",y:s[1]-b[1],yunits:"pixels"};i.hotSpot=T}}i.Icon=l;let c=e.getScaleArray()[0],f=s;if(f===null&&(f=tx),f.length==2){let b=VS(f);c=c/b}c!==1&&(i.scale=c);let d=e.getRotation();d!==0&&(i.heading=d);let y=e.getColor();y&&(i.color=y);let p=t[t.length-1].node,_=Dce[p.namespaceURI],x=na(i,_);Kr(r,Ace,ss,x,t,_)}var Mce=rt(Gt,["color","scale"]),Nce=rt(Gt,{color:ht(WS),scale:ht(cV)});function Pce(n,e,t){let r={node:n},i={},o=e.getFill();o&&(i.color=o.getColor());let s=e.getScale();s&&s!==1&&(i.scale=s);let a=t[t.length-1].node,l=Mce[a.namespaceURI],c=na(i,l);Kr(r,Nce,ss,c,t,l)}var Lce=rt(Gt,["color","width"]),kce=rt(Gt,{color:ht(WS),width:ht(ra)});function Oce(n,e,t){let r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},o=t[t.length-1].node,s=Lce[o.namespaceURI],a=na(i,s);Kr(r,kce,ss,a,t,s)}var Fce={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},sV=function(n,e,t){if(n){let r=e[e.length-1].node;return pf(r.namespaceURI,Fce[n.getType()])}},Bce=Nl("Point"),jce=Nl("LineString"),Uce=Nl("LinearRing"),Gce=Nl("Polygon"),zce=rt(Gt,{LineString:ht(by),Point:ht(by),Polygon:ht(uV),GeometryCollection:ht(aV)});function aV(n,e,t){let r={node:n},i=e.getType(),o=[],s;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){let l=a.getType();if(l==="MultiPoint")o=o.concat(a.getPoints());else if(l==="MultiLineString")o=o.concat(a.getLineStrings());else if(l==="MultiPolygon")o=o.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")o.push(a);else throw new Error("Unknown geometry type")}),s=sV;else if(i==="MultiPoint")o=e.getPoints(),s=Bce;else if(i==="MultiLineString")o=e.getLineStrings(),s=jce;else if(i==="MultiPolygon")o=e.getPolygons(),s=Gce;else throw new Error("Unknown geometry type");Kr(r,zce,s,o,t)}var Vce=rt(Gt,{LinearRing:ht(by)});function zz(n,e,t){Kr({node:n},Vce,Uce,[e],t)}var XL=rt(Gt,{ExtendedData:ht(Cce),MultiGeometry:ht(aV),LineString:ht(by),LinearRing:ht(by),Point:ht(by),Polygon:ht(uV),Style:ht(the),address:ht(xr),description:ht(xr),name:ht(xr),open:ht(Rg),phoneNumber:ht(xr),styleUrl:ht(xr),visibility:ht(Rg)}),Hce=rt(Gt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),qce=Nl("ExtendedData");function lV(n,e,t){let r={node:n};e.getId()&&n.setAttribute("id",e.getId());let i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;let s=Object.keys(i||{}).sort().filter(function(p){return!o[p]}),a=e.getStyleFunction();if(a){let p=a(e,0);if(p){let _=Array.isArray(p)?p:[p],x=_;if(e.getGeometry()&&(x=_.filter(function(b){let S=b.getGeometryFunction()(e);if(S){let T=S.getType();return T==="GeometryCollection"?S.getGeometriesArrayRecursive().filter(function(A){let N=A.getType();return N==="Point"||N==="MultiPoint"}).length:T==="Point"||T==="MultiPoint"}})),this.writeStyles_){let b=_,S=_;e.getGeometry()&&(b=_.filter(function(T){let A=T.getGeometryFunction()(e);if(A){let N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(k){let W=k.getType();return W==="LineString"||W==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),S=_.filter(function(T){let A=T.getGeometryFunction()(e);if(A){let N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(k){let W=k.getType();return W==="Polygon"||W==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:x,lineStyles:b,polyStyles:S}}if(x.length&&i.name===void 0){let b=x[0].getText();b&&(i.name=b.getText())}}}let l=t[t.length-1].node,c=Hce[l.namespaceURI],f=na(i,c);if(Kr(r,XL,ss,f,t,c),s.length>0){let p=na(i,s);Kr(r,XL,qce,[{names:s,values:p}],t)}let d=t[0],y=e.getGeometry();y&&(y=Yo(y,!0,d)),Kr(r,XL,sV,[y],t)}var Wce=rt(Gt,["extrude","tessellate","altitudeMode","coordinates"]),$ce=rt(Gt,{extrude:ht(Rg),tessellate:ht(Rg),altitudeMode:ht(xr),coordinates:ht(yce)});function by(n,e,t){let r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();let o=e.getProperties();o.coordinates=r;let s=t[t.length-1].node,a=Wce[s.namespaceURI],l=na(o,a);Kr(i,$ce,ss,l,t,a)}var Yce=rt(Gt,["color","fill","outline"]),Vz=rt(Gt,{outerBoundaryIs:ht(zz),innerBoundaryIs:ht(zz)}),Xce=Nl("innerBoundaryIs"),Zce=Nl("outerBoundaryIs");function uV(n,e,t){let r=e.getLinearRings(),i=r.shift(),o={node:n};Kr(o,Vz,Xce,r,t),Kr(o,Vz,Zce,[i],t)}var Kce=rt(Gt,{color:ht(WS),fill:ht(Rg),outline:ht(Rg)});function Jce(n,e,t){let r={node:n},i=e.getFill(),o=e.getStroke(),s={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:o?void 0:!1},a=t[t.length-1].node,l=Yce[a.namespaceURI],c=na(s,l);Kr(r,Kce,ss,c,t,l)}function cV(n,e){ra(n,Math.round(e*1e6)/1e6)}var Qce=rt(Gt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ehe=rt(Gt,{IconStyle:ht(Rce),LabelStyle:ht(Pce),LineStyle:ht(Oce),PolyStyle:ht(Jce)});function the(n,e,t){let r={node:n},i={};if(e.pointStyles.length){let l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);let c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){let l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){let l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}let o=t[t.length-1].node,s=Qce[o.namespaceURI],a=na(i,s);Kr(r,ehe,ss,a,t,s)}function nhe(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}var $S=tk;var YS=class{type="kml";import(e){return We(this,null,function*(){let t=yield e.text(),r=new $S({extractStyles:!1}).readFeatures(t);return{geojson:new fo().writeFeaturesObject(r),crs:"EPSG:4326"}})}};function hV(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var tc=1,nc=2,yf=3,fV=4,nx=5,ok=6378137,dV=6356752314e-3,sk=.0066943799901413165,Ng=484813681109536e-20,Ze=Math.PI/2,pV=.16666666666666666,gV=.04722222222222222,mV=.022156084656084655,ot=1e-10,ni=.017453292519943295,Xo=57.29577951308232,fr=Math.PI/4,qd=Math.PI*2,Gi=3.14159265359;var Qa={};Qa.greenwich=0;Qa.lisbon=-9.131906111111;Qa.paris=2.337229166667;Qa.bogota=-74.080916666667;Qa.madrid=-3.687938888889;Qa.rome=12.452333333333;Qa.bern=7.439583333333;Qa.jakarta=106.807719444444;Qa.ferro=-17.666666666667;Qa.brussels=4.367975;Qa.stockholm=18.058277777778;Qa.athens=23.7163375;Qa.oslo=10.722916666667;var yV=Qa;var _V={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var vV=/[\s_\-\/\(\)]/g;function Pl(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(vV,""),i=-1,o,s;++i<t.length;)if(o=t[i],s=o.toLowerCase().replace(vV,""),s===r)return n[o]}function rx(n){var e={},t=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,o,s={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*ni},lat_1:function(a){e.lat1=a*ni},lat_2:function(a){e.lat2=a*ni},lat_ts:function(a){e.lat_ts=a*ni},lon_0:function(a){e.long0=a*ni},lon_1:function(a){e.long1=a*ni},lon_2:function(a){e.long2=a*ni},alpha:function(a){e.alpha=parseFloat(a)*ni},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*ni},lonc:function(a){e.longc=a*ni},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Pl(_V,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*ni},pm:function(a){var l=Pl(yV,a);e.from_greenwich=(l||parseFloat(a))*ni},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in s?(o=s[r],typeof o=="function"?o(i):e[o]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}var ak=class{static getId(e){let t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};let r=e[1],i=parseFloat(e[2])||null,o=e.find(a=>Array.isArray(a)&&a[0]==="ID"),s=o?{authority:o[1],code:parseInt(o[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:s}}static convertAxis(e){let t=e[1]||"Unknown",r,i=t.match(/^\((.)\)$/);if(i){let c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";let o=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),s=o?parseInt(o[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:t,direction:r,unit:l,order:s}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")):null,t.conversion=e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")):null;let r=e.find(p=>Array.isArray(p)&&p[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});let i=e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT");if(i){let p=this.convertUnit(i);t.coordinate_system.unit=p}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];let o=e.find(p=>Array.isArray(p)&&(p[0]==="DATUM"||p[0]==="ENSEMBLE"));if(o){let p=this.convert(o);o[0]==="ENSEMBLE"?t.datum_ensemble=p:t.datum=p;let _=e.find(x=>Array.isArray(x)&&x[0]==="PRIMEM");_&&_[1]!=="Greenwich"&&(p.prime_meridian={name:_[1],longitude:parseFloat(_[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(p=>Array.isArray(p)&&p[0]==="MEMBER").map(p=>({type:"DatumEnsembleMember",name:p[1],id:this.getId(p)}));let s=e.find(p=>Array.isArray(p)&&p[0]==="ENSEMBLEACCURACY");s&&(t.accuracy=parseFloat(s[1]));let a=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID");a&&(t.ellipsoid=this.convert(a)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]);let l=e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT"),t):null;break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,t.parameters=e.filter(p=>Array.isArray(p)&&p[0]==="PARAMETER").map(p=>this.convert(p));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(p=>Array.isArray(p)&&(p[0]==="LENGTHUNIT"||p[0]==="ANGLEUNIT"||p[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";let c=e.find(p=>Array.isArray(p)&&p[0]==="SOURCECRS");if(c){let p=c.find(_=>Array.isArray(_));t.source_crs=p?this.convert(p):null}let f=e.find(p=>Array.isArray(p)&&p[0]==="TARGETCRS");if(f){let p=f.find(_=>Array.isArray(_));t.target_crs=p?this.convert(p):null}let d=e.find(p=>Array.isArray(p)&&p[0]==="ABRIDGEDTRANSFORMATION");d?t.transformation=this.convert(d):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,t.parameters=e.filter(p=>Array.isArray(p)&&(p[0]==="PARAMETER"||p[0]==="PARAMETERFILE")).map(p=>{if(p[0]==="PARAMETER")return this.convert(p);if(p[0]==="PARAMETERFILE")return{name:p[1],value:p[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){let p=t.parameters[6];p.name==="Scale difference"&&(p.value=Math.round((p.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":let y=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(p=>{p.unit||(p.unit=y)}),y.conversion_factor&&y.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:y});break;default:t.keyword=e[0];break}return t}},XS=ak;var lk=class extends XS{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}},xV=lk;var uk=class extends XS{static convert(e,t={}){super.convert(e,t);let r=e.find(o=>Array.isArray(o)&&o[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});let i=e.find(o=>Array.isArray(o)&&o[0]==="USAGE");if(i){let o=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),s=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},o&&(t.usage.scope=o[1]),s&&(t.usage.area=s[1]),a&&(t.usage.bbox=a.slice(1))}return t}},wV=uk;function rhe(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function EV(n){return(rhe(n)==="2019"?wV:xV).convert(n)}function bV(n){let e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var SV=ahe,ix=1,CV=2,IV=3,ZS=4,TV=5,ck=-1,ihe=/\s/,ohe=/[A-Za-z]/,she=/[A-Za-z84_]/,KS=/[,\]]/,DV=/[\d\.E\-\+]/;function _f(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ix}_f.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==ZS)for(;ihe.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case ix:return this.neutral(n);case CV:return this.keyword(n);case ZS:return this.quoted(n);case TV:return this.afterquote(n);case IV:return this.number(n);case ck:return}};_f.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=ZS;return}if(KS.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};_f.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ix;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ix,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ck);return}};_f.prototype.number=function(n){if(DV.test(n)){this.word+=n;return}if(KS.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};_f.prototype.quoted=function(n){if(n==='"'){this.state=TV;return}this.word+=n};_f.prototype.keyword=function(n){if(she.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=ix;return}if(KS.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};_f.prototype.neutral=function(n){if(ohe.test(n)){this.word=n,this.state=CV;return}if(n==='"'){this.word="",this.state=ZS;return}if(DV.test(n)){this.word=n,this.state=IV;return}if(KS.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};_f.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ck)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function ahe(n){var e=new _f(n);return e.output()}function hk(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(o,s){return Pg(s,o),o},r);e&&(n[e]=i)}function Pg(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Pg(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Pg(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Pg(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],hk(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],hk(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Pg(n,e[t]);return hk(e,t,n)}}var lhe=.017453292519943295;function _u(n){return n*lhe}function JS(n){let e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=_u(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=_u(n.lat0>0?90:-90),delete n.lat1)}function AV(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function RV(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function MV(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=RV(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-RV(n.ellipsoid.semi_minor_axis))))}function ox(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(ox(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{let r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,MV(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,MV(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{let o=i.direction;if(o==="east")return"e";if(o==="north")return"n";if(o==="west")return"w";if(o==="south")return"s";throw new Error(`Unknown axis direction: ${o}`)}).join("")+"u",r.unit){let{units:i,to_meter:o}=AV(r.unit);e.units=i,e.to_meter=o}else if(r.axis[0]&&r.axis[0].unit){let{units:i,to_meter:o}=AV(r.axis[0].unit);e.units=i,e.to_meter=o}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{let o=i.name.toLowerCase().replace(/\s+/g,"_"),s=i.value;i.unit&&i.unit.conversion_factor?e[o]=s*i.unit.conversion_factor:i.unit==="degree"?e[o]=s*Math.PI/180:e[o]=s});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":ox(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break;default:break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),JS(e),e)}var uhe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function che(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function NV(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];uhe.indexOf(i)!==-1&&hhe(n[i]),typeof n[i]=="object"&&NV(n[i])}}function hhe(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var o=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?t+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?t+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?t+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var s=n.GEOGCS;n.type==="GEOGCS"&&(s=n),s&&(s.DATUM?n.datumCode=s.DATUM.name.toLowerCase():n.datumCode=s.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(n.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=s.DATUM.SPHEROID.a,n.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(n.datum_params=s.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=_u(n.rectified_grid_angle));function a(f){var d=n.to_meter||1;return f*d}var l=function(f){return che(n,f)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",_u],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",_u],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",_u],["lat0","latitude_of_origin",_u],["lat0","standard_parallel_1",_u],["lat1","standard_parallel_1",_u],["lat2","standard_parallel_2",_u],["azimuth","Azimuth"],["alpha","azimuth",_u],["srsCode","name"]];c.forEach(l),JS(n)}function Sy(n){if(typeof n=="object")return ox(n);let e=bV(n);var t=SV(n);if(e==="WKT2"){let o=EV(t);return ox(o)}var r=t[0],i={};return Pg(t,i),NV(i),i[r]}function el(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?el[n]=rx(arguments[1]):el[n]=Sy(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?el[n]=Sy(arguments[1]):(el[n]=t,t||delete el[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?el.apply(e,r):el(r)});if(typeof n=="string"){if(n in el)return el[n]}else"EPSG"in n?el["EPSG:"+n.EPSG]=n:"ESRI"in n?el["ESRI:"+n.ESRI]=n:"IAU2000"in n?el["IAU2000:"+n.IAU2000]=n:console.log(n);return}}hV(el);var Cy=el;function fhe(n){return typeof n=="string"}function dhe(n){return n in Cy}function phe(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var ghe=["3857","900913","3785","102113"];function mhe(n){var e=Pl(n,"authority");if(e){var t=Pl(e,"epsg");return t&&ghe.indexOf(t)>-1}}function yhe(n){var e=Pl(n,"extension");if(e)return Pl(e,"proj4")}function _he(n){return n[0]==="+"}function vhe(n){if(fhe(n)){if(dhe(n))return Cy[n];if(phe(n)){var e=Sy(n);if(mhe(e))return Cy["EPSG:3857"];var t=yhe(e);return t?rx(t):e}if(_he(n))return rx(n)}else return"projName"in n?n:Sy(n)}var PV=vhe;function fk(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function ia(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function Wc(n){return n<0?-1:1}function st(n,e){return e||Math.abs(n)<=Gi?n:n-Wc(n)*qd}function Ca(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ze-e))/r}function vf(n,e){for(var t=.5*n,r,i,o=Ze-2*Math.atan(e),s=0;s<=15;s++)if(r=n*Math.sin(o),i=Ze-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-o,o+=i,Math.abs(i)<=1e-10)return o;return-9999}function xhe(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ia(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function whe(n){var e=n.x,t=n.y;if(t*Xo>90&&t*Xo<-90&&e*Xo>180&&e*Xo<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ze)<=ot)return null;if(this.sphere)r=this.x0+this.a*this.k0*st(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(fr+.5*t));else{var o=Math.sin(t),s=Ca(this.e,t,o);r=this.x0+this.a*this.k0*st(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(s)}return n.x=r,n.y=i,n}function Ehe(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ze-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var o=Math.exp(-t/(this.a*this.k0));if(i=vf(this.e,o),i===-9999)return null}return r=st(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var bhe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"],LV={init:xhe,forward:whe,inverse:Ehe,names:bhe};function She(){}function kV(n){return n}var dk=["longlat","identity"],OV={init:She,forward:kV,inverse:kV,names:dk};var Che=[LV,OV],Lg={},Iy=[];function FV(n,e){var t=Iy.length;return n.names?(Iy[t]=n,n.names.forEach(function(r){Lg[r.toLowerCase()]=t}),this):(console.log(e),!0)}function pk(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Ihe(n){if(!n)return!1;var e=n.toLowerCase();if(typeof Lg[e]<"u"&&Iy[Lg[e]]||(e=pk(e),e in Lg&&Iy[Lg[e]]))return Iy[Lg[e]]}function The(){Che.forEach(FV)}var BV={start:The,add:FV,get:Ihe};var Dhe={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},gk=Dhe;var Ahe=gk.WGS84;function jV(n,e,t,r){var i=n*n,o=e*e,s=(i-o)/i,a=0;r?(n*=1-s*(pV+s*(gV+s*mV)),i=n*n,s=0):a=Math.sqrt(s);var l=(i-o)/o;return{es:s,e:a,ep2:l}}function UV(n,e,t,r,i){if(!n){var o=Pl(gk,r);o||(o=Ahe),n=o.a,e=o.b,t=o.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<ot)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var eC={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(GV in eC)QS=eC[GV],QS.datumName&&(eC[QS.datumName]=QS);var QS,GV,zV=eC;function Rhe(n,e,t,r,i,o,s){var a={};return n===void 0||n==="none"?a.datum_type=nx:a.datum_type=fV,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=tc),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=nc,a.datum_params[3]*=Ng,a.datum_params[4]*=Ng,a.datum_params[5]*=Ng,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=yf,a.grids=s),a.a=t,a.b=r,a.es=i,a.ep2=o,a}var VV=Rhe;var yk={};function _k(n,e,t){return e instanceof ArrayBuffer?Mhe(n,e,t):{ready:Nhe(n,e)}}function Mhe(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),o=Lhe(i),s=khe(i,o),a=Ohe(i,s,o,r),l={header:s,subgrids:a};return yk[n]=l,l}function Nhe(n,e){return We(this,null,function*(){for(var t=[],r=yield e.getImageCount(),i=r-1;i>=0;i--){var o=yield e.getImage(i),s=yield o.readRasters(),a=s,l=[o.getWidth(),o.getHeight()],c=o.getBoundingBox().map(HV),f=[o.fileDirectory.ModelPixelScale[0],o.fileDirectory.ModelPixelScale[1]].map(HV),d=c[0]+(l[0]-1)*f[0],y=c[3]-(l[1]-1)*f[1],p=a[0],_=a[1],x=[];for(let T=l[1]-1;T>=0;T--)for(let A=l[0]-1;A>=0;A--){var b=T*l[0]+A;x.push([-Wd(_[b]),Wd(p[b])])}t.push({del:f,lim:l,ll:[-d,y],cvs:x})}var S={header:{nSubgrids:r},subgrids:t};return yk[n]=S,S})}function qV(n){if(n===void 0)return null;var e=n.split(",");return e.map(Phe)}function Phe(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:yk[n]||null,isNull:!1}}function HV(n){return n*Math.PI/180}function Wd(n){return n/3600*Math.PI/180}function Lhe(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function khe(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:mk(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function mk(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Ohe(n,e,t,r){for(var i=176,o=[],s=0;s<e.nSubgrids;s++){var a=Bhe(n,i,t),l=jhe(n,i,a,t,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),f=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);o.push({ll:[Wd(a.lowerLongitude),Wd(a.lowerLatitude)],del:[Wd(a.longitudeInterval),Wd(a.latitudeInterval)],lim:[c,f],count:a.gridNodeCount,cvs:Fhe(l)});var d=16;r===!1&&(d=8),i+=176+a.gridNodeCount*d}return o}function Fhe(n){return n.map(function(e){return[Wd(e.longitudeShift),Wd(e.latitudeShift)]})}function Bhe(n,e,t){return{name:mk(n,e+8,e+16).trim(),parent:mk(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function jhe(n,e,t,r,i){var o=e+176,s=16;i===!1&&(s=8);for(var a=[],l=0;l<t.gridNodeCount;l++){var c={latitudeShift:n.getFloat32(o+l*s,r),longitudeShift:n.getFloat32(o+l*s+4,r)};i!==!1&&(c.latitudeAccuracy=n.getFloat32(o+l*s+8,r),c.longitudeAccuracy=n.getFloat32(o+l*s+12,r)),a.push(c)}return a}function Ty(n,e){if(!(this instanceof Ty))return new Ty(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var t=PV(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=Ty.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=Pl(zV,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var o=UV(t.a,t.b,t.rf,t.ellps,t.sphere),s=jV(o.a,o.b,o.rf,t.R_A),a=qV(t.nadgrids),l=t.datum||VV(t.datumCode,t.datum_params,o.a,o.b,s.es,s.ep2,a);fk(this,t),fk(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}Ty.projections=BV;Ty.projections.start();var rc=Ty;function WV(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===tc?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===nc?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function tC(n,e,t){var r=n.x,i=n.y,o=n.z?n.z:0,s,a,l,c;if(i<-Ze&&i>-1.001*Ze)i=-Ze;else if(i>Ze&&i<1.001*Ze)i=Ze;else{if(i<-Ze)return{x:-1/0,y:-1/0,z:n.z};if(i>Ze)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,s=t/Math.sqrt(1-e*l),{x:(s+o)*c*Math.cos(r),y:(s+o)*c*Math.sin(r),z:(s*(1-e)+o)*a}}function nC(n,e,t,r){var i=1e-12,o=i*i,s=30,a,l,c,f,d,y,p,_,x,b,S,T,A,N=n.x,k=n.y,W=n.z?n.z:0,X,Y,$;if(a=Math.sqrt(N*N+k*k),l=Math.sqrt(N*N+k*k+W*W),a/t<i){if(X=0,l/t<i)return Y=Ze,$=-r,{x:n.x,y:n.y,z:n.z}}else X=Math.atan2(k,N);c=W/l,f=a/l,d=1/Math.sqrt(1-e*(2-e)*f*f),_=f*(1-e)*d,x=c*d,A=0;do A++,p=t/Math.sqrt(1-e*x*x),$=a*_+W*x-p*(1-e*x*x),y=e*p/(p+$),d=1/Math.sqrt(1-y*(2-y)*f*f),b=f*(1-y)*d,S=c*d,T=S*_-b*x,_=b,x=S;while(T*T>o&&A<s);return Y=Math.atan(S/Math.abs(b)),{x:X,y:Y,z:$}}function $V(n,e,t){if(e===tc)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===nc){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6];return{x:c*(n.x-l*n.y+a*n.z)+r,y:c*(l*n.x+n.y-s*n.z)+i,z:c*(-a*n.x+s*n.y+n.z)+o}}}function YV(n,e,t){if(e===tc)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===nc){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],f=(n.x-r)/c,d=(n.y-i)/c,y=(n.z-o)/c;return{x:f+l*d-a*y,y:-l*f+d+s*y,z:a*f-s*d+y}}}function rC(n){return n===tc||n===nc}function KV(n,e,t){if(WV(n,e)||n.datum_type===nx||e.datum_type===nx)return t;var r=n.a,i=n.es;if(n.datum_type===yf){var o=XV(n,!1,t);if(o!==0)return;r=ok,i=sk}var s=e.a,a=e.b,l=e.es;if(e.datum_type===yf&&(s=ok,a=dV,l=sk),i===l&&r===s&&!rC(n.datum_type)&&!rC(e.datum_type))return t;if(t=tC(t,i,r),rC(n.datum_type)&&(t=$V(t,n.datum_type,n.datum_params)),rC(e.datum_type)&&(t=YV(t,e.datum_type,e.datum_params)),t=nC(t,l,s,a),e.datum_type===yf){var c=XV(e,!0,t);if(c!==0)return}return t}function XV(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},o=[];e:for(var s=0;s<n.grids.length;s++){var a=n.grids[s];if(o.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,f=l.length;c<f;c++){var d=l[c],y=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-y,_=d.ll[1]-y,x=d.ll[0]+(d.lim[0]-1)*d.del[0]+y,b=d.ll[1]+(d.lim[1]-1)*d.del[1]+y;if(!(_>r.y||p>r.x||b<r.y||x<r.x)&&(i=Uhe(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Xo+" "+r.y*Xo+" tried: '"+o+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Uhe(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=st(i.x-Math.PI)+Math.PI;var o=ZV(i,t);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var s=9,a=1e-12,l,c;do{if(c=ZV(o,t),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+o.x),y:i.y-(c.y+o.y)},o.x+=l.x,o.y+=l.y}while(s--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=st(o.x+t.ll[0]),r.y=o.y+t.ll[1]}else isNaN(o.x)||(r.x=n.x+o.x,r.y=n.y+o.y);return r}function ZV(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},o={x:Number.NaN,y:Number.NaN},s;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return o;s=r.y*e.lim[0]+r.x;var a={x:e.cvs[s][0],y:e.cvs[s][1]};s++;var l={x:e.cvs[s][0],y:e.cvs[s][1]};s+=e.lim[0];var c={x:e.cvs[s][0],y:e.cvs[s][1]};s--;var f={x:e.cvs[s][0],y:e.cvs[s][1]},d=i.x*i.y,y=i.x*(1-i.y),p=(1-i.x)*(1-i.y),_=(1-i.x)*i.y;return o.x=p*a.x+y*l.x+_*f.x+d*c.x,o.y=p*a.y+y*l.y+_*f.y+d*c.y,o}function vk(n,e,t){var r=t.x,i=t.y,o=t.z||0,s,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(s=r,"ew".indexOf(n.axis[l])!==-1?a="x":a="y"):l===1?(s=i,"ns".indexOf(n.axis[l])!==-1?a="y":a="x"):(s=o,a="z"),n.axis[l]){case"e":c[a]=s;break;case"w":c[a]=-s;break;case"n":c[a]=s;break;case"s":c[a]=-s;break;case"u":t[a]!==void 0&&(c.z=s);break;case"d":t[a]!==void 0&&(c.z=-s);break;default:return null}return c}function iC(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function QV(n){JV(n.x),JV(n.y)}function JV(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Ghe(n,e){return(n.datum.datum_type===tc||n.datum.datum_type===nc||n.datum.datum_type===yf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===tc||e.datum.datum_type===nc||e.datum.datum_type===yf)&&n.datumCode!=="WGS84"}function kg(n,e,t,r){var i;Array.isArray(t)?t=iC(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var o=t.z!==void 0;if(QV(t),n.datum&&e.datum&&Ghe(n,e)&&(i=new rc("WGS84"),t=kg(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=vk(n,!1,t)),n.projName==="longlat")t={x:t.x*ni,y:t.y*ni,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=KV(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Xo,y:t.y*Xo,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?vk(e,!0,t):(t&&!o&&delete t.z,t)}var eH=rc("WGS84");function xk(n,e,t,r){var i,o,s;return Array.isArray(t)?(i=kg(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(o=kg(n,e,t,r),s=Object.keys(t),s.length===2||s.forEach(function(a){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=t[a]}),o)}function oC(n){return n instanceof rc?n:typeof n=="object"&&"oProj"in n?n.oProj:rc(n)}function zhe(n,e,t){var r,i,o=!1,s;return typeof e>"u"?(i=oC(n),r=eH,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=oC(n),r=eH,o=!0),r||(r=oC(n)),i||(i=oC(e)),t?xk(r,i,t):(s={forward:function(a,l){return xk(r,i,a,l)},inverse:function(a,l){return xk(i,r,a,l)}},o&&(s.oProj=i),s)}var tH=zhe;var nH=6,iH="AJSAJS",oH="AFAFAF",Dy=65,tl=73,vu=79,sx=86,ax=90,sH={forward:Ek,inverse:Vhe,toPoint:bk};function Ek(n,e){return e=e||5,Whe(Hhe({lat:n[1],lon:n[0]}),e)}function Vhe(n){var e=Sk(lH(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function bk(n){var e=Sk(lH(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function wk(n){return n*(Math.PI/180)}function rH(n){return 180*(n/Math.PI)}function Hhe(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,o=.9996,s,a,l,c,f,d,y,p=wk(e),_=wk(t),x,b;b=Math.floor((t+180)/6)+1,t===180&&(b=60),e>=56&&e<64&&t>=3&&t<12&&(b=32),e>=72&&e<84&&(t>=0&&t<9?b=31:t>=9&&t<21?b=33:t>=21&&t<33?b=35:t>=33&&t<42&&(b=37)),s=(b-1)*6-180+3,x=wk(s),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),c=Math.tan(p)*Math.tan(p),f=a*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(_-x),y=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var S=o*l*(d+(1-c+f)*d*d*d/6+(5-18*c+c*c+72*f-58*a)*d*d*d*d*d/120)+5e5,T=o*(y+l*Math.tan(p)*(d*d/2+(5-c+9*f+4*f*f)*d*d*d*d/24+(61-58*c+c*c+600*f-330*a)*d*d*d*d*d*d/720));return e<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(S),zoneNumber:b,zoneLetter:qhe(e)}}function Sk(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var o=.9996,s=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),f,d,y,p,_,x,b,S,T,A=t-5e5,N=e;r<"N"&&(N-=1e7),b=(i-1)*6-180+3,l=a/(1-a),x=N/o,S=x/(s*(1-a/4-3*a*a/64-5*a*a*a/256)),T=S+(3*c/2-27*c*c*c/32)*Math.sin(2*S)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*S)+151*c*c*c/96*Math.sin(6*S),f=s/Math.sqrt(1-a*Math.sin(T)*Math.sin(T)),d=Math.tan(T)*Math.tan(T),y=l*Math.cos(T)*Math.cos(T),p=s*(1-a)/Math.pow(1-a*Math.sin(T)*Math.sin(T),1.5),_=A/(f*o);var k=T-f*Math.tan(T)/p*(_*_/2-(5+3*d+10*y-4*y*y-9*l)*_*_*_*_/24+(61+90*d+298*y+45*d*d-252*l-3*y*y)*_*_*_*_*_*_/720);k=rH(k);var W=(_-(1+2*d+y)*_*_*_/6+(5-2*y+28*d-3*y*y+8*l+24*d*d)*_*_*_*_*_/120)/Math.cos(T);W=b+rH(W);var X;if(n.accuracy){var Y=Sk({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});X={top:Y.lat,right:Y.lon,bottom:k,left:W}}else X={lat:k,lon:W};return X}function qhe(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function Whe(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+$he(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function $he(n,e,t){var r=aH(t),i=Math.floor(n/1e5),o=Math.floor(e/1e5)%20;return Yhe(i,o,r)}function aH(n){var e=n%nH;return e===0&&(e=nH),e}function Yhe(n,e,t){var r=t-1,i=iH.charCodeAt(r),o=oH.charCodeAt(r),s=i+n-1,a=o+e,l=!1;s>ax&&(s=s-ax+Dy-1,l=!0),(s===tl||i<tl&&s>tl||(s>tl||i<tl)&&l)&&s++,(s===vu||i<vu&&s>vu||(s>vu||i<vu)&&l)&&(s++,s===tl&&s++),s>ax&&(s=s-ax+Dy-1),a>sx?(a=a-sx+Dy-1,l=!0):l=!1,(a===tl||o<tl&&a>tl||(a>tl||o<tl)&&l)&&a++,(a===vu||o<vu&&a>vu||(a>vu||o<vu)&&l)&&(a++,a===tl&&a++),a>sx&&(a=a-sx+Dy-1);var c=String.fromCharCode(s)+String.fromCharCode(a);return c}function lH(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,o=0;!/[A-Z]/.test(i=n.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,o++}var s=parseInt(r,10);if(o===0||o+3>e)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+n;t=n.substring(o,o+=2);for(var l=aH(s),c=Xhe(t.charAt(0),l),f=Zhe(t.charAt(1),l);f<Khe(a);)f+=2e6;var d=e-o;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var y=d/2,p=0,_=0,x,b,S,T,A;return y>0&&(x=1e5/Math.pow(10,y),b=n.substring(o,o+y),p=parseFloat(b)*x,S=n.substring(o+y),_=parseFloat(S)*x),T=p+c,A=_+f,{easting:T,northing:A,zoneLetter:a,zoneNumber:s,accuracy:x}}function Xhe(n,e){for(var t=iH.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===tl&&t++,t===vu&&t++,t>ax){if(i)throw"Bad character: "+n;t=Dy,i=!0}r+=1e5}return r}function Zhe(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=oH.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===tl&&t++,t===vu&&t++,t>sx){if(i)throw"Bad character: "+n;t=Dy,i=!0}r+=1e5}return r}function Khe(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function Ay(n,e,t){if(!(this instanceof Ay))return new Ay(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ay.fromMGRS=function(n){return new Ay(bk(n))};Ay.prototype.toMGRS=function(n){return Ek([this.x,this.y],n)};var uH=Ay;var Jhe=1,Qhe=.25,cH=.046875,hH=.01953125,fH=.01068115234375,efe=.75,tfe=.46875,nfe=.013020833333333334,rfe=.007120768229166667,ife=.3645833333333333,ofe=.005696614583333333,sfe=.3076171875;function Ry(n){var e=[];e[0]=Jhe-n*(Qhe+n*(cH+n*(hH+n*fH))),e[1]=n*(efe-n*(cH+n*(hH+n*fH)));var t=n*n;return e[2]=t*(tfe-n*(nfe+n*rfe)),t*=n,e[3]=t*(ife-n*ofe),e[4]=t*n*sfe,e}function $c(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var afe=20;function My(n,e,t){for(var r=1/(1-e),i=n,o=afe;o;--o){var s=Math.sin(i),a=1-e*s*s;if(a=($c(i,s,Math.cos(i),t)-n)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<ot)return i}return i}function lfe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Ry(this.es),this.ml0=$c(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ufe(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i,o,s,a=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),y=this.ep2*Math.pow(l,2),p=Math.pow(y,2),_=Math.abs(l)>ot?Math.tan(t):0,x=Math.pow(_,2),b=Math.pow(x,2);i=1-this.es*Math.pow(a,2),f=f/Math.sqrt(i);var S=$c(t,a,l,this.en);o=this.a*(this.k0*f*(1+d/6*(1-x+y+d/20*(5-18*x+b+14*y-58*x*y+d/42*(61+179*b-b*x-479*x)))))+this.x0,s=this.a*(this.k0*(S-this.ml0+a*r*f/2*(1+d/12*(5-x+9*y+4*p+d/30*(61+b-58*x+270*y-330*x*y+d/56*(1385+543*b-b*x-3111*x))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<ot)return 93;if(o=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,s=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(s),c>=1){if(c-1>ot)return 93;s=0}else s=Math.acos(s);t<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return n.x=o,n.y=s,n}function cfe(n){var e,t,r,i,o=(n.x-this.x0)*(1/this.a),s=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,t=My(e,this.es,this.en),Math.abs(t)<Ze){var d=Math.sin(t),y=Math.cos(t),p=Math.abs(y)>ot?Math.tan(t):0,_=this.ep2*Math.pow(y,2),x=Math.pow(_,2),b=Math.pow(p,2),S=Math.pow(b,2);e=1-this.es*Math.pow(d,2);var T=o*Math.sqrt(e)/this.k0,A=Math.pow(T,2);e=e*p,r=t-e*A/(1-this.es)*.5*(1-A/12*(5+3*b-9*_*b+_-4*x-A/30*(61+90*b-252*_*b+45*S+46*_-A/56*(1385+3633*b+4095*S+1574*S*b)))),i=st(this.long0+T*(1-A/6*(1+2*b+_-A/20*(5+28*b+24*S+8*_*b+6*_-A/42*(61+662*b+1320*S+720*S*b))))/y,this.over)}else r=Ze*Wc(s),i=0;else{var a=Math.exp(o/this.k0),l=.5*(a-1/a),c=this.lat0+s/this.k0,f=Math.cos(c);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),s<0&&(r=-r),l===0&&f===0?i=0:i=st(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var hfe=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Ny={init:lfe,forward:ufe,inverse:cfe,names:hfe};function sC(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function Ao(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function dH(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function pH(n){var e=Math.abs(n);return e=dH(e*(1+e/(Ao(1,e)+1))),n<0?-e:e}function aC(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],o=0,s;--r>=0;)s=-o+t*i+n[r],o=i,i=s;return e+s*Math.sin(2*e)}function gH(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],o=0,s;--r>=0;)s=-o+t*i+n[r],o=i,i=s;return Math.sin(e)*s}function mH(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function Ck(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),o=sC(t),s=mH(t),a=2*i*s,l=-2*r*o,c=n.length-1,f=n[c],d=0,y=0,p=0,_,x;--c>=0;)_=y,x=d,y=f,d=p,f=-_+a*y-l*d+n[c],p=-x+l*y+a*d;return a=r*s,l=i*o,[a*f-l*p,a*p+l*f]}function ffe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ny.init.apply(this),this.forward=Ny.forward,this.inverse=Ny.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=aC(this.cbg,this.lat0);this.Zb=-this.Qn*(r+gH(this.gtu,2*r))}function dfe(n){var e=st(n.x-this.long0,this.over),t=n.y;t=aC(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),o=Math.sin(e),s=Math.cos(e);t=Math.atan2(r,s*i),e=Math.atan2(o*i,Ao(r,i*s)),e=pH(Math.tan(e));var a=Ck(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,c=1/0),n.x=l,n.y=c,n}function pfe(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var o=Ck(this.utg,2*t,2*e);t=t+o[0],e=e+o[1],e=Math.atan(sC(e));var s=Math.sin(t),a=Math.cos(t),l=Math.sin(e),c=Math.cos(e);t=Math.atan2(s*c,Ao(l,c*a)),e=Math.atan2(l,c*a),r=st(e+this.long0,this.over),i=aC(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var gfe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],Py={init:ffe,forward:dfe,inverse:pfe,names:gfe};function yH(n,e){if(n===void 0){if(n=Math.floor((st(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var mfe="etmerc";function yfe(){var n=yH(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*ni,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Py.init.apply(this),this.forward=Py.forward,this.inverse=Py.inverse}var _fe=["Universal Transverse Mercator System","utm"],_H={init:yfe,names:_fe,dependsOn:mfe};function lC(n,e){return Math.pow((1-n)/(1+n),e)}var vfe=20;function xfe(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+fr)/(Math.pow(Math.tan(.5*this.lat0+fr),this.C)*lC(this.e*n,this.ratexp))}function wfe(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+fr),this.C)*lC(this.e*Math.sin(t),this.ratexp))-Ze,n.x=this.C*e,n}function Efe(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+fr)/this.K,1/this.C),o=vfe;o>0&&(r=2*Math.atan(i*lC(this.e*Math.sin(n.y),-.5*this.e))-Ze,!(Math.abs(r-n.y)<e));--o)n.y=r;return o?(n.x=t,n.y=r,n):null}var bfe=["gauss"],uC={init:xfe,forward:wfe,inverse:Efe,names:bfe};function Sfe(){uC.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Cfe(n){var e,t,r,i;return n.x=st(n.x-this.long0,this.over),uC.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ife(n){var e,t,r,i,o;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,o=Ao(n.x,n.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),t=Math.cos(s),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/o),r=Math.atan2(n.x*e,o*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,uC.inverse.apply(this,[n]),n.x=st(n.x+this.long0,this.over),n}var Tfe=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],vH={init:Sfe,forward:Cfe,inverse:Ife,names:Tfe};function Ik(n,e,t){return e*=t,Math.tan(.5*(Ze+n))*Math.pow((1-e)/(1+e),.5*t)}function Dfe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&(this.k0=.5*(1+Wc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ot&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&Math.abs(Math.cos(this.lat_ts))>ot&&(this.k0=.5*this.cons*ia(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ca(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ia(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Ik(this.lat0,this.sinlat0,this.e))-Ze,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Afe(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),o,s,a,l,c,f,d=st(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ot&&Math.abs(t+this.lat0)<=ot?(n.x=NaN,n.y=NaN,n):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*o*i*Math.sin(d)+this.x0,n.y=this.a*o*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(s=2*Math.atan(Ik(t,r,this.e))-Ze,l=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=ot?(c=Ca(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*c/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<ot?(o=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(d))),n.y=o*(this.cosX0*a-this.sinX0*l*Math.cos(d))+this.y0),n.x=o*l*Math.sin(d)+this.x0,n))}function Rfe(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,o,s=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,t=this.lat0,s<=ot?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(a)*this.sinlat0+n.y*Math.sin(a)*this.coslat0/s),Math.abs(this.coslat0)<ot?this.lat0>0?e=st(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=st(this.long0+Math.atan2(n.x,n.y),this.over):e=st(this.long0+Math.atan2(n.x*Math.sin(a),s*this.coslat0*Math.cos(a)-n.y*this.sinlat0*Math.sin(a)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=ot){if(s<=ot)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=s*this.cons/(2*this.a*this.k0),t=this.con*vf(this.e,r),e=this.con*st(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=ot?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/s),e=st(this.long0+Math.atan2(n.x*Math.sin(i),s*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*vf(this.e,Math.tan(.5*(Ze+o)));return n.x=e,n.y=t,n}var Mfe=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],xH={init:Dfe,forward:Afe,inverse:Rfe,names:Mfe,ssfn_:Ik};function Nfe(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,o=2*i-Math.pow(i,2),s=this.e=Math.sqrt(o);this.R=this.k0*t*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),c=Math.log((1+s*e)/(1-s*e));this.K=a-this.alpha*l+this.alpha*s/2*c}function Pfe(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(n.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return n.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,n.x=this.R*s+this.x0,n}function Lfe(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,l=0,c=o,f=-1e3,d=0;Math.abs(c-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),f=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=a,n.y=c,n}var kfe=["somerc"],wH={init:Nfe,forward:Pfe,inverse:Lfe,names:kfe};var Ly=1e-7;function Ofe(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(pk(t))!==-1}function Ffe(){var n,e,t,r,i,o,s,a,l,c,f=0,d,y=0,p=0,_=0,x=0,b=0,S=0;this.no_off=Ofe(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),T&&(S=this.alpha),A&&(f=this.rectified_grid_angle),T||A)y=this.longc;else if(p=this.long1,x=this.lat1,_=this.long2,b=this.lat2,Math.abs(x-b)<=Ly||(n=Math.abs(x))<=Ly||Math.abs(n-Ze)<=Ly||Math.abs(Math.abs(this.lat0)-Ze)<=Ly||Math.abs(Math.abs(b)-Ze)<=Ly)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>ot?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ca(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),T||A?(T?(d=Math.asin(Math.sin(S)/r),A||(f=S)):(d=f,S=Math.asin(r*Math.sin(d))),this.lam0=y-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(o=Math.pow(Ca(this.e,x,Math.sin(x)),this.B),s=Math.pow(Ca(this.e,b,Math.sin(b)),this.B),i=this.E/o,l=(s-o)/(s+o),c=this.E*this.E,c=(c-s*o)/(c+s*o),n=p-_,n<-Math.PI?_-=qd:n>Math.PI&&(_+=qd),this.lam0=st(.5*(p+_)-Math.atan(c*Math.tan(.5*this.B*(p-_))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*st(p-this.lam0,this.over))/(i-1/i)),f=S=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(fr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(fr+i))}function Bfe(n){var e={},t,r,i,o,s,a,l,c;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ze)>ot){if(s=this.E/Math.pow(Ca(this.e,n.y,Math.sin(n.y)),this.B),a=1/s,t=.5*(s-a),r=.5*(s+a),o=Math.sin(this.B*n.x),i=(t*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(i)-1)<ot)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*n.x),Math.abs(a)<Ly?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+o*this.singam,a)}else c=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function jfe(n){var e,t,r,i,o,s,a,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.BrA*e),a=(s*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(a)-1)<ot)l.x=0,l.y=a<0?-Ze:Ze;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=vf(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Ufe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],EH={init:Ffe,forward:Bfe,inverse:jfe,names:Ufe};function Gfe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ot)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=ia(this.e,e,t),i=Ca(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=ia(this.e,o,s),l=Ca(this.e,this.lat2,o),c=Math.abs(Math.abs(this.lat0)-Ze)<ot?0:Ca(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ot?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function zfe(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=ot&&(t=Wc(t)*(Ze-2*ot));var r=Math.abs(Math.abs(t)-Ze),i,o;if(r>ot)i=Ca(this.e,t,Math.sin(t)),o=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;o=0}var s=this.ns*st(e-this.long0,this.over);return n.x=this.k0*(o*Math.sin(s))+this.x0,n.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,n}function Vfe(n){var e,t,r,i,o,s=(n.x-this.x0)/this.k0,a=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),t=1):(e=-Math.sqrt(s*s+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*s,t*a)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=vf(this.e,r),i===-9999)return null}else i=-Ze;return o=st(l/this.ns+this.long0,this.over),n.x=o,n.y=i,n}var Hfe=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],bH={init:Gfe,forward:zfe,inverse:Vfe,names:Hfe};function qfe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Wfe(n){var e,t,r,i,o,s,a,l=n.x,c=n.y,f=st(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),o=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=a*Math.cos(s)/1,n.x=a*Math.sin(s)/1,this.czech||(n.y*=-1,n.x*=-1),n}function $fe(n){var e,t,r,i,o,s,a,l,c=n.x;n.x=n.y,n.y=c,this.czech||(n.y*=-1,n.x*=-1),s=Math.sqrt(n.x*n.x+n.y*n.y),o=Math.atan2(n.y,n.x),i=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,a=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-n.y)<1e-10&&(l=1),a=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var Yfe=["Krovak","krovak"],SH={init:qfe,forward:Wfe,inverse:$fe,names:Yfe};function Zo(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function xf(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function wf(n){return .375*n*(1+.25*n*(1+.46875*n))}function Ef(n){return .05859375*n*n*(1+.75*n)}function bf(n){return n*n*n*(35/3072)}function lx(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function nl(n){return Math.abs(n)<Ze?n:n-Wc(n)*Math.PI}function Og(n,e,t,r,i){var o,s;o=n/e;for(var a=0;a<15;a++)if(s=(n-(e*o-t*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*t*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function Xfe(){this.sphere||(this.e0=xf(this.es),this.e1=wf(this.es),this.e2=Ef(this.es),this.e3=bf(this.es),this.ml0=this.a*Zo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Zfe(n){var e,t,r=n.x,i=n.y;if(r=st(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=lx(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),f=c*c,d=this.es*s*s/(1-this.es),y=this.a*Zo(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=y-this.ml0+a*o/s*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function Kfe(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var o=t+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(o))}else{var s=this.ml0/this.a+t,a=Og(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ze)<=ot)return n.x=this.long0,n.y=Ze,t<0&&(n.y*=-1),n;var l=lx(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(a),2),d=e*this.a/l,y=d*d;r=a-l*Math.tan(a)/c*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-y*(f/3+(1+3*f)*f*y/15))/Math.cos(a)}return n.x=st(i+this.long0,this.over),n.y=nl(r),n}var Jfe=["Cassini","Cassini_Soldner","cass"],CH={init:Xfe,forward:Zfe,inverse:Kfe,names:Jfe};function ic(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var Tk=1,Dk=2,Ak=3,cC=4;function Qfe(){var n=Math.abs(this.lat0);if(Math.abs(n-Ze)<ot?this.mode=this.lat0<0?Tk:Dk:Math.abs(n)<ot?this.mode=Ak:this.mode=cC,this.es>0){var e;switch(this.qp=ic(this.e,1),this.mmf=.5/(1-this.es),this.apa=lde(this.es),this.mode){case Dk:this.dd=1;break;case Tk:this.dd=1;break;case Ak:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case cC:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=ic(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===cC&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function ede(n){var e,t,r,i,o,s,a,l,c,f,d=n.x,y=n.y;if(d=st(d-this.long0,this.over),this.sphere){if(o=Math.sin(y),f=Math.cos(y),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*o+this.cosph0*f*r,t<=ot)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(y+this.lat0)<ot)return null;t=fr-y*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(d),i=Math.sin(d),o=Math.sin(y),s=ic(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=Ze+y,s=this.qp-s;break;case this.S_POLE:c=y-Ze,s=this.qp+s;break}if(Math.abs(c)<ot)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?t=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):t=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(c=Math.sqrt(s))*i,t=r*(this.mode===this.S_POLE?c:-c)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function tde(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,o,s,a,l,c;if(this.sphere){var f=0,d,y=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=ot?0:Math.asin(t*y/d),e*=y,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=ot?this.lat0:Math.asin(f*this.sinph0+t*y*this.cosph0/d),e*=y*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Ze-i;break;case this.S_POLE:i-=Ze;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<ot)return n.x=this.long0,n.y=this.lat0,n;s=2*Math.asin(.5*l/this.rq),o=Math.cos(s),e*=s=Math.sin(s),this.mode===this.OBLIQ?(c=o*this.sinb1+t*s*this.cosb1/l,a=this.qp*c,t=l*this.cosb1*o-t*this.sinb1*s):(c=t*s/l,a=this.qp*c,t=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return n.x=this.long0,n.y=this.lat0,n;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,t),i=ude(Math.asin(c),this.apa)}return n.x=st(this.long0+r,this.over),n.y=i,n}var nde=.3333333333333333,rde=.17222222222222222,ide=.10257936507936508,ode=.06388888888888888,sde=.0664021164021164,ade=.016415012942191543;function lde(n){var e,t=[];return t[0]=n*nde,e=n*n,t[0]+=e*rde,t[1]=e*ode,e*=n,t[0]+=e*ide,t[1]+=e*sde,t[2]=e*ade,t}function ude(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var cde=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],IH={init:Qfe,forward:ede,inverse:tde,names:cde,S_POLE:Tk,N_POLE:Dk,EQUIT:Ak,OBLIQ:cC};function rl(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function hde(){Math.abs(this.lat1+this.lat2)<ot||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ia(this.e3,this.sin_po,this.cos_po),this.qs1=ic(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ia(this.e3,this.sin_po,this.cos_po),this.qs2=ic(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ic(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ot?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function fde(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=ic(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*st(e-this.long0,this.over),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return n.x=s,n.y=a,n}function dde(n){var e,t,r,i,o,s;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,t)),o=st(i/this.ns0+this.long0,this.over),n.x=o,n.y=s,n}function pde(n,e){var t,r,i,o,s,a=rl(.5*e);if(n<ot)return a;for(var l=n*n,c=1;c<=25;c++)if(t=Math.sin(a),r=Math.cos(a),i=n*t,o=1-i*i,s=.5*o*o/r*(e/(1-l)-t/o+.5/n*Math.log((1-i)/(1+i))),a=a+s,Math.abs(s)<=1e-7)return a;return null}var gde=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],TH={init:hde,forward:fde,inverse:dde,names:gde,phi1z:pde};function mde(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function yde(n){var e,t,r,i,o,s,a,l,c=n.x,f=n.y;return r=st(c-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),s=this.sin_p14*e+this.cos_p14*t*i,o=1,s>0||Math.abs(s)<=ot?(a=this.x0+this.a*o*t*Math.sin(r)/s,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*t*i)/s):(a=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=a,n.y=l,n}function _de(n){var e,t,r,i,o,s;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),s=rl(r*this.sin_p14+n.y*t*this.cos_p14/e),o=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),o=st(this.long0+o,this.over)):(s=this.phic0,o=0),n.x=o,n.y=s,n}var vde=["gnom"],DH={init:mde,forward:yde,inverse:_de,names:vde};function AH(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ze:Ze;for(var r=Math.asin(.5*e),i,o,s,a,l=0;l<30;l++)if(o=Math.sin(r),s=Math.cos(r),a=n*o,i=Math.pow(1-a*a,2)/(2*s)*(e/(1-n*n)-o/(1-a*a)+.5/n*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function xde(){this.sphere||(this.k0=ia(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function wde(n){var e=n.x,t=n.y,r,i,o=st(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var s=ic(this.e,Math.sin(t));r=this.x0+this.a*this.k0*o,i=this.y0+this.a*s*.5/this.k0}return n.x=r,n.y=i,n}function Ede(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=st(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=AH(this.e,2*n.y*this.k0/this.a),e=st(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var bde=["cea"],RH={init:xde,forward:wde,inverse:Ede,names:bde};function Sde(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Cde(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=nl(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Ide(n){var e=n.x,t=n.y;return n.x=st(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=nl(this.lat0+(t-this.y0)/this.a),n}var Tde=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"],MH={init:Sde,forward:Cde,inverse:Ide,names:Tde};var NH=20;function Dde(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xf(this.es),this.e1=wf(this.es),this.e2=Ef(this.es),this.e3=bf(this.es),this.ml0=this.a*Zo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Ade(n){var e=n.x,t=n.y,r,i,o,s=st(e-this.long0,this.over);if(o=s*Math.sin(t),this.sphere)Math.abs(t)<=ot?(r=this.a*s,i=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(t),i=this.a*(nl(t-this.lat0)+(1-Math.cos(o))/Math.tan(t)));else if(Math.abs(t)<=ot)r=this.a*s,i=-1*this.ml0;else{var a=lx(this.a,this.e,Math.sin(t))/Math.tan(t);r=a*Math.sin(o),i=this.a*Zo(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(o))}return n.x=r+this.x0,n.y=i+this.y0,n}function Rde(n){var e,t,r,i,o,s,a,l,c;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=ot)e=st(r/this.a+this.long0,this.over),t=0;else{s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,l=s;var f;for(o=NH;o;--o)if(f=Math.tan(l),c=-1*(s*(l*f+1)-l-.5*(l*l+a)*f)/((l-s)/f-1),l+=c,Math.abs(c)<=ot){t=l;break}e=st(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=ot)t=0,e=st(this.long0+r/this.a,this.over);else{s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,l=s;var d,y,p,_,x;for(o=NH;o;--o)if(x=this.e*Math.sin(l),d=Math.sqrt(1-x*x)*Math.tan(l),y=this.a*Zo(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),_=y/this.a,c=(s*(d*_+1)-_-.5*d*(_*_+a))/(this.es*Math.sin(2*l)*(_*_+a-2*s*_)/(4*d)+(s-_)*(d*p-2/Math.sin(2*l))-p),l-=c,Math.abs(c)<=ot){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=st(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var Mde=["Polyconic","American_Polyconic","poly"],PH={init:Dde,forward:Ade,inverse:Rde,names:Mde};function Nde(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Pde(n){var e,t=n.x,r=n.y,i=r-this.lat0,o=t-this.long0,s=i/Ng*1e-5,a=o,l=1,c=0;for(e=1;e<=10;e++)l=l*s,c=c+this.A[e]*l;var f=c,d=a,y=1,p=0,_,x,b=0,S=0;for(e=1;e<=6;e++)_=y*f-p*d,x=p*f+y*d,y=_,p=x,b=b+this.B_re[e]*y-this.B_im[e]*p,S=S+this.B_im[e]*y+this.B_re[e]*p;return n.x=S*this.a+this.x0,n.y=b*this.a+this.y0,n}function Lde(n){var e,t=n.x,r=n.y,i=t-this.x0,o=r-this.y0,s=o/this.a,a=i/this.a,l=1,c=0,f,d,y=0,p=0;for(e=1;e<=6;e++)f=l*s-c*a,d=c*s+l*a,l=f,c=d,y=y+this.C_re[e]*l-this.C_im[e]*c,p=p+this.C_im[e]*l+this.C_re[e]*c;for(var _=0;_<this.iterations;_++){var x=y,b=p,S,T,A=s,N=a;for(e=2;e<=6;e++)S=x*y-b*p,T=b*y+x*p,x=S,b=T,A=A+(e-1)*(this.B_re[e]*x-this.B_im[e]*b),N=N+(e-1)*(this.B_im[e]*x+this.B_re[e]*b);x=1,b=0;var k=this.B_re[1],W=this.B_im[1];for(e=2;e<=6;e++)S=x*y-b*p,T=b*y+x*p,x=S,b=T,k=k+e*(this.B_re[e]*x-this.B_im[e]*b),W=W+e*(this.B_im[e]*x+this.B_re[e]*b);var X=k*k+W*W;y=(A*k+N*W)/X,p=(N*k-A*W)/X}var Y=y,$=p,V=1,B=0;for(e=1;e<=9;e++)V=V*Y,B=B+this.D[e]*V;var v=this.lat0+B*Ng*1e5,I=this.long0+$;return n.x=I,n.y=v,n}var kde=["New_Zealand_Map_Grid","nzmg"],LH={init:Nde,forward:Pde,inverse:Lde,names:kde};function Ode(){}function Fde(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=o,n}function Bde(n){n.x-=this.x0,n.y-=this.y0;var e=st(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var jde=["Miller_Cylindrical","mill"],kH={init:Ode,forward:Fde,inverse:Bde,names:jde};var Ude=20;function Gde(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ry(this.es)}function zde(n){var e,t,r=n.x,i=n.y;if(r=st(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var o=this.n*Math.sin(i),s=Ude;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<ot)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);t=this.a*$c(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function Vde(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=rl((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=rl(Math.sin(e)/this.n)),r=st(r+this.long0,this.over),e=nl(e)):(e=My(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ze?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=st(t,this.over)):i-ot<Ze&&(r=this.long0)),n.x=r,n.y=e,n}var Hde=["Sinusoidal","sinu"],OH={init:Gde,forward:zde,inverse:Vde,names:Hde};function qde(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Wde(n){for(var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=t,o=Math.PI*Math.sin(t);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<ot)break}i/=2,Math.PI/2-Math.abs(t)<ot&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=a,n.y=l,n}function $de(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=st(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var Yde=["Mollweide","moll"],FH={init:qde,forward:Wde,inverse:$de,names:Yde};function Xde(){Math.abs(this.lat1+this.lat2)<ot||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=xf(this.es),this.e1=wf(this.es),this.e2=Ef(this.es),this.e3=bf(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=ia(this.e,this.sin_phi,this.cos_phi),this.ml1=Zo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ot?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=ia(this.e,this.sin_phi,this.cos_phi),this.ml2=Zo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Zo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Zde(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Zo(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var o=this.ns*st(e-this.long0,this.over),s=this.x0+r*Math.sin(o),a=this.y0+this.rh-r*Math.cos(o);return n.x=s,n.y=a,n}function Kde(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var o=0;if(t!==0&&(o=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=st(this.long0+o/this.ns,this.over),r=nl(this.g-t/this.a),n.x=i,n.y=r,n;var s=this.g-t/this.a;return r=Og(s,this.e0,this.e1,this.e2,this.e3),i=st(this.long0+o/this.ns,this.over),n.x=i,n.y=r,n}var Jde=["Equidistant_Conic","eqdc"],BH={init:Xde,forward:Zde,inverse:Kde,names:Jde};function Qde(){this.R=this.a}function epe(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i,o;Math.abs(t)<=ot&&(i=this.x0+this.R*r,o=this.y0);var s=rl(2*Math.abs(t/Math.PI));(Math.abs(r)<=ot||Math.abs(Math.abs(t)-Ze)<=ot)&&(i=this.x0,t>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*s):o=this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(s),f=Math.cos(s),d=f/(c+f-1),y=d*d,p=d*(2/c-1),_=p*p,x=Math.PI*this.R*(a*(d-_)+Math.sqrt(l*(d-_)*(d-_)-(_+l)*(y-_)))/(_+l);r<0&&(x=-x),i=this.x0+x;var b=l+d;return x=Math.PI*this.R*(p*b-a*Math.sqrt((_+l)*(l+1)-b*b))/(_+l),t>=0?o=this.y0+x:o=this.y0-x,n.x=i,n.y=o,n}function tpe(n){var e,t,r,i,o,s,a,l,c,f,d,y,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,o=r*r+i*i,s=-Math.abs(i)*(1+o),a=s-2*i*i+r*r,l=-2*s+1+2*i*i+o*o,p=i*i/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,c=(s-a*a/3/l)/l,f=2*Math.sqrt(-c/3),d=3*p/c/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),y=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(y+Math.PI/3)-a/3/l)*Math.PI:t=-(-f*Math.cos(y+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<ot?e=this.long0:e=st(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r,this.over),n.x=e,n.y=t,n}var npe=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"],jH={init:Qde,forward:epe,inverse:tpe,names:npe};function UH(n,e,t,r,i,o){let s=r-e,a=Math.atan((1-o)*Math.tan(n)),l=Math.atan((1-o)*Math.tan(t)),c=Math.sin(a),f=Math.cos(a),d=Math.sin(l),y=Math.cos(l),p=s,_,x=100,b,S,T,A,N,k,W,X,Y,$,V,B,v,I;do{if(b=Math.sin(p),S=Math.cos(p),T=Math.sqrt(y*b*(y*b)+(f*d-c*y*S)*(f*d-c*y*S)),T===0)return{azi1:0,s12:0};A=c*d+f*y*S,N=Math.atan2(T,A),k=f*y*b/T,W=1-k*k,X=W!==0?A-2*c*d/W:0,Y=o/16*W*(4+o*(4-3*W)),_=p,p=s+(1-Y)*o*k*(N+Y*T*(X+Y*A*(-1+2*X*X)))}while(Math.abs(p-_)>1e-12&&--x>0);return x===0?{azi1:NaN,s12:NaN}:($=W*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))),V=1+$/16384*(4096+$*(-768+$*(320-175*$))),B=$/1024*(256+$*(-128+$*(74-47*$))),v=B*T*(X+B/4*(A*(-1+2*X*X)-B/6*X*(-3+4*T*T)*(-3+4*X*X))),I=i*(1-o)*V*(N-v),{azi1:Math.atan2(y*b,f*d-c*y*S),s12:I})}function GH(n,e,t,r,i,o){let s=Math.atan((1-o)*Math.tan(n)),a=Math.sin(s),l=Math.cos(s),c=Math.sin(t),f=Math.cos(t),d=Math.atan2(a,l*f),y=l*c,p=1-y*y,_=p*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))),x=1+_/16384*(4096+_*(-768+_*(320-175*_))),b=_/1024*(256+_*(-128+_*(74-47*_))),S=r/(i*(1-o)*x),T,A=100,N,k,W,X;do N=Math.cos(2*d+S),k=Math.sin(S),W=Math.cos(S),X=b*k*(N+b/4*(W*(-1+2*N*N)-b/6*N*(-3+4*k*k)*(-3+4*N*N))),T=S,S=r/(i*(1-o)*x)+X;while(Math.abs(S-T)>1e-12&&--A>0);if(A===0)return{lat2:NaN,lon2:NaN};let Y=a*k-l*W*f,$=Math.atan2(a*W+l*k*f,(1-o)*Math.sqrt(y*y+Y*Y)),V=Math.atan2(k*c,l*W-a*k*f),B=o/16*p*(4+o*(4-3*p)),v=V-(1-B)*o*y*(S+B*k*(N+B*W*(-1+2*N*N))),I=e+v;return{lat2:$,lon2:I}}function rpe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function ipe(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),o=st(e-this.long0,this.over),s,a,l,c,f,d,y,p,_,x,b;return this.sphere?Math.abs(this.sin_p12-1)<=ot?(n.x=this.x0+this.a*(Ze-t)*Math.sin(o),n.y=this.y0-this.a*(Ze-t)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=ot?(n.x=this.x0+this.a*(Ze+t)*Math.sin(o),n.y=this.y0+this.a*(Ze+t)*Math.cos(o),n):(_=this.sin_p12*r+this.cos_p12*i*Math.cos(o),y=Math.acos(_),p=y?y/Math.sin(y):1,n.x=this.x0+this.a*p*i*Math.sin(o),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(o)),n):(s=xf(this.es),a=wf(this.es),l=Ef(this.es),c=bf(this.es),Math.abs(this.sin_p12-1)<=ot?(f=this.a*Zo(s,a,l,c,Ze),d=this.a*Zo(s,a,l,c,t),n.x=this.x0+(f-d)*Math.sin(o),n.y=this.y0-(f-d)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=ot?(f=this.a*Zo(s,a,l,c,Ze),d=this.a*Zo(s,a,l,c,t),n.x=this.x0+(f+d)*Math.sin(o),n.y=this.y0+(f+d)*Math.cos(o),n):Math.abs(e)<ot&&Math.abs(t-this.lat0)<ot?(n.x=n.y=0,n):(x=UH(this.lat0,this.long0,t,e,this.a,this.f),b=x.azi1,n.x=x.s12*Math.sin(b),n.y=x.s12*Math.cos(b),n))}function ope(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,o,s,a,l,c,f,d,y,p,_,x,b;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ze*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),o=this.long0,Math.abs(e)<=ot?s=this.lat0:(s=rl(i*this.sin_p12+n.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-Ze,Math.abs(a)<=ot?this.lat0>=0?o=st(this.long0+Math.atan2(n.x,-n.y),this.over):o=st(this.long0-Math.atan2(-n.x,n.y),this.over):o=st(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=o,n.y=s,n)):(l=xf(this.es),c=wf(this.es),f=Ef(this.es),d=bf(this.es),Math.abs(this.sin_p12-1)<=ot?(y=this.a*Zo(l,c,f,d,Ze),e=Math.sqrt(n.x*n.x+n.y*n.y),p=y-e,s=Og(p/this.a,l,c,f,d),o=st(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=o,n.y=s,n):Math.abs(this.sin_p12+1)<=ot?(y=this.a*Zo(l,c,f,d,Ze),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-y,s=Og(p/this.a,l,c,f,d),o=st(this.long0+Math.atan2(n.x,n.y),this.over),n.x=o,n.y=s,n):(_=Math.atan2(n.x,n.y),x=Math.sqrt(n.x*n.x+n.y*n.y),b=GH(this.lat0,this.long0,_,x,this.a,this.f),n.x=b.lon2,n.y=b.lat2,n))}var spe=["Azimuthal_Equidistant","aeqd"],zH={init:rpe,forward:ipe,inverse:ope,names:spe};function ape(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function lpe(n){var e,t,r,i,o,s,a,l,c=n.x,f=n.y;return r=st(c-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),s=this.sin_p14*e+this.cos_p14*t*i,o=1,(s>0||Math.abs(s)<=ot)&&(a=this.a*o*t*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*t*i)),n.x=a,n.y=l,n}function upe(n){var e,t,r,i,o,s,a;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=rl(e/this.a),r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=ot?(a=this.lat0,n.x=s,n.y=a,n):(a=rl(i*this.sin_p14+n.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-Ze,Math.abs(o)<=ot?(this.lat0>=0?s=st(this.long0+Math.atan2(n.x,-n.y),this.over):s=st(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=s,n.y=a,n):(s=st(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=s,n.y=a,n))}var cpe=["ortho"],VH={init:ape,forward:lpe,inverse:upe,names:cpe};var zi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ur={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function hpe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ze-fr/2?this.face=zi.TOP:this.lat0<=-(Ze-fr/2)?this.face=zi.BOTTOM:Math.abs(this.long0)<=fr?this.face=zi.FRONT:Math.abs(this.long0)<=Ze+fr?this.face=this.long0>0?zi.RIGHT:zi.LEFT:this.face=zi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function fpe(n){var e={x:0,y:0},t,r,i,o,s,a,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===zi.TOP)o=Ze-t,r>=fr&&r<=Ze+fr?(l.value=Ur.AREA_0,i=r-Ze):r>Ze+fr||r<=-(Ze+fr)?(l.value=Ur.AREA_1,i=r>0?r-Gi:r+Gi):r>-(Ze+fr)&&r<=-fr?(l.value=Ur.AREA_2,i=r+Ze):(l.value=Ur.AREA_3,i=r);else if(this.face===zi.BOTTOM)o=Ze+t,r>=fr&&r<=Ze+fr?(l.value=Ur.AREA_0,i=-r+Ze):r<fr&&r>=-fr?(l.value=Ur.AREA_1,i=-r):r<-fr&&r>=-(Ze+fr)?(l.value=Ur.AREA_2,i=-r-Ze):(l.value=Ur.AREA_3,i=r>0?-r+Gi:-r-Gi);else{var c,f,d,y,p,_,x;this.face===zi.RIGHT?r=ky(r,+Ze):this.face===zi.BACK?r=ky(r,+Gi):this.face===zi.LEFT&&(r=ky(r,-Ze)),y=Math.sin(t),p=Math.cos(t),_=Math.sin(r),x=Math.cos(r),c=p*x,f=p*_,d=y,this.face===zi.FRONT?(o=Math.acos(c),i=hC(o,d,f,l)):this.face===zi.RIGHT?(o=Math.acos(f),i=hC(o,d,-c,l)):this.face===zi.BACK?(o=Math.acos(-c),i=hC(o,d,-f,l)):this.face===zi.LEFT?(o=Math.acos(-f),i=hC(o,d,c,l)):(o=i=0,l.value=Ur.AREA_0)}return a=Math.atan(12/Gi*(i+Math.acos(Math.sin(i)*Math.cos(fr))-Ze)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Ur.AREA_1?a+=Ze:l.value===Ur.AREA_2?a+=Gi:l.value===Ur.AREA_3&&(a+=1.5*Gi),e.x=s*Math.cos(a),e.y=s*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function dpe(n){var e={lam:0,phi:0},t,r,i,o,s,a,l,c,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=Ur.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=Ur.AREA_1,t-=Ze):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=Ur.AREA_2,t=t<0?t+Gi:t-Gi):(d.value=Ur.AREA_3,t+=Ze),f=Gi/12*Math.tan(t),s=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),a=Math.atan(s),i=Math.cos(t),o=Math.tan(r),l=1-i*i*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===zi.TOP)c=Math.acos(l),e.phi=Ze-c,d.value===Ur.AREA_0?e.lam=a+Ze:d.value===Ur.AREA_1?e.lam=a<0?a+Gi:a-Gi:d.value===Ur.AREA_2?e.lam=a-Ze:e.lam=a;else if(this.face===zi.BOTTOM)c=Math.acos(l),e.phi=c-Ze,d.value===Ur.AREA_0?e.lam=-a+Ze:d.value===Ur.AREA_1?e.lam=-a:d.value===Ur.AREA_2?e.lam=-a-Ze:e.lam=a<0?-a-Gi:-a+Gi;else{var y,p,_;y=l,f=y*y,f>=1?_=0:_=Math.sqrt(1-f)*Math.sin(a),f+=_*_,f>=1?p=0:p=Math.sqrt(1-f),d.value===Ur.AREA_1?(f=p,p=-_,_=f):d.value===Ur.AREA_2?(p=-p,_=-_):d.value===Ur.AREA_3&&(f=p,p=_,_=-f),this.face===zi.RIGHT?(f=y,y=-p,p=f):this.face===zi.BACK?(y=-y,p=-p):this.face===zi.LEFT&&(f=y,y=p,p=-f),e.phi=Math.acos(-_)-Ze,e.lam=Math.atan2(p,y),this.face===zi.RIGHT?e.lam=ky(e.lam,-Ze):this.face===zi.BACK?e.lam=ky(e.lam,-Gi):this.face===zi.LEFT&&(e.lam=ky(e.lam,+Ze))}if(this.es!==0){var x,b,S;x=e.phi<0?1:0,b=Math.tan(e.phi),S=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),x&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function hC(n,e,t,r){var i;return n<ot?(r.value=Ur.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=fr?r.value=Ur.AREA_0:i>fr&&i<=Ze+fr?(r.value=Ur.AREA_1,i-=Ze):i>Ze+fr||i<=-(Ze+fr)?(r.value=Ur.AREA_2,i=i>=0?i-Gi:i+Gi):(r.value=Ur.AREA_3,i+=Ze)),i}function ky(n,e){var t=n+e;return t<-Gi?t+=qd:t>+Gi&&(t-=qd),t}var ppe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],HH={init:hpe,forward:fpe,inverse:dpe,names:ppe};var Rk=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ux=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],qH=.8487,WH=1.3523,$H=Xo/5,gpe=1/$H,Oy=18,fC=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},mpe=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function ype(n,e,t,r){for(var i=e;r;--r){var o=n(i);if(i-=o,Math.abs(o)<t)break}return i}function _pe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function vpe(n){var e=st(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*$H);r<0?r=0:r>=Oy&&(r=Oy-1),t=Xo*(t-gpe*r);var i={x:fC(Rk[r],t)*e,y:fC(ux[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*qH+this.x0,i.y=i.y*this.a*WH+this.y0,i}function xpe(n){var e={x:(n.x-this.x0)/(this.a*qH),y:Math.abs(n.y-this.y0)/(this.a*WH)};if(e.y>=1)e.x/=Rk[Oy][0],e.y=n.y<0?-Ze:Ze;else{var t=Math.floor(e.y*Oy);for(t<0?t=0:t>=Oy&&(t=Oy-1);;)if(ux[t][0]>e.y)--t;else if(ux[t+1][0]<=e.y)++t;else break;var r=ux[t],i=5*(e.y-r[0])/(ux[t+1][0]-r[0]);i=ype(function(o){return(fC(r,o)-e.y)/mpe(r,o)},i,ot,100),e.x/=fC(Rk[t],i),e.y=(5*t+i)*ni,n.y<0&&(e.y=-e.y)}return e.x=st(e.x+this.long0,this.over),e}var wpe=["Robinson","robin"],YH={init:_pe,forward:vpe,inverse:xpe,names:wpe};function Epe(){this.name="geocent"}function bpe(n){var e=tC(n,this.es,this.a);return e}function Spe(n){var e=nC(n,this.es,this.a,this.b);return e}var Cpe=["Geocentric","geocentric","geocent","Geocent"],XH={init:Epe,forward:bpe,inverse:Spe,names:Cpe};var oa={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},cx={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ipe(){if(Object.keys(cx).forEach((function(t){if(typeof this[t]>"u")this[t]=cx[t].def;else{if(cx[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);cx[t].num&&(this[t]=parseFloat(this[t]))}cx[t].degrees&&(this[t]=this[t]*ni)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ze)<ot?this.mode=this.lat0<0?oa.S_POLE:oa.N_POLE:Math.abs(this.lat0)<ot?this.mode=oa.EQUIT:(this.mode=oa.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Tpe(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,o;switch(this.mode){case oa.OBLIQ:o=this.sinph0*e+this.cosph0*t*r;break;case oa.EQUIT:o=t*r;break;case oa.S_POLE:o=-e;break;case oa.N_POLE:o=e;break}switch(o=this.pn1/(this.p-o),i=o*t*Math.sin(n.x),this.mode){case oa.OBLIQ:o*=this.cosph0*e-this.sinph0*t*r;break;case oa.EQUIT:o*=e;break;case oa.N_POLE:o*=-(t*r);break;case oa.S_POLE:o*=t*r;break}var s,a;return s=o*this.cg+i*this.sg,a=1/(s*this.sw*this.h1+this.cw),i=(i*this.cg-o*this.sg)*this.cw*a,o=s*a,n.x=i*this.a,n.y=o*this.a,n}function Dpe(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var o=Ao(n.x,n.y);if(Math.abs(o)<ot)e.x=0,e.y=n.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case oa.OBLIQ:e.y=Math.asin(s*this.sinph0+n.y*a*this.cosph0/o),n.y=(s-this.sinph0*Math.sin(e.y))*o,n.x*=a*this.cosph0;break;case oa.EQUIT:e.y=Math.asin(n.y*a/o),n.y=s*o,n.x*=a;break;case oa.N_POLE:e.y=Math.asin(s),n.y=-n.y;break;case oa.S_POLE:e.y=-Math.asin(s);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var Ape=["Tilted_Perspective","tpers"],ZH={init:Ipe,forward:Tpe,inverse:Dpe,names:Ape};function Rpe(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Mpe(n){var e=n.x,t=n.y,r,i,o,s;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/Ao(this.radius_p*Math.cos(t),Math.sin(t));if(i=a*Math.cos(e)*Math.cos(t),o=a*Math.sin(e)*Math.cos(t),s=a*Math.sin(t),(this.radius_g-i)*i-o*o-s*s*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/Ao(s,r)),n.y=this.radius_g_1*Math.atan(s/r)):(n.x=this.radius_g_1*Math.atan(o/r),n.y=this.radius_g_1*Math.atan(s/Ao(o,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,o=Math.sin(e)*r,s=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/Ao(s,r)),n.y=this.radius_g_1*Math.atan(s/r)):(n.x=this.radius_g_1*Math.atan(o/r),n.y=this.radius_g_1*Math.atan(s/Ao(o,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function Npe(n){var e=-1,t=0,r=0,i,o,s,a;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Ao(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Ao(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,o=2*this.radius_g*e,s=o*o-4*i*this.C,s<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-o-Math.sqrt(s))/(2*i),e=this.radius_g+a*e,t*=a,r*=a,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,o=2*this.radius_g*e,s=o*o-4*i*this.C,s<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-o-Math.sqrt(s))/(2*i),e=this.radius_g+a*e,t*=a,r*=a,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var Ppe=["Geostationary Satellite View","Geostationary_Satellite","geos"],KH={init:Rpe,forward:Mpe,inverse:Npe,names:Ppe};var hx=1.340264,fx=-.081106,dx=893e-6,px=.003796,dC=Math.sqrt(3)/2;function Lpe(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function kpe(n){var e=st(n.x-this.long0,this.over),t=n.y,r=Math.asin(dC*Math.sin(t)),i=r*r,o=i*i*i;return n.x=e*Math.cos(r)/(dC*(hx+3*fx*i+o*(7*dx+9*px*i))),n.y=r*(hx+fx*i+o*(dx+px*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ope(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,o,s,a,l,c;for(c=0;c<t&&(i=r*r,o=i*i*i,s=r*(hx+fx*i+o*(dx+px*i))-n.y,a=hx+3*fx*i+o*(7*dx+9*px*i),r-=l=s/a,!(Math.abs(l)<e));++c);return i=r*r,o=i*i*i,n.x=dC*n.x*(hx+3*fx*i+o*(7*dx+9*px*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/dC),n.x=st(n.x+this.long0,this.over),n}var Fpe=["eqearth","Equal Earth","Equal_Earth"],JH={init:Lpe,forward:kpe,inverse:Ope,names:Fpe};var gx=1e-10;function Bpe(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<gx)throw new Error;this.es?(this.en=Ry(this.es),this.m1=$c(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Upe,this.forward=jpe):(Math.abs(this.phi1)+gx>=Ze?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=zpe,this.forward=Gpe)}function jpe(n){var e=st(n.x-(this.long0||0),this.over),t=n.y,r,i,o;return r=this.am1+this.m1-$c(t,i=Math.sin(t),o=Math.cos(t),this.en),i=o*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Upe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=Ao(n.x,n.y=this.am1-n.y),i=My(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ze)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ze)<=gx)r=0;else throw new Error;return n.x=st(r+(this.long0||0),this.over),n.y=nl(i),n}function Gpe(n){var e=st(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>gx?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function zpe(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=Ao(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ze)throw new Error;return Math.abs(Math.abs(t)-Ze)<=gx?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=st(e+(this.long0||0),this.over),n.y=nl(t),n}var Vpe=["bonne","Bonne (Werner lat_1=90)"],QH={init:Bpe,names:Vpe};var eq={OBLIQUE:{forward:Ype,inverse:Zpe},TRANSVERSE:{forward:Xpe,inverse:Kpe}},pC={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Hpe(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=dk.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);let n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=rc(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t,r=Object.keys(pC),i=a=>{if(typeof this[a]>"u")return;let l=parseFloat(this[a])*ni;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){let l=r[a],c=pC[l],f=Object.entries(c);if(f.some(([y])=>typeof this[y]<"u")){t=c;for(let y=0;y<f.length;y++){let[p,_]=f[y],x=i(p);if(typeof x>"u")throw new Error("Missing parameter: "+p+".");this[_]=x}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");let{lamp:o,phip:s}=$pe(this,t);this.lamp=o,Math.abs(s)>ot?(this.cphip=Math.cos(s),this.sphip=Math.sin(s),this.projectionType=eq.OBLIQUE):this.projectionType=eq.TRANSVERSE}function qpe(n){return this.projectionType.forward(this,n)}function Wpe(n){return this.projectionType.inverse(this,n)}function $pe(n,e){let t,r;if(e===pC.ROTATE){let i=n.oLongC,o=n.oLatC,s=n.oAlpha;if(Math.abs(Math.abs(o)-Ze)<=ot)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90\xB0");r=i+Math.atan2(-1*Math.cos(s),-1*Math.sin(s)*Math.sin(o)),t=Math.asin(Math.cos(o)*Math.sin(s))}else if(e===pC.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,o=n.oLat1,s=n.oLong2,a=n.oLat2,l=Math.abs(o);if(Math.abs(o)>Ze-ot)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90\xB0");if(Math.abs(a)>Ze-ot)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90\xB0");if(Math.abs(o-a)<ot)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<ot)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(o)*Math.sin(a)*Math.cos(i)-Math.sin(o)*Math.cos(a)*Math.cos(s),Math.sin(o)*Math.cos(a)*Math.sin(s)-Math.cos(o)*Math.sin(a)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(o))}return{lamp:r,phip:t}}function Ype(n,e){let{x:t,y:r}=e;t+=n.long0;let i=Math.cos(t),o=Math.sin(r),s=Math.cos(r);e.x=st(Math.atan2(s*Math.sin(t),n.sphip*s*i+n.cphip*o)+n.lamp),e.y=Math.asin(n.sphip*o-n.cphip*s*i);let a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=Xo,a.y*=Xo),a}function Xpe(n,e){let{x:t,y:r}=e;t+=n.long0;let i=Math.cos(r),o=Math.cos(t);e.x=st(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*o);let s=n.obliqueProjection.forward(e);return n.isIdentity&&(s.x*=Xo,s.y*=Xo),s}function Zpe(n,e){n.isIdentity&&(e.x*=ni,e.y*=ni);let t=n.obliqueProjection.inverse(e),{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;let o=Math.cos(r),s=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),n.sphip*a*o-n.cphip*s),e.y=Math.asin(n.sphip*s+n.cphip*a*o)}return e.x=st(e.x+n.long0),e}function Kpe(n,e){n.isIdentity&&(e.x*=ni,e.y*=ni);let t=n.obliqueProjection.inverse(e),{x:r,y:i}=t;if(r<Number.MAX_VALUE){let o=Math.cos(i);r-=n.lamp,e.x=Math.atan2(o*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(o*Math.cos(r))}return e.x=st(e.x+n.long0),e}var Jpe=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"],tq={init:Hpe,forward:qpe,inverse:Wpe,names:Jpe};function nq(n){n.Proj.projections.add(Ny),n.Proj.projections.add(Py),n.Proj.projections.add(_H),n.Proj.projections.add(vH),n.Proj.projections.add(xH),n.Proj.projections.add(wH),n.Proj.projections.add(EH),n.Proj.projections.add(bH),n.Proj.projections.add(SH),n.Proj.projections.add(CH),n.Proj.projections.add(IH),n.Proj.projections.add(TH),n.Proj.projections.add(DH),n.Proj.projections.add(RH),n.Proj.projections.add(MH),n.Proj.projections.add(PH),n.Proj.projections.add(LH),n.Proj.projections.add(kH),n.Proj.projections.add(OH),n.Proj.projections.add(FH),n.Proj.projections.add(BH),n.Proj.projections.add(jH),n.Proj.projections.add(zH),n.Proj.projections.add(VH),n.Proj.projections.add(HH),n.Proj.projections.add(YH),n.Proj.projections.add(XH),n.Proj.projections.add(ZH),n.Proj.projections.add(KH),n.Proj.projections.add(JH),n.Proj.projections.add(QH),n.Proj.projections.add(tq)}var rq=Object.assign(tH,{defaultDatum:"WGS84",Proj:rc,WGS84:new rc("WGS84"),Point:uH,toPoint:iC,defs:Cy,nadgrid:_k,transform:kg,mgrs:sH,version:"__VERSION__"});nq(rq);var Yc=rq;var sq,iq=()=>new DecompressionStream("deflate-raw");try{iq(),sq=n=>We(null,null,function*(){let e=iq(),t=e.writable.getWriter(),r=e.readable.getReader(),i,o=[],s=0,a=0,l;for(t.write(n),t.close();!(l=yield r.read()).done;)i=l.value,o.push(i),s+=i.length;return!o[1]&&i||(i=new Uint8Array(s),o.map(c=>(i.set(c,a),a+=c.length))),i})}catch{}var Qpe=new TextDecoder,Mk=n=>{throw new Error("but-unzip~"+n)},oq=n=>Qpe.decode(n);function*aq(n,e=sq){let t=n.length-20,r=Math.max(t-65516,2);for(;(t=n.lastIndexOf(80,t-1))!==-1&&!(n[t+1]===75&&n[t+2]===5&&n[t+3]===6)&&t>r;);t===-1&&Mk(2);let i=(c,f)=>n.subarray(t+=c,t+=f),o=new DataView(n.buffer,n.byteOffset),s=c=>o.getUint16(c+t,!0),a=c=>o.getUint32(c+t,!0),l=s(10);for(l!==s(8)&&Mk(3),t=a(16);l--;){let c=s(10),f=s(30),d=s(32),y=a(20),p=a(42),_=oq(i(46,s(28))),x=oq(i(f,d)),b=t,S;t=p,S=i(30+s(26)+s(28),y),yield{filename:_,comment:x,read:()=>c&8?e(S):c?Mk(1):S},t=b}}var ege=/.+\.(shp|dbf|json|prj|cpg)$/i,lq=n=>We(null,null,function*(){let e={},t=[];for(let o of aq(n))ege.test(o.filename)&&t.push(Promise.resolve(o.read()).then(s=>e[o.filename]=s));yield Promise.all(t);let r={},i=new TextDecoder;for(let[o,s]of Object.entries(e))o.slice(-3).toLowerCase()==="shp"||o.slice(-3).toLowerCase()==="dbf"?r[o]=new DataView(s.buffer,s.byteOffset,s.byteLength):r[o]=i.decode(s);return r});var tge=globalThis.URL,uq=(n,e)=>{if(!e)return n;let t=new tge(n);return t.pathname=`${t.pathname}.${e}`,t.href};function Fg(n,e){return We(this,null,function*(){let t=uq(n,e),r=e==="prj"||e==="cpg";try{let i=yield fetch(t);if(i.status>399)throw new Error(i.statusText);if(r)return i.text();let o=yield i.arrayBuffer();return new DataView(o)}catch(i){if(r||e==="dbf")return!1;throw i}})}function nge(n){let e=0,t=1,r=n.length,i,o,s=[n[0][0],n[0][1],n[0][0],n[0][1]];for(;t<r;)i=o||n[0],o=n[t],e+=(o[0]-i[0])*(o[1]+i[1]),t++,o[0]<s[0]&&(s[0]=o[0]),o[1]<s[1]&&(s[1]=o[1]),o[0]>s[2]&&(s[2]=o[0]),o[1]>s[3]&&(s[3]=o[1]);return{ring:n,clockWise:e>0,bbox:s,children:[]}}function cq(n,e){return!(n.bbox[0]>e.bbox[0]||n.bbox[1]>e.bbox[1]||n.bbox[2]<e.bbox[2]||n.bbox[3]<e.bbox[3])}function fq(n,e=!1){let t=[],r=[];for(let s of n){let a=nge(s);a.clockWise!==e?t.push(a):r.push(a)}let i=[];for(let s of r){let a;for(let l of t)cq(l,s)&&(a?cq(a,l)&&(a=l):a=l);a?a.children.push(s.ring):i.push(s)}if(e)return{outers:t,orphens:i};if(i.length&&!e){let s=fq(n,!0);if(s.orphens.length===0){let a=[];for(let l of s.outers)a.push([l.ring.toReversed()].concat(l.children.map(c=>c.toReversed())));return a}}let o=[];for(let s of t)o.push([s.ring].concat(s.children));return o}po.prototype.parsePoint=function(n){return{type:"Point",coordinates:this.parseCoord(n,0)}};po.prototype.parseZPoint=function(n){let e=this.parsePoint(n);return e.coordinates.push(n.getFloat64(16,!0)),e};po.prototype.parsePointArray=function(n,e,t){let r=[],i=0;for(;i<t;)r.push(this.parseCoord(n,e)),e+=16,i++;return r};po.prototype.parseZPointArray=function(n,e,t,r){let i=0;for(;i<t;)r[i].push(n.getFloat64(e,!0)),i++,e+=8;return r};po.prototype.parseArrayGroup=function(n,e,t,r,i){let o=[],s=0,a,l=0,c;for(;s<r;)s++,t+=4,a=l,s===r?l=i:l=n.getInt32(t,!0),c=l-a,c&&(o.push(this.parsePointArray(n,e,c)),e+=c<<4);return o};po.prototype.parseZArrayGroup=function(n,e,t,r){let i=0;for(;i<t;)r[i]=this.parseZPointArray(n,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r};po.prototype.parseMultiPoint=function(n){let e={},t=n.getInt32(32,!0);if(!t)return null;let r=this.parseCoord(n,0),i=this.parseCoord(n,16);e.bbox=[r[0],r[1],i[0],i[1]];let o=36;return t===1?(e.type="Point",e.coordinates=this.parseCoord(n,o)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(n,o,t)),e};po.prototype.parseZMultiPoint=function(n){let e=this.parseMultiPoint(n);if(!e)return null;let t;if(e.type==="Point")return e.coordinates.push(n.getFloat64(72,!0)),e;t=e.coordinates.length;let r=52+(t<<4);return e.coordinates=this.parseZPointArray(n,r,t,e.coordinates),e};po.prototype.parsePolyline=function(n){let e={},t=n.getInt32(32,!0);if(!t)return null;let r=this.parseCoord(n,0),i=this.parseCoord(n,16);e.bbox=[r[0],r[1],i[0],i[1]];let o=n.getInt32(36,!0),s,a;return t===1?(e.type="LineString",s=44,e.coordinates=this.parsePointArray(n,s,o)):(e.type="MultiLineString",s=40+(t<<2),a=40,e.coordinates=this.parseArrayGroup(n,s,a,t,o)),e};po.prototype.parseZPolyline=function(n){let e=this.parsePolyline(n);if(!e)return null;let t=e.coordinates.length,r;return e.type==="LineString"?(r=60+(t<<4),e.coordinates=this.parseZPointArray(n,r,t,e.coordinates),e):(r=56+(e.coordinates.reduce(function(o,s){return o+s.length},0)<<4)+(t<<2),e.coordinates=this.parseZArrayGroup(n,r,t,e.coordinates),e)};po.prototype.polyFuncs=function(n){return n&&(n.type==="LineString"?(n.type="Polygon",n.coordinates=[n.coordinates],n):(n.coordinates=fq(n.coordinates),n.coordinates.length===1?(n.type="Polygon",n.coordinates=n.coordinates[0],n):(n.type="MultiPolygon",n)))};po.prototype.parsePolygon=function(n){return this.polyFuncs(this.parsePolyline(n))};po.prototype.parseZPolygon=function(n){return this.polyFuncs(this.parseZPolyline(n))};var hq={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function rge(n){return n?function(e,t){let r=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return n.inverse(r)}:function(e,t){return[e.getFloat64(t,!0),e.getFloat64(t+8,!0)]}}function po(n,e){if(!(this instanceof po))return new po(n,e);this.buffer=n,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}po.prototype.shpFuncs=function(n){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in hq))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[hq[e]],this.parseCoord=rge(n)};po.prototype.getShpCode=function(){return this.parseHeader().shpCode};po.prototype.parseHeader=function(){let n=this.buffer;return{length:n.getInt32(24)<<1,version:n.getInt32(28,!0),shpCode:n.getInt32(32,!0),bbox:[n.getFloat64(36,!0),n.getFloat64(44,!0),n.getFloat64(52,!0),n.getFloat64(60,!0)]}};po.prototype.getRows=function(){let n=100,e=this.buffer.byteLength-8,t=[],r;for(;n<=e&&(r=this.getRow(n),!!r);)n+=8,n+=r.len,r.type?t.push(this.parseFunc(r.data)):t.push(null);return t};po.prototype.getRow=function(n){let e=this.buffer.getInt32(n),t=this.buffer.getInt32(n+4)<<1;if(t===0)return{id:e,len:t,type:0};if(!(n+t+8>this.buffer.byteLength))return{id:e,len:t,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+n+12,t-4),type:this.buffer.getInt32(n+8,!0)}};function gC(n,e){return new po(n,e).rows}var ige=/^(?:ANSI\s)?(\d+)$/m;function Nk(n,e){if(!n)return r;try{new TextDecoder(n.trim())}catch{var t=ige.exec(n);return t&&!e?Nk("windows-"+t[1],!0):(n=void 0,r)}return r;function r(i){var o=new TextDecoder(n||void 0),s=o.decode(i,{stream:!0})+o.decode();return s.replace(/\0/g,"").trim()}}function oge(n){var e={};return e.lastUpdated=new Date(n.getUint8(1)+1900,n.getUint8(2),n.getUint8(3)),e.records=n.getUint32(4,!0),e.headerLen=n.getUint16(8,!0),e.recLen=n.getUint16(10,!0),e}function sge(n,e,t){for(var r=[],i=32;i<e&&(r.push({name:t(new Uint8Array(n.buffer.slice(n.byteOffset+i,n.byteOffset+i+11))),dataType:String.fromCharCode(n.getUint8(i+11)),len:n.getUint8(i+16),decimal:n.getUint8(i+17)}),n.getUint8(i+32)!==13);)i+=32;return r}function age(n,e,t,r,i){let o=new Uint8Array(n.buffer.slice(n.byteOffset+e,n.byteOffset+e+t));var s=i(o);switch(r){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return s.toLowerCase()==="y"||s.toLowerCase()==="t";default:return s}}function lge(n,e,t,r){for(var i={},o=0,s=t.length,a,l;o<s;)l=t[o],a=age(n,e,l.len,l.dataType,r),e+=l.len,typeof a<"u"&&(i[l.name]=a),o++;return i}function mC(n,e){for(var t=Nk(e),r=oge(n),i=sge(n,r.headerLen-1,t),o=(i.length+1<<5)+2,s=r.recLen,a=r.records,l=[];a;)l.push(lge(n,o,i,t)),o+=s,a--;return l}var uge=globalThis.URL,cge=n=>{if(!n)throw new Error("forgot to pass buffer");if(Fy(n))return new Uint8Array(n);if(Fy(n.buffer))return n.BYTES_PER_ELEMENT===1?n:new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("invalid buffer like object")},hge=new TextDecoder,pq=n=>{if(n){if(typeof n=="string")return n;if(Fy(n)||ArrayBuffer.isView(n)||Pk(n))return hge.decode(n)}},gq=n=>{if(!n)throw new Error("forgot to pass buffer");if(Pk(n))return n;if(Fy(n))return new DataView(n);if(Fy(n.buffer))return new DataView(n.buffer,n.byteOffset,n.byteLength);throw new Error("invalid buffer like object")};function Fy(n){return n instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(n)==="[object ArrayBuffer]"}function Pk(n){return n instanceof globalThis.DataView||Object.prototype.toString.call(n)==="[object DataView]"}var Lk=function([n,e]){let t={};t.type="FeatureCollection",t.features=[];let r=0,i=n.length;for(e||(e=[]);r<i;)t.features.push({type:"Feature",geometry:n[r],properties:e[r]||{}}),r++;return t},mq=function(n,e){return We(this,null,function*(){let t;n=cge(n);let r=yield lq(n),i=[];e=e||[];for(t in r)t.indexOf("__MACOSX")===-1&&(t.slice(-4).toLowerCase()===".shp"?(i.push(t.slice(0,-4)),r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=r[t]):t.slice(-4).toLowerCase()===".prj"?r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=Yc(r[t]):t.slice(-5).toLowerCase()===".json"||e.indexOf(t.split(".").pop())>-1?i.push(t.slice(0,-3)+t.slice(-3).toLowerCase()):(t.slice(-4).toLowerCase()===".dbf"||t.slice(-4).toLowerCase()===".cpg")&&(r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=r[t]));if(!i.length)throw new Error("no layers founds");let o=i.map(function(s){let a,l,c=s.lastIndexOf(".");return c>-1&&s.slice(c).indexOf("json")>-1?(a=JSON.parse(r[s]),a.fileName=s.slice(0,c)):e.indexOf(s.slice(c+1))>-1?(a=r[s],a.fileName=s):(r[s+".dbf"]&&(l=mC(r[s+".dbf"],r[s+".cpg"])),a=Lk([gC(r[s+".shp"],r[s+".prj"]),l]),a.fileName=s),a});return o.length===1?o[0]:o})};function fge(n,e){return We(this,null,function*(){let t=yield Fg(n);return mq(t,e)})}var dge=n=>We(null,null,function*(){let e=yield Promise.all([Fg(n,"shp"),Fg(n,"prj")]),t=!1;try{e[1]&&(t=Yc(e[1]))}catch{t=!1}return gC(e[0],t)}),pge=n=>We(null,null,function*(){let[e,t]=yield Promise.all([Fg(n,"dbf"),Fg(n,"cpg")]);if(e)return mC(e,t)}),dq=(n,e)=>new uge(n,globalThis?.document?.location).pathname.slice(-4).toLowerCase()===e,gge=({shp:n,dbf:e,cpg:t,prj:r})=>{let i=[yge(n,r)];return e&&i.push(_ge(e,t)),Lk(i)},mge=function(n,e){return We(this,null,function*(){if(typeof n!="string"){if(Fy(n)||ArrayBuffer.isView(n)||Pk(n))return mq(n);if(n.shp)return gge(n);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(dq(n,".zip"))return fge(n,e);dq(n,".shp")&&(n=n.slice(0,-4));let t=yield Promise.all([dge(n),pge(n)]);return Lk(t)})},yge=function(n,e){if(n=gq(n),e=pq(e),typeof e=="string")try{e=Yc(e)}catch{e=!1}return gC(n,e)},_ge=function(n,e){return n=gq(n),e=pq(e),mC(n,e)},yq=mge;var vq=$l(Ok());var yC=class{static _epsgCache=new Map;static getProjection(e){return Yc(e)}static registerWktProjection(e){let t=e.replace(/\s+/g," ").trim(),r=this._epsgCache.get(t);if(r)return r;let i=this._generateCode(t);return Yc.defs(i)||(Yc.defs(i,t),B8(Yc)),this._epsgCache.set(t,i),i}static getEpsgCodeFromWkt(e){let t=e.replace(/\s+/g,"").toUpperCase();if(t.includes("GCS_WGS_1984")||t.includes('DATUM["D_WGS_1984"]'))return"EPSG:4326";if(t.includes("WGS_1984_WEB_MERCATOR"))return"EPSG:3857";if(t.includes("ITRF_1996"))return"EPSG:5254";throw new Error("EPSG code not found in WKT")}static transformPoint(e,t,r){let i=this.getProjection(t),o=this.getProjection(r);return Yc(i,o,e)}static _generateCode(e){return`CUSTOM:${this._hash(e)}`}static _hash(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Math.abs(t).toString()}};var _C=class{type="zip";import(e){return We(this,null,function*(){let t=yield e.arrayBuffer(),r="EPSG:4326",i=yield yq(t),o=yield this.extractPrj(e);return o&&(r=yC.getEpsgCodeFromWkt(o)),{geojson:i,crs:r}})}extractPrj(e){return We(this,null,function*(){let t=yield vq.default.loadAsync(e),r=Object.values(t.files).find(i=>i.name.toLowerCase().endsWith(".prj"));return r?yield r.async("text"):null})}};var vC=class{type="geojson";import(e){return We(this,null,function*(){let t=yield e.text(),r=JSON.parse(t);return this._validate(r),{geojson:r,crs:this._detectCrs(r)}})}_detectCrs(e){let t=e?.crs?.properties?.name;return console.log("crsName:",t),t??"EPSG:4326"}_validate(e){if(e.type!=="FeatureCollection")throw new Error("Invalid GeoJSON: not a FeatureCollection");if(!Array.isArray(e.features))throw new Error("Invalid GeoJSON: features missing")}};var Ei=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],vge="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",xge={rte:xq,trk:wq,wpt:Eq},wge=rt(Ei,{rte:As(xq),trk:As(wq),wpt:As(Eq)}),Ege=rt(Ei,{text:Oe(bt,"linkText"),type:Oe(bt,"linkType")}),bge=rt(Ei,{name:Oe(bt),email:Xge,link:mx}),Sge=rt(Ei,{name:Oe(bt),desc:Oe(bt),author:Oe(Wge),copyright:Oe($ge),link:mx,time:Oe(K1),keywords:Oe(bt),bounds:Yge,extensions:xC}),Cge=rt(Ei,{year:Oe(Sa),license:Oe(bt)}),Ige=rt(Ei,{rte:ht(Qge),trk:ht(eme),wpt:ht(nme)}),Fk=class extends BS{constructor(e){super(),e=e||{},this.dataProjection=sn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){let i=e[t];if(this.readExtensions_){let o=i.get("extensionsNode_")||null;this.readExtensions_(i,o)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Ja(e)):Ka(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){let r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!Ei.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Ei.includes(t.namespaceURI)&&t.localName==="metadata")return Nt({},Sge,t,[]);return null}readFeatureFromNode(e,t){if(!Ei.includes(e.namespaceURI))return null;let r=xge[e.localName];if(!r)return null;let i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!Ei.includes(e.namespaceURI))return[];if(e.localName=="gpx"){let r=Nt([],wge,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);let r=pf("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",wy),r.setAttributeNS(wy,"xsi:schemaLocation",vge),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Kr({node:r},Ige,qge,e,[t]),r}},Tge=rt(Ei,{name:Oe(bt),cmt:Oe(bt),desc:Oe(bt),src:Oe(bt),link:mx,number:Oe(Sa),extensions:xC,type:Oe(bt),rtept:Zge}),Dge=rt(Ei,{ele:Oe(cr),time:Oe(K1)}),Age=rt(Ei,{name:Oe(bt),cmt:Oe(bt),desc:Oe(bt),src:Oe(bt),link:mx,number:Oe(Sa),type:Oe(bt),extensions:xC,trkseg:Jge}),Rge=rt(Ei,{trkpt:Kge}),Mge=rt(Ei,{ele:Oe(cr),time:Oe(K1)}),Nge=rt(Ei,{ele:Oe(cr),time:Oe(K1),magvar:Oe(cr),geoidheight:Oe(cr),name:Oe(bt),cmt:Oe(bt),desc:Oe(bt),src:Oe(bt),link:mx,sym:Oe(bt),type:Oe(bt),fix:Oe(bt),sat:Oe(Sa),hdop:Oe(cr),vdop:Oe(cr),pdop:Oe(cr),ageofdgpsdata:Oe(cr),dgpsid:Oe(Sa),extensions:xC}),Pge=["text","type"],Lge=rt(Ei,{text:ht(xr),type:ht(xr)}),kge=rt(Ei,["name","cmt","desc","src","link","number","type","rtept"]),Oge=rt(Ei,{name:ht(xr),cmt:ht(xr),desc:ht(xr),src:ht(xr),link:ht(Uk),number:ht(J1),type:ht(xr),rtept:WL(ht(Gk))}),Fge=rt(Ei,["ele","time"]),Bge=rt(Ei,["name","cmt","desc","src","link","number","type","trkseg"]),jge=rt(Ei,{name:ht(xr),cmt:ht(xr),desc:ht(xr),src:ht(xr),link:ht(Uk),number:ht(J1),type:ht(xr),trkseg:WL(ht(tme))}),Uge=Nl("trkpt"),Gge=rt(Ei,{trkpt:ht(Gk)}),zge=rt(Ei,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Vge=rt(Ei,{ele:ht(ra),time:ht(Fz),magvar:ht(ra),geoidheight:ht(ra),name:ht(xr),cmt:ht(xr),desc:ht(xr),src:ht(xr),link:ht(Uk),sym:ht(xr),type:ht(xr),fix:ht(xr),sat:ht(J1),hdop:ht(ra),vdop:ht(ra),pdop:ht(ra),ageofdgpsdata:ht(ra),dgpsid:ht(J1)}),Hge={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function qge(n,e,t){let r=n.getGeometry();if(r){let i=Hge[r.getType()];if(i){let o=e[e.length-1].node;return pf(o.namespaceURI,i)}}}function Bk(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function jk(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let o=0,s=e.length/4;o<s;o++)e[o*i]=e[o*4],e[o*i+1]=e[o*4+1],n.hasZ&&(e[o*i+2]=e[o*4+2]),n.hasM&&(e[o*i+2]=e[o*4+3]);if(e.length=e.length/4*i,t)for(let o=0,s=t.length;o<s;o++)t[o]=t[o]/4*i}return r}function Wge(n,e){let t=Nt({},bge,n,e);if(t)return t}function $ge(n,e){let t=Nt({},Cge,n,e);if(t){let r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function Yge(n,e){let t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),o=n.getAttribute("maxlat"),s=n.getAttribute("maxlon");i!==null&&r!==null&&s!==null&&o!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(s),parseFloat(o)]])}function Xge(n,e){let t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function mx(n,e){let t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),qc(Ege,n,e)}function xC(n,e){let t=e[e.length-1];t.extensionsNode_=n}function Zge(n,e){let t=Nt({},Dge,n,e);if(t){let r=e[e.length-1],i=r.flatCoordinates,o=r.layoutOptions;Bk(i,o,n,t)}}function Kge(n,e){let t=Nt({},Mge,n,e);if(t){let r=e[e.length-1],i=r.flatCoordinates,o=r.layoutOptions;Bk(i,o,n,t)}}function Jge(n,e){let t=e[e.length-1];qc(Rge,n,e);let r=t.flatCoordinates;t.ends.push(r.length)}function xq(n,e){let t=e[0],r=Nt({flatCoordinates:[],layoutOptions:{}},Tge,n,e);if(!r)return;let i=r.flatCoordinates;delete r.flatCoordinates;let o=r.layoutOptions;delete r.layoutOptions;let s=jk(o,i),a=new ho(i,s);Yo(a,!1,t);let l=new Zr(a);return l.setProperties(r,!0),l}function wq(n,e){let t=e[0],r=Nt({flatCoordinates:[],ends:[],layoutOptions:{}},Age,n,e);if(!r)return;let i=r.flatCoordinates;delete r.flatCoordinates;let o=r.ends;delete r.ends;let s=r.layoutOptions;delete r.layoutOptions;let a=jk(s,i,o),l=new Qs(i,a,o);Yo(l,!1,t);let c=new Zr(l);return c.setProperties(r,!0),c}function Eq(n,e){let t=e[0],r=Nt({},Nge,n,e);if(!r)return;let i={},o=Bk([],i,n,r),s=jk(i,o),a=new Ui(o,s);Yo(a,!1,t);let l=new Zr(a);return l.setProperties(r,!0),l}function Uk(n,e,t){n.setAttribute("href",e);let i=t[t.length-1].properties,o=[i.linkText,i.linkType];Kr({node:n},Lge,ss,o,t,Pge)}function Gk(n,e,t){let r=t[t.length-1],o=r.node.namespaceURI,s=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(s.time=e[3]);case"XYZ":e[2]!==0&&(s.ele=e[2]);break;case"XYM":e[2]!==0&&(s.time=e[2]);break;default:}let l=n.nodeName=="rtept"?Fge[o]:zge[o],c=na(s,l);Kr({node:n,properties:s},Vge,ss,c,t,l)}function Qge(n,e,t){let r=t[0],i=e.getProperties(),o={node:n};o.properties=i;let s=e.getGeometry();if(s.getType()=="LineString"){let f=Yo(s,!0,r);o.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}let a=t[t.length-1].node,l=kge[a.namespaceURI],c=na(i,l);Kr(o,Oge,ss,c,t,l)}function eme(n,e,t){let r=t[0],i=e.getProperties(),o={node:n};o.properties=i;let s=e.getGeometry();if(s.getType()=="MultiLineString"){let f=Yo(s,!0,r);i.trkseg=f.getLineStrings()}let a=t[t.length-1].node,l=Bge[a.namespaceURI],c=na(i,l);Kr(o,jge,ss,c,t,l)}function tme(n,e,t){let r={node:n};r.geometryLayout=e.getLayout(),r.properties={},Kr(r,Gge,Uge,e.getCoordinates(),t)}function nme(n,e,t){let r=t[0],i=t[t.length-1];i.properties=e.getProperties();let o=e.getGeometry();if(o.getType()=="Point"){let s=Yo(o,!0,r);i.geometryLayout=s.getLayout(),Gk(n,s.getCoordinates(),t)}}var bq=Fk;var wC=class{type="gpx";import(e){return We(this,null,function*(){let t=yield e.text(),r=new bq().readFeatures(t);return{geojson:new fo().writeFeaturesObject(r),crs:"EPSG:4326"}})}};var zk=class extends Hd{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(EC(e),this.adaptOptions(t))}readFeatureFromText(e,t){return It()}readFeatures(e,t){return this.readFeaturesFromText(EC(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return It()}readGeometry(e,t){return this.readGeometryFromText(EC(e),this.adaptOptions(t))}readGeometryFromText(e,t){return It()}readProjection(e){return this.readProjectionFromText(EC(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return It()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return It()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return It()}};function EC(n){return typeof n=="string"?n:""}var Sq=zk;var rme={POINT:Ui,LINESTRING:ho,POLYGON:Wo,MULTIPOINT:Dl,MULTILINESTRING:Qs,MULTIPOLYGON:Al},Cq="EMPTY",Iq="Z",Tq="M",ime="ZM",Mr={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},ome={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},Vk=class{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let e=this.nextChar_(),t=this.index_,r=e,i;if(e=="(")i=Mr.LEFT_PAREN;else if(e==",")i=Mr.COMMA;else if(e==")")i=Mr.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")i=Mr.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))i=Mr.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")i=Mr.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:i}}readNumber_(){let e,t=this.index_,r=!1,i=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(i=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e,t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}},Hk=class{constructor(e){this.lexer_=e,this.token_={position:0,type:Mr.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){let t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY",t=this.token_;if(this.isTokenType(Mr.TEXT)){let r=t.value;r===Iq?e="XYZ":r===Tq?e="XYM":r===ime&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Mr.LEFT_PAREN)){let e=[];do e.push(this.parseGeometry_());while(this.match(Mr.COMMA));if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Mr.LEFT_PAREN)){let e=this.parsePoint_();if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Mr.LEFT_PAREN)){let e=this.parsePointList_();if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Mr.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Mr.LEFT_PAREN)){let e;if(this.token_.type==Mr.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Mr.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Mr.LEFT_PAREN)){let e=this.parsePolygonTextList_();if(this.match(Mr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){let e=[],t=this.layout_.length;for(let r=0;r<t;++r){let i=this.token_;if(this.match(Mr.NUMBER))e.push(i.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){let e=[this.parsePoint_()];for(;this.match(Mr.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){let e=[this.parsePointText_()];for(;this.match(Mr.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){let e=[this.parseLineStringText_()];for(;this.match(Mr.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){let e=[this.parsePolygonText_()];for(;this.match(Mr.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){let e=this.isTokenType(Mr.TEXT)&&this.token_.value==Cq;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let e=this.token_;if(this.match(Mr.TEXT)){let t=e.value;this.layout_=this.parseGeometryLayout_();let r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new Ds([]);let s=this.parseGeometryCollectionText_();return new Ds(s)}let i=rme[t];if(!i)throw new Error("Invalid geometry type: "+t);let o;if(r)t=="POINT"?o=[NaN,NaN]:o=[];else switch(t){case"POINT":{o=this.parsePointText_();break}case"LINESTRING":{o=this.parseLineStringText_();break}case"POLYGON":{o=this.parsePolygonText_();break}case"MULTIPOINT":{o=this.parseMultiPointText_();break}case"MULTILINESTRING":{o=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{o=this.parseMultiPolygonText_();break}default:break}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())}},qk=class extends Sq{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){let t=new Vk(e);return new Hk(t).parse()}readFeatureFromText(e,t){let r=this.readGeometryFromText(e,t),i=new Zr;return i.setGeometry(r),i}readFeaturesFromText(e,t){let r=[],i=this.readGeometryFromText(e,t);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];let o=[];for(let s=0,a=r.length;s<a;++s){let l=new Zr;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(e,t){let r=this.parse_(e);return Yo(r,!1,t)}writeFeatureText(e,t){let r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);let r=[];for(let o=0,s=e.length;o<s;++o)r.push(e[o].getGeometry());let i=new Ds(r);return this.writeGeometryText(i,t)}writeGeometryText(e,t){return Rq(Yo(e,!0,t))}};function Dq(n){let e=n.getCoordinates();return e.length===0?"":e.join(" ")}function sme(n){let e=[],t=n.getPoints();for(let r=0,i=t.length;r<i;++r)e.push("("+Dq(t[r])+")");return e.join(",")}function ame(n){let e=[],t=n.getGeometries();for(let r=0,i=t.length;r<i;++r)e.push(Rq(t[r]));return e.join(",")}function Wk(n){let e=n.getCoordinates(),t=[];for(let r=0,i=e.length;r<i;++r)t.push(e[r].join(" "));return t.join(",")}function lme(n){let e=[],t=n.getLineStrings();for(let r=0,i=t.length;r<i;++r)e.push("("+Wk(t[r])+")");return e.join(",")}function Aq(n){let e=[],t=n.getLinearRings();for(let r=0,i=t.length;r<i;++r)e.push("("+Wk(t[r])+")");return e.join(",")}function ume(n){let e=[],t=n.getPolygons();for(let r=0,i=t.length;r<i;++r)e.push("("+Aq(t[r])+")");return e.join(",")}function cme(n){let e=n.getLayout(),t="";return(e==="XYZ"||e==="XYZM")&&(t+=Iq),(e==="XYM"||e==="XYZM")&&(t+=Tq),t}var hme={Point:Dq,LineString:Wk,Polygon:Aq,MultiPoint:sme,MultiLineString:lme,MultiPolygon:ume,GeometryCollection:ame};function Rq(n){let e=n.getType(),t=hme[e],r=t(n),i=ome[e];if(typeof n.getFlatCoordinates=="function"){let o=cme(n);o.length>0&&(i+=" "+o)}return r.length===0?i+" "+Cq:i+"("+r+")"}var yx=qk;var bC=class{type="wkt";import(e){return We(this,null,function*(){let t=yield e.text(),r=new yx().readFeatures(t);return{geojson:new fo().writeFeaturesObject(r),crs:"EPSG:4326"}})}};var SC=class n{type="kml";export(e){let r=new fo().readFeatures(e.geojson,{dataProjection:e.crs,featureProjection:"EPSG:4326"}),i=new $S({extractStyles:!0}).writeFeatures(r,{featureProjection:"EPSG:4326"}),o=new Blob([i],{type:"application/vnd.google-earth.kml+xml"});return Promise.resolve(o)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};var By=class{static toEPSG4326(e,t){if(t==="EPSG:4326")return e;let r=new fo,i=r.readFeatures(e,{dataProjection:t,featureProjection:"EPSG:4326"});return r.writeFeaturesObject(i)}};var iW=$l(rW());var MC=class{type="zip";export(e){return We(this,null,function*(){if(e?.geojson===void 0||e?.crs===void 0)throw new Error("Invalid data");let t=By.toEPSG4326(e.geojson,e.crs);e.geojson.features.forEach(o=>{o.properties||(o.properties={});for(let s in o.properties)o.properties[s]===void 0&&(o.properties[s]=null)});let r={folder:"export_layers",filename:"map_data",outputType:"blob",compression:"DEFLATE",types:{point:"points",polygon:"polygons",polyline:"lines"}};return iW.default.zip(t,r)})}};var NC=class{type="geojson";export(e){return We(this,null,function*(){let t=By.toEPSG4326(e.geojson,e.crs),r=JSON.stringify(t,null,2);return new Blob([r],{type:"application/geo+json"})})}};var $d=class n{dataSignal=un(null);_importStrategies=[new YS,new _C,new vC,new wC,new bC];_exportStrategies=[new SC,new MC,new NC];currentData(){return this.dataSignal()}setData(e){this.dataSignal.set(e)}import(e){return We(this,null,function*(){let t=e.name.split(".").pop()?.toLowerCase(),r=this._importStrategies.find(o=>o.type===t);if(!r)throw new Error(`Unsupported file type: ${t}`);let i=yield r.import(e);this.dataSignal.set(i)})}export(e){return We(this,null,function*(){let t=this.dataSignal();if(!t)throw new Error("No geo data loaded");let r=this._exportStrategies.find(i=>i.type===e);if(!r)throw new Error(`Export strategy not found: ${e}`);return yield r.export(t)})}exportAllData(e,t){return We(this,null,function*(){let r=this._exportStrategies.find(o=>o.type===e);if(!r)throw new Error(`Export strategy not found: ${e}`);let i=t?{geojson:t,crs:"EPSG:4326"}:this.dataSignal();if(!i)throw new Error("No geo data to export");return yield r.export(i)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ro=class n{rightClickedFeature=un(null);_map=un(null);_hoveredFeatureInfo=un(null);_vectorLayers=un([]);_layers=un([]);hoverSubject=new en;_highlightSource;map=this._map.asReadonly();vectorLayers=this._vectorLayers.asReadonly();hoveredFeatureInfo=this._hoveredFeatureInfo.asReadonly();layers=this._layers.asReadonly();selectedStacItem=un(null);setMap(e){this._map.set(e),this._initialHoverInteraction(e),this.refreshLayers()}selectStacItem(e){this.selectedStacItem.set(e)}handleRightClick(e){e.preventDefault();let t=this.map();if(!t)return;let r=t.getEventPixel(e),i=t.forEachFeatureAtPixel(r,o=>o,{layerFilter:o=>o.get("type")==="vector",hitTolerance:5});if(i){let o=i.getProperties();this.rightClickedFeature.set(tn(dt({ol_uid:ct(i)},o),{clientX:e.clientX,clientY:e.clientY,feature:i}))}else this.rightClickedFeature.set(null)}getLayersByType(e){return this.map().getLayers().getArray().filter(t=>t.get("type")===e)}setBasemapVisibility(e){this.getLayersByType("basemap").forEach(r=>{r.setVisible(!1)}),e.layer.setVisible(!0)}zoomToVectorLayer(e){let t=e.getSource();if(!t)return;let r=t.getExtent();if(!r||r.length===0||ms(r))return;let i=this.map();if(!i)return;let o=i.getView();if(!o)return;let s=o.getResolution(),a=bo(r,s*20);o.fit(a,{duration:500})}removeVectorLayer(e){let t=this.map();t&&(t.removeLayer(e),this.refreshVectorLayers())}zoomToLayer(e){let t=this.map();if(!t)return;if(e.get("type")==="stac"){let i=e.getExtent();i&&t.getView().fit(i,{duration:500,padding:[20,20,20,20]});return}let r=e.getSource();if(r&&r.getExtent){let i=r.getExtent();ms(i)||t.getView().fit(i,{duration:500})}}refreshVectorLayers(){let e=this.map();if(e){let t=e.getLayers().getArray().filter(r=>r.get("type")==="vector");this._vectorLayers.set([...t])}}refreshLayers(){let e=this.map();if(!e)return;let t=e.getLayers().getArray().filter(r=>r.get("name")&&r.get("type")!=="basemap");this._layers.set([...t])}getImportedSource(){let e=this.map();if(!e)throw new Error("Map has not been initialized yet.");let r=e.getLayers().getArray().find(i=>i.get("id")==="imported");return r?r.getSource():(console.warn("Imported layer not found. Returning an empty source."),new ba)}getVectorSource(){let e=this.map();if(!e)throw new Error("Map not initialized");let t=e.getLayers().getArray(),r=t.find(o=>o.get("id")==="drawing");if(r)return r.getSource();let i=t.find(o=>o.get("type")==="vector");return i?i.getSource():new ba}_initialHoverInteraction(e){this._highlightSource=new ba;let t=new Tl({source:this._highlightSource,style:this.HOVER_STYLE,zIndex:9999});e.addLayer(t),this.hoverSubject.pipe(hA(16,wc,{leading:!0,trailing:!0}),RE((r,i)=>r.pixel[0]===i.pixel[0]&&r.pixel[1]===i.pixel[1])).subscribe(r=>{this._performHoverCheck(r,e)}),e.on("pointermove",r=>this.hoverSubject.next(r))}HOVER_STYLE=new Xr({stroke:new ci({color:"#fbbf24",width:5}),fill:new Er({color:"rgba(251, 191, 36, 0.4)"}),image:new Ts({radius:8,fill:new Er({color:"#fbbf24"}),stroke:new ci({color:"#ffffff",width:2})})});_performHoverCheck(e,t){let r=t.forEachFeatureAtPixel(e.pixel,a=>a,{layerFilter:a=>a.get("type")==="vector",hitTolerance:3}),i=r?ct(r):null,o=this.hoveredFeatureInfo()?.ol_uid;if(this._highlightSource&&i!==o)if(this._highlightSource.clear(!0),r&&r instanceof Zr){this._highlightSource.addFeature(r);let s=r.getProperties(),{geometry:a}=s,l=Dp(s,["geometry"]);this._hoveredFeatureInfo.set(dt({ol_uid:i},l)),t.getTargetElement().style.cursor="pointer"}else this._hoveredFeatureInfo.set(null),t.getTargetElement().style.cursor=""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};function Yd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function PC(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}function xx(n,e,t,r,i,o,s){s=s??Yd();let a=1/(n-e),l=1/(t-r),c=1/(i-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(n+e)*a,s[13]=(r+t)*l,s[14]=(o+i)*c,s[15]=1,s}function tO(n,e,t,r,i){return i=i??Yd(),i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*t,i[5]=n[5]*t,i[6]=n[6]*t,i[7]=n[7]*t,i[8]=n[8]*r,i[9]=n[9]*r,i[10]=n[10]*r,i[11]=n[11]*r,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function oW(n,e,t,r,i){i=i??Yd();let o,s,a,l,c,f,d,y,p,_,x,b;return n===i?(i[12]=n[0]*e+n[4]*t+n[8]*r+n[12],i[13]=n[1]*e+n[5]*t+n[9]*r+n[13],i[14]=n[2]*e+n[6]*t+n[10]*r+n[14],i[15]=n[3]*e+n[7]*t+n[11]*r+n[15]):(o=n[0],s=n[1],a=n[2],l=n[3],c=n[4],f=n[5],d=n[6],y=n[7],p=n[8],_=n[9],x=n[10],b=n[11],i[0]=o,i[1]=s,i[2]=a,i[3]=l,i[4]=c,i[5]=f,i[6]=d,i[7]=y,i[8]=p,i[9]=_,i[10]=x,i[11]=b,i[12]=o*e+c*t+p*r+n[12],i[13]=s*e+f*t+_*r+n[13],i[14]=a*e+d*t+x*r+n[14],i[15]=l*e+y*t+b*r+n[15]),i}function sW(n,e,t,r){return r=r??Yd(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n,r[13]=e,r[14]=t,r[15]=1,r}var Nme=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Pme=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,LC=class{constructor(e){this.gl_=e,this.program_=kC(e,Pme,Nme),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,i,o,s,a,l,c,f,d,y,p){let _=this.gl_;l===void 0&&(l=i),c===void 0&&(c=o),s===void 0&&(s=t),a===void 0&&(a=r),f===void 0&&(f=s),d===void 0&&(d=a),y===void 0&&(y=_.canvas.width),p===void 0&&(p=_.canvas.height),_.bindTexture(_.TEXTURE_2D,e),_.useProgram(this.program_),_.bindBuffer(_.ARRAY_BUFFER,this.positionBuffer),_.enableVertexAttribArray(this.positionLocation),_.vertexAttribPointer(this.positionLocation,2,_.FLOAT,!1,0,0),_.bindBuffer(_.ARRAY_BUFFER,this.texcoordBuffer),_.enableVertexAttribArray(this.texcoordLocation),_.vertexAttribPointer(this.texcoordLocation,2,_.FLOAT,!1,0,0);let x=xx(0,y,0,p,-1,1);x=oW(x,l,c,0),x=tO(x,f,d,1),_.uniformMatrix4fv(this.matrixLocation,!1,x);let b=sW(i/t,o/r,0);b=tO(b,s/t,a/r,1),_.uniformMatrix4fv(this.textureMatrixLocation,!1,b),_.uniform1i(this.textureLocation,0),_.drawArrays(_.TRIANGLES,0,this.positions.length/2)}};function lW(n,e,t){let r=n.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){let i=n.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function kC(n,e,t){let r=n.createProgram(),i=lW(n,n.VERTEX_SHADER,t),o=lW(n,n.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw n.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}var Lme=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,kme=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Ome=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,Fme=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function uW(n,e,t,r){let i;return t&&t.length?i=t.shift():Bi?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("webgl",r)}function cW(n){let e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}var nO=[];function hW(n,e,t,r,i,o,s,a,l,c,f,d,y,p){let _=Math.round(r*e),x=Math.round(r*t);n.canvas.width=_,n.canvas.height=x;let b,S;if(S=n.createTexture(),n.bindTexture(n.TEXTURE_2D,S),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),y?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,_,x,0,n.RGBA,f,null),b=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,b),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,S,0),b===null)throw new Error("Could not create framebuffer");if(S===null)throw new Error("Could not create texture");if(l.length===0)return{width:_,height:x,framebuffer:b,texture:S};let T=ki();l.forEach(function(V,B,v){wm(T,V.extent)});let A,N,k,W=1/i;if(!p||l.length!==1||c!==0){if(A=n.createTexture(),S===null)throw new Error("Could not create texture");N=Math.round(on(T)*W),k=Math.round(or(T)*W);let V=n.getParameter(n.MAX_TEXTURE_SIZE),B=Math.max(N,k),v=B>V?V/B:1,I=Math.round(N*v),M=Math.round(k*v);n.bindTexture(n.TEXTURE_2D,A),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),y?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,I,M,0,n.RGBA,f,null);let j=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,j),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0);let Q=new LC(n);l.forEach(function(Z,q,K){let oe=(Z.extent[0]-T[0])*W*v,_e=-(Z.extent[3]-T[3])*W*v,F=on(Z.extent)*W*v,ee=or(Z.extent)*W*v;if(n.bindFramebuffer(n.FRAMEBUFFER,j),n.viewport(0,0,I,M),Z.clipExtent){let ce=(Z.clipExtent[0]-T[0])*W*v,pe=-(Z.clipExtent[3]-T[3])*W*v,J=on(Z.clipExtent)*W*v,xe=or(Z.clipExtent)*W*v;n.enable(n.SCISSOR_TEST),n.scissor(y?ce:Math.round(ce),y?pe:Math.round(pe),y?J:Math.round(ce+J)-Math.round(ce),y?xe:Math.round(pe+xe)-Math.round(pe))}Q.drawImage(Z.texture,Z.width,Z.height,c,c,Z.width-2*c,Z.height-2*c,y?oe:Math.round(oe),y?_e:Math.round(_e),y?F:Math.round(oe+F)-Math.round(oe),y?ee:Math.round(_e+ee)-Math.round(_e),I,M),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(j)}else A=l[0].texture,N=l[0].width,k=l[0].width;let X=Vs(s),Y=Vs(T),$=V=>{let B=(V[0][0]-X[0])/o*r,v=-(V[0][1]-X[1])/o*r,I=(V[1][0]-X[0])/o*r,M=-(V[1][1]-X[1])/o*r,j=(V[2][0]-X[0])/o*r,Q=-(V[2][1]-X[1])/o*r;return{u1:I,v1:M,u0:B,v0:v,u2:j,v2:Q}};n.bindFramebuffer(n.FRAMEBUFFER,b),n.viewport(0,0,_,x);{let V=[],B=[],v=kC(n,Fme,Ome);n.useProgram(v);let I=n.getUniformLocation(v,"u_texture");n.bindTexture(n.TEXTURE_2D,A),n.uniform1i(I,0),a.getTriangles().forEach(function(oe,_e,F){let ee=oe.source,ce=oe.target,{u1:pe,v1:J,u0:xe,v0:Se,u2:ve,v2:re}=$(ce),He=(ee[0][0]-Y[0])/i/N,G=-(ee[0][1]-Y[1])/i/k,be=(ee[1][0]-Y[0])/i/N,Ie=-(ee[1][1]-Y[1])/i/k,U=(ee[2][0]-Y[0])/i/N,ae=-(ee[2][1]-Y[1])/i/k;V.push(pe,J,xe,Se,ve,re),B.push(be,Ie,He,G,U,ae)});let M=xx(0,_,x,0,-1,1),j=n.getUniformLocation(v,"u_matrix");n.uniformMatrix4fv(j,!1,M);let Q=n.getAttribLocation(v,"a_position"),Z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Z),n.bufferData(n.ARRAY_BUFFER,new Float32Array(V),n.STATIC_DRAW),n.vertexAttribPointer(Q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Q);let q=n.getAttribLocation(v,"a_texcoord"),K=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,K),n.bufferData(n.ARRAY_BUFFER,new Float32Array(B),n.STATIC_DRAW),n.vertexAttribPointer(q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(q),n.drawArrays(n.TRIANGLES,0,V.length/2)}if(d){let V=kC(n,kme,Lme);n.useProgram(V);let B=xx(0,_,x,0,-1,1),v=n.getUniformLocation(V,"u_matrix");n.uniformMatrix4fv(v,!1,B);let I=Array.isArray(d)?d:[0,0,0,255],M=n.getUniformLocation(V,"u_val");!0?n.uniform4fv(M,I):n.uniform4iv(M,I);let Q=n.getAttribLocation(V,"a_position"),Z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Z),n.vertexAttribPointer(Q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Q);let q=a.getTriangles().reduce(function(K,oe){let _e=oe.target,{u1:F,v1:ee,u0:ce,v0:pe,u2:J,v2:xe}=$(_e);return K.concat([F,ee,ce,pe,ce,pe,J,xe,J,xe,F,ee])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(q),n.STATIC_DRAW),n.drawArrays(n.LINES,0,q.length/2)}return{width:_,height:x,framebuffer:b,texture:S}}var rO=class extends lf{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?kr(r,i):r:i;let o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent(),a=this.sourceTileGrid_.getExtent(),l=s?kr(o,s):o;if(Xf(l)===0){this.state=Je.EMPTY;return}r&&(a?a=kr(a,r):a=r);let c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=e.targetProj,d=mS(t,f,l,c);if(!isFinite(d)||d<=0){this.state=Je.EMPTY;return}let y=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new uy(t,f,l,a,d*y,c,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=Je.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(d);let p=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(p[1]=Xn(p[1],a[1],a[3]),p[3]=Xn(p[3],a[1],a[3])):p=kr(p,a)),!Xf(p))this.state=Je.EMPTY;else{let _=0,x=0;t.canWrapX()&&(_=on(r),x=Math.floor((p[0]-r[0])/_)),Sm(p.slice(),t,!0).forEach(S=>{let T=this.sourceTileGrid_.getTileRangeForExtentAndZ(S,this.sourceZ_),A=e.getTileFunction;for(let N=T.minX;N<=T.maxX;N++)for(let k=T.minY;k<=T.maxY;k++){let W=A(this.sourceZ_,N,k,this.pixelRatio_);if(W){let X=x*_;this.sourceTiles_.push({tile:W,offset:X})}}++x}),this.sourceTiles_.length===0&&(this.state=Je.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){let e=[],t=!1;if(this.sourceTiles_.forEach(N=>{let k=N.tile;if(!k||k.getState()!==Je.LOADED)return;let W=k.getSize(),X=this.gutter_,Y,$=V1(k.getData());$?Y=$:(t=!0,Y=tz(af(k.getData())));let V=[W[0]+2*X,W[1]+2*X],B=Y instanceof Float32Array,v=V[0]*V[1],I=B?Float32Array:Uint8ClampedArray,M=new I(Y.buffer),j=I.BYTES_PER_ELEMENT,Q=j*M.length/v,Z=M.byteLength/V[1],q=Math.floor(Z/j/V[0]),K=this.sourceTileGrid_.getTileCoordExtent(k.tileCoord);K[0]+=N.offset,K[2]+=N.offset;let oe=this.clipExtent_?.slice();oe&&(oe[0]+=N.offset,oe[2]+=N.offset),e.push({extent:K,clipExtent:oe,data:M,dataType:I,bytesPerPixel:Q,pixelSize:V,bandCount:q})}),this.sourceTiles_.length=0,e.length===0){this.state=Je.ERROR,this.changed();return}let r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=Math.round(o*this.pixelRatio_),l=Math.round(s*this.pixelRatio_),c=this.targetTileGrid_.getResolution(r),f=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,p=new e[0].dataType(y*a*l),_=uW(a,l,nO,{premultipliedAlpha:!1,antialias:!1}),x,b=_.RGBA,S;e[0].dataType==Float32Array?(S=_.FLOAT,_.getExtension("WEBGL_color_buffer_float"),_.getExtension("OES_texture_float"),_.getExtension("EXT_float_blend"),x=_.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(S=_.UNSIGNED_BYTE,x=this.interpolate);let T=4,A=Math.ceil(y/T);for(let N=A-1;N>=0;--N){let k=[];for(let I=0,M=e.length;I<M;++I){let j=e[I],Q=j.pixelSize,Z=Q[0],q=Q[1],K=new j.dataType(T*Z*q),oe=j.data,_e=N*T;for(let ee=0,ce=K.length;ee<ce;ee+=T)K[ee]=oe[_e],K[ee+1]=oe[_e+1],K[ee+2]=oe[_e+2],K[ee+3]=oe[_e+3],_e+=y;let F=_.createTexture();_.bindTexture(_.TEXTURE_2D,F),x?(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR)):(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST)),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texImage2D(_.TEXTURE_2D,0,b,Z,q,0,b,S,K),k.push({extent:j.extent,clipExtent:j.clipExtent,texture:F,width:Z,height:q})}let{framebuffer:W,width:X,height:Y}=hW(_,o,s,this.pixelRatio_,f,c,d,this.triangulation_,k,this.gutter_,S,this.renderEdges_,x),$=X,V=Y*T,B=new e[0].dataType($*V);_.bindFramebuffer(_.FRAMEBUFFER,W),_.readPixels(0,0,X,Y,_.RGBA,S,B);let v=N*T;for(let I=0,M=B.length;I<M;I+=T){let j=($-1-(I/V|0))*V+I%V;p[v]=B[j],p[v+1]=B[j+1],p[v+2]=B[j+2],p[v+3]=B[j+3],v+=y}}if(cW(_),nO.push(_.canvas),t){let N=Qn(o,s),k=new ImageData(p,o);N.putImageData(k,0,0),this.reprojData_=N.canvas}else this.reprojData_=p;this.reprojSize_=[a,l],this.state=Je.LOADED,this.changed()}load(){if(this.state!==Je.IDLE&&this.state!==Je.ERROR)return;this.state=Je.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let r=t.getState();if(r!==Je.IDLE&&r!==Je.LOADING)return;e++;let i=cn(t,gt.CHANGE,()=>{let o=t.getState();(o==Je.LOADED||o==Je.ERROR||o==Je.EMPTY)&&(On(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==Je.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(On),this.sourcesListenerKeys_=null}},fW=rO;var iO=class extends PS{constructor(e){let t=e.projection===void 0?"EPSG:3857":e.projection,r=e.tileGrid;r===void 0&&t&&(r=ec({extent:Rl(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?er(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;let t=this.getTileGrid();return t?er(t.getTileSize(e)):[256,256]}getGutterForProjection(e){let t=this.getProjection();return(!t||qr(t,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,r,i,o,s){let a=this.tileGrid||this.getTileGridForProjection(o||i),l=Math.max.apply(null,a.getResolutions().map((_,x)=>{let b=er(a.getTileSize(x)),S=this.getTileSize(x);return Math.max(S[0]/b[0],S[1]/b[1])})),c=this.getTileGridForProjection(i),f=[e,t,r],d=this.getTileCoordForTileUrlFunction(f,i),y=Object.assign({sourceProj:o||i,sourceTileGrid:a,targetProj:i,targetTileGrid:c,tileCoord:f,wrappedTileCoord:d,pixelRatio:l,gutter:this.gutter_,getTileFunction:(_,x,b,S)=>this.getTile(_,x,b,S,void 0,s),transformMatrix:this.transformMatrix},this.tileOptions),p=new fW(y);return p.key=this.getKey(),p}getTile(e,t,r,i,o,s){let a=this.getProjection();if(o&&(a&&!qr(a,o)||this.transformMatrix))return this.getReprojTile_(e,t,r,o,a,s);let l=this.getTileSize(e),c=this.loader_,f=new AbortController,d={signal:f.signal,crossOrigin:this.crossOrigin_},y=this.getTileCoordForTileUrlFunction([e,t,r]);if(!y)return null;let p=this.getKey(),_=Od(this,p,e,t,r);if(s&&s.containsKey(_))return s.get(_);let x=y[0],b=y[1],S=y[2],T=this.getTileGrid()?.getFullTileRange(x);T&&(d.maxY=T.getHeight()-1);function A(){return B0(function(){return c(x,b,S,d)})}let N=Object.assign({tileCoord:[e,t,r],loader:A,size:l,controller:f},this.tileOptions),k=new lf(N);return k.key=this.getKey(),k.addEventListener(gt.CHANGE,this.handleTileChange_),s?.set(_,k),k}handleTileChange_(e){let t=e.target,r=ct(t),i=t.getState(),o;i==Je.LOADING?(this.tileLoadingKeys_[r]=!0,o=zd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==Je.ERROR?zd.TILELOADERROR:i==Je.LOADED?zd.TILELOADEND:void 0),o&&this.dispatchEvent(new xy(o,t))}getTileGridForProjection(e){let t=this.getProjection();if(this.tileGrid&&(!t||qr(t,e))&&!this.transformMatrix)return this.tileGrid;let r=ct(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Gd(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,t){let r=sn(e);if(r){let i=ct(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=t)}}},OC=iO;var dW="Cannot convert undefined or null to object";function hi(n){return(e,...t)=>Bme(n,e,t)}function Vy(n,e){return hi(FC(n,e).get)}var{apply:Bme,construct:Qtt,defineProperty:ent,get:tnt,getOwnPropertyDescriptor:FC,getPrototypeOf:BC,has:nnt,ownKeys:gW,set:rnt,setPrototypeOf:int}=Reflect;var{EPSILON:mW,MAX_SAFE_INTEGER:ont,isFinite:jme,isNaN:Ume}=Number,{iterator:Hy,species:snt,toStringTag:Gme,for:ant}=Symbol,jC=Object,{create:UC,defineProperty:yW,freeze:lnt,is:unt}=jC,oO=jC.prototype,cnt=oO.__lookupGetter__?hi(oO.__lookupGetter__):(n,e)=>{if(n==null)throw qme(dW);let t=jC(n);do{let r=FC(t,e);if(r!==void 0)return zme(r,"get")?r.get:void 0}while((t=BC(t))!==null)},zme=jC.hasOwn||hi(oO.hasOwnProperty),_W=Array,hnt=_W.isArray,GC=_W.prototype,fnt=hi(GC.join),dnt=hi(GC.push),pnt=hi(GC.toLocaleString),sO=GC[Hy],vW=hi(sO),{abs:Vme,trunc:gnt}=Math,zC=ArrayBuffer,mnt=zC.isView,xW=zC.prototype,ynt=hi(xW.slice),_nt=Vy(xW,"byteLength"),pW=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null,vnt=pW&&Vy(pW.prototype,"byteLength"),wW=BC(Uint8Array),xnt=wW.from,Ia=wW.prototype,wnt=Ia[Hy],Ent=hi(Ia.keys),bnt=hi(Ia.values),Snt=hi(Ia.entries),Cnt=hi(Ia.set),Int=hi(Ia.reverse),Tnt=hi(Ia.fill),Dnt=hi(Ia.copyWithin),Ant=hi(Ia.sort),Rnt=hi(Ia.slice),Mnt=hi(Ia.subarray),Nnt=Vy(Ia,"buffer"),Pnt=Vy(Ia,"byteOffset"),Lnt=Vy(Ia,"length"),knt=Vy(Ia,Gme),EW=Uint8Array,aO=Uint16Array;var VC=Uint32Array,bW=Float32Array,qy=BC([][Hy]()),lO=hi(qy.next),SW=hi((function*(){})().next),CW=BC(qy),IW=DataView.prototype,TW=hi(IW.getUint16),Hme=hi(IW.setUint16),qme=TypeError;var Wme=WeakSet,DW=Wme.prototype,Ont=hi(DW.add),Fnt=hi(DW.has),HC=WeakMap,uO=HC.prototype,cO=hi(uO.get),Bnt=hi(uO.has),AW=hi(uO.set);var RW=new HC,$me=UC(null,{next:{value:function(){let e=cO(RW,this);return lO(e)}},[Hy]:{value:function(){return this}}});function MW(n){if(n[Hy]===sO&&qy.next===lO)return n;let e=UC($me);return AW(RW,e,vW(n)),e}var Yme=new HC,Xme=UC(CW,{next:{value:function(){let e=cO(Yme,this);return SW(e)},writable:!0,configurable:!0}});for(let n of gW(qy))n!=="next"&&yW(Xme,n,FC(qy,n));var Zme=1/mW;var Kme=6103515625e-14;var NW=.0009765625,Vnt=NW*Kme,Hnt=NW*Zme;var PW=new zC(4),Jme=new bW(PW),Qme=new VC(PW),Xc=new aO(512),Zc=new EW(512);for(let n=0;n<256;++n){let e=n-127;e<-24?(Xc[n]=0,Xc[n|256]=32768,Zc[n]=24,Zc[n|256]=24):e<-14?(Xc[n]=1024>>-e-14,Xc[n|256]=1024>>-e-14|32768,Zc[n]=-e-1,Zc[n|256]=-e-1):e<=15?(Xc[n]=e+15<<10,Xc[n|256]=e+15<<10|32768,Zc[n]=13,Zc[n|256]=13):e<128?(Xc[n]=31744,Xc[n|256]=64512,Zc[n]=24,Zc[n|256]=24):(Xc[n]=31744,Xc[n|256]=64512,Zc[n]=13,Zc[n|256]=13)}var hO=new VC(2048);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,hO[n]=e|t}for(let n=1024;n<2048;++n)hO[n]=939524096+(n-1024<<13);var Wy=new VC(64);for(let n=1;n<31;++n)Wy[n]=n<<23;Wy[31]=1199570944;Wy[32]=2147483648;for(let n=33;n<63;++n)Wy[n]=2147483648+(n-32<<23);Wy[63]=3347054592;var LW=new aO(64);for(let n=1;n<64;++n)n!==32&&(LW[n]=1024);function kW(n){let e=n>>10;return Qme[0]=hO[LW[e]+(n&1023)]+Wy[e],Jme[0]}function wx(n,e,...t){return kW(TW(n,e,...MW(t)))}var $C=$l(FW(),1),i$=$l(YW(),1);function XW(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o;for(let s=0,a=0;s<n.length;++s,a+=3)o=256-n[s]/e*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function ZW(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o;for(let s=0,a=0;s<n.length;++s,a+=3)o=n[s]/e*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function KW(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o=e.length/3,s=e.length/3*2;for(let a=0,l=0;a<n.length;++a,l+=3){let c=n[a];i[l]=e[c]/65536*256,i[l+1]=e[c+o]/65536*256,i[l+2]=e[c+s]/65536*256}return i}function JW(n){let{width:e,height:t}=n,r=new Uint8Array(e*t*3);for(let i=0,o=0;i<n.length;i+=4,o+=3){let s=n[i],a=n[i+1],l=n[i+2],c=n[i+3];r[o]=255*((255-s)/256)*((255-c)/256),r[o+1]=255*((255-a)/256)*((255-c)/256),r[o+2]=255*((255-l)/256)*((255-c)/256)}return r}function QW(n){let{width:e,height:t}=n,r=new Uint8ClampedArray(e*t*3);for(let i=0,o=0;i<n.length;i+=3,o+=3){let s=n[i],a=n[i+1],l=n[i+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}var n0e=.95047,r0e=1,i0e=1.08883;function e$(n){let{width:e,height:t}=n,r=new Uint8Array(e*t*3);for(let i=0,o=0;i<n.length;i+=3,o+=3){let s=n[i+0],a=n[i+1]<<24>>24,l=n[i+2]<<24>>24,c=(s+16)/116,f=a/500+c,d=c-l/200,y,p,_;f=n0e*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),c=r0e*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=i0e*(d*d*d>.008856?d*d*d:(d-16/116)/7.787),y=f*3.2406+c*-1.5372+d*-.4986,p=f*-.9689+c*1.8758+d*.0415,_=f*.0557+c*-.204+d*1.057,y=y>.0031308?1.055*y**(1/2.4)-.055:12.92*y,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,_=_>.0031308?1.055*_**(1/2.4)-.055:12.92*_,r[o]=Math.max(0,Math.min(1,y))*255,r[o+1]=Math.max(0,Math.min(1,p))*255,r[o+2]=Math.max(0,Math.min(1,_))*255}return r}var t$=new Map;function Xd(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>t$.set(t,e))}function qC(n){return We(this,null,function*(){let e=t$.get(n.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${n.Compression}`);let t=yield e();return new t(n)})}Xd([void 0,1],()=>import("./chunk-LKT4BZJV.js").then(n=>n.default));Xd(5,()=>import("./chunk-472BQ3KV.js").then(n=>n.default));Xd(6,()=>{throw new Error("old style JPEG compression is not supported.")});Xd(7,()=>import("./chunk-W3424FDJ.js").then(n=>n.default));Xd([8,32946],()=>import("./chunk-MXHVFUVE.js").then(n=>n.default));Xd(32773,()=>import("./chunk-VZD4E52D.js").then(n=>n.default));Xd(34887,()=>import("./chunk-OBEX7WAK.js").then(n=>We(null,null,function*(){return yield n.zstd.init(),n})).then(n=>n.default));Xd(50001,()=>import("./chunk-VK5LBO7Z.js").then(n=>n.default));function WC(n,e,t,r=1){return new(Object.getPrototypeOf(n)).constructor(e*t*r)}function o0e(n,e,t,r,i){let o=e/r,s=t/i;return n.map(a=>{let l=WC(a,r,i);for(let c=0;c<i;++c){let f=Math.min(Math.round(s*c),t-1);for(let d=0;d<r;++d){let y=Math.min(Math.round(o*d),e-1),p=a[f*e+y];l[c*r+d]=p}}return l})}function $y(n,e,t){return(1-t)*n+t*e}function s0e(n,e,t,r,i){let o=e/r,s=t/i;return n.map(a=>{let l=WC(a,r,i);for(let c=0;c<i;++c){let f=s*c,d=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let p=0;p<r;++p){let _=o*p,x=_%1,b=Math.floor(_),S=Math.min(Math.ceil(_),e-1),T=a[d*e+b],A=a[d*e+S],N=a[y*e+b],k=a[y*e+S],W=$y($y(T,A,x),$y(N,k,x),f%1);l[c*r+p]=W}}return l})}function n$(n,e,t,r,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return o0e(n,e,t,r,i);case"bilinear":case"linear":return s0e(n,e,t,r,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function a0e(n,e,t,r,i,o){let s=e/r,a=t/i,l=WC(n,r,i,o);for(let c=0;c<i;++c){let f=Math.min(Math.round(a*c),t-1);for(let d=0;d<r;++d){let y=Math.min(Math.round(s*d),e-1);for(let p=0;p<o;++p){let _=n[f*e*o+y*o+p];l[c*r*o+d*o+p]=_}}}return l}function l0e(n,e,t,r,i,o){let s=e/r,a=t/i,l=WC(n,r,i,o);for(let c=0;c<i;++c){let f=a*c,d=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let p=0;p<r;++p){let _=s*p,x=_%1,b=Math.floor(_),S=Math.min(Math.ceil(_),e-1);for(let T=0;T<o;++T){let A=n[d*e*o+b*o+T],N=n[d*e*o+S*o+T],k=n[y*e*o+b*o+T],W=n[y*e*o+S*o+T],X=$y($y(A,N,x),$y(k,W,x),f%1);l[c*r*o+p*o+T]=X}}}return l}function r$(n,e,t,r,i,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return a0e(n,e,t,r,i,o);case"bilinear":case"linear":return l0e(n,e,t,r,i,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function u0e(n,e,t){let r=0;for(let i=e;i<t;++i)r+=n[i];return r}function vO(n,e,t){switch(n){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function c0e(n,e){return(n===1||n===2)&&e<=32&&e%8===0?!1:!(n===3&&(e===16||e===32||e===64))}function h0e(n,e,t,r,i,o,s){let a=new DataView(n),l=t===2?s*o:s*o*r,c=t===2?1:r,f=vO(e,i,l),d=parseInt("1".repeat(i),2);if(e===1){let y;t===1?y=r*i:y=i;let p=o*y;(p&7)!==0&&(p=p+7&-8);for(let _=0;_<s;++_){let x=_*p;for(let b=0;b<o;++b){let S=x+b*c*i;for(let T=0;T<c;++T){let A=S+T*i,N=(_*o+b)*c+T,k=Math.floor(A/8),W=A%8;if(W+i<=8)f[N]=a.getUint8(k)>>8-i-W&d;else if(W+i<=16)f[N]=a.getUint16(k)>>16-i-W&d;else if(W+i<=24){let X=a.getUint16(k)<<8|a.getUint8(k+2);f[N]=X>>24-i-W&d}else f[N]=a.getUint32(k)>>32-i-W&d}}}}return f.buffer}var xO=class{constructor(e,t,r,i,o,s){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;let a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){let t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,o){return wx(this,i,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){let r=this.getSampleFormat(e),i=this.getBitsPerSample(e);return vO(r,i,t)}getTileOrStrip(e,t,r,i,o){return We(this,null,function*(){let s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight()),l,{tiles:c}=this;this.planarConfiguration===1?l=t*s+e:this.planarConfiguration===2&&(l=r*s*a+t*s+e);let f,d;this.isTiled?(f=this.fileDirectory.TileOffsets[l],d=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],d=this.fileDirectory.StripByteCounts[l]);let y=(yield this.source.fetch([{offset:f,length:d}],o))[0],p;return c===null||!c[l]?(p=We(this,null,function*(){let _=yield i.decode(this.fileDirectory,y),x=this.getSampleFormat(),b=this.getBitsPerSample();return c0e(x,b)&&(_=h0e(_,x,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(t))),_}),c!==null&&(c[l]=p)):p=c[l],{x:e,y:t,sample:r,data:yield p}})}_readRaster(e,t,r,i,o,s,a,l,c){return We(this,null,function*(){let f=this.getTileWidth(),d=this.getTileHeight(),y=this.getWidth(),p=this.getHeight(),_=Math.max(Math.floor(e[0]/f),0),x=Math.min(Math.ceil(e[2]/f),Math.ceil(y/f)),b=Math.max(Math.floor(e[1]/d),0),S=Math.min(Math.ceil(e[3]/d),Math.ceil(p/d)),T=e[2]-e[0],A=this.getBytesPerPixel(),N=[],k=[];for(let Y=0;Y<t.length;++Y)this.planarConfiguration===1?N.push(u0e(this.fileDirectory.BitsPerSample,0,t[Y])/8):N.push(0),k.push(this.getReaderForSample(t[Y]));let W=[],{littleEndian:X}=this;for(let Y=b;Y<S;++Y)for(let $=_;$<x;++$){let V;this.planarConfiguration===1&&(V=this.getTileOrStrip($,Y,0,o,c));for(let B=0;B<t.length;++B){let v=B,I=t[B];this.planarConfiguration===2&&(A=this.getSampleByteSize(I),V=this.getTileOrStrip($,Y,I,o,c));let M=V.then(j=>{let Q=j.data,Z=new DataView(Q),q=this.getBlockHeight(j.y),K=j.y*d,oe=j.x*f,_e=K+q,F=(j.x+1)*f,ee=k[v],ce=Math.min(q,q-(_e-e[3]),p-K),pe=Math.min(f,f-(F-e[2]),y-oe);for(let J=Math.max(0,e[1]-K);J<ce;++J)for(let xe=Math.max(0,e[0]-oe);xe<pe;++xe){let Se=(J*f+xe)*A,ve=ee.call(Z,Se+N[v],X),re;i?(re=(J+K-e[1])*T*t.length+(xe+oe-e[0])*t.length+v,r[re]=ve):(re=(J+K-e[1])*T+xe+oe-e[0],r[v][re]=ve)}});W.push(M)}}if(yield Promise.all(W),s&&e[2]-e[0]!==s||a&&e[3]-e[1]!==a){let Y;return i?Y=r$(r,e[2]-e[0],e[3]-e[1],s,a,t.length,l):Y=n$(r,e[2]-e[0],e[3]-e[1],s,a,l),Y.width=s,Y.height=a,Y}return r.width=s||e[2]-e[0],r.height=a||e[3]-e[1],r})}readRasters(){return We(this,arguments,function*({window:e,samples:t=[],interleave:r,pool:i=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:c}={}){let f=e||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");let d=f[2]-f[0],y=f[3]-f[1],p=d*y,_=this.getSamplesPerPixel();if(!t||!t.length)for(let T=0;T<_;++T)t.push(T);else for(let T=0;T<t.length;++T)if(t[T]>=_)return Promise.reject(new RangeError(`Invalid sample index '${t[T]}'.`));let x;if(r){let T=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,A=Math.max.apply(null,this.fileDirectory.BitsPerSample);x=vO(T,A,p*t.length),l&&x.fill(l)}else{x=[];for(let T=0;T<t.length;++T){let A=this.getArrayForSample(t[T],p);Array.isArray(l)&&T<l.length?A.fill(l[T]):l&&!Array.isArray(l)&&A.fill(l),x.push(A)}}let b=i||(yield qC(this.fileDirectory));return yield this._readRaster(f,t,x,r,b,o,s,a,c)})}readRGB(){return We(this,arguments,function*({window:e,interleave:t=!0,pool:r=null,width:i,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){let c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");let f=this.fileDirectory.PhotometricInterpretation;if(f===Ba.RGB){let S=[0,1,2];if(this.fileDirectory.ExtraSamples!==U8.Unspecified&&a){S=[];for(let T=0;T<this.fileDirectory.BitsPerSample.length;T+=1)S.push(T)}return this.readRasters({window:e,interleave:t,samples:S,pool:r,width:i,height:o,resampleMethod:s,signal:l})}let d;switch(f){case Ba.WhiteIsZero:case Ba.BlackIsZero:case Ba.Palette:d=[0];break;case Ba.CMYK:d=[0,1,2,3];break;case Ba.YCbCr:case Ba.CIELab:d=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}let y={window:c,interleave:!0,samples:d,pool:r,width:i,height:o,resampleMethod:s,signal:l},{fileDirectory:p}=this,_=yield this.readRasters(y),x=2**this.fileDirectory.BitsPerSample[0],b;switch(f){case Ba.WhiteIsZero:b=XW(_,x);break;case Ba.BlackIsZero:b=ZW(_,x);break;case Ba.Palette:b=KW(_,p.ColorMap);break;case Ba.CMYK:b=JW(_);break;case Ba.YCbCr:b=QW(_);break;case Ba.CIELab:b=e$(_);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){let S=new Uint8Array(b.length/3),T=new Uint8Array(b.length/3),A=new Uint8Array(b.length/3);for(let N=0,k=0;N<b.length;N+=3,++k)S[k]=b[N],T[k]=b[N+1],A[k]=b[N+2];b=[S,T,A]}return b.width=_.width,b.height=_.height,b})}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];let e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){let t={};if(!this.fileDirectory.GDAL_METADATA)return null;let r=this.fileDirectory.GDAL_METADATA,i=(0,i$.default)(r,"Item");e===null?i=i.filter(o=>(0,$C.default)(o,"sample")===void 0):i=i.filter(o=>Number((0,$C.default)(o,"sample"))===e);for(let o=0;o<i.length;++o){let s=i[o];t[(0,$C.default)(s,"name")]=s.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;let e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){let e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){let t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){let[i,o,s]=e.getResolution();return[i*e.getWidth()/this.getWidth(),o*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){let t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){let[i,o,s,a,l,c,f,d]=this.fileDirectory.ModelTransformation,p=[[0,0],[0,t],[r,0],[r,t]].map(([b,S])=>[a+i*b+o*S,d+l*b+c*S]),_=p.map(b=>b[0]),x=p.map(b=>b[1]);return[Math.min(..._),Math.min(...x),Math.max(..._),Math.max(...x)]}else{let i=this.getOrigin(),o=this.getResolution(),s=i[0],a=i[1],l=s+o[0]*r,c=a+o[1]*t;return[Math.min(s,l),Math.min(a,c),Math.max(s,l),Math.max(a,c)]}}},wO=xO;var YC=class{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){let r=this.getUint32(e,t),i=this.getUint32(e+4,t),o;if(t){if(o=r+2**32*i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(e,t){let r=0,i=(this._dataView.getUint8(e+(t?7:0))&128)>0,o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(e+(t?s:7-s));i&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return i&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return wx(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}};var XC=class{constructor(e,t,r,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){let t=this.readUint32(e),r=this.readUint32(e+4),i;if(this._littleEndian){if(i=t+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0,r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0,i=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(e+(this._littleEndian?o:7-o));r&&(i?s!==0&&(s=~(s-1)&255,i=!1):s=~s&255),t+=s*256**o}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}};var f0e=typeof navigator<"u"&&navigator.hardwareConcurrency||2,EO=class{constructor(e=f0e,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(r=>{import("./chunk-IP6GTOYP.js").then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<e;i++)this.workers.push({worker:r(),idle:!0})}))}decode(e,t){return We(this,null,function*(){return this._awaitingDecoder&&(yield this._awaitingDecoder),this.size===0?qC(e).then(r=>r.decode(e,t)):new Promise(r=>{let i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;let o=this.messageId++,s=a=>{a.data.id===o&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:e,buffer:t,id:o},[t])})})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}},bO=EO;var o$=`\r
\r
`;function s$(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);let e={};for(let[t,r]of n)e[t.toLowerCase()]=r;return e}function d0e(n){let e=n.split(`\r
`).map(t=>{let r=t.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return s$(e)}function a$(n){let[e,...t]=n.split(";").map(i=>i.trim()),r=t.map(i=>i.split("="));return{type:e,params:s$(r)}}function ZC(n){let e,t,r;return n&&([,e,t,r]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10)),{start:e,end:t,total:r}}function l$(n,e){let t=null,r=new TextDecoder("ascii"),i=[],o=`--${e}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(n,a,o.length))===o&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<n.byteLength;){let a=r.decode(new Uint8Array(n,t,Math.min(o.length+1024,n.byteLength-t)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");let l=a.substr(o.length+2);if(l.length===0)break;let c=l.indexOf(o$),f=d0e(l.substr(0,c)),{start:d,end:y,total:p}=ZC(f["content-range"]),_=t+o.length+c+o$.length,x=parseInt(y,10)+1-parseInt(d,10);i.push({headers:f,data:n.slice(_,_+x),offset:d,length:x,fileSize:p}),t=_+x+4}return i}var Zd=class{fetch(e,t=void 0){return We(this,null,function*(){return Promise.all(e.map(r=>this.fetchSlice(r,t)))})}fetchSlice(e){return We(this,null,function*(){throw new Error(`fetching of slice ${e} not possible, not implemented`)})}get fileSize(){return null}close(){return We(this,null,function*(){})}};var KC=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){let i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let r=e[t],[i,o]=r;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let r=e[t],[i,o]=r;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[r,i]of this.entriesAscending())e.call(t,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};function u$(n){return We(this,null,function*(){return new Promise(e=>setTimeout(e,n))})}function c$(n,e){let t=Array.isArray(n)?n:Array.from(n),r=Array.isArray(e)?e:Array.from(e);return t.map((i,o)=>[i,r[o]])}var Sf=class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="AbortError"}},SO=class extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}},h$=SO;var CO=class{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}},JC=class{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}},QC=class extends Zd{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new KC({maxSize:r,onEviction:(i,o)=>{this.evictedBlocks.set(i,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}fetch(e,t){return We(this,null,function*(){let r=[],i=[],o=[];this.evictedBlocks.clear();for(let{offset:y,length:p}of e){let _=y+p,{fileSize:x}=this;x!==null&&(_=Math.min(_,x));let b=Math.floor(y/this.blockSize)*this.blockSize;for(let S=b;S<_;S+=this.blockSize){let T=Math.floor(S/this.blockSize);!this.blockCache.has(T)&&!this.blockRequests.has(T)&&(this.blockIdsToFetch.add(T),i.push(T)),this.blockRequests.has(T)&&r.push(this.blockRequests.get(T)),o.push(T)}}yield u$(),this.fetchBlocks(t);let s=[];for(let y of i)this.blockRequests.has(y)&&s.push(this.blockRequests.get(y));yield Promise.allSettled(r),yield Promise.allSettled(s);let a=[],l=o.filter(y=>this.abortedBlockIds.has(y)||!this.blockCache.has(y));if(l.forEach(y=>this.blockIdsToFetch.add(y)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(let y of l){let p=this.blockRequests.get(y);if(!p)throw new Error(`Block ${y} is not in the block requests`);a.push(p)}yield Promise.allSettled(a)}if(t&&t.aborted)throw new Sf("Request was aborted");let c=o.map(y=>this.blockCache.get(y)||this.evictedBlocks.get(y)),f=c.filter(y=>!y);if(f.length)throw new h$(f,"Request failed");let d=new Map(c$(o,c));return this.readSliceData(e,d)})}fetchBlocks(e){if(this.blockIdsToFetch.size>0){let t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let i=0;i<t.length;++i){let o=t[i];for(let s of o.blockIds)this.blockRequests.set(s,We(this,null,function*(){try{let a=(yield r)[i],l=s*this.blockSize,c=l-a.offset,f=Math.min(c+this.blockSize,a.data.byteLength),d=a.data.slice(c,f),y=new CO(l,d.byteLength,d,s);this.blockCache.set(s,y),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}}))}this.blockIdsToFetch.clear()}}groupBlocks(e){let t=Array.from(e).sort((s,a)=>s-a);if(t.length===0)return[];let r=[],i=null,o=[];for(let s of t)i===null||i+1===s?(r.push(s),i=s):(o.push(new JC(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s);return o.push(new JC(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(e,t){return e.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));let o=Math.floor(r.offset/this.blockSize),s=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=o;c<=s;++c){let f=t.get(c),d=f.offset-r.offset,y=f.top-i,p=0,_=0,x;d<0?p=-d:d>0&&(_=d),y<0?x=f.length-p:x=i-f.offset-p;let b=new Uint8Array(f.data,p,x);l.set(b,_)}return a})}};var Kd=class{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}getData(){return We(this,null,function*(){throw new Error("not implemented")})}},Jd=class{constructor(e){this.url=e}request(){return We(this,arguments,function*({headers:e,signal:t}={}){throw new Error("request is not implemented")})}};var IO=class extends Kd{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}getData(){return We(this,null,function*(){return this.response.arrayBuffer?yield this.response.arrayBuffer():(yield this.response.buffer()).buffer})}},eI=class extends Jd{constructor(e,t){super(e),this.credentials=t}request(){return We(this,arguments,function*({headers:e,signal:t}={}){let r=yield fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new IO(r)})}};var TO=class extends Kd{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}getData(){return We(this,null,function*(){return this.data})}},tI=class extends Jd{constructRequest(e,t){return new Promise((r,i)=>{let o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(let[s,a]of Object.entries(e))o.setRequestHeader(s,a);o.onload=()=>{let s=o.response;r(new TO(o,s))},o.onerror=i,o.onabort=()=>i(new Sf("Request aborted")),o.send(),t&&(t.aborted&&o.abort(),t.addEventListener("abort",()=>o.abort()))})}request(){return We(this,arguments,function*({headers:e,signal:t}={}){return yield this.constructRequest(e,t)})}};var g$=$l(f$(),1),m$=$l(d$(),1),y$=$l(p$(),1);var DO=class extends Kd{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}getData(){return We(this,null,function*(){return yield this.dataPromise})}},nI=class extends Jd{constructor(e){super(e),this.parsedUrl=y$.default.parse(this.url),this.httpApi=this.parsedUrl.protocol==="http:"?g$.default:m$.default}constructRequest(e,t){return new Promise((r,i)=>{let o=this.httpApi.get(tn(dt({},this.parsedUrl),{headers:e}),s=>{let a=new Promise(l=>{let c=[];s.on("data",f=>{c.push(f)}),s.on("end",()=>{let f=Buffer.concat(c).buffer;l(f)}),s.on("error",i)});r(new DO(s,a))});o.on("error",i),t&&(t.aborted&&o.destroy(new Sf("Request aborted")),t.addEventListener("abort",()=>o.destroy(new Sf("Request aborted"))))})}request(){return We(this,arguments,function*({headers:e,signal:t}={}){return yield this.constructRequest(e,t)})}};var Ex=class extends Zd{constructor(e,t,r,i){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}fetch(e,t){return We(this,null,function*(){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))})}fetchSlices(e,t){return We(this,null,function*(){let r=yield this.client.request({headers:tn(dt({},this.headers),{Range:`bytes=${e.map(({offset:i,length:o})=>`${i}-${i+o}`).join(",")}`}),signal:t});if(r.ok)if(r.status===206){let{type:i,params:o}=a$(r.getHeader("content-type"));if(i==="multipart/byteranges"){let d=l$(yield r.getData(),o.boundary);return this._fileSize=d[0].fileSize||null,d}let s=yield r.getData(),{start:a,end:l,total:c}=ZC(r.getHeader("content-range"));this._fileSize=c||null;let f=[{data:s,offset:a,length:l-a}];if(e.length>1){let d=yield Promise.all(e.slice(1).map(y=>this.fetchSlice(y,t)));return f.concat(d)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");let i=yield r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")})}fetchSlice(e,t){return We(this,null,function*(){let{offset:r,length:i}=e,o=yield this.client.request({headers:tn(dt({},this.headers),{Range:`bytes=${r}-${r+i}`}),signal:t});if(o.ok)if(o.status===206){let s=yield o.getData(),{total:a}=ZC(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");let s=yield o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")})}get fileSize(){return this._fileSize}};function AO(n,{blockSize:e,cacheSize:t}){return e===null?n:new QC(n,{blockSize:e,cacheSize:t})}function p0e(n,s={}){var a=s,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:i=!1}=a,o=Dp(a,["headers","credentials","maxRanges","allowFullFile"]);let l=new eI(n,t),c=new Ex(l,e,r,i);return AO(c,o)}function g0e(n,o={}){var s=o,{headers:e={},maxRanges:t=0,allowFullFile:r=!1}=s,i=Dp(s,["headers","maxRanges","allowFullFile"]);let a=new tI(n),l=new Ex(a,e,t,r);return AO(l,i)}function m0e(n,o={}){var s=o,{headers:e={},maxRanges:t=0,allowFullFile:r=!1}=s,i=Dp(s,["headers","maxRanges","allowFullFile"]);let a=new nI(n),l=new Ex(a,e,t,r);return AO(l,i)}function rI(n,r={}){var i=r,{forceXHR:e=!1}=i,t=Dp(i,["forceXHR"]);return typeof fetch=="function"&&!e?p0e(n,t):typeof XMLHttpRequest<"u"?g0e(n,t):m0e(n,t)}var RO=class extends Zd{constructor(e){super(),this.file=e}fetchSlice(e,t){return We(this,null,function*(){return new Promise((r,i)=>{let o=this.file.slice(e.offset,e.offset+e.length),s=new FileReader;s.onload=a=>r(a.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(o),t&&t.addEventListener("abort",()=>s.abort())})})}};function _$(n){return new RO(n)}function MO(n){switch(n){case Gn.BYTE:case Gn.ASCII:case Gn.SBYTE:case Gn.UNDEFINED:return 1;case Gn.SHORT:case Gn.SSHORT:return 2;case Gn.LONG:case Gn.SLONG:case Gn.FLOAT:case Gn.IFD:return 4;case Gn.RATIONAL:case Gn.SRATIONAL:case Gn.DOUBLE:case Gn.LONG8:case Gn.SLONG8:case Gn.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function y0e(n){let e=n.GeoKeyDirectory;if(!e)return null;let t={};for(let r=4;r<=e[3]*4;r+=4){let i=G8[e[r]],o=e[r+1]?jD[e[r+1]]:null,s=e[r+2],a=e[r+3],l=null;if(!o)l=a;else{if(l=n[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}t[i]=l}return t}function Yy(n,e,t,r){let i=null,o=null,s=MO(e);switch(e){case Gn.BYTE:case Gn.ASCII:case Gn.UNDEFINED:i=new Uint8Array(t),o=n.readUint8;break;case Gn.SBYTE:i=new Int8Array(t),o=n.readInt8;break;case Gn.SHORT:i=new Uint16Array(t),o=n.readUint16;break;case Gn.SSHORT:i=new Int16Array(t),o=n.readInt16;break;case Gn.LONG:case Gn.IFD:i=new Uint32Array(t),o=n.readUint32;break;case Gn.SLONG:i=new Int32Array(t),o=n.readInt32;break;case Gn.LONG8:case Gn.IFD8:i=new Array(t),o=n.readUint64;break;case Gn.SLONG8:i=new Array(t),o=n.readInt64;break;case Gn.RATIONAL:i=new Uint32Array(t*2),o=n.readUint32;break;case Gn.SRATIONAL:i=new Int32Array(t*2),o=n.readInt32;break;case Gn.FLOAT:i=new Float32Array(t),o=n.readFloat32;break;case Gn.DOUBLE:i=new Float64Array(t),o=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===Gn.RATIONAL||e===Gn.SRATIONAL)for(let a=0;a<t;a+=2)i[a]=o.call(n,r+a*s),i[a+1]=o.call(n,r+(a*s+4));else for(let a=0;a<t;++a)i[a]=o.call(n,r+a*s);return e===Gn.ASCII?new TextDecoder("utf-8").decode(i):i}var NO=class{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}},Xy=class extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}},iI=class{readRasters(){return We(this,arguments,function*(e={}){let{window:t,width:r,height:i}=e,{resX:o,resY:s,bbox:a}=e,l=yield this.getImage(),c=l,f=yield this.getImageCount(),d=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(t){let[_,x]=l.getOrigin(),[b,S]=l.getResolution();a=[_+t[0]*b,x+t[1]*S,_+t[2]*b,x+t[3]*S]}let p=a||d;if(r){if(o)throw new Error("Both width and resX passed");o=(p[2]-p[0])/r}if(i){if(s)throw new Error("Both width and resY passed");s=(p[3]-p[1])/i}}if(o||s){let p=[];for(let _=0;_<f;++_){let x=yield this.getImage(_),{SubfileType:b,NewSubfileType:S}=x.fileDirectory;(_===0||b===2||S&1)&&p.push(x)}p.sort((_,x)=>_.getWidth()-x.getWidth());for(let _=0;_<p.length;++_){let x=p[_],b=(d[2]-d[0])/x.getWidth(),S=(d[3]-d[1])/x.getHeight();if(c=x,o&&o>b||s&&s>S)break}}let y=t;if(a){let[p,_]=l.getOrigin(),[x,b]=c.getResolution(l);y=[Math.round((a[0]-p)/x),Math.round((a[1]-_)/b),Math.round((a[2]-p)/x),Math.round((a[3]-_)/b)],y=[Math.min(y[0],y[2]),Math.min(y[1],y[3]),Math.max(y[0],y[2]),Math.max(y[1],y[3])]}return c.readRasters(tn(dt({},e),{window:y}))})}},Zy=class n extends iI{constructor(e,t,r,i,o={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=i,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}getSlice(e,t){return We(this,null,function*(){let r=this.bigTiff?4048:1024;return new XC((yield this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)})}parseFileDirectoryAt(e){return We(this,null,function*(){let t=this.bigTiff?20:12,r=this.bigTiff?8:2,i=yield this.getSlice(e),o=this.bigTiff?i.readUint64(e):i.readUint16(e),s=o*t+(this.bigTiff?16:6);i.covers(e,s)||(i=yield this.getSlice(e,s));let a={},l=e+(this.bigTiff?8:2);for(let d=0;d<o;l+=t,++d){let y=i.readUint16(l),p=i.readUint16(l+2),_=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4),x,b,S=MO(p),T=l+(this.bigTiff?12:8);if(S*_<=(this.bigTiff?8:4))x=Yy(i,p,_,T);else{let A=i.readOffset(T),N=MO(p)*_;if(i.covers(A,N))x=Yy(i,p,_,A);else{let k=yield this.getSlice(A,N);x=Yy(k,p,_,A)}}_===1&&j8.indexOf(y)===-1&&!(p===Gn.RATIONAL||p===Gn.SRATIONAL)?b=x[0]:b=x,a[jD[y]]=b}let c=y0e(a),f=i.readOffset(e+r+t*o);return new NO(a,c,f)})}requestIFD(e){return We(this,null,function*(){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof Xy?new Xy(e):t}return this.ifdRequests[e]=We(this,null,function*(){let t=yield this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new Xy(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)}),this.ifdRequests[e]})}getImage(e=0){return We(this,null,function*(){let t=yield this.requestIFD(e);return new wO(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)})}getImageCount(){return We(this,null,function*(){let e=0,t=!0;for(;t;)try{yield this.requestIFD(e),++e}catch(r){if(r instanceof Xy)t=!1;else throw r}return e})}getGhostValues(){return We(this,null,function*(){let e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;let t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100,i=yield this.getSlice(e,r);if(t===Yy(i,Gn.ASCII,t.length,e)){let s=Yy(i,Gn.ASCII,r,e).split(`
`)[0],a=Number(s.split("=")[1].split(" ")[0])+s.length;a>r&&(i=yield this.getSlice(e,a));let l=Yy(i,Gn.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,f])=>{this.ghostValues[c]=f})}return this.ghostValues})}static fromSource(e,t,r){return We(this,null,function*(){let i=(yield e.fetch([{offset:0,length:1024}],r))[0],o=new YC(i),s=o.getUint16(0,0),a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");let l=o.getUint16(2,a),c;if(l===42)c=!1;else if(l===43){if(c=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");let f=c?o.getUint64(8,a):o.getUint32(4,a);return new n(e,a,c,f,t)})}close(){return typeof this.source.close=="function"?this.source.close():!1}};var PO=class extends iI{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}parseFileDirectoriesPerFile(){return We(this,null,function*(){let e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=yield Promise.all(e),this.fileDirectoriesPerFile})}getImage(e=0){return We(this,null,function*(){yield this.getImageCount(),yield this.parseFileDirectoriesPerFile();let t=0,r=0;for(let i=0;i<this.imageFiles.length;i++){let o=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(e===t){let a=yield o.requestIFD(r);return new wO(a.fileDirectory,a.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}t++,r++}r=0}throw new RangeError("Invalid image index")})}getImageCount(){return We(this,null,function*(){if(this.imageCount!==null)return this.imageCount;let e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=yield Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount})}};function v$(r){return We(this,arguments,function*(n,e={},t){return Zy.fromSource(rI(n,e),t)})}function x$(n,e){return We(this,null,function*(){return Zy.fromSource(_$(n),e)})}function w$(i){return We(this,arguments,function*(n,e=[],t={},r){let o=yield Zy.fromSource(rI(n,t),r),s=yield Promise.all(e.map(a=>Zy.fromSource(rI(a,t))));return new PO(o,s)})}function bx(n){return Array.isArray(n)?Math.min(...n):n}var LO=class extends ny{constructor(e,t,r,i,o,s,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let f=c?kr(r,c):r,d=zo(f),y=ly(e,t,d,i),p=.5,_=new uy(e,t,f,l,y*p,i),x=_.calculateSourceExtent(),b=ms(x)?null:s(x,y,o),S=b?Et.IDLE:Et.EMPTY,T=b?b.getPixelRatio():1;super(r,i,T,S),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=_,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=T,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Et.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){let e=this.sourceImage_.getState();if(e==Et.LOADED){let t=on(this.targetExtent_)/this.targetResolution_,r=or(this.targetExtent_)/this.targetResolution_;this.canvas_=yS(t,r,this.sourcePixelRatio_,bx(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Et.IDLE){this.state=Et.LOADING,this.changed();let e=this.sourceImage_.getState();e==Et.LOADED||e==Et.ERROR?this.reproject_():(this.sourceListenerKey_=cn(this.sourceImage_,gt.CHANGE,t=>{let r=this.sourceImage_.getState();(r==Et.LOADED||r==Et.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){On(this.sourceListenerKey_),this.sourceListenerKey_=null}},E$=LO;var kO={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},OO=class extends jr{constructor(e,t){super(e),this.image=t}},FO=class extends _y{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){let t=this.getResolutions();if(t){let r=yd(t,e,0);e=t[r]}return e}getImage(e,t,r,i){let o=this.getProjection();if(!o||!i||qr(o,i))return o&&(i=o),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&qr(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&xl(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new E$(o,i,e,t,r,(s,a,l)=>this.getImageInternal(s,a,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){let o=_0e(e,t,r,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&zs(this.wantedExtent_,o)||zs(this.image.getExtent(),o))&&(this.wantedResolution_&&bx(this.wantedResolution_)===s||bx(this.image.getResolution())===s)))return this.image;this.wantedProjection_=i,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new ny(o,s,r,this.loader),this.image.addEventListener(gt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){let t=e.target,r;switch(t.getState()){case Et.LOADING:this.loading=!0,r=kO.IMAGELOADSTART;break;case Et.LOADED:this.loading=!1,r=kO.IMAGELOADEND;break;case Et.ERROR:this.loading=!1,r=kO.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new OO(r,t))}};function b$(n,e){n.getImage().src=e}function _0e(n,e,t,r){let i=e/t,o=zo(n),s=vc(on(n)/i,4),a=vc(or(n)/i,4),l=vc((r-1)*s/2,4),c=s+2*l,f=vc((r-1)*a/2,4),d=a+2*f;return Zf(o,i,0,[c,d])}var S$=FO;function C$(n){let e=n.load||sS,t=n.imageExtent,r=n.crossOrigin??null;return()=>{let i=new Image;return i.crossOrigin=r,e(i,n.url).then(o=>{let s=on(t)/o.width,a=or(t)/o.height;return{image:o,extent:t,resolution:s!==a?[s,a]:a,pixelRatio:1}})}}var BO=class extends S${constructor(e){let t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:b$;super({attributions:e.attributions,interpolate:e.interpolate,projection:sn(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new ny(this.imageExtent_,void 0,1,C$({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(i,o)=>(this.image.setImage(i),r(this.image,o),sS(i))})),this.image.addEventListener(gt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,i){return Jn(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}},I$=BO;var oI="1.3.0";function v0e(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];let o=r.getAxisOrientation(),s=Gw(i.VERSION,"1.3")>=0;i[s?"CRS":"SRS"]=r.getCode();let a=s&&o.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),Dg(n,i)}function T$(n,e,t,r,i,o,s){o=Object.assign({REQUEST:"GetMap"},o);let a=e/t,l=[kD(on(n)/a,4),kD(or(n)/a,4)];if(t!=1)switch(s){case"geoserver":let f=90*t+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+f:o.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":o.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":o.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return v0e(i,n,l,r,o)}function jO(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:oI,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}function D$(n,e,t,r){let i=document.createElement("script"),o="olc_"+ct(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+(r||"callback")+"="+o;let a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(l){clearTimeout(a),s(),e(l)},document.head.appendChild(i)}var A$=[],UO=class extends jc{constructor(e,t,r,i,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=Qn(1,1,A$)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){let t=ct(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Jh(this.context_),A$.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}},R$=UO;var GO=class extends jc{constructor(e,t,r,i,o,s){super(e,t,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Je.IDLE&&(this.setState(Je.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Je.ERROR)}setFeatures(e){this.features_=e,this.setState(Je.LOADED)}setLoader(e){this.loader_=e}},M$=GO;var zO=class extends LS{constructor(e){let t=e.projection||"EPSG:3857",r=e.extent||Rl(t),i=e.tileGrid||ec({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:x0e,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:M$,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Je.IDLE){r.setState(Je.LOADING);let i=r.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(i),a=i[0],l=o.getResolution(a);bo(s,-l,s);let c=this.projection;t&&this.projection&&!qr(t,c)&&(s=Yl(s,t,c));let f=this.tileGrid,d=f.getExtent();d&&kr(s,d,s);let y=l;t&&c&&!qr(t,c)&&(y=l/c.getMetersPerUnit()/t.getMetersPerUnit());let p=f.getZForResolution(y,this.zDirection);f.forEachTileCoord(s,p,_=>{let x=this.tileUrlFunction(_,e,t);this.sourceTiles_[x]||(this.sourceTiles_[x]=new this.tileClass(_,x?Je.IDLE:Je.EMPTY,x,this.format_,this.tileLoadFunction));let b=this.sourceTiles_[x];r.sourceTiles.push(b),this.tileKeysBySourceTileUrl_[x]||(this.tileKeysBySourceTileUrl_[x]=[]),this.tileKeysBySourceTileUrl_[x].push(r.getKey());let S=b.getState();if(S<Je.LOADED){let T=A=>{this.handleTileChange(A);let N=b.getState();if(N===Je.LOADED||N===Je.ERROR){let k=b.getKey();k in r.errorTileKeys?b.getState()===Je.LOADED&&delete r.errorTileKeys[k]:r.loadingSourceTiles--,N===Je.ERROR?r.errorTileKeys[k]=!0:b.removeEventListener(gt.CHANGE,T),r.loadingSourceTiles===0&&r.setState(ya(r.errorTileKeys)?Je.LOADED:Je.ERROR)}};b.addEventListener(gt.CHANGE,T),r.loadingSourceTiles++}S===Je.IDLE&&(b.extent=f.getTileCoordExtent(_),b.projection=this.projection,b.resolution=f.getResolution(_[0]),b.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(_=>_.getState()===Je.ERROR)?Je.ERROR:Je.LOADED)}return r.sourceTiles}removeSourceTiles(e){let t=e.getKey(),r=e.sourceTiles;for(let i=0,o=r.length;i<o;++i){let s=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;let a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,r,i,o){let s=[e,t,r],a=this.getTileCoordForTileUrlFunction(s,o),l=this.getTileGrid().getExtent(),c=this.projection,f=this.getTileGridForProjection(o);if(a&&l){let p=f.getTileCoordExtent(a);bo(p,-f.getResolution(e),p),Jn(l,!o||!c||qr(o,c)?p:Yl(p,o,c))||(a=null)}let d=!0;if(a!==null){let p=this.tileGrid,_=f.getResolution(e),x=_;o&&c&&!qr(o,c)&&(x=_/c.getMetersPerUnit()/o.getMetersPerUnit());let b=p.getZForResolution(x,1),S=f.getTileCoordExtent(a);bo(S,-_,S),p.forEachTileCoord(!o||!c||qr(o,c)?S:Yl(S,o,c),b,T=>{d=d&&!this.tileUrlFunction(T,i,c)})}let y=new R$(s,d?Je.EMPTY:Je.IDLE,a,this.getSourceTiles.bind(this,i,o),this.removeSourceTiles.bind(this));return y.key=this.getKey(),y}getTileGridForProjection(e){let t=e.getCode(),r=this.tileGrids_[t];if(!r){let i=this.projection;if(i!==null&&!qr(i,e))return Gd(e);let o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(f,d){return o.getOrigin(d)}),l=s.map(function(f,d){return o.getTileSize(d)}),c=43;for(let f=s.length;f<c;++f)s.push(s[f-1]/2),a.push(a[f-1]),l.push(l[f-1]);r=new df({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:l}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){let i=this.getTileGridForProjection(r),o=er(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}},sI=zO;function x0e(n,e){n.setLoader(function(t,r,i){mL(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}var VO=class extends dy{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){let t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,o=i.resolution,s=this.getLayer().getSource(),a=e.viewHints,l=e.extent;if(t.extent!==void 0&&(l=kr(l,so(t.extent,i.projection))),!a[$r.ANIMATING]&&!a[$r.INTERACTING]&&!ms(l))if(s){let c=i.projection,f=s.getImage(l,o,r,c);f&&(this.loadImage(f)?this.image=f:f.getState()===Et.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){let t=this.frameState;if(!t)return null;let r=this.getLayer(),i=Ar(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Gs(o,i))return null;let s=this.image.getExtent(),a=this.image.getImage(),l=on(s),c=Math.floor(a.width*((i[0]-s[0])/l));if(c<0||c>=a.width)return null;let f=or(s),d=Math.floor(a.height*((s[3]-i[1])/f));return d<0||d>=a.height?null:this.getImageData(a,c,d)}renderFrame(e,t){let r=this.image,i=r.getExtent(),o=r.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,y=d.center,p=d.resolution,_=f*s/(p*l),x=f*a/(p*l);this.prepareContainer(e,t);let b=this.context.canvas.width,S=this.context.canvas.height,T=this.getRenderContext(e),A=!1,N=!0;if(c.extent){let $=so(c.extent,d.projection);N=Jn($,e.extent),A=N&&!zs($,e.extent),A&&this.clipUnrotated(T,e,$)}let k=r.getImage(),W=ji(this.tempTransform,b/2,S/2,_,x,0,l*(i[0]-y[0])/s,l*(y[1]-i[3])/a);this.renderedResolution=a*f/l;let X=k.width*W[0],Y=k.height*W[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e),N&&X>=.5&&Y>=.5){let $=W[4],V=W[5],B=c.opacity;B!==1&&(T.save(),T.globalAlpha=B),T.drawImage(k,0,0,+k.width,+k.height,$,V,X,Y),B!==1&&T.restore()}return this.postRender(this.context,e),A&&T.restore(),T.imageSmoothingEnabled=!0,this.container}},N$=VO;var HO=class extends ef{constructor(e){e=e||{},super(e)}},P$=HO;var qO=class extends P${constructor(e){super(e)}createRenderer(){return new N$(this)}getData(e){return super.getData(e)}},L$=qO;var w0e='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',E0e='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',b0e='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',S0e={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_toner_dark:{extension:"png"},stamen_toner_blacklite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},C0e={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_dark:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_blacklite:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}},WO=class extends Hc{constructor(e){let t=e.layer.indexOf("-"),r=t==-1?e.layer:e.layer.slice(0,t),i=C0e[r]||{minZoom:0,maxZoom:20,retina:!0},o=S0e[e.layer],s=e.apiKey?"?api_key="+e.apiKey:"",a=i.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+o.extension+s,c=[w0e,E0e,OL];e.layer.startsWith("stamen_")&&c.splice(1,0,b0e),super({attributions:c,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:i.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:i.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}},k$=WO;var $O=class extends Vd{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:sn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)D$(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{let t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){let t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){let t=sn("EPSG:4326"),r=this.getProjection(),i;if(e.bounds!==void 0){let c=Am(t,r);i=Uw(e.bounds,c)}let o=Rl(r),s=e.minzoom||0,a=e.maxzoom||22,l=ec({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=MS(e.tiles,l),e.attribution&&!this.getAttributions()){let c=i!==void 0?i:o;this.setAttributions(function(f){return Jn(c,f.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}},O$=$O;var YO=class extends Vd{constructor(e){e=e||{};let t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=ki(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){let o=sn(r),s=this.getProjection()||o,a=this.getTileGrid();a||(a=this.getTileGridForProjection(s));let l=Rm(e,o,s),c=ly(s,o,e,t),f=a.getZForResolution(c,this.zDirection),d=a.getResolution(f),y=a.getTileCoordForCoordAndZ(l,f);if(a.getResolutions().length<=y[0])return;let p=a.getTileCoordExtent(y,this.tmpExtent_),_=this.gutter_;_!==0&&(p=bo(p,d*_,p));let x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,jO(this.params_,"GetFeatureInfo"),i);let b=Math.floor((l[0]-p[0])/d),S=Math.floor((p[3]-l[1])/d);return x[this.v13_?"I":"X"]=b,x[this.v13_?"J":"Y"]=S,this.getRequestUrl_(y,p,1,s||o,x)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;let r={SERVICE:"WMS",VERSION:oI,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){let i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){let i=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;r.SCALE=e*i/o}return Object.assign(r,t),Dg(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,o){let s=this.urls;if(!s)return;let a;if(s.length==1)a=s[0];else{let l=vl(_S(e),s.length);a=s[l]}return T$(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,o,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0,t=[];for(let r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){let e=this.params_.VERSION||oI;this.v13_=Gw(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);let o=i.getResolution(e[0]),s=i.getTileCoordExtent(e,this.tmpExtent_),a=this.gutter_;a!==0&&(s=bo(s,o*a,s));let l=Object.assign({},jO(this.params_,"GetMap"));return this.getRequestUrl_(e,s,t,r,l)}},F$=YO;var XO=class extends Vd{constructor(e){let t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid,i=e.urls;i===void 0&&e.url!==void 0&&(i=RS(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=NS(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;let t=e.join(`
`);this.setTileUrlFunction(NS(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let e=this.urls?this.urls.slice(0):[];for(let t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){let t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?Dg(e,r):e.replace(/\{(\w+?)\}/g,function(s,a){return a.toLowerCase()in r?r[a.toLowerCase()]:s});let i=this.tileGrid,o=this.dimensions_;return(function(s,a,l){if(!s)return;let c={TileMatrix:i.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(c,o);let f=e;return t=="KVP"?f=Dg(f,c):f=f.replace(/\{(\w+?)\}/g,function(d,y){return encodeURIComponent(c[y])}),f})}},B$=XO;function j$(n,e){let r=n.Contents.Layer?.find(function(I){return I.Identifier==e.layer});if(!r)return null;let i=n.Contents.TileMatrixSet,o;r.TileMatrixSetLink.length>1?"projection"in e?o=r.TileMatrixSetLink.findIndex(function(I){let j=i.find(function(q){return q.Identifier==I.TileMatrixSet}).SupportedCRS,Q=sn(j),Z=sn(e.projection);return Q&&Z?qr(Q,Z):j==e.projection}):o=r.TileMatrixSetLink.findIndex(function(I){return I.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);let s=r.TileMatrixSetLink[o].TileMatrixSet,a=r.TileMatrixSetLink[o].TileMatrixSetLimits,l=r.Format[0];"format"in e&&(l=e.format),o=r.Style.findIndex(function(I){return"style"in e?I.Title==e.style:I.isDefault}),o<0&&(o=0);let c=r.Style[o].Identifier,f={};"Dimension"in r&&r.Dimension.forEach(function(I,M,j){let Q=I.Identifier,Z=I.Default;Z===void 0&&(Z=I.Value[0]),f[Q]=Z});let y=n.Contents.TileMatrixSet.find(function(I){return I.Identifier==s}),p,_=y.SupportedCRS;if(_&&(p=sn(_)),"projection"in e){let I=sn(e.projection);I&&(!p||qr(I,p))&&(p=I)}let x=!1,b=p.getAxisOrientation().startsWith("ne"),S=y.TileMatrix[0],T={MinTileCol:0,MinTileRow:0,MaxTileCol:S.MatrixWidth-1,MaxTileRow:S.MatrixHeight-1};if(a){T=a[a.length-1];let I=y.TileMatrix.find(M=>M.Identifier===T.TileMatrix||y.Identifier+":"+M.Identifier===T.TileMatrix);I&&(S=I)}let A=r.BoundingBox?.find(I=>sn(I.crs)&&qr(sn(I.crs),p)),N=S.ScaleDenominator*28e-5/p.getMetersPerUnit(),k=b?[S.TopLeftCorner[1],S.TopLeftCorner[0]]:S.TopLeftCorner,W=S.TileWidth*N,X=S.TileHeight*N,Y=A?.extent??y.BoundingBox;Y&&b&&(Y=[Y[1],Y[0],Y[3],Y[2]]);let $=[k[0]+W*T.MinTileCol,k[1]-X*(1+T.MaxTileRow),k[0]+W*(1+T.MaxTileCol),k[1]-X*T.MinTileRow];if(Y!==void 0&&!zs(Y,$)){let I=r.WGS84BoundingBox,M=sn("EPSG:4326").getExtent();if($=Y,I)x=I[0]===M[0]&&I[2]===M[2];else{let j=Yl(Y,y.SupportedCRS,"EPSG:4326");x=j[0]-1e-10<=M[0]&&j[2]+1e-10>=M[2]}}let V=Dz(y,$,a),B=[],v=e.requestEncoding;if(v=v!==void 0?v:"","OperationsMetadata"in n&&"GetTile"in n.OperationsMetadata){let I=n.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let M=0,j=I.length;M<j;++M)if(I[M].Constraint){let Z=I[M].Constraint.find(function(q){return q.name=="GetEncoding"}).AllowedValues.Value;if(v===""&&(v=Z[0]),v==="KVP")Z.includes("KVP")&&B.push(I[M].href);else break}else I[M].href&&(v="KVP",B.push(I[M].href))}return B.length===0&&(v="REST",r.ResourceURL.forEach(function(I){I.resourceType==="tile"&&(l=I.format,B.push(I.template))})),{urls:B,layer:e.layer,matrixSet:s,format:l,projection:p,requestEncoding:v,tileGrid:V,style:c,dimensions:f,wrapX:x,crossOrigin:e.crossOrigin}}function I0e(n,e){if(n&1){let t=ui();Ve(0,"img",34),Qt("error",function(){An(t);let i=nn().$implicit,o=nn();return Rn(o.handleImageError(i))}),$e()}if(n&2){let t=nn().$implicit;xn("src",t.get("thumbnail"),uM)("alt",t.get("name"))}}function T0e(n,e){n&1&&(Ve(0,"div",35)(1,"span",36),yt(2,"MAP"),$e()())}function D0e(n,e){n&1&&(Ve(0,"div",37),$n(),Ve(1,"svg",38),kt(2,"path",39),$e()())}function A0e(n,e){if(n&1){let t=ui();Ve(0,"button",27),Qt("click",function(){let i=An(t).$implicit,o=nn();return Rn(o.setBaseLayerVisibility(i))}),Ve(1,"div",28),Dr(2,I0e,1,2,"img",29)(3,T0e,3,0,"div",30),$e(),Ve(4,"div",31)(5,"p",32),yt(6),$e()(),Dr(7,D0e,3,0,"div",33),$e()}if(n&2){let t=e.$implicit;lu("border-indigo-500",t.getVisible())("border-slate-200",!t.getVisible())("ring-2",t.getVisible())("ring-indigo-100",t.getVisible()),Ct(2),xn("ngIf",t.get("thumbnail")),Ct(),xn("ngIf",!t.get("thumbnail")),Ct(3),uo(" ",t.get("name").replace("Stadia Maps ","")," "),Ct(),xn("ngIf",t.getVisible())}}function R0e(n,e){if(n&1){let t=ui();Ve(0,"div",40)(1,"div",41)(2,"button",42),Qt("click",function(){let i=An(t).$implicit,o=nn();return Rn(o.toggleLayerVisibility(i))}),kt(3,"span",43),$e(),Ve(4,"span",44),yt(5),$e()(),Ve(6,"div",45)(7,"button",46),Qt("click",function(){let i=An(t).$implicit,o=nn();return Rn(o.zoomToLayer(i))}),$n(),Ve(8,"svg",47),kt(9,"path",48),$e()(),gi(),Ve(10,"button",49),$n(),Ve(11,"svg",47),kt(12,"path",50),$e()()()()}if(n&2){let t=e.$implicit;Ct(2),lu("bg-indigo-600",t.getVisible())("bg-slate-200",!t.getVisible()),Ct(),lu("translate-x-3",t.getVisible())("translate-x-0",!t.getVisible()),Ct(),lu("opacity-50",!t.getVisible()),Ct(),uo(" ",t.get("name")," ")}}var aI=class n{mapService=Me(Ro);basemaps=Lv(()=>{let e=this.mapService.map();if(!e)return[];let t=e.getLayers().getArray().filter(r=>r.get("type")==="basemap");return console.log("bm",t),t});layers=this.mapService.layers;setBaseLayerVisibility(e){this.mapService.getLayersByType("basemap").forEach(r=>{r.setVisible(!1)}),e.setVisible(!0)}toggleLayerVisibility(e){let t=e.getVisible();e.setVisible(!t)}zoomToLayer(e){if(e.get("type")==="stac"){let t=e.getExtent();t&&this.mapService.map()?.getView().fit(t,{duration:500,padding:[30,30,30,30]})}else this.mapService.zoomToVectorLayer(e)}removeLayer(e){this.mapService.removeVectorLayer(e)}getActiveBasemapName(){let e=this.basemaps().find(t=>t.getVisible());return e?e.get("name").replace("Stadia Maps ",""):"Select"}handleImageError(e){let t="assets/map-previews/osm.webp";e.get("thumbnail")!==t&&e.set("thumbnail",t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-layer-panel"]],decls:34,vars:4,consts:[[1,"absolute","top-14","right-4","z-20","w-72","flex","flex-col","bg-white/90","backdrop-blur-xl","rounded-2xl","shadow-[0_20px_50px_rgba(0,0,0,0.1)]","border","border-slate-200/60","text-slate-700","overflow-hidden","ring-1","ring-slate-900/5"],[1,"px-4","py-3","bg-slate-50/80","border-b","border-slate-200/60","flex","items-center","justify-between"],[1,"flex","items-center","gap-2.5"],[1,"p-1.5","bg-indigo-600","rounded-lg","shadow-sm","shadow-indigo-200"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"font-bold","text-[11px]","uppercase","tracking-wider","text-slate-800"],[1,"text-[9px]","font-black","px-2","py-0.5","rounded-full","bg-slate-200","text-slate-600","tracking-tighter"],[1,"overflow-y-auto","max-h-[calc(100vh-200px)]","custom-scrollbar"],[1,"p-3","border-b","border-slate-100","bg-slate-50/30"],[1,"px-2","mb-2","flex","items-center","justify-between"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-1","h-1","rounded-full","bg-indigo-400"],[1,"text-[8px]","font-medium","text-indigo-500","bg-indigo-50","px-1.5","py-0.5","rounded"],[1,"flex","gap-2","overflow-x-auto","pb-2","px-1","custom-scrollbar-horizontal","snap-x"],["class","relative flex-shrink-0 w-18 h-14 rounded-lg border-2 transition-all duration-300 snap-center overflow-hidden group",3,"border-indigo-500","border-slate-200","ring-2","ring-indigo-100","click",4,"ngFor","ngForOf"],[1,"p-3"],[1,"px-2","mb-2","text-[10px]","font-bold","text-slate-400","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-1","h-1","rounded-full","bg-slate-300"],[1,"space-y-1"],["class","group flex items-center justify-between p-2 rounded-xl transition-all duration-200 hover:bg-slate-50 border border-transparent hover:border-slate-100 shadow-none hover:shadow-sm",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-slate-50/80","border-t","border-slate-200/60","flex","justify-between","items-center","text-[10px]"],[1,"flex","items-center","gap-2","font-semibold","text-slate-500","italic"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-emerald-500"],[1,"font-bold","text-slate-400"],[1,"relative","flex-shrink-0","w-18","h-14","rounded-lg","border-2","transition-all","duration-300","snap-center","overflow-hidden","group",3,"click"],[1,"absolute","inset-0","bg-slate-200"],["class","w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",3,"src","alt","error",4,"ngIf"],["class","w-full h-full flex items-center justify-center bg-slate-300",4,"ngIf"],[1,"absolute","bottom-0","inset-x-0","bg-white/90","backdrop-blur-sm","py-0.5","px-1","text-center","border-t","border-slate-100"],[1,"text-[8px]","font-bold","text-slate-600","truncate","uppercase","tracking-tighter"],["class","absolute top-1 right-1 bg-indigo-500 rounded-full p-0.5 shadow-sm",4,"ngIf"],[1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-110",3,"error","src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","bg-slate-300"],[1,"text-[10px]","font-bold","text-slate-500"],[1,"absolute","top-1","right-1","bg-indigo-500","rounded-full","p-0.5","shadow-sm"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","4",1,"w-2","h-2","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"],[1,"group","flex","items-center","justify-between","p-2","rounded-xl","transition-all","duration-200","hover:bg-slate-50","border","border-transparent","hover:border-slate-100","shadow-none","hover:shadow-sm"],[1,"flex","items-center","gap-3","min-w-0"],[1,"relative","inline-flex","h-4","w-7","shrink-0","cursor-pointer","rounded-full","border-2","border-transparent","transition-colors","duration-200","focus:outline-none",3,"click"],[1,"pointer-events-none","inline-block","h-3","w-3","transform","rounded-full","bg-white","shadow","ring-0","transition","duration-200","ease-in-out"],[1,"truncate","text-[11px]","font-medium","text-slate-600","group-hover:text-slate-900","transition-colors"],[1,"flex","items-center","gap-1","opacity-0","group-hover:opacity-100","transition-all","duration-200"],["title","Focus Extent",1,"p-1.5","rounded-lg","hover:bg-indigo-100","text-slate-400","hover:text-indigo-600","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2.5",1,"w-3.5","h-3.5"],["d","M15 3h6m0 0v6m0-6L14 10M9 21H3m0 0v-6m0 6l7-7"],[1,"p-1.5","rounded-lg","hover:bg-red-50","text-slate-300","hover:text-red-500","transition-colors"],["d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(Ve(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),$n(),Ve(4,"svg",4),kt(5,"path",5),$e()(),gi(),Ve(6,"span",6),yt(7,"Layer Panel"),$e()(),Ve(8,"span",7),yt(9,"V1.0"),$e()(),Ve(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3",11),kt(14,"span",12),yt(15," Basemaps "),$e(),Ve(16,"span",13),yt(17),$e()(),Ve(18,"div",14),Dr(19,A0e,8,12,"button",15),$e()(),Ve(20,"div",16)(21,"h3",17),kt(22,"span",18),yt(23," Active Layers "),$e(),Ve(24,"div",19),Dr(25,R0e,13,11,"div",20),$e()()(),Ve(26,"div",21)(27,"div",22)(28,"span",23),kt(29,"span",24)(30,"span",25),$e(),yt(31," System Online "),$e(),Ve(32,"span",26),yt(33),$e()()()),t&2&&(Ct(17),uo(" ",r.getActiveBasemapName()," "),Ct(2),xn("ngForOf",r.basemaps()),Ct(6),xn("ngForOf",r.layers()),Ct(8),uo("",r.layers().length," Sources"))},dependencies:[ti,S0,co],encapsulation:2})};var lI=class n{constructor(e){this._mapService=e;Vh(()=>{let t=this._mapService.map();t&&(console.log("Map detected via Signal!"),this.initPointerListener(t))})}formattedCoords="00.0000, 00.0000";ticking=!1;initPointerListener(e){e.on("pointermove",t=>{this.ticking||(window.requestAnimationFrame(()=>{this._updateCoords(e,t.pixel),this.ticking=!1}),this.ticking=!0)})}_updateCoords(e,t){let r=e.getCoordinateFromPixel(t);if(r){let i=k8(r);this.formattedCoords=A8(i,"{y}, {x}",4)}}static \u0275fac=function(t){return new(t||n)(Ai(Ro))};static \u0275cmp=lr({type:n,selectors:[["app-mouse-position"]],decls:14,vars:1,consts:[[1,"absolute","bottom-2","left-1","z-20","flex","items-center","gap-3","px-3","py-2","bg-white/80","backdrop-blur-md","rounded-xl","shadow-lg","border","border-white/40","ring-1","ring-black/5","transition-all","duration-300","hover:bg-white/95"],[1,"flex","items-center","justify-center","w-8","h-8","rounded-lg","bg-slate-100","text-slate-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex","flex-col"],[1,"text-[9px]","font-bold","text-slate-400","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-xs","font-mono","font-semibold","text-slate-700","tabular-nums"],[1,"flex","items-center","justify-center","ml-1"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-emerald-500"]],template:function(t,r){t&1&&(Fi(0,"div",0)(1,"div",1),$n(),Fi(2,"svg",2),Rc(3,"path",3)(4,"path",4),Qi()(),gi(),Fi(5,"div",5)(6,"span",6),yt(7," Coordinates "),Qi(),Fi(8,"span",7),yt(9),Qi()(),Fi(10,"div",8)(11,"span",9),Rc(12,"span",10)(13,"span",11),Qi()()()),t&2&&(Ct(9),uo(" ",r.formattedCoords," "))},encapsulation:2})};function Kc(n,e){let t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function Bg(n,e){let t=n.length,r=Math.floor(e),i=e-r;r>=t?r-=t:r<0&&(r+=t);let o=r+1;o>=t&&(o-=t);let s=n[r],a=s[0],l=s[1],c=n[o],f=c[0]-a,d=c[1]-l;return[a+f*i,l+d*i]}var uI={index:-1,endIndex:NaN,closestTargetDistance:1/0};function dI(n,e,t,r){let i=n[0],o=n[1],s=1/0,a=-1,l=NaN;for(let d=0;d<e.targets.length;++d){let y=e.targets[d],p=y.coordinates,_=1/0,x;for(let b=0;b<p.length-1;++b){let S=p[b],T=p[b+1],A=G$(i,o,S,T);A.squaredDistance<_&&(_=A.squaredDistance,x=b+A.along)}_<s&&(s=_,y.ring&&e.targetIndex===d&&(y.endIndex>y.startIndex?x<y.startIndex&&(x+=p.length):y.endIndex<y.startIndex&&x>y.startIndex&&(x-=p.length)),l=x,a=d)}let c=e.targets[a],f=c.ring;if(e.targetIndex===a&&f){let d=Bg(c.coordinates,l),y=t.getPixelFromCoordinate(d),p=t.getPixelFromCoordinate(e.startCoord);Ch(y,p)>r&&(f=!1)}if(f){let d=c.coordinates,y=d.length,p=c.startIndex,_=l;if(p<_){let x=fI(d,p,_);fI(d,p,_-y)<x&&(l-=y)}else{let x=fI(d,p,_);fI(d,p,_+y)<x&&(l+=y)}}return uI.index=a,uI.endIndex=l,uI.closestTargetDistance=s,uI}function pI(n,e){let t=[];for(let r=0;r<e.length;++r){let o=e[r].getGeometry();U$(n,o,t)}return t}function U$(n,e,t){if(e instanceof ho){cI(n,e.getCoordinates(),!1,t);return}if(e instanceof Qs){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)cI(n,r[i],!1,t);return}if(e instanceof Wo){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)cI(n,r[i],!0,t);return}if(e instanceof Al){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length;a<l;++a)cI(n,s[a],!0,t)}return}if(e instanceof Ds){let r=e.getGeometries();for(let i=0;i<r.length;++i)U$(n,r[i],t);return}}function cI(n,e,t,r){let i=n[0],o=n[1];for(let s=0,a=e.length-1;s<a;++s){let l=e[s],c=e[s+1],f=G$(i,o,l,c);if(f.squaredDistance===0){let d=s+f.along;r.push({coordinates:e,ring:t,startIndex:d,endIndex:d});return}}}function hI(n,e){return _l(n[0],n[1],e[0],e[1])}function fI(n,e,t){let r,i;e<t?(r=e,i=t):(r=t,i=e);let o=Math.ceil(r),s=Math.floor(i);if(o>s){let l=Bg(n,r),c=Bg(n,i);return hI(l,c)}let a=0;if(r<o){let l=Bg(n,r),c=Kc(n,o);a+=hI(l,c)}if(s<i){let l=Kc(n,s),c=Bg(n,i);a+=hI(l,c)}for(let l=o;l<s-1;++l){let c=Kc(n,l),f=Kc(n,l+1);a+=hI(c,f)}return a}var ZO={along:0,squaredDistance:0};function G$(n,e,t,r){let i=t[0],o=t[1],s=r[0],a=r[1],l=s-i,c=a-o,f=0,d=i,y=o;return(l!==0||c!==0)&&(f=Xn(((n-i)*l+(e-o)*c)/(l*l+c*c),0,1),d+=l*f,y+=c*f),ZO.along=f,ZO.squaredDistance=ym(_l(n,e,d,y),10),ZO}var gI={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Ky=class extends jr{constructor(e,t){super(e),this.feature=t}},KO=class extends Zs{constructor(e){let t=e;t.stopDown||(t.stopDown=fu),super(t),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=N0e(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Ss,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){let i=this.mode_;if(i==="Circle")r=(o,s,a)=>{let l=s||new Cz([NaN,NaN]),c=Or(o[0],a),f=Tm(c,Or(o[o.length-1],a));l.setCenterAndRadius(c,Math.sqrt(f),this.geometryLayout_);let d=_s();return d&&l.transform(a,d),l};else{let o;i==="Point"?o=Ui:i==="LineString"?o=ho:i==="Polygon"&&(o=Wo),r=(s,a,l)=>(a?i==="Polygon"?s[0].length?a.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(s,this.geometryLayout_):a=new o(s,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Tl({source:new ba({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:M0e(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:X0,this.freehandCondition_,e.freehand?this.freehandCondition_=Xu:this.freehandCondition_=e.freehandCondition?e.freehandCondition:gg,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(dg.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Xu:t=e:t=pg,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=Xu:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:gg}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===gt.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Pn.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Pn.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Pn.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===Pn.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===Pn.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Pn.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Pn.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new pu(Pn.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}let t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),o=wi([r,i]),s=this.traceSource_.getFeaturesInExtent(o);if(s.length===0)return;let a=pI(e.coordinate,s);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){let r=e.startIndex<=e.endIndex,i=e.startIndex<=t;r===i?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){let i=Math.ceil(e),o=Math.floor(t);o===t&&(o-=1),r=o-i+1}else{let i=Math.floor(e),o=Math.ceil(t);o===t&&(o+=1),r=i-o+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;let i=[];if(t<r){let o=Math.ceil(t),s=Math.floor(r);s===r&&(s-=1);for(let a=o;a<=s;++a)i.push(Kc(e.coordinates,a))}else{let o=Math.floor(t),s=Math.ceil(r);s===r&&(s+=1);for(let a=o;a>=s;--a)i.push(Kc(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){let t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){let a=e.map.getPixelFromCoordinate(t.startCoord);if(Ch(a,e.pixel)<this.snapTolerance_)return}let r=dI(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){let l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}let a=t.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{let a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}t.targetIndex=r.index;let i=t.targets[t.targetIndex];i.endIndex=r.endIndex;let o=Bg(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(o);e.coordinate=o,e.pixel=[Math.round(s[0]),Math.round(s[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);let r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){let i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){let t=this.downPx_,r=e.pixel,i=t[0]-r[0],o=t[1]-r[1],s=i*i+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let i=!1,o=[this.finishCoordinate_],s=this.mode_;if(s==="Point")r=!0;else if(s==="Circle")r=this.sketchCoords_.length===2;else if(s==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){let a=this.sketchCoords_;i=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],t?o=[a[0][0]]:o=[a[0][0],a[0][a[0].length-2]]}if(i){let a=this.getMap();for(let l=0,c=o.length;l<c;l++){let f=o[l],d=a.getPixelFromCoordinate(f),y=e[0]-d[0],p=e[1]-d[1],_=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(y*y+p*p)<=_,r){this.finishCoordinate_=f;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Zr(new Ui(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Zr);let t=e.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new ho(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){let t=this.getMap().getView().getProjection(),r=c1(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Zr(new ho(this.sketchLineCoords_)));let i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Zr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Ky(gI.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){let t=this.getMap(),r=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),o=c1(this.geometryLayout_),s,a;for(;e.length<o;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],a=s[s.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(s=this.sketchCoords_,a=s[s.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){let t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i,o,s=this.mode_;return s==="LineString"||s==="Circle"?(this.finishCoordinate_=e.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),this.geometryFunction_(o,t,r)):s==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),i&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;let t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let o=0;o<e;++o){let s;if(i==="LineString"||i==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();let a=this.finishCoordinate_.slice();s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(s,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);let a=this.sketchLine_.getGeometry();if(s.length>=2){let l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,t,r)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){let e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_,r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,i),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Dl([t])):this.type_==="MultiLineString"?e.setGeometry(new Qs([t])):this.type_==="MultiPolygon"&&e.setGeometry(new Al([t])),this.dispatchEvent(new Ky(gI.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;let e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){let e=this.abortDrawing_();e&&this.dispatchEvent(new Ky(gI.DRAWABORT,e))}appendCoordinates(e){let t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let s=0;s<e.length;s++)this.addToDrawing_(e[s]);let o=e[e.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(e){let r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();let i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new Zr(new Ui(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Ky(gI.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){let e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);let t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){let e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};function M0e(){let n=ry();return function(e,t){return n[e.getGeometry().getType()]}}function N0e(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}var JO=KO;var il=class n{_drawSource=new ba;_stacDrawSource=new ba;_activeDrawInteraction=null;_activeStacDrawInteraction=null;activeType=un(null);get source(){return this._drawSource}get stacSource(){return this._stacDrawSource}startDrawing(e,t,r){this.stopDrawing(e),this._activeDrawInteraction=new JO({source:this._drawSource,type:t}),r&&this._activeDrawInteraction.on("drawend",i=>{r(i.feature),this.stopDrawing(e)}),e.addInteraction(this._activeDrawInteraction),this.activeType.set(t)}startStacDrawing(e,t){this.stopStacDrawing(e),this._activeStacDrawInteraction=new JO({source:this._stacDrawSource,type:"Polygon"}),t&&this._activeStacDrawInteraction.on("drawend",r=>{t(r.feature),this.stopStacDrawing(e)}),e.addInteraction(this._activeStacDrawInteraction)}stopDrawing(e){this._activeDrawInteraction&&(e.removeInteraction(this._activeDrawInteraction),this._activeDrawInteraction=null),this.activeType.set(null)}stopStacDrawing(e){this._activeStacDrawInteraction&&(e.removeInteraction(this._activeStacDrawInteraction),this._activeStacDrawInteraction=null)}clearDrawings(){this._drawSource.clear()}clearStacDrawings(){this._stacDrawSource.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};function P0e(n,e){n&1&&($n(),Ve(0,"svg",8),kt(1,"path",9),$e())}function L0e(n,e){n&1&&($n(),Ve(0,"svg",10),kt(1,"circle",11)(2,"path",12),$e())}var mI=class n{constructor(e){this.geoDataService=e}loading=!1;error=null;onFileSelected(e){return We(this,null,function*(){let t=e.target.files?.[0];t&&this.geoDataService.import(t)})}static \u0275fac=function(t){return new(t||n)(Ai($d))};static \u0275cmp=lr({type:n,selectors:[["app-upload"]],decls:9,vars:3,consts:[["fileInput",""],[1,"relative","flex","items-center","group"],["type","button",1,"relative","flex","items-center","justify-center","w-10","h-10","rounded-xl","bg-indigo-600","text-white","ring-4","ring-indigo-100","text-white","shadow-md","hover:shadow-indigo-200","hover:scale-105","transition-all","duration-200","active:scale-95","disabled:opacity-50","disabled:scale-100","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-5 h-5 transition-transform group-hover:translate-y-[-1px]","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","w-5 h-5 animate-spin","viewBox","0 0 24 24","fill","none",4,"ngIf"],["type","file","hidden","",3,"change"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-[60]"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","transition-transform","group-hover:translate-y-[-1px]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["viewBox","0 0 24 24","fill","none",1,"w-5","h-5","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v8H4z",1,"opacity-75"]],template:function(t,r){if(t&1){let i=ui();Ve(0,"div",1)(1,"button",2),Qt("click",function(){An(i);let s=Rv(5);return Rn(s.click())}),Dr(2,P0e,2,0,"svg",3)(3,L0e,3,0,"svg",4),$e(),Ve(4,"input",5,0),Qt("change",function(s){return An(i),Rn(r.onFileSelected(s))}),$e(),Ve(6,"div",6),yt(7," IMPORT DATA "),kt(8,"div",7),$e()()}t&2&&(Ct(),xn("disabled",r.loading),Ct(),xn("ngIf",!r.loading),Ct(),xn("ngIf",r.loading))},dependencies:[ti,co],encapsulation:2})};function k0e(n,e){if(n&1){let t=ui();Ve(0,"div",7)(1,"button",8),Qt("click",function(){An(t);let i=nn();return Rn(i.export("kml"))}),Ve(2,"span",9),yt(3,"\u{1F30D}"),$e(),Ve(4,"span"),yt(5,"Google Earth (KML)"),$e()(),Ve(6,"button",8),Qt("click",function(){An(t);let i=nn();return Rn(i.export("geojson"))}),Ve(7,"span",10),yt(8,"\u{1F9ED}"),$e(),Ve(9,"span"),yt(10,"GeoJSON File"),$e()(),Ve(11,"button",8),Qt("click",function(){An(t);let i=nn();return Rn(i.export("zip"))}),Ve(12,"span",11),yt(13,"\u{1F5FA}\uFE0F"),$e(),Ve(14,"span"),yt(15,"Shapefile (SHP)"),$e()()()}}var yI=class n{_el=Me(li);_geoDataService=Me($d);_drawService=Me(il);_mapService=Me(Ro);showExportMenu=un(!1);onDocumentClick(e){this._el.nativeElement.contains(e.target)||this.showExportMenu.set(!1)}toggleExportMenu(){this.showExportMenu.update(e=>!e)}export(e){return We(this,null,function*(){try{if(this.showExportMenu.set(!1),e==="kml"||e==="gpx"||e==="zip"||e==="geojson"){let t=this.mergeSources(),r=yield this._geoDataService.exportAllData(e,t),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=`export.${e}`,o.click(),URL.revokeObjectURL(i)}}catch(t){console.error("Export error:",t),alert(t instanceof Error?t.message:"Export failed")}})}mergeSources(){let e=new fo,t=[...this._mapService.getImportedSource().getFeatures(),...this._drawService.source.getFeatures()];return e.writeFeaturesObject(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-download"]],hostBindings:function(t,r){t&1&&Qt("click",function(o){return r.onDocumentClick(o)},Gh)},decls:8,vars:1,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","bg-indigo-600","text-white","ring-4","ring-indigo-100","hover:scale-105","transition-all","duration-200","active:scale-95",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","group-hover/btn:translate-y-[-1px]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"flex","items-center","gap-3","px-3","py-2.5","rounded-xl","hover:bg-blue-50","text-xs","font-semibold","text-gray-700","transition-all",3,"click"],[1,"flex","items-center","justify-center","w-7","h-7","bg-orange-100","rounded-lg","text-sm","shadow-sm"],[1,"flex","items-center","justify-center","w-7","h-7","bg-emerald-100","rounded-lg","text-sm","shadow-sm"],[1,"flex","items-center","justify-center","w-7","h-7","bg-blue-100","rounded-lg","text-sm","shadow-sm"]],template:function(t,r){t&1&&(Ve(0,"div",0)(1,"button",1),Qt("click",function(){return r.toggleExportMenu()}),$n(),Ve(2,"svg",2),kt(3,"path",3),$e()(),gi(),Ve(4,"div",4),yt(5," EXPORT DATA "),kt(6,"div",5),$e(),Dr(7,k0e,16,0,"div",6),$e()),t&2&&(Ct(7),xn("ngIf",r.showExportMenu()))},dependencies:[ti,co],encapsulation:2})};function O0e(n,e){n&1&&kt(0,"div",16)}function F0e(n,e){n&1&&kt(0,"div",16)}function B0e(n,e){n&1&&kt(0,"div",16)}function j0e(n,e){if(n&1){let t=ui();Ve(0,"div",7)(1,"div",8),yt(2,"Select Type"),$e(),Ve(3,"button",9),Qt("click",function(){An(t);let i=nn();return Rn(i.startDrawing("Point"))}),Ve(4,"div",10)(5,"span",11),yt(6,"\u{1F4CD}"),$e(),Ve(7,"span"),yt(8,"Point"),$e()(),Dr(9,O0e,1,0,"div",12),$e(),Ve(10,"button",9),Qt("click",function(){An(t);let i=nn();return Rn(i.startDrawing("LineString"))}),Ve(11,"div",10)(12,"span",11),yt(13,"\u{1F4CF}"),$e(),Ve(14,"span"),yt(15,"Line"),$e()(),Dr(16,F0e,1,0,"div",12),$e(),Ve(17,"button",9),Qt("click",function(){An(t);let i=nn();return Rn(i.startDrawing("Polygon"))}),Ve(18,"div",10)(19,"span",11),yt(20,"\u2B20"),$e(),Ve(21,"span"),yt(22,"Polygon"),$e()(),Dr(23,B0e,1,0,"div",12),$e(),kt(24,"div",13),Ve(25,"button",14),Qt("click",function(){An(t);let i=nn();return Rn(i.startDrawing(null))}),Ve(26,"span",15),yt(27,"\u2715"),$e(),Ve(28,"span"),yt(29,"Stop Drawing"),$e()()()}if(n&2){let t=nn();Ct(9),xn("ngIf",t.activeType()==="Point"),Ct(7),xn("ngIf",t.activeType()==="LineString"),Ct(7),xn("ngIf",t.activeType()==="Polygon")}}var _I=class n{_el=Me(li);_drawService=Me(il);_mapService=Me(Ro);showMenu=un(!1);activeType=this._drawService.activeType;_dblClickListener=null;onDocumentClick(e){this._el.nativeElement.contains(e.target)||this.showMenu.set(!1)}toggleMenu(){this.showMenu.update(e=>!e)}startDrawing(e){let t=this._mapService.map();t&&(e===null?(this._drawService.stopDrawing(t),this._removeDblClickListener(t)):(this._drawService.startDrawing(t,e),this._addDblClickListener(t)),this.showMenu.set(!1))}_addDblClickListener(e){this._removeDblClickListener(e),this._dblClickListener=t=>{t.button===0&&this.activeType()&&(this._drawService.stopDrawing(e),this._removeDblClickListener(e))},e.getViewport().addEventListener("dblclick",this._dblClickListener)}_removeDblClickListener(e){this._dblClickListener&&(e.getViewport().removeEventListener("dblclick",this._dblClickListener),this._dblClickListener=null)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-drawing-tools"]],hostBindings:function(t,r){t&1&&Qt("click",function(o){return r.onDocumentClick(o)},Gh)},decls:8,vars:2,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","group-hover/btn:rotate-12","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"px-3","py-1.5","mb-1","text-[9px]","uppercase","tracking-wider","font-bold","text-slate-400"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-indigo-50","text-xs","font-semibold","text-slate-700","transition-all",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","justify-center","w-7","h-7","bg-indigo-100","rounded-lg","shadow-sm"],["class","w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse",4,"ngIf"],[1,"h-[1px]","bg-slate-100","my-1"],[1,"flex","items-center","gap-3","px-3","py-2.5","rounded-xl","hover:bg-red-50","text-xs","font-semibold","text-red-600","transition-all",3,"click"],[1,"flex","items-center","justify-center","w-7","h-7","bg-red-100","rounded-lg"],[1,"w-1.5","h-1.5","rounded-full","bg-indigo-500","animate-pulse"]],template:function(t,r){t&1&&(Ve(0,"div",0)(1,"button",1),Qt("click",function(){return r.toggleMenu()}),$n(),Ve(2,"svg",2),kt(3,"path",3),$e()(),gi(),Ve(4,"div",4),yt(5," DRAWING TOOLS "),kt(6,"div",5),$e(),Dr(7,j0e,30,3,"div",6),$e()),t&2&&(Ct(),xn("ngClass",r.activeType()?"bg-indigo-600 text-white ring-4 ring-indigo-100":"bg-gradient-to-tr from-indigo-600 to-indigo-500 text-white hover:scale-105"),Ct(6),xn("ngIf",r.showMenu()))},dependencies:[ti,$h,co],encapsulation:2})};var Rs=Uint8Array,kl=Uint16Array,s3=Int32Array,vI=new Rs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xI=new Rs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n3=new Rs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),q$=function(n,e){for(var t=new kl(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new s3(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},W$=q$(vI,2),$$=W$.b,r3=W$.r;$$[28]=258,r3[258]=28;var Y$=q$(xI,0),U0e=Y$.b,z$=Y$.r,i3=new kl(32768);for(Nr=0;Nr<32768;++Nr)Cf=(Nr&43690)>>1|(Nr&21845)<<1,Cf=(Cf&52428)>>2|(Cf&13107)<<2,Cf=(Cf&61680)>>4|(Cf&3855)<<4,i3[Nr]=((Cf&65280)>>8|(Cf&255)<<8)>>1;var Cf,Nr,Jc=function(n,e,t){for(var r=n.length,i=0,o=new kl(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new kl(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new kl(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],f=e-n[i],d=s[n[i]-1]++<<f,y=d|(1<<f)-1;d<=y;++d)a[i3[d]>>l]=c}else for(a=new kl(r),i=0;i<r;++i)n[i]&&(a[i]=i3[s[n[i]-1]++]>>15-n[i]);return a},Qd=new Rs(288);for(Nr=0;Nr<144;++Nr)Qd[Nr]=8;var Nr;for(Nr=144;Nr<256;++Nr)Qd[Nr]=9;var Nr;for(Nr=256;Nr<280;++Nr)Qd[Nr]=7;var Nr;for(Nr=280;Nr<288;++Nr)Qd[Nr]=8;var Nr,Tx=new Rs(32);for(Nr=0;Nr<32;++Nr)Tx[Nr]=5;var Nr,G0e=Jc(Qd,9,0),z0e=Jc(Qd,9,1),V0e=Jc(Tx,5,0),H0e=Jc(Tx,5,1),QO=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},oc=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},e3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},a3=function(n){return(n+7)/8|0},X$=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Rs(n.subarray(e,t))};var q0e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ll=function(n,e,t){var r=new Error(e||q0e[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Ll),!t)throw r;return r},l3=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new Rs(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new Rs(i*3));var c=function(He){var G=t.length;if(He>G){var be=new Rs(Math.max(G*2,He));be.set(t),t=be}},f=e.f||0,d=e.p||0,y=e.b||0,p=e.l,_=e.d,x=e.m,b=e.n,S=i*8;do{if(!p){f=oc(n,d,1);var T=oc(n,d+1,3);if(d+=3,T)if(T==1)p=z0e,_=H0e,x=9,b=5;else if(T==2){var W=oc(n,d,31)+257,X=oc(n,d+10,15)+4,Y=W+oc(n,d+5,31)+1;d+=14;for(var $=new Rs(Y),V=new Rs(19),B=0;B<X;++B)V[n3[B]]=oc(n,d+B*3,7);d+=X*3;for(var v=QO(V),I=(1<<v)-1,M=Jc(V,v,1),B=0;B<Y;){var j=M[oc(n,d,I)];d+=j&15;var A=j>>4;if(A<16)$[B++]=A;else{var Q=0,Z=0;for(A==16?(Z=3+oc(n,d,3),d+=2,Q=$[B-1]):A==17?(Z=3+oc(n,d,7),d+=3):A==18&&(Z=11+oc(n,d,127),d+=7);Z--;)$[B++]=Q}}var q=$.subarray(0,W),K=$.subarray(W);x=QO(q),b=QO(K),p=Jc(q,x,1),_=Jc(K,b,1)}else Ll(1);else{var A=a3(d)+4,N=n[A-4]|n[A-3]<<8,k=A+N;if(k>i){l&&Ll(0);break}a&&c(y+N),t.set(n.subarray(A,k),y),e.b=y+=N,e.p=d=k*8,e.f=f;continue}if(d>S){l&&Ll(0);break}}a&&c(y+131072);for(var oe=(1<<x)-1,_e=(1<<b)-1,F=d;;F=d){var Q=p[e3(n,d)&oe],ee=Q>>4;if(d+=Q&15,d>S){l&&Ll(0);break}if(Q||Ll(2),ee<256)t[y++]=ee;else if(ee==256){F=d,p=null;break}else{var ce=ee-254;if(ee>264){var B=ee-257,pe=vI[B];ce=oc(n,d,(1<<pe)-1)+$$[B],d+=pe}var J=_[e3(n,d)&_e],xe=J>>4;J||Ll(3),d+=J&15;var K=U0e[xe];if(xe>3){var pe=xI[xe];K+=e3(n,d)&(1<<pe)-1,d+=pe}if(d>S){l&&Ll(0);break}a&&c(y+131072);var Se=y+ce;if(y<K){var ve=o-K,re=Math.min(K,Se);for(ve+y<0&&Ll(3);y<re;++y)t[y]=r[ve+y]}for(;y<Se;++y)t[y]=t[y-K]}}e.l=p,e.p=F,e.b=y,e.f=f,p&&(f=1,e.m=x,e.d=_,e.n=b)}while(!f);return y!=t.length&&s?X$(t,0,y):t.subarray(0,y)},If=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Cx=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},t3=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:K$,l:0};if(i==1){var s=new Rs(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(k,W){return k.f-W.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,f=1,d=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=t[t[c].f<t[d].f?c++:d++],l=t[c!=f&&t[c].f<t[d].f?c++:d++],t[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=o[0].s,r=1;r<i;++r)o[r].s>y&&(y=o[r].s);var p=new kl(y+1),_=o3(t[f-1],p,0);if(_>e){var r=0,x=0,b=_-e,S=1<<b;for(o.sort(function(W,X){return p[X.s]-p[W.s]||W.f-X.f});r<i;++r){var T=o[r].s;if(p[T]>e)x+=S-(1<<_-p[T]),p[T]=e;else break}for(x>>=b;x>0;){var A=o[r].s;p[A]<e?x-=1<<e-p[A]++-1:++r}for(;r>=0&&x;--r){var N=o[r].s;p[N]==e&&(--p[N],++x)}_=e}return{t:new Rs(p),l:_}},o3=function(n,e,t){return n.s==-1?Math.max(o3(n.l,e,t+1),o3(n.r,e,t+1)):e[n.s]=t},V$=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new kl(++e),r=0,i=n[0],o=1,s=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},Ix=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Z$=function(n,e,t){var r=t.length,i=a3(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},H$=function(n,e,t,r,i,o,s,a,l,c,f){If(e,f++,t),++i[256];for(var d=t3(i,15),y=d.t,p=d.l,_=t3(o,15),x=_.t,b=_.l,S=V$(y),T=S.c,A=S.n,N=V$(x),k=N.c,W=N.n,X=new kl(19),Y=0;Y<T.length;++Y)++X[T[Y]&31];for(var Y=0;Y<k.length;++Y)++X[k[Y]&31];for(var $=t3(X,7),V=$.t,B=$.l,v=19;v>4&&!V[n3[v-1]];--v);var I=c+5<<3,M=Ix(i,Qd)+Ix(o,Tx)+s,j=Ix(i,y)+Ix(o,x)+s+14+3*v+Ix(X,V)+2*X[16]+3*X[17]+7*X[18];if(l>=0&&I<=M&&I<=j)return Z$(e,f,n.subarray(l,l+c));var Q,Z,q,K;if(If(e,f,1+(j<M)),f+=2,j<M){Q=Jc(y,p,0),Z=y,q=Jc(x,b,0),K=x;var oe=Jc(V,B,0);If(e,f,A-257),If(e,f+5,W-1),If(e,f+10,v-4),f+=14;for(var Y=0;Y<v;++Y)If(e,f+3*Y,V[n3[Y]]);f+=3*v;for(var _e=[T,k],F=0;F<2;++F)for(var ee=_e[F],Y=0;Y<ee.length;++Y){var ce=ee[Y]&31;If(e,f,oe[ce]),f+=V[ce],ce>15&&(If(e,f,ee[Y]>>5&127),f+=ee[Y]>>12)}}else Q=G0e,Z=Qd,q=V0e,K=Tx;for(var Y=0;Y<a;++Y){var pe=r[Y];if(pe>255){var ce=pe>>18&31;Cx(e,f,Q[ce+257]),f+=Z[ce+257],ce>7&&(If(e,f,pe>>23&31),f+=vI[ce]);var J=pe&31;Cx(e,f,q[J]),f+=K[J],J>3&&(Cx(e,f,pe>>5&8191),f+=xI[J])}else Cx(e,f,Q[pe]),f+=Z[pe]}return Cx(e,f,Q[256]),f+Z[256]},W0e=new s3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),K$=new Rs(0),$0e=function(n,e,t,r,i,o){var s=o.z||n.length,a=new Rs(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,f=(o.r||0)&7;if(e){f&&(l[0]=o.r>>3);for(var d=W0e[e-1],y=d>>13,p=d&8191,_=(1<<t)-1,x=o.p||new kl(32768),b=o.h||new kl(_+1),S=Math.ceil(t/3),T=2*S,A=function(Ie){return(n[Ie]^n[Ie+1]<<S^n[Ie+2]<<T)&_},N=new s3(25e3),k=new kl(288),W=new kl(32),X=0,Y=0,$=o.i||0,V=0,B=o.w||0,v=0;$+2<s;++$){var I=A($),M=$&32767,j=b[I];if(x[M]=j,b[I]=M,B<=$){var Q=s-$;if((X>7e3||V>24576)&&(Q>423||!c)){f=H$(n,l,0,N,k,W,Y,V,v,$-v,f),V=X=Y=0,v=$;for(var Z=0;Z<286;++Z)k[Z]=0;for(var Z=0;Z<30;++Z)W[Z]=0}var q=2,K=0,oe=p,_e=M-j&32767;if(Q>2&&I==A($-_e))for(var F=Math.min(y,Q)-1,ee=Math.min(32767,$),ce=Math.min(258,Q);_e<=ee&&--oe&&M!=j;){if(n[$+q]==n[$+q-_e]){for(var pe=0;pe<ce&&n[$+pe]==n[$+pe-_e];++pe);if(pe>q){if(q=pe,K=_e,pe>F)break;for(var J=Math.min(_e,pe-2),xe=0,Z=0;Z<J;++Z){var Se=$-_e+Z&32767,ve=x[Se],re=Se-ve&32767;re>xe&&(xe=re,j=Se)}}}M=j,j=x[M],_e+=M-j&32767}if(K){N[V++]=268435456|r3[q]<<18|z$[K];var He=r3[q]&31,G=z$[K]&31;Y+=vI[He]+xI[G],++k[257+He],++W[G],B=$+q,++X}else N[V++]=n[$],++k[n[$]]}}for($=Math.max($,B);$<s;++$)N[V++]=n[$],++k[n[$]];f=H$(n,l,c,N,k,W,Y,V,v,$-v,f),c||(o.r=f&7|l[f/8|0]<<3,f-=7,o.h=b,o.p=x,o.i=$,o.w=B)}else{for(var $=o.w||0;$<s+c;$+=65535){var be=$+65535;be>=s&&(l[f/8|0]=c,be=s),f=Z$(l,f+1,n.subarray($,be))}o.i=s}return X$(a,0,r+a3(f)+i)};var J$=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Y0e=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new Rs(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return $0e(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var Q$=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var X0e=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&Ll(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},Z0e=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0};var K0e=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=J$();i.p(e.dictionary),Q$(n,2,i.d())}},J0e=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Ll(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&Ll(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function Q0e(n,e){return l3(n,{i:2},e&&e.out,e&&e.dictionary)}function eye(n,e){var t=X0e(n);return t+8>n.length&&Ll(6,"invalid gzip data"),l3(n.subarray(t,-8),{i:2},e&&e.out||new Rs(Z0e(n)),e&&e.dictionary)}function wI(n,e){e||(e={});var t=J$();t.p(n);var r=Y0e(n,e,e.dictionary?6:2,4);return K0e(r,e),Q$(r,r.length-4,t.d()),r}function tye(n,e){return l3(n.subarray(J0e(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function eY(n,e){return n[0]==31&&n[1]==139&&n[2]==8?eye(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Q0e(n,e):tye(n,e)}var nye=typeof TextDecoder<"u"&&new TextDecoder,rye=0;try{nye.decode(K$,{stream:!0}),rye=1}catch{}function tY(n){if(Array.isArray(n))return n}function nY(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function u3(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function rY(n,e){if(n){if(typeof n=="string")return u3(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u3(n,e):void 0}}function iY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c3(n,e){return tY(n)||nY(n,e)||rY(n,e)||iY()}function h3(n,e="utf8"){return new TextDecoder(e).decode(n)}var iye=new TextEncoder;function oY(n){return iye.encode(n)}var oye=1024*8,sye=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),f3={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},Dx=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=oye,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=f3[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===sye&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let l=new f3[t](a.buffer);return this.offset+=r,l.reverse(),l}let s=new f3[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return h3(this.readBytes(e))}decodeText(e=1,t="utf8"){return h3(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(oY(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};var aY=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;aY[n]=e}var sY=4294967295;function aye(n,e,t){let r=n;for(let i=0;i<t;i++)r=aY[(r^e[i])&255]^r>>>8;return r}function lye(n,e){return(aye(sY,n,e)^sY)>>>0}function d3(n,e,t){let r=n.readUint32(),i=lye(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function EI(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function bI(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function SI(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function CI(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function II(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+uye(e[o-i],t[o],t[o-i])&255}}function uye(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function lY(n,e,t,r,i,o){switch(n){case 0:EI(e,t,i);break;case 1:bI(e,t,i,o);break;case 2:SI(e,t,r,i);break;case 3:CI(e,t,r,i,o);break;case 4:II(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var cye=new Uint16Array([255]),hye=new Uint8Array(cye.buffer),fye=hye[0]===255;function uY(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,l=new Uint8Array(r*t*a),c=0;for(let f=0;f<7;f++){let d=s[f],y=Math.ceil((t-d.x)/d.xStep),p=Math.ceil((r-d.y)/d.yStep);if(y<=0||p<=0)continue;let _=y*a,x=new Uint8Array(_);for(let b=0;b<p;b++){let S=e[c++],T=e.subarray(c,c+_);c+=_;let A=new Uint8Array(_);lY(S,T,A,x,_,a),x.set(A);for(let N=0;N<y;N++){let k=d.x+N*d.xStep,W=d.y+b*d.yStep;if(!(k>=t||W>=r))for(let X=0;X<a;X++)l[(W*t+k)*a+X]=A[N*a+X]}}}if(o===16){let f=new Uint16Array(l.buffer);if(fye)for(let d=0;d<f.length;d++)f[d]=dye(f[d]);return f}else return l}function dye(n){return(n&255)<<8|n>>8&255}var pye=new Uint16Array([255]),gye=new Uint8Array(pye.buffer),mye=gye[0]===255,yye=new Uint8Array(0);function p3(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),l=new Uint8Array(r*a),c=yye,f=0,d,y;for(let p=0;p<r;p++){switch(d=e.subarray(f+1,f+1+a),y=l.subarray(p*a,(p+1)*a),e[f]){case 0:EI(d,y,a);break;case 1:bI(d,y,a,s);break;case 2:SI(d,y,c,a);break;case 3:CI(d,y,c,a,s);break;case 4:II(d,y,c,a,s);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=y,f+=a+1}if(o===16){let p=new Uint16Array(l.buffer);if(mye)for(let _=0;_<p.length;_++)p[_]=_ye(p[_]);return p}else return l}function _ye(n){return(n&255)<<8|n>>8&255}var TI=Uint8Array.of(137,80,78,71,13,10,26,10);function g3(n){if(!cY(n.readBytes(TI.length)))throw new Error("wrong PNG signature")}function cY(n){if(n.length<TI.length)return!1;for(let e=0;e<TI.length;e++)if(n[e]!==TI[e])return!1;return!0}var hY="tEXt",xye=0,fY=new TextDecoder("latin1");function wye(n){if(bye(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var Eye=/^[\u0000-\u00FF]*$/;function bye(n){if(!Eye.test(n))throw new Error("invalid latin1 text")}function dY(n,e,t){let r=m3(e);n[r]=Sye(e,t-r.length-1)}function m3(n){for(n.mark();n.readByte()!==xye;);let e=n.offset;n.reset();let t=fY.decode(n.readBytes(e-n.offset-1));return n.skip(1),wye(t),t}function Sye(n,e){return fY.decode(n.readBytes(e))}var Ta={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ax={UNKNOWN:-1,DEFLATE:0},DI={UNKNOWN:-1,ADAPTIVE:0},Rx={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Mx={NONE:0,BACKGROUND:1,PREVIOUS:2},AI={SOURCE:0,OVER:1};var RI=class extends Dx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new GD,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ax.UNKNOWN,this._filterMethod=DI.UNKNOWN,this._interlaceMethod=Rx.UNKNOWN,this._colorType=Ta.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(g3(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(g3(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case hY:dY(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?d3(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?d3(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Cye(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case Ta.GREYSCALE:r=1;break;case Ta.TRUECOLOUR:r=3;break;case Ta.INDEXED_COLOUR:r=1;break;case Ta.GREYSCALE_ALPHA:r=2;break;case Ta.TRUECOLOUR_ALPHA:r=4;break;case Ta.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ax.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ta.GREYSCALE:case Ta.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ta.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ta.UNKNOWN:case Ta.GREYSCALE_ALPHA:case Ta.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=m3(this),r=this.readUint8();if(r!==Ax.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:z8(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=p3({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case Mx.NONE:break;case Mx.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case Mx.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,l=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:l}};switch(t.blendOp){case AI.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:l}=i(o,s);for(let c=0;c<this._png.channels;c++)e.data[a+c]=t.data[l+c]}break;case AI.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:l}=i(o,s);for(let c=0;c<this._png.channels;c++){let f=t.data[l+this._png.channels-1]/r,d=c%(this._png.channels-1)===0?1:t.data[l+c],y=Math.floor(f*d+(1-f)*e.data[a+c]);e.data[a+c]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==DI.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Rx.NO_INTERLACE)this._png.data=p3({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Rx.ADAM7)this._png.data=uY({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Mx.NONE,blendOp:AI.SOURCE,data:e}),this._inflator=new GD,this._writingDataChunks=!1}};function Cye(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function pY(n,e){return new RI(n,e).decode()}var mn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function y3(){mn.console&&typeof mn.console.log=="function"&&mn.console.log.apply(mn.console,arguments)}var fi={log:y3,warn:function(n){mn.console&&(typeof mn.console.warn=="function"?mn.console.warn.apply(mn.console,arguments):y3.call(null,arguments))},error:function(n){mn.console&&(typeof mn.console.error=="function"?mn.console.error.apply(mn.console,arguments):y3(n))}};function _3(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){jg(r.response,e,t)},r.onerror=function(){fi.error("could not download file")},r.send()}function gY(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function MI(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var jg=mn.saveAs||((typeof window>"u"?"undefined":Qr(window))!=="object"||window!==mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=mn.URL||mn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?gY(i.href)?_3(n,e,t):MI(i,i.target="_blank"):MI(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){MI(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(gY(n))_3(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){MI(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Qr(o)!=="object"&&(fi.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return _3(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(mn.HTMLElement)||mn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Qr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=s?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(n)}else{var l=mn.URL||mn.webkitURL,c=l.createObjectURL(n);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function jY(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var kI=mn.atob.bind(mn),mY=mn.btoa.bind(mn);function v3(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=sa(t,r,i,o,e[0],7,-680876936),o=sa(o,t,r,i,e[1],12,-389564586),i=sa(i,o,t,r,e[2],17,606105819),r=sa(r,i,o,t,e[3],22,-1044525330),t=sa(t,r,i,o,e[4],7,-176418897),o=sa(o,t,r,i,e[5],12,1200080426),i=sa(i,o,t,r,e[6],17,-1473231341),r=sa(r,i,o,t,e[7],22,-45705983),t=sa(t,r,i,o,e[8],7,1770035416),o=sa(o,t,r,i,e[9],12,-1958414417),i=sa(i,o,t,r,e[10],17,-42063),r=sa(r,i,o,t,e[11],22,-1990404162),t=sa(t,r,i,o,e[12],7,1804603682),o=sa(o,t,r,i,e[13],12,-40341101),i=sa(i,o,t,r,e[14],17,-1502002290),t=aa(t,r=sa(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=aa(o,t,r,i,e[6],9,-1069501632),i=aa(i,o,t,r,e[11],14,643717713),r=aa(r,i,o,t,e[0],20,-373897302),t=aa(t,r,i,o,e[5],5,-701558691),o=aa(o,t,r,i,e[10],9,38016083),i=aa(i,o,t,r,e[15],14,-660478335),r=aa(r,i,o,t,e[4],20,-405537848),t=aa(t,r,i,o,e[9],5,568446438),o=aa(o,t,r,i,e[14],9,-1019803690),i=aa(i,o,t,r,e[3],14,-187363961),r=aa(r,i,o,t,e[8],20,1163531501),t=aa(t,r,i,o,e[13],5,-1444681467),o=aa(o,t,r,i,e[2],9,-51403784),i=aa(i,o,t,r,e[7],14,1735328473),t=la(t,r=aa(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=la(o,t,r,i,e[8],11,-2022574463),i=la(i,o,t,r,e[11],16,1839030562),r=la(r,i,o,t,e[14],23,-35309556),t=la(t,r,i,o,e[1],4,-1530992060),o=la(o,t,r,i,e[4],11,1272893353),i=la(i,o,t,r,e[7],16,-155497632),r=la(r,i,o,t,e[10],23,-1094730640),t=la(t,r,i,o,e[13],4,681279174),o=la(o,t,r,i,e[0],11,-358537222),i=la(i,o,t,r,e[3],16,-722521979),r=la(r,i,o,t,e[6],23,76029189),t=la(t,r,i,o,e[9],4,-640364487),o=la(o,t,r,i,e[12],11,-421815835),i=la(i,o,t,r,e[15],16,530742520),t=ua(t,r=la(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ua(o,t,r,i,e[7],10,1126891415),i=ua(i,o,t,r,e[14],15,-1416354905),r=ua(r,i,o,t,e[5],21,-57434055),t=ua(t,r,i,o,e[12],6,1700485571),o=ua(o,t,r,i,e[3],10,-1894986606),i=ua(i,o,t,r,e[10],15,-1051523),r=ua(r,i,o,t,e[1],21,-2054922799),t=ua(t,r,i,o,e[8],6,1873313359),o=ua(o,t,r,i,e[15],10,-30611744),i=ua(i,o,t,r,e[6],15,-1560198380),r=ua(r,i,o,t,e[13],21,1309151649),t=ua(t,r,i,o,e[4],6,-145523070),o=ua(o,t,r,i,e[11],10,-1120210379),i=ua(i,o,t,r,e[2],15,718787259),r=ua(r,i,o,t,e[9],21,-343485551),n[0]=tp(t,n[0]),n[1]=tp(r,n[1]),n[2]=tp(i,n[2]),n[3]=tp(o,n[3])}function zI(n,e,t,r,i,o){return e=tp(tp(e,n),tp(r,o)),tp(e<<i|e>>>32-i,t)}function sa(n,e,t,r,i,o,s){return zI(e&t|~e&r,n,e,i,o,s)}function aa(n,e,t,r,i,o,s){return zI(e&r|t&~r,n,e,i,o,s)}function la(n,e,t,r,i,o,s){return zI(e^t^r,n,e,i,o,s)}function ua(n,e,t,r,i,o,s){return zI(t^(e|~r),n,e,i,o,s)}function UY(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)v3(r,Iye(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(v3(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,v3(r,i),r}function Iye(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var yY="0123456789abcdef".split("");function Tye(n){for(var e="",t=0;t<4;t++)e+=yY[n>>8*t+4&15]+yY[n>>8*t&15];return e}function Dye(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function C3(n){return UY(n).map(Dye).join("")}var Aye=(function(n){for(var e=0;e<n.length;e++)n[e]=Tye(n[e]);return n.join("")})(UY("hello"))!="5d41402abc4b2a76b9719d911017c592";function tp(n,e){if(Aye){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function I3(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+s.charCodeAt(l))%256,a[l]=a[c],a[c]=f}t=n,r=a}else a=r;var d=e.length,y=0,p=0,_="";for(l=0;l<d;l++)p=(p+(f=a[y=(y+1)%256]))%256,a[y]=a[p],a[p]=f,s=a[(a[y]+a[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^s);return _}var _Y={print:4,modify:8,copy:16,"annot-forms":32};function e_(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(_Y.perm!==void 0)throw new Error("Invalid permission: "+a);i+=_Y[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=C3(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=I3(this.encryptionKey,this.padding)}function t_(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function vY(n){if(Qr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){mn.console&&fi.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function UI(n){if(!(this instanceof UI))return new UI(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function GY(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Ug(n,e,t,r,i){if(!(this instanceof Ug))return new Ug(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,GY.call(this,r,i)}function n_(n,e,t,r,i){if(!(this instanceof n_))return new n_(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,GY.call(this,r,i)}function zt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",f=null;Qr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(f=n.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=vY;var _="1.3",x=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(R){_=R};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var S=p.__private__.getPageFormat=function(R){return b[R]};i=i||"a4";var T="compat",A="advanced",N=T;function k(){this.saveGraphicsState(),U(new Mt(Kt,0,0,-Kt,0,mc()*Kt).toString()+" cm"),this.setFontSize(this.getFontSize()/Kt),c="n",N=A}function W(){this.restoreGraphicsState(),c="S",N=T}var X=p.__private__.combineFontStyleAndFontWeight=function(R,te){if(R=="bold"&&te=="normal"||R=="bold"&&te==400||R=="normal"&&te=="italic"||R=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(R=te==400||te==="normal"?R==="italic"?"italic":"normal":te!=700&&te!=="bold"||R!=="normal"?(te==700?"bold":te)+""+R:"bold"),R};p.advancedAPI=function(R){var te=N===T;return te&&k.call(this),typeof R!="function"||(R(this),te&&W.call(this)),this},p.compatAPI=function(R){var te=N===A;return te&&W.call(this),typeof R!="function"||(R(this),te&&k.call(this)),this},p.isAdvancedAPI=function(){return N===A};var Y,$=function(R){if(N!==A)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=p.roundToPrecision=p.__private__.roundToPrecision=function(R,te){var ge=e||te;if(isNaN(R)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(ge).replace(/0+$/,"")};Y=p.hpf=p.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,16)};var B=p.f2=p.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return V(R,2)},v=p.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return V(R,3)},I=p.scale=p.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return N===T?R*Kt:N===A?R:void 0},M=function(R){return I((function(te){return N===T?mc()-te:N===A?te:void 0})(R))};p.__private__.setPrecision=p.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var j,Q="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return Q},q=p.__private__.setFileId=function(R){return Q=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(ro=new e_(f.userPermissions,f.userPassword,f.ownerPassword,Q)),Q};p.setFileId=function(R){return q(R),this},p.getFileId=function(){return Z()};var K=p.__private__.convertDateToPDFDate=function(R){var te=R.getTimezoneOffset(),ge=te<0?"+":"-",Ee=Math.floor(Math.abs(te/60)),Ne=Math.abs(te%60),Ke=[ge,ce(Ee),"'",ce(Ne),"'"].join("");return["D:",R.getFullYear(),ce(R.getMonth()+1),ce(R.getDate()),ce(R.getHours()),ce(R.getMinutes()),ce(R.getSeconds()),Ke].join("")},oe=p.__private__.convertPDFDateToDate=function(R){var te=parseInt(R.substr(2,4),10),ge=parseInt(R.substr(6,2),10)-1,Ee=parseInt(R.substr(8,2),10),Ne=parseInt(R.substr(10,2),10),Ke=parseInt(R.substr(12,2),10),tt=parseInt(R.substr(14,2),10);return new Date(te,ge,Ee,Ne,Ke,tt,0)},_e=p.__private__.setCreationDate=function(R){var te;if(R===void 0&&(R=new Date),R instanceof Date)te=K(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=R}return j=te},F=p.__private__.getCreationDate=function(R){var te=j;return R==="jsDate"&&(te=oe(j)),te};p.setCreationDate=function(R){return _e(R),this},p.getCreationDate=function(R){return F(R)};var ee,ce=p.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},pe=p.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},J=0,xe=[],Se=[],ve=0,re=[],He=[],G=!1,be=Se;p.__private__.setCustomOutputDestination=function(R){G=!0,be=R};var Ie=function(R){G||(be=R)};p.__private__.resetCustomOutputDestination=function(){G=!1,be=Se};var U=p.__private__.out=function(R){return R=R.toString(),ve+=R.length+1,be.push(R),be},ae=p.__private__.write=function(R){return U(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},he=p.__private__.getArrayBuffer=function(R){for(var te=R.length,ge=new ArrayBuffer(te),Ee=new Uint8Array(ge);te--;)Ee[te]=R.charCodeAt(te);return ge},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Fe};var Ce=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(R){return Ce=N===A?R/Kt:R,this};var we,Ue=p.__private__.getFontSize=p.getFontSize=function(){return N===T?Ce:Ce*Kt},Le=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(R){return Le=R,this},p.__private__.getR2L=p.getR2L=function(){return Le};var Be,pt=p.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))we=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');we=R}else we=parseInt(R,10)};p.__private__.getZoomMode=function(){return we};var Tt,qe=p.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Be=R};p.__private__.getPageMode=function(){return Be};var qt=p.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Tt=R};p.__private__.getLayoutMode=function(){return Tt},p.__private__.setDisplayMode=p.setDisplayMode=function(R,te,ge){return pt(R),qt(te),qe(ge),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(R){if(Object.keys(xt).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[R]},p.__private__.getDocumentProperties=function(){return xt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(R){for(var te in xt)xt.hasOwnProperty(te)&&R[te]&&(xt[te]=R[te]);return this},p.__private__.setDocumentProperty=function(R,te){if(Object.keys(xt).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[R]=te};var Qe,Kt,ft,Pr,mt,Zt={},hn={},dr=[],Dt={},sr={},At={},Vt={},Vn=null,vn=0,$t=[],Fn=new vY(p),at=n.hotfixes||[],Gr={},ii={},oi=[],Mt=function R(te,ge,Ee,Ne,Ke,tt){if(!(this instanceof R))return new R(te,ge,Ee,Ne,Ke,tt);isNaN(te)&&(te=1),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=0),isNaN(Ne)&&(Ne=1),isNaN(Ke)&&(Ke=0),isNaN(tt)&&(tt=0),this._matrix=[te,ge,Ee,Ne,Ke,tt]};Object.defineProperty(Mt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Mt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Mt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Mt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Mt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Mt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Mt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Mt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Mt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Mt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Mt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Mt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Mt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Mt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Mt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Mt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Mt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(R)},Mt.prototype.multiply=function(R){var te=R.sx*this.sx+R.shy*this.shx,ge=R.sx*this.shy+R.shy*this.sy,Ee=R.shx*this.sx+R.sy*this.shx,Ne=R.shx*this.shy+R.sy*this.sy,Ke=R.tx*this.sx+R.ty*this.shx+this.tx,tt=R.tx*this.shy+R.ty*this.sy+this.ty;return new Mt(te,ge,Ee,Ne,Ke,tt)},Mt.prototype.decompose=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Ke=this.ty,tt=Math.sqrt(R*R+te*te),St=(R/=tt)*ge+(te/=tt)*Ee;ge-=R*St,Ee-=te*St;var Ft=Math.sqrt(ge*ge+Ee*Ee);return St/=Ft,R*(Ee/=Ft)<te*(ge/=Ft)&&(R=-R,te=-te,St=-St,tt=-tt),{scale:new Mt(tt,0,0,Ft,0,0),translate:new Mt(1,0,0,1,Ne,Ke),rotate:new Mt(R,te,-te,R,0,0),skew:new Mt(1,0,St,1,0,0)}},Mt.prototype.toString=function(R){return this.join(" ")},Mt.prototype.inversed=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Ke=this.ty,tt=1/(R*Ee-te*ge),St=Ee*tt,Ft=-te*tt,rn=-ge*tt,Sn=R*tt;return new Mt(St,Ft,rn,Sn,-St*Ne-rn*Ke,-Ft*Ne-Sn*Ke)},Mt.prototype.applyToPoint=function(R){var te=R.x*this.sx+R.y*this.shx+this.tx,ge=R.x*this.shy+R.y*this.sy+this.ty;return new ko(te,ge)},Mt.prototype.applyToRectangle=function(R){var te=this.applyToPoint(R),ge=this.applyToPoint(new ko(R.x+R.w,R.y+R.h));return new gc(te.x,te.y,ge.x-te.x,ge.y-te.y)},Mt.prototype.clone=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Ke=this.ty;return new Mt(R,te,ge,Ee,Ne,Ke)},p.Matrix=Mt;var Mi=p.matrixMult=function(R,te){return te.multiply(R)},Hi=new Mt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Hi;var In=function(R,te){if(!sr[R]){var ge=(te instanceof Ug?"Sh":"P")+(Object.keys(Dt).length+1).toString(10);te.id=ge,sr[R]=ge,Dt[ge]=te,Fn.publish("addPattern",te)}};p.ShadingPattern=Ug,p.TilingPattern=n_,p.addShadingPattern=function(R,te){return $("addShadingPattern()"),In(R,te),this},p.beginTilingPattern=function(R){$("beginTilingPattern()"),es(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},p.endTilingPattern=function(R,te){$("endTilingPattern()"),te.stream=He[ee].join(`
`),In(R,te),Fn.publish("endTilingPattern",te),oi.pop().restore()};var Cr,nr=p.__private__.newObject=function(){var R=qi();return vo(R,!0),R},qi=p.__private__.newObjectDeferred=function(){return J++,xe[J]=function(){return ve},J},vo=function(R,te){return te=typeof te=="boolean"&&te,xe[R]=ve,te&&U(R+" 0 obj"),R},sh=p.__private__.newAdditionalObject=function(){var R={objId:qi(),content:""};return re.push(R),R},Wi=qi(),ca=qi(),Ns=p.__private__.decodeColorString=function(R){var te=R.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length!==5||te[4]!=="k"&&te[4]!=="K"||(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var ge=parseFloat(te[0]);te=[ge,ge,ge,"r"]}for(var Ee="#",Ne=0;Ne<3;Ne++)Ee+=("0"+Math.floor(255*parseFloat(te[Ne])).toString(16)).slice(-2);return Ee},No=p.__private__.encodeColorString=function(R){var te;typeof R=="string"&&(R={ch1:R});var ge=R.ch1,Ee=R.ch2,Ne=R.ch3,Ke=R.ch4,tt=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var St=new jY(ge);if(St.ok)ge=St.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var Ft=parseInt(ge.substr(1),16);ge=Ft>>16&255,Ee=Ft>>8&255,Ne=255&Ft}if(Ee===void 0||Ke===void 0&&ge===Ee&&Ee===Ne)te=typeof ge=="string"?ge+" "+tt[0]:R.precision===2?B(ge/255)+" "+tt[0]:v(ge/255)+" "+tt[0];else if(Ke===void 0||Qr(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return["1.","1.","1.",tt[1]].join(" ");te=typeof ge=="string"?[ge,Ee,Ne,tt[1]].join(" "):R.precision===2?[B(ge/255),B(Ee/255),B(Ne/255),tt[1]].join(" "):[v(ge/255),v(Ee/255),v(Ne/255),tt[1]].join(" ")}else te=typeof ge=="string"?[ge,Ee,Ne,Ke,tt[2]].join(" "):R.precision===2?[B(ge),B(Ee),B(Ne),B(Ke),tt[2]].join(" "):[v(ge),v(Ee),v(Ne),v(Ke),tt[2]].join(" ");return te},Po=p.__private__.getFilters=function(){return s},Ps=p.__private__.putStream=function(R){var te=(R=R||{}).data||"",ge=R.filters||Po(),Ee=R.alreadyAppliedFilters||[],Ne=R.addLength1||!1,Ke=te.length,tt=R.objectId,St=function(Ir){return Ir};if(f!==null&&tt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(St=ro.encryptor(tt,0));var Ft={};ge===!0&&(ge=["FlateEncode"]);var rn=R.additionalKeyValues||[],Sn=(Ft=zt.API.processDataByFilters!==void 0?zt.API.processDataByFilters(te,ge):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(Ft.data.length!==0&&(rn.push({key:"Length",value:Ft.data.length}),Ne===!0&&rn.push({key:"Length1",value:Ke})),Sn.length!=0)if(Sn.split("/").length-1==1)rn.push({key:"Filter",value:Sn});else{rn.push({key:"Filter",value:"["+Sn+"]"});for(var rr=0;rr<rn.length;rr+=1)if(rn[rr].key==="DecodeParms"){for(var di=[],Ci=0;Ci<Ft.reverseChain.split("/").length-1;Ci+=1)di.push("null");di.push(rn[rr].value),rn[rr].value="["+di.join(" ")+"]"}}U("<<");for(var zr=0;zr<rn.length;zr++)U("/"+rn[zr].key+" "+rn[zr].value);U(">>"),Ft.data.length!==0&&(U("stream"),U(St(Ft.data)),U("endstream"))},Ol=p.__private__.putPage=function(R){var te=R.number,ge=R.data,Ee=R.objId,Ne=R.contentsObjId;vo(Ee,!0),U("<</Type /Page"),U("/Parent "+R.rootDictionaryObjId+" 0 R"),U("/Resources "+R.resourceDictionaryObjId+" 0 R"),U("/MediaBox ["+parseFloat(Y(R.mediaBox.bottomLeftX))+" "+parseFloat(Y(R.mediaBox.bottomLeftY))+" "+Y(R.mediaBox.topRightX)+" "+Y(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&U("/CropBox ["+Y(R.cropBox.bottomLeftX)+" "+Y(R.cropBox.bottomLeftY)+" "+Y(R.cropBox.topRightX)+" "+Y(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&U("/BleedBox ["+Y(R.bleedBox.bottomLeftX)+" "+Y(R.bleedBox.bottomLeftY)+" "+Y(R.bleedBox.topRightX)+" "+Y(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&U("/TrimBox ["+Y(R.trimBox.bottomLeftX)+" "+Y(R.trimBox.bottomLeftY)+" "+Y(R.trimBox.topRightX)+" "+Y(R.trimBox.topRightY)+"]"),R.artBox!==null&&U("/ArtBox ["+Y(R.artBox.bottomLeftX)+" "+Y(R.artBox.bottomLeftY)+" "+Y(R.artBox.topRightX)+" "+Y(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&U("/UserUnit "+R.userUnit),Fn.publish("putPage",{objId:Ee,pageContext:$t[te],pageNumber:te,page:ge}),U("/Contents "+Ne+" 0 R"),U(">>"),U("endobj");var Ke=ge.join(`
`);return N===A&&(Ke+=`
Q`),vo(Ne,!0),Ps({data:Ke,filters:Po(),objectId:Ne}),U("endobj"),Ee},Ls=p.__private__.putPages=function(){var R,te,ge=[];for(R=1;R<=vn;R++)$t[R].objId=qi(),$t[R].contentsObjId=qi();for(R=1;R<=vn;R++)ge.push(Ol({number:R,data:He[R],objId:$t[R].objId,contentsObjId:$t[R].contentsObjId,mediaBox:$t[R].mediaBox,cropBox:$t[R].cropBox,bleedBox:$t[R].bleedBox,trimBox:$t[R].trimBox,artBox:$t[R].artBox,userUnit:$t[R].userUnit,rootDictionaryObjId:Wi,resourceDictionaryObjId:ca}));vo(Wi,!0),U("<</Type /Pages");var Ee="/Kids [";for(te=0;te<vn;te++)Ee+=ge[te]+" 0 R ";U(Ee+"]"),U("/Count "+vn),U(">>"),U("endobj"),Fn.publish("postPutPages")},si=function(R){Fn.publish("putFont",{font:R,out:U,newObject:nr,putStream:Ps}),R.isAlreadyPutted!==!0&&(R.objectNumber=nr(),U("<<"),U("/Type /Font"),U("/BaseFont /"+t_(R.postScriptName)),U("/Subtype /Type1"),typeof R.encoding=="string"&&U("/Encoding /"+R.encoding),U("/FirstChar 32"),U("/LastChar 255"),U(">>"),U("endobj"))},Df=function(R){R.objectNumber=nr();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[Y(R.x),Y(R.y),Y(R.x+R.width),Y(R.y+R.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var ge=R.pages[1].join(`
`);Ps({data:ge,additionalKeyValues:te,objectId:R.objectNumber}),U("endobj")},Af=function(R,te){te||(te=21);var ge=nr(),Ee=(function(tt,St){var Ft,rn=[],Sn=1/(St-1);for(Ft=0;Ft<1;Ft+=Sn)rn.push(Ft);if(rn.push(1),tt[0].offset!=0){var rr={offset:0,color:tt[0].color};tt.unshift(rr)}if(tt[tt.length-1].offset!=1){var di={offset:1,color:tt[tt.length-1].color};tt.push(di)}for(var Ci="",zr=0,Ir=0;Ir<rn.length;Ir++){for(Ft=rn[Ir];Ft>tt[zr+1].offset;)zr++;var Li=tt[zr].offset,Tr=(Ft-Li)/(tt[zr+1].offset-Li),da=tt[zr].color,cl=tt[zr+1].color;Ci+=pe(Math.round((1-Tr)*da[0]+Tr*cl[0]).toString(16))+pe(Math.round((1-Tr)*da[1]+Tr*cl[1]).toString(16))+pe(Math.round((1-Tr)*da[2]+Tr*cl[2]).toString(16))}return Ci.trim()})(R.colors,te),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+te+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ps({data:Ee,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),U("endobj"),R.objectNumber=nr(),U("<< /ShadingType "+R.type),U("/ColorSpace /DeviceRGB");var Ke="/Coords ["+Y(parseFloat(R.coords[0]))+" "+Y(parseFloat(R.coords[1]))+" ";R.type===2?Ke+=Y(parseFloat(R.coords[2]))+" "+Y(parseFloat(R.coords[3])):Ke+=Y(parseFloat(R.coords[2]))+" "+Y(parseFloat(R.coords[3]))+" "+Y(parseFloat(R.coords[4]))+" "+Y(parseFloat(R.coords[5])),U(Ke+="]"),R.matrix&&U("/Matrix ["+R.matrix.toString()+"]"),U("/Function "+ge+" 0 R"),U("/Extend [true true]"),U(">>"),U("endobj")},Su=function(R,te){var ge=qi(),Ee=nr();te.push({resourcesOid:ge,objectOid:Ee}),R.objectNumber=Ee;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+R.boundingBox.map(Y).join(" ")+"]"}),Ne.push({key:"XStep",value:Y(R.xStep)}),Ne.push({key:"YStep",value:Y(R.yStep)}),Ne.push({key:"Resources",value:ge+" 0 R"}),R.matrix&&Ne.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),Ps({data:R.stream,additionalKeyValues:Ne,objectId:R.objectNumber}),U("endobj")},ah=function(R){for(var te in R.objectNumber=nr(),U("<<"),R)switch(te){case"opacity":U("/ca "+B(R[te]));break;case"stroke-opacity":U("/CA "+B(R[te]))}U(">>"),U("endobj")},lh=function(R){vo(R.resourcesOid,!0),U("<<"),U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var te in U("/Font <<"),Zt)Zt.hasOwnProperty(te)&&(d===!1||d===!0&&y.hasOwnProperty(te))&&U("/"+te+" "+Zt[te].objectNumber+" 0 R");U(">>")})(),(function(){if(Object.keys(Dt).length>0){for(var te in U("/Shading <<"),Dt)Dt.hasOwnProperty(te)&&Dt[te]instanceof Ug&&Dt[te].objectNumber>=0&&U("/"+te+" "+Dt[te].objectNumber+" 0 R");Fn.publish("putShadingPatternDict"),U(">>")}})(),(function(te){if(Object.keys(Dt).length>0){for(var ge in U("/Pattern <<"),Dt)Dt.hasOwnProperty(ge)&&Dt[ge]instanceof p.TilingPattern&&Dt[ge].objectNumber>=0&&Dt[ge].objectNumber<te&&U("/"+ge+" "+Dt[ge].objectNumber+" 0 R");Fn.publish("putTilingPatternDict"),U(">>")}})(R.objectOid),(function(){if(Object.keys(At).length>0){var te;for(te in U("/ExtGState <<"),At)At.hasOwnProperty(te)&&At[te].objectNumber>=0&&U("/"+te+" "+At[te].objectNumber+" 0 R");Fn.publish("putGStateDict"),U(">>")}})(),(function(){for(var te in U("/XObject <<"),Gr)Gr.hasOwnProperty(te)&&Gr[te].objectNumber>=0&&U("/"+te+" "+Gr[te].objectNumber+" 0 R");Fn.publish("putXobjectDict"),U(">>")})(),U(">>"),U("endobj")},Rf=function(R){hn[R.fontName]=hn[R.fontName]||{},hn[R.fontName][R.fontStyle]=R.id},up=function(R,te,ge,Ee,Ne){var Ke={id:"F"+(Object.keys(Zt).length+1).toString(10),postScriptName:R,fontName:te,fontStyle:ge,encoding:Ee,isStandardFont:Ne||!1,metadata:{}};return Fn.publish("addFont",{font:Ke,instance:this}),Zt[Ke.id]=Ke,Rf(Ke),Ke.id},Ma=p.__private__.pdfEscape=p.pdfEscape=function(R,te){return(function(ge,Ee){var Ne,Ke,tt,St,Ft,rn,Sn,rr,di;if(tt=(Ee=Ee||{}).sourceEncoding||"Unicode",Ft=Ee.outputEncoding,(Ee.autoencode||Ft)&&Zt[Qe].metadata&&Zt[Qe].metadata[tt]&&Zt[Qe].metadata[tt].encoding&&(St=Zt[Qe].metadata[tt].encoding,!Ft&&Zt[Qe].encoding&&(Ft=Zt[Qe].encoding),!Ft&&St.codePages&&(Ft=St.codePages[0]),typeof Ft=="string"&&(Ft=St[Ft]),Ft)){for(Sn=!1,rn=[],Ne=0,Ke=ge.length;Ne<Ke;Ne++)(rr=Ft[ge.charCodeAt(Ne)])?rn.push(String.fromCharCode(rr)):rn.push(ge[Ne]),rn[Ne].charCodeAt(0)>>8&&(Sn=!0);ge=rn.join("")}for(Ne=ge.length;Sn===void 0&&Ne!==0;)ge.charCodeAt(Ne-1)>>8&&(Sn=!0),Ne--;if(!Sn)return ge;for(rn=Ee.noBOM?[]:[254,255],Ne=0,Ke=ge.length;Ne<Ke;Ne++){if((di=(rr=ge.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");rn.push(di),rn.push(rr-(di<<8))}return String.fromCharCode.apply(void 0,rn)})(R,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},hs=p.__private__.beginPage=function(R){He[++vn]=[],$t[vn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Iu(vn),Ie(He[ee])},Cu=function(R,te){var ge,Ee,Ne;switch(t=te||t,typeof R=="string"&&(ge=S(R.toLowerCase()),Array.isArray(ge)&&(Ee=ge[0],Ne=ge[1])),Array.isArray(R)&&(Ee=R[0]*Kt,Ne=R[1]*Kt),isNaN(Ee)&&(Ee=i[0],Ne=i[1]),(Ee>14400||Ne>14400)&&(fi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Ne=Math.min(14400,Ne)),i=[Ee,Ne],t.substr(0,1)){case"l":Ne>Ee&&(i=[Ne,Ee]);break;case"p":Ee>Ne&&(i=[Ne,Ee])}hs(i),ln(pp),U(jl),Of!==0&&U(Of+" J"),mp!==0&&U(mp+" j"),Fn.publish("addPage",{pageNumber:vn})},uh=function(R){R>0&&R<=vn&&(He.splice(R,1),$t.splice(R,1),vn--,ee>vn&&(ee=vn),this.setPage(ee))},Iu=function(R){R>0&&R<=vn&&(ee=R)},Mf=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return He.length-1},im=function(R,te,ge){var Ee,Ne=void 0;return ge=ge||{},R=R!==void 0?R:Zt[Qe].fontName,te=te!==void 0?te:Zt[Qe].fontStyle,Ee=R.toLowerCase(),hn[Ee]!==void 0&&hn[Ee][te]!==void 0?Ne=hn[Ee][te]:hn[R]!==void 0&&hn[R][te]!==void 0?Ne=hn[R][te]:ge.disableWarning===!1&&fi.warn("Unable to look up font label for font '"+R+"', '"+te+"'. Refer to getFontList() for available fonts."),Ne||ge.noFallback||(Ne=hn.times[te])==null&&(Ne=hn.times.normal),Ne},Fl=p.__private__.putInfo=function(){var R=nr(),te=function(Ee){return Ee};for(var ge in f!==null&&(te=ro.encryptor(R,0)),U("<<"),U("/Producer ("+Ma(te("jsPDF "+zt.version))+")"),xt)xt.hasOwnProperty(ge)&&xt[ge]&&U("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Ma(te(xt[ge]))+")");U("/CreationDate ("+Ma(te(j))+")"),U(">>"),U("endobj")},Nf=p.__private__.putCatalog=function(R){var te=(R=R||{}).rootDictionaryObjId||Wi;switch(nr(),U("<<"),U("/Type /Catalog"),U("/Pages "+te+" 0 R"),we||(we="fullwidth"),we){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+we;ge.substr(ge.length-1)==="%"&&(we=parseInt(we)/100),typeof we=="number"&&U("/OpenAction [3 0 R /XYZ null null "+B(we)+"]")}switch(Tt||(Tt="continuous"),Tt){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}Be&&U("/PageMode /"+Be),Fn.publish("putCatalog"),U(">>"),U("endobj")},om=p.__private__.putTrailer=function(){U("trailer"),U("<<"),U("/Size "+(J+1)),U("/Root "+J+" 0 R"),U("/Info "+(J-1)+" 0 R"),f!==null&&U("/Encrypt "+ro.oid+" 0 R"),U("/ID [ <"+Q+"> <"+Q+"> ]"),U(">>")},Ni=p.__private__.putHeader=function(){U("%PDF-"+_),U("%\xBA\xDF\xAC\xE0")},ch=p.__private__.putXRef=function(){var R="0000000000";U("xref"),U("0 "+(J+1)),U("0000000000 65535 f ");for(var te=1;te<=J;te++)typeof xe[te]=="function"?U((R+xe[te]()).slice(-10)+" 00000 n "):xe[te]!==void 0?U((R+xe[te]).slice(-10)+" 00000 n "):U("0000000000 00000 n ")},xo=p.__private__.buildDocument=function(){var R;J=0,ve=0,Se=[],xe=[],re=[],Wi=qi(),ca=qi(),Ie(Se),Fn.publish("buildDocument"),Ni(),Ls(),(function(){Fn.publish("putAdditionalObjects");for(var ge=0;ge<re.length;ge++){var Ee=re[ge];vo(Ee.objId,!0),U(Ee.content),U("endobj")}Fn.publish("postPutAdditionalObjects")})(),R=[],(function(){for(var ge in Zt)Zt.hasOwnProperty(ge)&&(d===!1||d===!0&&y.hasOwnProperty(ge))&&si(Zt[ge])})(),(function(){var ge;for(ge in At)At.hasOwnProperty(ge)&&ah(At[ge])})(),(function(){for(var ge in Gr)Gr.hasOwnProperty(ge)&&Df(Gr[ge])})(),(function(ge){var Ee;for(Ee in Dt)Dt.hasOwnProperty(Ee)&&(Dt[Ee]instanceof Ug?Af(Dt[Ee]):Dt[Ee]instanceof n_&&Su(Dt[Ee],ge))})(R),Fn.publish("putResources"),R.forEach(lh),lh({resourcesOid:ca,objectOid:Number.MAX_SAFE_INTEGER}),Fn.publish("postPutResources"),f!==null&&(ro.oid=nr(),U("<<"),U("/Filter /Standard"),U("/V "+ro.v),U("/R "+ro.r),U("/U <"+ro.toHexString(ro.U)+">"),U("/O <"+ro.toHexString(ro.O)+">"),U("/P "+ro.P),U(">>"),U("endobj")),Fl(),Nf();var te=ve;return ch(),om(),U("startxref"),U(""+te),U("%%EOF"),Ie(He[ee]),Se.join(`
`)},ha=p.__private__.getBlob=function(R){return new Blob([he(R)],{type:"application/pdf"})},cp=p.output=p.__private__.output=(Cr=function(R,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",R){case void 0:return xo();case"save":p.save(te.filename);break;case"arraybuffer":return he(xo());case"blob":return ha(xo());case"bloburi":case"bloburl":if(mn.URL!==void 0&&typeof mn.URL.createObjectURL=="function")return mn.URL&&mn.URL.createObjectURL(ha(xo()))||void 0;fi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Ee=xo();try{ge=mY(Ee)}catch{ge=mY(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+te.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mn)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Ne=te.pdfObjectUrl,Ke="");var tt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",St=mn.open();return St!==null&&St.document.write(tt),St}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mn)==="[object Window]"){var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',rn=mn.open();if(rn!==null){rn.document.write(Ft);var Sn=this;rn.document.documentElement.querySelector("#pdfViewer").onload=function(){rn.document.title=te.filename,rn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Sn.output("bloburl"))}}return rn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',di=mn.open();if(di!==null&&(di.document.write(rr),di.document.title=te.filename),di||typeof safari>"u")return di;break;case"datauri":case"dataurl":return mn.document.location.href=this.output("datauristring",te);default:return null}},Cr.foo=function(){try{return Cr.apply(this,arguments)}catch(ge){var R=ge.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var te="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ge.message;if(!mn.console)throw new Error(te);mn.console.error(te,ge),mn.alert&&alert(te)}},Cr.foo.bar=Cr,Cr.foo),Lo=function(R){return Array.isArray(at)===!0&&at.indexOf(R)>-1};switch(r){case"pt":Kt=1;break;case"mm":Kt=72/25.4;break;case"cm":Kt=72/2.54;break;case"in":Kt=72;break;case"px":Kt=Lo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Kt=12;break;case"ex":Kt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Kt=r}var ro=null;_e(),q();var Tu=p.__private__.getPageInfo=p.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:$t[R].objId,pageNumber:R,pageContext:$t[R]}},sm=p.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in $t)if($t[te].objId===R)break;return Tu(te)},D_=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:$t[ee].objId,pageNumber:ee,pageContext:$t[ee]}};p.addPage=function(){return Cu.apply(this,arguments),this},p.setPage=function(){return Iu.apply(this,arguments),Ie.call(this,He[ee]),this},p.insertPage=function(R){return this.addPage(),this.movePage(ee,R),this},p.movePage=function(R,te){var ge,Ee;if(R>te){ge=He[R],Ee=$t[R];for(var Ne=R;Ne>te;Ne--)He[Ne]=He[Ne-1],$t[Ne]=$t[Ne-1];He[te]=ge,$t[te]=Ee,this.setPage(te)}else if(R<te){ge=He[R],Ee=$t[R];for(var Ke=R;Ke<te;Ke++)He[Ke]=He[Ke+1],$t[Ke]=$t[Ke+1];He[te]=ge,$t[te]=Ee,this.setPage(te)}return this},p.deletePage=function(){return uh.apply(this,arguments),this},p.__private__.text=p.text=function(R,te,ge,Ee,Ne){var Ke,tt,St,Ft,rn,Sn,rr,di,Ci,zr=(Ee=Ee||{}).scope||this;if(typeof R=="number"&&typeof te=="number"&&(typeof ge=="string"||Array.isArray(ge))){var Ir=ge;ge=te,te=R,R=Ir}if(arguments[3]instanceof Mt==0?(St=arguments[4],Ft=arguments[5],Qr(rr=arguments[3])==="object"&&rr!==null||(typeof St=="string"&&(Ft=St,St=null),typeof rr=="string"&&(Ft=rr,rr=null),typeof rr=="number"&&(St=rr,rr=null),Ee={flags:rr,angle:St,align:Ft})):($("The transform parameter of text() with a Matrix value"),Ci=Ne),isNaN(te)||isNaN(ge)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return zr;var Li,Tr="",da=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:Bl,cl=zr.internal.scaleFactor;function Ul(H){return H=H.split("	").join(Array(Ee.TabLen||9).join(" ")),Ma(H,rr)}function Bf(H){for(var ie,de=H.concat(),Te=[],Pe=de.length;Pe--;)typeof(ie=de.shift())=="string"?Te.push(ie):Array.isArray(H)&&(ie.length===1||ie[1]===void 0&&ie[2]===void 0)?Te.push(ie[0]):Te.push([ie[0],ie[1],ie[2]]);return Te}function dh(H,ie){var de;if(typeof H=="string")de=ie(H)[0];else if(Array.isArray(H)){for(var Te,Pe,nt=H.concat(),vt=[],Rt=nt.length;Rt--;)typeof(Te=nt.shift())=="string"?vt.push(ie(Te)[0]):Array.isArray(Te)&&typeof Te[0]=="string"&&(Pe=ie(Te[0],Te[1],Te[2]),vt.push([Pe[0],Pe[1],Pe[2]]));de=vt}return de}var Gl=!1,ph=!0;if(typeof R=="string")Gl=!0;else if(Array.isArray(R)){var gh=R.concat();tt=[];for(var yc,Oo=gh.length;Oo--;)(typeof(yc=gh.shift())!="string"||Array.isArray(yc)&&typeof yc[0]!="string")&&(ph=!1);Gl=ph}if(Gl===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var mh=Ce/zr.internal.scaleFactor,yh=mh*(da-1);switch(Ee.baseline){case"bottom":ge-=yh;break;case"top":ge+=mh-yh;break;case"hanging":ge+=mh-2*yh;break;case"middle":ge+=mh/2-yh}if((Sn=Ee.maxWidth||0)>0&&(typeof R=="string"?R=zr.splitTextToSize(R,Sn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(H,ie){return H.concat(zr.splitTextToSize(ie,Sn))},[]))),Ke={text:R,x:te,y:ge,options:Ee,mutex:{pdfEscape:Ma,activeFontKey:Qe,fonts:Zt,activeFontSize:Ce}},Fn.publish("preProcessText",Ke),R=Ke.text,St=(Ee=Ke.options).angle,Ci instanceof Mt==0&&St&&typeof St=="number"){St*=Math.PI/180,Ee.rotationDirection===0&&(St=-St),N===A&&(St=-St);var xp=Math.cos(St),wp=Math.sin(St);Ci=new Mt(xp,wp,-wp,xp,0,0)}else St&&St instanceof Mt&&(Ci=St);N!==A||Ci||(Ci=Hi),(rn=Ee.charSpace||ul)!==void 0&&(Tr+=Y(I(rn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(di=Ee.horizontalScale)!==void 0&&(Tr+=Y(100*di)+` Tz
`),Ee.lang;var ts=-1,Mu=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,_h=zr.internal.getCurrentPageInfo().pageContext;switch(Mu){case 0:case!1:case"fill":ts=0;break;case 1:case!0:case"stroke":ts=1;break;case 2:case"fillThenStroke":ts=2;break;case 3:case"invisible":ts=3;break;case 4:case"fillAndAddForClipping":ts=4;break;case 5:case"strokeAndAddPathForClipping":ts=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ts=6;break;case 7:case"addToPathForClipping":ts=7}var pm=_h.usedRenderingMode!==void 0?_h.usedRenderingMode:-1;ts!==-1?Tr+=ts+` Tr
`:pm!==-1&&(Tr+=`0 Tr
`),ts!==-1&&(_h.usedRenderingMode=ts),Ft=Ee.align||"left";var Pa,vh=Ce*da,Ep=zr.internal.pageSize.getWidth(),bp=Zt[Qe];rn=Ee.charSpace||ul,Sn=Ee.maxWidth||0,rr=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var _c=[],xh=function(H){return zr.getStringUnitWidth(H,{font:bp,charSpace:rn,fontSize:Ce,doKerning:!1})*Ce/cl};if(Object.prototype.toString.call(R)==="[object Array]"){var Bs;tt=Bf(R),Ft!=="left"&&(Pa=tt.map(xh));var js,Nu=0;if(Ft==="right"){te-=Pa[0],R=[],Oo=tt.length;for(var Pu=0;Pu<Oo;Pu++)Pu===0?(js=Bn(te),Bs=wo(ge)):(js=I(Nu-Pa[Pu]),Bs=-vh),R.push([tt[Pu],js,Bs]),Nu=Pa[Pu]}else if(Ft==="center"){te-=Pa[0]/2,R=[],Oo=tt.length;for(var Lu=0;Lu<Oo;Lu++)Lu===0?(js=Bn(te),Bs=wo(ge)):(js=I((Nu-Pa[Lu])/2),Bs=-vh),R.push([tt[Lu],js,Bs]),Nu=Pa[Lu]}else if(Ft==="left"){R=[],Oo=tt.length;for(var wh=0;wh<Oo;wh++)R.push(tt[wh])}else if(Ft==="justify"&&bp.encoding==="Identity-H"){R=[],Oo=tt.length,Sn=Sn!==0?Sn:Ep;for(var jf=0,Ii=0;Ii<Oo;Ii++)if(Bs=Ii===0?wo(ge):-vh,js=Ii===0?Bn(te):jf,Ii<Oo-1){var Sp=I((Sn-Pa[Ii])/(tt[Ii].split(" ").length-1)),zl=tt[Ii].split(" ");R.push([zl[0]+" ",js,Bs]),jf=0;for(var Vl=1;Vl<zl.length;Vl++){var Hl=(xh(zl[Vl-1]+" "+zl[Vl])-xh(zl[Vl]))*cl+Sp;Vl==zl.length-1?R.push([zl[Vl],Hl,0]):R.push([zl[Vl]+" ",Hl,0]),jf-=Hl}}else R.push([tt[Ii],js,Bs]);R.push(["",jf,0])}else{if(Ft!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Oo=tt.length,Sn=Sn!==0?Sn:Ep,Ii=0;Ii<Oo;Ii++){Bs=Ii===0?wo(ge):-vh,js=Ii===0?Bn(te):0;var Cp=tt[Ii].split(" ").length-1,Uf=Cp>0?(Sn-Pa[Ii])/Cp:0;Ii<Oo-1?_c.push(Y(I(Uf))):_c.push(0),R.push([tt[Ii],js,Bs])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:Le)===!0&&(R=dh(R,function(H,ie,de){return[H.split("").reverse().join(""),ie,de]})),Ke={text:R,x:te,y:ge,options:Ee,mutex:{pdfEscape:Ma,activeFontKey:Qe,fonts:Zt,activeFontSize:Ce}},Fn.publish("postProcessText",Ke),R=Ke.text,Li=Ke.mutex.isHex||!1;var ns=Zt[Qe].encoding;ns!=="WinAnsiEncoding"&&ns!=="StandardEncoding"||(R=dh(R,function(H,ie,de){return[Ul(H),ie,de]})),tt=Bf(R),R=[];for(var Fo,m,u,h=Array.isArray(tt[0])?1:0,g="",w=function(H,ie,de){var Te="";return de instanceof Mt?(de=typeof Ee.angle=="number"?Mi(de,new Mt(1,0,0,1,H,ie)):Mi(new Mt(1,0,0,1,H,ie),de),N===A&&(de=Mi(new Mt(1,0,0,-1,0,0),de)),Te=de.join(" ")+` Tm
`):Te=Y(H)+" "+Y(ie)+` Td
`,Te},D=0;D<tt.length;D++){switch(g="",h){case 1:u=(Li?"<":"(")+tt[D][0]+(Li?">":")"),Fo=parseFloat(tt[D][1]),m=parseFloat(tt[D][2]);break;case 0:u=(Li?"<":"(")+tt[D]+(Li?">":")"),Fo=Bn(te),m=wo(ge)}_c!==void 0&&_c[D]!==void 0&&(g=_c[D]+` Tw
`),D===0?R.push(g+w(Fo,m,Ci)+u):h===0?R.push(g+u):h===1&&R.push(g+w(Fo,m,Ci)+u)}R=h===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var O=`BT
/`;return O+=Qe+" "+Ce+` Tf
`,O+=Y(Ce*da)+` TL
`,O+=Pi+`
`,O+=Tr,O+=R,U(O+="ET"),y[Qe]=!0,zr};var am=p.__private__.clip=p.clip=function(R){return U(R==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return am("evenodd")},p.__private__.discardPath=p.discardPath=function(){return U("n"),this};var ks=p.__private__.isValidStyle=function(R){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(te=!0),te};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(R){return ks(R)&&(c=R),this};var hp=p.__private__.getStyle=p.getStyle=function(R){var te=c;switch(R){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=R}return te},lm=p.close=function(){return U("h"),this};p.stroke=function(){return U("S"),this},p.fill=function(R){return hh("f",R),this},p.fillEvenOdd=function(R){return hh("f*",R),this},p.fillStroke=function(R){return hh("B",R),this},p.fillStrokeEvenOdd=function(R){return hh("B*",R),this};var hh=function(R,te){Qr(te)==="object"?Jr(te,R):U(R)},fh=function(R){R===null||N===A&&R===void 0||(R=hp(R),U(R))};function fp(R,te,ge,Ee,Ne){var Ke=new n_(te||this.boundingBox,ge||this.xStep,Ee||this.yStep,this.gState,Ne||this.matrix);Ke.stream=this.stream;var tt=R+"$$"+this.cloneIndex+++"$$";return In(tt,Ke),Ke}var Jr=function(R,te){var ge=sr[R.key],Ee=Dt[ge];if(Ee instanceof Ug)U("q"),U(Du(te)),Ee.gState&&p.setGState(Ee.gState),U(R.matrix.toString()+" cm"),U("/"+ge+" sh"),U("Q");else if(Ee instanceof n_){var Ne=new Mt(1,0,0,-1,0,mc());R.matrix&&(Ne=Ne.multiply(R.matrix||Hi),ge=fp.call(Ee,R.key,R.boundingBox,R.xStep,R.yStep,Ne).id),U("q"),U("/Pattern cs"),U("/"+ge+" scn"),Ee.gState&&p.setGState(Ee.gState),U(te),U("Q")}},Du=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},dp=p.moveTo=function(R,te){return U(Y(I(R))+" "+Y(M(te))+" m"),this},Pf=p.lineTo=function(R,te){return U(Y(I(R))+" "+Y(M(te))+" l"),this},Si=p.curveTo=function(R,te,ge,Ee,Ne,Ke){return U([Y(I(R)),Y(M(te)),Y(I(ge)),Y(M(Ee)),Y(I(Ne)),Y(M(Ke)),"c"].join(" ")),this};p.__private__.line=p.line=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!ks(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return N===T?this.lines([[ge-R,Ee-te]],R,te,[1,1],Ne||"S"):this.lines([[ge-R,Ee-te]],R,te,[1,1]).stroke()},p.__private__.lines=p.lines=function(R,te,ge,Ee,Ne,Ke){var tt,St,Ft,rn,Sn,rr,di,Ci,zr,Ir,Li,Tr;if(typeof R=="number"&&(Tr=ge,ge=te,te=R,R=Tr),Ee=Ee||[1,1],Ke=Ke||!1,isNaN(te)||isNaN(ge)||!Array.isArray(R)||!Array.isArray(Ee)||!ks(Ne)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(dp(te,ge),tt=Ee[0],St=Ee[1],rn=R.length,Ir=te,Li=ge,Ft=0;Ft<rn;Ft++)(Sn=R[Ft]).length===2?(Ir=Sn[0]*tt+Ir,Li=Sn[1]*St+Li,Pf(Ir,Li)):(rr=Sn[0]*tt+Ir,di=Sn[1]*St+Li,Ci=Sn[2]*tt+Ir,zr=Sn[3]*St+Li,Ir=Sn[4]*tt+Ir,Li=Sn[5]*St+Li,Si(rr,di,Ci,zr,Ir,Li));return Ke&&lm(),fh(Ne),this},p.path=function(R){for(var te=0;te<R.length;te++){var ge=R[te],Ee=ge.c;switch(ge.op){case"m":dp(Ee[0],Ee[1]);break;case"l":Pf(Ee[0],Ee[1]);break;case"c":Si.apply(this,Ee);break;case"h":lm()}}return this},p.__private__.rect=p.rect=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!ks(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return N===T&&(Ee=-Ee),U([Y(I(R)),Y(M(te)),Y(I(ge)),Y(I(Ee)),"re"].join(" ")),fh(Ne),this},p.__private__.triangle=p.triangle=function(R,te,ge,Ee,Ne,Ke,tt){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||isNaN(Ne)||isNaN(Ke)||!ks(tt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-R,Ee-te],[Ne-ge,Ke-Ee],[R-Ne,te-Ke]],R,te,[1,1],tt,!0),this},p.__private__.roundedRect=p.roundedRect=function(R,te,ge,Ee,Ne,Ke,tt){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||isNaN(Ne)||isNaN(Ke)||!ks(tt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var St=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*ge),Ke=Math.min(Ke,.5*Ee),this.lines([[ge-2*Ne,0],[Ne*St,0,Ne,Ke-Ke*St,Ne,Ke],[0,Ee-2*Ke],[0,Ke*St,-Ne*St,Ke,-Ne,Ke],[2*Ne-ge,0],[-Ne*St,0,-Ne,-Ke*St,-Ne,-Ke],[0,2*Ke-Ee],[0,-Ke*St,Ne*St,-Ke,Ne,-Ke]],R+Ne,te,[1,1],tt,!0),this},p.__private__.ellipse=p.ellipse=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!ks(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*ge,tt=4/3*(Math.SQRT2-1)*Ee;return dp(R+ge,te),Si(R+ge,te-tt,R+Ke,te-Ee,R,te-Ee),Si(R-Ke,te-Ee,R-ge,te-tt,R-ge,te),Si(R-ge,te+tt,R-Ke,te+Ee,R,te+Ee),Si(R+Ke,te+Ee,R+ge,te+tt,R+ge,te),fh(Ne),this},p.__private__.circle=p.circle=function(R,te,ge,Ee){if(isNaN(R)||isNaN(te)||isNaN(ge)||!ks(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,te,ge,ge,Ee)},p.setFont=function(R,te,ge){return ge&&(te=X(te,ge)),Qe=im(R,te,{disableWarning:!1}),this};var Os=p.__private__.getFont=p.getFont=function(){return Zt[im.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var R,te,ge={};for(R in hn)if(hn.hasOwnProperty(R))for(te in ge[R]=[],hn[R])hn[R].hasOwnProperty(te)&&ge[R].push(te);return ge},p.addFont=function(R,te,ge,Ee,Ne){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(ge=X(ge,Ee)),up.call(this,R,te,ge,Ne=Ne||"Identity-H")};var Bl,pp=n.lineWidth||.200025,A_=p.__private__.getLineWidth=p.getLineWidth=function(){return pp},ln=p.__private__.setLineWidth=p.setLineWidth=function(R){return pp=R,U(Y(I(R))+" w"),this};p.__private__.setLineDash=zt.API.setLineDash=zt.API.setLineDashPattern=function(R,te){if(R=R||[],te=te||0,isNaN(te)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(ge){return Y(I(ge))}).join(" "),te=Y(I(te)),U("["+R+"] "+te+" d"),this};var Lf=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*Bl};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*Bl};var R_=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Bl=R),this},um=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Bl};R_(n.lineHeight);var Bn=p.__private__.getHorizontalCoordinate=function(R){return I(R)},wo=p.__private__.getVerticalCoordinate=function(R){return N===A?R:$t[ee].mediaBox.topRightY-$t[ee].mediaBox.bottomLeftY-I(R)},gp=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(R){return Y(Bn(R))},cm=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(R){return Y(wo(R))},jl=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ns(jl)},p.__private__.setStrokeColor=p.setDrawColor=function(R,te,ge,Ee){return jl=No({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"draw",precision:2}),U(jl),this};var kf=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ns(kf)},p.__private__.setFillColor=p.setFillColor=function(R,te,ge,Ee){return kf=No({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"fill",precision:2}),U(kf),this};var Pi=n.textColor||"0 g",hm=p.__private__.getTextColor=p.getTextColor=function(){return Ns(Pi)};p.__private__.setTextColor=p.setTextColor=function(R,te,ge,Ee){return Pi=No({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"text",precision:3}),this};var ul=n.charSpace,fm=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ul||0)};p.__private__.setCharSpace=p.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ul=R,this};var Of=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(R){var te=p.CapJoinStyles[R];if(te===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Of=te,U(te+" J"),this};var mp=0;p.__private__.setLineJoin=p.setLineJoin=function(R){var te=p.CapJoinStyles[R];if(te===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mp=te,U(te+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return U(Y(I(R))+" M"),this},p.GState=UI,p.setGState=function(R){(R=typeof R=="string"?At[Vt[R]]:yp(null,R)).equals(Vn)||(U("/"+R.id+" gs"),Vn=R)};var yp=function(R,te){if(!R||!Vt[R]){var ge=!1;for(var Ee in At)if(At.hasOwnProperty(Ee)&&At[Ee].equals(te)){ge=!0;break}if(ge)te=At[Ee];else{var Ne="GS"+(Object.keys(At).length+1).toString(10);At[Ne]=te,te.id=Ne}return R&&(Vt[R]=te.id),Fn.publish("addGState",te),te}};p.addGState=function(R,te){return yp(R,te),this},p.saveGraphicsState=function(){return U("q"),dr.push({key:Qe,size:Ce,color:Pi}),this},p.restoreGraphicsState=function(){U("Q");var R=dr.pop();return Qe=R.key,Ce=R.size,Pi=R.color,Vn=null,this},p.setCurrentTransformationMatrix=function(R){return U(R.toString()+" cm"),this},p.comment=function(R){return U("#"+R),this};var ko=function(R,te){var ge=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(Ke){isNaN(Ke)||(ge=parseFloat(Ke))}});var Ee=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(Ke){isNaN(Ke)||(Ee=parseFloat(Ke))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Ke){Ne=Ke.toString()}}),this},gc=function(R,te,ge,Ee){ko.call(this,R,te),this.type="rect";var Ne=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(tt){isNaN(tt)||(Ne=parseFloat(tt))}});var Ke=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(tt){isNaN(tt)||(Ke=parseFloat(tt))}}),this},Ff=function(){this.page=vn,this.currentPage=ee,this.pages=He.slice(0),this.pagesContext=$t.slice(0),this.x=ft,this.y=Pr,this.matrix=mt,this.width=_p(ee),this.height=vp(ee),this.outputDestination=be,this.id="",this.objectNumber=-1};Ff.prototype.restore=function(){vn=this.page,ee=this.currentPage,$t=this.pagesContext,He=this.pages,ft=this.x,Pr=this.y,mt=this.matrix,Au(ee,this.width),Fs(ee,this.height),be=this.outputDestination};var es=function(R,te,ge,Ee,Ne){oi.push(new Ff),vn=ee=0,He=[],ft=R,Pr=te,mt=Ne,hs([ge,Ee])};for(var Na in p.beginFormObject=function(R,te,ge,Ee,Ne){return es(R,te,ge,Ee,Ne),this},p.endFormObject=function(R){return(function(te){if(ii[te])oi.pop().restore();else{var ge=new Ff,Ee="Xo"+(Object.keys(Gr).length+1).toString(10);ge.id=Ee,ii[te]=Ee,Gr[Ee]=ge,Fn.publish("addFormObject",ge),oi.pop().restore()}})(R),this},p.doFormObject=function(R,te){var ge=Gr[ii[R]];return U("q"),U(te.toString()+" cm"),U("/"+ge.id+" Do"),U("Q"),this},p.getFormObject=function(R){var te=Gr[ii[R]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},p.save=function(R,te){return R=R||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(jg(ha(xo()),R),typeof jg.unload=="function"&&mn.setTimeout&&setTimeout(jg.unload,911),this):new Promise(function(ge,Ee){try{var Ne=jg(ha(xo()),R);typeof jg.unload=="function"&&mn.setTimeout&&setTimeout(jg.unload,911),ge(Ne)}catch(Ke){Ee(Ke.message)}})},zt.API)zt.API.hasOwnProperty(Na)&&(Na==="events"&&zt.API.events.length?(function(R,te){var ge,Ee,Ne;for(Ne=te.length-1;Ne!==-1;Ne--)ge=te[Ne][0],Ee=te[Ne][1],R.subscribe.apply(R,[ge].concat(typeof Ee=="function"?[Ee]:Ee))})(Fn,zt.API.events):p[Na]=zt.API[Na]);function _p(R){return $t[R].mediaBox.topRightX-$t[R].mediaBox.bottomLeftX}function Au(R,te){$t[R].mediaBox.topRightX=te+$t[R].mediaBox.bottomLeftX}function vp(R){return $t[R].mediaBox.topRightY-$t[R].mediaBox.bottomLeftY}function Fs(R,te){$t[R].mediaBox.topRightY=te+$t[R].mediaBox.bottomLeftY}var Ru=p.getPageWidth=function(R){return _p(R=R||ee)/Kt},fa=p.setPageWidth=function(R,te){Au(R,te*Kt)},mc=p.getPageHeight=function(R){return vp(R=R||ee)/Kt},dm=p.setPageHeight=function(R,te){Fs(R,te*Kt)};return p.internal={pdfEscape:Ma,getStyle:hp,getFont:Os,getFontSize:Ue,getCharSpace:fm,getTextColor:hm,getLineHeight:Lf,getLineHeightFactor:um,getLineWidth:A_,write:ae,getHorizontalCoordinate:Bn,getVerticalCoordinate:wo,getCoordinateString:gp,getVerticalCoordinateString:cm,collections:{},newObject:nr,newAdditionalObject:sh,newObjectDeferred:qi,newObjectDeferredBegin:vo,getFilters:Po,putStream:Ps,events:Fn,scaleFactor:Kt,pageSize:{getWidth:function(){return Ru(ee)},setWidth:function(R){fa(ee,R)},getHeight:function(){return mc(ee)},setHeight:function(R){dm(ee,R)}},encryptionOptions:f,encryption:ro,getEncryptor:function(R){return f!==null?ro.encryptor(R,0):function(te){return te}},output:cp,getNumberOfPages:Mf,get pages(){return He},out:U,f2:B,f3:v,getPageInfo:Tu,getPageInfoByObjId:sm,getCurrentPageInfo:D_,getPDFVersion:x,Point:ko,Rectangle:gc,Matrix:Mt,hasHotfix:Lo},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ru(ee)},set:function(R){fa(ee,R)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return mc(ee)},set:function(R){dm(ee,R)},enumerable:!0,configurable:!0}),(function(R){for(var te=0,ge=Fe.length;te<ge;te++){var Ee=up.call(this,R[te][0],R[te][1],R[te][2],Fe[te][3],!0);d===!1&&(y[Ee]=!0);var Ne=R[te][0].split("-");Rf({id:Ee,fontName:Ne[0],fontStyle:Ne[1]||""})}Fn.publish("addFonts",{fonts:Zt,dictionary:hn})}).call(p,Fe),Qe="F1",Cu(i,t),Fn.publish("initialized"),p}e_.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},e_.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},e_.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},e_.prototype.processOwnerPassword=function(n,e){return I3(C3(e).substr(0,5),n)},e_.prototype.encryptor=function(n,e){var t=C3(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return I3(t,r)}},UI.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Qr(n)!==Qr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},zt.API={events:[]},zt.version="4.0.0";var to=zt.API,A3=1,zg=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jy=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Cn=function(n){return n.toFixed(2)},ep=function(n){return n.toFixed(5)};to.__acroform__={};var ol=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},xY=function(n){return n*A3},Qc=function(n){var e=new VY,t=Ot.internal.getHeight(n)||0,r=Ot.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Cn(r)),Number(Cn(t))],e},Rye=to.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Mye=to.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Nye=to.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},go=to.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Nye(n,e-1)},mo=to.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Rye(n,e-1)},yo=to.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Mye(n,e-1)},Pye=to.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=r(o)||0,[Number(Cn(l.lowerLeft_X)),Number(Cn(l.lowerLeft_Y)),Number(Cn(l.upperRight_X)),Number(Cn(l.upperRight_Y))]},Lye=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=T3(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Cn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Qc(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},T3=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var o=t,s=Ot.internal.getHeight(n)||0;s=s<0?-s:s;var a=Ot.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(B,v,I){if(B+1<i.length){var M=v+" "+i[B+1][0];return NI(M,n,I).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,f,d=NI("3",n,o).height,y=n.multiline?s-o:(s-d)/2,p=y+=2,_=0,x=0,b=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+NI(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var S="",T=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var N=!1;if(i[A].length!==1&&b!==i[A].length-1){if((d+2)*(T+2)+2>s)continue e;S+=i[A][b],N=!0,x=A,A--}else{S=(S+=i[A][b]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var k=parseInt(A),W=l(k,S,o),X=A>=i.length-1;if(W&&!X){S+=" ",b=0;continue}if(W||X){if(X)x=k;else if(n.multiline&&(d+2)*(T+2)+2>s)continue e}else{if(!n.multiline||(d+2)*(T+2)+2>s)continue e;x=k}}for(var Y="",$=_;$<=x;$++){var V=i[$];if(n.multiline){if($===x){Y+=V[b]+" ",b=(b+1)%V.length;continue}if($===_){Y+=V[V.length-1]+" ";continue}}Y+=V[0]+" "}switch(Y=Y.substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y,f=NI(Y,n,o).width,n.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;default:c=2}e+=Cn(c)+" "+Cn(p)+` Td
`,e+="("+zg(Y)+`) Tj
`,e+=-Cn(c)+` 0 Td
`,p=-(o+2),f=0,_=N?x:x+1,T++,S=""}break}return r.text=e,r.fontSize=o,r},NI=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},kye={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Oye=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Fye=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ac.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(kye)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");A3=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new HY,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Oye(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=Pye(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ot.createDefaultAppearanceStream(a),Qr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=Lye(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var d="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var p=a.appearanceStreamContent[y];if(d+="/"+y+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var _=p[s];typeof _=="function"&&(_=_.call(i,a)),d+="/"+s+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,a)),d+="/"+s+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&(function(x,b){for(var S in x)if(x.hasOwnProperty(S)){var T=S,A=x[S];b.internal.newObjectDeferredBegin(A.objId,!0),Qr(A)==="object"&&typeof A.putStream=="function"&&A.putStream(),delete x[T]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},zY=to.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Qr(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+zg(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},x3=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+zg(r(n))+")"},eh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eh.prototype.toString=function(){return this.objId+" 0 R"},eh.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},eh.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:zY(i,this.objId,this.scope)}):i instanceof eh?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var VY=function(){eh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ol(VY,eh);var HY=function(){eh.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+zg(t(n))+")"}},set:function(t){n=t}})};ol(HY,eh);var ac=function n(){eh.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!go(e,3)},set:function(S){S?this.F=mo(e,3):this.F=yo(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof GI)return;o="FieldObject"+n.FieldNum++}var S=function(T){return T};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+zg(S(o))+")"},set:function(S){o=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(S){o=S}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(S){s=S}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/A3:c},set:function(S){c=S}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof GI||this instanceof Gg))return x3(d,this.objId,this.scope)},set:function(S){S=S.toString(),d=S}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof as==0?x3(y,this.objId,this.scope):y},set:function(S){S=S.toString(),y=this instanceof as==0?S.substr(0,1)==="("?Jy(S.substr(1,S.length-2)):Jy(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof as==1?Jy(y.substr(1,y.length-1)):y},set:function(S){S=S.toString(),y=this instanceof as==1?"/"+S:S}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof as==0?x3(p,this.objId,this.scope):p},set:function(S){S=S.toString(),p=this instanceof as==0?S.substr(0,1)==="("?Jy(S.substr(1,S.length-2)):Jy(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof as==1?Jy(p.substr(1,p.length-1)):p},set:function(S){S=S.toString(),p=this instanceof as==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(S){S=!!S,x=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(S){_=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,1)},set:function(S){S?this.Ff=mo(this.Ff,1):this.Ff=yo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,2)},set:function(S){S?this.Ff=mo(this.Ff,2):this.Ff=yo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,3)},set:function(S){S?this.Ff=mo(this.Ff,3):this.Ff=yo(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');b=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(b){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};ol(ac,eh);var r_=function(){ac.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return zY(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,18)},set:function(t){t?this.Ff=mo(this.Ff,18):this.Ff=yo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=mo(this.Ff,19):this.Ff=yo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,20)},set:function(t){t?(this.Ff=mo(this.Ff,20),e.sort()):this.Ff=yo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,22)},set:function(t){t?this.Ff=mo(this.Ff,22):this.Ff=yo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,23)},set:function(t){t?this.Ff=mo(this.Ff,23):this.Ff=yo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,27)},set:function(t){t?this.Ff=mo(this.Ff,27):this.Ff=yo(this.Ff,27)}}),this.hasAppearanceStream=!1};ol(r_,ac);var i_=function(){r_.call(this),this.fontName="helvetica",this.combo=!1};ol(i_,r_);var o_=function(){i_.call(this),this.combo=!0};ol(o_,i_);var OI=function(){o_.call(this),this.edit=!0};ol(OI,o_);var as=function(){ac.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,15)},set:function(t){t?this.Ff=mo(this.Ff,15):this.Ff=yo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,16)},set:function(t){t?this.Ff=mo(this.Ff,16):this.Ff=yo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,17)},set:function(t){t?this.Ff=mo(this.Ff,17):this.Ff=yo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,26)},set:function(t){t?this.Ff=mo(this.Ff,26):this.Ff=yo(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+zg(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Qr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ol(as,ac);var FI=function(){as.call(this),this.pushButton=!0};ol(FI,as);var s_=function(){as.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ol(s_,as);var GI=function(){var n,e;ac.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+zg(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Qr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ol(GI,ac),s_.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},s_.prototype.createOption=function(n){var e=new GI;return e.Parent=this,e.optionName=n,this.Kids.push(e),Bye.call(this.scope,e),e};var BI=function(){as.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};ol(BI,as);var Gg=function(){ac.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,13)},set:function(e){e?this.Ff=mo(this.Ff,13):this.Ff=yo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,21)},set:function(e){e?this.Ff=mo(this.Ff,21):this.Ff=yo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,23)},set:function(e){e?this.Ff=mo(this.Ff,23):this.Ff=yo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,24)},set:function(e){e?this.Ff=mo(this.Ff,24):this.Ff=yo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,25)},set:function(e){e?this.Ff=mo(this.Ff,25):this.Ff=yo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,26)},set:function(e){e?this.Ff=mo(this.Ff,26):this.Ff=yo(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ol(Gg,ac);var jI=function(){Gg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!go(this.Ff,14)},set:function(n){n?this.Ff=mo(this.Ff,14):this.Ff=yo(this.Ff,14)}}),this.password=!0};ol(jI,Gg);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=T3(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Cn(Ot.internal.getWidth(n))+" "+Cn(Ot.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Cn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Qc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=Ot.internal.getHeight(n),s=Ot.internal.getWidth(n),a=T3(n,n.caption);return i.push("1 g"),i.push("0 0 "+Cn(s)+" "+Cn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Cn(s-1)+" "+Cn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Cn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Cn(Ot.internal.getWidth(n))+" "+Cn(Ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ot.RadioButton.Circle.YesNormal,e.D[n]=Ot.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Qc(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Ot.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+ep(Ot.internal.getWidth(n)/2)+" "+ep(Ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Ot.internal.Bezier_C).toFixed(5)),s=Number((r*Ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ep(Ot.internal.getWidth(n)/2)+" "+ep(Ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+ep(Ot.internal.getWidth(n)/2)+" "+ep(Ot.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=[],r=Ot.internal.getWidth(n)<=Ot.internal.getHeight(n)?Ot.internal.getWidth(n)/4:Ot.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Ot.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+ep(Ot.internal.getWidth(n)/2)+" "+ep(Ot.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ot.RadioButton.Cross.YesNormal,e.D[n]=Ot.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Qc(n);e.scope=n.scope;var t=[],r=Ot.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Cn(Ot.internal.getWidth(n)-2)+" "+Cn(Ot.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Cn(r.x1.x)+" "+Cn(r.x1.y)+" m"),t.push(Cn(r.x2.x)+" "+Cn(r.x2.y)+" l"),t.push(Cn(r.x4.x)+" "+Cn(r.x4.y)+" m"),t.push(Cn(r.x3.x)+" "+Cn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=Ot.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Cn(Ot.internal.getWidth(n))+" "+Cn(Ot.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Cn(Ot.internal.getWidth(n)-2)+" "+Cn(Ot.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Cn(t.x1.x)+" "+Cn(t.x1.y)+" m"),r.push(Cn(t.x2.x)+" "+Cn(t.x2.y)+" l"),r.push(Cn(t.x4.x)+" "+Cn(t.x4.y)+" m"),r.push(Cn(t.x3.x)+" "+Cn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Qc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Cn(Ot.internal.getWidth(n))+" "+Cn(Ot.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ot.internal.getWidth(n),t=Ot.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ot.internal.getWidth=function(n){var e=0;return Qr(n)==="object"&&(e=xY(n.Rect[2])),e},Ot.internal.getHeight=function(n){var e=0;return Qr(n)==="object"&&(e=xY(n.Rect[3])),e};var Bye=to.addField=function(n){if(Fye(this,n),!(n instanceof ac))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};to.AcroFormChoiceField=r_,to.AcroFormListBox=i_,to.AcroFormComboBox=o_,to.AcroFormEditBox=OI,to.AcroFormButton=as,to.AcroFormPushButton=FI,to.AcroFormRadioButton=s_,to.AcroFormCheckBox=BI,to.AcroFormTextField=Gg,to.AcroFormPasswordField=jI,to.AcroFormAppearance=Ot,to.AcroForm={ChoiceField:r_,ListBox:i_,ComboBox:o_,EditBox:OI,Button:as,PushButton:FI,RadioButton:s_,CheckBox:BI,TextField:Gg,PasswordField:jI,Appearance:Ot},zt.AcroForm={ChoiceField:r_,ListBox:i_,ComboBox:o_,EditBox:OI,Button:as,PushButton:FI,RadioButton:s_,CheckBox:BI,TextField:Gg,PasswordField:jI,Appearance:Ot};var Plt=zt.AcroForm;function qY(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(B,v){var I,M,j,Q,Z,q=t;if((v=v||t)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(W(B))for(Z in r)for(j=r[Z],I=0;I<j.length;I+=1){for(Q=!0,M=0;M<j[I].length;M+=1)if(j[I][M]!==void 0&&j[I][M]!==B[M]){Q=!1;break}if(Q===!0){q=Z;break}}else for(Z in r)for(j=r[Z],I=0;I<j.length;I+=1){for(Q=!0,M=0;M<j[I].length;M+=1)if(j[I][M]!==void 0&&j[I][M]!==B.charCodeAt(M)){Q=!1;break}if(Q===!0){q=Z;break}}return q===t&&v!==t&&(q=v),q},o=function B(v){for(var I=this.internal.write,M=this.internal.putStream,j=(0,this.internal.getFilters)();j.indexOf("FlateEncode")!==-1;)j.splice(j.indexOf("FlateEncode"),1);v.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:v.width}),Q.push({key:"Height",value:v.height}),v.colorSpace===S.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(v.palette.length/3-1)+" "+("sMask"in v&&v.sMask!==void 0?v.objectId+2:v.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+v.colorSpace}),v.colorSpace===S.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:v.bitsPerComponent}),"decodeParameters"in v&&v.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+v.decodeParameters+">>"}),"transparency"in v&&Array.isArray(v.transparency)&&v.transparency.length>0){for(var Z="",q=0,K=v.transparency.length;q<K;q++)Z+=v.transparency[q]+" "+v.transparency[q]+" ";Q.push({key:"Mask",value:"["+Z+"]"})}v.sMask!==void 0&&Q.push({key:"SMask",value:v.objectId+1+" 0 R"});var oe=v.filter!==void 0?["/"+v.filter]:void 0;if(M({data:v.data,additionalKeyValues:Q,alreadyAppliedFilters:oe,objectId:v.objectId}),I("endobj"),"sMask"in v&&v.sMask!==void 0){var _e,F=(_e=v.sMaskBitsPerComponent)!==null&&_e!==void 0?_e:v.bitsPerComponent,ee={width:v.width,height:v.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:v.sMask};"filter"in v&&(ee.decodeParameters="/Predictor ".concat(v.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(v.width),ee.filter=v.filter),B.call(this,ee)}if(v.colorSpace===S.INDEXED){var ce=this.internal.newObject();M({data:Y(new Uint8Array(v.palette)),objectId:ce}),I("endobj")}},s=function(){var B=this.internal.collections[e+"images"];for(var v in B)o.call(this,B[v])},a=function(){var B,v=this.internal.collections[e+"images"],I=this.internal.write;for(var M in v)I("/I"+(B=v[M]).index,B.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var B=this.internal.collections[e+"images"];return l.call(this),B},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(B){return typeof n["process"+B.toUpperCase()]=="function"},y=function(B){return Qr(B)==="object"&&B.nodeType===1},p=function(B,v){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var I=""+B.getAttribute("src");if(I.indexOf("data:image/")===0)return kI(unescape(I).split("base64,").pop());var M=n.loadFile(I,!0);if(M!==void 0)return M}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var j;switch(v){case"PNG":j="image/png";break;case"WEBP":j="image/webp";break;default:j="image/jpeg"}return kI(B.toDataURL(j,1).split("base64,").pop())}},_=function(B){var v=this.internal.collections[e+"images"];if(v){for(var I in v)if(B===v[I].alias)return v[I]}},x=function(B,v,I){return B||v||(B=-96,v=-96),B<0&&(B=-1*I.width*72/B/this.internal.scaleFactor),v<0&&(v=-1*I.height*72/v/this.internal.scaleFactor),B===0&&(B=v*I.width/I.height),v===0&&(v=B*I.height/I.width),[B,v]},b=function(B,v,I,M,j,Q){var Z=x.call(this,I,M,j),q=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,oe=c.call(this);if(I=Z[0],M=Z[1],oe[j.index]=j,Q){Q*=Math.PI/180;var _e=Math.cos(Q),F=Math.sin(Q),ee=function(pe){return pe.toFixed(4)},ce=[ee(_e),ee(F),ee(-1*F),ee(_e),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,q(B),K(v+M),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([q(I),"0","0",q(M),"0","0","cm"].join(" "))):this.internal.write([q(I),"0","0",q(M),q(B),K(v+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+j.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(B){var v,I,M=0;if(typeof B=="string")for(I=B.length,v=0;v<I;v++)M=(M<<5)-M+B.charCodeAt(v),M|=0;else if(W(B))for(I=B.byteLength/2,v=0;v<I;v++)M=(M<<5)-M+B[v],M|=0;return M},N=n.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var v=!0;return B.length===0&&(v=!1),B.length%4!=0&&(v=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(v=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(v=!1),v},k=n.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var v=B.indexOf(",");return v<0?null:B.substring(0,v).trim().endsWith("base64")?B.substring(v+1):null};n.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},X=n.__addimage__.binaryStringToUint8Array=function(B){for(var v=B.length,I=new Uint8Array(v),M=0;M<v;M++)I[M]=B.charCodeAt(M);return I},Y=n.__addimage__.arrayBufferToBinaryString=function(B){for(var v="",I=W(B)?B:new Uint8Array(B),M=0;M<I.length;M+=8192)v+=String.fromCharCode.apply(null,I.subarray(M,M+8192));return v};n.addImage=function(){var B,v,I,M,j,Q,Z,q,K;if(typeof arguments[1]=="number"?(v=t,I=arguments[1],M=arguments[2],j=arguments[3],Q=arguments[4],Z=arguments[5],q=arguments[6],K=arguments[7]):(v=arguments[1],I=arguments[2],M=arguments[3],j=arguments[4],Q=arguments[5],Z=arguments[6],q=arguments[7],K=arguments[8]),Qr(B=arguments[0])==="object"&&!y(B)&&"imageData"in B){var oe=B;B=oe.imageData,v=oe.format||v||t,I=oe.x||I||0,M=oe.y||M||0,j=oe.w||oe.width||j,Q=oe.h||oe.height||Q,Z=oe.alias||Z,q=oe.compression||q,K=oe.rotation||oe.angle||K}var _e=this.internal.getFilters();if(q===void 0&&_e.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(I)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=$.call(this,B,v,Z,q);return b.call(this,I,M,j,Q,F,K),this};var $=function(B,v,I,M){var j,Q,Z;if(typeof B=="string"&&i(B)===t){B=unescape(B);var q=V(B,!1);(q!==""||(q=n.loadFile(B,!0))!==void 0)&&(B=q)}if(y(B)&&(B=p(B,v)),v=i(B,v),!d(v))throw new Error("addImage does not support files of type '"+v+"', please ensure that a plugin for '"+v+"' support is added.");if(((Z=I)==null||Z.length===0)&&(I=(function(K){return typeof K=="string"||W(K)?A(K):W(K.data)?A(K.data):null})(B)),(j=_.call(this,I))||(B instanceof Uint8Array||v==="RGBA"||(Q=B,B=X(B)),j=this["process"+v.toUpperCase()](B,f.call(this),I,(function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in n.image_compression?K:T.NONE})(M),Q)),!j)throw new Error("An unknown error occurred whilst processing the image.");return j},V=n.__addimage__.convertBase64ToBinaryString=function(B,v){v=typeof v!="boolean"||v;var I,M="";if(typeof B=="string"){var j;I=(j=k(B))!==null&&j!==void 0?j:B;try{M=kI(I)}catch(Q){if(v)throw N(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(B){var v,I,M="";if(y(B)&&(B=p(B)),typeof B=="string"&&i(B)===t&&((M=V(B,!1))===""&&(M=n.loadFile(B)||""),B=M),I=i(B),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(B instanceof Uint8Array||(B=X(B)),!(v=this["process"+I.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return v.fileType=I,v}})(zt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};zt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,f=!1,d=0;d<c.length&&!f;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(x.objId),T=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(S(r.contents))+")",o+=" /Popup "+b.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(S(T))+") >>",x.content=o;var A=x.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(o+=" /Open true"),o+=" >>",b.content=o,this.internal.write(x.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var k=this.annotations._nameMap[r.options.name];r.options.pageNumber=k.page,r.options.top=k.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var W=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(r),w:l(t+i),h:c(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var f=this.splitTextToSize(t,a).length;s=Math.ceil(c*f)}else a=l,s=c;return this.text(t,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(zt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=n.__arabicParser__.isArabicEndLetter=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(x){return s(x)&&i.indexOf(x.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length>=3};var f=n.__arabicParser__.arabicLetterHasMedialForm=function(x){return s(x)&&o(x)&&e[x.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(x){var b=0,S=t,T="",A=0;for(b=0;b<x.length;b+=1)S[x.charCodeAt(b)]!==void 0?(A++,typeof(S=S[x.charCodeAt(b)])=="number"&&(T+=String.fromCharCode(S),S=t,A=0),b===x.length-1&&(S=t,T+=x.charAt(b-(A-1)),b-=A-1,A=0)):(S=t,T+=x.charAt(b-A),b-=A,A=0);return T};n.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(x,b,S){return s(x)?o(x)===!1?-1:!c(x)||!s(b)&&!s(S)||!s(S)&&a(b)||a(x)&&!s(b)||a(x)&&l(b)||a(x)&&a(b)?0:f(x)&&s(b)&&!a(b)&&s(S)&&c(S)?3:a(x)||!s(S)?1:2:-1},p=function(x){var b=0,S=0,T=0,A="",N="",k="",W=(x=x||"").split("\\s+"),X=[];for(b=0;b<W.length;b+=1){for(X.push(""),S=0;S<W[b].length;S+=1)A=W[b][S],N=W[b][S-1],k=W[b][S+1],s(A)?(T=y(A,N,k),X[b]+=T!==-1?String.fromCharCode(e[A.charCodeAt(0)][T]):A):X[b]+=A;X[b]=d(X[b])}return X.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var x,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(b)){var T=0;for(S=[],T=0;T<b.length;T+=1)Array.isArray(b[T])?S.push([p(b[T][0]),b[T][1],b[T][2]]):S.push([p(b[T])]);x=S}else x=p(b);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};n.events.push(["preProcessText",_])})(zt.API),zt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(zt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(x){y=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(x){_=x}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,_=0,x=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=c.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(A,N){return A.concat(b.splitTextToSize(N,S))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)p<(x=this.getStringUnitWidth(l[T],{font:d})*f)&&(p=x);return p!==0&&(_=l.length),{w:p/=y,h:Math.max((_*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,f,d,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var p,_,x,b,S=[],T=[],A=[],N={},k={},W=[],X=[],Y=(y=y||{}).autoSize||!1,$=y.printHeaders!==!1,V=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,B=y.margins||Object.assign({width:this.getPageWidth()},e),v=typeof y.padding=="number"?y.padding:3,I=y.headerBackgroundColor||"#c8c8c8",M=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=v,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=M,this.setFontSize(V),d==null)T=S=Object.keys(f[0]),A=S.map(function(){return"left"});else if(Array.isArray(d)&&Qr(d[0])==="object")for(S=d.map(function(oe){return oe.name}),T=d.map(function(oe){return oe.prompt||oe.name||""}),A=d.map(function(oe){return oe.align||"left"}),p=0;p<d.length;p+=1)k[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(T=S=d,A=S.map(function(){return"left"}));if(Y||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<S.length;p+=1){for(N[b=S[p]]=f.map(function(oe){return oe[b]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(T[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=N[b],this.setFont(void 0,"normal"),x=0;x<_.length;x+=1)W.push(this.getTextDimensions(_[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[b]=Math.max.apply(null,W)+v+v,W=[]}if($){var j={};for(p=0;p<S.length;p+=1)j[S[p]]={},j[S[p]].text=T[p],j[S[p]].align=A[p];var Q=a.call(this,j,k);X=S.map(function(oe){return new o(l,c,k[oe],Q,j[oe].text,void 0,j[oe].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var Z=d.reduce(function(oe,_e){return oe[_e.name]=_e.align,oe},{});for(p=0;p<f.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:f[p]},this);var q=a.call(this,f[p],k);for(x=0;x<S.length;x+=1){var K=f[p][S[x]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:x,data:K},this),s.call(this,new o(l,c,k[S[x]],q,K,p+2,Z[S[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[p]-f-f)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/y+f+f},this).reduce(function(p,_){return Math.max(p,_)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,f),this.setTextColor(_)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}})(zt.API);var WY={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$Y=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],D3=qY($Y),YY=[100,200,300,400,500,600,700,800,900],jye=qY(YY);function w3(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return WY[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof D3[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function wY(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Uye={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},EY={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bY(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function SY(n){return n.trimLeft()}function Gye(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function zye(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var PI,CY,IY,Qy,LI,TY,DY,AY,E3=["times"];function RY(n,e,t,r,i){var o=4,s=NY;switch(i){case zt.API.image_compression.FAST:o=1,s=MY;break;case zt.API.image_compression.MEDIUM:o=6,s=PY;break;case zt.API.image_compression.SLOW:o=9,s=LY}n=(function(l,c,f,d){for(var y,p=l.length/c,_=new Uint8Array(l.length+p),x=[Vye,MY,NY,PY,LY],b=0;b<p;b+=1){var S=b*c,T=l.subarray(S,S+c);if(d)_.set(d(T,f,y),S+b);else{for(var A=x.length,N=[],k=0;k<A;k+=1)N[k]=x[k](T,f,y);var W=qye(N.concat());_.set(N[W],S+b)}y=T}return _})(n,e,Math.ceil(t*r/8),s);var a=wI(n,{level:o});return zt.API.__addimage__.arrayBufferToBinaryString(a)}function Vye(n){var e=Array.apply([],n);return e.unshift(0),e}function MY(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function NY(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function PY(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function LY(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=Hye(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function Hye(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function qye(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function b3(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return XY(n,i)>>o&s}function kY(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,l=(e&a)<<s;(function(c,f,d){if(f+1<c.byteLength)c.setUint16(f,d,!1);else{var y=d>>8&255;c.setUint8(f,y)}})(n,o,XY(n,o)&~(a<<s)&65535|l)}function XY(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function Wye(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,f=[],d=0,y=null,p=0,_=null;for(this.width=t,this.height=r;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=n[e++];d=n[e++]|n[e++]<<8,y=n[e++],1&x||(y=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var b=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,N=n[e++],k=N>>6&1,W=1<<1+(7&N),X=a,Y=l,$=!1;N>>7&&($=!0,X=e,Y=W,e+=3*W);var V=e;for(e++;;){var B;if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}f.push({x:b,y:S,width:T,height:A,has_local_palette:$,palette_offset:X,palette_size:Y,data_offset:V,data_length:e-V,transparent_index:y,interlaced:!!k,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return _},this.frameInfo=function(v){if(v<0||v>=f.length)throw new Error("Frame index out of range.");return f[v]},this.decodeAndBlitFrameBGRA=function(v,I){var M=this.frameInfo(v),j=M.width*M.height,Q=new Uint8Array(j);OY(n,M.data_offset,Q,j);var Z=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,oe=t-K,_e=K,F=4*(M.y*t+M.x),ee=4*((M.y+M.height)*t+M.x),ce=F,pe=4*oe;M.interlaced===!0&&(pe+=4*t*7);for(var J=8,xe=0,Se=Q.length;xe<Se;++xe){var ve=Q[xe];if(_e===0&&(_e=K,(ce+=pe)>=ee&&(pe=4*oe+4*t*(J-1),ce=F+(K+oe)*(J<<1),J>>=1)),ve===q)ce+=4;else{var re=n[Z+3*ve],He=n[Z+3*ve+1],G=n[Z+3*ve+2];I[ce++]=G,I[ce++]=He,I[ce++]=re,I[ce++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(v,I){var M=this.frameInfo(v),j=M.width*M.height,Q=new Uint8Array(j);OY(n,M.data_offset,Q,j);var Z=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,oe=t-K,_e=K,F=4*(M.y*t+M.x),ee=4*((M.y+M.height)*t+M.x),ce=F,pe=4*oe;M.interlaced===!0&&(pe+=4*t*7);for(var J=8,xe=0,Se=Q.length;xe<Se;++xe){var ve=Q[xe];if(_e===0&&(_e=K,(ce+=pe)>=ee&&(pe=4*oe+4*t*(J-1),ce=F+(K+oe)*(J<<1),J>>=1)),ve===q)ce+=4;else{var re=n[Z+3*ve],He=n[Z+3*ve+1],G=n[Z+3*ve+2];I[ce++]=re,I[ce++]=He,I[ce++]=G,I[ce++]=255}--_e}}}function OY(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,f=0,d=0,y=0,p=n[e++],_=new Int32Array(4096),x=null;;){for(;f<16&&p!==0;)d|=n[e++]<<f,f+=8,p===1?p=n[e++]:--p;if(f<l)break;var b=d&c;if(d>>=l,f-=l,b!==o){if(b===s)break;for(var S=b<a?b:x,T=0,A=S;A>o;)A=_[A]>>8,++T;var N=A;if(y+T+(S!==b?1:0)>r)return void fi.log("Warning, gif stream longer than expected.");t[y++]=N;var k=y+=T;for(S!==b&&(t[y++]=N),A=S;T--;)A=_[A],t[--k]=255&A,A>>=8;x!==null&&a<4096&&(_[a++]=x<<8|N,a>=c+1&&l<12&&(++l,c=c<<1|1)),x=b}else a=s+1,c=(1<<(l=i+1))-1,x=null}return y!==r&&fi.log("Warning, gif stream shorter than expected."),t}function S3(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),d=new Array(65535),y=new Array(65535),p=new Array(64),_=new Array(64),x=[],b=0,S=7,T=new Array(64),A=new Array(64),N=new Array(64),k=new Array(256),W=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],v=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],j=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(F,ee){for(var ce=0,pe=0,J=new Array,xe=1;xe<=16;xe++){for(var Se=1;Se<=F[xe];Se++)J[ee[pe]]=[],J[ee[pe]][0]=ce,J[ee[pe]][1]=xe,pe++,ce++;ce*=2}return J}function Z(F){for(var ee=F[0],ce=F[1]-1;ce>=0;)ee&1<<ce&&(b|=1<<S),ce--,--S<0&&(b==255?(q(255),q(0)):q(b),S=7,b=0)}function q(F){x.push(F)}function K(F){q(F>>8&255),q(255&F)}function oe(F,ee,ce,pe,J){for(var xe,Se=J[0],ve=J[240],re=(function(Ce,we){var Ue,Le,Be,pt,Tt,qe,qt,xt,Qe,Kt,ft=0;for(Qe=0;Qe<8;++Qe){Ue=Ce[ft],Le=Ce[ft+1],Be=Ce[ft+2],pt=Ce[ft+3],Tt=Ce[ft+4],qe=Ce[ft+5],qt=Ce[ft+6];var Pr=Ue+(xt=Ce[ft+7]),mt=Ue-xt,Zt=Le+qt,hn=Le-qt,dr=Be+qe,Dt=Be-qe,sr=pt+Tt,At=pt-Tt,Vt=Pr+sr,Vn=Pr-sr,vn=Zt+dr,$t=Zt-dr;Ce[ft]=Vt+vn,Ce[ft+4]=Vt-vn;var Fn=.707106781*($t+Vn);Ce[ft+2]=Vn+Fn,Ce[ft+6]=Vn-Fn;var at=.382683433*((Vt=At+Dt)-($t=hn+mt)),Gr=.5411961*Vt+at,ii=1.306562965*$t+at,oi=.707106781*(vn=Dt+hn),Mt=mt+oi,Mi=mt-oi;Ce[ft+5]=Mi+Gr,Ce[ft+3]=Mi-Gr,Ce[ft+1]=Mt+ii,Ce[ft+7]=Mt-ii,ft+=8}for(ft=0,Qe=0;Qe<8;++Qe){Ue=Ce[ft],Le=Ce[ft+8],Be=Ce[ft+16],pt=Ce[ft+24],Tt=Ce[ft+32],qe=Ce[ft+40],qt=Ce[ft+48];var Hi=Ue+(xt=Ce[ft+56]),In=Ue-xt,Cr=Le+qt,nr=Le-qt,qi=Be+qe,vo=Be-qe,sh=pt+Tt,Wi=pt-Tt,ca=Hi+sh,Ns=Hi-sh,No=Cr+qi,Po=Cr-qi;Ce[ft]=ca+No,Ce[ft+32]=ca-No;var Ps=.707106781*(Po+Ns);Ce[ft+16]=Ns+Ps,Ce[ft+48]=Ns-Ps;var Ol=.382683433*((ca=Wi+vo)-(Po=nr+In)),Ls=.5411961*ca+Ol,si=1.306562965*Po+Ol,Df=.707106781*(No=vo+nr),Af=In+Df,Su=In-Df;Ce[ft+40]=Su+Ls,Ce[ft+24]=Su-Ls,Ce[ft+8]=Af+si,Ce[ft+56]=Af-si,ft++}for(Qe=0;Qe<64;++Qe)Kt=Ce[Qe]*we[Qe],p[Qe]=Kt>0?Kt+.5|0:Kt-.5|0;return p})(F,ee),He=0;He<64;++He)_[X[He]]=re[He];var G=_[0]-ce;ce=_[0],G==0?Z(pe[0]):(Z(pe[y[xe=32767+G]]),Z(d[xe]));for(var be=63;be>0&&_[be]==0;)be--;if(be==0)return Z(Se),ce;for(var Ie,U=1;U<=be;){for(var ae=U;_[U]==0&&U<=be;)++U;var he=U-ae;if(he>=16){Ie=he>>4;for(var Fe=1;Fe<=Ie;++Fe)Z(ve);he&=15}xe=32767+_[U],Z(J[(he<<4)+y[xe]]),Z(d[xe]),U++}return be!=63&&Z(Se),ce}function _e(F){F=Math.min(Math.max(F,1),100),o!=F&&((function(ee){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var J=s((ce[pe]*ee+50)/100);J=Math.min(Math.max(J,1),255),a[X[pe]]=J}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var ve=s((xe[Se]*ee+50)/100);ve=Math.min(Math.max(ve,1),255),l[X[Se]]=ve}for(var re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,G=0;G<8;G++)for(var be=0;be<8;be++)c[He]=1/(a[X[He]]*re[G]*re[be]*8),f[He]=1/(l[X[He]]*re[G]*re[be]*8),He++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,ee){ee&&_e(ee),x=new Array,b=0,S=7,K(65496),K(65504),K(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),K(1),K(1),q(0),q(0),(function(){K(65499),K(132),q(0);for(var Le=0;Le<64;Le++)q(a[Le]);q(1);for(var Be=0;Be<64;Be++)q(l[Be])})(),(function(Le,Be){K(65472),K(17),q(8),K(Be),K(Le),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)})(F.width,F.height),(function(){K(65476),K(418),q(0);for(var Le=0;Le<16;Le++)q(Y[Le+1]);for(var Be=0;Be<=11;Be++)q($[Be]);q(16);for(var pt=0;pt<16;pt++)q(V[pt+1]);for(var Tt=0;Tt<=161;Tt++)q(B[Tt]);q(1);for(var qe=0;qe<16;qe++)q(v[qe+1]);for(var qt=0;qt<=11;qt++)q(I[qt]);q(17);for(var xt=0;xt<16;xt++)q(M[xt+1]);for(var Qe=0;Qe<=161;Qe++)q(j[Qe])})(),K(65498),K(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var ce=0,pe=0,J=0;b=0,S=7,this.encode.displayName="_encode_";for(var xe,Se,ve,re,He,G,be,Ie,U,ae=F.data,he=F.width,Fe=F.height,Ce=4*he,we=0;we<Fe;){for(xe=0;xe<Ce;){for(He=Ce*we+xe,be=-1,Ie=0,U=0;U<64;U++)G=He+(Ie=U>>3)*Ce+(be=4*(7&U)),we+Ie>=Fe&&(G-=Ce*(we+1+Ie-Fe)),xe+be>=Ce&&(G-=xe+be-Ce+4),Se=ae[G++],ve=ae[G++],re=ae[G++],T[U]=(W[Se]+W[ve+256|0]+W[re+512|0]>>16)-128,A[U]=(W[Se+768|0]+W[ve+1024|0]+W[re+1280|0]>>16)-128,N[U]=(W[Se+1280|0]+W[ve+1536|0]+W[re+1792|0]>>16)-128;ce=oe(T,c,ce,e,r),pe=oe(A,f,pe,t,i),J=oe(N,f,J,t,i),xe+=32}we+=8}if(S>=0){var Ue=[];Ue[1]=S+1,Ue[0]=(1<<S+1)-1,Z(Ue)}return K(65497),new Uint8Array(x)},n=n||50,(function(){for(var F=String.fromCharCode,ee=0;ee<256;ee++)k[ee]=F(ee)})(),e=Q(Y,$),t=Q(v,I),r=Q(V,B),i=Q(M,j),(function(){for(var F=1,ee=2,ce=1;ce<=15;ce++){for(var pe=F;pe<ee;pe++)y[32767+pe]=ce,d[32767+pe]=[],d[32767+pe][1]=ce,d[32767+pe][0]=pe;for(var J=-(ee-1);J<=-F;J++)y[32767+J]=ce,d[32767+J]=[],d[32767+J][1]=ce,d[32767+J][0]=ee-1+J;F<<=1,ee<<=1}})(),(function(){for(var F=0;F<256;F++)W[F]=19595*F,W[F+256|0]=38470*F,W[F+512|0]=7471*F+32768,W[F+768|0]=-11059*F,W[F+1024|0]=-21709*F,W[F+1280|0]=32768*F+8421375,W[F+1536|0]=-27439*F,W[F+1792|0]=-5329*F})(),_e(n)}function sc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function FY(n){function e($){if(!$)throw Error("assert :P")}function t($,V,B){for(var v=0;4>v;v++)if($[V+v]!=B.charCodeAt(v))return!0;return!1}function r($,V,B,v,I){for(var M=0;M<I;M++)$[V+M]=B[v+M]}function i($,V,B,v){for(var I=0;I<v;I++)$[V+I]=B}function o($){return new Int32Array($)}function s($,V){for(var B=[],v=0;v<$;v++)B.push(new V);return B}function a($,V){var B=[];return(function v(I,M,j){for(var Q=j[M],Z=0;Z<Q&&(I.push(j.length>M+1?[]:new V),!(j.length<M+1));Z++)v(I[Z],M+1,j)})(B,0,$),B}var l=function(){var $=this;function V(E,C){for(var P=1<<C-1>>>0;E&P;)P>>>=1;return P?(E&P-1)+P:E}function B(E,C,P,z,ne){e(!(z%P));do E[C+(z-=P)]=ne;while(0<z)}function v(E,C,P,z,ne){if(e(2328>=ne),512>=ne)var se=o(512);else if((se=o(ne))==null)return 0;return(function(le,ue,fe,me,De,ze){var ye,Re,ke=ue,Ye=1<<fe,Ge=o(16),Xe=o(16);for(e(De!=0),e(me!=null),e(le!=null),e(0<fe),Re=0;Re<De;++Re){if(15<me[Re])return 0;++Ge[me[Re]]}if(Ge[0]==De)return 0;for(Xe[1]=0,ye=1;15>ye;++ye){if(Ge[ye]>1<<ye)return 0;Xe[ye+1]=Xe[ye]+Ge[ye]}for(Re=0;Re<De;++Re)ye=me[Re],0<me[Re]&&(ze[Xe[ye]++]=Re);if(Xe[15]==1)return(me=new I).g=0,me.value=ze[0],B(le,ke,1,Ye,me),Ye;var et,ut=-1,it=Ye-1,Ht=0,Pt=1,jn=1,Bt=1<<fe;for(Re=0,ye=1,De=2;ye<=fe;++ye,De<<=1){if(Pt+=jn<<=1,0>(jn-=Ge[ye]))return 0;for(;0<Ge[ye];--Ge[ye])(me=new I).g=ye,me.value=ze[Re++],B(le,ke+Ht,De,Bt,me),Ht=V(Ht,ye)}for(ye=fe+1,De=2;15>=ye;++ye,De<<=1){if(Pt+=jn<<=1,0>(jn-=Ge[ye]))return 0;for(;0<Ge[ye];--Ge[ye]){if(me=new I,(Ht&it)!=ut){for(ke+=Bt,et=1<<(ut=ye)-fe;15>ut&&!(0>=(et-=Ge[ut]));)++ut,et<<=1;Ye+=Bt=1<<(et=ut-fe),le[ue+(ut=Ht&it)].g=et+fe,le[ue+ut].value=ke-ue-ut}me.g=ye-fe,me.value=ze[Re++],B(le,ke+(Ht>>fe),De,Bt,me),Ht=V(Ht,ye)}}return Pt!=2*Xe[15]-1?0:Ye})(E,C,P,z,ne,se)}function I(){this.value=this.g=0}function M(){this.value=this.g=0}function j(){this.G=s(5,I),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(xh,M)}function Q(E,C,P,z){e(E!=null),e(C!=null),e(2147483648>z),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=C,E.pa=P,E.Jd=C,E.Yc=P+z,E.Zc=4<=z?P+z-4+1:P,Se(E)}function Z(E,C){for(var P=0;0<C--;)P|=re(E,128)<<C;return P}function q(E,C){var P=Z(E,C);return ve(E)?-P:P}function K(E,C,P,z){var ne,se=0;for(e(E!=null),e(C!=null),e(4294967288>z),E.Sb=z,E.Ra=0,E.u=0,E.h=0,4<z&&(z=4),ne=0;ne<z;++ne)se+=C[P+ne]<<8*ne;E.Ra=se,E.bb=z,E.oa=C,E.pa=P}function oe(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<Nu-8>>>0,++E.bb,E.u-=8;pe(E)&&(E.h=1,E.u=0)}function _e(E,C){if(e(0<=C),!E.h&&C<=js){var P=ce(E)&Bs[C];return E.u+=C,oe(E),P}return E.h=1,E.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ce(E){return E.Ra>>>(E.u&Nu-1)>>>0}function pe(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>Nu}function J(E,C){E.u=C,E.h=pe(E)}function xe(E){E.u>=Pu&&(e(E.u>=Pu),oe(E))}function Se(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function ve(E){return Z(E,1)}function re(E,C){var P=E.Ca;0>E.b&&Se(E);var z=E.b,ne=P*C>>>8,se=(E.I>>>z>ne)+0;for(se?(P-=ne,E.I-=ne+1<<z>>>0):P=ne+1,z=P,ne=0;256<=z;)ne+=8,z>>=8;return z=7^ne+Lu[z],E.b-=z,E.Ca=(P<<z)-1,se}function He(E,C,P){E[C+0]=P>>24&255,E[C+1]=P>>16&255,E[C+2]=P>>8&255,E[C+3]=255&P}function G(E,C){return E[C+0]|E[C+1]<<8}function be(E,C){return G(E,C)|E[C+2]<<16}function Ie(E,C){return G(E,C)|G(E,C+2)<<16}function U(E,C){var P=1<<C;return e(E!=null),e(0<C),E.X=o(P),E.X==null?0:(E.Mb=32-C,E.Xa=C,1)}function ae(E,C){e(E!=null),e(C!=null),e(E.Xa==C.Xa),r(C.X,0,E.X,0,1<<C.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function Fe(E,C,P,z){e(P!=null),e(z!=null);var ne=P[0],se=z[0];return ne==0&&(ne=(E*se+C/2)/C),se==0&&(se=(C*ne+E/2)/E),0>=ne||0>=se?0:(P[0]=ne,z[0]=se,1)}function Ce(E,C){return E+(1<<C)-1>>>C}function we(E,C){return((4278255360&E)+(4278255360&C)>>>0&4278255360)+((16711935&E)+(16711935&C)>>>0&16711935)>>>0}function Ue(E,C){$[C]=function(P,z,ne,se,le,ue,fe){var me;for(me=0;me<le;++me){var De=$[E](ue[fe+me-1],ne,se+me);ue[fe+me]=we(P[z+me],De)}}}function Le(){this.ud=this.hd=this.jd=0}function Be(E,C){return((4278124286&(E^C))>>>1)+(E&C)>>>0}function pt(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function Tt(E,C){return pt(E+(E-C+.5>>1))}function qe(E,C,P){return Math.abs(C-P)-Math.abs(E-P)}function qt(E,C,P,z,ne,se,le){for(z=se[le-1],P=0;P<ne;++P)se[le+P]=z=we(E[C+P],z)}function xt(E,C,P,z,ne){var se;for(se=0;se<P;++se){var le=E[C+se],ue=le>>8&255,fe=16711935&(fe=(fe=16711935&le)+((ue<<16)+ue));z[ne+se]=(4278255360&le)+fe>>>0}}function Qe(E,C){C.jd=255&E,C.hd=E>>8&255,C.ud=E>>16&255}function Kt(E,C,P,z,ne,se){var le;for(le=0;le<z;++le){var ue=C[P+le],fe=ue>>>8,me=ue,De=255&(De=(De=ue>>>16)+((E.jd<<24>>24)*(fe<<24>>24)>>>5));me=255&(me=(me+=(E.hd<<24>>24)*(fe<<24>>24)>>>5)+((E.ud<<24>>24)*(De<<24>>24)>>>5)),ne[se+le]=(4278255360&ue)+(De<<16)+me}}function ft(E,C,P,z,ne){$[C]=function(se,le,ue,fe,me,De,ze,ye,Re){for(fe=ze;fe<ye;++fe)for(ze=0;ze<Re;++ze)me[De++]=ne(ue[z(se[le++])])},$[E]=function(se,le,ue,fe,me,De,ze){var ye=8>>se.b,Re=se.Ea,ke=se.K[0],Ye=se.w;if(8>ye)for(se=(1<<se.b)-1,Ye=(1<<ye)-1;le<ue;++le){var Ge,Xe=0;for(Ge=0;Ge<Re;++Ge)Ge&se||(Xe=z(fe[me++])),De[ze++]=ne(ke[Xe&Ye]),Xe>>=ye}else $["VP8LMapColor"+P](fe,me,ke,Ye,De,ze,le,ue,Re)}}function Pr(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=se>>16&255,z[ne++]=se>>8&255,z[ne++]=255&se}}function mt(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=se>>16&255,z[ne++]=se>>8&255,z[ne++]=255&se,z[ne++]=se>>24&255}}function Zt(E,C,P,z,ne){for(P=C+P;C<P;){var se=(le=E[C++])>>16&240|le>>12&15,le=240&le|le>>28&15;z[ne++]=se,z[ne++]=le}}function hn(E,C,P,z,ne){for(P=C+P;C<P;){var se=(le=E[C++])>>16&248|le>>13&7,le=le>>5&224|le>>3&31;z[ne++]=se,z[ne++]=le}}function dr(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=255&se,z[ne++]=se>>8&255,z[ne++]=se>>16&255}}function Dt(E,C,P,z,ne,se){if(se==0)for(P=C+P;C<P;)He(z,((se=E[C++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),ne+=32;else r(z,ne,E,C,P)}function sr(E,C){$[C][0]=$[E+"0"],$[C][1]=$[E+"1"],$[C][2]=$[E+"2"],$[C][3]=$[E+"3"],$[C][4]=$[E+"4"],$[C][5]=$[E+"5"],$[C][6]=$[E+"6"],$[C][7]=$[E+"7"],$[C][8]=$[E+"8"],$[C][9]=$[E+"9"],$[C][10]=$[E+"10"],$[C][11]=$[E+"11"],$[C][12]=$[E+"12"],$[C][13]=$[E+"13"],$[C][14]=$[E+"0"],$[C][15]=$[E+"0"]}function At(E){return E==wD||E==ED||E==Cw||E==bD}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Vn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Vn,this.sd=null}function $t(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Fn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function at(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Gr(E,C){var P=E.T,z=C.ba.f.RGBA,ne=z.eb,se=z.fb+E.ka*z.A,le=Wl[C.ba.S],ue=E.y,fe=E.O,me=E.f,De=E.N,ze=E.ea,ye=E.W,Re=C.cc,ke=C.dc,Ye=C.Mc,Ge=C.Nc,Xe=E.ka,et=E.ka+E.T,ut=E.U,it=ut+1>>1;for(Xe==0?le(ue,fe,null,null,me,De,ze,ye,me,De,ze,ye,ne,se,null,null,ut):(le(C.ec,C.fc,ue,fe,Re,ke,Ye,Ge,me,De,ze,ye,ne,se-z.A,ne,se,ut),++P);Xe+2<et;Xe+=2)Re=me,ke=De,Ye=ze,Ge=ye,De+=E.Rc,ye+=E.Rc,se+=2*z.A,le(ue,(fe+=2*E.fa)-E.fa,ue,fe,Re,ke,Ye,Ge,me,De,ze,ye,ne,se-z.A,ne,se,ut);return fe+=E.fa,E.j+et<E.o?(r(C.ec,C.fc,ue,fe,ut),r(C.cc,C.dc,me,De,it),r(C.Mc,C.Nc,ze,ye,it),P--):1&et||le(ue,fe,null,null,me,De,ze,ye,me,De,ze,ye,ne,se+z.A,null,null,ut),P}function ii(E,C,P){var z=E.F,ne=[E.J];if(z!=null){var se=E.U,le=C.ba.S,ue=le==Sw||le==Cw;C=C.ba.f.RGBA;var fe=[0],me=E.ka;fe[0]=E.T,E.Kb&&(me==0?--fe[0]:(--me,ne[0]-=E.width),E.j+E.ka+E.T==E.o&&(fe[0]=E.o-E.j-me));var De=C.eb;me=C.fb+me*C.A,E=M_(z,ne[0],E.width,se,fe,De,me+(ue?0:3),C.A),e(P==fe),E&&At(le)&&hl(De,me,ue,se,fe,C.A)}return 0}function oi(E){var C=E.ma,P=C.ba.S,z=11>P,ne=P==Ew||P==bw||P==Sw||P==xD||P==12||At(P);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!Ep(C.Oa,E,ne?11:12))return 0;if(ne&&At(P)&&Bf(),E.da)alert("todo:use_scaling");else{if(z){if(C.Ib=at,E.Kb){if(P=E.U+1>>1,C.memory=o(E.U+2*P),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+E.U,C.Mc=C.cc,C.Nc=C.dc+P,C.Ib=Gr,Bf()}}else alert("todo:EmitYUV");ne&&(C.Jb=ii,z&&cl())}if(z&&!o8){for(E=0;256>E;++E)LJ[E]=89858*(E-128)+Tw>>Iw,FJ[E]=-22014*(E-128)+Tw,OJ[E]=-45773*(E-128),kJ[E]=113618*(E-128)+Tw>>Iw;for(E=B_;E<ID;++E)C=76283*(E-16)+Tw>>Iw,BJ[E-B_]=Fl(C,255),jJ[E-B_]=Fl(C+8>>4,15);o8=1}return 1}function Mt(E){var C=E.ma,P=E.U,z=E.T;return e(!(1&E.ka)),0>=P||0>=z?0:(P=C.Ib(E,C),C.Jb!=null&&C.Jb(E,C,P),C.Dc+=P,1)}function Mi(E){E.ma.memory=null}function Hi(E,C,P,z){return _e(E,8)!=47?0:(C[0]=_e(E,14)+1,P[0]=_e(E,14)+1,z[0]=_e(E,1),_e(E,3)!=0?0:!E.h)}function In(E,C){if(4>E)return E+1;var P=E-2>>1;return(2+(1&E)<<P)+_e(C,P)+1}function Cr(E,C){return 120<C?C-120:1<=(P=((P=xJ[C-1])>>4)*E+(8-(15&P)))?P:1;var P}function nr(E,C,P){var z=ce(P),ne=E[C+=255&z].g-8;return 0<ne&&(J(P,P.u+8),z=ce(P),C+=E[C].value,C+=z&(1<<ne)-1),J(P,P.u+E[C].g),E[C].value}function qi(E,C,P){return P.g+=E.g,P.value+=E.value<<C>>>0,e(8>=P.g),E.g}function vo(E,C,P){var z=E.xc;return e((C=z==0?0:E.vc[E.md*(P>>z)+(C>>z)])<E.Wb),E.Ya[C]}function sh(E,C,P,z){var ne=E.ab,se=E.c*C,le=E.C;C=le+C;var ue=P,fe=z;for(z=E.Ta,P=E.Ua;0<ne--;){var me=E.gc[ne],De=le,ze=C,ye=ue,Re=fe,ke=(fe=z,ue=P,me.Ea);switch(e(De<ze),e(ze<=me.nc),me.hc){case 2:Ii(ye,Re,(ze-De)*ke,fe,ue);break;case 0:var Ye=De,Ge=ze,Xe=fe,et=ue,ut=(Bt=me).Ea;Ye==0&&(wh(ye,Re,null,null,1,Xe,et),qt(ye,Re+1,0,0,ut-1,Xe,et+1),Re+=ut,et+=ut,++Ye);for(var it=1<<Bt.b,Ht=it-1,Pt=Ce(ut,Bt.b),jn=Bt.K,Bt=Bt.w+(Ye>>Bt.b)*Pt;Ye<Ge;){var hr=jn,jo=Bt,Un=1;for(jf(ye,Re,Xe,et-ut,1,Xe,et);Un<ut;){var jt=(Un&~Ht)+it;jt>ut&&(jt=ut),(0,Cp[hr[jo++]>>8&15])(ye,Re+ +Un,Xe,et+Un-ut,jt-Un,Xe,et+Un),Un=jt}Re+=ut,et+=ut,++Ye&Ht||(Bt+=Pt)}ze!=me.nc&&r(fe,ue-ke,fe,ue+(ze-De-1)*ke,ke);break;case 1:for(ke=ye,Ge=Re,ut=(ye=me.Ea)-(et=ye&~(Xe=(Re=1<<me.b)-1)),Ye=Ce(ye,me.b),it=me.K,me=me.w+(De>>me.b)*Ye;De<ze;){for(Ht=it,Pt=me,jn=new Le,Bt=Ge+et,hr=Ge+ye;Ge<Bt;)Qe(Ht[Pt++],jn),Uf(jn,ke,Ge,Re,fe,ue),Ge+=Re,ue+=Re;Ge<hr&&(Qe(Ht[Pt++],jn),Uf(jn,ke,Ge,ut,fe,ue),Ge+=ut,ue+=ut),++De&Xe||(me+=Ye)}break;case 3:if(ye==fe&&Re==ue&&0<me.b){for(Ge=fe,ye=ke=ue+(ze-De)*ke-(et=(ze-De)*Ce(me.Ea,me.b)),Re=fe,Xe=ue,Ye=[],et=(ut=et)-1;0<=et;--et)Ye[et]=Re[Xe+et];for(et=ut-1;0<=et;--et)Ge[ye+et]=Ye[et];Sp(me,De,ze,fe,ke,fe,ue)}else Sp(me,De,ze,ye,Re,fe,ue)}ue=z,fe=P}fe!=P&&r(z,P,ue,fe,se)}function Wi(E,C){var P=E.V,z=E.Ba+E.c*E.C,ne=C-E.C;if(e(C<=E.l.o),e(16>=ne),0<ne){var se=E.l,le=E.Ta,ue=E.Ua,fe=se.width;if(sh(E,ne,P,z),ne=ue=[ue],e((P=E.C)<(z=C)),e(se.v<se.va),z>se.o&&(z=se.o),P<se.j){var me=se.j-P;P=se.j,ne[0]+=me*fe}if(P>=z?P=0:(ne[0]+=4*se.v,se.ka=P-se.j,se.U=se.va-se.v,se.T=z-P,P=1),P){if(ue=ue[0],11>(P=E.ca).S){var De=P.f.RGBA,ze=(z=P.S,ne=se.U,se=se.T,me=De.eb,De.A),ye=se;for(De=De.fb+E.Ma*De.A;0<ye--;){var Re=le,ke=ue,Ye=ne,Ge=me,Xe=De;switch(z){case ww:ns(Re,ke,Ye,Ge,Xe);break;case Ew:Fo(Re,ke,Ye,Ge,Xe);break;case wD:Fo(Re,ke,Ye,Ge,Xe),hl(Ge,Xe,0,Ye,1,0);break;case XF:h(Re,ke,Ye,Ge,Xe);break;case bw:Dt(Re,ke,Ye,Ge,Xe,1);break;case ED:Dt(Re,ke,Ye,Ge,Xe,1),hl(Ge,Xe,0,Ye,1,0);break;case Sw:Dt(Re,ke,Ye,Ge,Xe,0);break;case Cw:Dt(Re,ke,Ye,Ge,Xe,0),hl(Ge,Xe,1,Ye,1,0);break;case xD:m(Re,ke,Ye,Ge,Xe);break;case bD:m(Re,ke,Ye,Ge,Xe),Gf(Ge,Xe,Ye,1,0);break;case ZF:u(Re,ke,Ye,Ge,Xe);break;default:e(0)}ue+=fe,De+=ze}E.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=P.height)}}E.C=C,e(E.C<=E.i)}function ca(E){var C;if(0<E.ua)return 0;for(C=0;C<E.Wb;++C){var P=E.Ya[C].G,z=E.Ya[C].H;if(0<P[1][z[1]+0].g||0<P[2][z[2]+0].g||0<P[3][z[3]+0].g)return 0}return 1}function Ns(E,C,P,z,ne,se){if(E.Z!=0){var le=E.qd,ue=E.rd;for(e(Vf[E.Z]!=null);C<P;++C)Vf[E.Z](le,ue,z,ne,z,ne,se),le=z,ue=ne,ne+=se;E.qd=le,E.rd=ue}}function No(E,C){var P=E.l.ma,z=P.Z==0||P.Z==1?E.l.j:E.C;if(z=E.C<z?z:E.C,e(C<=E.l.o),C>z){var ne=E.l.width,se=P.ca,le=P.tb+ne*z,ue=E.V,fe=E.Ba+E.c*z,me=E.gc;e(E.ab==1),e(me[0].hc==3),Vl(me[0],z,C,ue,fe,se,le),Ns(P,z,C,se,le,ne)}E.C=E.Ma=C}function Po(E,C,P,z,ne,se,le){var ue=E.$/z,fe=E.$%z,me=E.m,De=E.s,ze=P+E.$,ye=ze;ne=P+z*ne;var Re=P+z*se,ke=280+De.ua,Ye=E.Pb?ue:16777216,Ge=0<De.ua?De.Wa:null,Xe=De.wc,et=ze<Re?vo(De,fe,ue):null;e(E.C<se),e(Re<=ne);var ut=!1;e:for(;;){for(;ut||ze<Re;){var it=0;if(ue>=Ye){var Ht=ze-P;e((Ye=E).Pb),Ye.wd=Ye.m,Ye.xd=Ht,0<Ye.s.ua&&ae(Ye.s.Wa,Ye.s.vb),Ye=ue+EJ}if(fe&Xe||(et=vo(De,fe,ue)),e(et!=null),et.Qb&&(C[ze]=et.qb,ut=!0),!ut)if(xe(me),et.jc){it=me,Ht=C;var Pt=ze,jn=et.pd[ce(it)&xh-1];e(et.jc),256>jn.g?(J(it,it.u+jn.g),Ht[Pt]=jn.value,it=0):(J(it,it.u+jn.g-256),e(256<=jn.value),it=jn.value),it==0&&(ut=!0)}else it=nr(et.G[0],et.H[0],me);if(me.h)break;if(ut||256>it){if(!ut)if(et.nd)C[ze]=(et.qb|it<<8)>>>0;else{if(xe(me),ut=nr(et.G[1],et.H[1],me),xe(me),Ht=nr(et.G[2],et.H[2],me),Pt=nr(et.G[3],et.H[3],me),me.h)break;C[ze]=(Pt<<24|ut<<16|it<<8|Ht)>>>0}if(ut=!1,++ze,++fe>=z&&(fe=0,++ue,le!=null&&ue<=se&&!(ue%16)&&le(E,ue),Ge!=null))for(;ye<ze;)it=C[ye++],Ge.X[(506832829*it&4294967295)>>>Ge.Mb]=it}else if(280>it){if(it=In(it-256,me),Ht=nr(et.G[4],et.H[4],me),xe(me),Ht=Cr(z,Ht=In(Ht,me)),me.h)break;if(ze-P<Ht||ne-ze<it)break e;for(Pt=0;Pt<it;++Pt)C[ze+Pt]=C[ze+Pt-Ht];for(ze+=it,fe+=it;fe>=z;)fe-=z,++ue,le!=null&&ue<=se&&!(ue%16)&&le(E,ue);if(e(ze<=ne),fe&Xe&&(et=vo(De,fe,ue)),Ge!=null)for(;ye<ze;)it=C[ye++],Ge.X[(506832829*it&4294967295)>>>Ge.Mb]=it}else{if(!(it<ke))break e;for(ut=it-280,e(Ge!=null);ye<ze;)it=C[ye++],Ge.X[(506832829*it&4294967295)>>>Ge.Mb]=it;it=ze,e(!(ut>>>(Ht=Ge).Xa)),C[it]=Ht.X[ut],ut=!0}ut||e(me.h==pe(me))}if(E.Pb&&me.h&&ze<ne)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&ae(E.s.vb,E.s.Wa);else{if(me.h)break e;le?.(E,ue>se?se:ue),E.a=0,E.$=ze-P}return 1}return E.a=3,0}function Ps(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var C=E.Wa;C!=null&&(C.X=null),E.vb=null,e(E!=null)}function Ol(){var E=new rn;return E==null?null:(E.a=0,E.xb=QF,sr("Predictor","VP8LPredictors"),sr("Predictor","VP8LPredictors_C"),sr("PredictorAdd","VP8LPredictorsAdd"),sr("PredictorAdd","VP8LPredictorsAdd_C"),Ii=xt,Uf=Kt,ns=Pr,Fo=mt,m=Zt,u=hn,h=dr,$.VP8LMapColor32b=zl,$.VP8LMapColor8b=Hl,E)}function Ls(E,C,P,z,ne){var se=1,le=[E],ue=[C],fe=z.m,me=z.s,De=null,ze=0;e:for(;;){if(P)for(;se&&_e(fe,1);){var ye=le,Re=ue,ke=z,Ye=1,Ge=ke.m,Xe=ke.gc[ke.ab],et=_e(Ge,2);if(ke.Oc&1<<et)se=0;else{switch(ke.Oc|=1<<et,Xe.hc=et,Xe.Ea=ye[0],Xe.nc=Re[0],Xe.K=[null],++ke.ab,e(4>=ke.ab),et){case 0:case 1:Xe.b=_e(Ge,3)+2,Ye=Ls(Ce(Xe.Ea,Xe.b),Ce(Xe.nc,Xe.b),0,ke,Xe.K),Xe.K=Xe.K[0];break;case 3:var ut,it=_e(Ge,8)+1,Ht=16<it?0:4<it?1:2<it?2:3;if(ye[0]=Ce(Xe.Ea,Ht),Xe.b=Ht,ut=Ye=Ls(it,1,0,ke,Xe.K)){var Pt,jn=it,Bt=Xe,hr=1<<(8>>Bt.b),jo=o(hr);if(jo==null)ut=0;else{var Un=Bt.K[0],jt=Bt.w;for(jo[0]=Bt.K[0][0],Pt=1;Pt<1*jn;++Pt)jo[Pt]=we(Un[jt+Pt],jo[Pt-1]);for(;Pt<4*hr;++Pt)jo[Pt]=0;Bt.K[0]=null,Bt.K[0]=jo,ut=1}}Ye=ut;break;case 2:break;default:e(0)}se=Ye}}if(le=le[0],ue=ue[0],se&&_e(fe,1)&&!(se=1<=(ze=_e(fe,4))&&11>=ze)){z.a=3;break e}var wt;if(wt=se)t:{var io,Tn,pr,xi=z,fs=le,pa=ue,$i=ze,Us=P,ga=xi.m,Uo=xi.s,yr=[null],Vr=1,Yi=0,Hr=wJ[$i];n:for(;;){if(Us&&_e(ga,1)){var ds=_e(ga,3)+2,Ou=Ce(fs,ds),oo=Ce(pa,ds),La=Ou*oo;if(!Ls(Ou,oo,0,xi,yr))break n;for(yr=yr[0],Uo.xc=ds,io=0;io<La;++io){var ai=yr[io]>>8&65535;yr[io]=ai,ai>=Vr&&(Vr=ai+1)}}if(ga.h)break n;for(Tn=0;5>Tn;++Tn){var Go=KF[Tn];!Tn&&0<$i&&(Go+=1<<$i),Yi<Go&&(Yi=Go)}var dl=s(Vr*Hr,I),ma=Vr,pl=s(ma,j);if(pl==null)var gl=null;else e(65536>=ma),gl=pl;var ka=o(Yi);if(gl==null||ka==null||dl==null){xi.a=1;break n}var ml=dl;for(io=pr=0;io<Vr;++io){var pi=gl[io],yl=pi.G,Fu=pi.H,Tp=0,bh=1,ps=0;for(Tn=0;5>Tn;++Tn){Go=KF[Tn],yl[Tn]=ml,Fu[Tn]=pr,!Tn&&0<$i&&(Go+=1<<$i);i:{var Aw,TD=Go,Rw=xi,j_=ka,zJ=ml,VJ=pr,DD=0,Hf=Rw.m,HJ=_e(Hf,1);if(i(j_,0,0,TD),HJ){var qJ=_e(Hf,1)+1,WJ=_e(Hf,1),l8=_e(Hf,WJ==0?1:8);j_[l8]=1,qJ==2&&(j_[l8=_e(Hf,8)]=1);var Mw=1}else{var u8=o(19),c8=_e(Hf,4)+4;if(19<c8){Rw.a=3;var Nw=0;break i}for(Aw=0;Aw<c8;++Aw)u8[vJ[Aw]]=_e(Hf,3);var AD=void 0,U_=void 0,h8=Rw,$J=u8,Pw=TD,f8=j_,RD=0,qf=h8.m,d8=8,p8=s(128,I);r:for(;v(p8,0,7,$J,19);){if(_e(qf,1)){var YJ=2+2*_e(qf,3);if((AD=2+_e(qf,YJ))>Pw)break r}else AD=Pw;for(U_=0;U_<Pw&&AD--;){xe(qf);var g8=p8[0+(127&ce(qf))];J(qf,qf.u+g8.g);var mm=g8.value;if(16>mm)f8[U_++]=mm,mm!=0&&(d8=mm);else{var XJ=mm==16,m8=mm-16,ZJ=yJ[m8],y8=_e(qf,mJ[m8])+ZJ;if(U_+y8>Pw)break r;for(var KJ=XJ?d8:0;0<y8--;)f8[U_++]=KJ}}RD=1;break r}RD||(h8.a=3),Mw=RD}(Mw=Mw&&!Hf.h)&&(DD=v(zJ,VJ,8,j_,TD)),Mw&&DD!=0?Nw=DD:(Rw.a=3,Nw=0)}if(Nw==0)break n;if(bh&&_J[Tn]==1&&(bh=ml[pr].g==0),Tp+=ml[pr].g,pr+=Nw,3>=Tn){var G_,MD=ka[0];for(G_=1;G_<Go;++G_)ka[G_]>MD&&(MD=ka[G_]);ps+=MD}}if(pi.nd=bh,pi.Qb=0,bh&&(pi.qb=(yl[3][Fu[3]+0].value<<24|yl[1][Fu[1]+0].value<<16|yl[2][Fu[2]+0].value)>>>0,Tp==0&&256>yl[0][Fu[0]+0].value&&(pi.Qb=1,pi.qb+=yl[0][Fu[0]+0].value<<8)),pi.jc=!pi.Qb&&6>ps,pi.jc){var Lw,Sh=pi;for(Lw=0;Lw<xh;++Lw){var Wf=Lw,$f=Sh.pd[Wf],kw=Sh.G[0][Sh.H[0]+Wf];256<=kw.value?($f.g=kw.g+256,$f.value=kw.value):($f.g=0,$f.value=0,Wf>>=qi(kw,8,$f),Wf>>=qi(Sh.G[1][Sh.H[1]+Wf],16,$f),Wf>>=qi(Sh.G[2][Sh.H[2]+Wf],0,$f),qi(Sh.G[3][Sh.H[3]+Wf],24,$f))}}}Uo.vc=yr,Uo.Wb=Vr,Uo.Ya=gl,Uo.yc=dl,wt=1;break t}wt=0}if(!(se=wt)){z.a=3;break e}if(0<ze){if(me.ua=1<<ze,!U(me.Wa,ze)){z.a=1,se=0;break e}}else me.ua=0;var ND=z,_8=le,JJ=ue,PD=ND.s,LD=PD.xc;if(ND.c=_8,ND.i=JJ,PD.md=Ce(_8,LD),PD.wc=LD==0?-1:(1<<LD)-1,P){z.xb=AJ;break e}if((De=o(le*ue))==null){z.a=1,se=0;break e}se=(se=Po(z,De,0,le,ue,ue,null))&&!fe.h;break e}return se?(ne!=null?ne[0]=De:(e(De==null),e(P)),z.$=0,P||Ps(me)):Ps(me),se}function si(E,C){var P=E.c*E.i,z=P+C+16*C;return e(E.c<=C),E.V=o(z),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+P+C,1)}function Df(E,C){var P=E.C,z=C-P,ne=E.V,se=E.Ba+E.c*P;for(e(C<=E.l.o);0<z;){var le=16<z?16:z,ue=E.l.ma,fe=E.l.width,me=fe*le,De=ue.ca,ze=ue.tb+fe*P,ye=E.Ta,Re=E.Ua;sh(E,le,ne,se),N_(ye,Re,De,ze,me),Ns(ue,P,P+le,De,ze,fe),z-=le,ne+=le*E.c,P+=le}e(P==C),E.C=E.Ma=C}function Af(){this.ub=this.yd=this.td=this.Rb=0}function Su(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ah(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function lh(){this.Yb=(function(){var E=[];return(function C(P,z,ne){for(var se=ne[z],le=0;le<se&&(P.push(ne.length>z+1?[]:0),!(ne.length<z+1));le++)C(P[le],z+1,ne)})(E,0,[3,11]),E})()}function Rf(){this.jb=o(3),this.Wc=a([4,8],lh),this.Xc=a([4,17],lh)}function up(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ma(){this.ld=this.La=this.dd=this.tc=0}function hs(){this.Na=this.la=0}function Cu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function uh(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Iu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ma),this.Y=0,this.ya=Array(new uh),this.aa=0,this.l=new Nf}function Mf(){this.y=o(16),this.f=o(8),this.ea=o(8)}function im(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new Af,this.Kc=new Su,this.ed=new up,this.Qa=new ah,this.Ic=this.$c=this.Aa=0,this.D=new Iu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,F),this.ia=0,this.pb=s(4,Cu),this.Pa=new Rf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Mf),this.Hd=0,this.rb=Array(new hs),this.sb=0,this.wa=Array(new Ma),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new uh),this.L=this.aa=0,this.gd=a([4,2],Ma),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fl(E,C){return 0>E?0:E>C?C:E}function Nf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function om(){var E=new im;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,F_||(F_=ha)),E}function Ni(E,C,P){return E.a==0&&(E.a=C,E.sc=P,E.cb=0),0}function ch(E,C,P){return 3<=P&&E[C+0]==157&&E[C+1]==1&&E[C+2]==42}function xo(E,C){if(E==null)return 0;if(E.a=0,E.sc="OK",C==null)return Ni(E,2,"null VP8Io passed to VP8GetHeaders()");var P=C.data,z=C.w,ne=C.ha;if(4>ne)return Ni(E,7,"Truncated header.");var se=P[z+0]|P[z+1]<<8|P[z+2]<<16,le=E.Od;if(le.Rb=!(1&se),le.td=se>>1&7,le.yd=se>>4&1,le.ub=se>>5,3<le.td)return Ni(E,3,"Incorrect keyframe parameters.");if(!le.yd)return Ni(E,4,"Frame not displayable.");z+=3,ne-=3;var ue=E.Kc;if(le.Rb){if(7>ne)return Ni(E,7,"cannot parse picture header");if(!ch(P,z,ne))return Ni(E,3,"Bad code word");ue.c=16383&(P[z+4]<<8|P[z+3]),ue.Td=P[z+4]>>6,ue.i=16383&(P[z+6]<<8|P[z+5]),ue.Ud=P[z+6]>>6,z+=7,ne-=7,E.za=ue.c+15>>4,E.Ub=ue.i+15>>4,C.width=ue.c,C.height=ue.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((se=E.Pa).jb,0,255,se.jb.length),e((se=E.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,i(se.Zb,0,0,se.Zb.length),i(se.Lb,0,0,se.Lb)}if(le.ub>ne)return Ni(E,7,"bad partition length");Q(se=E.m,P,z,le.ub),z+=le.ub,ne-=le.ub,le.Rb&&(ue.Ld=ve(se),ue.Kd=ve(se)),ue=E.Qa;var fe,me=E.Pa;if(e(se!=null),e(ue!=null),ue.Cb=ve(se),ue.Cb){if(ue.Bb=ve(se),ve(se)){for(ue.Fb=ve(se),fe=0;4>fe;++fe)ue.Zb[fe]=ve(se)?q(se,7):0;for(fe=0;4>fe;++fe)ue.Lb[fe]=ve(se)?q(se,6):0}if(ue.Bb)for(fe=0;3>fe;++fe)me.jb[fe]=ve(se)?Z(se,8):255}else ue.Bb=0;if(se.Ka)return Ni(E,3,"cannot parse segment header");if((ue=E.ed).zd=ve(se),ue.Tb=Z(se,6),ue.wb=Z(se,3),ue.Pc=ve(se),ue.Pc&&ve(se)){for(me=0;4>me;++me)ve(se)&&(ue.vd[me]=q(se,6));for(me=0;4>me;++me)ve(se)&&(ue.od[me]=q(se,6))}if(E.L=ue.Tb==0?0:ue.zd?1:2,se.Ka)return Ni(E,3,"cannot parse filter header");var De=ne;if(ne=fe=z,z=fe+De,ue=De,E.Xb=(1<<Z(E.m,2))-1,De<3*(me=E.Xb))P=7;else{for(fe+=3*me,ue-=3*me,De=0;De<me;++De){var ze=P[ne+0]|P[ne+1]<<8|P[ne+2]<<16;ze>ue&&(ze=ue),Q(E.Jc[+De],P,fe,ze),fe+=ze,ue-=ze,ne+=3}Q(E.Jc[+me],P,fe,ue),P=fe<z?0:5}if(P!=0)return Ni(E,P,"cannot parse partitions");for(P=Z(fe=E.m,7),ne=ve(fe)?q(fe,4):0,z=ve(fe)?q(fe,4):0,ue=ve(fe)?q(fe,4):0,me=ve(fe)?q(fe,4):0,fe=ve(fe)?q(fe,4):0,De=E.Qa,ze=0;4>ze;++ze){if(De.Cb){var ye=De.Zb[ze];De.Fb||(ye+=P)}else{if(0<ze){E.pb[ze]=E.pb[0];continue}ye=P}var Re=E.pb[ze];Re.Sc[0]=SD[Fl(ye+ne,127)],Re.Sc[1]=CD[Fl(ye+0,127)],Re.Eb[0]=2*SD[Fl(ye+z,127)],Re.Eb[1]=101581*CD[Fl(ye+ue,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=SD[Fl(ye+me,117)],Re.Qc[1]=CD[Fl(ye+fe,127)],Re.lc=ye+fe}if(!le.Rb)return Ni(E,4,"Not a key frame.");for(ve(se),le=E.Pa,P=0;4>P;++P){for(ne=0;8>ne;++ne)for(z=0;3>z;++z)for(ue=0;11>ue;++ue)me=re(se,TJ[P][ne][z][ue])?Z(se,8):CJ[P][ne][z][ue],le.Wc[P][ne].Yb[z][ue]=me;for(ne=0;17>ne;++ne)le.Xc[P][ne]=le.Wc[P][DJ[ne]]}return E.kc=ve(se),E.kc&&(E.Bd=Z(se,8)),E.cb=1}function ha(E,C,P,z,ne,se,le){var ue=C[ne].Yb[P];for(P=0;16>ne;++ne){if(!re(E,ue[P+0]))return ne;for(;!re(E,ue[P+1]);)if(ue=C[++ne].Yb[0],P=0,ne==16)return 16;var fe=C[ne+1].Yb;if(re(E,ue[P+2])){var me=E,De=0;if(re(me,(ye=ue)[(ze=P)+3]))if(re(me,ye[ze+6])){for(ue=0,ze=2*(De=re(me,ye[ze+8]))+(ye=re(me,ye[ze+9+De])),De=0,ye=bJ[ze];ye[ue];++ue)De+=De+re(me,ye[ue]);De+=3+(8<<ze)}else re(me,ye[ze+7])?(De=7+2*re(me,165),De+=re(me,145)):De=5+re(me,159);else De=re(me,ye[ze+4])?3+re(me,ye[ze+5]):2;ue=fe[2]}else De=1,ue=fe[1];fe=le+SJ[ne],0>(me=E).b&&Se(me);var ze,ye=me.b,Re=(ze=me.Ca>>1)-(me.I>>ye)>>31;--me.b,me.Ca+=Re,me.Ca|=1,me.I-=(ze+1&Re)<<ye,se[fe]=((De^Re)-Re)*z[(0<ne)+0]}return 16}function cp(E){var C=E.rb[E.sb-1];C.la=0,C.Na=0,i(E.zc,0,0,E.zc.length),E.ja=0}function Lo(E,C,P,z,ne){ne=E[C+P+32*z]+(ne>>3),E[C+P+32*z]=-256&ne?0>ne?0:255:ne}function ro(E,C,P,z,ne,se){Lo(E,C,0,P,z+ne),Lo(E,C,1,P,z+se),Lo(E,C,2,P,z-se),Lo(E,C,3,P,z-ne)}function Tu(E){return(20091*E>>16)+E}function sm(E,C,P,z){var ne,se=0,le=o(16);for(ne=0;4>ne;++ne){var ue=E[C+0]+E[C+8],fe=E[C+0]-E[C+8],me=(35468*E[C+4]>>16)-Tu(E[C+12]),De=Tu(E[C+4])+(35468*E[C+12]>>16);le[se+0]=ue+De,le[se+1]=fe+me,le[se+2]=fe-me,le[se+3]=ue-De,se+=4,C++}for(ne=se=0;4>ne;++ne)ue=(E=le[se+0]+4)+le[se+8],fe=E-le[se+8],me=(35468*le[se+4]>>16)-Tu(le[se+12]),Lo(P,z,0,0,ue+(De=Tu(le[se+4])+(35468*le[se+12]>>16))),Lo(P,z,1,0,fe+me),Lo(P,z,2,0,fe-me),Lo(P,z,3,0,ue-De),se++,z+=32}function D_(E,C,P,z){var ne=E[C+0]+4,se=35468*E[C+4]>>16,le=Tu(E[C+4]),ue=35468*E[C+1]>>16;ro(P,z,0,ne+le,E=Tu(E[C+1]),ue),ro(P,z,1,ne+se,E,ue),ro(P,z,2,ne-se,E,ue),ro(P,z,3,ne-le,E,ue)}function am(E,C,P,z,ne){sm(E,C,P,z),ne&&sm(E,C+16,P,z+4)}function ks(E,C,P,z){w(E,C+0,P,z,1),w(E,C+32,P,z+128,1)}function hp(E,C,P,z){var ne;for(E=E[C+0]+4,ne=0;4>ne;++ne)for(C=0;4>C;++C)Lo(P,z,C,ne,E)}function lm(E,C,P,z){E[C+0]&&H(E,C+0,P,z),E[C+16]&&H(E,C+16,P,z+4),E[C+32]&&H(E,C+32,P,z+128),E[C+48]&&H(E,C+48,P,z+128+4)}function hh(E,C,P,z){var ne,se=o(16);for(ne=0;4>ne;++ne){var le=E[C+0+ne]+E[C+12+ne],ue=E[C+4+ne]+E[C+8+ne],fe=E[C+4+ne]-E[C+8+ne],me=E[C+0+ne]-E[C+12+ne];se[0+ne]=le+ue,se[8+ne]=le-ue,se[4+ne]=me+fe,se[12+ne]=me-fe}for(ne=0;4>ne;++ne)le=(E=se[0+4*ne]+3)+se[3+4*ne],ue=se[1+4*ne]+se[2+4*ne],fe=se[1+4*ne]-se[2+4*ne],me=E-se[3+4*ne],P[z+0]=le+ue>>3,P[z+16]=me+fe>>3,P[z+32]=le-ue>>3,P[z+48]=me-fe>>3,z+=64}function fh(E,C,P){var z,ne=C-32,se=fl,le=255-E[ne-1];for(z=0;z<P;++z){var ue,fe=se,me=le+E[C-1];for(ue=0;ue<P;++ue)E[C+ue]=fe[me+E[ne+ue]];C+=32}}function fp(E,C){fh(E,C,4)}function Jr(E,C){fh(E,C,8)}function Du(E,C){fh(E,C,16)}function dp(E,C){var P;for(P=0;16>P;++P)r(E,C+32*P,E,C-32,16)}function Pf(E,C){var P;for(P=16;0<P;--P)i(E,C,E[C-1],16),C+=32}function Si(E,C,P){var z;for(z=0;16>z;++z)i(C,P+32*z,E,16)}function Os(E,C){var P,z=16;for(P=0;16>P;++P)z+=E[C-1+32*P]+E[C+P-32];Si(z>>5,E,C)}function Bl(E,C){var P,z=8;for(P=0;16>P;++P)z+=E[C-1+32*P];Si(z>>4,E,C)}function pp(E,C){var P,z=8;for(P=0;16>P;++P)z+=E[C+P-32];Si(z>>4,E,C)}function A_(E,C){Si(128,E,C)}function ln(E,C,P){return E+2*C+P+2>>2}function Lf(E,C){var P,z=C-32;for(z=new Uint8Array([ln(E[z-1],E[z+0],E[z+1]),ln(E[z+0],E[z+1],E[z+2]),ln(E[z+1],E[z+2],E[z+3]),ln(E[z+2],E[z+3],E[z+4])]),P=0;4>P;++P)r(E,C+32*P,z,0,z.length)}function R_(E,C){var P=E[C-1],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96];He(E,C+0,16843009*ln(E[C-1-32],P,z)),He(E,C+32,16843009*ln(P,z,ne)),He(E,C+64,16843009*ln(z,ne,se)),He(E,C+96,16843009*ln(ne,se,se))}function um(E,C){var P,z=4;for(P=0;4>P;++P)z+=E[C+P-32]+E[C-1+32*P];for(z>>=3,P=0;4>P;++P)i(E,C+32*P,z,4)}function Bn(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1-32],le=E[C+0-32],ue=E[C+1-32],fe=E[C+2-32],me=E[C+3-32];E[C+0+96]=ln(z,ne,E[C-1+96]),E[C+1+96]=E[C+0+64]=ln(P,z,ne),E[C+2+96]=E[C+1+64]=E[C+0+32]=ln(se,P,z),E[C+3+96]=E[C+2+64]=E[C+1+32]=E[C+0+0]=ln(le,se,P),E[C+3+64]=E[C+2+32]=E[C+1+0]=ln(ue,le,se),E[C+3+32]=E[C+2+0]=ln(fe,ue,le),E[C+3+0]=ln(me,fe,ue)}function wo(E,C){var P=E[C+1-32],z=E[C+2-32],ne=E[C+3-32],se=E[C+4-32],le=E[C+5-32],ue=E[C+6-32],fe=E[C+7-32];E[C+0+0]=ln(E[C+0-32],P,z),E[C+1+0]=E[C+0+32]=ln(P,z,ne),E[C+2+0]=E[C+1+32]=E[C+0+64]=ln(z,ne,se),E[C+3+0]=E[C+2+32]=E[C+1+64]=E[C+0+96]=ln(ne,se,le),E[C+3+32]=E[C+2+64]=E[C+1+96]=ln(se,le,ue),E[C+3+64]=E[C+2+96]=ln(le,ue,fe),E[C+3+96]=ln(ue,fe,fe)}function gp(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1-32],le=E[C+0-32],ue=E[C+1-32],fe=E[C+2-32],me=E[C+3-32];E[C+0+0]=E[C+1+64]=se+le+1>>1,E[C+1+0]=E[C+2+64]=le+ue+1>>1,E[C+2+0]=E[C+3+64]=ue+fe+1>>1,E[C+3+0]=fe+me+1>>1,E[C+0+96]=ln(ne,z,P),E[C+0+64]=ln(z,P,se),E[C+0+32]=E[C+1+96]=ln(P,se,le),E[C+1+32]=E[C+2+96]=ln(se,le,ue),E[C+2+32]=E[C+3+96]=ln(le,ue,fe),E[C+3+32]=ln(ue,fe,me)}function cm(E,C){var P=E[C+0-32],z=E[C+1-32],ne=E[C+2-32],se=E[C+3-32],le=E[C+4-32],ue=E[C+5-32],fe=E[C+6-32],me=E[C+7-32];E[C+0+0]=P+z+1>>1,E[C+1+0]=E[C+0+64]=z+ne+1>>1,E[C+2+0]=E[C+1+64]=ne+se+1>>1,E[C+3+0]=E[C+2+64]=se+le+1>>1,E[C+0+32]=ln(P,z,ne),E[C+1+32]=E[C+0+96]=ln(z,ne,se),E[C+2+32]=E[C+1+96]=ln(ne,se,le),E[C+3+32]=E[C+2+96]=ln(se,le,ue),E[C+3+64]=ln(le,ue,fe),E[C+3+96]=ln(ue,fe,me)}function jl(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96];E[C+0+0]=P+z+1>>1,E[C+2+0]=E[C+0+32]=z+ne+1>>1,E[C+2+32]=E[C+0+64]=ne+se+1>>1,E[C+1+0]=ln(P,z,ne),E[C+3+0]=E[C+1+32]=ln(z,ne,se),E[C+3+32]=E[C+1+64]=ln(ne,se,se),E[C+3+64]=E[C+2+64]=E[C+0+96]=E[C+1+96]=E[C+2+96]=E[C+3+96]=se}function kf(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96],le=E[C-1-32],ue=E[C+0-32],fe=E[C+1-32],me=E[C+2-32];E[C+0+0]=E[C+2+32]=P+le+1>>1,E[C+0+32]=E[C+2+64]=z+P+1>>1,E[C+0+64]=E[C+2+96]=ne+z+1>>1,E[C+0+96]=se+ne+1>>1,E[C+3+0]=ln(ue,fe,me),E[C+2+0]=ln(le,ue,fe),E[C+1+0]=E[C+3+32]=ln(P,le,ue),E[C+1+32]=E[C+3+64]=ln(z,P,le),E[C+1+64]=E[C+3+96]=ln(ne,z,P),E[C+1+96]=ln(se,ne,z)}function Pi(E,C){var P;for(P=0;8>P;++P)r(E,C+32*P,E,C-32,8)}function hm(E,C){var P;for(P=0;8>P;++P)i(E,C,E[C-1],8),C+=32}function ul(E,C,P){var z;for(z=0;8>z;++z)i(C,P+32*z,E,8)}function fm(E,C){var P,z=8;for(P=0;8>P;++P)z+=E[C+P-32]+E[C-1+32*P];ul(z>>4,E,C)}function Of(E,C){var P,z=4;for(P=0;8>P;++P)z+=E[C+P-32];ul(z>>3,E,C)}function mp(E,C){var P,z=4;for(P=0;8>P;++P)z+=E[C-1+32*P];ul(z>>3,E,C)}function yp(E,C){ul(128,E,C)}function ko(E,C,P){var z=E[C-P],ne=E[C+0],se=3*(ne-z)+Ip[1020+E[C-2*P]-E[C+P]],le=xw[112+(se+4>>3)];E[C-P]=fl[255+z+xw[112+(se+3>>3)]],E[C+0]=fl[255+ne-le]}function gc(E,C,P,z){var ne=E[C+0],se=E[C+P];return ql[255+E[C-2*P]-E[C-P]]>z||ql[255+se-ne]>z}function Ff(E,C,P,z){return 4*ql[255+E[C-P]-E[C+0]]+ql[255+E[C-2*P]-E[C+P]]<=z}function es(E,C,P,z,ne){var se=E[C-3*P],le=E[C-2*P],ue=E[C-P],fe=E[C+0],me=E[C+P],De=E[C+2*P],ze=E[C+3*P];return 4*ql[255+ue-fe]+ql[255+le-me]>z?0:ql[255+E[C-4*P]-se]<=ne&&ql[255+se-le]<=ne&&ql[255+le-ue]<=ne&&ql[255+ze-De]<=ne&&ql[255+De-me]<=ne&&ql[255+me-fe]<=ne}function Na(E,C,P,z){var ne=2*z+1;for(z=0;16>z;++z)Ff(E,C+z,P,ne)&&ko(E,C+z,P)}function _p(E,C,P,z){var ne=2*z+1;for(z=0;16>z;++z)Ff(E,C+z*P,1,ne)&&ko(E,C+z*P,1)}function Au(E,C,P,z){var ne;for(ne=3;0<ne;--ne)Na(E,C+=4*P,P,z)}function vp(E,C,P,z){var ne;for(ne=3;0<ne;--ne)_p(E,C+=4,P,z)}function Fs(E,C,P,z,ne,se,le,ue){for(se=2*se+1;0<ne--;){if(es(E,C,P,se,le))if(gc(E,C,P,ue))ko(E,C,P);else{var fe=E,me=C,De=P,ze=fe[me-2*De],ye=fe[me-De],Re=fe[me+0],ke=fe[me+De],Ye=fe[me+2*De],Ge=27*(et=Ip[1020+3*(Re-ye)+Ip[1020+ze-ke]])+63>>7,Xe=18*et+63>>7,et=9*et+63>>7;fe[me-3*De]=fl[255+fe[me-3*De]+et],fe[me-2*De]=fl[255+ze+Xe],fe[me-De]=fl[255+ye+Ge],fe[me+0]=fl[255+Re-Ge],fe[me+De]=fl[255+ke-Xe],fe[me+2*De]=fl[255+Ye-et]}C+=z}}function Ru(E,C,P,z,ne,se,le,ue){for(se=2*se+1;0<ne--;){if(es(E,C,P,se,le))if(gc(E,C,P,ue))ko(E,C,P);else{var fe=E,me=C,De=P,ze=fe[me-De],ye=fe[me+0],Re=fe[me+De],ke=xw[112+(4+(Ye=3*(ye-ze))>>3)],Ye=xw[112+(Ye+3>>3)],Ge=ke+1>>1;fe[me-2*De]=fl[255+fe[me-2*De]+Ge],fe[me-De]=fl[255+ze+Ye],fe[me+0]=fl[255+ye-ke],fe[me+De]=fl[255+Re-Ge]}C+=z}}function fa(E,C,P,z,ne,se){Fs(E,C,P,1,16,z,ne,se)}function mc(E,C,P,z,ne,se){Fs(E,C,1,P,16,z,ne,se)}function dm(E,C,P,z,ne,se){var le;for(le=3;0<le;--le)Ru(E,C+=4*P,P,1,16,z,ne,se)}function R(E,C,P,z,ne,se){var le;for(le=3;0<le;--le)Ru(E,C+=4,1,P,16,z,ne,se)}function te(E,C,P,z,ne,se,le,ue){Fs(E,C,ne,1,8,se,le,ue),Fs(P,z,ne,1,8,se,le,ue)}function ge(E,C,P,z,ne,se,le,ue){Fs(E,C,1,ne,8,se,le,ue),Fs(P,z,1,ne,8,se,le,ue)}function Ee(E,C,P,z,ne,se,le,ue){Ru(E,C+4*ne,ne,1,8,se,le,ue),Ru(P,z+4*ne,ne,1,8,se,le,ue)}function Ne(E,C,P,z,ne,se,le,ue){Ru(E,C+4,1,ne,8,se,le,ue),Ru(P,z+4,1,ne,8,se,le,ue)}function Ke(){this.ba=new vn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Fn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function St(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ft(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new j,this.yc=new I}function rn(){this.xb=this.a=0,this.l=new Nf,this.ca=new vn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ft,this.ab=0,this.gc=s(4,St),this.Oc=0}function Sn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Nf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function rr(E,C,P,z,ne,se,le){for(E=E==null?0:E[C+0],C=0;C<le;++C)ne[se+C]=E+P[z+C]&255,E=ne[se+C]}function di(E,C,P,z,ne,se,le){var ue;if(E==null)rr(null,null,P,z,ne,se,le);else for(ue=0;ue<le;++ue)ne[se+ue]=E[C+ue]+P[z+ue]&255}function Ci(E,C,P,z,ne,se,le){if(E==null)rr(null,null,P,z,ne,se,le);else{var ue,fe=E[C+0],me=fe,De=fe;for(ue=0;ue<le;++ue)me=De+(fe=E[C+ue])-me,De=P[z+ue]+(-256&me?0>me?0:255:me)&255,me=fe,ne[se+ue]=De}}function zr(E,C,P,z){var ne=C.width,se=C.o;if(e(E!=null&&C!=null),0>P||0>=z||P+z>se)return null;if(!E.Cc){if(E.ga==null){var le;if(E.ga=new Sn,(le=E.ga==null)||(le=C.width*C.o,e(E.Gb.length==0),E.Gb=o(le),E.Uc=0,E.Gb==null?le=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,le=1),le=!le),!le){le=E.ga;var ue=E.Fa,fe=E.P,me=E.qc,De=E.mb,ze=E.nb,ye=fe+1,Re=me-1,ke=le.l;if(e(ue!=null&&De!=null&&C!=null),Vf[0]=null,Vf[1]=rr,Vf[2]=di,Vf[3]=Ci,le.ca=De,le.tb=ze,le.c=C.width,le.i=C.height,e(0<le.c&&0<le.i),1>=me)C=0;else if(le.$a=3&ue[fe+0],le.Z=ue[fe+0]>>2&3,le.Lc=ue[fe+0]>>4&3,fe=ue[fe+0]>>6&3,0>le.$a||1<le.$a||4<=le.Z||1<le.Lc||fe)C=0;else if(ke.put=Mt,ke.ac=oi,ke.bc=Mi,ke.ma=le,ke.width=C.width,ke.height=C.height,ke.Da=C.Da,ke.v=C.v,ke.va=C.va,ke.j=C.j,ke.o=C.o,le.$a)e:{e(le.$a==1),C=Ol();t:for(;;){if(C==null){C=0;break e}if(e(le!=null),le.mc=C,C.c=le.c,C.i=le.i,C.l=le.l,C.l.ma=le,C.l.width=le.c,C.l.height=le.i,C.a=0,K(C.m,ue,ye,Re),!Ls(le.c,le.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&ca(C.s)?(le.ic=1,ue=C.c*C.i,C.Ta=null,C.Ua=0,C.V=o(ue),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(le.ic=0,C=si(C,le.c)),!C))break t;C=1;break e}le.mc=null,C=0}else C=Re>=le.c*le.i;le=!C}if(le)return null;E.ga.Lc!=1?E.Ga=0:z=se-P}e(E.ga!=null),e(P+z<=se);e:{if(C=(ue=E.ga).c,se=ue.l.o,ue.$a==0){if(ye=E.rc,Re=E.Vc,ke=E.Fa,fe=E.P+1+P*C,me=E.mb,De=E.nb+P*C,e(fe<=E.P+E.qc),ue.Z!=0)for(e(Vf[ue.Z]!=null),le=0;le<z;++le)Vf[ue.Z](ye,Re,ke,fe,me,De,C),ye=me,Re=De,De+=C,fe+=C;else for(le=0;le<z;++le)r(me,De,ke,fe,C),ye=me,Re=De,De+=C,fe+=C;E.rc=ye,E.Vc=Re}else{if(e(ue.mc!=null),C=P+z,e((le=ue.mc)!=null),e(C<=le.i),le.C>=C)C=1;else if(ue.ic||cl(),ue.ic){ue=le.V,ye=le.Ba,Re=le.c;var Ye=le.i,Ge=(ke=1,fe=le.$/Re,me=le.$%Re,De=le.m,ze=le.s,le.$),Xe=Re*Ye,et=Re*C,ut=ze.wc,it=Ge<et?vo(ze,me,fe):null;e(Ge<=Xe),e(C<=Ye),e(ca(ze));t:for(;;){for(;!De.h&&Ge<et;){if(me&ut||(it=vo(ze,me,fe)),e(it!=null),xe(De),256>(Ye=nr(it.G[0],it.H[0],De)))ue[ye+Ge]=Ye,++Ge,++me>=Re&&(me=0,++fe<=C&&!(fe%16)&&No(le,fe));else{if(!(280>Ye)){ke=0;break t}Ye=In(Ye-256,De);var Ht,Pt=nr(it.G[4],it.H[4],De);if(xe(De),!(Ge>=(Pt=Cr(Re,Pt=In(Pt,De)))&&Xe-Ge>=Ye)){ke=0;break t}for(Ht=0;Ht<Ye;++Ht)ue[ye+Ge+Ht]=ue[ye+Ge+Ht-Pt];for(Ge+=Ye,me+=Ye;me>=Re;)me-=Re,++fe<=C&&!(fe%16)&&No(le,fe);Ge<et&&me&ut&&(it=vo(ze,me,fe))}e(De.h==pe(De))}No(le,fe>C?C:fe);break t}!ke||De.h&&Ge<Xe?(ke=0,le.a=De.h?5:3):le.$=Ge,C=ke}else C=Po(le,le.V,le.Ba,le.c,le.i,C,Df);if(!C){z=0;break e}}P+z>=se&&(E.Cc=1),z=1}if(!z)return null;if(E.Cc&&((z=E.ga)!=null&&(z.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+P*ne}function Ir(E,C,P,z,ne,se){for(;0<ne--;){var le,ue=E,fe=C+(P?1:0),me=E,De=C+(P?0:3);for(le=0;le<z;++le){var ze=me[De+4*le];ze!=255&&(ze*=32897,ue[fe+4*le+0]=ue[fe+4*le+0]*ze>>23,ue[fe+4*le+1]=ue[fe+4*le+1]*ze>>23,ue[fe+4*le+2]=ue[fe+4*le+2]*ze>>23)}C+=se}}function Li(E,C,P,z,ne){for(;0<z--;){var se;for(se=0;se<P;++se){var le=E[C+2*se+0],ue=15&(me=E[C+2*se+1]),fe=4369*ue,me=(240&me|me>>4)*fe>>16;E[C+2*se+0]=(240&le|le>>4)*fe>>16&240|(15&le|le<<4)*fe>>16>>4&15,E[C+2*se+1]=240&me|ue}C+=ne}}function Tr(E,C,P,z,ne,se,le,ue){var fe,me,De=255;for(me=0;me<ne;++me){for(fe=0;fe<z;++fe){var ze=E[C+fe];se[le+4*fe]=ze,De&=ze}C+=P,le+=ue}return De!=255}function da(E,C,P,z,ne){var se;for(se=0;se<ne;++se)P[z+se]=E[C+se]>>8}function cl(){hl=Ir,Gf=Li,M_=Tr,N_=da}function Ul(E,C,P){$[E]=function(z,ne,se,le,ue,fe,me,De,ze,ye,Re,ke,Ye,Ge,Xe,et,ut){var it,Ht=ut-1>>1,Pt=ue[fe+0]|me[De+0]<<16,jn=ze[ye+0]|Re[ke+0]<<16;e(z!=null);var Bt=3*Pt+jn+131074>>2;for(C(z[ne+0],255&Bt,Bt>>16,Ye,Ge),se!=null&&(Bt=3*jn+Pt+131074>>2,C(se[le+0],255&Bt,Bt>>16,Xe,et)),it=1;it<=Ht;++it){var hr=ue[fe+it]|me[De+it]<<16,jo=ze[ye+it]|Re[ke+it]<<16,Un=Pt+hr+jn+jo+524296,jt=Un+2*(hr+jn)>>3;Bt=jt+Pt>>1,Pt=(Un=Un+2*(Pt+jo)>>3)+hr>>1,C(z[ne+2*it-1],255&Bt,Bt>>16,Ye,Ge+(2*it-1)*P),C(z[ne+2*it-0],255&Pt,Pt>>16,Ye,Ge+(2*it-0)*P),se!=null&&(Bt=Un+jn>>1,Pt=jt+jo>>1,C(se[le+2*it-1],255&Bt,Bt>>16,Xe,et+(2*it-1)*P),C(se[le+2*it+0],255&Pt,Pt>>16,Xe,et+(2*it+0)*P)),Pt=hr,jn=jo}1&ut||(Bt=3*Pt+jn+131074>>2,C(z[ne+ut-1],255&Bt,Bt>>16,Ye,Ge+(ut-1)*P),se!=null&&(Bt=3*jn+Pt+131074>>2,C(se[le+ut-1],255&Bt,Bt>>16,Xe,et+(ut-1)*P)))}}function Bf(){Wl[ww]=RJ,Wl[Ew]=e8,Wl[XF]=MJ,Wl[bw]=t8,Wl[Sw]=n8,Wl[xD]=r8,Wl[ZF]=NJ,Wl[wD]=e8,Wl[ED]=t8,Wl[Cw]=n8,Wl[bD]=r8}function dh(E){return E&~PJ?0>E?0:255:E>>i8}function Gl(E,C){return dh((19077*E>>8)+(26149*C>>8)-14234)}function ph(E,C,P){return dh((19077*E>>8)-(6419*C>>8)-(13320*P>>8)+8708)}function gh(E,C){return dh((19077*E>>8)+(33050*C>>8)-17685)}function yc(E,C,P,z,ne){z[ne+0]=Gl(E,P),z[ne+1]=ph(E,C,P),z[ne+2]=gh(E,C)}function Oo(E,C,P,z,ne){z[ne+0]=gh(E,C),z[ne+1]=ph(E,C,P),z[ne+2]=Gl(E,P)}function mh(E,C,P,z,ne){var se=ph(E,C,P);C=se<<3&224|gh(E,C)>>3,z[ne+0]=248&Gl(E,P)|se>>5,z[ne+1]=C}function yh(E,C,P,z,ne){var se=240&gh(E,C)|15;z[ne+0]=240&Gl(E,P)|ph(E,C,P)>>4,z[ne+1]=se}function xp(E,C,P,z,ne){z[ne+0]=255,yc(E,C,P,z,ne+1)}function wp(E,C,P,z,ne){Oo(E,C,P,z,ne),z[ne+3]=255}function ts(E,C,P,z,ne){yc(E,C,P,z,ne),z[ne+3]=255}function Mu(E,C,P){$[E]=function(z,ne,se,le,ue,fe,me,De,ze){for(var ye=De+(-2&ze)*P;De!=ye;)C(z[ne+0],se[le+0],ue[fe+0],me,De),C(z[ne+1],se[le+0],ue[fe+0],me,De+P),ne+=2,++le,++fe,De+=2*P;1&ze&&C(z[ne+0],se[le+0],ue[fe+0],me,De)}}function _h(E,C,P){return P==0?E==0?C==0?6:5:C==0?4:0:P}function pm(E,C,P,z,ne){switch(E>>>30){case 3:w(C,P,z,ne,0);break;case 2:D(C,P,z,ne);break;case 1:H(C,P,z,ne)}}function Pa(E,C){var P,z,ne=C.M,se=C.Nb,le=E.oc,ue=E.pc+40,fe=E.oc,me=E.pc+584,De=E.oc,ze=E.pc+600;for(P=0;16>P;++P)le[ue+32*P-1]=129;for(P=0;8>P;++P)fe[me+32*P-1]=129,De[ze+32*P-1]=129;for(0<ne?le[ue-1-32]=fe[me-1-32]=De[ze-1-32]=129:(i(le,ue-32-1,127,21),i(fe,me-32-1,127,9),i(De,ze-32-1,127,9)),z=0;z<E.za;++z){var ye=C.ya[C.aa+z];if(0<z){for(P=-1;16>P;++P)r(le,ue+32*P-4,le,ue+32*P+12,4);for(P=-1;8>P;++P)r(fe,me+32*P-4,fe,me+32*P+4,4),r(De,ze+32*P-4,De,ze+32*P+4,4)}var Re=E.Gd,ke=E.Hd+z,Ye=ye.ad,Ge=ye.Hc;if(0<ne&&(r(le,ue-32,Re[ke].y,0,16),r(fe,me-32,Re[ke].f,0,8),r(De,ze-32,Re[ke].ea,0,8)),ye.Za){var Xe=le,et=ue-32+16;for(0<ne&&(z>=E.za-1?i(Xe,et,Re[ke].y[15],4):r(Xe,et,Re[ke+1].y,0,4)),P=0;4>P;P++)Xe[et+128+P]=Xe[et+256+P]=Xe[et+384+P]=Xe[et+0+P];for(P=0;16>P;++P,Ge<<=2)Xe=le,et=ue+s8[P],ku[ye.Ob[P]](Xe,et),pm(Ge,Ye,16*+P,Xe,et)}else if(Xe=_h(z,ne,ye.Ob[0]),zf[Xe](le,ue),Ge!=0)for(P=0;16>P;++P,Ge<<=2)pm(Ge,Ye,16*+P,le,ue+s8[P]);for(P=ye.Gc,Xe=_h(z,ne,ye.Dd),Eh[Xe](fe,me),Eh[Xe](De,ze),Ge=Ye,Xe=fe,et=me,255&(ye=0|P)&&(170&ye?O(Ge,256,Xe,et):ie(Ge,256,Xe,et)),ye=De,Ge=ze,255&(P>>=8)&&(170&P?O(Ye,320,ye,Ge):ie(Ye,320,ye,Ge)),ne<E.Ub-1&&(r(Re[ke].y,0,le,ue+480,16),r(Re[ke].f,0,fe,me+224,8),r(Re[ke].ea,0,De,ze+224,8)),P=8*se*E.B,Re=E.sa,ke=E.ta+16*z+16*se*E.R,Ye=E.qa,ye=E.ra+8*z+P,Ge=E.Ha,Xe=E.Ia+8*z+P,P=0;16>P;++P)r(Re,ke+P*E.R,le,ue+32*P,16);for(P=0;8>P;++P)r(Ye,ye+P*E.B,fe,me+32*P,8),r(Ge,Xe+P*E.B,De,ze+32*P,8)}}function vh(E,C,P,z,ne,se,le,ue,fe){var me=[0],De=[0],ze=0,ye=fe!=null?fe.kd:0,Re=fe??new tt;if(E==null||12>P)return 7;Re.data=E,Re.w=C,Re.ha=P,C=[C],P=[P],Re.gb=[Re.gb];e:{var ke=C,Ye=P,Ge=Re.gb;if(e(E!=null),e(Ye!=null),e(Ge!=null),Ge[0]=0,12<=Ye[0]&&!t(E,ke[0],"RIFF")){if(t(E,ke[0]+8,"WEBP")){Ge=3;break e}var Xe=Ie(E,ke[0]+4);if(12>Xe||4294967286<Xe){Ge=3;break e}if(ye&&Xe>Ye[0]-8){Ge=7;break e}Ge[0]=Xe,ke[0]+=12,Ye[0]-=12}Ge=0}if(Ge!=0)return Ge;for(Xe=0<Re.gb[0],P=P[0];;){e:{var et=E;Ye=C,Ge=P;var ut=me,it=De,Ht=ke=[0];if((Bt=ze=[ze])[0]=0,8>Ge[0])Ge=7;else{if(!t(et,Ye[0],"VP8X")){if(Ie(et,Ye[0]+4)!=10){Ge=3;break e}if(18>Ge[0]){Ge=7;break e}var Pt=Ie(et,Ye[0]+8),jn=1+be(et,Ye[0]+12);if(2147483648<=jn*(et=1+be(et,Ye[0]+15))){Ge=3;break e}Ht!=null&&(Ht[0]=Pt),ut!=null&&(ut[0]=jn),it!=null&&(it[0]=et),Ye[0]+=18,Ge[0]-=18,Bt[0]=1}Ge=0}}if(ze=ze[0],ke=ke[0],Ge!=0)return Ge;if(Ye=!!(2&ke),!Xe&&ze)return 3;if(se!=null&&(se[0]=!!(16&ke)),le!=null&&(le[0]=Ye),ue!=null&&(ue[0]=0),le=me[0],ke=De[0],ze&&Ye&&fe==null){Ge=0;break}if(4>P){Ge=7;break}if(Xe&&ze||!Xe&&!ze&&!t(E,C[0],"ALPH")){P=[P],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{Pt=E,Ge=C,Xe=P;var Bt=Re.gb;ut=Re.na,it=Re.P,Ht=Re.Sa,jn=22,e(Pt!=null),e(Xe!=null),et=Ge[0];var hr=Xe[0];for(e(ut!=null),e(Ht!=null),ut[0]=null,it[0]=null,Ht[0]=0;;){if(Ge[0]=et,Xe[0]=hr,8>hr){Ge=7;break e}var jo=Ie(Pt,et+4);if(4294967286<jo){Ge=3;break e}var Un=8+jo+1&-2;if(jn+=Un,0<Bt&&jn>Bt){Ge=3;break e}if(!t(Pt,et,"VP8 ")||!t(Pt,et,"VP8L")){Ge=0;break e}if(hr[0]<Un){Ge=7;break e}t(Pt,et,"ALPH")||(ut[0]=Pt,it[0]=et+8,Ht[0]=jo),et+=Un,hr-=Un}}if(P=P[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ge!=0)break}P=[P],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(Bt=E,Ge=C,Xe=P,ut=Re.gb[0],it=Re.Ja,Ht=Re.xa,Pt=Ge[0],et=!t(Bt,Pt,"VP8 "),jn=!t(Bt,Pt,"VP8L"),e(Bt!=null),e(Xe!=null),e(it!=null),e(Ht!=null),8>Xe[0])Ge=7;else{if(et||jn){if(Bt=Ie(Bt,Pt+4),12<=ut&&Bt>ut-12){Ge=3;break e}if(ye&&Bt>Xe[0]-8){Ge=7;break e}it[0]=Bt,Ge[0]+=8,Xe[0]-=8,Ht[0]=jn}else Ht[0]=5<=Xe[0]&&Bt[Pt+0]==47&&!(Bt[Pt+4]>>5),it[0]=Xe[0];Ge=0}if(P=P[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],C=C[0],Ge!=0)break;if(4294967286<Re.Ja)return 3;if(ue==null||Ye||(ue[0]=Re.xa?2:1),le=[le],ke=[ke],Re.xa){if(5>P){Ge=7;break}ue=le,ye=ke,Ye=se,E==null||5>P?E=0:5<=P&&E[C+0]==47&&!(E[C+4]>>5)?(Xe=[0],Bt=[0],ut=[0],K(it=new ee,E,C,P),Hi(it,Xe,Bt,ut)?(ue!=null&&(ue[0]=Xe[0]),ye!=null&&(ye[0]=Bt[0]),Ye!=null&&(Ye[0]=ut[0]),E=1):E=0):E=0}else{if(10>P){Ge=7;break}ue=ke,E==null||10>P||!ch(E,C+3,P-3)?E=0:(ye=E[C+0]|E[C+1]<<8|E[C+2]<<16,Ye=16383&(E[C+7]<<8|E[C+6]),E=16383&(E[C+9]<<8|E[C+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Re.Ja||!Ye||!E?E=0:(le&&(le[0]=Ye),ue&&(ue[0]=E),E=1))}if(!E||(le=le[0],ke=ke[0],ze&&(me[0]!=le||De[0]!=ke)))return 3;fe!=null&&(fe[0]=Re,fe.offset=C-fe.w,e(4294967286>C-fe.w),e(fe.offset==fe.ha-P));break}return Ge==0||Ge==7&&ze&&fe==null?(se!=null&&(se[0]|=Re.na!=null&&0<Re.na.length),z!=null&&(z[0]=le),ne!=null&&(ne[0]=ke),0):Ge}function Ep(E,C,P){var z=C.width,ne=C.height,se=0,le=0,ue=z,fe=ne;if(C.Da=E!=null&&0<E.Da,C.Da&&(ue=E.cd,fe=E.bd,se=E.v,le=E.j,11>P||(se&=-2,le&=-2),0>se||0>le||0>=ue||0>=fe||se+ue>z||le+fe>ne))return 0;if(C.v=se,C.j=le,C.va=se+ue,C.o=le+fe,C.U=ue,C.T=fe,C.da=E!=null&&0<E.da,C.da){if(!Fe(ue,fe,P=[E.ib],se=[E.hb]))return 0;C.ib=P[0],C.hb=se[0]}return C.ob=E!=null&&E.ob,C.Kb=E==null||!E.Sd,C.da&&(C.ob=C.ib<3*z/4&&C.hb<3*ne/4,C.Kb=0),1}function bp(E){if(E==null)return 2;if(11>E.S){var C=E.f.RGBA;C.fb+=(E.height-1)*C.A,C.A=-C.A}else C=E.f.kb,E=E.height,C.O+=(E-1)*C.fa,C.fa=-C.fa,C.N+=(E-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(E-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(E-1)*C.lb,C.lb=-C.lb);return 0}function _c(E,C,P,z){if(z==null||0>=E||0>=C)return 2;if(P!=null){if(P.Da){var ne=P.cd,se=P.bd,le=-2&P.v,ue=-2&P.j;if(0>le||0>ue||0>=ne||0>=se||le+ne>E||ue+se>C)return 2;E=ne,C=se}if(P.da){if(!Fe(E,C,ne=[P.ib],se=[P.hb]))return 2;E=ne[0],C=se[0]}}z.width=E,z.height=C;e:{var fe=z.width,me=z.height;if(E=z.S,0>=fe||0>=me||!(E>=ww&&13>E))E=2;else{if(0>=z.Rd&&z.sd==null){le=se=ne=C=0;var De=(ue=fe*a8[E])*me;if(11>E||(se=(me+1)/2*(C=(fe+1)/2),E==12&&(le=(ne=fe)*me)),(me=o(De+2*se+le))==null){E=1;break e}z.sd=me,11>E?((fe=z.f.RGBA).eb=me,fe.fb=0,fe.A=ue,fe.size=De):((fe=z.f.kb).y=me,fe.O=0,fe.fa=ue,fe.Fd=De,fe.f=me,fe.N=0+De,fe.Ab=C,fe.Cd=se,fe.ea=me,fe.W=0+De+se,fe.Db=C,fe.Ed=se,E==12&&(fe.F=me,fe.J=0+De+2*se),fe.Tc=le,fe.lb=ne)}if(C=1,ne=z.S,se=z.width,le=z.height,ne>=ww&&13>ne)if(11>ne)E=z.f.RGBA,C&=(ue=Math.abs(E.A))*(le-1)+se<=E.size,C&=ue>=se*a8[ne],C&=E.eb!=null;else{E=z.f.kb,ue=(se+1)/2,De=(le+1)/2,fe=Math.abs(E.fa),me=Math.abs(E.Ab);var ze=Math.abs(E.Db),ye=Math.abs(E.lb),Re=ye*(le-1)+se;C&=fe*(le-1)+se<=E.Fd,C&=me*(De-1)+ue<=E.Cd,C=(C&=ze*(De-1)+ue<=E.Ed)&fe>=se&me>=ue&ze>=ue,C&=E.y!=null,C&=E.f!=null,C&=E.ea!=null,ne==12&&(C&=ye>=se,C&=Re<=E.Tc,C&=E.F!=null)}else C=0;E=C?0:2}}return E!=0||P!=null&&P.fd&&(E=bp(z)),E}var xh=64,Bs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],js=24,Nu=32,Pu=8,Lu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(E){return E},$.Predictor2=function(E,C,P){return C[P+0]},$.Predictor3=function(E,C,P){return C[P+1]},$.Predictor4=function(E,C,P){return C[P-1]},$.Predictor5=function(E,C,P){return Be(Be(E,C[P+1]),C[P+0])},$.Predictor6=function(E,C,P){return Be(E,C[P-1])},$.Predictor7=function(E,C,P){return Be(E,C[P+0])},$.Predictor8=function(E,C,P){return Be(C[P-1],C[P+0])},$.Predictor9=function(E,C,P){return Be(C[P+0],C[P+1])},$.Predictor10=function(E,C,P){return Be(Be(E,C[P-1]),Be(C[P+0],C[P+1]))},$.Predictor11=function(E,C,P){var z=C[P+0];return 0>=qe(z>>24&255,E>>24&255,(C=C[P-1])>>24&255)+qe(z>>16&255,E>>16&255,C>>16&255)+qe(z>>8&255,E>>8&255,C>>8&255)+qe(255&z,255&E,255&C)?z:E},$.Predictor12=function(E,C,P){var z=C[P+0];return(pt((E>>24&255)+(z>>24&255)-((C=C[P-1])>>24&255))<<24|pt((E>>16&255)+(z>>16&255)-(C>>16&255))<<16|pt((E>>8&255)+(z>>8&255)-(C>>8&255))<<8|pt((255&E)+(255&z)-(255&C)))>>>0},$.Predictor13=function(E,C,P){var z=C[P-1];return(Tt((E=Be(E,C[P+0]))>>24&255,z>>24&255)<<24|Tt(E>>16&255,z>>16&255)<<16|Tt(E>>8&255,z>>8&255)<<8|Tt(255&E,255&z))>>>0};var wh=$.PredictorAdd0;$.PredictorAdd1=qt,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var jf=$.PredictorAdd2;ft("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var Ii,Sp=$.ColorIndexInverseTransform,zl=$.MapARGB,Vl=$.VP8LColorIndexInverseTransformAlpha,Hl=$.MapAlpha,Cp=$.VP8LPredictorsAdd=[];Cp.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var Uf,ns,Fo,m,u,h,g,w,D,O,H,ie,de,Te,Pe,nt,vt,Rt,Wt,ir,Kn,Lr,Eo,Bo,hl,Gf,M_,N_,P_=o(511),L_=o(2041),k_=o(225),O_=o(767),gm=0,Ip=L_,xw=k_,fl=O_,ql=P_,ww=0,Ew=1,XF=2,bw=3,Sw=4,xD=5,ZF=6,wD=7,ED=8,Cw=9,bD=10,mJ=[2,3,7],yJ=[3,3,11],KF=[280,256,256,256,40],_J=[0,1,1,1,0],vJ=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],xJ=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],wJ=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],EJ=8,SD=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],CD=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],F_=null,bJ=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],SJ=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],JF=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],CJ=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],IJ=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],TJ=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],DJ=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zf=[],ku=[],Eh=[],AJ=1,QF=2,Vf=[],Wl=[];Ul("UpsampleRgbLinePair",yc,3),Ul("UpsampleBgrLinePair",Oo,3),Ul("UpsampleRgbaLinePair",ts,4),Ul("UpsampleBgraLinePair",wp,4),Ul("UpsampleArgbLinePair",xp,4),Ul("UpsampleRgba4444LinePair",yh,2),Ul("UpsampleRgb565LinePair",mh,2);var RJ=$.UpsampleRgbLinePair,MJ=$.UpsampleBgrLinePair,e8=$.UpsampleRgbaLinePair,t8=$.UpsampleBgraLinePair,n8=$.UpsampleArgbLinePair,r8=$.UpsampleRgba4444LinePair,NJ=$.UpsampleRgb565LinePair,Iw=16,Tw=1<<Iw-1,B_=-227,ID=482,i8=6,PJ=(256<<i8)-1,o8=0,LJ=o(256),kJ=o(256),OJ=o(256),FJ=o(256),BJ=o(ID-B_),jJ=o(ID-B_);Mu("YuvToRgbRow",yc,3),Mu("YuvToBgrRow",Oo,3),Mu("YuvToRgbaRow",ts,4),Mu("YuvToBgraRow",wp,4),Mu("YuvToArgbRow",xp,4),Mu("YuvToRgba4444Row",yh,2),Mu("YuvToRgb565Row",mh,2);var s8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dw=[0,2,8],UJ=[8,7,6,4,4,2,2,2,1,1,1,1],GJ=1;this.WebPDecodeRGBA=function(E,C,P,z,ne){var se=Ew,le=new Ke,ue=new vn;le.ba=ue,ue.S=se,ue.width=[ue.width],ue.height=[ue.height];var fe=ue.width,me=ue.height,De=new $t;if(De==null||E==null)var ze=2;else e(De!=null),ze=vh(E,C,P,De.width,De.height,De.Pd,De.Qd,De.format,null);if(ze!=0?fe=0:(fe!=null&&(fe[0]=De.width[0]),me!=null&&(me[0]=De.height[0]),fe=1),fe){ue.width=ue.width[0],ue.height=ue.height[0],z!=null&&(z[0]=ue.width),ne!=null&&(ne[0]=ue.height);e:{if(z=new Nf,(ne=new tt).data=E,ne.w=C,ne.ha=P,ne.kd=1,C=[0],e(ne!=null),((E=vh(ne.data,ne.w,ne.ha,null,null,null,C,null,ne))==0||E==7)&&C[0]&&(E=4),(C=E)==0){if(e(le!=null),z.data=ne.data,z.w=ne.w+ne.offset,z.ha=ne.ha-ne.offset,z.put=Mt,z.ac=oi,z.bc=Mi,z.ma=le,ne.xa){if((E=Ol())==null){le=1;break e}if((function(ye,Re){var ke=[0],Ye=[0],Ge=[0];t:for(;;){if(ye==null)return 0;if(Re==null)return ye.a=2,0;if(ye.l=Re,ye.a=0,K(ye.m,Re.data,Re.w,Re.ha),!Hi(ye.m,ke,Ye,Ge)){ye.a=3;break t}if(ye.xb=QF,Re.width=ke[0],Re.height=Ye[0],!Ls(ke[0],Ye[0],1,ye,null))break t;return 1}return e(ye.a!=0),0})(E,z)){if(z=(C=_c(z.width,z.height,le.Oa,le.ba))==0){t:{z=E;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((P=z.l)!=null),e((ne=P.ma)!=null),z.xb!=0){if(z.ca=ne.ba,z.tb=ne.tb,e(z.ca!=null),!Ep(ne.Oa,P,bw)){z.a=2;break n}if(!si(z,P.width)||P.da)break n;if((P.da||At(z.ca.S))&&cl(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&cl()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!U(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!Po(z,z.V,z.Ba,z.c,z.i,P.o,Wi))break n;ne.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(C=E.a)}else C=E.a}else{if((E=new om)==null){le=1;break e}if(E.Fa=ne.na,E.P=ne.P,E.qc=ne.Sa,xo(E,z)){if((C=_c(z.width,z.height,le.Oa,le.ba))==0){if(E.Aa=0,P=le.Oa,e((ne=E)!=null),P!=null){if(0<(fe=0>(fe=P.Md)?0:100<fe?255:255*fe/100)){for(me=De=0;4>me;++me)12>(ze=ne.pb[me]).lc&&(ze.ia=fe*UJ[0>ze.lc?0:ze.lc]>>3),De|=ze.ia;De&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=P.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}(function(ye,Re){if(ye==null)return 0;if(Re==null)return Ni(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!xo(ye,Re))return 0;if(e(ye.cb),Re.ac==null||Re.ac(Re)){Re.ob&&(ye.L=0);var ke=Dw[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Re.v-ke>>4,ye.zb=Re.j-ke>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Re.o+15+ke>>4,ye.Hb=Re.va+15+ke>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var Ye=ye.ed;for(ke=0;4>ke;++ke){var Ge;if(ye.Qa.Cb){var Xe=ye.Qa.Lb[ke];ye.Qa.Fb||(Xe+=Ye.Tb)}else Xe=Ye.Tb;for(Ge=0;1>=Ge;++Ge){var et=ye.gd[ke][Ge],ut=Xe;if(Ye.Pc&&(ut+=Ye.vd[0],Ge&&(ut+=Ye.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var it=ut;0<Ye.wb&&(it=4<Ye.wb?it>>2:it>>1)>9-Ye.wb&&(it=9-Ye.wb),1>it&&(it=1),et.dd=it,et.tc=2*ut+it,et.ld=40<=ut?2:15<=ut?1:0}else et.tc=0;et.La=Ge}}}ke=0}else Ni(ye,6,"Frame setup failed"),ke=ye.a;if(ke=ke==0){if(ke){ye.$c=0,0<ye.Aa||(ye.Ic=GJ);t:{ke=ye.Ic,Ye=4*(it=ye.za);var Ht=32*it,Pt=it+1,jn=0<ye.L?it*(0<ye.Aa?2:1):0,Bt=(ye.Aa==2?2:1)*it;if((et=Ye+832+(Ge=3*(16*ke+Dw[ye.L])/2*Ht)+(Xe=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=et)ke=0;else{if(et>ye.Vb){if(ye.Vb=0,ye.Ec=o(et),ye.Fc=0,ye.Ec==null){ke=Ni(ye,1,"no memory during frame initialization.");break t}ye.Vb=et}et=ye.Ec,ut=ye.Fc,ye.Ac=et,ye.Bc=ut,ut+=Ye,ye.Gd=s(Ht,Mf),ye.Hd=0,ye.rb=s(Pt+1,hs),ye.sb=1,ye.wa=jn?s(jn,Ma):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=it),e(!0),ye.oc=et,ye.pc=ut,ut+=832,ye.ya=s(Bt,uh),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=it),ye.R=16*it,ye.B=8*it,it=(Ht=Dw[ye.L])*ye.R,Ht=Ht/2*ye.B,ye.sa=et,ye.ta=ut+it,ye.qa=ye.sa,ye.ra=ye.ta+16*ke*ye.R+Ht,ye.Ha=ye.qa,ye.Ia=ye.ra+8*ke*ye.B+Ht,ye.$c=0,ut+=Ge,ye.mb=Xe?et:null,ye.nb=Xe?ut:null,e(ut+Xe<=ye.Fc+ye.Vb),cp(ye),i(ye.Ac,ye.Bc,0,Ye),ke=1}}if(ke){if(Re.ka=0,Re.y=ye.sa,Re.O=ye.ta,Re.f=ye.qa,Re.N=ye.ra,Re.ea=ye.Ha,Re.Vd=ye.Ia,Re.fa=ye.R,Re.Rc=ye.B,Re.F=null,Re.J=0,!gm){for(ke=-255;255>=ke;++ke)P_[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)L_[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)k_[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)O_[255+ke]=0>ke?0:255<ke?255:ke;gm=1}g=hh,w=am,O=ks,H=hp,ie=lm,D=D_,de=fa,Te=mc,Pe=te,nt=ge,vt=dm,Rt=R,Wt=Ee,ir=Ne,Kn=Na,Lr=_p,Eo=Au,Bo=vp,ku[0]=um,ku[1]=fp,ku[2]=Lf,ku[3]=R_,ku[4]=Bn,ku[5]=gp,ku[6]=wo,ku[7]=cm,ku[8]=kf,ku[9]=jl,zf[0]=Os,zf[1]=Du,zf[2]=dp,zf[3]=Pf,zf[4]=Bl,zf[5]=pp,zf[6]=A_,Eh[0]=fm,Eh[1]=Jr,Eh[2]=Pi,Eh[3]=hm,Eh[4]=mp,Eh[5]=Of,Eh[6]=yp,ke=1}else ke=0}ke&&(ke=(function(hr,jo){for(hr.M=0;hr.M<hr.Va;++hr.M){var Un,jt=hr.Jc[hr.M&hr.Xb],wt=hr.m,io=hr;for(Un=0;Un<io.za;++Un){var Tn=wt,pr=io,xi=pr.Ac,fs=pr.Bc+4*Un,pa=pr.zc,$i=pr.ya[pr.aa+Un];if(pr.Qa.Bb?$i.$b=re(Tn,pr.Pa.jb[0])?2+re(Tn,pr.Pa.jb[2]):re(Tn,pr.Pa.jb[1]):$i.$b=0,pr.kc&&($i.Ad=re(Tn,pr.Bd)),$i.Za=!re(Tn,145)+0,$i.Za){var Us=$i.Ob,ga=0;for(pr=0;4>pr;++pr){var Uo,yr=pa[0+pr];for(Uo=0;4>Uo;++Uo){yr=IJ[xi[fs+Uo]][yr];for(var Vr=JF[re(Tn,yr[0])];0<Vr;)Vr=JF[2*Vr+re(Tn,yr[Vr])];yr=-Vr,xi[fs+Uo]=yr}r(Us,ga,xi,fs,4),ga+=4,pa[0+pr]=yr}}else yr=re(Tn,156)?re(Tn,128)?1:3:re(Tn,163)?2:0,$i.Ob[0]=yr,i(xi,fs,yr,4),i(pa,0,yr,4);$i.Dd=re(Tn,142)?re(Tn,114)?re(Tn,183)?1:3:2:0}if(io.m.Ka)return Ni(hr,7,"Premature end-of-partition0 encountered.");for(;hr.ja<hr.za;++hr.ja){if(io=jt,Tn=(wt=hr).rb[wt.sb-1],xi=wt.rb[wt.sb+wt.ja],Un=wt.ya[wt.aa+wt.ja],fs=wt.kc?Un.Ad:0)Tn.la=xi.la=0,Un.Za||(Tn.Na=xi.Na=0),Un.Hc=0,Un.Gc=0,Un.ia=0;else{var Yi,Hr;if(Tn=xi,xi=io,fs=wt.Pa.Xc,pa=wt.ya[wt.aa+wt.ja],$i=wt.pb[pa.$b],pr=pa.ad,Us=0,ga=wt.rb[wt.sb-1],yr=Uo=0,i(pr,Us,0,384),pa.Za)var ds=0,Ou=fs[3];else{Vr=o(16);var oo=Tn.Na+ga.Na;if(oo=F_(xi,fs[1],oo,$i.Eb,0,Vr,0),Tn.Na=ga.Na=(0<oo)+0,1<oo)g(Vr,0,pr,Us);else{var La=Vr[0]+3>>3;for(Vr=0;256>Vr;Vr+=16)pr[Us+Vr]=La}ds=1,Ou=fs[0]}var ai=15&Tn.la,Go=15&ga.la;for(Vr=0;4>Vr;++Vr){var dl=1&Go;for(La=Hr=0;4>La;++La)ai=ai>>1|(dl=(oo=F_(xi,Ou,oo=dl+(1&ai),$i.Sc,ds,pr,Us))>ds)<<7,Hr=Hr<<2|(3<oo?3:1<oo?2:pr[Us+0]!=0),Us+=16;ai>>=4,Go=Go>>1|dl<<7,Uo=(Uo<<8|Hr)>>>0}for(Ou=ai,ds=Go>>4,Yi=0;4>Yi;Yi+=2){for(Hr=0,ai=Tn.la>>4+Yi,Go=ga.la>>4+Yi,Vr=0;2>Vr;++Vr){for(dl=1&Go,La=0;2>La;++La)oo=dl+(1&ai),ai=ai>>1|(dl=0<(oo=F_(xi,fs[2],oo,$i.Qc,0,pr,Us)))<<3,Hr=Hr<<2|(3<oo?3:1<oo?2:pr[Us+0]!=0),Us+=16;ai>>=2,Go=Go>>1|dl<<5}yr|=Hr<<4*Yi,Ou|=ai<<4<<Yi,ds|=(240&Go)<<Yi}Tn.la=Ou,ga.la=ds,pa.Hc=Uo,pa.Gc=yr,pa.ia=43690&yr?0:$i.ia,fs=!(Uo|yr)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[Un.$b][Un.Za],wt.wa[wt.Y+wt.ja].La|=!fs),io.Ka)return Ni(hr,7,"Premature end-of-file encountered.")}if(cp(hr),wt=jo,io=1,Un=(jt=hr).D,Tn=0<jt.L&&jt.M>=jt.zb&&jt.M<=jt.Va,jt.Aa==0)t:{if(Un.M=jt.M,Un.uc=Tn,Pa(jt,Un),io=1,Un=(Hr=jt.D).Nb,Tn=(yr=Dw[jt.L])*jt.R,xi=yr/2*jt.B,Vr=16*Un*jt.R,La=8*Un*jt.B,fs=jt.sa,pa=jt.ta-Tn+Vr,$i=jt.qa,pr=jt.ra-xi+La,Us=jt.Ha,ga=jt.Ia-xi+La,Go=(ai=Hr.M)==0,Uo=ai>=jt.Va-1,jt.Aa==2&&Pa(jt,Hr),Hr.uc)for(dl=(oo=jt).D.M,e(oo.D.uc),Hr=oo.yb;Hr<oo.Hb;++Hr){ds=Hr,Ou=dl;var ma=(pl=(ps=oo).D).Nb;Yi=ps.R;var pl=pl.wa[pl.Y+ds],gl=ps.sa,ka=ps.ta+16*ma*Yi+16*ds,ml=pl.dd,pi=pl.tc;if(pi!=0)if(e(3<=pi),ps.L==1)0<ds&&Lr(gl,ka,Yi,pi+4),pl.La&&Bo(gl,ka,Yi,pi),0<Ou&&Kn(gl,ka,Yi,pi+4),pl.La&&Eo(gl,ka,Yi,pi);else{var yl=ps.B,Fu=ps.qa,Tp=ps.ra+8*ma*yl+8*ds,bh=ps.Ha,ps=ps.Ia+8*ma*yl+8*ds;ma=pl.ld,0<ds&&(Te(gl,ka,Yi,pi+4,ml,ma),nt(Fu,Tp,bh,ps,yl,pi+4,ml,ma)),pl.La&&(Rt(gl,ka,Yi,pi,ml,ma),ir(Fu,Tp,bh,ps,yl,pi,ml,ma)),0<Ou&&(de(gl,ka,Yi,pi+4,ml,ma),Pe(Fu,Tp,bh,ps,yl,pi+4,ml,ma)),pl.La&&(vt(gl,ka,Yi,pi,ml,ma),Wt(Fu,Tp,bh,ps,yl,pi,ml,ma))}}if(jt.ia&&alert("todo:DitherRow"),wt.put!=null){if(Hr=16*ai,ai=16*(ai+1),Go?(wt.y=jt.sa,wt.O=jt.ta+Vr,wt.f=jt.qa,wt.N=jt.ra+La,wt.ea=jt.Ha,wt.W=jt.Ia+La):(Hr-=yr,wt.y=fs,wt.O=pa,wt.f=$i,wt.N=pr,wt.ea=Us,wt.W=ga),Uo||(ai-=yr),ai>wt.o&&(ai=wt.o),wt.F=null,wt.J=null,jt.Fa!=null&&0<jt.Fa.length&&Hr<ai&&(wt.J=zr(jt,wt,Hr,ai-Hr),wt.F=jt.mb,wt.F==null&&wt.F.length==0)){io=Ni(jt,3,"Could not decode alpha data.");break t}Hr<wt.j&&(yr=wt.j-Hr,Hr=wt.j,e(!(1&yr)),wt.O+=jt.R*yr,wt.N+=jt.B*(yr>>1),wt.W+=jt.B*(yr>>1),wt.F!=null&&(wt.J+=wt.width*yr)),Hr<ai&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=Hr-wt.j,wt.U=wt.va-wt.v,wt.T=ai-Hr,io=wt.put(wt))}Un+1!=jt.Ic||Uo||(r(jt.sa,jt.ta-Tn,fs,pa+16*jt.R,Tn),r(jt.qa,jt.ra-xi,$i,pr+8*jt.B,xi),r(jt.Ha,jt.Ia-xi,Us,ga+8*jt.B,xi))}if(!io)return Ni(hr,6,"Output aborted.")}return 1})(ye,Re)),Re.bc!=null&&Re.bc(Re),ke&=1}return ke?(ye.cb=0,ke):0})(E,z)||(C=E.a)}}else C=E.a}C==0&&le.Oa!=null&&le.Oa.fd&&(C=bp(le.ba))}le=C}se=le!=0?null:11>se?ue.f.RGBA.eb:ue.f.kb.y}else se=null;return se};var a8=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c($,V){for(var B="",v=0;v<4;v++)B+=String.fromCharCode($[V++]);return B}function f($,V){return $[V+0]|$[V+1]<<8}function d($,V){return($[V+0]|$[V+1]<<8|$[V+2]<<16)>>>0}function y($,V){return($[V+0]|$[V+1]<<8|$[V+2]<<16|$[V+3]<<24)>>>0}new l;var p=[0],_=[0],x=[],b=new l,S=n,T=(function($,V){var B={},v=0,I=!1,M=0,j=0;if(B.frames=[],!(function(F,ee){for(var ce=0;ce<4;ce++)if(F[ee+ce]!="RIFF".charCodeAt(ce))return!0;return!1})($,V)){for(y($,V+=4),V+=8;V<$.length;){var Q=c($,V),Z=y($,V+=4);V+=4;var q=Z+(1&Z);switch(Q){case"VP8 ":case"VP8L":B.frames[v]===void 0&&(B.frames[v]={}),(_e=B.frames[v]).src_off=I?j:V-8,_e.src_size=M+Z+8,v++,I&&(I=!1,M=0,j=0);break;case"VP8X":(_e=B.header={}).feature_flags=$[V];var K=V+4;_e.canvas_width=1+d($,K),K+=3,_e.canvas_height=1+d($,K),K+=3;break;case"ALPH":I=!0,M=q+8,j=V-8;break;case"ANIM":(_e=B.header).bgcolor=y($,V),K=V+4,_e.loop_count=f($,K),K+=2;break;case"ANMF":var oe,_e;(_e=B.frames[v]={}).offset_x=2*d($,V),V+=3,_e.offset_y=2*d($,V),V+=3,_e.width=1+d($,V),V+=3,_e.height=1+d($,V),V+=3,_e.duration=d($,V),V+=3,oe=$[V++],_e.dispose=1&oe,_e.blend=oe>>1&1}Q!="ANMF"&&(V+=q)}return B}})(S,0);T.response=S,T.rgbaoutput=!0,T.dataurl=!1;var A=T.header?T.header:null,N=T.frames?T.frames:null;if(A){A.loop_counter=A.loop_count,p=[A.canvas_height],_=[A.canvas_width];for(var k=0;k<N.length&&N[k].blend!=0;k++);}var W=N[0],X=b.WebPDecodeRGBA(S,W.src_off,W.src_size,_,p);W.rgba=X,W.imgwidth=_[0],W.imgheight=p[0];for(var Y=0;Y<_[0]*p[0]*4;Y++)x[Y]=X[Y];return this.width=_,this.height=p,this.data=x,this}(function(n){var e,t,r,i,o,s,a,l,c,f=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new s,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new s,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var d=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=F;Object.defineProperty(this,"pdf",{get:function(){return ee}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(U){ce=!!U}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(U){pe=!!U}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(U){isNaN(U)||(J=U)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(U){isNaN(U)||(xe=U)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(U){var ae;typeof U=="number"?ae=[U,U,U,U]:((ae=new Array(4))[0]=U[0],ae[1]=U.length>=2?U[1]:ae[0],ae[2]=U.length>=3?U[2]:ae[0],ae[3]=U.length>=4?U[3]:ae[1]),c.margin=ae}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(U){Se=U}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(U){ve=U}});var re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return re},set:function(U){re=U}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(U){U instanceof f&&(c=U)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(U){c.path=U}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(U){He=U}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(U){var ae;ae=y(U),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(U){var ae=y(U);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(U){["butt","round","square"].indexOf(U)!==-1&&(this.ctx.lineCap=U,this.pdf.setLineCap(U))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(U){isNaN(U)||(this.ctx.lineWidth=U,this.pdf.setLineWidth(U))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(U){["bevel","round","miter"].indexOf(U)!==-1&&(this.ctx.lineJoin=U,this.pdf.setLineJoin(U))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(U){isNaN(U)||(this.ctx.miterLimit=U,this.pdf.setMiterLimit(U))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(U){this.ctx.textBaseline=U}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(U){["right","end","center","left","start"].indexOf(U)!==-1&&(this.ctx.textAlign=U)}});var G=null,be=null,Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(U){G=null,be=null,Ie=U}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(U){var ae;if(this.ctx.font=U,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(U))!==null){var he=ae[1];ae[2];var Fe=ae[3],Ce=ae[4];ae[5];var we=ae[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(Ue==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var Le=(function(ft){var Pr,mt,Zt=[],hn=ft.trim();if(hn==="")return E3;if(hn in EY)return[EY[hn]];for(;hn!=="";){switch(mt=null,Pr=(hn=SY(hn)).charAt(0)){case'"':case"'":mt=Gye(hn.substring(1),Pr);break;default:mt=zye(hn)}if(mt===null||(Zt.push(mt[0]),(hn=SY(mt[1]))!==""&&hn.charAt(0)!==","))return E3;hn=hn.replace(/^,/,"")}return Zt})(we);if(this.fontFaces){var Be=(function(ft,Pr){var mt=ft.getFontList(),Zt=JSON.stringify(mt);if(G===null||be!==Zt){var hn=(function(dr){var Dt=[];return Object.keys(dr).forEach(function(sr){dr[sr].forEach(function(At){var Vt=null;switch(At){case"bold":Vt={family:sr,weight:"bold"};break;case"italic":Vt={family:sr,style:"italic"};break;case"bolditalic":Vt={family:sr,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:sr}}Vt!==null&&(Vt.ref={name:sr,style:At},Dt.push(Vt))})}),Dt})(mt);G=(function(dr){for(var Dt={},sr=0;sr<dr.length;++sr){var At=w3(dr[sr]),Vt=At.family,Vn=At.stretch,vn=At.style,$t=At.weight;Dt[Vt]=Dt[Vt]||{},Dt[Vt][Vn]=Dt[Vt][Vn]||{},Dt[Vt][Vn][vn]=Dt[Vt][Vn][vn]||{},Dt[Vt][Vn][vn][$t]=At}return Dt})(hn.concat(Pr)),be=Zt}return G})(this.pdf,this.fontFaces),pt=Le.map(function(ft){return{family:ft,stretch:"normal",weight:Fe,style:he}}),Tt=(function(ft,Pr,mt){for(var Zt=(mt=mt||{}).defaultFontFamily||"times",hn=Object.assign({},Uye,mt.genericFontFamilies||{}),dr=null,Dt=null,sr=0;sr<Pr.length;++sr)if(hn[(dr=w3(Pr[sr])).family]&&(dr.family=hn[dr.family]),ft.hasOwnProperty(dr.family)){Dt=ft[dr.family];break}if(!(Dt=Dt||ft[Zt]))throw new Error("Could not find a font-family for the rule '"+bY(dr)+"' and default family '"+Zt+"'.");if(Dt=(function(At,Vt){if(Vt[At])return Vt[At];var Vn=D3[At],vn=Vn<=D3.normal?-1:1,$t=wY(Vt,$Y,Vn,vn);if(!$t)throw new Error("Could not find a matching font-stretch value for "+At);return $t})(dr.stretch,Dt),Dt=(function(At,Vt){if(Vt[At])return Vt[At];for(var Vn=WY[At],vn=0;vn<Vn.length;++vn)if(Vt[Vn[vn]])return Vt[Vn[vn]];throw new Error("Could not find a matching font-style for "+At)})(dr.style,Dt),!(Dt=(function(At,Vt){if(Vt[At])return Vt[At];if(At===400&&Vt[500])return Vt[500];if(At===500&&Vt[400])return Vt[400];var Vn=jye[At],vn=wY(Vt,YY,Vn,At<400?-1:1);if(!vn)throw new Error("Could not find a matching font-weight for value "+At);return vn})(dr.weight,Dt)))throw new Error("Failed to resolve a font for the rule '"+bY(dr)+"'.");return Dt})(Be,pt);this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var qe="";(Fe==="bold"||parseInt(Fe,10)>=700||he==="bold")&&(qe="bold"),he==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var qt="",xt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qe=0;Qe<Le.length;Qe++){if(this.pdf.internal.getFont(Le[Qe],qe,{noFallback:!0,disableWarning:!0})!==void 0){qt=Le[Qe];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(Le[Qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qt=Le[Qe],qe="bold";else if(this.pdf.internal.getFont(Le[Qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qt=Le[Qe],qe="normal";break}}if(qt===""){for(var Kt=0;Kt<Le.length;Kt++)if(xt[Le[Kt]]){qt=xt[Le[Kt]];break}}qt=qt===""?"Times":qt,this.pdf.setFont(qt,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(U){this.ctx.globalCompositeOperation=U}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(U){this.ctx.globalAlpha=U}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(U){this.ctx.lineDashOffset=U,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(U){this.ctx.lineDash=U,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(U){this.ctx.ignoreClearRect=!!U}})};d.prototype.setLineDash=function(F){this.lineDash=F},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){N.call(this,"fill",!1)},d.prototype.stroke=function(){N.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw fi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(F,ee)},d.prototype.closePath=function(){var F=new s(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Qr(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){F=new s(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(F.x,F.y)},d.prototype.lineTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw fi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(ce.x,ce.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},d.prototype.quadraticCurveTo=function(F,ee,ce,pe){if(isNaN(ce)||isNaN(pe)||isNaN(F)||isNaN(ee))throw fi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new s(ce,pe)),xe=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},d.prototype.bezierCurveTo=function(F,ee,ce,pe,J,xe){if(isNaN(J)||isNaN(xe)||isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw fi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new s(J,xe)),ve=this.ctx.transform.applyToPoint(new s(F,ee)),re=this.ctx.transform.applyToPoint(new s(ce,pe));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:re.x,y2:re.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new s(Se.x,Se.y)},d.prototype.arc=function(F,ee,ce,pe,J,xe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe)||isNaN(J))throw fi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new s(F,ee));F=Se.x,ee=Se.y;var ve=this.ctx.transform.applyToPoint(new s(0,ce)),re=this.ctx.transform.applyToPoint(new s(0,0));ce=Math.sqrt(Math.pow(ve.x-re.x,2)+Math.pow(ve.y-re.y,2))}Math.abs(J-pe)>=2*Math.PI&&(pe=0,J=2*Math.PI),this.path.push({type:"arc",x:F,y:ee,radius:ce,startAngle:pe,endAngle:J,counterclockwise:xe})},d.prototype.arcTo=function(F,ee,ce,pe,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw fi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,ee),this.lineTo(F+ce,ee),this.lineTo(F+ce,ee+pe),this.lineTo(F,ee+pe),this.lineTo(F,ee),this.lineTo(F+ce,ee),this.lineTo(F,ee)},d.prototype.fillRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw fi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,ee,ce,pe),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw fi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(F,ee,ce,pe),this.stroke())},d.prototype.clearRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw fi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,ee,ce,pe))},d.prototype.save=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},d.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(F){var ee,ce,pe,J;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))ee=0,ce=0,pe=0,J=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(xe!==null)ee=parseInt(xe[1]),ce=parseInt(xe[2]),pe=parseInt(xe[3]),J=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)ee=parseInt(xe[1]),ce=parseInt(xe[2]),pe=parseInt(xe[3]),J=parseFloat(xe[4]);else{if(J=1,typeof F=="string"&&F.charAt(0)!=="#"){var Se=new jY(F);F=Se.ok?Se.toHex():"#000000"}F.length===4?(ee=F.substring(1,2),ee+=ee,ce=F.substring(2,3),ce+=ce,pe=F.substring(3,4),pe+=pe):(ee=F.substring(1,3),ce=F.substring(3,5),pe=F.substring(5,7)),ee=parseInt(ee,16),ce=parseInt(ce,16),pe=parseInt(pe,16)}}return{r:ee,g:ce,b:pe,a:J,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(F,ee,ce,pe){if(isNaN(ee)||isNaN(ce)||typeof F!="string")throw fi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!p.call(this)){var J=q(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;v.call(this,{text:F,x:ee,y:ce,scale:xe,angle:J,align:this.textAlign,maxWidth:pe})}},d.prototype.strokeText=function(F,ee,ce,pe){if(isNaN(ee)||isNaN(ce)||typeof F!="string")throw fi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){pe=isNaN(pe)?void 0:pe;var J=q(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;v.call(this,{text:F,x:ee,y:ce,scale:xe,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:pe})}},d.prototype.measureText=function(F){if(typeof F!="string")throw fi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,ce=this.pdf.internal.scaleFactor,pe=ee.internal.getFontSize(),J=ee.getStringUnitWidth(F)*pe/ee.internal.scaleFactor;return new function(xe){var Se=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:J*=Math.round(96*ce/72*1e4)/1e4})},d.prototype.scale=function(F,ee){if(isNaN(F)||isNaN(ee))throw fi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new l(F,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},d.prototype.rotate=function(F){if(isNaN(F))throw fi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},d.prototype.translate=function(F,ee){if(isNaN(F)||isNaN(ee))throw fi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new l(1,0,0,1,F,ee);this.ctx.transform=this.ctx.transform.multiply(ce)},d.prototype.transform=function(F,ee,ce,pe,J,xe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe)||isNaN(J)||isNaN(xe))throw fi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new l(F,ee,ce,pe,J,xe);this.ctx.transform=this.ctx.transform.multiply(Se)},d.prototype.setTransform=function(F,ee,ce,pe,J,xe){F=isNaN(F)?1:F,ee=isNaN(ee)?0:ee,ce=isNaN(ce)?0:ce,pe=isNaN(pe)?1:pe,J=isNaN(J)?0:J,xe=isNaN(xe)?0:xe,this.ctx.transform=new l(F,ee,ce,pe,J,xe)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(F,ee,ce,pe,J,xe,Se,ve,re){var He=this.pdf.getImageProperties(F),G=1,be=1,Ie=1,U=1;pe!==void 0&&ve!==void 0&&(Ie=ve/pe,U=re/J,G=He.width/pe*ve/pe,be=He.height/J*re/J),xe===void 0&&(xe=ee,Se=ce,ee=0,ce=0),pe!==void 0&&ve===void 0&&(ve=pe,re=J),pe===void 0&&ve===void 0&&(ve=He.width,re=He.height);var ae=this.ctx.transform.decompose(),he=q(ae.rotate.shx),Fe=new l,Ce=(Fe=(Fe=(Fe=Fe.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale)).applyToRectangle(new a(xe-ee*Ie,Se-ce*U,pe*G,J*be));if(this.autoPaging){for(var we,Ue=b.call(this,Ce),Le=[],Be=0;Be<Ue.length;Be+=1)Le.indexOf(Ue[Be])===-1&&Le.push(Ue[Be]);A(Le);for(var pt=Le[0],Tt=Le[Le.length-1],qe=pt;qe<Tt+1;qe++){this.pdf.setPage(qe);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xt=qe===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=qe===1?0:Qe+(qe-2)*Kt;if(this.ctx.clip_path.length!==0){var Pr=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(we,this.posX+this.margin[3],-ft+xt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Pr}var mt=JSON.parse(JSON.stringify(Ce));mt=T([mt],this.posX+this.margin[3],-ft+xt+this.ctx.prevPageLastElemOffset)[0];var Zt=(qe>pt||qe<Tt)&&x.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,Kt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,he),Zt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,he)};var b=function(F,ee,ce){var pe=[];ee=ee||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":pe.push(Math.floor((F.y+J)/ce)+1);break;case"arc":pe.push(Math.floor((F.y+J-F.radius)/ce)+1),pe.push(Math.floor((F.y+J+F.radius)/ce)+1);break;case"qct":var xe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);pe.push(Math.floor((xe.y+J)/ce)+1),pe.push(Math.floor((xe.y+xe.h+J)/ce)+1);break;case"bct":var Se=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);pe.push(Math.floor((Se.y+J)/ce)+1),pe.push(Math.floor((Se.y+Se.h+J)/ce)+1);break;case"rect":pe.push(Math.floor((F.y+J)/ce)+1),pe.push(Math.floor((F.y+F.h+J)/ce)+1)}for(var ve=0;ve<pe.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<pe[ve];)S.call(this);return pe},S=function(){var F=this.fillStyle,ee=this.strokeStyle,ce=this.font,pe=this.lineCap,J=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=ee,this.font=ce,this.lineCap=pe,this.lineWidth=J,this.lineJoin=xe},T=function(F,ee,ce){for(var pe=0;pe<F.length;pe++)switch(F[pe].type){case"bct":F[pe].x2+=ee,F[pe].y2+=ce;case"qct":F[pe].x1+=ee,F[pe].y1+=ce;default:F[pe].x+=ee,F[pe].y+=ce}return F},A=function(F){return F.sort(function(ee,ce){return ee-ce})},N=function(F,ee){var ce=this.fillStyle,pe=this.strokeStyle,J=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),ve=this.lineJoin;if(this.autoPaging){for(var re,He,G=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),Ie=[],U=0;U<be.length;U++)if(be[U].x!==void 0)for(var ae=b.call(this,be[U]),he=0;he<ae.length;he+=1)Ie.indexOf(ae[he])===-1&&Ie.push(ae[he]);for(var Fe=0;Fe<Ie.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Ie[Fe];)S.call(this);A(Ie);for(var Ce=Ie[0],we=Ie[Ie.length-1],Ue=Ce;Ue<we+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=ce,this.strokeStyle=pe,this.lineCap=J,this.lineWidth=Se,this.lineJoin=ve;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=Ue===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=Ue===1?0:pt+(Ue-2)*Tt;if(this.ctx.clip_path.length!==0){var qt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(re,this.posX+this.margin[3],-qe+Be+this.ctx.prevPageLastElemOffset),k.call(this,F,!0),this.path=qt}if(He=JSON.parse(JSON.stringify(G)),this.path=T(He,this.posX+this.margin[3],-qe+Be+this.ctx.prevPageLastElemOffset),ee===!1||Ue===0){var xt=(Ue>Ce||Ue<we)&&x.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,Tt,null).clip().discardPath()),k.call(this,F,ee),xt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}this.path=G}else this.lineWidth=Se,k.call(this,F,ee),this.lineWidth=xe},k=function(F,ee){if((F!=="stroke"||ee||!_.call(this))&&(F==="stroke"||ee||!p.call(this))){for(var ce,pe,J=[],xe=this.path,Se=0;Se<xe.length;Se++){var ve=xe[Se];switch(ve.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ve,deltas:[],abs:[]});break;case"lt":var re=J.length;if(xe[Se-1]&&!isNaN(xe[Se-1].x)&&(ce=[ve.x-xe[Se-1].x,ve.y-xe[Se-1].y],re>0)){for(;re>=0;re--)if(J[re-1].close!==!0&&J[re-1].begin!==!0){J[re-1].deltas.push(ce),J[re-1].abs.push(ve);break}}break;case"bct":ce=[ve.x1-xe[Se-1].x,ve.y1-xe[Se-1].y,ve.x2-xe[Se-1].x,ve.y2-xe[Se-1].y,ve.x-xe[Se-1].x,ve.y-xe[Se-1].y],J[J.length-1].deltas.push(ce);break;case"qct":var He=xe[Se-1].x+2/3*(ve.x1-xe[Se-1].x),G=xe[Se-1].y+2/3*(ve.y1-xe[Se-1].y),be=ve.x+2/3*(ve.x1-ve.x),Ie=ve.y+2/3*(ve.y1-ve.y),U=ve.x,ae=ve.y;ce=[He-xe[Se-1].x,G-xe[Se-1].y,be-xe[Se-1].x,Ie-xe[Se-1].y,U-xe[Se-1].x,ae-xe[Se-1].y],J[J.length-1].deltas.push(ce);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ve)}}pe=ee?null:F==="stroke"?"stroke":"fill";for(var he=!1,Fe=0;Fe<J.length;Fe++)if(J[Fe].arc)for(var Ce=J[Fe].abs,we=0;we<Ce.length;we++){var Ue=Ce[we];Ue.type==="arc"?Y.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,ee,!he):I.call(this,Ue.x,Ue.y),he=!0}else if(J[Fe].close===!0)this.pdf.internal.out("h"),he=!1;else if(J[Fe].begin!==!0){var Le=J[Fe].start.x,Be=J[Fe].start.y;M.call(this,J[Fe].deltas,Le,Be),he=!0}pe&&$.call(this,pe),ee&&V.call(this)}},W=function(F){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-ce;case"top":return F+ee-ce;case"hanging":return F+ee-2*ce;case"middle":return F+ee/2-ce;default:return F}},X=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(ee,ce){this.colorStops.push([ee,ce])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Y=function(F,ee,ce,pe,J,xe,Se,ve,re){for(var He=Q.call(this,ce,pe,J,xe),G=0;G<He.length;G++){var be=He[G];G===0&&(re?B.call(this,be.x1+F,be.y1+ee):I.call(this,be.x1+F,be.y1+ee)),j.call(this,F,ee,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}ve?V.call(this):$.call(this,Se)},$=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(F,ee){this.pdf.internal.out(t(F)+" "+r(ee)+" m")},v=function(F){var ee;switch(F.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var ce,pe,J,xe=this.pdf.getTextDimensions(F.text),Se=W.call(this,F.y),ve=X.call(this,Se)-xe.h,re=this.ctx.transform.applyToPoint(new s(F.x,Se));if(this.autoPaging){var He=this.ctx.transform.decompose(),G=new l;G=(G=(G=G.multiply(He.translate)).multiply(He.skew)).multiply(He.scale);for(var be=this.ctx.transform.applyToRectangle(new a(F.x,Se,xe.w,xe.h)),Ie=G.applyToRectangle(new a(F.x,ve,xe.w,xe.h)),U=b.call(this,Ie),ae=[],he=0;he<U.length;he+=1)ae.indexOf(U[he])===-1&&ae.push(U[he]);A(ae);for(var Fe=ae[0],Ce=ae[ae.length-1],we=Fe;we<Ce+1;we++){this.pdf.setPage(we);var Ue=we===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],pt=Be-this.margin[0],Tt=this.pdf.internal.pageSize.width-this.margin[1],qe=Tt-this.margin[3],qt=we===1?0:Le+(we-2)*pt;if(this.ctx.clip_path.length!==0){var xt=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ce,this.posX+this.margin[3],-1*qt+Ue),k.call(this,"fill",!0),this.path=xt}var Qe=T([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-qt+Ue+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*F.scale),J=this.lineWidth,this.lineWidth=J*F.scale);var Kt=this.autoPaging!=="text";if(Kt||Qe.y+Qe.h<=Be){if(Kt||Qe.y>=Ue&&Qe.x<=Tt){var ft=Kt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Tt-Qe.x)[0],Pr=T([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-qt+Ue+this.ctx.prevPageLastElemOffset)[0],mt=Kt&&(we>Fe||we<Ce)&&x.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,pt,null).clip().discardPath()),this.pdf.text(ft,Pr.x,Pr.y,{angle:F.angle,align:ee,renderingMode:F.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Qe.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-Qe.y);F.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=J)}}else F.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*F.scale),J=this.lineWidth,this.lineWidth=J*F.scale),this.pdf.text(F.text,re.x+this.posX,re.y+this.posY,{angle:F.angle,align:ee,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=J)},I=function(F,ee,ce,pe){ce=ce||0,pe=pe||0,this.pdf.internal.out(t(F+ce)+" "+r(ee+pe)+" l")},M=function(F,ee,ce){return this.pdf.lines(F,ee,ce,null,null)},j=function(F,ee,ce,pe,J,xe,Se,ve){this.pdf.internal.out([e(i(ce+F)),e(o(pe+ee)),e(i(J+F)),e(o(xe+ee)),e(i(Se+F)),e(o(ve+ee)),"c"].join(" "))},Q=function(F,ee,ce,pe){for(var J=2*Math.PI,xe=Math.PI/2;ee>ce;)ee-=J;var Se=Math.abs(ce-ee);Se<J&&pe&&(Se=J-Se);for(var ve=[],re=pe?-1:1,He=ee;Se>1e-5;){var G=He+re*Math.min(Se,xe);ve.push(Z.call(this,F,He,G)),Se-=Math.abs(G-He),He=G}return ve},Z=function(F,ee,ce){var pe=(ce-ee)/2,J=F*Math.cos(pe),xe=F*Math.sin(pe),Se=J,ve=-xe,re=Se*Se+ve*ve,He=re+Se*J+ve*xe,G=4/3*(Math.sqrt(2*re*He)-He)/(Se*xe-ve*J),be=Se-G*ve,Ie=ve+G*Se,U=be,ae=-Ie,he=pe+ee,Fe=Math.cos(he),Ce=Math.sin(he);return{x1:F*Math.cos(ee),y1:F*Math.sin(ee),x2:be*Fe-Ie*Ce,y2:be*Ce+Ie*Fe,x3:U*Fe-ae*Ce,y3:U*Ce+ae*Fe,x4:F*Math.cos(ce),y4:F*Math.sin(ce)}},q=function(F){return 180*F/Math.PI},K=function(F,ee,ce,pe,J,xe){var Se=F+.5*(ce-F),ve=ee+.5*(pe-ee),re=J+.5*(ce-J),He=xe+.5*(pe-xe),G=Math.min(F,J,Se,re),be=Math.max(F,J,Se,re),Ie=Math.min(ee,xe,ve,He),U=Math.max(ee,xe,ve,He);return new a(G,Ie,be-G,U-Ie)},oe=function(F,ee,ce,pe,J,xe,Se,ve){var re,He,G,be,Ie,U,ae,he,Fe,Ce,we,Ue,Le,Be,pt=ce-F,Tt=pe-ee,qe=J-ce,qt=xe-pe,xt=Se-J,Qe=ve-xe;for(He=0;He<41;He++)Fe=(ae=(G=F+(re=He/40)*pt)+re*((Ie=ce+re*qe)-G))+re*(Ie+re*(J+re*xt-Ie)-ae),Ce=(he=(be=ee+re*Tt)+re*((U=pe+re*qt)-be))+re*(U+re*(xe+re*Qe-U)-he),He==0?(we=Fe,Ue=Ce,Le=Fe,Be=Ce):(we=Math.min(we,Fe),Ue=Math.min(Ue,Ce),Le=Math.max(Le,Fe),Be=Math.max(Be,Ce));return new a(Math.round(we),Math.round(Ue),Math.round(Le-we),Math.round(Be-Ue))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,ee,ce=(F=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:ee}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(zt.API),(function(n){var e=function(s){var a,l,c,f,d,y,p,_,x,b;for(/[^\x00-\xFF]/.test(s),l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(y=(d=((d=((d=((d=(d-(b=d%85))/85)-(x=d%85))/85)-(_=d%85))/85)-(p=d%85))/85)%85,l.push(y+33,p+33,_+33,x+33,b+33)):l.push(122);return(function(S,T){for(var A=T;A>0;A--)S.pop()})(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var a,l,c,f,d,y=String,p="length",_=255,x="charCodeAt",b="slice",S="replace";for(s[b](-2),s=s[b](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],f=0,d=(s+=a="uuuuu"[b](s[p]%5||5))[p];d>f;f+=5)l=52200625*(s[x](f)-33)+614125*(s[x](f+1)-33)+7225*(s[x](f+2)-33)+85*(s[x](f+3)-33)+(s[x](f+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return(function(T,A){for(var N=A;N>0;N--)T.pop()})(c,a[p]),y.fromCharCode.apply(y,c)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},o=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return(a=wI(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}})(zt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,f){var d=new XMLHttpRequest,y=0,p=function(_){var x=_.length,b=[],S=String.fromCharCode;for(y=0;y<x;y+=1)b.push(S(255&_.charCodeAt(y)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?f(p(this.responseText)):f(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.allowFsRead=void 0,n.loadImageFile=n.loadFile})(zt.API),(function(n){function e(){return(mn.html2canvas?Promise.resolve(mn.html2canvas):import("./chunk-O2T5FFDR.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(mn.DOMPurify?Promise.resolve(mn.DOMPurify):import("./chunk-VH54VPDW.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Qr(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},o=function a(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||f.appendChild(a(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||(function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),l){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var p=0;p<f.length;++p){var _=f[p],x=_.src.find(function(b){return b.format==="truetype"});x&&c.addFont(x.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||zt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,d){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,f),y}).then(f,d).then(function(y){return c.updateProgress(1),y})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var f=this;a&&(a=a.bind(f)),l&&(l=l.bind(f));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:s.convert(Object.assign({},f),Promise.prototype),y=c.call(d,a,l);return s.convert(y,f.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,zt.getPageSize=function(a,l,c){if(Qr(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var _,x=0,b=0;if(p.hasOwnProperty(y))x=p[y][1]/d,b=p[y][0]/d;else try{x=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",b>x&&(_=b,b=x,x=_);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>b&&(_=b,b=x,x=_)}return{width:b,height:x,unit:l,k:d,orientation:a}},n.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(w3):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}})(zt.API),zt.API.addJS=function(n){return IY=n,this.internal.events.subscribe("postPutResources",function(){PI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(PI+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),CY=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+IY+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){PI!==void 0&&CY!==void 0&&this.internal.out("/Names <</JavaScript "+PI+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(o=0;o<c;o++){var d=t.internal.newObject();f.push(d);var y=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<f.length;o++)t.internal.write("(page_"+(o+1)+")"+f[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(zt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,l=(function(d){for(var y,p=256*d.charCodeAt(4)+d.charCodeAt(5),_=d.length,x={width:0,height:0,numcomponents:1},b=4;b<_;b+=2){if(b+=p,e.indexOf(d.charCodeAt(b+1))!==-1){y=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),x={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:y,numcomponents:d.charCodeAt(b+9)};break}p=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return x})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}})(zt.API),zt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=pY(n,{checkCrc:!0}),s=o.width,a=o.height,l=o.channels,c=o.palette,f=o.depth;i=c&&l===1?(function(Y){for(var $=Y.width,V=Y.height,B=Y.data,v=Y.palette,I=Y.depth,M=!1,j=[],Q=[],Z=void 0,q=!1,K=0,oe=0;oe<v.length;oe++){var _e=c3(v[oe],4),F=_e[0],ee=_e[1],ce=_e[2],pe=_e[3];j.push(F,ee,ce),pe!=null&&(pe===0?(K++,Q.length<1&&Q.push(oe)):pe<255&&(q=!0))}if(q||K>1){M=!0,Q=void 0;var J=$*V;Z=new Uint8Array(J);for(var xe=new DataView(B.buffer),Se=0;Se<J;Se++){var ve=b3(xe,Se,I),re=c3(v[ve],4)[3];Z[Se]=re}}else K===0&&(Q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:B,alphaBytes:Z,needSMask:M,palette:j,mask:Q}})(o):l===2||l===4?(function(Y){for(var $=Y.data,V=Y.width,B=Y.height,v=Y.channels,I=Y.depth,M=v===2?"DeviceGray":"DeviceRGB",j=v-1,Q=V*B,Z=j,q=Q*Z,K=1*Q,oe=Math.ceil(q*I/8),_e=Math.ceil(K*I/8),F=new Uint8Array(oe),ee=new Uint8Array(_e),ce=new DataView($.buffer),pe=new DataView(F.buffer),J=new DataView(ee.buffer),xe=!1,Se=0;Se<Q;Se++){for(var ve=Se*v,re=0;re<Z;re++)kY(pe,b3(ce,ve+re,I),Se*Z+re,I);var He=b3(ce,ve+Z,I);He<(1<<I)-1&&(xe=!0),kY(J,He,1*Se,I)}return{colorSpace:M,colorsPerPixel:j,sMaskBitsPerComponent:xe?I:void 0,colorBytes:F,alphaBytes:ee,needSMask:xe}})(o):(function(Y){var $=Y.data,V=Y.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:$ instanceof Uint16Array?(function(B){for(var v=B.length,I=new Uint8Array(2*v),M=new DataView(I.buffer,I.byteOffset,I.byteLength),j=0;j<v;j++)M.setUint16(2*j,B[j],!1);return I})($):$,needSMask:!1}})(o);var d,y,p,_=i,x=_.colorSpace,b=_.colorsPerPixel,S=_.sMaskBitsPerComponent,T=_.colorBytes,A=_.alphaBytes,N=_.needSMask,k=_.palette,W=_.mask,X=null;return r!==zt.API.image_compression.NONE&&typeof wI=="function"?(X=(function(Y){var $;switch(Y){case zt.API.image_compression.FAST:$=11;break;case zt.API.image_compression.MEDIUM:$=13;break;case zt.API.image_compression.SLOW:$=14;break;default:$=12}return $})(r),d=this.decode.FLATE_DECODE,y="/Predictor ".concat(X," /Colors ").concat(b," /BitsPerComponent ").concat(f," /Columns ").concat(s),n=RY(T,Math.ceil(s*b*f/8),b,f,r),N&&(p=RY(A,Math.ceil(s*S/8),1,S,r))):(d=void 0,y=void 0,n=T,N&&(p=A)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:t,data:n,index:e,filter:d,decodeParameters:y,transparency:W,palette:k,sMask:p,predictor:X,width:s,height:a,bitsPerComponent:f,sMaskBitsPerComponent:S,colorSpace:x}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new Wye(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},f=new S3(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)},n.processGIF87A=n.processGIF89A})(zt.API),sc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},sc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){fi.log("bit decode error:"+t)}},sc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},sc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},sc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},sc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=s,this.data[f+3]=c}this.pos+=n}},sc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,f=i*this.width*4+4*o;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=n}},sc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},sc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},sc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new sc(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new S3(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}})(zt.API),FY.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new FY(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new S3(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}})(zt.API),zt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],d=r[c+1],y=r[c+2],p=r[c+3];o[a++]=f,o[a++]=d,o[a++]=y,s[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},zt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qy=zt.API,LI=Qy.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,d=e.doKerning!==!1,y=0,p=n.length,_=0,x=a[0]||l,b=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(y=d&&Qr(c[r])==="object"&&!isNaN(parseInt(c[r][_],10))?c[r][_]/f:0,b.push((a[r]||x)/l+y)),_=r;return b},TY=Qy.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Qy.processArabic&&(n=Qy.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:LI.apply(this,arguments).reduce(function(o,s){return o+s},0)},DY=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(n.slice(l,o)),i},AY=function(n,e,t){t||(t={});var r,i,o,s,a,l,c,f=[],d=[f],y=t.textIndent||0,p=0,_=0,x=n.split(" "),b=LI.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?x[0].length+2:t.lineIndent||0){var S=Array(l).join(" "),T=[];x.map(function(N){(N=N.split(/\s*\n/)).length>1?T=T.concat(N.map(function(k,W){return(W&&k.length?`
`:"")+k})):T.push(N[0])}),x=T,l=TY.apply(this,[S,t])}for(o=0,s=x.length;o<s;o++){var A=0;if(r=x[o],l&&r[0]==`
`&&(r=r.substr(1),A=1),y+p+(_=(i=LI.apply(this,[r,t])).reduce(function(N,k){return N+k},0))>e||A){if(_>e){for(a=DY.apply(this,[r,i,e-(y+p),e]),f.push(a.shift()),f=[a.pop()];a.length;)d.push([a.shift()]);_=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(N,k){return N+k},0)}else f=[r];d.push(f),y=_+l,p=b}else f.push(r),y+=p+_,p=b}return c=l?function(N,k){return(k?S:"")+N.join(" ")}:function(N){return N.join(" ")},d.map(c)},Qy.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return d.metadata[y]?{widths:d.metadata[y].widths||{0:1},kerning:d.metadata[y].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(AY.apply(this,[r[a],s,o]));return c},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(y){return"0x"+parseInt(y,10).toString(16)},a=n.__fontmetrics__.compress=function(y){var p,_,x,b,S=["{"];for(var T in y){if(p=y[T],isNaN(parseInt(T,10))?_="'"+T+"'":(T=parseInt(T,10),_=(_=s(T).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof p=="number")p<0?(x=s(p).slice(3),b="-"):(x=s(p).slice(2),b=""),x=b+x.slice(0,-1)+i[x.slice(-1)];else{if(Qr(p)!=="object")throw new Error("Don't know what to do with value type "+Qr(p)+".");x=a(p)}S.push(_+x)}return S.push("}"),S.join("")},l=n.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,_,x,b,S={},T=1,A=S,N=[],k="",W="",X=y.length-1,Y=1;Y<X;Y+=1)(b=y[Y])=="'"?p?(x=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(N.push([A,x]),A={},x=void 0):b=="}"?((_=N.pop())[0][_[1]]=A,x=void 0,A=_[0]):b=="-"?T=-1:x===void 0?r.hasOwnProperty(b)?(k+=r[b],x=parseInt(k,16)*T,T=1,k=""):k+=b:r.hasOwnProperty(b)?(W+=r[b],A[x]=parseInt(W,16)*T,T=1,x=void 0,W=""):W+=b;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(y){var p=y.font,_=d.Unicode[p.postScriptName];_&&(p.metadata.Unicode={},p.metadata.Unicode.widths=_.widths,p.metadata.Unicode.kerning=_.kerning);var x=f.Unicode[p.postScriptName];x&&(p.metadata.Unicode.encoding=x,p.encoding=x.codePages[0])}])})(zt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(kI(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(zt),zt.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw fi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw fi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(mn.canvg?Promise.resolve(mn.canvg):import("./chunk-ZTEKJDVN.js")).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},zt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},zt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,f=0,d=0;function y(_,x){var b,S=!1;for(b=0;b<_.length;b+=1)_[b]===x&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)t[a[d]].value=t[a[d]].defaultValue,t[a[d]].explicitSet=!1}if(Qr(n)==="object"){for(i in n)if(o=n[i],y(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&y(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(f=0;f<o[c].length;f+=1)typeof o[c][f]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,x=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?x.push("/"+_+" /"+t[_].value):x.push("/"+_+" "+t[_].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(zt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],d=0,y=o.length;d<y;++d){if(a=s.metadata.characterToGlyph(o.charCodeAt(d)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(o){var s,a,l,c,f,d,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,y=(a=Object.keys(o).sort(function(p,_){return p-_})).length;d<y;d++)s=a[d],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,f=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",_=0;_<y.length;_++)p+=String.fromCharCode(y[_]);var x=c();f({data:p,addLength1:!0,objectId:x}),l("endobj");var b=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var S=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+t_(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+t_(a.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+t_(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,f=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,y="",p=0;p<d.length;p++)y+=String.fromCharCode(d[p]);var _=c();f({data:y,addLength1:!0,objectId:_}),l("endobj");var x=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+t_(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var S=0;S<a.metadata.hmtx.widths.length;S++)a.metadata.hmtx.widths[S]=parseInt(a.metadata.hmtx.widths[S]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+t_(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,f=o.options||{},d=o.mutex||{},y=d.pdfEscape,p=d.activeFontKey,_=d.fonts,x=p,b="",S=0,T="",A=_[x].encoding;if(_[x].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:d};for(T=a,x=p,Array.isArray(a)&&(T=a[0]),S=0;S<T.length;S+=1)_[x].metadata.hasOwnProperty("cmap")&&(s=_[x].metadata.cmap.unicode.codeMap[T[S].charCodeAt(0)]),s||T[S].charCodeAt(0)<256&&_[x].metadata.hasOwnProperty("Unicode")?b+=T[S]:b+="";var N="";return parseInt(x.slice(1))<14||A==="WinAnsiEncoding"?N=y(b,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(N=t(b,_[x])),d.isHex=!0,{text:N,x:l,y:c,options:f,mutex:d}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(zt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(zt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,f,d=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,A=0;this.__bidiEngine__={};var N=function(B){var v=B.charCodeAt(),I=v>>8,M=x[I];return M!==void 0?d[256*M+(255&v)]:I===252||I===253?"AL":S.test(I)?"L":I===8?"R":"N"},k=function(B){for(var v,I=0;I<B.length;I++){if((v=N(B.charAt(I)))==="L")return!1;if(v==="R")return!0}return!1},W=function(B,v,I,M){var j,Q,Z,q,K=v[M];switch(K){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(K="AN");break;case"AL":T=!0,K="R";break;case"WS":case"BN":K="N";break;case"CS":M<1||M+1>=v.length||(j=I[M-1])!=="EN"&&j!=="AN"||(Q=v[M+1])!=="EN"&&Q!=="AN"?K="N":T&&(Q="AN"),K=Q===j?Q:"N";break;case"ES":K=(j=M>0?I[M-1]:"B")==="EN"&&M+1<v.length&&v[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&I[M-1]==="EN"){K="EN";break}if(T){K="N";break}for(Z=M+1,q=v.length;Z<q&&v[Z]==="ET";)Z++;K=Z<q&&v[Z]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(q=v.length,Z=M+1;Z<q&&v[Z]==="NSM";)Z++;if(Z<q){var oe=B[M],_e=oe>=1425&&oe<=2303||oe===64286;if(j=v[Z],_e&&(j==="R"||j==="AL")){K="R";break}}}K=M<1||(j=v[M-1])==="B"?"N":I[M-1];break;case"B":T=!1,i=!0,K=A;break;case"S":o=!0,K="N"}return K},X=function(B,v,I){var M=B.split("");return I&&Y(M,I,{hiLevel:A}),M.reverse(),v&&v.reverse(),M.join("")},Y=function(B,v,I){var M,j,Q,Z,q,K=-1,oe=B.length,_e=0,F=[],ee=A?p:y,ce=[];for(T=!1,i=!1,o=!1,j=0;j<oe;j++)ce[j]=N(B[j]);for(Q=0;Q<oe;Q++){if(q=_e,F[Q]=W(B,ce,F,Q),M=240&(_e=ee[q][_[F[Q]]]),_e&=15,v[Q]=Z=ee[_e][5],M>0)if(M===16){for(j=K;j<Q;j++)v[j]=1;K=-1}else K=-1;if(ee[_e][6])K===-1&&(K=Q);else if(K>-1){for(j=K;j<Q;j++)v[j]=Z;K=-1}ce[Q]==="B"&&(v[Q]=0),I.hiLevel|=Z}o&&(function(pe,J,xe){for(var Se=0;Se<xe;Se++)if(pe[Se]==="S"){J[Se]=A;for(var ve=Se-1;ve>=0&&pe[ve]==="WS";ve--)J[ve]=A}})(ce,v,oe)},$=function(B,v,I,M,j){if(!(j.hiLevel<B)){if(B===1&&A===1&&!i)return v.reverse(),void(I&&I.reverse());for(var Q,Z,q,K,oe=v.length,_e=0;_e<oe;){if(M[_e]>=B){for(q=_e+1;q<oe&&M[q]>=B;)q++;for(K=_e,Z=q-1;K<Z;K++,Z--)Q=v[K],v[K]=v[Z],v[Z]=Q,I&&(Q=I[K],I[K]=I[Z],I[Z]=Q);_e=q}_e++}}},V=function(B,v,I){var M=B.split(""),j={hiLevel:A};return I||(I=[]),Y(M,I,j),(function(Q,Z,q){if(q.hiLevel!==0&&f)for(var K,oe=0;oe<Q.length;oe++)Z[oe]===1&&(K=b.indexOf(Q[oe]))>=0&&(Q[oe]=b[K+1])})(M,I,j),$(2,M,v,I,j),$(1,M,v,I,j),M.join("")};return this.__bidiEngine__.doBidiReorder=function(B,v,I){if((function(j,Q){if(Q)for(var Z=0;Z<j.length;Z++)Q[Z]=Z;a===void 0&&(a=k(j)),c===void 0&&(c=k(j))})(B,v),s||!l||c)if(s&&l&&a^c)A=a?1:0,B=X(B,v,I);else if(!s&&l&&c)A=a?1:0,B=V(B,v,I),B=X(B,v);else if(!s||a||l||c){if(s&&!l&&a^c)B=X(B,v),a?(A=0,B=V(B,v,I)):(A=1,B=V(B,v,I),B=X(B,v));else if(s&&a&&!l&&c)A=1,B=V(B,v,I),B=X(B,v);else if(!s&&!l&&a^c){var M=f;a?(A=1,B=V(B,v,I),A=0,f=!1,B=V(B,v,I),f=M):(A=0,B=V(B,v,I),B=X(B,v),A=1,f=!1,B=V(B,v,I),f=M,B=X(B,v))}}else A=0,B=V(B,v,I);else A=a?1:0,B=V(B,v,I);return B},this.__bidiEngine__.setOptions=function(B){B&&(s=B.isInputVisual,l=B.isOutputVisual,a=B.isInputRtl,c=B.isOutputRtl,f=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(zt),zt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new np(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new a_e(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new $ye(this.contents),this.head=new Xye(this),this.name=new e_e(this),this.cmap=new ZY(this),this.toUnicode={},this.hhea=new Zye(this),this.maxp=new t_e(this),this.hmtx=new n_e(this),this.post=new Jye(this),this.os2=new Kye(this),this.loca=new s_e(this),this.glyf=new r_e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var lc,np=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),$ye=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,l,c,f,d,y,p,_,x;for(x in p=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),s=Math.floor(d/l),f=16*p-d,(i=new np).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(s),i.writeShort(f),o=16*p,c=i.pos+o,a=null,_=[],t)for(y=t[x],i.writeString(x),i.writeInt(n(y)),i.writeInt(c),i.writeInt(y.length),_=_.concat(y),x==="head"&&(a=c),c+=y.length;c%4;)_.push(0),c++;return i.write(_),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=KY.call(t);t.length%4;)t.push(0);for(o=new np(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),Yye={}.hasOwnProperty,th=function(n,e){for(var t in e)Yye.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};lc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var Xye=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new np).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),BY=(function(){function n(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,x,b,S,T,A;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,o=(function(){var N,k;for(k=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)k.push(e.readUInt16());return k})(),e.pos+=2,x=(function(){var N,k;for(k=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)k.push(e.readUInt16());return k})(),c=(function(){var N,k;for(k=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)k.push(e.readUInt16());return k})(),f=(function(){var N,k;for(k=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)k.push(e.readUInt16());return k})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var N,k;for(k=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)k.push(e.readUInt16());return k})(),l=S=0,A=o.length;S<A;l=++S)for(b=o[l],r=T=_=x[l];_<=b?T<=b:T>=b;r=_<=b?++T:--T)f[l]===0?s=r+c[l]:(s=a[f[l]/2+(r-_)-(y-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=d}return n.encode=function(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,x,b,S,T,A,N,k,W,X,Y,$,V,B,v,I,M,j,Q,Z,q,K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re,He,G;switch(M=new np,s=Object.keys(e).sort(function(be,Ie){return be-Ie}),t){case"macroman":for(x=0,b=(function(){var be=[];for(_=0;_<256;++_)be.push(0);return be})(),T={0:0},o={},j=0,K=s.length;j<K;j++)T[ve=e[i=s[j]]]==null&&(T[ve]=++x),o[i]={old:e[i],new:T[e[i]]},b[i]=T[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:o,subtable:M.data,maxGlyphID:x+1};case"unicode":for(v=[],d=[],A=0,T={},r={},S=c=null,Q=0,oe=s.length;Q<oe;Q++)T[k=e[i=s[Q]]]==null&&(T[k]=++A),r[i]={old:k,new:T[k]},a=T[k]-i,S!=null&&a===c||(S&&d.push(S),v.push(i),c=a),S=i;for(S&&d.push(S),d.push(65535),v.push(65535),V=2*($=v.length),Y=2*Math.pow(Math.log($)/Math.LN2,2),y=Math.log(Y/2)/Math.LN2,X=2*$-Y,l=[],W=[],p=[],_=Z=0,_e=v.length;Z<_e;_=++Z){if(B=v[_],f=d[_],B===65535){l.push(0),W.push(0);break}if(B-(I=r[B].new)>=32768)for(l.push(0),W.push(2*(p.length+$-_)),i=q=B;B<=f?q<=f:q>=f;i=B<=f?++q:--q)p.push(r[i].new);else l.push(I-B),W.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*$+2*p.length),M.writeUInt16(0),M.writeUInt16(V),M.writeUInt16(Y),M.writeUInt16(y),M.writeUInt16(X),xe=0,F=d.length;xe<F;xe++)i=d[xe],M.writeUInt16(i);for(M.writeUInt16(0),Se=0,ee=v.length;Se<ee;Se++)i=v[Se],M.writeUInt16(i);for(re=0,ce=l.length;re<ce;re++)a=l[re],M.writeUInt16(a);for(He=0,pe=W.length;He<pe;He++)N=W[He],M.writeUInt16(N);for(G=0,J=p.length;G<J;G++)x=p[G],M.writeUInt16(x);return{charMap:r,subtable:M.data,maxGlyphID:A+1}}},n})(),ZY=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new BY(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=BY.encode(e,t),(i=new np).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),Zye=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),Kye=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),Jye=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,l;for(l=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)l.push(e.readUInt32());return l}).call(this)}},n})(),Qye=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},e_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,l,c,f,d,y;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},o=f=0,d=r.length;f<d;o=++f)i=r[o],e.pos=i.offset,c=e.readString(i.length),s=new Qye(c,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},n})(),t_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),n_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,l;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,f;for(f=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)f.push(e.readInt16());return f})(),this.widths=(function(){var c,f,d,y;for(y=[],c=0,f=(d=this.metrics).length;c<f;c++)o=d[c],y.push(o.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)l.push(this.widths.push(r));return l},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),KY=[].slice,r_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,l,c,f,d;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new np(t.read(i))).readShort(),c=a.readShort(),d=a.readShort(),l=a.readShort(),f=a.readShort(),this.cache[e]=s===-1?new o_e(a,c,d,l,f):new i_e(a,s,c,d,l,f),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,l;for(s=[],o=[],a=0,l=t.length;a<l;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),i_e=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),o_e=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new np(KY.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),s_e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return th(n,lc),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],l=this.offsets[s+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),f=0;f<r.length;++f)c[4*f+3]=255&r[f],c[4*f+2]=(65280&r[f])>>8,c[4*f+1]=(16711680&r[f])>>16,c[4*f]=(4278190080&r[f])>>24;return c},n})(),a_e=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))r=l[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,x,b,S;for(i in r=ZY.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},S=r.charMap)p[(l=S[i]).old]=l.new;for(_ in y=r.maxGlyphID,s)_ in p||(p[_]=y++);return f=(function(T){var A,N;for(A in N={},T)N[T[A]]=A;return N})(p),d=Object.keys(f).sort(function(T,A){return T-A}),x=(function(){var T,A,N;for(N=[],T=0,A=d.length;T<A;T++)a=d[T],N.push(f[a]);return N})(),o=this.font.glyf.encode(s,x,p),c=this.font.loca.encode(o.offsets,x),b={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},n})();zt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)r=t[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();function l_e(n,e){n&1&&($n(),Ve(0,"svg",7),kt(1,"path",8),$e())}function u_e(n,e){n&1&&kt(0,"div",9)}function c_e(n,e){if(n&1){let t=ui();Ve(0,"div",10)(1,"div",11),yt(2,"Select Format"),$e(),Ve(3,"button",12),Qt("click",function(){An(t);let i=nn();return Rn(i.export("png"))}),Ve(4,"div",13)(5,"span",14),$n(),Ve(6,"svg",15),kt(7,"path",16),$e()(),gi(),Ve(8,"div",17)(9,"span"),yt(10,"Image"),$e(),Ve(11,"span",18),yt(12,"High Res PNG"),$e()()()(),Ve(13,"button",19),Qt("click",function(){An(t);let i=nn();return Rn(i.export("pdf"))}),Ve(14,"div",13)(15,"span",20),$n(),Ve(16,"svg",15),kt(17,"path",21)(18,"path",22),$e()(),gi(),Ve(19,"div",17)(20,"span"),yt(21,"Document"),$e(),Ve(22,"span",18),yt(23,"Portable PDF"),$e()()()()()}}var VI=class n{isExporting=!1;showMenu=un(!1);_el=Me(li);_mapService=Me(Ro);get map(){return this._mapService.map()}clickout(e){this._el.nativeElement.contains(e.target)||this.showMenu.set(!1)}toggleMenu(){this.showMenu.update(e=>!e)}export(e){this.map&&(this.isExporting=!0,this.showMenu.set(!1),setTimeout(()=>{this.map?.once("rendercomplete",()=>{let t=document.createElement("canvas"),r=this.map?.getSize();if(!r)return;t.width=r[0],t.height=r[1];let i=t.getContext("2d");document.querySelectorAll(".ol-layer canvas").forEach(a=>{if(a.width>0){let l=a.parentNode.style.opacity;i.globalAlpha=l===""?1:Number(l);let f=a.style.transform.match(/^matrix\(([^\(]*)\)$/)?.[1].split(",").map(Number);f&&i.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),i.drawImage(a,0,0)}});let s=t.toDataURL("image/png");e==="png"?this.downloadPNG(s):this.downloadPDF(s,t.width,t.height),this.isExporting=!1}),this.map?.renderSync()},100))}downloadPNG(e){let t=document.createElement("a");t.href=e,t.download=`map_${Date.now()}.png`,t.click()}downloadPDF(e,t,r){let i=t>r?"l":"p",o=new zt(i,"px",[t,r]);o.addImage(e,"PNG",0,0,t,r),o.save(`map_${Date.now()}.pdf`)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-map-print"]],hostBindings:function(t,r){t&1&&Qt("click",function(o){return r.clickout(o)},Gh)},decls:8,vars:4,consts:[[1,"relative","group",3,"clickOutside"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["class","w-5 h-5 text-white transition-transform group-hover/btn:rotate-6","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin",4,"ngIf"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","text-white","transition-transform","group-hover/btn:rotate-6"],["stroke","currentColor","stroke-linejoin","round","stroke-width","2","d","M16.444 18H19a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h2.556M17 11V5a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v6h10ZM7 15h10v4a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-4Z"],[1,"w-5","h-5","border-2","border-white/30","border-t-white","rounded-full","animate-spin"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"px-3","py-1.5","mb-1","text-[9px]","uppercase","tracking-wider","font-bold","text-slate-400"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-violet-50","text-xs","font-semibold","text-slate-700","transition-all","group/item",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","justify-center","w-8","h-8","bg-violet-100","text-violet-600","rounded-lg","shadow-sm","group-hover/item:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","flex-col","items-start"],[1,"text-[9px]","text-slate-400","font-normal"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-rose-50","text-xs","font-semibold","text-slate-700","transition-all","group/item",3,"click"],[1,"flex","items-center","justify-center","w-8","h-8","bg-rose-100","text-rose-600","rounded-lg","shadow-sm","group-hover/item:scale-110","transition-transform"],["d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 9h1v1H9V9z","stroke-width","2"]],template:function(t,r){t&1&&(Ve(0,"div",0),Qt("clickOutside",function(){return r.showMenu.set(!1)}),Ve(1,"button",1),Qt("click",function(){return r.toggleMenu()}),Dr(2,l_e,2,0,"svg",2)(3,u_e,1,0,"div",3),$e(),Ve(4,"div",4),yt(5," PRINT MAP "),kt(6,"div",5),$e(),Dr(7,c_e,24,0,"div",6),$e()),t&2&&(Ct(),xn("ngClass",r.isExporting?"bg-indigo-600 text-white ring-4 ring-indigo-100":"bg-gradient-to-tr from-indigo-600 to-indigo-500 text-white hover:scale-105"),Ct(),xn("ngIf",!r.isExporting),Ct(),xn("ngIf",r.isExporting),Ct(4),xn("ngIf",r.showMenu()))},dependencies:[ti,$h,co],encapsulation:2})};var R3;try{R3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{R3=!1}var Vg=(()=>{class n{_platformId=Me(og);isBrowser=this._platformId?dU(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||R3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var M3;function h_e(){if(M3==null){let n=typeof document<"u"?document.head:null;M3=!!(n&&(n.createShadowRoot||n.attachShadow))}return M3}function HI(n){if(h_e()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function rp(n){return n.composedPath?n.composedPath()[0]:n.target}function N3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var qI=new WeakMap,Nx=(()=>{class n{_appRef;_injector=Me(Di);_environmentInjector=Me(Oi);load(t){let r=this._appRef=this._appRef||this._injector.get(au),i=qI.get(r);i||(i={loaders:new Set,refs:[]},qI.set(r,i),r.onDestroy(()=>{qI.get(r)?.refs.forEach(o=>o.destroy()),qI.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(H2(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _o(n){return n==null?"":typeof n=="string"?n:`${n}px`}function P3(n){return Array.isArray(n)?n:[n]}function L3(n,e=0){return f_e(n)?Number(n):arguments.length===2?e:0}function f_e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function uc(n){return n instanceof li?n.nativeElement:n}var d_e=new Ut("cdk-dir-doc",{providedIn:"root",factory:p_e});function p_e(){return Me(wr)}var g_e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function m_e(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?g_e.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var WI=(()=>{class n{get value(){return this.valueSignal()}valueSignal=un("ltr");change=new mi;constructor(){let t=Me(d_e,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(m_e(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Hg;function JY(){if(Hg==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Hg=!1,Hg;if("scrollBehavior"in document.documentElement.style)Hg=!0;else{let n=Element.prototype.scrollTo;n?Hg=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Hg=!1}}return Hg}var y_e=20,$I=(()=>{class n{_ngZone=Me(vr);_platform=Me(Vg);_renderer=Me(Es).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new en;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=y_e){return this._platform.isBrowser?new Hn(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(AE(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):dn()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ws(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=uc(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var __e=20,qg=(()=>{class n{_platform=Me(Vg);_listeners;_viewportSize;_change=new en;_document=Me(wr);constructor(){let t=Me(vr),r=Me(Es).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=__e){return t>0?this._change.pipe(AE(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Px=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Lx=class extends Px{component;viewContainerRef;injector;projectableNodes;constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=i}},YI=class extends Px{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},k3=class extends Px{element;constructor(e){super(),this.element=e instanceof li?e.nativeElement:e}},O3=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Lx)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof YI)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof k3)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},XI=class extends O3{outletElement;_appRef;_defaultInjector;constructor(e,t,r){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=r}attachComponentPortal(e){let t;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,i=r.get(Uh,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let r=this._appRef,i=e.injector||this._defaultInjector||Di.NULL,o=i.get(Oi,r.injector);t=H2(e.component,{elementInjector:i,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),r.attachView(t.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);i!==-1&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{let t=e.element;t.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var F3={},QY=(()=>{class n{_appId=Me(y0);getId(t){return this._appId!=="ng"&&(t+=this._appId),F3.hasOwnProperty(t)||(F3[t]=0),`${t}${F3[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eX=JY();function aX(n){return new ZI(n.get(qg),n.get(wr))}var ZI=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=_o(-this._previousScrollPosition.left),e.style.top=_o(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,r=e.style,i=t.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),eX&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),eX&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}};function lX(n,e){return new KI(n.get($I),n.get(vr),n.get(qg),e)}var KI=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ws(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var kx=class{enable(){}disable(){}attach(){}};function B3(n,e){return e.some(t=>{let r=n.bottom<t.top,i=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return r||i||o||s})}function tX(n,e){return e.some(t=>{let r=n.top<t.top,i=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return r||i||o||s})}function uX(n,e){return new JI(n.get($I),n.get(qg),n.get(vr),e)}var JI=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();B3(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},cX=(()=>{class n{_injector=Me(Di);constructor(){}noop=()=>new kx;close=t=>lX(this._injector,t);block=()=>aX(this._injector);reposition=t=>uX(this._injector,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QI=class{positionStrategy;scrollStrategy=new kx;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let r of t)e[r]!==void 0&&(this[r]=e[r])}}};var eT=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var hX=(()=>{class n{_attachedOverlays=[];_document=Me(wr);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fX=(()=>{class n extends hX{_ngZone=Me(vr);_renderer=Me(Es).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=ig(n)))(i||n)}})();static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dX=(()=>{class n extends hX{_platform=Me(Vg);_ngZone=Me(vr);_renderer=Me(Es).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let r=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,i),o.listen(r,"click",this._clickListener,i),o.listen(r,"auxclick",this._clickListener,i),o.listen(r,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=rp(t)};_clickListener=t=>{let r=rp(t),i=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(nX(a.overlayElement,r)||nX(a.overlayElement,i))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=ig(n)))(i||n)}})();static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nX(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var pX=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=lr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),gX=(()=>{class n{_platform=Me(Vg);_containerElement;_document=Me(wr);_styleLoader=Me(Nx);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||N3()){let i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let r=this._document.createElement("div");r.classList.add(t),N3()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(pX)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),j3=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,r,i){this._renderer=t,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},tT=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new en;_attachments=new en;_detachments=new en;_positionStrategy;_scrollStrategy;_locationChanges=gr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new en;_outsidePointerEvents=new en;_afterNextRenderRef;constructor(e,t,r,i,o,s,a,l,c,f=!1,d,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._renderer=y,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ud(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=dt(dt({},this._config),e),this._updateElementSize()}setDirection(e){this._config=tn(dt({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=_o(this._config.width),e.height=_o(this._config.height),e.minWidth=_o(this._config.minWidth),e.minHeight=_o(this._config.minHeight),e.maxWidth=_o(this._config.maxWidth),e.maxHeight=_o(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new j3(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,r){let i=P3(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=ud(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},rX="cdk-overlay-connected-position-bounding-box",v_e=/([A-Za-z%]+)$/;function mX(n,e){return new nT(e,n.get(qg),n.get(wr),n.get(Vg),n.get(gX))}var nT=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new en;_resizeSubscription=gr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(rX),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),f=this._getOverlayFit(c,t,r,a);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(f,c,r)){o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<f.visibleArea)&&(s={overlayFit:f,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(let c of o){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>l&&(l=f,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Wg(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(rX),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i;if(r.originX=="center")i=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i=r.originX=="start"?s:a}t.left<0&&(i-=t.left);let o;return r.originY=="center"?o=e.top+e.height/2:o=r.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i;r.overlayX=="center"?i=-t.width/2:r.overlayX==="start"?i=this._isRtl()?-t.width:0:i=this._isRtl()?0:-t.width;let o;return r.overlayY=="center"?o=-t.height/2:o=r.overlayY=="top"?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){let o=oX(t),{x:s,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(a+=c);let f=0-s,d=s+o.width-r.width,y=0-a,p=a+o.height-r.height,_=this._subtractOverflows(o.width,f,d),x=this._subtractOverflows(o.height,y,p),b=_*x;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:x===o.height,fitsInViewportHorizontally:_==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){let i=r.bottom-t.y,o=r.right-t.x,s=iX(this._overlayRef.getConfig().minHeight),a=iX(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=i,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=oX(t),o=this._viewportRect,s=Math.max(e.x+i.width-o.width,0),a=Math.max(e.y+i.height-o.height,0),l=Math.max(o.top-r.top-e.y,0),c=Math.max(o.left-r.left-e.x,0),f=0,d=0;return i.width<=o.width?f=c||-s:f=e.x<this._viewportMargin?o.left-r.left-e.x:0,i.height<=o.height?d=l||-a:d=e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:f,y:d},{x:e.x+f,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!x_e(this._lastScrollVisibility,r)){let i=new eT(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){let r=this._viewportRect,i=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=r.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let p=Math.min(r.bottom-e.y+r.top,e.y),_=this._lastBoundingBoxSize.height;o=p*2,s=e.y-p,o>_&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-_/2)}let l=t.overlayX==="start"&&!i||t.overlayX==="end"&&i,c=t.overlayX==="end"&&!i||t.overlayX==="start"&&i,f,d,y;if(c)y=r.width-e.x+this._viewportMargin*2,f=e.x-this._viewportMargin;else if(l)d=e.x,f=r.right-e.x;else{let p=Math.min(r.right-e.x+r.left,e.x),_=this._lastBoundingBoxSize.width;f=p*2,d=e.x-p,f>_&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-_/2)}return{top:s,left:d,bottom:a,right:y,width:f,height:o}}_setBoundingBoxStyles(e,t){let r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=_o(r.height),i.top=_o(r.top),i.bottom=_o(r.bottom),i.width=_o(r.width),i.left=_o(r.left),i.right=_o(r.right),t.overlayX==="center"?i.alignItems="center":i.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?i.justifyContent="center":i.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=_o(o)),s&&(i.maxWidth=_o(s))}this._lastBoundingBoxSize=r,Wg(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Wg(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Wg(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();Wg(r,this._getExactOverlayY(t,e,f)),Wg(r,this._getExactOverlayX(t,e,f))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=_o(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=_o(s.maxWidth):o&&(r.maxWidth="")),Wg(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=_o(o.y);return i}_getExactOverlayX(e,t,r){let i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(o.x+this._overlayRect.width)}px`}else i.left=_o(o.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:tX(e,r),isOriginOutsideView:B3(e,r),isOverlayClipped:tX(t,r),isOverlayOutsideView:B3(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&P3(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof li)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}};function Wg(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function iX(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(v_e);return!t||t==="px"?parseFloat(e):null}return n||null}function oX(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function x_e(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var sX="cdk-global-overlay-wrapper";function yX(n){return new rT}var rT=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(sX),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),f=this._xPosition,d=this._xOffset,y=this._overlayRef.getConfig().direction==="rtl",p="",_="",x="";l?x="flex-start":f==="center"?(x="center",y?_=d:p=d):y?f==="left"||f==="end"?(x="flex-end",p=d):(f==="right"||f==="start")&&(x="flex-start",_=d):f==="left"||f==="start"?(x="flex-start",p=d):(f==="right"||f==="end")&&(x="flex-end",_=d),e.position=this._cssPosition,e.marginLeft=l?"0":p,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":_,t.justifyContent=x,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(sX),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},_X=(()=>{class n{_injector=Me(Di);constructor(){}global(){return yX()}flexibleConnectedTo(t){return mX(this._injector,t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vX(n,e){n.get(Nx).load(pX);let t=n.get(gX),r=n.get(wr),i=n.get(QY),o=n.get(au),s=n.get(WI),a=r.createElement("div"),l=r.createElement("div");l.id=i.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),t.getContainerElement().appendChild(a);let c=new XI(l,o,n),f=new QI(e),d=n.get(_0,null,{optional:!0})||n.get(Es).createRenderer(null,null);return f.direction=f.direction||s.value,new tT(c,a,l,f,n.get(vr),n.get(fX),r,n.get(pd),n.get(dX),e?.disableAnimations??n.get(iM,null,{optional:!0})==="NoopAnimations",n.get(Oi),d)}var U3=(()=>{class n{scrollStrategies=Me(cX);_positionBuilder=Me(_X);_injector=Me(Di);constructor(){}create(t){return vX(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ls=63710088e-1,wX={centimeters:ls*100,centimetres:ls*100,degrees:360/(2*Math.PI),feet:ls*3.28084,inches:ls*39.37,kilometers:ls/1e3,kilometres:ls/1e3,meters:ls,metres:ls,miles:ls/1609.344,millimeters:ls*1e3,millimetres:ls*1e3,nauticalmiles:ls/1852,radians:1,yards:ls*1.0936};function $g(n,e,t={}){let r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function cc(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!xX(n[0])||!xX(n[1]))throw new Error("coordinates must contain numbers");return $g({type:"Point",coordinates:n},e,t)}function EX(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return $g({type:"LineString",coordinates:n},e,t)}function iT(n,e={}){let t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function oT(n,e="kilometers"){let t=wX[e];if(!t)throw new Error(e+" units is invalid");return n*t}function sT(n,e="kilometers"){let t=wX[e];if(!t)throw new Error(e+" units is invalid");return n/t}function Ox(n){return n%(2*Math.PI)*180/Math.PI}function sl(n){return n%360*Math.PI/180}function xX(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function ip(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bX(n){return n.type==="Feature"?n.geometry:n}function G3(n,e,t={}){if(t.final===!0)return w_e(n,e);let r=ip(n),i=ip(e),o=sl(r[0]),s=sl(i[0]),a=sl(r[1]),l=sl(i[1]),c=Math.sin(s-o)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-o);return Ox(Math.atan2(c,f))}function w_e(n,e){let t=G3(e,n);return t=(t+180)%360,t}function SX(n,e,t,r={}){let i=ip(n),o=sl(i[0]),s=sl(i[1]),a=sl(t),l=sT(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a)),f=o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c)),d=Ox(f),y=Ox(c);return i[2]!==void 0?cc([d,y,i[2]],r.properties):cc([d,y],r.properties)}function aT(n,e,t={}){var r=ip(n),i=ip(e),o=sl(i[1]-r[1]),s=sl(i[0]-r[0]),a=sl(r[1]),l=sl(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return oT(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),t.units)}function z3(n,e,t={}){let i=bX(n).coordinates,o=0;for(let s=0;s<i.length&&!(e>=o&&s===i.length-1);s++)if(o>=e){let a=e-o;if(a){let l=G3(i[s],i[s-1])-180;return SX(i[s],a,l,t)}else return cc(i[s])}else o+=aT(i[s],i[s+1],t);return cc(i[i.length-1])}function a_(n,e,t){if(n!==null)for(var r,i,o,s,a,l,c,f=0,d=0,y,p=n.type,_=p==="FeatureCollection",x=p==="Feature",b=_?n.features.length:1,S=0;S<b;S++){c=_?n.features[S].geometry:x?n.geometry:n,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var T=0;T<a;T++){var A=0,N=0;if(s=y?c.geometries[T]:c,s!==null){l=s.coordinates;var k=s.type;switch(f=t&&(k==="Polygon"||k==="MultiPolygon")?1:0,k){case null:break;case"Point":if(e(l,d,S,A,N)===!1)return!1;d++,A++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],d,S,A,N)===!1)return!1;d++,k==="MultiPoint"&&A++}k==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],d,S,A,N)===!1)return!1;d++}k==="MultiLineString"&&A++,k==="Polygon"&&N++}k==="Polygon"&&A++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(N=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-f;o++){if(e(l[r][i][o],d,S,A,N)===!1)return!1;d++}N++}A++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(a_(s.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function V3(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function Fx(n,e){var t,r,i,o,s,a,l,c,f,d,y=0,p=n.type==="FeatureCollection",_=n.type==="Feature",x=p?n.features.length:1;for(t=0;t<x;t++){for(a=p?n.features[t].geometry:_?n.geometry:n,c=p?n.features[t].properties:_?n.properties:{},f=p?n.features[t].bbox:_?n.bbox:void 0,d=p?n.features[t].id:_?n.id:void 0,l=a?a.type==="GeometryCollection":!1,s=l?a.geometries.length:1,i=0;i<s;i++){if(o=l?a.geometries[i]:a,o===null){if(e(null,y,c,f,d)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,y,c,f,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(e(o.geometries[r],y,c,f,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function CX(n,e,t){var r=t;return Fx(n,function(i,o,s,a,l){o===0&&t===void 0?r=i:r=e(r,i,o,s,a,l)}),r}function E_e(n,e){Fx(n,function(t,r,i,o,s){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e($g(t,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var f=t.coordinates[c],d={type:l,coordinates:f};if(e($g(d,i),r,c)===!1)return!1}})}function b_e(n,e){E_e(n,function(t,r,i){var o=0;if(t.geometry){var s=t.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,l=0,c=0,f=0;if(a_(t,function(d,y,p,_,x){if(a===void 0||r>l||_>c||x>f){a=d,l=r,c=_,f=x,o=0;return}var b=EX([a,d],t.properties);if(e(b,r,i,x,o)===!1)return!1;o++,a=d})===!1)return!1}}})}function IX(n,e,t){var r=t,i=!1;return b_e(n,function(o,s,a,l,c){i===!1&&t===void 0?r=o:r=e(r,o,s,a,l,c),i=!0}),r}function q3(n){return CX(n,(e,t)=>e+S_e(t),0)}function S_e(n){let e=0,t;switch(n.type){case"Polygon":return TX(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=TX(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function TX(n){let e=0;if(n&&n.length>0){e+=Math.abs(DX(n[0]));for(let t=1;t<n.length;t++)e-=Math.abs(DX(n[t]))}return e}var C_e=ls*ls/2,H3=Math.PI/180;function DX(n){let e=n.length-1;if(e<=2)return 0;let t=0,r=0;for(;r<e;){let i=n[r],o=n[r+1===e?0:r+1],s=n[r+2>=e?(r+2)%e:r+2],a=i[0]*H3,l=o[1]*H3,c=s[0]*H3;t+=(c-a)*Math.sin(l),r++}return t*C_e}function Bx(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;let t=[1/0,1/0,-1/0,-1/0];return a_(n,r=>{t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}function AX(n,e={}){let t=Bx(n),r=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return cc([r,i],e.properties,e)}var iZ=$l(RX(),1);function al(){return new uT}function uT(){this.reset()}uT.prototype={constructor:uT,reset:function(){this.s=this.t=0},add:function(n){MX(lT,n,this.t),MX(this,lT.s,this.s),this.s?this.t+=lT.t:this.s=lT.t},valueOf:function(){return this.s}};var lT=new uT;function MX(n,e,t){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}var En=1e-6;var tr=Math.PI,Ko=tr/2,cT=tr/4,Ms=tr*2,Da=180/tr,Vi=tr/180,br=Math.abs,hc=Math.atan,us=Math.atan2,yn=Math.cos;var hT=Math.exp;var jx=Math.log;var _n=Math.sin;var Mo=Math.sqrt,Ux=Math.tan;function fT(n){return n>1?0:n<-1?tr:Math.acos(n)}function Jo(n){return n>1?Ko:n<-1?-Ko:Math.asin(n)}function Aa(){}function dT(n,e){n&&PX.hasOwnProperty(n.type)&&PX[n.type](n,e)}var NX={Feature:function(n,e){dT(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)dT(t[r].geometry,e)}},PX={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){Y3(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)Y3(t[r],e,0)},Polygon:function(n,e){LX(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)LX(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)dT(t[r],e)}};function Y3(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function LX(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)Y3(n[t],e,1);e.polygonEnd()}function op(n,e){n&&NX.hasOwnProperty(n.type)?NX[n.type](n,e):dT(n,e)}var I_e=al(),eht=al();function l_(n){return[us(n[1],n[0]),Jo(n[2])]}function fc(n){var e=n[0],t=n[1],r=yn(t);return[r*yn(e),r*_n(e),_n(t)]}function Gx(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Yg(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function pT(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function zx(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function u_(n){var e=Mo(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var cht=al();function gT(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return r=e.invert(r,i),r&&n.invert(r[0],r[1])}),t}function X3(n,e){return[n>tr?n-Ms:n<-tr?n+Ms:n,e]}X3.invert=X3;function Z3(n,e,t){return(n%=Ms)?e||t?gT(OX(n),FX(e,t)):OX(n):e||t?FX(e,t):X3}function kX(n){return function(e,t){return e+=n,[e>tr?e-Ms:e<-tr?e+Ms:e,t]}}function OX(n){var e=kX(n);return e.invert=kX(-n),e}function FX(n,e){var t=yn(n),r=_n(n),i=yn(e),o=_n(e);function s(a,l){var c=yn(l),f=yn(a)*c,d=_n(a)*c,y=_n(l),p=y*t+f*r;return[us(d*i-p*o,f*t-y*r),Jo(p*i+d*o)]}return s.invert=function(a,l){var c=yn(l),f=yn(a)*c,d=_n(a)*c,y=_n(l),p=y*i-d*o;return[us(d*i+y*o,f*t+p*r),Jo(p*t-f*r)]},s}function jX(n,e,t,r,i,o){if(t){var s=yn(e),a=_n(e),l=r*t;i==null?(i=e+r*Ms,o=e-l/2):(i=BX(s,i),o=BX(s,o),(r>0?i<o:i>o)&&(i+=r*Ms));for(var c,f=i;r>0?f>o:f<o;f-=l)c=l_([s,-a*yn(f),-a*_n(f)]),n.point(c[0],c[1])}}function BX(n,e){e=fc(e),e[0]-=n,u_(e);var t=fT(-e[1]);return((-e[2]<0?-t:t)+Ms-En)%Ms}function mT(){var n=[],e;return{point:function(t,r){e.push([t,r])},lineStart:function(){n.push(e=[])},lineEnd:Aa,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function UX(n,e,t,r,i,o){var s=n[0],a=n[1],l=e[0],c=e[1],f=0,d=1,y=l-s,p=c-a,_;if(_=t-s,!(!y&&_>0)){if(_/=y,y<0){if(_<f)return;_<d&&(d=_)}else if(y>0){if(_>d)return;_>f&&(f=_)}if(_=i-s,!(!y&&_<0)){if(_/=y,y<0){if(_>d)return;_>f&&(f=_)}else if(y>0){if(_<f)return;_<d&&(d=_)}if(_=r-a,!(!p&&_>0)){if(_/=p,p<0){if(_<f)return;_<d&&(d=_)}else if(p>0){if(_>d)return;_>f&&(f=_)}if(_=o-a,!(!p&&_<0)){if(_/=p,p<0){if(_>d)return;_>f&&(f=_)}else if(p>0){if(_<f)return;_<d&&(d=_)}return f>0&&(n[0]=s+f*y,n[1]=a+f*p),d<1&&(e[0]=s+d*y,e[1]=a+d*p),!0}}}}}function c_(n,e){return br(n[0]-e[0])<En&&br(n[1]-e[1])<En}function yT(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function _T(n,e,t,r,i){var o=[],s=[],a,l;if(n.forEach(function(_){if(!((x=_.length-1)<=0)){var x,b=_[0],S=_[x],T;if(c_(b,S)){for(i.lineStart(),a=0;a<x;++a)i.point((b=_[a])[0],b[1]);i.lineEnd();return}o.push(T=new yT(b,_,null,!0)),s.push(T.o=new yT(b,null,T,!1)),o.push(T=new yT(S,_,null,!1)),s.push(T.o=new yT(S,null,T,!0))}}),!!o.length){for(s.sort(e),GX(o),GX(s),a=0,l=s.length;a<l;++a)s[a].e=t=!t;for(var c=o[0],f,d;;){for(var y=c,p=!0;y.v;)if((y=y.n)===c)return;f=y.z,i.lineStart();do{if(y.v=y.o.v=!0,y.e){if(p)for(a=0,l=f.length;a<l;++a)i.point((d=f[a])[0],d[1]);else r(y.x,y.n.x,1,i);y=y.n}else{if(p)for(f=y.p.z,a=f.length-1;a>=0;--a)i.point((d=f[a])[0],d[1]);else r(y.x,y.p.x,-1,i);y=y.p}y=y.o,f=y.z,p=!p}while(!y.v);i.lineEnd()}}}function GX(n){if(e=n.length){for(var e,t=0,r=n[0],i;++t<e;)r.n=i=n[t],i.p=r,r=i;r.n=i=n[0],i.p=r}}function sp(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function K3(n){return n.length===1&&(n=T_e(n)),{left:function(e,t,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r},right:function(e,t,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function T_e(n){return function(e,t){return sp(n(e),t)}}var zX=K3(sp),D_e=zX.right,A_e=zX.left;var VX=Array.prototype,M_e=VX.slice,N_e=VX.map;var nft=Math.sqrt(50),rft=Math.sqrt(10),ift=Math.sqrt(2);function Vx(n){for(var e=n.length,t,r=-1,i=0,o,s;++r<e;)i+=n[r].length;for(o=new Array(i);--e>=0;)for(s=n[e],t=s.length;--t>=0;)o[--i]=s[t];return o}var Hx=1e9,xT=-Hx;function J3(n,e,t,r){function i(c,f){return n<=c&&c<=t&&e<=f&&f<=r}function o(c,f,d,y){var p=0,_=0;if(c==null||(p=s(c,d))!==(_=s(f,d))||l(c,f)<0^d>0)do y.point(p===0||p===3?n:t,p>1?r:e);while((p=(p+d+4)%4)!==_);else y.point(f[0],f[1])}function s(c,f){return br(c[0]-n)<En?f>0?0:3:br(c[0]-t)<En?f>0?2:1:br(c[1]-e)<En?f>0?1:0:f>0?3:2}function a(c,f){return l(c.x,f.x)}function l(c,f){var d=s(c,1),y=s(f,1);return d!==y?d-y:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=mT(),y,p,_,x,b,S,T,A,N,k,W,X={point:Y,lineStart:v,lineEnd:I,polygonStart:V,polygonEnd:B};function Y(j,Q){i(j,Q)&&f.point(j,Q)}function $(){for(var j=0,Q=0,Z=p.length;Q<Z;++Q)for(var q=p[Q],K=1,oe=q.length,_e=q[0],F,ee,ce=_e[0],pe=_e[1];K<oe;++K)F=ce,ee=pe,_e=q[K],ce=_e[0],pe=_e[1],ee<=r?pe>r&&(ce-F)*(r-ee)>(pe-ee)*(n-F)&&++j:pe<=r&&(ce-F)*(r-ee)<(pe-ee)*(n-F)&&--j;return j}function V(){f=d,y=[],p=[],W=!0}function B(){var j=$(),Q=W&&j,Z=(y=Vx(y)).length;(Q||Z)&&(c.polygonStart(),Q&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),Z&&_T(y,a,j,o,c),c.polygonEnd()),f=c,y=p=_=null}function v(){X.point=M,p&&p.push(_=[]),k=!0,N=!1,T=A=NaN}function I(){y&&(M(x,b),S&&N&&d.rejoin(),y.push(d.result())),X.point=Y,N&&f.lineEnd()}function M(j,Q){var Z=i(j,Q);if(p&&_.push([j,Q]),k)x=j,b=Q,S=Z,k=!1,Z&&(f.lineStart(),f.point(j,Q));else if(Z&&N)f.point(j,Q);else{var q=[T=Math.max(xT,Math.min(Hx,T)),A=Math.max(xT,Math.min(Hx,A))],K=[j=Math.max(xT,Math.min(Hx,j)),Q=Math.max(xT,Math.min(Hx,Q))];UX(q,K,n,e,t,r)?(N||(f.lineStart(),f.point(q[0],q[1])),f.point(K[0],K[1]),Z||f.lineEnd(),W=!1):Z&&(f.lineStart(),f.point(j,Q),W=!1)}T=j,A=Q,N=Z}return X}}var Q3=al();function e4(n,e){var t=e[0],r=e[1],i=[_n(t),-yn(t),0],o=0,s=0;Q3.reset();for(var a=0,l=n.length;a<l;++a)if(f=(c=n[a]).length)for(var c,f,d=c[f-1],y=d[0],p=d[1]/2+cT,_=_n(p),x=yn(p),b=0;b<f;++b,y=T,_=N,x=k,d=S){var S=c[b],T=S[0],A=S[1]/2+cT,N=_n(A),k=yn(A),W=T-y,X=W>=0?1:-1,Y=X*W,$=Y>tr,V=_*N;if(Q3.add(us(V*X*_n(Y),x*k+V*yn(Y))),o+=$?W+X*Ms:W,$^y>=t^T>=t){var B=Yg(fc(d),fc(S));u_(B);var v=Yg(i,B);u_(v);var I=($^W>=0?-1:1)*Jo(v[2]);(r>I||r===I&&(B[0]||B[1]))&&(s+=$^W>=0?1:-1)}}return(o<-En||o<En&&Q3<-En)^s&1}var Xdt=al();function qx(n){return n}var ppt=al(),gpt=al();var h_=1/0,wT=h_,Wx=-h_,ET=Wx,z_e={point:V_e,lineStart:Aa,lineEnd:Aa,polygonStart:Aa,polygonEnd:Aa,result:function(){var n=[[h_,wT],[Wx,ET]];return Wx=ET=-(wT=h_=1/0),n}};function V_e(n,e){n<h_&&(h_=n),n>Wx&&(Wx=n),e<wT&&(wT=e),e>ET&&(ET=e)}var bT=z_e;function t4(n){this._context=n}t4.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,Ms);break}}},result:Aa};var Tpt=al();function n4(){this._string=[]}n4.prototype={_radius:4.5,_circle:WX(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._string.push("M",n,",",e),this._point=1;break}case 1:{this._string.push("L",n,",",e);break}default:{this._circle==null&&(this._circle=WX(this._radius)),this._string.push("M",n,",",e,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function WX(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function ST(n,e,t,r){return function(i,o){var s=e(o),a=i.invert(r[0],r[1]),l=mT(),c=e(l),f=!1,d,y,p,_={point:x,lineStart:S,lineEnd:T,polygonStart:function(){_.point=A,_.lineStart=N,_.lineEnd=k,y=[],d=[]},polygonEnd:function(){_.point=x,_.lineStart=S,_.lineEnd=T,y=Vx(y);var W=e4(d,a);y.length?(f||(o.polygonStart(),f=!0),_T(y,q_e,W,t,o)):W&&(f||(o.polygonStart(),f=!0),o.lineStart(),t(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),y=d=null},sphere:function(){o.polygonStart(),o.lineStart(),t(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function x(W,X){var Y=i(W,X);n(W=Y[0],X=Y[1])&&o.point(W,X)}function b(W,X){var Y=i(W,X);s.point(Y[0],Y[1])}function S(){_.point=b,s.lineStart()}function T(){_.point=x,s.lineEnd()}function A(W,X){p.push([W,X]);var Y=i(W,X);c.point(Y[0],Y[1])}function N(){c.lineStart(),p=[]}function k(){A(p[0][0],p[0][1]),c.lineEnd();var W=c.clean(),X=l.result(),Y,$=X.length,V,B,v;if(p.pop(),d.push(p),p=null,!!$){if(W&1){if(B=X[0],(V=B.length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),Y=0;Y<V;++Y)o.point((v=B[Y])[0],v[1]);o.lineEnd()}return}$>1&&W&2&&X.push(X.pop().concat(X.shift())),y.push(X.filter(H_e))}}return _}}function H_e(n){return n.length>1}function q_e(n,e){return((n=n.x)[0]<0?n[1]-Ko-En:Ko-n[1])-((e=e.x)[0]<0?e[1]-Ko-En:Ko-e[1])}var r4=ST(function(){return!0},W_e,Y_e,[-tr,-Ko]);function W_e(n){var e=NaN,t=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?tr:-tr,l=br(o-e);br(l-tr)<En?(n.point(e,t=(t+s)/2>0?Ko:-Ko),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(o,t),i=0):r!==a&&l>=tr&&(br(e-r)<En&&(e-=r*En),br(o-a)<En&&(o-=a*En),t=$_e(e,t,o,s),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),i=0),n.point(e=o,t=s),r=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function $_e(n,e,t,r){var i,o,s=_n(n-t);return br(s)>En?hc((_n(e)*(o=yn(r))*_n(t)-_n(r)*(i=yn(e))*_n(n))/(i*o*s)):(e+r)/2}function Y_e(n,e,t,r){var i;if(n==null)i=t*Ko,r.point(-tr,i),r.point(0,i),r.point(tr,i),r.point(tr,0),r.point(tr,-i),r.point(0,-i),r.point(-tr,-i),r.point(-tr,0),r.point(-tr,i);else if(br(n[0]-e[0])>En){var o=n[0]<e[0]?tr:-tr;i=t*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function $X(n,e){var t=yn(n),r=t>0,i=br(t)>En;function o(f,d,y,p){jX(p,n,e,y,f,d)}function s(f,d){return yn(f)*yn(d)>t}function a(f){var d,y,p,_,x;return{lineStart:function(){_=p=!1,x=1},point:function(b,S){var T=[b,S],A,N=s(b,S),k=r?N?0:c(b,S):N?c(b+(b<0?tr:-tr),S):0;if(!d&&(_=p=N)&&f.lineStart(),N!==p&&(A=l(d,T),(!A||c_(d,A)||c_(T,A))&&(T[0]+=En,T[1]+=En,N=s(T[0],T[1]))),N!==p)x=0,N?(f.lineStart(),A=l(T,d),f.point(A[0],A[1])):(A=l(d,T),f.point(A[0],A[1]),f.lineEnd()),d=A;else if(i&&d&&r^N){var W;!(k&y)&&(W=l(T,d,!0))&&(x=0,r?(f.lineStart(),f.point(W[0][0],W[0][1]),f.point(W[1][0],W[1][1]),f.lineEnd()):(f.point(W[1][0],W[1][1]),f.lineEnd(),f.lineStart(),f.point(W[0][0],W[0][1])))}N&&(!d||!c_(d,T))&&f.point(T[0],T[1]),d=T,p=N,y=k},lineEnd:function(){p&&f.lineEnd(),d=null},clean:function(){return x|(_&&p)<<1}}}function l(f,d,y){var p=fc(f),_=fc(d),x=[1,0,0],b=Yg(p,_),S=Gx(b,b),T=b[0],A=S-T*T;if(!A)return!y&&f;var N=t*S/A,k=-t*T/A,W=Yg(x,b),X=zx(x,N),Y=zx(b,k);pT(X,Y);var $=W,V=Gx(X,$),B=Gx($,$),v=V*V-B*(Gx(X,X)-1);if(!(v<0)){var I=Mo(v),M=zx($,(-V-I)/B);if(pT(M,X),M=l_(M),!y)return M;var j=f[0],Q=d[0],Z=f[1],q=d[1],K;Q<j&&(K=j,j=Q,Q=K);var oe=Q-j,_e=br(oe-tr)<En,F=_e||oe<En;if(!_e&&q<Z&&(K=Z,Z=q,q=K),F?_e?Z+q>0^M[1]<(br(M[0]-j)<En?Z:q):Z<=M[1]&&M[1]<=q:oe>tr^(j<=M[0]&&M[0]<=Q)){var ee=zx($,(-V+I)/B);return pT(ee,X),[M,l_(ee)]}}}function c(f,d){var y=r?n:tr-n,p=0;return f<-y?p|=1:f>y&&(p|=2),d<-y?p|=4:d>y&&(p|=8),p}return ST(s,a,o,r?[0,-n]:[-tr,n-tr])}function $x(n){return function(e){var t=new i4;for(var r in n)t[r]=n[r];return t.stream=e,t}}function i4(){}i4.prototype={constructor:i4,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Yx(n,e,t){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),o!=null&&n.clipExtent(null),op(t,n.stream(bT));var s=bT.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),l=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&n.clipExtent(o),n.scale(a*150).translate([l,c])}function CT(n,e,t){return Yx(n,[[0,0],e],t)}var YX=16,X_e=yn(30*Vi);function o4(n,e){return+e?K_e(n,e):Z_e(n)}function Z_e(n){return $x({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function K_e(n,e){function t(r,i,o,s,a,l,c,f,d,y,p,_,x,b){var S=c-r,T=f-i,A=S*S+T*T;if(A>4*e&&x--){var N=s+y,k=a+p,W=l+_,X=Mo(N*N+k*k+W*W),Y=Jo(W/=X),$=br(br(W)-1)<En||br(o-d)<En?(o+d)/2:us(k,N),V=n($,Y),B=V[0],v=V[1],I=B-r,M=v-i,j=T*I-S*M;(j*j/A>e||br((S*I+T*M)/A-.5)>.3||s*y+a*p+l*_<X_e)&&(t(r,i,o,s,a,l,B,v,$,N/=X,k/=X,W,x,b),b.point(B,v),t(B,v,$,N,k,W,c,f,d,y,p,_,x,b))}}return function(r){var i,o,s,a,l,c,f,d,y,p,_,x,b={point:S,lineStart:T,lineEnd:N,polygonStart:function(){r.polygonStart(),b.lineStart=k},polygonEnd:function(){r.polygonEnd(),b.lineStart=T}};function S(Y,$){Y=n(Y,$),r.point(Y[0],Y[1])}function T(){d=NaN,b.point=A,r.lineStart()}function A(Y,$){var V=fc([Y,$]),B=n(Y,$);t(d,y,f,p,_,x,d=B[0],y=B[1],f=Y,p=V[0],_=V[1],x=V[2],YX,r),r.point(d,y)}function N(){b.point=S,r.lineEnd()}function k(){T(),b.point=W,b.lineEnd=X}function W(Y,$){A(i=Y,$),o=d,s=y,a=p,l=_,c=x,b.point=A}function X(){t(d,y,f,p,_,x,o,s,i,a,l,c,YX,r),b.lineEnd=N,N()}return b}}var J_e=$x({point:function(n,e){this.stream.point(n*Vi,e*Vi)}});function dc(n){return s4(function(){return n})()}function s4(n){var e,t=150,r=480,i=250,o,s,a=0,l=0,c=0,f=0,d=0,y,p,_=null,x=r4,b=null,S,T,A,N=qx,k=.5,W=o4(B,k),X,Y;function $(M){return M=p(M[0]*Vi,M[1]*Vi),[M[0]*t+o,s-M[1]*t]}function V(M){return M=p.invert((M[0]-o)/t,(s-M[1])/t),M&&[M[0]*Da,M[1]*Da]}function B(M,j){return M=e(M,j),[M[0]*t+o,s-M[1]*t]}$.stream=function(M){return X&&Y===M?X:X=J_e(x(y,W(N(Y=M))))},$.clipAngle=function(M){return arguments.length?(x=+M?$X(_=M*Vi,6*Vi):(_=null,r4),I()):_*Da},$.clipExtent=function(M){return arguments.length?(N=M==null?(b=S=T=A=null,qx):J3(b=+M[0][0],S=+M[0][1],T=+M[1][0],A=+M[1][1]),I()):b==null?null:[[b,S],[T,A]]},$.scale=function(M){return arguments.length?(t=+M,v()):t},$.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],v()):[r,i]},$.center=function(M){return arguments.length?(a=M[0]%360*Vi,l=M[1]%360*Vi,v()):[a*Da,l*Da]},$.rotate=function(M){return arguments.length?(c=M[0]%360*Vi,f=M[1]%360*Vi,d=M.length>2?M[2]%360*Vi:0,v()):[c*Da,f*Da,d*Da]},$.precision=function(M){return arguments.length?(W=o4(B,k=M*M),I()):Mo(k)},$.fitExtent=function(M,j){return Yx($,M,j)},$.fitSize=function(M,j){return CT($,M,j)};function v(){p=gT(y=Z3(c,f,d),e);var M=e(a,l);return o=r-M[0]*t,s=i+M[1]*t,I()}function I(){return X=Y=null,$}return function(){return e=n.apply(this,arguments),$.invert=e.invert&&V,v()}}function IT(n){return function(e,t){var r=yn(e),i=yn(t),o=n(r*i);return[o*i*_n(e),o*_n(t)]}}function nh(n){return function(e,t){var r=Mo(e*e+t*t),i=n(r),o=_n(i),s=yn(i);return[us(e*o,r*s),Jo(r&&t*o/r)]}}var JX=IT(function(n){return Mo(2/(1+n))});JX.invert=nh(function(n){return 2*Jo(n/2)});var a4=IT(function(n){return(n=fT(n))&&n/_n(n)});a4.invert=nh(function(n){return n});function l4(){return dc(a4).scale(79.4188).clipAngle(180-.001)}function u4(n,e){return[n,jx(Ux((Ko+e)/2))]}u4.invert=function(n,e){return[n,2*hc(hT(e))-Ko]};function TT(n,e){return[n,e]}TT.invert=TT;function QX(n,e){var t=yn(e),r=yn(n)*t;return[t*_n(n)/r,_n(e)/r]}QX.invert=nh(hc);function eZ(n,e){var t=e*e,r=t*t;return[n*(.8707-.131979*t+r*(-.013791+r*(.003971*t-.001529*r))),e*(1.007226+t*(.015085+r*(-.044475+.028874*t-.005916*r)))]}eZ.invert=function(n,e){var t=e,r=25,i;do{var o=t*t,s=o*o;t-=i=(t*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-e)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(br(i)>En&&--r>0);return[n/(.8707+(o=t*t)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),t]};function tZ(n,e){return[yn(e)*_n(n),_n(e)]}tZ.invert=nh(Jo);function nZ(n,e){var t=yn(e),r=1+yn(n)*t;return[t*_n(n)/r,_n(e)/r]}nZ.invert=nh(function(n){return 2*hc(n)});function rZ(n,e){return[jx(Ux((Ko+e)/2)),-n]}rZ.invert=function(n,e){return[-e,2*hc(hT(n))-Ko]};var{BufferOp:tve,GeoJSONReader:nve,GeoJSONWriter:rve}=iZ.default;function c4(n,e,t){t=t||{};var r=t.units||"kilometers",i=t.steps||8;if(!n)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(n.type){case"GeometryCollection":return Fx(n,function(s){var a=DT(s,e,r,i);a&&o.push(a)}),iT(o);case"FeatureCollection":return V3(n,function(s){var a=DT(s,e,r,i);a&&V3(a,function(l){l&&o.push(l)})}),iT(o)}return DT(n,e,r,i)}function DT(n,e,t,r){var i=n.properties||{},o=n.type==="Feature"?n.geometry:n;if(o.type==="GeometryCollection"){var s=[];return Fx(n,function(x){var b=DT(x,e,t,r);b&&s.push(b)}),iT(s)}var a=ive(o),l={type:o.type,coordinates:sZ(o.coordinates,a)},c=new nve,f=c.read(l),d=oT(sT(e,t),"meters"),y=tve.bufferOp(f,d,r),p=new rve;if(y=p.write(y),!oZ(y.coordinates)){var _={type:y.type,coordinates:aZ(y.coordinates,a)};return $g(_,i)}}function oZ(n){return Array.isArray(n[0])?oZ(n[0]):isNaN(n[0])}function sZ(n,e){return typeof n[0]!="object"?e(n):n.map(function(t){return sZ(t,e)})}function aZ(n,e){return typeof n[0]!="object"?e.invert(n):n.map(function(t){return aZ(t,e)})}function ive(n){var e=AX(n).geometry.coordinates,t=[-e[0],-e[1]];return l4().rotate(t).scale(ls)}function h4(n,e={}){let t=0,r=0,i=0;return a_(n,function(o){t+=o[0],r+=o[1],i++},!0),cc([t/i,r/i],e.properties)}function AT(n,e={}){return IX(n,(t,r)=>{let i=r.geometry.coordinates;return t+aT(i[0],i[1],e)},0)}var uZ=23283064365386963e-26,ove=12,cZ=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),f4=0,RT=1,Xx=2,MT=5,NT=class{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){let i=this.readVarint(),o=i>>3,s=this.pos;this.type=i&7,e(o,t,this),this.pos===s&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){let e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){let e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readSFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readFloat(){let e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){let e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){let t=this.buf,r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,sve(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){let e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=ove&&cZ?cZ.decode(this.buf.subarray(t,e)):vve(this.buf,t,e)}readBytes(){let e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){let r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Xx?this.readVarint()+this.pos:this.pos+1}skip(e){let t=e&7;if(t===f4)for(;this.buf[this.pos++]>127;);else if(t===Xx)this.pos=this.readVarint()+this.pos;else if(t===MT)this.pos+=4;else if(t===RT)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){let r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*uZ),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*uZ),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){ave(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;let t=this.pos;this.pos=xve(this.buf,e,this.pos);let r=this.pos-t;r>=128&&hZ(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){let t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;let r=this.pos;e(t,this);let i=this.pos-r;i>=128&&hZ(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Xx),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,cve,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,hve,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,pve,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,fve,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,dve,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,gve,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,mve,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,yve,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,_ve,t)}writeBytesField(e,t){this.writeTag(e,Xx),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,MT),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,MT),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,RT),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,RT),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,f4),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,f4),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Xx),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,MT),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,RT),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}};function sve(n,e,t){let r=t.buf,i,o;if(o=r[t.pos++],i=(o&112)>>4,o<128||(o=r[t.pos++],i|=(o&127)<<3,o<128)||(o=r[t.pos++],i|=(o&127)<<10,o<128)||(o=r[t.pos++],i|=(o&127)<<17,o<128)||(o=r[t.pos++],i|=(o&127)<<24,o<128)||(o=r[t.pos++],i|=(o&1)<<31,o<128))return f_(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function f_(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function ave(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),lve(t,r,e),uve(r,e)}function lve(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function uve(n,e){let t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function hZ(n,e,t){let r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function cve(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function hve(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function fve(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function dve(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function pve(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function gve(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function mve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function yve(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function _ve(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function vve(n,e,t){let r="",i=e;for(;i<t;){let o=n[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>t)break;let l,c,f;a===1?o<128&&(s=o):a===2?(l=n[i+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=n[i+1],c=n[i+2],(l&192)===128&&(c&192)===128&&(s=(o&15)<<12|(l&63)<<6|c&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=n[i+1],c=n[i+2],f=n[i+3],(l&192)===128&&(c&192)===128&&(f&192)===128&&(s=(o&15)<<18|(l&63)<<12|(c&63)<<6|f&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),i+=a}return r}function xve(n,e,t){for(let r=0,i,o;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=i;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}var d4=class extends Hd{constructor(e){super(),e=e||{},this.dataProjection=new Vw({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Za,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;let o=e.readVarint()+e.pos,s=1,a=0,l=0,c=0,f=0,d=0;for(;e.pos<o;){if(!a){let y=e.readVarint();s=y&7,a=y>>3}if(a--,s===1||s===2)l+=e.readSVarint(),c+=e.readSVarint(),s===1&&f>d&&(i.push(f),d=f),r.push(l,c),f+=2;else if(s===7)f>d&&(r.push(r[d],r[d+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>d&&(i.push(f),d=f)}createFeature_(e,t,r){let i=t.type;if(i===0)return null;let o,s=t.properties,a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;let l=[],c=[];this.readRawGeometry_(e,t,l,c);let f=Cve(i,c.length);if(this.featureClass===Za)o=new this.featureClass(f,l,c,2,s,a),o.transform(r.dataProjection);else{let d;if(f=="Polygon"){let _=Gb(l,c);d=_.length>1?new Al(l,"XY",_):new Wo(l,"XY",c)}else d=f==="Point"?new Ui(l,"XY"):f==="LineString"?new ho(l,"XY"):f==="MultiPoint"?new Dl(l,"XY"):f==="MultiLineString"?new Qs(l,"XY",c):null;let y=this.featureClass;o=new y,this.geometryName_&&o.setGeometryName(this.geometryName_);let p=Yo(d,!1,r);o.setGeometry(p),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){let r=this.layers_;t=this.adaptOptions(t);let i=sn(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;let o=new NT(e),s=o.readFields(wve,{}),a=[];for(let l in s){if(r&&!r.includes(l))continue;let c=s[l],f=c?[0,0,c.extent,c.extent]:null;i.setExtent(f);for(let d=0,y=c.length;d<y;++d){let p=Sve(o,c,d),_=this.createFeature_(o,p,t);_!==null&&a.push(_)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}};function wve(n,e,t){if(n===3){let r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Eve,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Eve(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null,i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function bve(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){let r=t.readVarint()+t.pos;for(;t.pos<r;){let i=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[i]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function Sve(n,e,t){n.pos=e.features[t];let r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(bve,i,r),i}function Cve(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}var p4=d4;var g4=class{read(e){if(!e)return null;if(typeof e=="string"){let t=Ja(e);return this.readFromDocument(t)}return Ka(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){It()}},PT=g4;var Ive="http://www.w3.org/1999/xlink";function Zx(n){return n.getAttributeNS(Ive,"href")}var ll=[null,"http://www.opengis.net/ows/1.1"],Tve=rt(ll,{ServiceIdentification:Oe(Kve),ServiceProvider:Oe(Qve),OperationsMetadata:Oe(Xve)}),m4=class extends PT{constructor(){super()}readFromNode(e){let t=Nt({},Tve,e,[]);return t||null}},Dve=rt(ll,{DeliveryPoint:Oe(bt),City:Oe(bt),AdministrativeArea:Oe(bt),PostalCode:Oe(bt),Country:Oe(bt),ElectronicMailAddress:Oe(bt)}),Ave=rt(ll,{Value:ta(e1e)}),Rve=rt(ll,{AllowedValues:Oe(zve)}),Mve=rt(ll,{Phone:Oe(Zve),Address:Oe(Gve)}),Nve=rt(ll,{HTTP:Oe($ve)}),Pve=rt(ll,{Get:ta(Wve),Post:void 0}),Lve=rt(ll,{DCP:Oe(qve)}),kve=rt(ll,{Operation:Yve}),Ove=rt(ll,{Voice:Oe(bt),Facsimile:Oe(bt)}),Fve=rt(ll,{Constraint:ta(Vve)}),Bve=rt(ll,{IndividualName:Oe(bt),PositionName:Oe(bt),ContactInfo:Oe(Hve)}),jve=rt(ll,{Abstract:Oe(bt),AccessConstraints:Oe(bt),Fees:Oe(bt),Title:Oe(bt),ServiceTypeVersion:Oe(bt),ServiceType:Oe(bt)}),Uve=rt(ll,{ProviderName:Oe(bt),ProviderSite:Oe(Zx),ServiceContact:Oe(Jve)});function Gve(n,e){return Nt({},Dve,n,e)}function zve(n,e){return Nt({},Ave,n,e)}function Vve(n,e){let t=n.getAttribute("name");if(t)return Nt({name:t},Rve,n,e)}function Hve(n,e){return Nt({},Mve,n,e)}function qve(n,e){return Nt({},Nve,n,e)}function Wve(n,e){let t=Zx(n);if(t)return Nt({href:t},Fve,n,e)}function $ve(n,e){return Nt({},Pve,n,e)}function Yve(n,e){let t=n.getAttribute("name"),r=Nt({},Lve,n,e);if(!r)return;let i=e[e.length-1];i[t]=r}function Xve(n,e){return Nt({},kve,n,e)}function Zve(n,e){return Nt({},Ove,n,e)}function Kve(n,e){return Nt({},jve,n,e)}function Jve(n,e){return Nt({},Bve,n,e)}function Qve(n,e){return Nt({},Uve,n,e)}function e1e(n,e){return bt(n)}var fZ=m4;var rh=[null,"http://www.opengis.net/wmts/1.0"],d_=[null,"http://www.opengis.net/ows/1.1"],t1e=rt(rh,{Contents:Oe(h1e)}),y4=class extends PT{constructor(){super(),this.owsParser_=new fZ}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=Nt(r,t1e,e,[]),r||null):null}},n1e=rt(rh,{Layer:ta(f1e),TileMatrixSet:ta(d1e)}),r1e=rt(rh,{Style:ta(p1e),Format:ta(bt),TileMatrixSetLink:ta(g1e),Dimension:ta(m1e),ResourceURL:ta(y1e)},rt(d_,{Title:Oe(bt),Abstract:Oe(bt),WGS84BoundingBox:Oe(pZ),BoundingBox:ta(_1e),Identifier:Oe(bt)})),i1e=rt(rh,{LegendURL:ta(v1e)},rt(d_,{Title:Oe(bt),Identifier:Oe(bt)})),o1e=rt(rh,{TileMatrixSet:Oe(bt),TileMatrixSetLimits:Oe(w1e)}),s1e=rt(rh,{TileMatrixLimits:As(E1e)}),a1e=rt(rh,{TileMatrix:Oe(bt),MinTileRow:Oe(Sa),MaxTileRow:Oe(Sa),MinTileCol:Oe(Sa),MaxTileCol:Oe(Sa)}),l1e=rt(rh,{Default:Oe(bt),Value:ta(bt)},rt(d_,{Identifier:Oe(bt)})),dZ=rt(d_,{LowerCorner:As(_4),UpperCorner:As(_4)}),u1e=rt(rh,{WellKnownScaleSet:Oe(bt),TileMatrix:ta(x1e)},rt(d_,{SupportedCRS:Oe(bt),Identifier:Oe(bt),BoundingBox:Oe(pZ)})),c1e=rt(rh,{TopLeftCorner:Oe(_4),ScaleDenominator:Oe(cr),TileWidth:Oe(Sa),TileHeight:Oe(Sa),MatrixWidth:Oe(Sa),MatrixHeight:Oe(Sa)},rt(d_,{Identifier:Oe(bt)}));function h1e(n,e){return Nt({},n1e,n,e)}function f1e(n,e){return Nt({},r1e,n,e)}function d1e(n,e){return Nt({},u1e,n,e)}function p1e(n,e){let t=Nt({},i1e,n,e);if(!t)return;let r=n.getAttribute("isDefault")==="true";return t.isDefault=r,t}function g1e(n,e){return Nt({},o1e,n,e)}function m1e(n,e){return Nt({},l1e,n,e)}function y1e(n,e){let t=n.getAttribute("format"),r=n.getAttribute("template"),i=n.getAttribute("resourceType"),o={};return t&&(o.format=t),r&&(o.template=r),i&&(o.resourceType=i),o}function pZ(n,e){let t=Nt([],dZ,n,e);if(t.length==2)return wi(t)}function _1e(n,e){let t=n.getAttribute("crs"),r=Nt([],dZ,n,e);if(r.length==2)return{extent:wi(r),crs:t}}function v1e(n,e){let t={};return t.format=n.getAttribute("format"),t.href=Zx(n),t}function _4(n,e){let t=bt(n).split(/\s+/);if(!t||t.length!=2)return;let r=+t[0],i=+t[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function x1e(n,e){return Nt({},c1e,n,e)}function w1e(n,e){return Nt([],s1e,n,e)}function E1e(n,e){return Nt({},a1e,n,e)}var gZ=y4;var LT=class n{STAC_API_URL="https://earth-search.aws.element84.com/v1/search";format=new fo;searchSTAC(e){return We(this,null,function*(){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return yield(yield fetch(this.STAC_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:Bx(t),collections:["sentinel-2-l2a"],limit:10,query:{"eo:cloud_cover":{lt:15}}})})).json()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};var b1e=(n,e)=>e.id;function S1e(n,e){n&1&&(Fi(0,"div",8),Rc(1,"div",10),Fi(2,"span",11),yt(3,"Searching Catalog..."),Qi()())}function C1e(n,e){if(n&1){let t=ui();Fi(0,"div",14),Av("click",function(i){let o=An(t).$implicit;return nn(2).displayLayer(o),Rn(i.stopPropagation())}),Fi(1,"div",15)(2,"span",16),yt(3),FM(4,"date"),Qi(),Fi(5,"span",17),yt(6),Qi()(),Fi(7,"div",18),$n(),Fi(8,"svg",6),Rc(9,"path",19),Qi()()()}if(n&2){let t=e.$implicit;Ct(3),Mc(BM(4,2,t.properties.datetime,"dd MMM yyyy")),Ct(3),uo("Cloud: %",t.properties["eo:cloud_cover"].toFixed(1))}}function I1e(n,e){if(n&1&&(Fi(0,"div",9)(1,"p",12),yt(2,"Available Scenes"),Qi(),Iv(3,C1e,10,5,"div",13,b1e),Qi()),n&2){let t=nn();Ct(3),Tv(t.results())}}var kT=class n{drawService=Me(il);stacService=Me(LT);mapService=Me(Ro);results=un([]);loading=un(!1);initSearchArea(){let e=this.mapService.map();e&&this.drawService.startStacDrawing(e,t=>We(this,null,function*(){try{this.loading.set(!0),this.results.set([]);let r=yield this.stacService.searchSTAC(t);r&&r.features&&(this.results.set([...r.features]),this.drawService.clearStacDrawings())}catch(r){console.error(r),alert(r.message)}finally{this.loading.set(!1)}}))}displayLayer(e){this.mapService.selectStacItem(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-stac-panel"]],decls:14,vars:2,consts:[[1,"w-80","bg-white/90","backdrop-blur-xl","rounded-2xl","shadow-2xl","border","border-white/50","p-4","ring-1","ring-black/5","animate-in","fade-in","zoom-in","duration-200"],[1,"flex","items-center","justify-between","mb-4","border-b","border-gray-100","pb-2"],[1,"text-sm","font-semibold","text-gray-800","flex","items-center","gap-2"],[1,"p-1","bg-indigo-100","rounded-md","text-indigo-600"],[1,"text-[10px]","bg-gray-100","text-gray-500","px-2","py-0.5","rounded-full","font-medium","italic"],[1,"w-full","flex","items-center","justify-center","gap-2","bg-indigo-600","hover:bg-indigo-700","text-white","py-2.5","rounded-xl","text-sm","font-medium","transition-all","shadow-md","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z","stroke-width","2"],[1,"mt-6","flex","flex-col","items-center","gap-3","py-4"],[1,"mt-4","space-y-2","max-h-64","overflow-y-auto","pr-1","scrollbar-thin","scrollbar-thumb-gray-200"],[1,"w-6","h-6","border-2","border-indigo-600","border-t-transparent","rounded-full","animate-spin"],[1,"text-xs","text-gray-500","font-medium","tracking-tight"],[1,"text-[11px]","font-bold","text-gray-400","uppercase","tracking-wider","mb-1"],[1,"group","p-3","border","border-gray-100","rounded-xl","cursor-pointer","hover:border-indigo-300","hover:bg-indigo-50/50","transition-all","flex","items-center","justify-between"],[1,"group","p-3","border","border-gray-100","rounded-xl","cursor-pointer","hover:border-indigo-300","hover:bg-indigo-50/50","transition-all","flex","items-center","justify-between",3,"click"],[1,"flex","flex-col"],[1,"text-xs","font-bold","text-gray-700"],[1,"text-[10px]","text-gray-400"],[1,"opacity-0","group-hover:opacity-100","text-indigo-600","transition-opacity"],["d","M12 4v16m8-8H4","stroke-width","2"]],template:function(t,r){t&1&&(Fi(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),yt(4,"\u{1F6F0}\uFE0F"),Qi(),yt(5," Satellite Search "),Qi(),Fi(6,"span",4),yt(7,"Sentinel-2"),Qi()(),Fi(8,"button",5),Av("click",function(){return r.initSearchArea()}),$n(),Fi(9,"svg",6),Rc(10,"path",7),Qi(),yt(11," Draw Search AOI "),Qi(),hd(12,S1e,4,0,"div",8),hd(13,I1e,5,0,"div",9),Qi()),t&2&&(Ct(12),fd(r.loading()?12:-1),Ct(),fd(r.results().length>0?13:-1))},dependencies:[ti,n5],encapsulation:2})};var OT=class n{overlay=Me(U3);elementRef=Me(li);overlayRef=null;isOpen=!1;togglePanel(){if(this.overlayRef?.hasAttached()){this.overlayRef.detach(),this.isOpen=!1;return}this.isOpen=!0;let e=this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:15}]);this.overlayRef=this.overlay.create({positionStrategy:e,hasBackdrop:!1,backdropClass:"cdk-overlay-transparent-backdrop"}),this.overlayRef.attach(new Lx(kT))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-stac-toolbar"]],decls:7,vars:1,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-white","transition-transform","group-hover/btn:rotate-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"]],template:function(t,r){t&1&&(Ve(0,"div",0)(1,"button",1),Qt("click",function(){return r.togglePanel()}),$n(),Ve(2,"svg",2),kt(3,"path",3),$e()(),gi(),Ve(4,"div",4),yt(5," SEARCH STAC "),kt(6,"div",5),$e()()),t&2&&(Ct(),xn("ngClass",r.isOpen?"bg-emerald-500 text-white shadow-emerald-200 ring-2 ring-emerald-400 ring-offset-2":"bg-gradient-to-tr from-emerald-600 to-teal-500 text-white hover:scale-105 shadow-emerald-200"))},dependencies:[ti,$h],encapsulation:2})};var mZ=0,Kx=1,yZ=[0,0,0,0],p_=[],v4={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function x4(n,e,t){let r;switch(e){case"LineString":r=n;break;case"MultiLineString":case"Polygon":r=n[t[0]];break;case"MultiPolygon":r=n[t[1]][t[0]];break;default:}return r}var Jx=class extends jr{constructor(e,t,r){super(e),this.features=t,this.mapBrowserEvent=r}},w4=class extends Zs{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Jb,this.defaultDeleteCondition_=function(r){return s9(r)&&Xb(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Xu,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Z1,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Tl({source:new ba({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:D1e(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new vi(this.source_.getFeatures()),this.source_.addEventListener(ea.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(ea.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(_i.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(_i.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let t;e?e===!0?t=Xu:t=e:t=pg,this.traceCondition_=t}addFeature_(e){let t=e.getGeometry();if(t){let i=this.SEGMENT_WRITERS_[t.getType()];i&&i(e,t)}let r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(gt.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new vi;let r=this.featuresBeingModified_.getArray();for(let i=0,o=t.length;i<o;++i){let s=t[i].feature;s&&!r.includes(s)&&this.featuresBeingModified_.push(s)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new Jx(v4.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(gt.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){let t=this.rBush_,r=[];t.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){let o=r[i];for(let s=this.dragSegments_.length-1;s>=0;--s)this.dragSegments_[s][0]===o&&this.dragSegments_.splice(s,1);t.remove(o)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){let t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){let r=t.getCoordinates(),i={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)}writeMultiPointGeometry_(e,t){let r=t.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i],a={feature:e,geometry:t,depth:[i],index:i,segment:[s,s]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){let r=t.getCoordinates();for(let i=0,o=r.length-1;i<o;++i){let s=r.slice(i,i+2),a={feature:e,geometry:t,index:i,segment:s};this.rBush_.insert(wi(s),a)}}writeMultiLineStringGeometry_(e,t){let r=t.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length-1;a<l;++a){let c=s.slice(a,a+2),f={feature:e,geometry:t,depth:[i],index:a,segment:c};this.rBush_.insert(wi(c),f)}}}writePolygonGeometry_(e,t){let r=t.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length-1;a<l;++a){let c=s.slice(a,a+2),f={feature:e,geometry:t,depth:[i],index:a,segment:c};this.rBush_.insert(wi(c),f)}}}writeMultiPolygonGeometry_(e,t){let r=t.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length;a<l;++a){let c=s[a];for(let f=0,d=c.length-1;f<d;++f){let y=c.slice(f,f+2),p={feature:e,geometry:t,depth:[a,i],index:f,segment:y};this.rBush_.insert(wi(y),p)}}}}writeCircleGeometry_(e,t){let r=t.getCenter(),i={feature:e,geometry:t,index:mZ,segment:[r,r]},o={feature:e,geometry:t,index:Kx,segment:[r,r]},s=[i,o];i.featureSegments=s,o.featureSegments=s,this.rBush_.insert(Yf(r),i);let a=t,l=_s();if(l&&this.getMap()){let c=this.getMap().getView().getProjection();a=a.clone().transform(l,c),a=zb(a).transform(c,l)}this.rBush_.insert(a.getExtent(),o)}writeGeometryCollectionGeometry_(e,t){let r=t.getGeometriesArray();for(let i=0;i<r.length;++i){let o=r[i],s=this.SEGMENT_WRITERS_[o.getType()];s(e,o)}}createOrUpdateVertexFeature_(e,t,r,i){let o=this.vertexFeature_;return o?o.getGeometry().setCoordinates(e):(o=new Zr(new Ui(e)),this.vertexFeature_=o,this.overlay_.getSource().addFeature(o)),o.set("features",t),o.set("geometries",r),o.set("existing",i),o}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Pn.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Pn.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Pn.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;let r=this.getMap().getView().getProjection(),i=[],o=this.vertexFeature_.getGeometry().getCoordinates(),s=wi([o]),a=this.rBush_.getInExtent(s),l={};a.sort(T1e);for(let c=0,f=a.length;c<f;++c){let d=a[c],y=d.segment,p=ct(d.geometry),_=d.depth;if(_&&(p+="-"+_.join("-")),l[p]||(l[p]=new Array(2)),d.geometry.getType()==="Circle"&&d.index===Kx){let x=vZ(e,d,r);ys(x,o)&&!l[p][0]&&(this.dragSegments_.push([d,0]),l[p][0]=d);continue}if(ys(y[0],o)&&!l[p][0]){this.dragSegments_.push([d,0]),l[p][0]=d;continue}if(ys(y[1],o)&&!l[p][1]){if(l[p][0]&&l[p][0].index===0){let x=d.geometry.getCoordinates();switch(d.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":x=x[_[1]];case"Polygon":if(d.index!==x[_[0]].length-2)continue;break;default:}}this.dragSegments_.push([d,1]),l[p][1]=d;continue}ct(y)in this.vertexSegments_&&!l[p][0]&&!l[p][1]&&i.push(d)}return i}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){let t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){let o=e.map.getPixelFromCoordinate(t.startCoord);if(Ch(o,e.pixel)<this.pixelTolerance_)return}let r=dI(e.coordinate,t,e.map,this.pixelTolerance_);if(t.targetIndex===-1&&Math.sqrt(r.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(t.targetIndex!==r.index){if(t.targetIndex!==-1){let s=t.targets[t.targetIndex];this.removeTracedCoordinates_(s.startIndex,s.endIndex)}else for(let s of this.traceSegments_){let a=s[0],l=a.geometry,c=s[1],f=l.getCoordinates();x4(f,l.getType(),a.depth).splice(a.index+c,1),l.setCoordinates(f),c===0&&(a.index-=1)}let o=t.targets[r.index];this.addTracedCoordinates_(o,o.startIndex,r.endIndex)}else{let o=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(o,r.endIndex)}t.targetIndex=r.index;let i=t.targets[t.targetIndex];i.endIndex=r.endIndex}getTraceCandidates_(e){let t=this.getMap(),r=this.pixelTolerance_,i=t.getCoordinateFromPixel([e.pixel[0]-r,e.pixel[1]+r]),o=t.getCoordinateFromPixel([e.pixel[0]+r,e.pixel[1]-r]),s=wi([i,o]);return this.traceSource_.getFeaturesInExtent(s)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}let t=this.getTraceCandidates_(e);if(t.length===0)return;let r=pI(e.coordinate,t);r.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){let r=e.startIndex<=e.endIndex,i=e.startIndex<=t;r===i?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){let i=Math.ceil(e),o=Math.floor(t);o===t&&(o-=1),r=o-i+1}else{let i=Math.floor(e),o=Math.ceil(t);o===t&&(o+=1),r=i-o+1}if(r>0)for(let i of this.traceSegments_){let o=i[0],s=o.geometry,a=i[1],l=i[0].index+1;a===1&&(l-=r);let c=s.getCoordinates();x4(c,s.getType(),o.depth).splice(l,r),s.setCoordinates(c),a===1&&(o.index-=r)}}addTracedCoordinates_(e,t,r){if(t===r)return;let i=[];if(t<r){let o=Math.ceil(t),s=Math.floor(r);s===r&&(s-=1);for(let a=o;a<=s;++a)i.push(Kc(e.coordinates,a))}else{let o=Math.floor(t),s=Math.ceil(r);s===r&&(s+=1);for(let a=o;a>=s;--a)i.push(Kc(e.coordinates,a))}if(i.length)for(let o of this.traceSegments_){let s=o[0],a=s.geometry,l=o[1],c=s.index+1;l===0&&i.reverse();let f=a.getCoordinates();x4(f,a.getType(),s.depth).splice(c,0,...i),a.setCoordinates(f),l===1&&(s.index+=i.length)}}updateGeometry_(e,t){let r=t[0],i=r.depth,o,s=r.segment,a=r.geometry,l=t[1];for(;e.length<a.getStride();)e.push(s[l][e.length]);switch(a.getType()){case"Point":o=e,s[0]=e,s[1]=e;break;case"MultiPoint":o=a.getCoordinates(),o[r.index]=e,s[0]=e,s[1]=e;break;case"LineString":o=a.getCoordinates(),o[r.index+l]=e,s[l]=e;break;case"MultiLineString":o=a.getCoordinates(),o[i[0]][r.index+l]=e,s[l]=e;break;case"Polygon":o=a.getCoordinates(),o[i[0]][r.index+l]=e,s[l]=e;break;case"MultiPolygon":o=a.getCoordinates(),o[i[1]][i[0]][r.index+l]=e,s[l]=e;break;case"Circle":let c=a;if(s[0]=e,s[1]=e,r.index===mZ)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;let f=this.getMap().getView().getProjection(),d=Ch(Or(c.getCenter(),f),Or(e,f)),y=_s();if(y){let p=c.clone().transform(y,f);p.setRadius(d),d=p.transform(f,y).getRadius()}c.setRadius(d),this.changingFeature_=!1}break;default:}o&&this.setGeometryCoordinates_(a,o)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([s])=>s));let t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[],o=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(o){this.traceSegments_=[];for(let s of this.dragSegments_){let a=s[0];Ch(OD(o,a.segment),o)/e.map.getView().getResolution()<1&&this.traceSegments_.push(s)}}for(let s=0,a=this.dragSegments_.length;s<a;++s){let l=this.dragSegments_[s],c=l[0],f=c.feature;r.includes(f)||r.push(f);let d=c.geometry;i.includes(d)||i.push(d),this.updateGeometry_(t,l)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(t,r,i,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;let t=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(t);if(r?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){let i=this.vertexFeature_.getGeometry().getCoordinates();for(let o=r.length-1;o>=0;--o)this.insertVertex_(r[o],i);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){let r=this.dragSegments_[t][0],i=r.geometry;if(i.getType()==="Circle"){let o=i,s=o.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=s,a.segment[1]=s,l.segment[0]=s,l.segment[1]=s,this.rBush_.update(Yf(s),a);let c=o,f=_s();if(f){let d=e.map.getView().getProjection();c=c.clone().transform(f,d),c=zb(c).transform(d,f)}this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(wi(r.segment),r)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new Jx(v4.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){let t=this.getMap(),r=t.getPixelFromCoordinate(e),i=t.getView().getProjection(),o=function(l,c){return _Z(e,l,i)-_Z(e,c,i)},s,a;if(this.hitDetection_){let l=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(r,(c,f,d)=>{d&&d.getType()==="Point"&&(d=new Ui(Xl(d.getCoordinates(),i)));let y=d||c.getGeometry();if(y&&y.getType()==="Point"&&c instanceof Zr&&this.features_.getArray().includes(c)){a=y;let p=c.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:c,geometry:a,segment:[p,p]}]}return!0},{layerFilter:l})}if(!s){let l=so(Yf(e,yZ),i),c=t.getView().getResolution()*this.pixelTolerance_,f=Zl(bo(l,c,yZ),i);s=this.rBush_.getInExtent(f)}if(s&&s.length>0){let l=s.sort(o)[0],c=l.segment,f=vZ(e,l,i),d=t.getPixelFromCoordinate(f),y=Ch(r,d);if(a||y<=this.pixelTolerance_){let p={};if(p[ct(c)]=!0,this.snapToPointer_||(this.delta_[0]=f[0]-e[0],this.delta_[1]=f[1]-e[1]),l.geometry.getType()==="Circle"&&l.index===Kx)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry],this.snappedToVertex_);else{let _=t.getPixelFromCoordinate(c[0]),x=t.getPixelFromCoordinate(c[1]),b=Tm(d,_),S=Tm(d,x);if(y=Math.sqrt(Math.min(b,S)),this.snappedToVertex_=y<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(f=b>S?c[1]:c[0]),this.createOrUpdateVertexFeature_(f,[l.feature],[l.geometry],this.snappedToVertex_);let T={};T[ct(l.geometry)]=!0;for(let A=1,N=s.length;A<N;++A){let k=s[A].segment;if(ys(c[0],k[0])&&ys(c[1],k[1])||ys(c[0],k[1])&&ys(c[1],k[0])){let W=ct(s[A].geometry);W in T||(T[W]=!0,p[ct(k)]=!0)}else break}}this.vertexSegments_=p;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){let r=e.segment,i=e.feature,o=e.geometry,s=e.depth,a=e.index,l;for(;t.length<o.getStride();)t.push(0);switch(o.getType()){case"MultiLineString":l=o.getCoordinates(),l[s[0]].splice(a+1,0,t);break;case"Polygon":l=o.getCoordinates(),l[s[0]].splice(a+1,0,t);break;case"MultiPolygon":l=o.getCoordinates(),l[s[1]][s[0]].splice(a+1,0,t);break;case"LineString":l=o.getCoordinates(),l.splice(a+1,0,t);break;default:return!1}this.setGeometryCoordinates_(o,l);let c=this.rBush_;c.remove(e),this.updateSegmentIndices_(o,a,s,1);let f={segment:[r[0],t],feature:i,geometry:o,depth:s,index:a};c.insert(wi(f.segment),f),this.dragSegments_.push([f,1]);let d={segment:[t,r[1]],feature:i,geometry:o,depth:s,index:a+1};return c.insert(wi(d.segment),d),this.dragSegments_.push([d,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){let e=this.vertexFeature_?.getGeometry().getCoordinates();return e?Xl(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;let e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(wi([e])).some(({segment:r})=>ys(r[0],e)||ys(r[1],e))}removePoint(e){if(e&&(e=Or(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Pn.POINTERDRAG){let t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([i])=>i));let r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new Jx(v4.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){let e=this.dragSegments_,t={},r=!1,i,o,s,a,l,c,f,d,y,p,_;for(l=e.length-1;l>=0;--l)s=e[l],p=s[0],_=ct(p.feature),p.depth&&(_+="-"+p.depth.join("-")),_ in t||(t[_]={}),s[1]===0?(t[_].right=p,t[_].index=p.index):s[1]==1&&(t[_].left=p,t[_].index=p.index+1);for(_ in t){switch(y=t[_].right,f=t[_].left,c=t[_].index,d=c-1,f!==void 0?p=f:p=y,d<0&&(d=0),a=p.geometry,o=a.getCoordinates(),i=o,r=!1,a.getType()){case"MultiLineString":o[p.depth[0]].length>2&&(o[p.depth[0]].splice(c,1),r=!0);break;case"LineString":o.length>2&&(o.splice(c,1),r=!0);break;case"MultiPolygon":i=i[p.depth[1]];case"Polygon":i=i[p.depth[0]],i.length>4&&(c==i.length-1&&(c=0),i.splice(c,1),r=!0,c===0&&(i.pop(),i.push(i[0]),d=i.length-1));break;default:}if(r){this.setGeometryCoordinates_(a,o);let x=[];if(f!==void 0&&(this.rBush_.remove(f),x.push(f.segment[0])),y!==void 0&&(this.rBush_.remove(y),x.push(y.segment[1])),f!==void 0&&y!==void 0){let b={depth:p.depth,feature:p.feature,geometry:p.geometry,index:d,segment:x};this.rBush_.insert(wi(b.segment),b)}this.updateSegmentIndices_(a,c,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;let e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(wi([e])).some(({segment:r})=>!(ys(r[0],e)||ys(r[1],e)))}insertPoint(e){let t=e?Or(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((i,o)=>i||this.insertVertex_(o,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(o){o.geometry===e&&(r===void 0||o.depth===void 0||is(o.depth,r))&&o.index>t&&(o.index+=i)})}};function T1e(n,e){return n.index-e.index}function _Z(n,e,t){let r=e.geometry;if(r.getType()==="Circle"){let o=r;if(e.index===Kx){let s=_s();s&&(o=o.clone().transform(s,t));let a=Tm(o.getCenter(),Or(n,t)),l=Math.sqrt(a)-o.getRadius();return l*l}}let i=Or(n,t);return p_[0]=Or(e.segment[0],t),p_[1]=Or(e.segment[1],t),M8(i,p_)}function vZ(n,e,t){let r=e.geometry;if(r.getType()==="Circle"&&e.index===Kx){let o=r,s=_s();return s&&(o=o.clone().transform(s,t)),Xl(o.getClosestPoint(Or(n,t)),t)}let i=Or(n,t);return p_[0]=Or(e.segment[0],t),p_[1]=Or(e.segment[1],t),Xl(OD(i,p_),t)}function D1e(){let n=ry();return function(e,t){return n.Point}}var E4=w4;var FT={SELECT:"select"},g_=class extends jr{constructor(e,t,r,i){super(e),this.selected=t,this.deselected=r,this.mapBrowserEvent=i}},BT={},b4=class n extends yu{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Xb,this.addCondition_=e.addCondition?e.addCondition:pg,this.removeCondition_=e.removeCondition?e.removeCondition:pg,this.toggleCondition_=e.toggleCondition?e.toggleCondition:gg,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Ss,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:A1e(),this.features_=e.features||new vi;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{let r=e.layers;t=function(i){return r.includes(i)}}else t=Ss;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ct(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ct(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(_i.ADD,this.boundAddFeature_),this.features_.addEventListener(_i.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(_i.ADD,this.boundAddFeature_),this.features_.removeEventListener(_i.REMOVE,this.boundRemoveFeature_))}addFeature_(e){let t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){let r=this.findLayerOfFeature_(t);r&&this.addFeatureLayerAssociation_(t,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(r){if(r instanceof Tl&&r.getSource()&&r.getSource().hasFeature(e))return r})}getStyle(){return this.style_}applySelectedStyle_(e){let t=ct(e);t in BT||(BT[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){let t=this.getMap().getInteractions().getArray();for(let i=t.length-1;i>=0;--i){let o=t[i];if(o!==this&&o instanceof n&&o.getStyle()&&o.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(o.getStyle());return}}let r=ct(e);e.setStyle(BT[r]),delete BT[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ct(e)]}selectFeatureInternal_(e,t,r){if(!(e instanceof Zr)||!this.filter_(e,t))return;let i=this.getFeatures();return i.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,t),i.push(e),r?.push(e)),e}selectFeature(e){let t=this.findLayerOfFeature_(e);if(!this.layerFilter_(t))return!1;let r=this.selectFeatureInternal_(e,t);return r&&this.dispatchEvent(new g_(FT.SELECT,[r],[],void 0)),!!r}removeFeatureInternal_(e,t){let r=this.getFeatures();if(!(!(e instanceof Zr)||!r.getArray().includes(e)))return r.remove(e),this.removeFeatureLayerAssociation_(e),t?.push(e),e}deselectFeature(e){let t=this.removeFeatureInternal_(e);return t&&this.dispatchEvent(new g_(FT.SELECT,[],[t],void 0)),!!t}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){Oa(this.featureLayerAssociation_);let e=this.getFeatures(),t=e.getArray().slice();e.clear(),t.length!==0&&this.dispatchEvent(new g_(FT.SELECT,[],t,void 0))}handleEvent(e){if(!this.condition_(e))return!0;let t=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),o=!t&&!r&&!i,s=e.map,a=this.getFeatures(),l=[],c=[];if(o){let f=!1;s.forEachFeatureAtPixel(e.pixel,(d,y)=>{if(f=!0,!!this.selectFeatureInternal_(d,y,c))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let d=a.getLength()-1;d>=0;--d){let y=a.item(d);(c.length>0&&!c.includes(y)||!f)&&this.removeFeatureInternal_(y,l)}}else s.forEachFeatureAtPixel(e.pixel,(f,d)=>{let y;if((r||i)&&(y=this.removeFeatureInternal_(f,l)),(t||i)&&!y&&(y=this.selectFeatureInternal_(f,d,c)),!!y)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(c.length>0||l.length>0)&&this.dispatchEvent(new g_(FT.SELECT,c,l,e)),!0}};function A1e(){let n=ry();return Nn(n.Polygon,n.LineString),Nn(n.GeometryCollection,n.LineString),function(e){return e.getGeometry()?n[e.getGeometry().getType()]:null}}var S4=b4;var C4={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},Qx=class extends jr{constructor(e,t,r,i,o){super(e),this.features=t,this.coordinate=r,this.startCoordinate=i,this.mapBrowserEvent=o}},I4=class extends Zs{constructor(e){e=e||{},super(e),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=e.features!==void 0?e.features:null;let t;if(e.layers&&!this.features_)if(typeof e.layers=="function")t=e.layers;else{let r=e.layers;t=function(i){return r.includes(i)}}else t=Ss;this.layerFilter_=t,this.filter_=e.filter&&!this.features_?e.filter:Ss,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.condition_=e.condition?e.condition:Xu,this.lastFeature_=null,this.addChangeListener(dg.ACTIVE,this.handleActiveChanged_)}handleDownEvent(e){if(!e.originalEvent||!this.condition_(e))return!1;if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=e.coordinate,this.lastCoordinate_=e.coordinate,this.handleMoveEvent(e);let t=this.features_||new vi([this.lastFeature_]);return this.dispatchEvent(new Qx(C4.TRANSLATESTART,t,e.coordinate,this.startCoordinate_,e)),!0}return!1}handleUpEvent(e){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(e);let t=this.features_||new vi([this.lastFeature_]);return this.dispatchEvent(new Qx(C4.TRANSLATEEND,t,e.coordinate,this.startCoordinate_,e)),this.startCoordinate_=null,!0}return!1}handleDragEvent(e){if(this.lastCoordinate_){let t=e.coordinate,r=e.map.getView().getProjection(),i=Or(t,r),o=Or(this.lastCoordinate_,r),s=i[0]-o[0],a=i[1]-o[1],l=this.features_||new vi([this.lastFeature_]),c=_s();l.forEach(function(f){let d=f.getGeometry();c?(d.transform(c,r),d.translate(s,a),d.transform(r,c)):d.translate(s,a),f.setGeometry(d)}),this.lastCoordinate_=t,this.dispatchEvent(new Qx(C4.TRANSLATING,l,t,this.startCoordinate_,e))}}handleMoveEvent(e){let t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(e,t){return t.forEachFeatureAtPixel(e,(r,i)=>{if(!(!(r instanceof Zr)||!this.filter_(r,i))&&!(this.features_&&!this.features_.getArray().includes(r)))return r},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(e){this.hitTolerance_=e}setMap(e){let t=this.getMap();super.setMap(e),this.updateState_(t)}handleActiveChanged_(){this.updateState_(null)}updateState_(e){let t=this.getMap(),r=this.getActive();(!t||!r)&&(t=t||e,t&&t.getViewport().classList.remove("ol-grab","ol-grabbing"))}},T4=I4;var jT=class n{_selectInteraction=null;_modifyInteraction=null;_translateInteraction=null;isEditMode=un(!1);startEditing(e,t){this.stopEditing(e),this._selectInteraction=new S4({condition:l9,layers:r=>r.getSource()===t,style:new Xr({fill:new Er({color:"rgba(255, 255, 255, 0.3)"}),stroke:new ci({color:"#f97316",width:3,lineDash:[4,8]}),image:new Ts({radius:6,fill:new Er({color:"#f97316"}),stroke:new ci({color:"#fff",width:2})})})}),this._modifyInteraction=new E4({features:this._selectInteraction.getFeatures()}),this._translateInteraction=new T4({features:this._selectInteraction.getFeatures()}),e.addInteraction(this._selectInteraction),e.addInteraction(this._modifyInteraction),e.addInteraction(this._translateInteraction),this.isEditMode.set(!0),e.getTargetElement().style.cursor="pointer"}stopEditing(e){this._selectInteraction&&(e.removeInteraction(this._selectInteraction),this._selectInteraction=null),this._modifyInteraction&&(e.removeInteraction(this._modifyInteraction),this._modifyInteraction=null),this._translateInteraction&&(e.removeInteraction(this._translateInteraction),this._translateInteraction=null),this.isEditMode.set(!1),e.getTargetElement().style.cursor=""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};function R1e(n,e){n&1&&(Ve(0,"span",8),kt(1,"span",9)(2,"span",10),$e())}var UT=class n{editingService=Me(jT);drawingService=Me(il);mapService=Me(Ro);toggleEdit(){let e=this.mapService.map(),t=this.drawingService.source;!e||!t||(this.editingService.isEditMode()?this.editingService.stopEditing(e):(this.drawingService.stopDrawing(e),this.editingService.startEditing(e,t)))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-editing-tools"]],decls:9,vars:2,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2",1,"w-5","h-5","group-hover/btn:rotate-45","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","d","M7 7h10v10H7z"],["stroke-linecap","round","stroke-linejoin","round","d","M3 3h4v4H3zM17 17h4v4h-4zM17 3h4v4h-4zM3 17h4v4H3z"],["class","absolute -top-1 -right-1 flex h-3 w-3",4,"ngIf"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],[1,"absolute","-top-1","-right-1","flex","h-3","w-3"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-orange-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-3","w-3","bg-orange-500","border-2","border-white"]],template:function(t,r){t&1&&(Ve(0,"div",0)(1,"button",1),Qt("click",function(){return r.toggleEdit()}),$n(),Ve(2,"svg",2),kt(3,"path",3)(4,"path",4),$e(),Dr(5,R1e,3,0,"span",5),$e(),gi(),Ve(6,"div",6),yt(7," EDITING TOOLS "),kt(8,"div",7),$e()()),t&2&&(Ct(),xn("ngClass",r.editingService.isEditMode()?"bg-indigo-600 text-white ring-4 ring-indigo-100":"bg-gradient-to-tr from-indigo-600 to-indigo-500 text-white hover:scale-105"),Ct(4),xn("ngIf",r.editingService.isEditMode()))},dependencies:[ti,$h,co],encapsulation:2})};var ap=class n{_user=un(null);user=this._user.asReadonly();STORAGE_KEY="geo-auth-demo-user";demoUsers=[{username:"admin",role:"admin",info:"Full access. Can manage all data and settings."},{username:"user",role:"user",info:"Limited access. Can view and export data only."}];constructor(){let e=localStorage.getItem(this.STORAGE_KEY);if(e)try{let t=JSON.parse(e);t&&t.username&&t.token&&this._user.set(t)}catch{}Vh(()=>{let t=this._user();t?localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t)):localStorage.removeItem(this.STORAGE_KEY)})}login(e,t){let r=this.demoUsers.find(i=>i.username===e);if(r){let i=tn(dt({},r),{token:this.generateToken()});return this._user.set(i),!0}return!1}logout(){this._user.set(null)}generateToken(){return Math.random().toString(36).substring(2)+Date.now().toString(36)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})};function M1e(n,e){n&1&&kt(0,"app-stac-toolbar")}var GT=class n{auth=Me(ap);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-toolbar"]],decls:12,vars:1,consts:[[1,"absolute","top-6","left-1/2","-translate-x-1/2","z-20","flex","items-center","gap-2","p-1.5","bg-white/80","backdrop-blur-lg","rounded-2xl","shadow-lg","border","border-white/40","ring-1","ring-black/5"],[1,"w-[1px]","h-6","bg-gray-300/50","mx-1"],[4,"ngIf"]],template:function(t,r){if(t&1&&(Ve(0,"div",0),kt(1,"app-drawing-tools")(2,"div",1)(3,"app-editing-tools")(4,"div",1)(5,"app-upload")(6,"div",1)(7,"app-download")(8,"div",1)(9,"app-map-print")(10,"div",1),Dr(11,M1e,1,0,"app-stac-toolbar",2),$e()),t&2){let i;Ct(11),xn("ngIf",((i=r.auth.user())==null?null:i.role)==="admin")}},dependencies:[ti,co,mI,yI,_I,VI,OT,UT],encapsulation:2})};var zT=class extends Qh{levelDisplay;viewListenerKey;constructor(e){let t=e||{},r=document.createElement("div");r.className="ol-zoom advanced-zoom ol-unselectable ol-control";let i=document.createElement("button");i.innerHTML="+";let o=document.createElement("div");o.className="zoom-level-indicator",o.innerHTML="-";let s=document.createElement("button");s.innerHTML="-",r.appendChild(i),r.appendChild(o),r.appendChild(s),super({element:r,target:t.target}),this.levelDisplay=o,i.onclick=()=>this.handleZoom(1),s.onclick=()=>this.handleZoom(-1)}setMap(e){this.viewListenerKey&&Ib(this.viewListenerKey),super.setMap(e),e&&(e.on("change:view",()=>{this.setupViewListener(e)}),this.setupViewListener(e))}setupViewListener(e){this.viewListenerKey&&Ib(this.viewListenerKey);let t=e.getView();t&&(this.viewListenerKey=t.on("change:resolution",()=>{this.updateDisplay(e)}),this.updateDisplay(e))}updateDisplay(e){let t=e.getView().getZoom();t!==void 0&&(this.levelDisplay.innerHTML=t%1===0?t.toString():t.toFixed(1))}handleZoom(e){let t=this.getMap()?.getView();if(t){let r=t.getZoom();r!==void 0&&t.animate({zoom:r+e,duration:300,easing:Ha})}}};function wZ(n){return n.buttons===0||n.detail===0}function EZ(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function R4(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?CZ(n,e):(r==="input"||r==="select"||r==="textarea")&&SZ(n,e),bZ("canvas",n,e,CZ),bZ("input, textarea, select",n,e,SZ),e}function bZ(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var N1e=0;function SZ(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${N1e++}`)}function CZ(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function F4(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function M4(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function P1e(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function nw(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function IZ(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:l,height:c}=n,f=l*e,d=c*e;return r>i-d&&r<s+d&&t>a-f&&t<o+f}var VT=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:F4(t)})})}handleScroll(e){let t=rp(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let c=this.getViewportScrollPosition();o=c.top,s=c.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,l=i.left-s;return this.positions.forEach((c,f)=>{c.clientRect&&t!==f&&t.contains(f)&&nw(c.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function FZ(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function B4(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function m_(n,e){let t=e?"":"none";B4(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function TZ(n,e,t){B4(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function HT(n,e){return e&&e!="none"?n+" "+e:n}function DZ(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=rw(e.left,e.top)}function rw(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function AZ(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function L1e(n){let e=getComputedStyle(n),t=D4(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=D4(e,"transition-duration"),s=D4(e,"transition-delay");return AZ(o[i])+AZ(s[i])}function D4(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var k1e=new Set(["position"]),N4=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,l,c,f){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=c,this._renderer=f}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),RZ(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return L1e(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=FZ(s,this._document),this._previewEmbeddedView=s,e.matchSize?DZ(i,o):i.style.transform=rw(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=R4(this._rootElement),DZ(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return B4(i.style,{"pointer-events":"none",margin:RZ(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},k1e),m_(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function RZ(n){return"showPopover"in n}var O1e={passive:!0},MZ={passive:!1},F1e={passive:!1,capture:!0},B1e=800,NZ="cdk-drag-placeholder",PZ=new Set(["position"]),P4=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=un(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new en;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=gr.EMPTY;_pointerUpSubscription=gr.EMPTY;_scrollSubscription=gr.EMPTY;_resizeSubscription=gr.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>m_(t,e)))}_disabled=!1;beforeStarted=new en;started=new en;released=new en;ended=new en;entered=new en;exited=new en;dropped=new en;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new VT(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>uc(r)),this._handles.forEach(r=>m_(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=uc(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,MZ),r.listen(t,"touchstart",this._pointerDown,O1e),r.listen(t,"dragstart",this._nativeDragStart,MZ)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?uc(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&P1e(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,l=s+i;this._rootElement.style.transform=rw(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),m_(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),m_(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){ew(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",j1e,F1e)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new N4(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),TZ(i,!1,PZ),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=ew(t),o=!i&&t.button!==0,s=this._rootElement,a=rp(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+B1e>Date.now(),c=i?EZ(t):wZ(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||l||c)return;if(this._handles.length){let y=s.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=F4(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){TZ(this._rootElement,!0,PZ),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,a),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&rp(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=FZ(this._placeholderRef,this._document)):r=R4(this._rootElement),r.style.pointerEvents="none",r.classList.add(NZ),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=ew(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,c=s.pageY-o.top-a.top;return{x:o.left-e.left+l,y:o.top-e.top+c}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=ew(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),f=a.top+s,d=a.bottom-(c-s),y=a.left+o,p=a.right-(l-o);r=LZ(r,y,p),i=LZ(i,f,d)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,m_(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=rw(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=HT(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=rw(e,t);this._preview.setTransform(HT(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:ew(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=rp(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&nw(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=HI(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return uc(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=R4(this._placeholder);i.classList.remove(NZ),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):uc(t.element).appendChild(i)}}};function LZ(n,e,t){return Math.max(e,Math.min(t,n))}function ew(n){return n.type[0]==="t"}function j1e(n){n.preventDefault()}function BZ(n,e,t){let r=kZ(e,n.length-1),i=kZ(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function kZ(n,e){return Math.max(0,Math.min(e,n))}var qT=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(b=>b.drag===e),c=o[s],f=o[l].clientRect,d=c.clientRect,y=l>s?1:-1,p=this._getItemOffsetPx(f,d,y),_=this._getSiblingOffsetPx(l,o,y),x=o.slice();return BZ(o,l,s),o.forEach((b,S)=>{if(x[S]===b)return;let T=b.drag===e,A=T?p:_,N=T?e.getPlaceholderElement():b.drag.getRootElement();b.offset+=A;let k=Math.round(b.offset*(1/b.drag.scale));a?(N.style.transform=HT(`translate3d(${k}px, 0, 0)`,b.initialTransform),nw(b.clientRect,0,A)):(N.style.transform=HT(`translate3d(0, ${k}px, 0)`,b.initialTransform),nw(b.clientRect,A,0))}),this._previousSwap.overlaps=M4(d,t,r),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement(),c=s[o];if(c===e&&(c=s[o+1]),!c&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let f=c.getRootElement();f.parentElement.insertBefore(l,f),s.splice(o,0,e)}else this._element.appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{nw(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:F4(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let l=i?"left":"top",c=i?"right":"bottom";r===-1?a-=s.clientRect[l]-o[c]:a+=o[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){let c=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},L4=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let l=this.getItemIndex(e),c=e.getPlaceholderElement(),f=a.getRootElement();o>l?f.after(c):f.before(c),BZ(this._activeItems,l,o);let d=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=f===d||f.contains(d),{previousIndex:l,currentIndex:o}}enter(e,t,r,i){let o=this._activeItems.indexOf(e);o>-1&&this._activeItems.splice(o,1);let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=HI(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:l,y:c}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(t-l,r-c);f<i&&(i=f,o=s)}}return o}},OZ=.05,jZ=.05,xu=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(xu||{}),Ra=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(Ra||{}),k4=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new en;entered=new en;exited=new en;dropped=new en;sorted=new en;receivingStarted=new en;receivingStopped=new en;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=gr.EMPTY;_verticalScrollDirection=xu.NONE;_horizontalScrollDirection=Ra.NONE;_scrollNode;_stopScrollTimers=new en;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=uc(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new VT(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof qT&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new L4(this._document,this._dragDropRegistry);else{let t=new qT(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=uc(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!IZ(this._domRect,OZ,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=xu.NONE,o=Ra.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||IZ(s.clientRect,OZ,e,t)&&([i,o]=U1e(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=UZ(l,t),o=GZ(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),lA(0,hE).pipe(Ah(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===xu.UP?e.scrollBy(0,-t):this._verticalScrollDirection===xu.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===Ra.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===Ra.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&M4(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!M4(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=HI(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function UZ(n,e){let{top:t,bottom:r,height:i}=n,o=i*jZ;return e>=t-o&&e<=t+o?xu.UP:e>=r-o&&e<=r+o?xu.DOWN:xu.NONE}function GZ(n,e){let{left:t,right:r,width:i}=n,o=i*jZ;return e>=t-o&&e<=t+o?Ra.LEFT:e>=r-o&&e<=r+o?Ra.RIGHT:Ra.NONE}function U1e(n,e,t,r,i){let o=UZ(e,i),s=GZ(e,r),a=xu.NONE,l=Ra.NONE;if(o){let c=n.scrollTop;o===xu.UP?c>0&&(a=xu.UP):n.scrollHeight-c>n.clientHeight&&(a=xu.DOWN)}if(s){let c=n.scrollLeft;t==="rtl"?s===Ra.RIGHT?c<0&&(l=Ra.RIGHT):n.scrollWidth+c>n.clientWidth&&(l=Ra.LEFT):s===Ra.LEFT?c>0&&(l=Ra.LEFT):n.scrollWidth-c>n.clientWidth&&(l=Ra.RIGHT)}return[a,l]}var tw={capture:!0},A4={passive:!1,capture:!0},G1e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=lr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),j4=(()=>{class n{_ngZone=Me(vr);_document=Me(wr);_styleLoader=Me(Nx);_renderer=Me(Es).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new en;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=un([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new en;pointerUp=new en;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,A4)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(G1e),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),tw],["selectstart",this._preventDefaultWhileDragging,A4]];i?s.push(["touchend",o,tw],["touchcancel",o,tw]):s.push(["mouseup",o,tw]),i||s.push(["mousemove",a=>this.pointerMove.next(a),A4]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,c])=>this._renderer.listen(this._document,a,l,c))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new Hn(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},tw);return()=>{o()}}))),DE(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z1e={dragStartThreshold:5,pointerDirectionChangeThreshold:5},V1e=(()=>{class n{_document=Me(wr);_ngZone=Me(vr);_viewportRuler=Me(qg);_dragDropRegistry=Me(j4);_renderer=Me(Es).createRenderer(null,null);constructor(){}createDrag(t,r=z1e){return new P4(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new k4(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=_t({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O4=new Ut("CDK_DRAG_PARENT");var zZ=new Ut("CdkDragHandle"),VZ=(()=>{class n{element=Me(li);_parentDrag=Me(O4,{optional:!0,skipSelf:!0});_dragDropRegistry=Me(j4);_stateChanges=new en;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let r=this._dragDropRegistry.getDragDirectiveForNode(t);if(r){this._parentDrag=r,r._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=su({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",b0]},features:[Nv([{provide:zZ,useExisting:n}])]})}return n})(),H1e=new Ut("CDK_DRAG_CONFIG"),q1e=new Ut("CdkDropList"),HZ=(()=>{class n{element=Me(li);dropContainer=Me(q1e,{optional:!0,skipSelf:!0});_ngZone=Me(vr);_viewContainerRef=Me(Ua);_dir=Me(WI,{optional:!0});_changeDetectorRef=Me(E0);_selfHandle=Me(zZ,{optional:!0,self:!0});_parentDrag=Me(O4,{optional:!0,skipSelf:!0});_dragDropRegistry=Me(j4);_destroyed=new en;_handles=new Vo([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new mi;released=new mi;ended=new mi;entered=new mi;exited=new mi;dropped=new mi;moved=new Hn(t=>{let r=this._dragRef.moved.pipe(ar(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=Me(Di);constructor(){let t=this.dropContainer,r=Me(H1e,{optional:!0}),i=Me(V1e);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(Ah(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){ud(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):uc(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:L3(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Uu(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:c,previewContainer:f}=t;this.disabled=l??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),c&&(this.rootElementSelector=c),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(So(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),vs(t=>DE(...t.map(r=>r._stateChanges.pipe(Qm(r))))),Ah(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=su({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&lu("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",b0],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",zj]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Nv([{provide:O4,useExisting:n}]),ld]})}return n})();var Tf=class{static format=new fo;static createBuffer(e,t){let r=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),i=c4(r,t,{units:"meters"});return this.format.readFeature(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static calculateMeasurement(e){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});if((e.getGeometry()?.getType()).includes("Polygon")){let i=q3(t);return{value:i>1e4?(i/1e4).toFixed(2)+" ha":i.toFixed(2)+" m\xB2",label:"Area"}}else{let i=AT(t,{units:"kilometers"});return{value:i<1?(i*1e3).toFixed(2)+" m":i.toFixed(2)+" km",label:"Length"}}}static getCentroid(e){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),r=h4(t);return this.format.readFeature(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static getLineMiddlePoint(e){let r=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),i=AT(r),o=z3(r,i/2);return this.format.readFeature(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static convertToWKT(e){return new yx().writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}};var W1e=(n,e)=>e.key;function $1e(n,e){if(n&1){let t=ui();Ve(0,"button",4),Qt("click",function(i){An(t);let o=nn();return nn().onCentroidClick(o),Rn(i.stopPropagation())}),$n(),Ve(1,"svg",5),kt(2,"path",14)(3,"path",15),$e(),yt(4," Find Centroid "),$e()}}function Y1e(n,e){if(n&1){let t=ui();Ve(0,"button",4),Qt("click",function(i){An(t);let o=nn();return nn().onMeasureClick(o),Rn(i.stopPropagation())}),$n(),Ve(1,"svg",5),kt(2,"path",16),$e(),yt(3),$e()}if(n&2){let t=nn(),r=nn();Ct(3),uo(" ",r.isPolygon(t)?"Calculate Area":"Calculate Length"," ")}}function X1e(n,e){if(n&1){let t=ui();Ve(0,"div",3)(1,"button",4),Qt("click",function(i){let o=An(t);return nn().openWindow(o),Rn(i.stopPropagation())}),$n(),Ve(2,"svg",5),kt(3,"path",6),$e(),yt(4," View Details "),$e(),gi(),Ve(5,"button",7),Qt("click",function(i){let o=An(t);return nn().onCopyWKTClick(o),Rn(i.stopPropagation())}),$n(),Ve(6,"svg",8),kt(7,"path",9),$e(),gi(),Ve(8,"span"),yt(9,"Copy as WKT"),$e()(),kt(10,"div",10),Ve(11,"button",4),Qt("click",function(i){let o=An(t);return nn().onBufferClick(o),Rn(i.stopPropagation())}),$n(),Ve(12,"svg",5),kt(13,"circle",11)(14,"circle",12),$e(),yt(15," Buffer Analysis "),$e(),Dr(16,$1e,5,0,"button",13)(17,Y1e,4,1,"button",13),$e()}if(n&2){let t=e,r=nn();Mv("left",t.clientX,"px")("top",t.clientY,"px"),Ct(16),xn("ngIf",r.isPolygon(t)),Ct(),xn("ngIf",r.isPolygon(t)||r.isLine(t))}}function Z1e(n,e){if(n&1&&(Ve(0,"tr",27)(1,"td",32),yt(2),$e(),Ve(3,"td",33),yt(4),$e()()),n&2){let t=e.$implicit;Ct(2),uo(" ",t.key," "),Ct(2),uo(" ",t.value," ")}}function K1e(n,e){n&1&&(Ve(0,"tr")(1,"td",34),yt(2," No data available to display. "),$e()())}function J1e(n,e){if(n&1){let t=ui();Ve(0,"div",1)(1,"div",17)(2,"div",18),kt(3,"div",19),Ve(4,"h3",20),yt(5,"Feature Attributes"),$e()(),Ve(6,"button",21),Qt("click",function(){An(t);let i=nn();return Rn(i.closeWindow())}),$n(),Ve(7,"svg",22),kt(8,"path",23),$e()()(),gi(),Ve(9,"div",24)(10,"table",25)(11,"tbody",26),Iv(12,Z1e,5,2,"tr",27,W1e,!1,K1e,3,0,"tr"),$e()()(),Ve(15,"div",28)(16,"button",29),Qt("click",function(){An(t);let i=nn();return Rn(i.closeWindow())}),yt(17," Close "),$e(),Ve(18,"div",30)(19,"span",31),yt(20),$e()()()()}if(n&2){let t,r=nn();Ct(12),Tv(r.filteredData()),Ct(8),uo("UID: ",(t=r.selectedFeatureData())==null?null:t.ol_uid)}}function Q1e(n,e){if(n&1){let t=ui();Ve(0,"div",2)(1,"div",35)(2,"div",36)(3,"h3",37)(4,"span",38),yt(5,"\u{1F4C4}"),$e(),yt(6," WKT Geometry Data "),$e(),Ve(7,"button",39),Qt("click",function(){An(t);let i=nn();return Rn(i.showWktModal.set(!1))}),yt(8," \u2715 "),$e()(),Ve(9,"div",40),yt(10),$e(),Ve(11,"div",41)(12,"button",42),Qt("click",function(){An(t);let i=nn();return Rn(i.showWktModal.set(!1))}),yt(13," Close "),$e(),Ve(14,"button",43),Qt("click",function(){An(t);let i=nn();return Rn(i.copyFromModal())}),Ve(15,"span"),yt(16),$e()()()()()}if(n&2){let t=nn();Ct(10),uo(" ",t.currentWkt()," "),Ct(6),Mc(t.copySuccess()?"Done!":"Copy to Clipboard")}}var WT=class n{mapService=Me(Ro);filteredData;selectedFeatureData=un(null);isWindowOpen=un(!1);showWktModal=un(!1);currentWkt=un("");copySuccess=un(!1);_el=Me(li);bufferStyle=new Xr({stroke:new ci({color:"#4f46e5",width:2}),fill:new Er({color:"rgba(79, 70, 229, 0.2)"})});constructor(){this.filteredData=Lv(()=>{let e=this.selectedFeatureData();if(!e||typeof e!="object")return[];let t=["geometry","ol_uid","clientX","clientY"];return Object.entries(e).filter(([r])=>!t.includes(r)).map(([r,i])=>({key:String(r),value:i==null?"---":String(i)}))})}clickout(e){this.mapService.rightClickedFeature()&&(this._el.nativeElement.contains(e.target)||this.mapService.rightClickedFeature.set(null))}openWindow(e){this.selectedFeatureData.set(e),this.isWindowOpen.set(!0),this.mapService.rightClickedFeature.set(null)}closeWindow(){this.isWindowOpen.set(!1)}onBufferClick(e){let t=e.feature?e.feature:e,r=prompt("Enter buffer distance in meters:","100");if(r===null||r.trim()==="")return;let i=parseFloat(r);if(isNaN(i)||i<=0){alert("Please enter a valid positive number.");return}try{let o=Tf.createBuffer(t,i);o.setStyle(this.bufferStyle),this.mapService.getVectorSource().addFeature(o),this.mapService.rightClickedFeature.set(null)}catch(o){console.error("Buffer error:",o)}}onMeasureClick(e){try{let t=e?.feature,r=this.mapService.getVectorSource(),i=t.getGeometry()?.getType();r.getFeatures().filter(l=>l.get("type")==="measurement").forEach(l=>r.removeFeature(l));let s=Tf.calculateMeasurement(t),a;i.includes("Polygon")?a=Tf.getCentroid(t):a=Tf.getLineMiddlePoint(t),a.set("type","measurement"),a.setStyle(new Xr({text:new Pd({text:`${s.label}: ${s.value}`,font:"bold 13px Inter, sans-serif",fill:new Er({color:"#ffffff"}),backgroundFill:new Er({color:"#334155"}),padding:[4,8,4,8],offsetY:-20}),image:new Ts({radius:4,fill:new Er({color:"#334155"})})})),r.addFeature(a),this.mapService.rightClickedFeature.set(null)}catch(t){console.error("Measurement error:",t)}}onCentroidClick(e){try{let t=e.feature,r=this.mapService.getVectorSource();r.getFeatures().filter(a=>a.get("type")==="centroid").forEach(a=>r.removeFeature(a));let s=Tf.getCentroid(t);s.set("type","centroid"),s.setStyle(new Xr({image:new Ts({radius:6,fill:new Er({color:"#ef4444"}),stroke:new ci({color:"#fff",width:2.5})}),zIndex:1e3})),r.addFeature(s),this.mapService.rightClickedFeature.set(null)}catch(t){console.error("Centroid calculation error:",t)}}isPolygon(e){if(!e?.feature)return!1;let t=e.feature.getGeometry()?.getType();return t==="Polygon"||t==="MultiPolygon"}isLine(e){if(!e?.feature)return!1;let t=e.feature.getGeometry()?.getType();return t==="LineString"||t==="MultiLineString"}onCopyWKTClick(e){let t=Tf.convertToWKT(e.feature);this.currentWkt.set(t),this.showWktModal.set(!0),this.mapService.rightClickedFeature.set(null)}copyFromModal(){return We(this,null,function*(){yield navigator.clipboard.writeText(this.currentWkt()),this.copySuccess.set(!0),setTimeout(()=>this.copySuccess.set(!1),2e3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-map-context-menu"]],hostBindings:function(t,r){t&1&&Qt("click",function(o){return r.clickout(o)},Gh)},decls:3,vars:3,consts:[[1,"fixed","z-[2000]","bg-white","shadow-xl","rounded-lg","py-2","min-w-[160px]","border","border-slate-200",3,"left","top"],["cdkDrag","",1,"fixed","z-[1001]","w-[350px]","bg-white","rounded-xl","shadow-2xl","border","border-slate-300","flex","flex-col","pointer-events-auto","overflow-hidden",2,"left","60px","top","100px"],["div","","cdkDrag","",1,"fixed","z-[1001]","w-[350px]","bg-white","rounded-xl","shadow-2xl","border","border-slate-300","flex","flex-col","pointer-events-auto","overflow-hidden",2,"left","45%","top","45%"],[1,"fixed","z-[2000]","bg-white","shadow-xl","rounded-lg","py-2","min-w-[160px]","border","border-slate-200"],[1,"w-full","px-3","py-1.5","text-left","text-[13px]","text-slate-700","hover:bg-indigo-600","hover:text-white","transition-colors","flex","items-center","gap-2.5",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","opacity-70"],["d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke-width","2"],[1,"w-full","px-3","py-1.5","text-left","text-[13px]","text-slate-700","hover:bg-slate-100","transition-colors","flex","items-center","gap-2.5",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-slate-500","opacity-70"],["d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"my-1","border-t","border-slate-100"],["cx","12","cy","12","r","9","stroke-width","2","stroke-dasharray","3 3"],["cx","12","cy","12","r","3","fill","currentColor"],["class","w-full px-3 py-1.5 text-left text-[13px] text-slate-700 hover:bg-indigo-600 hover:text-white transition-colors flex items-center gap-2.5",3,"click",4,"ngIf"],["d","M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0","fill","currentColor"],["d","M12 2v4m0 12v4M2 12h4m12 0h4","stroke","currentColor","stroke-width","2"],["d","M9 7v10m4-10v10M9 7h4m-4 10h4m3-14L5 19","stroke-width","2"],["cdkDragHandle","",1,"flex","items-center","justify-between","bg-slate-900","px-4","py-2.5","cursor-move","active:cursor-grabbing","select-none"],[1,"flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-indigo-500","animate-pulse"],[1,"text-white","text-[11px]","font-bold","uppercase","tracking-widest"],[1,"text-slate-400","hover:text-white","p-1","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M6 18L18 6M6 6l12 12","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"max-h-[350px]","overflow-y-auto"],[1,"w-full","text-[12px]","text-left"],[1,"divide-y","divide-slate-100"],[1,"hover:bg-slate-50","transition-colors"],[1,"p-2.5","bg-slate-50","border-t","border-slate-200","flex","justify-between","items-center"],[1,"text-[10px]","bg-indigo-600","text-white","px-4","py-1.5","rounded","shadow-sm","font-bold","uppercase","hover:bg-indigo-700","transition-all","active:scale-95",3,"click"],[1,"flex","flex-col","items-end"],[1,"text-[9px]","text-slate-400","font-mono"],[1,"px-4","py-2.5","font-bold","text-slate-500","bg-slate-50/50","w-[120px]","border-r","border-slate-100","uppercase","text-[10px]"],[1,"px-4","py-2.5","text-slate-700","font-medium","selection:bg-indigo-100"],["colspan","2",1,"px-4","py-8","text-center","text-slate-400","italic"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","overflow-hidden","flex","flex-col","max-h-[80vh]"],[1,"px-6","py-4","border-b","border-slate-100","flex","justify-between","items-center","bg-slate-50"],[1,"font-semibold","text-slate-800","flex","items-center","gap-2"],[1,"text-indigo-600"],[1,"text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"p-6","overflow-y-auto","bg-slate-900","font-mono","text-sm","text-indigo-300","leading-relaxed","break-all"],[1,"px-6","py-4","border-t","border-slate-100","flex","justify-end","gap-3","bg-white"],[1,"px-4","py-2","text-sm","font-medium","text-slate-600","hover:bg-slate-50","rounded-lg","transition-colors",3,"click"],[1,"px-4","py-2","text-sm","font-medium","bg-indigo-600","text-white","hover:bg-indigo-700","rounded-lg","shadow-sm","transition-all","flex","items-center","gap-2",3,"click"]],template:function(t,r){if(t&1&&(hd(0,X1e,18,6,"div",0),hd(1,J1e,21,2,"div",1),hd(2,Q1e,17,2,"div",2)),t&2){let i;fd((i=r.mapService.rightClickedFeature())?0:-1,i),Ct(),fd(r.isWindowOpen()?1:-1),Ct(),fd(r.showWktModal()?2:-1)}},dependencies:[ti,co,HZ,VZ],encapsulation:2})};var exe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},qZ={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},U4=class extends xS{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Yr(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,r,i,o,s,a,l){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,o,s,a,l)}getTile(e,t,r,i){let o=this.getOrCreateTile(e,t,r,i);if(!o)return null;let s=i.viewState,a=s.resolution,l=i.viewHints,c=this.getLayer().getSource(),f=c.getTileGridForProjection(s.projection),d=!(l[$r.ANIMATING]||l[$r.INTERACTING]),y=f.getZForResolution(a,c.zDirection)===e;return d&&y?o.wantedResolution=a:o.wantedResolution||(o.wantedResolution=f.getResolution(e)),o}prepareFrame(e){let t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){let i=this.getLayer(),o=i.getRevision(),s=i.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(i);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;let c=i.getSource(),f=!!i.getDeclutter(),d=c.getTileGrid(),p=c.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),_=c.getSourceTiles(t,r,e),x=ct(i);delete e.hitDetectionImageData[x],e.executorGroups[x]=[],l.dirty=!1;for(let b=0,S=_.length;b<S;++b){let T=_[b];if(T.getState()!=Je.LOADED)continue;let A=c.getProjection(),N=T.tileCoord,k=d.getTileCoordExtent(N);r&&A&&!qr(r,A)&&(k=Yl(k,A,r,32));let W=kr(p,k),X=bo(W,i.getRenderBuffer()*a,this.tempExtent),Y=xl(k,W)?null:X,$=new bS(0,W,a,t),V=Y1(a,t),B=function(Q,Z){let q,K=Q.getStyleFunction()||i.getStyleFunction();if(K&&(q=K(Q,a)),q){let oe=this.renderFeature(Q,V,q,$,f,Z);l.dirty=l.dirty||oe}},v=T.getFeatures();s&&s!==l.renderedRenderOrder&&v.sort(s);for(let Q=0,Z=v.length;Q<Z;++Q){let q=v[Q];r&&T.projection&&!qr(r,T.projection)&&(q=q.clone(),q.getGeometry().applyTransform(Ih(T.projection,r))),(!Y||Jn(Y,q.getGeometry().getExtent()))&&B.call(this,q,Q)}let I=$.finish(),M=i.getRenderMode()!=="vector"&&f&&_.length===1?null:W,j=new SS(M,a,t,c.getOverlaps(),I,i.getRenderBuffer(),!0);e.executorGroups[x].push(j)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,r,i,o){let s=t.viewState.resolution,a=t.viewState.rotation;r=r??0;let l=this.getLayer(),f=l.getSource().getTileGridForProjection(t.viewState.projection),d=wi([e]);bo(d,s*r,d);let y={},p=function(A,N,k){let W=A.getId();W===void 0&&(W=ct(A));let X=y[W];if(X){if(X!==!0&&k<X.distanceSq){if(k===0)return y[W]=!0,o.splice(o.lastIndexOf(X),1),i(A,l,N);X.geometry=N,X.distanceSq=k}}else{if(k===0)return y[W]=!0,i(A,l,N);o.push(y[W]={feature:A,layer:l,geometry:N,distanceSq:k,callback:i})}},_=this.renderedTiles,x=ct(l),b=l.getDeclutter(),S=b?t.declutter?.[b]?.all().map(A=>A.value):null,T;e:for(let A=0,N=_.length;A<N;++A){let k=_[A],W=f.getTileCoordExtent(k.wrappedTileCoord);if(!Jn(W,d))continue;let X=k.executorGroups[x];for(let Y=0,$=X.length;Y<$;++Y)if(T=X[Y].forEachFeatureAtCoordinate(e,s,a,r,p,S),T)break e}return T}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=this.getLayer(),o=i.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,c=o.getTileGridForProjection(s),f=Ar(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(f,l).toString(),y=this.renderedTiles.find(A=>A.tileCoord.toString()===d&&A.getState()===Je.LOADED);if(!y||y.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!zs(a,c.getTileCoordExtent(y.tileCoord))&&Dm(f,s);let p=ct(i),_=c.getTileCoordExtent(y.wrappedTileCoord),x=Vs(_),b=[(f[0]-x[0])/l,(x[1]-f[1])/l],S=y.getSourceTiles().reduce((A,N)=>A.concat(N.getFeatures()),[]),T=y.hitDetectionImageData[p];if(!T){let A=er(c.getTileSize(c.getZForResolution(l,o.zDirection))),N=this.renderedRotation_,k=[this.getRenderTransform(c.getTileCoordCenter(y.wrappedTileCoord),l,0,Ea,A[0]*Ea,A[1]*Ea,0)];T=CS(A,k,S,i.getStyleFunction(),c.getTileCoordExtent(y.wrappedTileCoord),y.getReplayState(i).renderedResolution,N),y.hitDetectionImageData[p]=T}t(IS(b,S,T))})}getFeaturesInExtent(e){let t=[],r=this.getTileCache();if(r.getCount()===0)return t;let o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return r.forEach(l=>{if(l.tileCoord[0]!==s||l.getState()!==Je.LOADED)return;let c=l.getSourceTiles();for(let f=0,d=c.length;f<d;++f){let y=c[f],p=y.getKey();if(p in a)continue;a[p]=!0;let _=y.tileCoord;if(Jn(e,o.getTileCoordExtent(_))){let x=y.getFeatures();if(x)for(let b=0,S=x.length;b<S;++b){let T=x[b],A=T.getGeometry();Jn(e,A.getExtent())&&t.push(T)}}}}),t}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){let r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;let o=e.viewHints,s=!(o[$r.ANIMATING]||o[$r.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?e.declutter?.[l]:void 0,f=ct(this.getLayer()),d=this.renderedTiles;for(let y=0,p=d.length;y<p;++y){let _=d[y],x=_.executorGroups[f];if(x)for(let b=x.length-1;b>=0;--b)x[b].execute(this.context,a,this.getTileRenderTransform(_,e),e.viewState.rotation,s,my,c)}r.globalAlpha=i}renderDeferredInternal(e){let t=this.renderedTiles,r=ct(this.getLayer()),i=t.reduce((l,c,f)=>(c.executorGroups[r].forEach(d=>l.push({executorGroup:d,index:f})),l),[]),o=i.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),s={};for(let l=0,c=i.length;l<c;++l){let f=i[l].executorGroup.getDeferredZIndexContexts();for(let d in f)s[d]=!0}Object.keys(s).map(Number).sort(Ys).forEach(l=>{o.forEach((c,f)=>{c[l]&&(c[l].forEach(d=>{let{executorGroup:y,index:p}=i[f],_=y.getRenderedContext(),x=_.globalAlpha;_.globalAlpha=this.renderedOpacity_;let b=this.tileClipContexts_[p];b&&b.draw(_),d.draw(_),b&&_.restore(),_.globalAlpha=x,d.clear()}),c[l].length=0)})})}getTileRenderTransform(e,t){let r=t.pixelRatio,i=t.viewState,o=i.center,s=i.resolution,a=i.rotation,l=t.size,c=Math.round(l[0]*r),f=Math.round(l[1]*r),y=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),p=e.tileCoord,_=y.getTileCoordExtent(e.wrappedTileCoord),x=y.getTileCoordExtent(p,this.tempExtent)[0]-_[0];return vd(xd(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,s,a,r,c,f,x))}postRender(e,t){let r=t.viewHints,i=!(r[$r.ANIMATING]||r[$r.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;let o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;let l=o.getDeclutter(),c=l?qZ[s].filter(k=>!my.includes(k)):qZ[s],f=t.viewState,d=f.rotation,y=o.getSource(),_=y.getTileGridForProjection(f.projection).getZForResolution(f.resolution,y.zDirection),x=this.renderedTiles,b=[],S=[],T=[],A=ct(o),N=!0;for(let k=x.length-1;k>=0;--k){let W=x[k];N=N&&!W.getReplayState(o).dirty;let X=W.executorGroups[A].filter(M=>M.hasExecutors(c));if(X.length===0)continue;let Y=this.getTileRenderTransform(W,t),$=W.tileCoord[0],V=!1,B=X[0].getClipCoords(Y),v=e,I;if(B){I=new hy,v=I.getContext();for(let M=0,j=b.length;M<j;++M)if(_!==$&&$<S[M]){let Q=b[M];Jn([B[0],B[3],B[4],B[7]],[Q[0],Q[3],Q[4],Q[7]])&&(V||(v.save(),V=!0),v.beginPath(),v.moveTo(B[0],B[1]),v.lineTo(B[2],B[3]),v.lineTo(B[4],B[5]),v.lineTo(B[6],B[7]),v.moveTo(Q[6],Q[7]),v.lineTo(Q[4],Q[5]),v.lineTo(Q[2],Q[3]),v.lineTo(Q[0],Q[1]),v.clip())}b.push(B),S.push($)}for(let M=0,j=X.length;M<j;++M)X[M].execute(e,[e.canvas.width,e.canvas.height],Y,d,i,c,t.declutter?.[l]);V&&(v===e?v.restore():T[k]=I)}e.globalAlpha=a,this.ready=N,this.tileClipContexts_=T,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,o,s){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,c=r.length;l<c;++l)a=yy(i,e,r[l],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=yy(i,e,r,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){let t=this.getLayer();if(t.getRenderMode()==="vector")return!1;let r=e.getReplayState(t),i=t.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==i}renderTileImage_(e,t){let r=this.getLayer(),i=e.getReplayState(r),o=r.getRevision(),s=e.executorGroups[ct(r)];i.renderedTileRevision=o;let a=e.wrappedTileCoord,l=a[0],c=r.getSource(),f=t.pixelRatio,y=t.viewState.projection,p=c.getTileGridForProjection(y),_=p.getResolution(e.tileCoord[0]),x=t.pixelRatio/e.wantedResolution*_,b=p.getResolution(l),S=e.getContext();f=Math.round(Math.max(f,x/f));let T=c.getTilePixelSize(l,f,y);S.canvas.width=T[0],S.canvas.height=T[1];let A=f/x;if(A!==1){let X=u1(this.tmpTransform_);xd(X,A,A),S.setTransform.apply(S,X)}let N=p.getTileCoordExtent(a,this.tempExtent),k=x/b,W=u1(this.tmpTransform_);xd(W,k,-k),Pb(W,-N[0],-N[3]);for(let X=0,Y=s.length;X<Y;++X)s[X].execute(S,[S.canvas.width*A,S.canvas.height*A],W,0,!0,exe[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}},WZ=U4;var G4=class extends oy{constructor(e){e=e||{};let t=Object.assign({},e);delete t.preload;let r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;let i=e.renderMode||"hybrid";an(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new WZ(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Uc.PRELOAD)}getUseInterimTilesOnError(){return this.get(Uc.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Uc.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Uc.USE_INTERIM_TILES_ON_ERROR,e)}},$Z=G4;var iw=34962,ow=34963,XZ=35040,y_=35044,ZZ=35048,KZ=5121,JZ=5123,QZ=5125,z4=5126,YZ=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function eK(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!yG},e);let t=YZ.length;for(let r=0;r<t;++r)try{let i=n.getContext(YZ[r],e);if(i)return i}catch{}return null}var txe={STATIC_DRAW:y_,STREAM_DRAW:XZ,DYNAMIC_DRAW:ZZ},V4=class{constructor(e,t){this.array_=null,this.type_=e,an(e===iw||e===ow,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:txe.STATIC_DRAW}ofSize(e){return this.array_=new($T(this.type_))(e),this}fromArray(e){return this.array_=$T(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new($T(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){let t=$T(this.type_);if(!(e instanceof t))throw new Error(`Expected ${t}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}};function $T(n){switch(n){case iw:return Float32Array;case ow:return Uint32Array;default:return Float32Array}}var YT=V4;var sw={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var nxe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,rxe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,H4=class{constructor(e){this.gl_=e.webGlContext;let t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();let r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||nxe),t.compileShader(r);let i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||rxe),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();let o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(s=>{this.uniforms_.push({value:e.uniforms[s],location:t.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){let t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;let i=0,o=t.RGBA,s=0,a=t.RGBA,l=t.UNSIGNED_BYTE,c=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,o,r[0],r[1],s,a,l,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,r,i){let o=this.getGL(),s=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!t){let l=ct(o.canvas);if(!e.renderTargets[l]){let c=o.getContextAttributes();c&&c.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),o.uniform1i(this.renderTargetTextureLocation_,0);let a=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){let t=this.getGL(),r,i=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(e):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${i}`]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(o.location,i++);else if(Array.isArray(r))switch(r.length){case 2:t.uniform2f(o.location,r[0],r[1]);return;case 3:t.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:t.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(o.location,r)})}},q4=H4;var lp={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},__={UNSIGNED_BYTE:KZ,UNSIGNED_SHORT:JZ,UNSIGNED_INT:QZ,FLOAT:z4},XT={};function tK(n){return"shared/"+n}var nK=0;function ixe(){let n="unique/"+nK;return nK+=1,n}function oxe(n){let e=XT[n];if(!e){let t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:eK(t)},XT[n]=e}return e.users+=1,e.context}function sxe(n){let e=XT[n];if(!e||(e.users-=1,e.users>0))return;let t=e.context,r=t.getExtension("WEBGL_lose_context");r&&r.loseContext();let i=t.canvas;i.width=1,i.height=1,delete XT[n]}var W4=class extends Lc{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?tK(e.canvasCacheKey):ixe(),this.gl_=oxe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;let t=this.gl_.canvas;t.addEventListener(sw.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(sw.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Yr(),this.offsetScaleMatrix_=Yr(),this.tmpMat4_=Yd(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new q4({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new q4({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(let t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===tK(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];let t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}getInstancedRenderingExtension_(){let e=this.getExtension("ANGLE_instanced_arrays");return an(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){let t=this.gl_,r=ct(e),i=this.bufferCache_[r];if(!i){let o=t.createBuffer();i={buffer:e,webGlBuffer:o},this.bufferCache_[r]=i}t.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){let t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){let t=ct(e);delete this.bufferCache_[t]}disposeInternal(){let e=this.gl_.canvas;e.removeEventListener(sw.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(sw.RESTORED,this.boundHandleWebGLContextRestored_),sxe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,r){let i=this.gl_,o=this.getCanvas(),s=e.size,a=e.pixelRatio;(o.width!==s[0]*a||o.height!==s[1]*a)&&(o.width=s[0]*a,o.height=s[1]*a,o.style.width=s[0]+"px",o.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,t){let r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),t&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0)}bindInitialFrameBuffer(){let e=this.getGL(),t=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);let r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,t,r){let i=this.gl_;i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),t)}bindAttribute(e,t,r){let i=this.getGL();this.bindBuffer(e);let o=this.getAttributeLocation(t);i.enableVertexAttribArray(o),i.vertexAttribPointer(o,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,t,r,i){let o=this.gl_,s=t.getSize();o.bindFramebuffer(o.FRAMEBUFFER,t.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,t.getDepthbuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),i?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(e,t){let r=this.gl_;this.getExtension("OES_element_index_uint");let i=r.UNSIGNED_INT,o=4,s=t-e,a=e*o;r.drawElements(r.TRIANGLES,s,i,a)}drawElementsInstanced(e,t,r){let i=this.gl_;this.getExtension("OES_element_index_uint");let o=this.getInstancedRenderingExtension_(),s=i.UNSIGNED_INT,a=4,l=t-e,c=e*a;o.drawElementsInstancedANGLE(i.TRIANGLES,l,s,c,r);for(let f=0;f<this.maxAttributeCount_;f++)o.vertexAttribDivisorANGLE(f,0)}finalizeDraw(e,t,r){for(let i=0,o=this.postProcessPasses_.length;i<o;i++)i===o-1?this.postProcessPasses_[i].apply(e,null,t,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){let t=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(lp.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(lp.ZOOM,e.viewState.zoom),this.setUniformFloatValue(lp.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(lp.PIXEL_RATIO,i),this.setUniformFloatVec2(lp.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(lp.ROTATION,r)}applyHitDetectionUniform(e){let t=this.getUniformLocation(lp.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(lp.PIXEL_RATIO,.5)}applyUniforms(e){let t=this.gl_,r,i=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(e):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=t.createTexture()),this.bindTexture(o.texture,i,o.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);let s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&o.prevValue!==r&&(o.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,PC(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(e,t){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,t&&(this.applyFrameState(t),this.applyUniforms(t))}compileShader(e,t){let r=this.gl_,i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,t){let r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),o=this.compileShader(t,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,i),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(i,r.COMPILE_STATUS)){let a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(o,r.COMPILE_STATUS)){let a=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){let a=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(a)}return s}getUniformLocation(e){let t=ct(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){let t=ct(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){let r=e.size,i=e.viewState.rotation,o=e.viewState.resolution,s=e.viewState.center;return ji(t,0,0,2/(o*r[0]),2/(o*r[1]),-i,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,t,r,i,o,s){let a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,t,r,!1,i,o),s&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,t){let r=axe(e),i=0;for(let o=0;o<e.length;o++){let s=e[o];s.name&&this.enableAttributeArray_(s.name,s.size,s.type||z4,r,i,t),i+=s.size*rK(s.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){Oa(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,r,i){let o=this.gl_;r=r||o.createTexture();let s=i?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let a=0,l=o.RGBA,c=0,f=o.RGBA,d=o.UNSIGNED_BYTE;return t instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,a,l,e[0],e[1],c,f,d,t):t?o.texImage2D(o.TEXTURE_2D,a,l,f,d,t):o.texImage2D(o.TEXTURE_2D,a,l,e[0],e[1],c,f,d,null),r}};function axe(n){let e=0;for(let t=0;t<n.length;t++){let r=n[t];e+=r.size*rK(r.type)}return e}function rK(n){switch(n){case __.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case __.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case __.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case __.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var iK=W4;var $4=class extends du{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(gt.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Je.LOADED,this.loaded)this.uploadTile();else{if(e instanceof kd){let t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(gt.CHANGE,this.handleTileChange_)}}uploadTile(){It()}setReady(){this.ready=!0,this.dispatchEvent(gt.CHANGE)}handleTileChange_(){this.tile.getState()===Je.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(gt.CHANGE,this.handleTileChange_)}},oK=$4;function aK(n,e,t){let r=t?n.LINEAR:n.NEAREST;n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r)}function lxe(n,e,t,r){aK(n,e,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)}function sK(n,e,t,r,i,o){let s=n.getGL(),a,l;t instanceof Float32Array?(a=s.FLOAT,n.getExtension("OES_texture_float"),l=n.getExtension("OES_texture_float_linear")!==null):(a=s.UNSIGNED_BYTE,l=!0),aK(s,e,o&&l);let c=t.byteLength/r[1],f=1;c%8===0?f=8:c%4===0?f=4:c%2===0&&(f=2);let d;switch(i){case 1:{d=s.LUMINANCE;break}case 2:{d=s.LUMINANCE_ALPHA;break}case 3:{d=s.RGB;break}case 4:{d=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}let y=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.texImage2D(s.TEXTURE_2D,0,d,r[0],r[1],0,d,a,t),s.pixelStorei(s.UNPACK_ALIGNMENT,y)}var v_=null;function uxe(){v_=Qn(1,1,void 0,{willReadFrequently:!0})}var Y4=class extends oK{constructor(e){super(e),this.textures=[],this.renderSize_=er(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;let t=new YT(iw,y_);t.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setHelper(e){let t=this.helper?.getGL();if(t){this.helper.deleteBuffer(this.coords);for(let r=0;r<this.textures.length;++r)t.deleteTexture(this.textures[r])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){let e=this.helper,t=e.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof kd||r instanceof cy?i=r.getImage():i=r.getData();let o=af(i);if(o){let T=t.createTexture();this.textures.push(T),this.bandCount=4,lxe(t,T,o,r.interpolate),this.setReady();return}i=V1(i);let s=r.getSize(),a=[s[0]+2*this.gutter,s[1]+2*this.gutter],l=i instanceof Float32Array,c=a[0]*a[1],f=l?Float32Array:Uint8Array,d=f.BYTES_PER_ELEMENT,y=i.byteLength/a[1];this.bandCount=Math.floor(y/d/a[0]);let p=Math.ceil(this.bandCount/4);if(p===1){let T=t.createTexture();this.textures.push(T),sK(e,T,i,a,this.bandCount,r.interpolate),this.setReady();return}let _=new Array(p);for(let T=0;T<p;++T){let A=t.createTexture();this.textures.push(A);let N=T<p-1?4:(this.bandCount-1)%4+1;_[T]=new f(c*N)}let x=0,b=0,S=a[0]*this.bandCount;for(let T=0;T<a[1];++T){for(let A=0;A<S;++A){let N=i[b+A],k=Math.floor(x/this.bandCount),W=A%this.bandCount,X=Math.floor(W/4),Y=_[X],$=Y.length/c,V=W%4;Y[k*$+V]=N,++x}b+=y/d}for(let T=0;T<p;++T){let A=this.textures[T],N=_[T],k=N.length/c;sK(e,A,N,a,k,r.interpolate)}this.setReady()}getImagePixelData_(e,t,r){let i=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1];v_||uxe(),v_.clearRect(0,0,1,1);let a=e.width,l=e.height,c=a-2*i,f=l-2*i,d=i+Math.floor(c*(t/o)),y=i+Math.floor(f*(r/s)),p;try{v_.drawImage(e,d,y,1,1,0,0,1,1),p=v_.getImageData(0,0,1,1).data}catch{return v_=null,null}return p}getArrayPixelData_(e,t,r,i){let o=this.gutter,s=this.renderSize_[0],a=this.renderSize_[1],l=t[0],c=t[1],f=l+2*o,d=c+2*o,y=o+Math.floor(l*(r/s)),p=o+Math.floor(c*(i/a));if(e instanceof DataView){let x=e.byteLength/(f*d),b=x*(p*f+y),S=e.buffer.slice(b,b+x);return new DataView(S)}let _=this.bandCount*(p*f+y);return e.slice(_,_+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof lf){let r=this.tile.getData(),i=V1(r);if(i){let o=this.tile.getSize();return this.getArrayPixelData_(i,o,e,t)}return this.getImagePixelData_(af(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}},lK=Y4;var X4=class n extends vS{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Yr(),this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(ur.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){let r=this.getLayer();if(r.hasListener(Ri.PRECOMPOSE)){let i=new Ld(Ri.PRECOMPOSE,void 0,t,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,t){let r=this.getLayer();if(r.hasListener(Ri.POSTCOMPOSE)){let i=new Ld(Ri.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,r=-1,i;for(let s=0,a=e.layerStatesArray.length;s<a;s++){let l=e.layerStatesArray[s].layer,c=l.getRenderer();if(!(c instanceof n)){t=!0;continue}let f=l.getClassName();if((t||f!==i)&&(r+=1,t=!1),i=f,c===this)break}let o="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new iK({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(ur.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,t,r){let i=this.getLayer();if(i.hasListener(e)){ji(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);let o=new Ld(e,this.inversePixelTransform_,r,t);i.dispatchEvent(o)}}preRender(e,t){this.dispatchRenderEvent_(Ri.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(Ri.POSTRENDER,e,t)}},uK=X4;var dK={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function cK(n){return 1/(n+2)}function cxe(){return{tileIds:new Set,representationsByZ:{}}}function hK(n,e){return n.tileIds.has(ct(e))}function fK(n,e,t){let r=n.representationsByZ;t in r||(r[t]=new Set),r[t].add(e),n.tileIds.add(ct(e.tile))}function Z4(n,e){let t=n.layerStatesArray[n.layerIndex];t.extent&&(e=kr(e,so(t.extent,n.viewState.projection)));let r=t.layer.getRenderSource();if(!r.getWrapX()){let i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=kr(e,i))}return e}function ZT(n,e){return`${ct(n)},${n.getKey()},${n.getRevision()},${Cg(e)}`}var K4=class extends uK{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Yr(),this.tempMat4=Yd(),this.tempTileRange_=new ay(0,0,0,0),this.tempTileCoord_=uf(0,0,0),this.tempSize_=[0,0];let r=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new H1(r),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;let r=this.getLayer().getRenderSource();return!r||ms(Z4(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return It()}enqueueTiles(e,t,r,i,o){let s=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),f=l.getGutterForProjection(s.projection),d=ct(l);d in e.wantedTiles||(e.wantedTiles[d]={});let y=e.wantedTiles[d],p=this.tileRepresentationCache,_=a.getMapInternal(),x=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),_?_.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),b=s.rotation,S=b?jw(s.center,s.resolution,b,e.size):void 0;for(let T=r;T>=x;--T){let A=c.getTileRangeForExtentAndZ(t,T,this.tempTileRange_),N=c.getResolution(T);for(let k=A.minX;k<=A.maxX;++k)for(let W=A.minY;W<=A.maxY;++W){if(b&&!c.tileCoordIntersectsViewport([T,k,W],S))continue;let X=uf(T,k,W,this.tempTileCoord_),Y=ZT(l,X),$,V;if(p.containsKey(Y)&&($=p.get(Y),V=$.tile),(!$||$.tile.key!==l.getKey())&&(V=l.getTile(T,k,W,e.pixelRatio,s.projection),!V)||hK(i,V))continue;$?$.setTile(V):($=this.createTileRepresentation({tile:V,grid:c,helper:this.helper,gutter:f}),p.set(Y,$)),fK(i,$,T);let B=V.getKey();y[B]=!0,V.getState()===Je.IDLE&&(e.tileQueue.isKeyQueued(B)||e.tileQueue.enqueue([V,d,c.getTileCoordCenter(X),N]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,r,i,o,s,a,l,c,f,d){}renderTileMask(e,t,r,i){}drawTile_(e,t,r,i,o,s,a){if(!t.ready)return;let c=t.tile.tileCoord,f=Cg(c),d=f in s?s[f]:1,y=a.getResolution(r),p=er(a.getTileSize(r),this.tempSize_),_=a.getOrigin(r),x=a.getTileCoordExtent(c),b=d<1?-1:cK(r);d<1&&(e.animate=!0);let S=e.viewState,T=S.center[0],A=S.center[1],N=p[0]+2*i,k=p[1]+2*i,W=N/k,X=(T-_[0])/(p[0]*y),Y=(_[1]-A)/(p[1]*y),$=S.resolution/y,V=c[1],B=c[2];u1(this.tileTransform_),xd(this.tileTransform_,2/(e.size[0]*$/N),-2/(e.size[1]*$/N)),DG(this.tileTransform_,S.rotation),xd(this.tileTransform_,1,1/W),Pb(this.tileTransform_,(p[0]*(V-X)-i)/N,(p[1]*(B-Y)-i)/k),this.renderTile(t,this.tileTransform_,e,o,y,p,_,x,b,i,d)}renderFrame(e){this.frameState=e,this.renderComplete=!0;let t=this.helper.getGL();this.preRender(t,e);let r=e.viewState,i=this.getLayer(),o=i.getRenderSource(),s=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),l=Z4(e,e.extent),c=s.getZForResolution(r.resolution,o.zDirection),f=cxe(),d=i.getPreload();if(e.nextExtent){let A=s.getZForResolution(r.nextResolution,o.zDirection),N=Z4(e,e.nextExtent);this.enqueueTiles(e,N,A,f,d)}this.enqueueTiles(e,l,c,f,0),d>0&&setTimeout(()=>{this.enqueueTiles(e,l,c-1,f,d-1)},0);let y={},p=!1,_=f.representationsByZ;if(c in _){let A=ct(this),N=e.time;for(let k of _[c]){let W=k.tile;if(W.getState()===Je.EMPTY)continue;let X=W.tileCoord;if(k.ready){let V=W.getAlpha(A,N);if(V===1){W.endTransition(A);continue}p=!0;let B=Cg(X);y[B]=V}if(this.renderComplete=!1,this.findAltTiles_(s,X,c+1,f))continue;let $=s.getMinZoom();for(let V=c-1;V>=$&&!this.findAltTiles_(s,X,V,f);--V);}}let x=Object.keys(_).map(Number).sort(Sb);if(this.beforeTilesMaskRender(e))for(let A=0,N=x.length;A<N;++A){let k=x[A];for(let W of _[k]){let X=W.tile.tileCoord;if(Cg(X)in y)continue;let $=s.getTileCoordExtent(X);this.renderTileMask(W,k,$,cK(k))}}this.beforeTilesRender(e,p);for(let A=0,N=x.length;A<N;++A){let k=x[A];for(let W of _[k]){let X=W.tile.tileCoord;Cg(X)in y||this.drawTile_(e,W,k,a,l,y,s)}}if(c in _)for(let A of _[c]){let N=A.tile.tileCoord;Cg(N)in y&&this.drawTile_(e,A,c,a,l,y,s)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);let S=this.helper.getCanvas();return this.tileRepresentationCache.expireCache(),this.postRender(t,e),S}beforeFinalize(e){}findAltTiles_(e,t,r,i){let o=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!o)return!1;let s=!0,a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let c=o.minX;c<=o.maxX;++c)for(let f=o.minY;f<=o.maxY;++f){let d=ZT(l,[r,c,f]),y=!1;if(a.containsKey(d)){let p=a.get(d);p.ready&&!hK(i,p.tile)&&(fK(i,p,r),y=!0)}y||(s=!1)}return s}clearCache(){super.clearCache();let e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}},pK=K4;var bn=tn(dt({},dK),{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"}),aw={TEXTURE_COORD:"a_textureCoord"},hxe=[{name:aw.TEXTURE_COORD,size:2,type:__.FLOAT}],J4=class extends pK{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new YT(ow,y_),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){let t=this.helper.getGL();for(let r of this.paletteTextures_)r.delete(t)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);let t=this.helper.getGL();for(let r of this.paletteTextures_)r.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();let e=this.helper.getGL();for(let t of this.paletteTextures_)t.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){let e=this.helper.getGL();for(let t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new lK(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,r,i,o,s,a,l,c,f,d){let y=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(hxe);let p=0;for(;p<e.textures.length;){let W=`${bn.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(e.textures[p],p,W),++p}for(let W=0;W<this.paletteTextures_.length;++W){let X=this.paletteTextures_[W],Y=X.getTexture(y);this.helper.bindTexture(Y,p,X.name),++p}let _=r.viewState,x=s[0]+2*f,b=s[1]+2*f,T=e.tile.tileCoord,A=T[1],N=T[2];this.helper.setUniformMatrixValue(bn.TILE_TRANSFORM,PC(this.tempMat4,t)),this.helper.setUniformFloatValue(bn.TRANSITION_ALPHA,d),this.helper.setUniformFloatValue(bn.DEPTH,c);let k=i;f>0&&(k=l,kr(k,i,k)),this.helper.setUniformFloatVec4(bn.RENDER_EXTENT,k),this.helper.setUniformFloatValue(bn.RESOLUTION,_.resolution),this.helper.setUniformFloatValue(bn.ZOOM,_.zoom),this.helper.setUniformFloatValue(bn.TEXTURE_PIXEL_WIDTH,x),this.helper.setUniformFloatValue(bn.TEXTURE_PIXEL_HEIGHT,b),this.helper.setUniformFloatValue(bn.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(bn.TEXTURE_ORIGIN_X,a[0]+A*s[0]*o-f*o),this.helper.setUniformFloatValue(bn.TEXTURE_ORIGIN_Y,a[1]-N*s[1]*o+f*o),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;let r=this.frameState;if(!r)return null;let i=this.getLayer(),o=Ar(r.pixelToCoordinateTransform,e.slice()),s=r.viewState,a=i.getExtent();if(a&&!Gs(so(a,s.projection),o))return null;let l=i.getSources(wi([o]),s.resolution),c,f,d;for(c=l.length-1;c>=0;--c)if(f=l[c],f.getState()==="ready"){if(d=f.getTileGridForProjection(s.projection),f.getWrapX())break;let p=d.getExtent();if(!p||Gs(p,o))break}if(c<0)return null;let y=this.tileRepresentationCache;for(let p=d.getZForResolution(s.resolution);p>=d.getMinZoom();--p){let _=d.getTileCoordForCoordAndZ(o,p),x=ZT(f,_);if(!y.containsKey(x))continue;let b=y.get(x);if(b.tile.getState()===Je.EMPTY)return null;if(!b.loaded)continue;let T=d.getOrigin(p),A=er(d.getTileSize(p)),N=d.getResolution(p),k=(o[0]-T[0])/N-_[1]*A[0],W=(T[1]-o[1])/N-_[2]*A[1];return b.getPixelData(k,W)}return null}disposeInternal(){let e=this.helper;if(e){let t=e.getGL();for(let r of this.paletteTextures_)r.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}},gK=J4;var Q4=class{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){let t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}},mK=Q4;function fxe(n,e){return`operator_${n}_${Object.keys(e.functions).length}`}function lw(n){let e=n.toString();return e.includes(".")?e:e+".0"}function nF(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(lw).join(", ")})`}function dxe(n){let e=Ks(n),t=e.length>3?e[3]:1;return nF([e[0]/255,e[1]/255,e[2]/255,t])}function pxe(n){let e=er(n);return nF(e)}var eF={},gxe=0;function KT(n){return n in eF||(eF[n]=gxe++),eF[n]}function mxe(n){return lw(KT(n))}function JT(n){return"u_var_"+n}function yK(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}var tF="getBandValue",rF="u_paletteTextures",yxe="featureId",_xe="geometryType",vxe=-9999999;function _K(n,e,t,r){let i=Do(n,e,t);return iF(i,e,r)}function Sr(n){return(e,t,r)=>{let i=t.args.length,o=new Array(i);for(let s=0;s<i;++s)o[s]=iF(t.args[s],r,e);return n(o,e)}}var xxe={[je.Get]:(n,e)=>{let r=e.args[0].value;r in n.properties||(n.properties[r]={name:r,type:e.type});let o="a_prop_"+r;return Ku(e.type,To)&&(o=`(${o} > 0.0)`),o},[je.Id]:n=>(n.featureId=!0,"a_"+yxe),[je.GeometryType]:n=>(n.geometryType=!0,"a_"+_xe),[je.LineMetric]:()=>"currentLineMetric",[je.Var]:(n,e)=>{let r=e.args[0].value;r in n.variables||(n.variables[r]={name:r,type:e.type});let o=JT(r);return Ku(e.type,To)&&(o=`(${o} > 0.0)`),o},[je.Has]:(n,e)=>{let r=e.args[0].value;return r in n.properties||(n.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${lw(vxe)})`},[je.Resolution]:()=>"u_resolution",[je.Zoom]:()=>"u_zoom",[je.Time]:()=>"u_time",[je.Any]:Sr(n=>`(${n.join(" || ")})`),[je.All]:Sr(n=>`(${n.join(" && ")})`),[je.Not]:Sr(([n])=>`(!${n})`),[je.Equal]:Sr(([n,e])=>`(${n} == ${e})`),[je.NotEqual]:Sr(([n,e])=>`(${n} != ${e})`),[je.GreaterThan]:Sr(([n,e])=>`(${n} > ${e})`),[je.GreaterThanOrEqualTo]:Sr(([n,e])=>`(${n} >= ${e})`),[je.LessThan]:Sr(([n,e])=>`(${n} < ${e})`),[je.LessThanOrEqualTo]:Sr(([n,e])=>`(${n} <= ${e})`),[je.Multiply]:Sr(n=>`(${n.join(" * ")})`),[je.Divide]:Sr(([n,e])=>`(${n} / ${e})`),[je.Add]:Sr(n=>`(${n.join(" + ")})`),[je.Subtract]:Sr(([n,e])=>`(${n} - ${e})`),[je.Clamp]:Sr(([n,e,t])=>`clamp(${n}, ${e}, ${t})`),[je.Mod]:Sr(([n,e])=>`mod(${n}, ${e})`),[je.Pow]:Sr(([n,e])=>`pow(${n}, ${e})`),[je.Abs]:Sr(([n])=>`abs(${n})`),[je.Floor]:Sr(([n])=>`floor(${n})`),[je.Ceil]:Sr(([n])=>`ceil(${n})`),[je.Round]:Sr(([n])=>`floor(${n} + 0.5)`),[je.Sin]:Sr(([n])=>`sin(${n})`),[je.Cos]:Sr(([n])=>`cos(${n})`),[je.Atan]:Sr(([n,e])=>e!==void 0?`atan(${n}, ${e})`:`atan(${n})`),[je.Sqrt]:Sr(([n])=>`sqrt(${n})`),[je.Match]:Sr(n=>{let e=n[0],t=n[n.length-1],r=null;for(let i=n.length-3;i>=1;i-=2){let o=n[i],s=n[i+1];r=`(${e} == ${o} ? ${s} : ${r||t})`}return r}),[je.Between]:Sr(([n,e,t])=>`(${n} >= ${e} && ${n} <= ${t})`),[je.Interpolate]:Sr(([n,e,...t])=>{let r="";for(let i=0;i<t.length-2;i+=2){let o=t[i],s=r||t[i+1],a=t[i+2],l=t[i+3],c;n===lw(1)?c=`(${e} - ${o}) / (${a} - ${o})`:c=`(pow(${n}, (${e} - ${o})) - 1.0) / (pow(${n}, (${a} - ${o})) - 1.0)`,r=`mix(${s}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[je.Case]:Sr(n=>{let e=n[n.length-1],t=null;for(let r=n.length-3;r>=0;r-=2){let i=n[r],o=n[r+1];t=`(${i} ? ${o} : ${t||e})`}return t}),[je.In]:Sr(([n,...e],t)=>{let r=fxe("in",t),i=[];for(let o=0;o<e.length;o+=1)i.push(`  if (inputValue == ${e[o]}) { return true; }`);return t.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${n})`}),[je.Array]:Sr(n=>`vec${n.length}(${n.join(", ")})`),[je.Color]:Sr(n=>{if(n.length===1)return`vec4(vec3(${n[0]} / 255.0), 1.0)`;if(n.length===2)return`vec4(vec3(${n[0]} / 255.0), ${n[1]})`;let e=n.slice(0,3).map(r=>`${r} / 255.0`);if(n.length===3)return`vec4(${e.join(", ")}, 1.0)`;let t=n[3];return`vec4(${e.join(", ")}, ${t})`}),[je.Band]:Sr(([n,e,t],r)=>{if(!(tF in r.functions)){let i="",o=r.bandCount||1;for(let s=0;s<o;s++){let a=Math.floor(s/4),l=s%4;s===o-1&&l===1&&(l=3);let c=`${bn.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${s+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[tF]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${bn.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${bn.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${tF}(${n}, ${e??"0.0"}, ${t??"0.0"})`}),[je.Palette]:(n,e)=>{let[t,...r]=e.args,i=r.length,o=new Uint8Array(i*4);for(let c=0;c<r.length;c++){let f=r[c].value,d=Ks(f),y=c*4;o[y]=d[0],o[y+1]=d[1],o[y+2]=d[2],o[y+3]=d[3]*255}n.paletteTextures||(n.paletteTextures=[]);let s=`${rF}[${n.paletteTextures.length}]`,a=new mK(s,o);n.paletteTextures.push(a);let l=iF(t,wn,n);return`texture2D(${s}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function iF(n,e,t){if(n instanceof k1){let r=xxe[n.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(n.operator)}`);return r(t,n,e)}if((n.type&wn)>0)return lw(n.value);if((n.type&To)>0)return n.value.toString();if((n.type&Is)>0)return mxe(n.value.toString());if((n.type&os)>0)return dxe(n.value);if((n.type&Ju)>0)return nF(n.value);if((n.type&Ad)>0)return pxe(n.value);throw new Error(`Unexpected expression ${n.value} (expected type ${_g(e)})`)}function Xg(n,e,t){let r=O1();return _K(e,t,r,n)}function vK(n,e){let t=`
    attribute vec2 ${aw.TEXTURE_COORD};
    uniform mat4 ${bn.TILE_TRANSFORM};
    uniform float ${bn.TEXTURE_PIXEL_WIDTH};
    uniform float ${bn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${bn.TEXTURE_RESOLUTION};
    uniform float ${bn.TEXTURE_ORIGIN_X};
    uniform float ${bn.TEXTURE_ORIGIN_Y};
    uniform float ${bn.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${aw.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${bn.TEXTURE_ORIGIN_X} + ${bn.TEXTURE_RESOLUTION} * ${bn.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${bn.TEXTURE_ORIGIN_Y} - ${bn.TEXTURE_RESOLUTION} * ${bn.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${bn.TILE_TRANSFORM} * vec4(${aw.TEXTURE_COORD}, ${bn.DEPTH}, 1.0);
    }
  `,r=tn(dt({},yK()),{bandCount:e}),i=[];if(n.color!==void 0){let d=Xg(r,n.color,os);i.push(`color = ${d};`)}if(n.contrast!==void 0){let d=Xg(r,n.contrast,wn);i.push(`color.rgb = clamp((${d} + 1.0) * color.rgb - (${d} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.exposure!==void 0){let d=Xg(r,n.exposure,wn);i.push(`color.rgb = clamp((${d} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.saturation!==void 0){let d=Xg(r,n.saturation,wn);i.push(`
      float saturation = ${d} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(n.gamma!==void 0){let d=Xg(r,n.gamma,wn);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${d}));`)}if(n.brightness!==void 0){let d=Xg(r,n.brightness,wn);i.push(`color.rgb = clamp(color.rgb + ${d}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}let o={},s=Object.keys(r.variables).length;if(s>1&&!n.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let d=0;d<s;++d){let y=r.variables[Object.keys(r.variables)[d]];if(!(y.name in n.variables))throw new Error(`Missing '${y.name}' in style variables`);let p=JT(y.name);o[p]=function(){let _=n.variables[y.name];return typeof _=="string"&&(_=KT(_)),_!==void 0?_:-9999999}}let a=Object.keys(o).map(function(d){return`uniform float ${d};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${bn.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${rF}[${r.paletteTextures.length}];`);let c=Object.keys(r.functions).map(function(d){return r.functions[d]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${bn.RENDER_EXTENT};
    uniform float ${bn.TRANSITION_ALPHA};
    uniform float ${bn.TEXTURE_PIXEL_WIDTH};
    uniform float ${bn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${bn.RESOLUTION};
    uniform float ${bn.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${bn.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${bn.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${bn.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${bn.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${bn.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${bn.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:f,uniforms:o,paletteTextures:r.paletteTextures}}var QT=class extends wS{constructor(e){e=e?Object.assign({},e):{};let t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(ur.SOURCE,this.handleSourceUpdate_)}getSources(e,t){let r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){let e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();let e=this.getSource();if(e)if(e.getState()==="loading"){let t=()=>{e.getState()==="ready"&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){let e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){let e=vK(this.style_,this.getSourceBandCount_());return new gK(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){let r=this.getRenderer(),i;for(let o=0,s=t.length;o<s;++o)this.renderedSource_=t[o],r.prepareFrame(e)&&(i=r.renderFrame(e));return i}render(e,t){this.rendered=!0;let r=e.viewState,i=this.getSources(e.extent,r.resolution),o=!0;for(let a=0,l=i.length;a<l;++a){let c=i[a],f=c.getState();if(f=="loading"){let d=()=>{c.getState()=="ready"&&(c.removeEventListener("change",d),this.changed())};c.addEventListener("change",d)}o=o&&f=="ready"}let s=this.renderSources(e,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){let a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(e,a)}return s}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){let t=vK(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}};QT.prototype.dispose;var oF=QT;var wxe=Object.defineProperty,Exe=Math.pow,ri=(n,e)=>wxe(n,"name",{value:e,configurable:!0}),cs=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())}),mwt=ri((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:ri((o,s)=>{let a=document.createElement("img"),l=new AbortController,c=l.signal;return a.cancel=()=>{l.abort()},t||(n.getHeader().then(f=>{f.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):f.tileType===2?r="image/png":f.tileType===3?r="image/jpeg":f.tileType===4?r="image/webp":f.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,c).then(f=>{if(f){let d=new Blob([f.data],{type:r}),y=window.URL.createObjectURL(d);a.src=y}else a.style.display="none";a.cancel=void 0,s(void 0,a)}).catch(f=>{if(f.name!=="AbortError")throw f}),a},"createTile"),_removeTile:ri(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new i(e)},"leafletRasterLayer"),bxe=ri(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:ri(()=>r.abort(),"cancel")}},"v3compat"),Sxe=class{constructor(e){this.tilev4=ri((t,r)=>cs(this,null,function*(){if(t.type==="json"){let p=t.url.substr(10),_=this.tiles.get(p);if(_||(_=new Zg(p),this.tiles.set(p,_)),this.metadata){let b=yield _.getTileJson(t.url);return r.signal.throwIfAborted(),{data:b}}let x=yield _.getHeader();return r.signal.throwIfAborted(),(x.minLon>=x.maxLon||x.minLat>=x.maxLat)&&console.error(`Bounds of PMTiles archive ${x.minLon},${x.minLat},${x.maxLon},${x.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:x.minZoom,maxzoom:x.maxZoom,bounds:[x.minLon,x.minLat,x.maxLon,x.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(i);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new Zg(s),this.tiles.set(s,a));let l=o[2],c=o[3],f=o[4],d=yield a.getHeader(),y=yield a?.getZxy(+l,+c,+f,r.signal);if(r.signal.throwIfAborted(),y)return{data:new Uint8Array(y.data),cacheControl:y.cacheControl,expires:y.expires};if(d.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=bxe(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};ri(Sxe,"Protocol");function xK(n,e){return(e>>>0)*4294967296+(n>>>0)}ri(xK,"toNum");function wK(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return xK(n,i);throw new Error("Expected varint not more than 10 bytes")}ri(wK,"readVarintRemainder");function x_(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,wK(r,n))}ri(x_,"readVarint");function aF(n,e,t,r,i){return i===0?r!==0?[n-1-t,n-1-e]:[t,e]:[e,t]}ri(aF,"rotate");function EK(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>=1<<n||t>=1<<n)throw new Error("tile x/y outside zoom level bounds");let r=((1<<n)*(1<<n)-1)/3,i=n-1,[o,s]=[e,t];for(let a=1<<i;a>0;a>>=1){let l=o&a,c=s&a;r+=(3*l^c)*(1<<i),[o,s]=aF(a,o,s,l,c),i--}return r}ri(EK,"zxyToTileId");function bK(n){let e=3*n+1;return e<4294967296?31-Math.clz32(e):63-Math.clz32(e/4294967296)}ri(bK,"tileIdToZ");function Cxe(n){let e=bK(n)>>1;if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let t=((1<<e)*(1<<e)-1)/3,r=n-t,i=0,o=0,s=1<<e;for(let a=1;a<s;a<<=1){let l=a&r/2,c=a&(r^l);[i,o]=aF(a,i,o,l,c),r=r/2,i+=l,o+=c}return[e,i,o]}ri(Cxe,"tileIdToZxy");var Ixe=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Ixe||{});function eD(n,e){return cs(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return eY(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}ri(eD,"defaultDecompress");var Kg=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Kg||{});function SK(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}ri(SK,"tileTypeExt");var Txe=127;function CK(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,o=e-n[i].tileId;if(o>0)t=i+1;else if(o<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}ri(CK,"findTile");var Dxe=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return cs(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};ri(Dxe,"FileSource");var IK=class{constructor(e,t=new Headers){var r,i;this.url=e,this.customHeaders=t,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=(i=(r=globalThis.navigator)==null?void 0:r.userAgent)!=null?i:"");let s=o.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,s&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return cs(this,null,function*(){let o,s;r?s=r:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload?l="reload":this.chromeWindowsNoCache&&(l="no-store");let c=yield fetch(this.url,{signal:s,cache:l,headers:a});if(e===0&&c.status===416){let y=c.headers.get("Content-Range");if(!y||!y.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let p=+y.substr(8);c=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${p-1}`}})}let f=c.headers.get("Etag");if(f!=null&&f.startsWith("W/")&&(f=null),c.status===416||i&&f&&f!==i)throw this.mustReload=!0,new sF(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(c.status>=300)throw new Error(`Bad response code: ${c.status}`);let d=c.headers.get("Content-Length");if(c.status===200&&(!d||+d>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield c.arrayBuffer(),etag:f||void 0,cacheControl:c.headers.get("Cache-Control")||void 0,expires:c.headers.get("Expires")||void 0}})}};ri(IK,"FetchSource");var Axe=IK;function wu(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*Exe(2,32)+r}ri(wu,"getUint64");function TK(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:wu(t,8),rootDirectoryLength:wu(t,16),jsonMetadataOffset:wu(t,24),jsonMetadataLength:wu(t,32),leafDirectoryOffset:wu(t,40),leafDirectoryLength:wu(t,48),tileDataOffset:wu(t,56),tileDataLength:wu(t,64),numAddressedTiles:wu(t,72),numTileEntries:wu(t,80),numTileContents:wu(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}ri(TK,"bytesToHeader");function lF(n){let e={buf:new Uint8Array(n),pos:0},t=x_(e),r=[],i=0;for(let o=0;o<t;o++){let s=x_(e);r.push({tileId:i+s,offset:0,length:0,runLength:1}),i+=s}for(let o=0;o<t;o++)r[o].runLength=x_(e);for(let o=0;o<t;o++)r[o].length=x_(e);for(let o=0;o<t;o++){let s=x_(e);s===0&&o>0?r[o].offset=r[o-1].offset+r[o-1].length:r[o].offset=s-1}return r}ri(lF,"deserializeIndex");var DK=class extends Error{};ri(DK,"EtagMismatch");var sF=DK;function uF(n,e){return cs(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,Txe),i=TK(r,t.etag),o=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),s=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,a=lF(yield e(o,i.internalCompression));return[i,[s,a.length,a]]})}ri(uF,"getHeaderAndRoot");function cF(n,e,t,r,i){return cs(this,null,function*(){let o=yield n.getBytes(t,r,void 0,i.etag),s=yield e(o.data,i.internalCompression),a=lF(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}ri(cF,"getDirectory");var Rxe=class{constructor(e=100,t=!0,r=eD){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return cs(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield uF(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return cs(this,null,function*(){let o=`${e.getKey()}|${i.etag||""}|${t}|${r}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield cF(e,this.decompress,t,r,i);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return cs(this,null,function*(){this.cache.delete(e.getKey())})}};ri(Rxe,"ResolvedValueCache");var AK=class{constructor(e=100,t=!0,r=eD){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return cs(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((o,s)=>{uF(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return cs(this,null,function*(){let o=`${e.getKey()}|${i.etag||""}|${t}|${r}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((l,c)=>{cF(e,this.decompress,t,r,i).then(f=>{l(f),this.prune()}).catch(f=>{c(f)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return cs(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,o)=>{this.getHeader(e).then(s=>{i(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,r)})}};ri(AK,"SharedPromiseCache");var Mxe=AK,RK=class{constructor(e,t,r){typeof e=="string"?this.source=new Axe(e):this.source=e,r?this.decompress=r:this.decompress=eD,t?this.cache=t:this.cache=new Mxe}getHeader(){return cs(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return cs(this,null,function*(){let o=EK(e,t,r),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,l=s.rootDirectoryLength;for(let c=0;c<=3;c++){let f=yield this.cache.getDirectory(this.source,a,l,s),d=CK(f,o);if(d){if(d.runLength>0){let y=yield this.source.getBytes(s.tileDataOffset+d.offset,d.length,i,s.etag);return{data:yield this.decompress(y.data,s.tileCompression),cacheControl:y.cacheControl,expires:y.expires}}a=s.leafDirectoryOffset+d.offset,l=d.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return cs(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(o){if(o instanceof sF)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw o}})}getMetadataAttempt(){return cs(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return cs(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof sF)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return cs(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=SK(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};ri(RK,"PMTiles");var Zg=RK;var PK=Object.defineProperty,MK=Object.getOwnPropertySymbols,Pxe=Object.prototype.hasOwnProperty,Lxe=Object.prototype.propertyIsEnumerable,NK=(n,e,t)=>e in n?PK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tD=(n,e)=>{for(var t in e||(e={}))Pxe.call(e,t)&&NK(n,t,e[t]);if(MK)for(var t of MK(e))Lxe.call(e,t)&&NK(n,t,e[t]);return n},nD=(n,e)=>PK(n,"name",{value:e,configurable:!0}),kxe=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())}),LK=class extends OC{constructor(e){super(tD(tD({},e),{state:"loading"})),this.loadImage=nD(r=>new Promise((i,o)=>{let s=new Image;s.addEventListener("load",()=>i(s)),s.addEventListener("error",()=>o(new Error("load failed"))),s.src=r}),"loadImage");let t=new Zg(e.url);t.getHeader().then(r=>{let i=e.projection===void 0?"EPSG:3857":e.projection;this.tileGrid=e.tileGrid||ec({extent:Rl(i),maxResolution:e.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,tileSize:e.tileSize}),this.setLoader((o,s,a)=>kxe(this,null,function*(){let l=yield t.getZxy(o,s,a);if(!l)return new Uint8Array;let c=URL.createObjectURL(new Blob([l.data])),f=yield this.loadImage(c);return URL.revokeObjectURL(c),f})),this.setState("ready")})}};nD(LK,"PMTilesRasterSource");var hF=LK,kK=class extends sI{constructor(e){super(tD(tD({},e),{state:"loading",url:"pmtiles://{z}/{x}/{y}",format:e.format||new p4})),this.tileLoadFunction=nD((t,r)=>{let i=t,o=new RegExp(/pmtiles:\/\/(\d+)\/(\d+)\/(\d+)/),s=r.match(o);if(!(s&&s.length>=4))throw Error("Could not parse tile URL");let a=+s[1],l=+s[2],c=+s[3];i.setLoader((f,d,y)=>{this.pmtiles_.getZxy(a,l,c).then(p=>{if(p){let _=i.getFormat();i.setFeatures(_.readFeatures(p.data,{extent:f,featureProjection:y})),i.setState(Je.LOADED)}else i.setFeatures([]),i.setState(Je.EMPTY)}).catch(p=>{i.setFeatures([]),i.setState(Je.ERROR)})})},"tileLoadFunction"),this.pmtiles_=new Zg(e.url),this.pmtiles_.getHeader().then(t=>{let r=e.projection||"EPSG:3857",i=e.extent||Rl(r);this.tileGrid=e.tileGrid||ec({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:e.tileSize||512}),this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}};nD(kK,"PMTilesVectorSource");var OK=kK;var rJ=$l(zK(),1);function no(n){return typeof n=="string"&&n.length>0}function Qg(n,e,t,r=1e-8){if(typeof n!="number")return null;let i=e-r,o=t+r;return n<i||n>o?null:Math.min(Math.max(n,e),t)}function bi(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)}function Oxe(n){switch(n){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return n.startsWith("u")?0:null}function Fxe(n){switch(n){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}function rD(n){let e={minimum:null,maximum:null},t=l=>l.minimum!==null&&l.maximum!==null,r=n.getMetadata("statistics");if(bi(r)&&(typeof r.minimum=="number"&&(e.minimum=r.minimum),typeof r.maximum=="number"&&(e.maximum=r.maximum),t(e)))return e;let i=n.getMetadata("raster:histogram");if(bi(i)&&(typeof i.min=="number"&&(e.minimum=i.min),typeof i.max=="number"&&(e.maximum=i.max),t(e)))return e;let o=n.getMetadata("classification:classes");if(Array.isArray(o)&&(o.reduce((l,c)=>(l.minimum=Math.min(l.minimum,c.value),l.maximum=Math.max(l.maximum,c.value),l),e),t(e)))return e;let s=n.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((l,c)=>(l.minimum=Math.min(l.minimum,...c.values),l.maximum=Math.max(l.maximum,...c.values),l),e),t(e)))return e;let a=n.getMetadata("data_type");return a&&(e.minimum=Oxe(a),e.maximum=Fxe(a)),e}function iD(n){let e=[],t=n.getMetadata("nodata");if(typeof t<"u")e.push(t);else{let r=n.getMetadata("file:nodata");if(typeof r<"u")e=r;else{let i=n.getMetadata("classification:classes");Array.isArray(i)&&(e=i.filter(o=>!!o.nodata).map(o=>o.value))}}return e.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}function E_(n){let e=n.length>=6,t=n[0],r=n[e?3:2],i=n[1],o=n[e?4:3],s={west:t,east:r,south:i,north:o};return e&&(s.base=n[2],s.height=n[5]),s}function vF(n){let{west:e,east:t,south:r,north:i}=E_(n);return[[[e,i],[e,r],[t,r],[t,i],[e,i]]]}function VK(n){if(n=Eu(n,!0),!n)return null;let e=E_(n),t=[];if(qK(n)){let r=(e.west+360+e.east)/2;r>180&&(r-=360),t.push(r)}else t.push((e.west+e.east)/2);return t.push((e.south+e.north)/2),typeof e.base<"u"&&t.push((e.base+e.height)/2),t}function HK(n){if(Array.isArray(n[0]))return n.map(HK);let[e,t]=n;return[Qg(e,-180,180),Qg(t,-90,90)]}function fw(n){return bi(n)&&(n.bbox&&(n.bbox=Eu(n.bbox)),n.type==="FeatureCollection"?n.features.forEach(e=>fw(e)):n.type==="Feature"?n.geometry=fw(n.geometry):n.type==="GeometryCollection"?n.geometries.forEach(e=>fw(e)):n.coordinates&&(n.coordinates=HK(n.coordinates))),n}function oD(n){if(n.every(r=>typeof r=="number")&&(n=[n]),n=n.map(r=>Eu(r)).filter(r=>r!==null),!Array.isArray(n)||n.length===0)return null;let e=n.reduce((r,i)=>{if(qK(i)){let{west:o,east:s,south:a,north:l}=E_(i);r.push(vF([-180,a,s,l])),r.push(vF([o,a,180,l]))}else r.push(vF(i));return r},[]),t=null;if(e.length===1?t={type:"Polygon",coordinates:e[0]}:e.length>1&&(t={type:"MultiPolygon",coordinates:e}),t)return{type:"Feature",geometry:t,properties:{}}}function Eu(n,e=!1){if(!Array.isArray(n)||![4,6].includes(n.length))return null;let{west:t,east:r,south:i,north:o,base:s,height:a}=E_(n);return t=Qg(t,-180,180),i=Qg(i,-90,90),r=Qg(r,-180,180),o=Qg(o,-90,90),e&&n.length===6?n=[t,i,s,r,o,a]:n=[t,i,r,o],n.some(l=>l===null)?null:n}function qK(n){if(n=Eu(n),!n)return!1;let{west:e,east:t}=E_(n);return e>t}function b_(n){if(!Array.isArray(n)||n.length===0)return null;let e={west:null,south:null,east:null,north:null},t=["west","south"];for(let i of n){if(i=Eu(i),!i)continue;let o=E_(i);for(let s in o)if(e[s]===null)e[s]=o[s];else{let a=t.includes(s)?Math.min:Math.max;e[s]=a(e[s],o[s])}}let r=[e.west,e.south,e.east,e.north];return Eu(r)}var xF=class n{constructor(e,t={},r=[]){if(!bi(e))throw new Error("Given data is not an object");if(e instanceof n){for(let i of r)this[i]=e[i];e=e.toJSON()}this._keyMap=t,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in e)typeof this[i]>"u"&&(i in t?this[i]=t[i](e[i],this):this[i]=e[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}isBand(){return!1}getObjectType(){}getAbsoluteUrl(e=!0){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return VK(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(t=>{if(typeof this[t]=="function"||this._privateKeys.includes(t))return;let r=this[t];if(t in this._keyMap){let i=Array.isArray(r)?[]:{};for(let o in r)typeof r[o].toJSON=="function"?i[o]=r[o].toJSON():i[o]=r[o];r=i}e[t]=r}),e}},em=xF;var wF=$l(uD(),1),EF=["http","https"];function JK(n,e,t=!0){return Bxe(n,e,!1,t)}function Bxe(n,e=null,t=!1,r=!0){let i=(0,wF.default)(n);if(e&&i.is("relative")){let o=(0,wF.default)(e),s=o.path();!s.endsWith("/")&&!s.endsWith(".json")&&o.path(s+"/"),i=i.absoluteTo(o)}return i.normalize(),t&&(i.query(""),i.fragment("")),r?i.toString():i}var cD="application/geo+json",jxe=["application/json",cD,"text/json"],hD=["image/gif","image/jpeg","image/apng","image/png","image/webp"],bF=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],dw=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(bF),Gwt=hD.concat(dw);function pw(n,e,t=!1){return Array.isArray(e)||(e=[e]),t&&typeof n>"u"?!0:typeof n!="string"?!1:(e=e.map(r=>r.toLowerCase()),e.includes(n.toLowerCase()))}function QK(n,e=!1){return pw(n,jxe,e)}var SF=$l(uD(),1),CF=class extends em{constructor(e,t=null,r={},i=[]){super(e,r,["_context"].concat(i)),this._context||(this._context=t)}getAbsoluteUrl(e=!0){return this._context?JK(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?e?this.href:(0,SF.default)(this.href):null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let t=this.getAbsoluteUrl(!1);t||(t=(0,SF.default)(this.href));let r=t.protocol().toLowerCase(),i=t.suffix().toLowerCase();return no(r)&&!EF.includes(r)?!1:no(this.type)&&hD.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&no(i)&&(i==="jpg"||hD.includes("image/"+i)))}isType(e){return no(this.type)&&pw(this.type,e)}isGeoTIFF(){return this.isType(dw)}isCOG(){return this.isType(bF)}isHTTP(){let e=this.getAbsoluteUrl(!1);if(!e)return null;let t=e.protocol().toLowerCase();return no(t)&&EF.includes(t)}isPreview(){return!1}},gw=CF;var IF=class n extends gw{constructor(e,t=null){super(e,t)}isLink(){return!0}getObjectType(){return"Link"}isPreview(){return this.rel==="preview"}static fromLinks(e,t=null){return Array.isArray(e)?e.map(r=>bi(r)?new n(r,t):r):[]}},TF=IF;var eJ=$l(uD(),1),DF=class extends em{constructor(e,t=null,r={},i=[]){if(super(e,Object.assign({links:TF.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=t,!this._url)){let o=this.getSelfLink();o&&(this._url=o.href)}}getAbsoluteUrl(e=!0){return e?this._url:(0,eJ.default)(this._url)}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,t=!0){return this.getLinksWithRels([e]).filter(r=>QK(r.type,t))}getStacLinkWithRel(e,t=!0){let r=this.getStacLinksWithRel(e,t);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>bi(e)&&no(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(t=>t.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(t=>e.includes(t.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(t=>!e.includes(t.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}},mw=DF;var AF=class extends mw{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getAll(){return[]}},tm=AF;var RF=class n extends em{constructor(e,t=null,r=null){super(e,{},["_index","_context"]),typeof this._index!="number"&&(this._index=typeof t=="string"?parseInt(t,10):t),this._context||(this._context=r)}getContext(){return this._context}getObjectType(){return"Band"}isBand(){return!0}getIndex(){return this._index}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getMinMaxValues(){return rD(this)}getNoDataValues(){return iD(this)}static fromBands(e,t=null){let r=[];if(Array.isArray(e))for(let i in e){let o=e[i],s=o instanceof n?o:new n(o,i,t);r.push(s)}return r}},I_=RF;var Uxe=["created","updated","published","expires","unpublished","bands"],MF=class n extends gw{constructor(e,t=null,r=null){let i={bands:I_.fromBands,alternate:n.fromAssets};super(e,r,i,["_key"]),this._key||(this._key=t)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context instanceof n)return this._context.getMetadata(e);if(this._context&&!Uxe.includes(e))return this._context.getMetadata(e)}getBands(){return this.bands||[]}findVisualBands(){let e={red:null,green:null,blue:null},t=this.getBands();for(let i in t){let o=parseInt(i,10),s=t[o];bi(s)&&no(s["eo:common_name"])&&s["eo:common_name"]in e&&(e[s["eo:common_name"]]=s)}return Object.values(e).every(i=>i!==null)?e:null}findBand(e,t="name"){Array.isArray(e)||(e=[e]);let r=this.getBands(),i=r.findIndex(o=>bi(o)&&e.includes(o[t]));return i>=0?r[i]:null}getBand(e){return bi(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(){return rD(this)}getNoDataValues(){return iD(this)}isDefinition(){return!no(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}isPreview(){let e=["thumbnail","overview"];return e.includes(this.getKey())?!0:Array.isArray(this.roles)&&this.roles.some(t=>e.includes(t))}hasRole(e,t=!1){return Array.isArray(e)||(e=[e]),t&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>e.includes(r))}static fromAssets(e,t=null){let r={};if(bi(e))for(let i in e){let o=e[i],s=o instanceof n?o:new n(o,i,t);r[i]=s}return r}},pc=MF;function NF(n){if(!n)return;let e=String(n),t=e.indexOf("@"),r=t!==-1?e.substr(t+1):void 0,i=t!==-1?e.substr(0,t):e,o=String(i).replace(/-/g,"_").split("_");if(!o.length||o.length>4)return;let s=o.shift();if(!s)return;let a={keyword:r,language:s.toLowerCase()};if(!o.length)return a;if(o.length===3){let f=o.pop();f&&(a.variant=f.toUpperCase())}let l=o.pop();if(l.length>3&&(a.keyword=l,l=o.pop()),l&&(a.country=l.toUpperCase()),!o.length)return a;let c=o.pop();return typeof c=="string"&&c.length>=1&&(a.script=c[0].toUpperCase()+c.substring(1).toLowerCase()),a}function Gxe(n){let e={};return n.forEach(t=>{let{language:r,country:i}=NF(t);if(!r)throw new Error(`Locale ${t} is not parsable`);e[r]||(e[r]={countries:{},firstCountry:void 0,main:void 0});let o=e[r];i?(o.countries[i]=t,o.firstCountry||(o.firstCountry=t)):o.main=t}),e}function fD(n,e,t,r){let i=Array.isArray(n)?Gxe(n):n;if(!e&&t)return fD(n,t,void 0,r);if(!e)return;let{language:o,country:s}=NF(e);if(!o)return t;if(!i[o])return e===t?void 0:fD(n,t,null,r);let{countries:a,main:l=t,firstCountry:c}=i[o];return!a||!s?r&&c?c:l:r&&c?a[s]?a[s]:c:a[s]?a[s]:l}var PF=class n extends mw{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getLocaleLink(e,t=null){let r=this.getStacLinksWithRel("alternate").filter(s=>no(s.hreflang)),i;Array.isArray(this.languages)?i=this.languages.map(s=>s.code):i=r.map(s=>s.hreflang);let o=fD(i,e,t);return r.find(s=>s.hreflang===o)||null}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(t=>t.canBrowserDisplayImage(e))}getThumbnails(e=!0,t=null){let r=this.getAssets().filter(i=>i.isPreview());if(r.length===0&&(r=this.getLinks().filter(i=>i.isPreview())),r.length===0){let i=this.getAsset("thumbnail");i&&r.push(i)}if(e&&(r=r.filter(i=>i.canBrowserDisplayImage())),t&&r.length>1){let i=o=>Array.isArray(o.roles)&&o.roles.includes(t)||o.getKey()===t;r=r.filter(i).concat(r.filter(o=>!i(o)))}return r}getDefaultGeoTIFF(e=!0,t=!1){return this.rankGeoTIFFs(e,t)[0]?.asset}rankGeoTIFFs(e=!0,t=!1,r=null,i=null){bi(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let o=[],s=this.getAssetsByTypes(dw);e&&(s=s.filter(l=>l.isHTTP()&&(!t||l.isCOG())));let a=Object.entries(r);for(let l of s){let c=0;if(a.length>0){let f=a.filter(([d])=>l.hasRole(d,!0)).map(([,d])=>d);f.length>0&&(c+=Math.max(...f))}!t&&l.isCOG()&&(c+=2),l.findVisualBands()&&(c+=1),typeof i=="function"&&(c+=i(l)),o.push({asset:l,score:c})}return o.sort((l,c)=>c.score-l.score),o}findVisualAssets(){let e={red:null,green:null,blue:null},t=Object.keys(e),r=this.getAssets();for(let o of r){let s=o.findBand(t,"eo:common_name");s&&(e[s["eo:common_name"]]=o)}return Object.values(e).every(o=>o!==null)?e:null}getAsset(e){return bi(this.assets)&&this.assets[e]||null}getAssets(){return bi(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,t=!1){return this.getAssets().filter(r=>r.hasRole(e,t))}getAssetWithRole(e,t=!1){return this.getAssetsWithRoles([e],t)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(t=>pw(t.type,e))}equals(e){return this===e?!0:!(e instanceof n)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}supportsExtension(e){if(!Array.isArray(this.stac_extensions))return!1;let t=new RegExp("^"+e.replaceAll("*","[^/]+")+"$");return this.stac_extensions.some(r=>t.test(r))}},bu=PF;var LF=class extends bu{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getObjectType(){return this.type}getSearchLink(e=null){let t=this.getStacLinksWithRel("search");return e?t[0]||null:t.find(r=>r.method===e||!e&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}},yw=LF;var kF=class extends yw{constructor(e,t=null){super(e,t)}},tJ=kF;function nm(n){if(no(n)&&n.length>=10)try{let t=n.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function nJ(n,e){return new Date(n.valueOf()+(e-n)/2)}function dD(n){if(!Array.isArray(n)||n.length===0)return null;let e,t,r=(i,o,s)=>typeof i>"u"?o:i===null||o===null?null:s(i,o);return n.forEach(([i,o])=>{e=r(e,i,Math.min),t=r(t,o,Math.max)}),[e===null?null:new Date(e),t===null?null:new Date(t)]}var OF=class extends yw{constructor(e,t=null){let r={assets:pc.fromAssets,item_assets:pc.fromAssets};super(e,t,r)}toGeoJSON(){let e=oD(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0?Eu(e[0]):null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1?[Eu(e[0])]:e.length>1?e.slice(1).map(Eu):null}getRawBoundingBoxes(){let e=this.extent?.spatial?.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=this.extent?.temporal?.interval;return Array.isArray(e)&&e.length>0?e.filter(t=>Array.isArray(t)&&(no(t[0])||no(t[1]))).map(t=>t.map(r=>nm(r))):[]}getSummary(e){if(bi(this.summaries))return this.summaries[e]}getBands(){let e=this.getMetadata("bands");return Array.isArray(e)||(e=this.getSummary("bands")),Array.isArray(e)?I_.fromBands(e,this):[]}},_w=OF;var FF=class extends tm{constructor(e,t=null){let r={collections:i=>i.map(o=>o instanceof _w?o:new _w(o))};super(e,t,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return b_(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return dD(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}},pD=FF;var BF=class extends bu{constructor(e,t=null){super(e,t,{assets:pc.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Eu(this.bbox)}getBoundingBoxes(){let e=this.getBoundingBox();return e?[e]:[]}getDateTime(){let e=nm(this.properties.datetime);if(!e){let t=nm(this.properties.start_datetime),r=nm(this.properties.end_datetime);return t&&r?nJ(t,r):t||r}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return no(this.properties.start_datetime)||no(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:no(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(t=>t.map(r=>nm(r)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("bands");return Array.isArray(e)?I_.fromBands(e,this):[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}},rm=BF;var jF=class extends tm{constructor(e,t=null){let r={features:i=>i.map(o=>o instanceof rm?o:new rm(o))};super(e,t,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return b_(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return dD(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}},gD=jF;function T_(n,e=!0,t=!1){return e&&(n=rJ.default.stac(n,t)),n.type==="Feature"?new rm(n):n.type==="FeatureCollection"?new gD(n):n.type==="Collection"||!n.type&&typeof n.extent<"u"&&typeof n.license<"u"?new _w(n):!n.type&&Array.isArray(n.collections)?new pD(n):new tJ(n)}var UF=class extends jr{constructor(e){super(gt.ERROR),this.error=e}},iJ=UF;var oJ="https://stac-extensions.github.io/label/v1.*/schema.json",sJ=new Er({color:"rgba(0,0,0,0)"});function aJ(n,e,t="rgba(255,255,255,0.4)",r=5){let i=sJ;t&&(i=new Er({color:t}));let o=new ci({color:n,width:e});return new Xr({image:new Ts({fill:i,stroke:o,radius:r}),fill:i,stroke:o})}var lJ=aJ("#3399CC",3),GF=aJ("#ff9933",2,null);function uJ(n,e){let t={url:n.getAbsoluteUrl()},r=n,i=n.getBands();i.length===1&&(r=i[0],i=[]);let{minimum:o,maximum:s}=r.getMinMaxValues();if(typeof o=="number"&&(t.min=o),typeof s=="number"&&(t.max=s),typeof t.min!="number"&&typeof t.max!="number"&&i.length>1)for(let l of i){let{minimum:c,maximum:f}=l.getMinMaxValues();typeof c=="number"&&(typeof t.min>"u"||c<t.min)&&(t.min=c),typeof f=="number"&&(typeof t.max>"u"||f>t.max)&&(t.max=f)}let a=r.getNoDataValues();if(a.length>0)t.nodata=a[0];else if(i.length>1){let l;for(let c of i){let f=c.getNoDataValues();if(f.length>0){if(typeof l>"u")l=f[0];else if(l!==f[0]){l=void 0;break}}}typeof l<"u"&&(t.nodata=l)}if(e.length>0)t.bands=e;else{let l=n.findVisualBands();l&&(t.bands=[l.red.getIndex()+1,l.green.getIndex()+1,l.blue.getIndex()+1])}return t}function zF(n){return We(this,null,function*(){try{let{fromProjectionCode:e,fromEPSGCode:t}=yield import("./chunk-WP7GZR65.js");return typeof e=="function"?yield e(n):yield t(n)}catch{return null}})}function VF(n,e=void 0){return We(this,null,function*(){let t;if(F8()){let r=n.getMetadata("proj:code");r&&(t=yield zF(r))}return t||e})}function HF(n,e){let t=n.clone();return e.hasOnlyBounds()||t.setFill(sJ),t}function cJ(n){let e=n.href;if(e.includes("{s}"))if(Array.isArray(n["href:servers"])&&n["href:servers"].length>0){let t=Math.random()*n["href:servers"].length|0;e=e.replace("{s}",n["href:servers"][t])}else return null;return e}function qF(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function zxe(n){return((n.fileDirectory.NewSubfileType||0)&4)===4}function Vxe(n,e){if(!n)return!1;if(n===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;let t=e.fileDirectory.PhotometricInterpretation,r=UD.photometricInterpretations;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}var hJ="STATISTICS_MAXIMUM",fJ="STATISTICS_MINIMUM",WF=256,$F;function Hxe(){return $F||($F=new bO),$F}function qxe(n){try{return n.getBoundingBox(!0)}catch{return[0,0,n.getWidth(),n.getHeight()]}}function Wxe(n){try{return n.getOrigin().slice(0,2)}catch{return[0,n.getHeight()]}}function $xe(n,e){try{return n.getResolution(e)}catch{return[e.getWidth()/n.getWidth(),e.getHeight()/n.getHeight()]}}function dJ(n,e,t,r){return We(this,null,function*(){let i=n[e];if(i&&i!==32767){let o="EPSG:"+i,s=sn(o);if(!s&&r&&(s=yield zF(o)),!s){let a=P8(n[t]);a&&(s=new Vw({code:o,units:a}))}return s||null}})}function Yxe(n,e){return We(this,null,function*(){let t=n.geoKeys;if(!t)return null;let r=yield dJ(t,"ProjectedCSTypeGeoKey","ProjLinearUnitsGeoKey",e);return r||(yield dJ(t,"GeographicTypeGeoKey","GeogAngularUnitsGeoKey",e))})}function Xxe(n){return n.getImageCount().then(function(e){let t=new Array(e);for(let r=0;r<e;++r)t[r]=n.getImage(r);return Promise.all(t)})}function Zxe(n,e){let t;return n.blob?t=x$(n.blob):n.overviews?t=w$(n.url,n.overviews,e):t=v$(n.url,e),t.then(Xxe)}function vw(n,e,t,r,i){if(Array.isArray(n)){let o=n.length;if(!Array.isArray(e)||o!=e.length){let s=new Error(r);throw i(s),s}for(let s=0;s<o;++s)vw(n[s],e[s],t,r,i);return}if(e=e,Math.abs(n-e)>t*n)throw new Error(r)}function Kxe(n){return n instanceof Int8Array?-128:n instanceof Int16Array?-32768:n instanceof Int32Array?-2147483648:n instanceof Float32Array?12e-39:0}function Jxe(n){return n instanceof Int8Array?127:n instanceof Uint8Array||n instanceof Uint8ClampedArray?255:n instanceof Int16Array?32767:n instanceof Uint16Array?65535:n instanceof Int32Array?2147483647:n instanceof Uint32Array?4294967295:n instanceof Float32Array?34e37:255}var mD=class extends OC{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;let t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.loadMissingProjection_=e.loadMissingProjection||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));let r=this,i=new Array(t);for(let o=0;o<t;++o)i[o]=Zxe(this.sourceInfo_[o],this.sourceOptions_);Promise.all(i).then(function(o){return r.configure_(o)}).catch(function(o){FD(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(e){return We(this,null,function*(){let t=e[0];for(let r=t.length-1;r>=0;--r){let i=t[r],o=yield Yxe(i,this.loadMissingProjection_);if(o){this.projection=o;break}}})}determineTransformMatrix(e){let t=e[0];for(let r=t.length-1;r>=0;--r){let o=t[r].fileDirectory.ModelTransformation;if(o){let[s,a,l,c,f,d,y,p]=o,_=vd(vd([1/Math.sqrt(s*s+f*f),0,0,-1/Math.sqrt(a*a+d*d),c,p],[s,f,a,d,0,0]),[1,0,0,1,-c,-p]);this.transformMatrix=_,this.addAlpha_=!0;break}}}configure_(e){return We(this,null,function*(){let t,r,i,o,s,a=new Array(e.length),l=new Array(e.length),c=new Array(e.length),f=0,d=e.length;for(let b=0;b<d;++b){let S=[],T=[];e[b].forEach($=>{zxe($)?T.push($):S.push($)});let A=S.length;if(T.length>0&&T.length!==A)throw new Error(`Expected one mask per image found ${T.length} masks and ${A} images`);let N,k,W=new Array(A),X=new Array(A),Y=new Array(A);l[b]=new Array(A),c[b]=new Array(A);for(let $=0;$<A;++$){let V=S[$],B=V.getGDALNoData();c[b][$]=V.getGDALMetadata(0),l[b][$]=B;let v=this.sourceInfo_[b].bands;a[b]=v?v.length:V.getSamplesPerPixel();let I=A-($+1);N||(N=qxe(V)),k||(k=Wxe(V));let M=$xe(V,S[0]);Y[I]=M[0];let j=[V.getTileWidth(),V.getTileHeight()];j[0]!==j[1]&&j[1]<WF&&(j[0]=WF,j[1]=WF),W[I]=j;let Q=M[0]/Math.abs(M[1]);X[I]=[j[0],j[1]/Q]}if(t?kr(t,N,t):t=N,!r)r=k;else{let $=`Origin mismatch for source ${b}, got [${k}] but expected [${r}]`;vw(r,k,0,$,this.viewRejector)}if(!s)s=Y,this.resolutionFactors_[b]=1;else{s.length-f>Y.length&&(f=s.length-Y.length);let $=s[s.length-1]/Y[Y.length-1];this.resolutionFactors_[b]=$;let V=Y.map(v=>v*=$),B=`Resolution mismatch for source ${b}, got [${V}] but expected [${s}]`;vw(s.slice(f,s.length),V,.02,B,this.viewRejector)}i?vw(i.slice(f,i.length),X,.01,`Tile size mismatch for source ${b}`,this.viewRejector):i=X,o?vw(o.slice(f,o.length),W,0,`Tile size mismatch for source ${b}`,this.viewRejector):o=W,this.sourceImagery_[b]=S.reverse(),this.sourceMasks_[b]=T.reverse()}for(let b=0,S=this.sourceImagery_.length;b<S;++b){let T=this.sourceImagery_[b];for(;T.length<s.length;)T.unshift(void 0)}this.getProjection()||(yield this.determineProjection(e)),this.determineTransformMatrix(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;e:for(let b=0;b<d;++b){if(this.sourceInfo_[b].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}let S=l[b],T=this.sourceInfo_[b].bands;if(T){for(let A=0;A<T.length;++A)if(S[T[A]-1]!==null){this.addAlpha_=!0;break e}continue}for(let A=0;A<S.length;++A)if(S[A]!==null){this.addAlpha_=!0;break e}}let y=this.addAlpha_?1:0;for(let b=0;b<d;++b)y+=a[b];this.bandCount=y;let p=new df({extent:t,minZoom:f,origin:r,resolutions:s,tileSizes:i});this.tileGrid=p,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");let _=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let x=t;if(this.transformMatrix){let b=z0(Yr(),this.transformMatrix.slice()),S=qw(T=>Ar(b,T));x=Uw(t,S)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:Xl(zo(x),this.projection),extent:Zl(x,this.projection),zoom:_})})}loadTile_(e,t,r,i){let o=this.getTileSize(e),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,c=this.sourceInfo_,f=Hxe();for(let d=0;d<s;++d){let y=c[d],p=this.resolutionFactors_[d],_=[Math.round(t*(o[0]*p)),Math.round(r*(o[1]*p)),Math.round((t+1)*(o[0]*p)),Math.round((r+1)*(o[1]*p))],x=this.sourceImagery_[d][e],b;y.bands&&(b=y.bands.map(function(k){return k-1}));let S;"nodata"in y&&y.nodata!==null?S=y.nodata:b?S=b.map(function(k){return l[d][k]}):S=l[d];let T={window:_,width:o[0],height:o[1],samples:b,fillValue:S,pool:f,interleave:!1,signal:i.signal};Vxe(this.convertToRGB_,x)?a[d]=x.readRGB(T):a[d]=x.readRasters(T);let A=s+d,N=this.sourceMasks_[d][e];if(!N){a[A]=Promise.resolve(null);continue}a[A]=N.readRasters({window:_,width:o[0],height:o[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,o)).catch(function(d){throw FD(d),d})}composeTile_(e,t){let r=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,s=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,c=this.normalize_,f=this.addAlpha_,d=e[0]*e[1],y=d*s,p;c?p=new Uint8Array(y):p=new Float32Array(y);let _=0;for(let x=0;x<d;++x){let b=f;for(let S=0;S<o;++S){let T=i[S],A=T.min,N=T.max,k,W;if(c){let X=r[S][0];A===void 0&&(X&&fJ in X?A=parseFloat(X[fJ]):A=Kxe(t[S][0])),N===void 0&&(X&&hJ in X?N=parseFloat(X[hJ]):N=Jxe(t[S][0])),k=255/(N-A),W=-A*k}for(let X=0;X<a[S];++X){let Y=t[S][X][x],$;if(c?$=Xn(k*Y+W,0,255):$=Y,!f)p[_]=$;else{let V=T.nodata;if(V===void 0){let v;T.bands?v=T.bands[X]-1:v=X,V=l[S][v]}let B=isNaN(V);(!B&&Y!==V||B&&!isNaN(Y))&&(b=!1,p[_]=$)}_++}if(!b){let X=o+S,Y=t[X];Y&&!Y[0][x]&&(b=!0)}}f&&(b||(p[_]=255),_++)}return p}};mD.prototype.getView;var pJ=mD;var Qo=class{constructor(e){this.name=e}toString(){return this.name}};Qo.GeoTIFF=new Qo("GeoTIFF");Qo.ImageStatic=new Qo("ImageStatic");Qo.PMTilesRaster=new Qo("PMTilesRaster");Qo.PMTilesVector=new Qo("PMTilesVector");Qo.TileJSON=new Qo("TileJSON");Qo.TileWMS=new Qo("TileWMS");Qo.WMTS=new Qo("WMTS");Qo.XYZ=new Qo("XYZ");var oh=Qo;var YF=class n extends yg{constructor(e){let t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.children_=null,this.childrenOptions_=e.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||lJ,this.collectionStyle_=e.collectionStyle||GF,this.boundsLayer_=null,this.disableMigration_=e.disableMigration||!1,this.map_=null,this.eventQueue_=[],e.httpRequestFn&&(this.fetch_=e.httpRequestFn),e.data){try{this.configure_(e.data,e.url,e.children,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");this.fetch_(e.url).then(r=>this.configure_(r,e.url,e.children,e.assets,e.bands)).catch(r=>this.handleError_(r))}fetch_(e,t="json"){return We(this,null,function*(){let r=yield fetch(e);if(!r.ok)throw new Error(`Unexpected response from ${e}: ${r.status}`);return t==="json"?yield r.json():t==="text"?yield r.text():null})}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var e;if(this.getLayers().getLength()>1)return!1;let r=(e=this.getData())===null||e===void 0?void 0:e.getBoundingBox();return!r||ms(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(e){this.dispatch_(new iJ(e))}configure_(e,t=null,r=null,i=null,o=[]){let s;e instanceof pc||e instanceof bu?s=e:(s=T_(e,!this.disableMigration_),t&&t.includes("://")&&s.setAbsoluteUrl(t)),this.set("stac",s),this.bands_=o,this.boundsLayer_=this.addFootprint_();let a=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(HF(this.boundsStyle_,this))};this.getLayers().on("add",a),this.getLayers().on("remove",a);let l=f=>this.handleError_(f),c=[];r&&c.push(this.setChildren(r,null,!1).catch(l)),i&&c.push(this.setAssets(i,!1).catch(l)),Promise.all(c).then(()=>this.updateLayers().catch(l)),this.dispatch_("sourceready")}dispatch_(e){this.eventQueue_.push(e),this.flush_()}flush_(){if(this.map_){for(let e of this.eventQueue_)this.dispatchEvent(e);this.eventQueue_=[]}}setMap_(e){this.map_!==e&&(this.map_=e,this.flush_())}addChildren_(r){return We(this,arguments,function*(e,t={}){let i=e.map(o=>{let s={data:o,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},a=new n(Object.assign(s,t));return a.on("sourceready",()=>{a.map_&&this.setMap_(a.map_)}),this.addLayer_(a,null),a});return yield Promise.all(i)})}addPreviewImage_(e){return We(this,null,function*(){let t=yield VF(e,"EPSG:4326"),r=e.getContext().getBoundingBoxes();if(r.length!==1)return;let i=r[0],o={url:e.getAbsoluteUrl(),projection:t,imageExtent:Yl(i,"EPSG:4326",t),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(o=yield this.getSourceOptions_(oh.ImageStatic,o,e));let s=new L$({source:new I$(o)});return this.addLayer_(s,e),s})}addLayerForLink(e){return We(this,null,function*(){let t=cJ(e);if(!t)return;let r={attributions:e.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},i=(s,a)=>We(this,null,function*(){return this.getSourceOptions_&&(a=yield this.getSourceOptions_(s,a,e)),a}),o=[];switch(e.rel){case"pmtiles":let a=yield new Zg(r.url).getHeader(),l;switch(a.tileType){case Kg.Mvt:l=new OK(yield i(oh.PMTilesVector,r));break;case Kg.Avif:case Kg.Jpeg:case Kg.Png:case Kg.Webp:l=new hF(yield i(oh.PMTilesRaster,r));break;default:return}o.push(l);break;case"tilejson":o.push(new O$(yield i(oh.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(let d in e["wms:layers"]){let y=e["wms:layers"][d]||"",p="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][d]=="string"&&(p=e["wms:styles"][d]);let _=Object.assign({LAYERS:y,STYLES:p},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(_.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(_.FORMAT=e.type);let x=yield i(oh.TileWMS,Object.assign({},r,{params:_}));o.push(new F$(x))}break;case"wmts":let c=yield this.getWmtsCapabilities_(t,e["wmts:encoding"]);if(!c)return;let f=[];Array.isArray(e["wmts:layer"])?f=e["wmts:layer"]:typeof e["wmts:layer"]=="string"&&(f=[e["wmts:layer"]]);for(let d of f){let y=Object.assign({},r,{layer:d,requestEncoding:e["wmts:encoding"]==="rest"?"REST":"KVP"});typeof e.type=="string"&&e.type.startsWith("image/")&&(y.format=e.type),y=yield i(oh.WMTS,y);let p=j$(c,y);if(p!==null){if(typeof e.uriTemplate=="string"){let _=e.uriTemplate,x=bi(e.variables)?e.variables:{};for(let b in x){let S=x[b],T;if(qF(S.const)?T=S.const:qF(S.default)?T=S.default:Array.isArray(S.enum)&&S.enum.length>0&&(T=S.enum[0]),typeof T<"u")_=_.replaceAll(`{${b}}`,String(T));else continue}delete p.urls,p.url=_}o.push(new B$(p))}}break;case"xyz":o.push(new Hc(yield i(oh.XYZ,r)));break;default:return}return o.map(s=>{let a;return s instanceof sI?a=new $Z({source:s,declutter:!0}):s instanceof hF?a=new oF({source:s}):a=new Ig({source:s}),this.addLayer_(a,e),a})})}addGeoTiff_(e){return We(this,null,function*(){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return yield this.addTileLayerForImagery_(e);let r={sources:[uJ(e,this.bands_)],convertToRGB:"auto",loadMissingProjection:!0},i=yield VF(e);i&&(r.projection=i),this.getSourceOptions_&&(r=yield this.getSourceOptions_(oh.GeoTIFF,r,e));let o=new pJ(r),s=new Promise((a,l)=>{o.on("error",l),o.on("change",()=>{o.getState()==="error"?l(o.getError()):a()})});try{yield s;let a=new oF({source:o});return this.addLayer_(a,e),a}catch(a){if(this.useTileLayerAsFallback_)return yield this.addTileLayerForImagery_(e);this.handleError_(a)}})}addTileLayerForImagery_(e){return We(this,null,function*(){let t=this.buildTileUrlTemplate_(e);t instanceof Promise&&(t=yield t);let r={crossOrigin:this.crossOrigin_,url:t};this.getSourceOptions_&&(r=yield this.getSourceOptions_(oh.XYZ,r,e));let i=new Ig({source:new Hc(r)});return this.addLayer_(i,e),i})}addLayer_(e,t=null,r=0){t&&e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null,t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=oD(t.getBoundingBox()):e=t.toGeoJSON(),e){let r=this.createGeoJsonLayer_(e,HF(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,t,1),r}return null}addGeoJson_(e){return We(this,null,function*(){try{let t=yield this.fetch_(e.getAbsoluteUrl()),r=this.createGeoJsonLayer_(t);return this.addLayer_(r,e),r}catch(t){this.handleError_(t)}})}createGeoJsonLayer_(e,t=null,r=!0){let i=new fo,o=new ba({format:i,loader:(s,a,l)=>{e=fw(e);let c=i.readFeatures(e,{featureProjection:l});o.addFeatures(c)}});return t||(t=GF),new Tl({source:o,style:t,visible:r})}addLabelExtension_(){return We(this,null,function*(){let e=this.getData();if(!(e instanceof rm))return;let t=e.getAssetsWithRoles(["labels","labels-vector"],!0),r;t.length>1&&(r=t.find(o=>o.roles.includes("labels-vector"))),r||(r=e.getAsset("vector_labels")),r||(t=e.getAssets().filter(o=>o.type===cD&&!o.roles),t.length===1&&(r=t[0]));let i=e.getLinksWithRels(["source"]);if(r&&i.length>0){let o=i.map(a=>We(this,null,function*(){try{let l=yield this.fetch_(a.getAbsoluteUrl());return T_(l)}catch(l){return this.handleError_(l),null}})),s=(yield Promise.all(o)).filter(a=>a instanceof bu);yield this.addChildren_(s,{displayFootprint:!1})}try{yield this.addGeoJson_(r)}catch(o){this.handleError_(o)}})}updateLayers(e=!0){return We(this,null,function*(){let t=this.getLayers();for(let o=t.getLength()-1;o>=0;o--){let s=t.item(o);s.get("stac")&&!s.get("bounds")&&t.removeAt(o)}let r=this.getData();if(Array.isArray(this.displayWebMapLink_)){let o=this.getWebMapLinks().map(s=>We(this,null,function*(){return yield this.addLayerForLink(s)}));yield Promise.all(o)}this.children_&&(yield this.addChildren_(this.children_,this.childrenOptions_));let i=this.getAssets();if(i){let o=i.map(s=>We(this,null,function*(){if(s){if(s.type===cD)return yield this.addGeoJson_(s);if(s.isGeoTIFF())return yield this.addGeoTiff_(s);if(s.canBrowserDisplayImage())return yield this.addPreviewImage_(s)}}));yield Promise.all(o)}if(this.hasOnlyBounds()){if(r instanceof tm)yield this.addChildren_(r.getAll(),this.childrenOptions_);else if(r instanceof bu){if(r.isItem()&&r.supportsExtension(oJ)&&r.getMetadata("label:type")==="vector"){yield this.addLabelExtension_(),e&&this.dispatch_("layersready");return}let o=this.getWebMapLinks();if(o.length>0)yield this.addLayerForLink(o[0]);else{let s=r.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_),a;if(s&&this.displayOverview_&&(a=yield this.addGeoTiff_(s)),this.displayPreview_&&(!s||!a)){let l=r.getThumbnails(!0,"overview");l.length>0&&(yield this.addPreviewImage_(l[0]))}}}}e&&this.dispatch_("layersready")})}hasOnlyBounds(){let e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){let e=this.getData();if(e instanceof pc)return[];let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let r=e.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){let o=r.find(s=>s.id===i);return o||null}return i}).filter(i=>!!i):r.sort((i,o)=>{let s=t.indexOf(i.rel),a=t.indexOf(o.rel);return s-a}),r}setAssets(e,t=!0){return We(this,null,function*(){if(e!==this.assets_){if(Array.isArray(e)){let r=this.getData();this.assets_=e.map(i=>r instanceof bu&&typeof i=="string"?r.getAsset(i):i instanceof pc?i:new pc(i))}else this.assets_=null;t&&(yield this.updateLayers())}})}setChildren(e,t=null,r=!0){return We(this,null,function*(){e instanceof gD?this.children_=e.getAll():e instanceof pD?this.children_=e.getAll():bi(e)&&e.type==="FeatureCollection"?this.children_=T_(e,!this.disableMigration_).getAll():Array.isArray(e)?this.children_=e.map(i=>i instanceof bu?i:T_(i,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.children_&&bi(t)&&(this.childrenOptions_=t),r&&(yield this.updateLayers())})}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;let e=this.map_.getView();if(!e)return;let t,r=this.getData();r&&(t=r.getBoundingBox());let i=this.getChildren();if(i){let o=i.map(s=>s.getBoundingBox());t=b_(o)}if(t)return Yl(t,"EPSG:4326",e.getProjection())}getLayerState(){let e=super.getLayerState();return e.extent=void 0,e}getAttributions(){let e=[],t=this.getData();if(t){let r=t.getMetadata("attribution");r&&r.push(r)}return e}getSource(){return null}getWmtsCapabilities_(e,t="kvp"){return We(this,null,function*(){try{let r=new URL(e);t!=="rest"&&(r.searchParams.set("service","wmts"),r.searchParams.set("request","GetCapabilities"));let i=yield this.fetch_(r.toString(),"text");return new gZ().read(i)}catch{return null}})}},gJ=YF;var Qxe=["mapContainer"],yD=class n{mapViewerService=Me(Ro);_geoDataService=Me($d);_drawService=Me(il);mapContainer;map;importedDataVectorSource;showExportMenu=!1;static BASEMAP_CRS="EPSG:3857";static FALLBACK_CRS="EPSG:4326";constructor(){Vh(()=>{let e=this._geoDataService.currentData();if(console.log("data signal:",e),!e||!this.importedDataVectorSource)return;let t=new fo,r=[];Array.isArray(e.geojson)?e.geojson.forEach(i=>{let o=t.readFeatures(i,{dataProjection:e.crs,featureProjection:n.BASEMAP_CRS});r.push(...o)}):r=t.readFeatures(e.geojson,{dataProjection:e.crs,featureProjection:n.BASEMAP_CRS}),this.importedDataVectorSource.clear(),this.importedDataVectorSource.addFeatures(r)}),Vh(()=>{let e=this.mapViewerService.selectedStacItem();if(!e||!this.map)return;console.log("STAC layer is loading:",e.id),this.map.getLayers().getArray().filter(r=>r.get("type")==="stac").forEach(r=>this.map.removeLayer(r));let t=new gJ({data:e,zIndex:1});t.setProperties({name:"STAC Data",type:"stac",id:"stac-"+e.id}),this.map.addLayer(t),t.on("addlayer",()=>{let r=t.getExtent();r&&this.map.getView().fit(r,{duration:1e3,padding:[40,40,40,40]}),this.mapViewerService.refreshLayers()})})}ngAfterViewInit(){this._initializeMap()}_initializeMap(){this.importedDataVectorSource=new ba,this.map=new ez({target:this.mapContainer.nativeElement,layers:[...this._createBasemaps(),this._createImportedVectorLayer(),this._createDrawingVectorLayer()],view:new Il({center:[0,0],zoom:2,projection:n.BASEMAP_CRS}),controls:S1({zoom:!1}).extend([new zT])}),this.mapViewerService.setMap(this.map)}_styleByGeometryType=e=>{let t=e.getGeometry()?.getType();return console.log("style called for:",t),this._styleCache[t??"Point"]};_styleCache={Point:new Xr({image:new Ts({radius:6,fill:new Er({color:"#d11313"})})}),LineString:new Xr({stroke:new ci({color:"#005eff",width:3})}),MultiLineString:new Xr({stroke:new ci({color:"#0752d4ff",width:3})}),Polygon:new Xr({fill:new Er({color:"rgba(0,255,153,0.4)"}),stroke:new ci({color:"#009966",width:2})})};_createImportedVectorLayer(){let e=new Tl({source:this.importedDataVectorSource,style:this._styleByGeometryType,zIndex:10});return e.setProperties({id:"imported",name:"Imported Data",type:"vector",removable:!1}),e}_createDrawingVectorLayer(){let e=new Tl({source:this._drawService.source,style:this._styleByGeometryType,zIndex:20});return e.setProperties({id:"drawing",name:"Drawing Data",type:"vector",removable:!1}),e}_createBasemaps(){let e=new Ig({source:new Nz,visible:!0});e.setProperties({id:"osm",name:"OpenStreetMap",type:"basemap",removable:!1,thumbnail:"assets/map-previews/osm.webp"});let t=new Ig({source:new k$({layer:"alidade_smooth_dark",retina:!0}),visible:!1});t.setProperties({id:"Stadia Maps Dark",name:"Stadia Maps Dark",type:"basemap",removable:!1,thumbnail:"assets/map-previews/dark.webp"});let r=new Ig({source:new Hc({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19}),visible:!1});return r.setProperties({id:"satellite",name:"Satellite Imagery",type:"basemap",removable:!1,thumbnail:"assets/map-previews/esri.webp"}),[e,t,r]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=lr({type:n,selectors:[["app-map-viewer"]],viewQuery:function(t,r){if(t&1&&F2(Qxe,7),t&2){let i;B2(i=j2())&&(r.mapContainer=i.first)}},decls:8,vars:0,consts:[["mapContainer",""],[1,"relative","w-full","h-screen","font-sans","overflow-hidden","bg-slate-900"],[1,"w-full","h-full","opacity-90",3,"contextmenu"],[1,"absolute","top-6","right-1","z-20","transition-all","duration-500"]],template:function(t,r){if(t&1){let i=ui();Ve(0,"div",1)(1,"div",2,0),Qt("contextmenu",function(s){return An(i),Rn(r.mapViewerService.handleRightClick(s))}),$e(),kt(3,"app-toolbar"),Ve(4,"div",3),kt(5,"app-layer-panel"),$e(),kt(6,"app-mouse-position")(7,"app-map-context-menu"),$e()}},dependencies:[ti,aI,lI,GT,WT],styles:[".ol-control.advanced-zoom{top:20px;left:20px;background:#ffffffe6!important;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);padding:4px;border-radius:8px;border:1px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #00000026;display:flex;flex-direction:column;gap:2px;transition:transform .2s ease;height:auto;width:auto}  .ol-control.advanced-zoom:hover{transform:translateY(-2px)}  .ol-control.advanced-zoom button{width:24px!important;height:24px!important;background-color:transparent!important;color:#2c3e50!important;border:none;border-radius:8px!important;font-size:22px;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;position:relative}  .ol-control.advanced-zoom button.ol-zoom-in:hover{background-color:#3498db33!important;color:#3498db!important}  .ol-control.advanced-zoom button.ol-zoom-out:hover{background-color:#e74c3c33!important;color:#e74c3c!important}  .ol-control.advanced-zoom button:active{transform:scale(.9)}  .zoom-level-indicator{height:28px;display:flex;align-items:center;justify-content:center;font-family:Inter,Segoe UI,sans-serif;font-size:13px;font-weight:700;color:#34495e;background:#0000000f;margin:4px 0;border-radius:6px;cursor:default;-webkit-user-select:none;user-select:none;pointer-events:none}"]})};function ewe(n,e){if(n&1&&(Ve(0,"option",16),yt(1),$e()),n&2){let t=e.$implicit;xn("value",t.username),Ct(),U2(" ",t.username," (",t.role,") ")}}function twe(n,e){if(n&1){let t=ui();x0(0),Ve(1,"div",2)(2,"h2",3)(3,"span",4),$n(),Ve(4,"svg",5),kt(5,"path",6),$e()(),gi(),Ve(6,"span",7),yt(7,"Secure Access"),$e()(),Ve(8,"form",8),Qt("submit",function(i){An(t);let o=nn();return Rn(o.onLogin(i))}),Ve(9,"div",9)(10,"label",10),yt(11,"Demo User"),$e(),Ve(12,"select",11),Qt("change",function(i){An(t);let o=nn();return Rn(o.username.set(i.target.value))}),Ve(13,"option",12),yt(14,"Select identity..."),$e(),Dr(15,ewe,2,3,"option",13),$e()(),Ve(16,"div",9)(17,"label",10),yt(18,"Password"),$e(),Ve(19,"input",14),Qt("input",function(i){An(t);let o=nn();return Rn(o.password.set(i.target.value))}),$e()(),Ve(20,"button",15),yt(21," Enter Portal "),$e()()(),w0()}if(n&2){let t=nn();Ct(12),xn("value",t.username()),Ct(3),xn("ngForOf",t.auth.demoUsers),Ct(4),xn("value",t.password()),Ct(),xn("disabled",!t.username())}}function nwe(n,e){if(n&1){let t=ui();Ve(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31),$n(),Ve(4,"svg",32),kt(5,"path",33),$e()(),gi(),Ve(6,"div")(7,"div",34),yt(8),$e(),Ve(9,"div",35),yt(10),$e()()()(),Ve(11,"div",36)(12,"div",37),yt(13),$e(),Ve(14,"button",38),Qt("click",function(){An(t);let i=nn(2);return Rn(i.onLogout())}),$n(),Ve(15,"svg",39),kt(16,"path",40),$e(),yt(17," Sign Out "),$e()()()}if(n&2){let t,r,i,o=nn(2);Ct(8),Mc((t=o.auth.user())==null?null:t.username),Ct(2),uo("System ",(r=o.auth.user())==null?null:r.role),Ct(3),uo(" ",(i=o.auth.user())==null?null:i.info," ")}}function rwe(n,e){if(n&1){let t=ui();Ve(0,"div",17)(1,"button",18),Qt("click",function(){An(t);let i=nn();return Rn(i.showInfo.set(!i.showInfo()))}),Ve(2,"div",19),$n(),Ve(3,"svg",20),kt(4,"path",21),$e()(),gi(),Ve(5,"div",22)(6,"span",23),yt(7),$e(),Ve(8,"span",24),yt(9),$e()(),$n(),Ve(10,"svg",25),kt(11,"path",26),$e()(),Dr(12,nwe,18,3,"div",27),$e()}if(n&2){let t,r,i=nn();Ct(7),Mc((t=i.auth.user())==null?null:t.username),Ct(2),Mc((r=i.auth.user())==null?null:r.role),Ct(),lu("rotate-180",i.showInfo()),Ct(2),xn("ngIf",i.showInfo())}}var _D=class n{constructor(e){this.auth=e}drawingService=Me(il);username=un("");password=un("");showInfo=un(!1);onLogin(e){e.preventDefault(),this.auth.login(this.username(),this.password())&&this.password.set("")}onLogout(){this.auth.logout(),this.drawingService.clearDrawings(),this.drawingService.clearStacDrawings(),this.showInfo.set(!1)}static \u0275fac=function(t){return new(t||n)(Ai(ap))};static \u0275cmp=lr({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[["userInfo",""],[4,"ngIf","ngIfElse"],[1,"fixed","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","w-full","max-w-xs","z-50","p-6","bg-white/40","backdrop-blur-2xl","rounded-3xl","shadow-[0_20px_50px_rgba(0,0,0,0.1)]","border","border-white/40","animate-fadein"],[1,"mb-6","text-xl","font-black","text-slate-800","text-center","flex","flex-col","items-center","gap-3"],[1,"w-12","h-12","bg-blue-500/20","rounded-2xl","backdrop-blur-md","flex","items-center","justify-center","border","border-blue-500/20"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M5.121 17.804A13.937 13.937 0 0112 15c2.5 0 4.847.657 6.879 1.804M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"tracking-tight","uppercase","text-sm","font-black","text-slate-500"],[1,"space-y-4",3,"submit"],[1,"space-y-1.5"],[1,"px-2","text-[10px]","font-bold","text-slate-500","uppercase","tracking-widest"],[1,"w-full","bg-white/60","backdrop-blur-md","border-white/20","p-2.5","border","rounded-xl","focus:ring-4","focus:ring-blue-500/10","focus:border-blue-500/50","transition-all","outline-none","text-sm","font-semibold","text-slate-700",3,"change","value"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","bg-white/60","backdrop-blur-md","border-white/20","p-2.5","border","rounded-xl","focus:ring-4","focus:ring-blue-500/10","focus:border-blue-500/50","transition-all","outline-none","text-sm",3,"input","value"],["type","submit",1,"w-full","bg-gradient-to-r","from-blue-600","to-indigo-600","hover:from-blue-700","hover:to-indigo-700","text-white","font-bold","p-3","rounded-xl","shadow-lg","shadow-blue-500/20","transform","active:scale-95","transition-all","disabled:opacity-40","disabled:grayscale",3,"disabled"],[3,"value"],[1,"fixed","top-4","right-4","z-[60]","flex","flex-col","items-end","group"],[1,"flex","items-center","gap-3","p-1","pr-4","bg-white/60","backdrop-blur-xl","border","border-white/40","text-slate-700","rounded-2xl","shadow-xl","transition-all","hover:bg-white/80","active:scale-95","ring-1","ring-black/5",3,"click"],[1,"w-10","h-10","bg-gradient-to-tr","from-emerald-500","to-teal-400","rounded-xl","flex","items-center","justify-center","shadow-inner"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"flex","flex-col","items-start","leading-none"],[1,"text-xs","font-black","uppercase","tracking-tighter","text-slate-800"],[1,"text-[9px]","font-bold","text-emerald-600"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","text-slate-400","transition-transform","duration-300"],["d","M19 9l-7 7-7-7","stroke-width","2.5"],["class",`absolute top-14 right-0 w-64 bg-white/70 backdrop-blur-2xl border border-white/40 
                   rounded-3xl shadow-[0_30px_60px_rgba(0,0,0,0.15)] overflow-hidden animate-in fade-in slide-in-from-top-4 duration-300`,4,"ngIf"],[1,"absolute","top-14","right-0","w-64","bg-white/70","backdrop-blur-2xl","border","border-white/40","rounded-3xl","shadow-[0_30px_60px_rgba(0,0,0,0.15)]","overflow-hidden","animate-in","fade-in","slide-in-from-top-4","duration-300"],[1,"p-4","border-b","border-white/20","bg-white/20"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","bg-emerald-500/20","text-emerald-600","rounded-2xl","flex","items-center","justify-center"],["fill","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["d","M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"],[1,"font-black","text-slate-800","leading-tight","uppercase","text-sm"],[1,"text-[10px]","text-emerald-600","font-bold","tracking-widest","uppercase"],[1,"p-4","space-y-4"],[1,"p-3","bg-white/30","rounded-xl","border","border-white/20","text-[11px]","text-slate-600","italic"],[1,"w-full","group/logout","px-3","py-2.5","bg-red-500/10","hover:bg-red-500","transition-all","text-red-600","hover:text-white","rounded-xl","flex","items-center","justify-center","gap-2","text-xs","font-bold","uppercase","tracking-widest",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4","transition-transform","group-hover/logout:translate-x-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M17 16l4-4m0 0l-4-4m4 4H7"]],template:function(t,r){if(t&1&&Dr(0,twe,22,4,"ng-container",1)(1,rwe,13,5,"ng-template",null,0,jM),t&2){let i=Rv(2);xn("ngIf",!r.auth.user())("ngIfElse",i)}},dependencies:[ti,S0,co],encapsulation:2})};function iwe(n,e){n&1&&(x0(0),kt(1,"app-map-viewer"),w0())}var vD=class n{constructor(e){this.auth=e}title=un("geo-etl-engine");static \u0275fac=function(t){return new(t||n)(Ai(ap))};static \u0275cmp=lr({type:n,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"main"],[4,"ngIf"]],template:function(t,r){t&1&&(Ve(0,"main",0),kt(1,"app-login"),Dr(2,iwe,2,0,"ng-container",1),$e()),t&2&&(Ct(2),xn("ngIf",r.auth.user()))},dependencies:[ti,co,yD,_D],encapsulation:2})};d5(vD,fG).catch(n=>console.error(n));
