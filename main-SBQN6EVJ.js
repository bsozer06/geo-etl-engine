import{a as fD,b as QF,c as Ln,d as Aa,e as e8,h as t8,i as dD}from"./chunk-FAVDZ756.js";import{a as hD,b as JF}from"./chunk-DMHJOBWC.js";import{$ as GF,A as cm,Aa as cc,B as ll,Ba as ko,C as hm,Ca as XF,D as fm,Da as ZF,E as OF,F as dm,Fa as KF,G as Ff,H as T_,I as D_,J as Lo,K as FF,L as Bf,M as xw,N as Qn,O as Nr,P as Ps,Q as A_,R as nn,S as Wn,T as Ls,U as BF,V as jF,W as ww,X as UF,Y as pm,Z as gm,_ as Ew,a as Fl,aa as zF,b as la,ba as R_,c as Hn,ca as mm,d as NF,da as VF,e as al,ea as HF,f as PF,fa as bw,g as mw,ga as ym,h as Tu,ha as qF,i as us,ia as uD,j as am,ja as WF,k as lD,ka as Sw,l as lm,la as Cw,m as uc,ma as $F,n as LF,na as rn,o as Bl,oa as cD,p as Zo,pa as Iw,q as yw,qa as Tw,r as Ta,ra as YF,s as Ms,sa as Gr,t as Ns,ta as _m,u as _w,ua as mh,v as kF,va as vm,w as Ci,wa as jl,x as Du,xa as yh,y as um,ya as vp,z as vw,za as Da}from"./chunk-X7HD5YXI.js";import{a as Yr}from"./chunk-FK6H3RFT.js";import"./chunk-NJ5AJFAG.js";import{a as dt,b as tn,c as I_,d as _p,e as gr,g as Ol,h as He}from"./chunk-WWX6BADO.js";var ok=gr((kH,ik)=>{"use strict";(function(n){typeof kH=="object"&&typeof ik<"u"?ik.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return(function n(e,t,r){function i(a,l){if(!t[a]){if(!e[a]){var c=typeof I_=="function"&&I_;if(!l&&c)return c(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var d=t[a]={exports:{}};e[a][0].call(d.exports,function(y){var p=e[a][1][y];return i(p||y)},d,d.exports,n,e,t,r)}return t[a].exports}for(var o=typeof I_=="function"&&I_,s=0;s<r.length;s++)i(r[s]);return i})({1:[function(n,e,t){"use strict";var r=n("./utils"),i=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(s){for(var a,l,c,f,d,y,p,_=[],w=0,b=s.length,S=b,T=r.getTypeOf(s)!=="string";w<s.length;)S=b-w,c=T?(a=s[w++],l=w<b?s[w++]:0,w<b?s[w++]:0):(a=s.charCodeAt(w++),l=w<b?s.charCodeAt(w++):0,w<b?s.charCodeAt(w++):0),f=a>>2,d=(3&a)<<4|l>>4,y=1<S?(15&l)<<2|c>>6:64,p=2<S?63&c:64,_.push(o.charAt(f)+o.charAt(d)+o.charAt(y)+o.charAt(p));return _.join("")},t.decode=function(s){var a,l,c,f,d,y,p=0,_=0,w="data:";if(s.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var b,S=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===o.charAt(64)&&S--,s.charAt(s.length-2)===o.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=i.uint8array?new Uint8Array(0|S):new Array(0|S);p<s.length;)a=o.indexOf(s.charAt(p++))<<2|(f=o.indexOf(s.charAt(p++)))>>4,l=(15&f)<<4|(d=o.indexOf(s.charAt(p++)))>>2,c=(3&d)<<6|(y=o.indexOf(s.charAt(p++))),b[_++]=a,d!==64&&(b[_++]=l),y!==64&&(b[_++]=c);return b}},{"./support":30,"./utils":32}],2:[function(n,e,t){"use strict";var r=n("./external"),i=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),s=n("./stream/DataLengthProbe");function a(l,c,f,d,y){this.compressedSize=l,this.uncompressedSize=c,this.crc32=f,this.compression=d,this.compressedContent=y}a.prototype={getContentWorker:function(){var l=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,f){return l.pipe(new o).pipe(new s("uncompressedSize")).pipe(c.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,e,t){"use strict";var r=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,e,t){"use strict";var r=n("./utils"),i=(function(){for(var o,s=[],a=0;a<256;a++){o=a;for(var l=0;l<8;l++)o=1&o?3988292384^o>>>1:o>>>1;s[a]=o}return s})();e.exports=function(o,s){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?(function(a,l,c,f){var d=i,y=f+c;a^=-1;for(var p=f;p<y;p++)a=a>>>8^d[255&(a^l[p])];return-1^a})(0|s,o,o.length,0):(function(a,l,c,f){var d=i,y=f+c;a^=-1;for(var p=f;p<y;p++)a=a>>>8^d[255&(a^l.charCodeAt(p))];return-1^a})(0|s,o,o.length,0):0}},{"./utils":32}],5:[function(n,e,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,e,t){"use strict";var r=null;r=typeof Promise<"u"?Promise:n("lie"),e.exports={Promise:r}},{lie:37}],7:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=n("pako"),o=n("./utils"),s=n("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,f){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=f,this.meta={}}t.magic="\b\0",o.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(f){c.push({data:f,meta:c.meta})}},t.compressWorker=function(c){return new l("Deflate",c)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,e,t){"use strict";function r(d,y){var p,_="";for(p=0;p<y;p++)_+=String.fromCharCode(255&d),d>>>=8;return _}function i(d,y,p,_,w,b){var S,T,A=d.file,N=d.compression,O=b!==a.utf8encode,W=o.transformTo("string",b(A.name)),X=o.transformTo("string",a.utf8encode(A.name)),Y=A.comment,$=o.transformTo("string",b(Y)),V=o.transformTo("string",a.utf8encode(Y)),B=X.length!==A.name.length,v=V.length!==Y.length,I="",M="",j="",Q=A.dir,Z=A.date,q={crc32:0,compressedSize:0,uncompressedSize:0};y&&!p||(q.crc32=d.crc32,q.compressedSize=d.compressedSize,q.uncompressedSize=d.uncompressedSize);var K=0;y&&(K|=8),O||!B&&!v||(K|=2048);var oe=0,_e=0;Q&&(oe|=16),w==="UNIX"?(_e=798,oe|=(function(ee,ce){var pe=ee;return ee||(pe=ce?16893:33204),(65535&pe)<<16})(A.unixPermissions,Q)):(_e=20,oe|=(function(ee){return 63&(ee||0)})(A.dosPermissions)),S=Z.getUTCHours(),S<<=6,S|=Z.getUTCMinutes(),S<<=5,S|=Z.getUTCSeconds()/2,T=Z.getUTCFullYear()-1980,T<<=4,T|=Z.getUTCMonth()+1,T<<=5,T|=Z.getUTCDate(),B&&(M=r(1,1)+r(l(W),4)+X,I+="up"+r(M.length,2)+M),v&&(j=r(1,1)+r(l($),4)+V,I+="uc"+r(j.length,2)+j);var F="";return F+=`
\0`,F+=r(K,2),F+=N.magic,F+=r(S,2),F+=r(T,2),F+=r(q.crc32,4),F+=r(q.compressedSize,4),F+=r(q.uncompressedSize,4),F+=r(W.length,2),F+=r(I.length,2),{fileRecord:c.LOCAL_FILE_HEADER+F+W+I,dirRecord:c.CENTRAL_FILE_HEADER+r(_e,2)+F+r($.length,2)+"\0\0\0\0"+r(oe,4)+r(_,4)+W+I+$}}var o=n("../utils"),s=n("../stream/GenericWorker"),a=n("../utf8"),l=n("../crc32"),c=n("../signature");function f(d,y,p,_){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=p,this.encodeFileName=_,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,s),f.prototype.push=function(d){var y=d.meta.percent||0,p=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,s.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(y+100*(p-_-1))/p:100}}))},f.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var p=i(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,p=i(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),y)this.push({data:(function(_){return c.DATA_DESCRIPTOR+r(_.crc32,4)+r(_.compressedSize,4)+r(_.uncompressedSize,4)})(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var p=this.bytesWritten-d,_=(function(w,b,S,T,A){var N=o.transformTo("string",A(T));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(w,2)+r(w,2)+r(b,4)+r(S,4)+r(N.length,2)+N})(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(p){y.processChunk(p)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(p){y.error(p)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(d){var y=this._sources;if(!s.prototype.error.call(this,d))return!1;for(var p=0;p<y.length;p++)try{y[p].error(d)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},e.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,e,t){"use strict";var r=n("../compressions"),i=n("./ZipFileWorker");t.generateWorker=function(o,s,a){var l=new i(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{o.forEach(function(f,d){c++;var y=(function(b,S){var T=b||S,A=r[T];if(!A)throw new Error(T+" is not a valid compression method !");return A})(d.options.compression,s.compression),p=d.options.compressionOptions||s.compressionOptions||{},_=d.dir,w=d.date;d._compressWorker(y,p).withStreamInfo("file",{name:f,dir:_,date:w,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,e,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new r;for(var o in this)typeof this[o]!="function"&&(i[o]=this[o]);return i}}(r.prototype=n("./object")).loadAsync=n("./load"),r.support=n("./support"),r.defaults=n("./defaults"),r.version="3.10.1",r.loadAsync=function(i,o){return new r().loadAsync(i,o)},r.external=n("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,e,t){"use strict";var r=n("./utils"),i=n("./external"),o=n("./utf8"),s=n("./zipEntries"),a=n("./stream/Crc32Probe"),l=n("./nodejsUtils");function c(f){return new i.Promise(function(d,y){var p=f.decompressed.getContentWorker().pipe(new a);p.on("error",function(_){y(_)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}e.exports=function(f,d){var y=this;return d=r.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(p){var _=new s(d);return _.load(p),_}).then(function(p){var _=[i.Promise.resolve(p)],w=p.files;if(d.checkCRC32)for(var b=0;b<w.length;b++)_.push(c(w[b]));return i.Promise.all(_)}).then(function(p){for(var _=p.shift(),w=_.files,b=0;b<w.length;b++){var S=w[b],T=S.fileNameStr,A=r.resolve(S.fileNameStr);y.file(A,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:d.createFolders}),S.dir||(y.file(A).unsafeOriginalName=T)}return _.zipComment.length&&(y.comment=_.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,e,t){"use strict";var r=n("../utils"),i=n("../stream/GenericWorker");function o(s,a){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(o,i),o.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,e,t){"use strict";var r=n("readable-stream").Readable;function i(o,s,a){r.call(this,s),this._helper=o;var l=this;o.on("data",function(c,f){l.push(c)||l._helper.pause(),a&&a(f)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}n("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(n,e,t){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,i);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,i)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var i=new Buffer(r);return i.fill(0),i},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(n,e,t){"use strict";function r(A,N,O){var W,X=o.getTypeOf(N),Y=o.extend(O||{},l);Y.date=Y.date||new Date,Y.compression!==null&&(Y.compression=Y.compression.toUpperCase()),typeof Y.unixPermissions=="string"&&(Y.unixPermissions=parseInt(Y.unixPermissions,8)),Y.unixPermissions&&16384&Y.unixPermissions&&(Y.dir=!0),Y.dosPermissions&&16&Y.dosPermissions&&(Y.dir=!0),Y.dir&&(A=w(A)),Y.createFolders&&(W=_(A))&&b.call(this,W,!0);var $=X==="string"&&Y.binary===!1&&Y.base64===!1;O&&O.binary!==void 0||(Y.binary=!$),(N instanceof c&&N.uncompressedSize===0||Y.dir||!N||N.length===0)&&(Y.base64=!1,Y.binary=!0,N="",Y.compression="STORE",X="string");var V=null;V=N instanceof c||N instanceof s?N:y.isNode&&y.isStream(N)?new p(A,N):o.prepareContent(A,N,Y.binary,Y.optimizedBinaryString,Y.base64);var B=new f(A,V,Y);this.files[A]=B}var i=n("./utf8"),o=n("./utils"),s=n("./stream/GenericWorker"),a=n("./stream/StreamHelper"),l=n("./defaults"),c=n("./compressedObject"),f=n("./zipObject"),d=n("./generate"),y=n("./nodejsUtils"),p=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var N=A.lastIndexOf("/");return 0<N?A.substring(0,N):""},w=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},b=function(A,N){return N=N!==void 0?N:l.createFolders,A=w(A),this.files[A]||r.call(this,A,null,{dir:!0,createFolders:N}),this.files[A]};function S(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var N,O,W;for(N in this.files)W=this.files[N],(O=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&A(O,W)},filter:function(A){var N=[];return this.forEach(function(O,W){A(O,W)&&N.push(W)}),N},file:function(A,N,O){if(arguments.length!==1)return A=this.root+A,r.call(this,A,N,O),this;if(S(A)){var W=A;return this.filter(function(Y,$){return!$.dir&&W.test(Y)})}var X=this.files[this.root+A];return X&&!X.dir?X:null},folder:function(A){if(!A)return this;if(S(A))return this.filter(function(X,Y){return Y.dir&&A.test(X)});var N=this.root+A,O=b.call(this,N),W=this.clone();return W.root=O.name,W},remove:function(A){A=this.root+A;var N=this.files[A];if(N||(A.slice(-1)!=="/"&&(A+="/"),N=this.files[A]),N&&!N.dir)delete this.files[A];else for(var O=this.filter(function(X,Y){return Y.name.slice(0,A.length)===A}),W=0;W<O.length;W++)delete this.files[O[W].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var N,O={};try{if((O=o.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");o.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var W=O.comment||this.comment||"";N=d.generateWorker(this,O,W)}catch(X){(N=new s("error")).error(X)}return new a(N,O.type||"string",O.mimeType)},generateAsync:function(A,N){return this.generateInternalStream(A).accumulate(N)},generateNodeStream:function(A,N){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(N)}};e.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,e,t){"use strict";e.exports=n("stream")},{stream:void 0}],17:[function(n,e,t){"use strict";var r=n("./DataReader");function i(o){r.call(this,o);for(var s=0;s<this.data.length;s++)o[s]=255&o[s]}n("../utils").inherits(i,r),i.prototype.byteAt=function(o){return this.data[this.zero+o]},i.prototype.lastIndexOfSignature=function(o){for(var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===c)return f-this.zero;return-1},i.prototype.readAndCheckSignature=function(o){var s=o.charCodeAt(0),a=o.charCodeAt(1),l=o.charCodeAt(2),c=o.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&c===f[3]},i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(n,e,t){"use strict";var r=n("../utils");function i(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var s,a=0;for(this.checkOffset(o),s=this.index+o-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=o,a},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},e.exports=i},{"../utils":32}],19:[function(n,e,t){"use strict";var r=n("./Uint8ArrayReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,e,t){"use strict";var r=n("./DataReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},i.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},i.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},i.prototype.readData=function(o){this.checkOffset(o);var s=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(n,e,t){"use strict";var r=n("./ArrayReader");function i(o){r.call(this,o)}n("../utils").inherits(i,r),i.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,s},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(n,e,t){"use strict";var r=n("../utils"),i=n("../support"),o=n("./ArrayReader"),s=n("./StringReader"),a=n("./NodeBufferReader"),l=n("./Uint8ArrayReader");e.exports=function(c){var f=r.getTypeOf(c);return r.checkSupport(f),f!=="string"||i.uint8array?f==="nodebuffer"?new a(c):i.uint8array?new l(r.transformTo("uint8array",c)):new o(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,e,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,e,t){"use strict";var r=n("./GenericWorker"),i=n("../utils");function o(s){r.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(o,r),o.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,e,t){"use strict";var r=n("./GenericWorker"),i=n("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,r),o.prototype.processChunk=function(s){this.streamInfo.crc32=i(s.data,this.streamInfo.crc32||0),this.push(s)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./GenericWorker");function o(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(o,i),o.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}i.prototype.processChunk.call(this,s)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./GenericWorker");function o(s){i.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,e,t){"use strict";function r(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,o){return this._listeners[i].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,o){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,o)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var o=this;return i.on("data",function(s){o.processChunk(s)}),i.on("end",function(){o.end()}),i.on("error",function(s){o.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,o){return this.extraStreamInfo[i]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},e.exports=r},{}],29:[function(n,e,t){"use strict";var r=n("../utils"),i=n("./ConvertWorker"),o=n("./GenericWorker"),s=n("../base64"),a=n("../support"),l=n("../external"),c=null;if(a.nodestream)try{c=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(y,p){return new l.Promise(function(_,w){var b=[],S=y._internalType,T=y._outputType,A=y._mimeType;y.on("data",function(N,O){b.push(N),p&&p(O)}).on("error",function(N){b=[],w(N)}).on("end",function(){try{var N=(function(O,W,X){switch(O){case"blob":return r.newBlob(r.transformTo("arraybuffer",W),X);case"base64":return s.encode(W);default:return r.transformTo(O,W)}})(T,(function(O,W){var X,Y=0,$=null,V=0;for(X=0;X<W.length;X++)V+=W[X].length;switch(O){case"string":return W.join("");case"array":return Array.prototype.concat.apply([],W);case"uint8array":for($=new Uint8Array(V),X=0;X<W.length;X++)$.set(W[X],Y),Y+=W[X].length;return $;case"nodebuffer":return Buffer.concat(W);default:throw new Error("concat : unsupported type '"+O+"'")}})(S,b),A);_(N)}catch(O){w(O)}b=[]}).resume()})}function d(y,p,_){var w=p;switch(p){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=p,this._mimeType=_,r.checkSupport(w),this._worker=y.pipe(new i(w)),y.lock()}catch(b){this._worker=new o("error"),this._worker.error(b)}}d.prototype={accumulate:function(y){return f(this,y)},on:function(y,p){var _=this;return y==="data"?this._worker.on(y,function(w){p.call(_,w.data,w.meta)}):this._worker.on(y,function(){r.delay(p,arguments,_)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},y)}},e.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,e,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),t.blob=i.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,e,t){"use strict";for(var r=n("./utils"),i=n("./support"),o=n("./nodejsUtils"),s=n("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}t.utf8encode=function(d){return i.nodebuffer?o.newBufferFrom(d,"utf-8"):(function(y){var p,_,w,b,S,T=y.length,A=0;for(b=0;b<T;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<T&&(64512&(w=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(w-56320),b++),A+=_<128?1:_<2048?2:_<65536?3:4;for(p=i.uint8array?new Uint8Array(A):new Array(A),b=S=0;S<A;b++)(64512&(_=y.charCodeAt(b)))==55296&&b+1<T&&(64512&(w=y.charCodeAt(b+1)))==56320&&(_=65536+(_-55296<<10)+(w-56320),b++),_<128?p[S++]=_:(_<2048?p[S++]=192|_>>>6:(_<65536?p[S++]=224|_>>>12:(p[S++]=240|_>>>18,p[S++]=128|_>>>12&63),p[S++]=128|_>>>6&63),p[S++]=128|63&_);return p})(d)},t.utf8decode=function(d){return i.nodebuffer?r.transformTo("nodebuffer",d).toString("utf-8"):(function(y){var p,_,w,b,S=y.length,T=new Array(2*S);for(p=_=0;p<S;)if((w=y[p++])<128)T[_++]=w;else if(4<(b=a[w]))T[_++]=65533,p+=b-1;else{for(w&=b===2?31:b===3?15:7;1<b&&p<S;)w=w<<6|63&y[p++],b--;1<b?T[_++]=65533:w<65536?T[_++]=w:(w-=65536,T[_++]=55296|w>>10&1023,T[_++]=56320|1023&w)}return T.length!==_&&(T.subarray?T=T.subarray(0,_):T.length=_),r.applyFromCharCode(T)})(d=r.transformTo(i.uint8array?"uint8array":"array",d))},r.inherits(c,s),c.prototype.processChunk=function(d){var y=r.transformTo(i.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var p=y;(y=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),y.set(p,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var _=(function(b,S){var T;for((S=S||b.length)>b.length&&(S=b.length),T=S-1;0<=T&&(192&b[T])==128;)T--;return T<0||T===0?S:T+a[b[T]]>S?T:S})(y),w=y;_!==y.length&&(i.uint8array?(w=y.subarray(0,_),this.leftOver=y.subarray(_,y.length)):(w=y.slice(0,_),this.leftOver=y.slice(_,y.length))),this.push({data:t.utf8decode(w),meta:d.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,r.inherits(f,s),f.prototype.processChunk=function(d){this.push({data:t.utf8encode(d.data),meta:d.meta})},t.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,e,t){"use strict";var r=n("./support"),i=n("./base64"),o=n("./nodejsUtils"),s=n("./external");function a(p){return p}function l(p,_){for(var w=0;w<p.length;++w)_[w]=255&p.charCodeAt(w);return _}n("setimmediate"),t.newBlob=function(p,_){t.checkSupport("blob");try{return new Blob([p],{type:_})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(p),w.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(p,_,w){var b=[],S=0,T=p.length;if(T<=w)return String.fromCharCode.apply(null,p);for(;S<T;)_==="array"||_==="nodebuffer"?b.push(String.fromCharCode.apply(null,p.slice(S,Math.min(S+w,T)))):b.push(String.fromCharCode.apply(null,p.subarray(S,Math.min(S+w,T)))),S+=w;return b.join("")},stringifyByChar:function(p){for(var _="",w=0;w<p.length;w++)_+=String.fromCharCode(p[w]);return _},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}})()}};function f(p){var _=65536,w=t.getTypeOf(p),b=!0;if(w==="uint8array"?b=c.applyCanBeUsed.uint8array:w==="nodebuffer"&&(b=c.applyCanBeUsed.nodebuffer),b)for(;1<_;)try{return c.stringifyByChunk(p,w,_)}catch{_=Math.floor(_/2)}return c.stringifyByChar(p)}function d(p,_){for(var w=0;w<p.length;w++)_[w]=p[w];return _}t.applyFromCharCode=f;var y={};y.string={string:a,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return y.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,o.allocBuffer(p.length))}},y.array={string:f,array:a,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(p)}},y.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:a,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return o.newBufferFrom(new Uint8Array(p))}},y.uint8array={string:f,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:a,nodebuffer:function(p){return o.newBufferFrom(p)}},y.nodebuffer={string:f,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return y.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:a},t.transformTo=function(p,_){if(_=_||"",!p)return _;t.checkSupport(p);var w=t.getTypeOf(_);return y[w][p](_)},t.resolve=function(p){for(var _=p.split("/"),w=[],b=0;b<_.length;b++){var S=_[b];S==="."||S===""&&b!==0&&b!==_.length-1||(S===".."?w.pop():w.push(S))}return w.join("/")},t.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(p)?"nodebuffer":r.uint8array&&p instanceof Uint8Array?"uint8array":r.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(p){if(!r[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(p){var _,w,b="";for(w=0;w<(p||"").length;w++)b+="\\x"+((_=p.charCodeAt(w))<16?"0":"")+_.toString(16).toUpperCase();return b},t.delay=function(p,_,w){setImmediate(function(){p.apply(w||null,_||[])})},t.inherits=function(p,_){function w(){}w.prototype=_.prototype,p.prototype=new w},t.extend=function(){var p,_,w={};for(p=0;p<arguments.length;p++)for(_ in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],_)&&w[_]===void 0&&(w[_]=arguments[p][_]);return w},t.prepareContent=function(p,_,w,b,S){return s.Promise.resolve(_).then(function(T){return r.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new s.Promise(function(A,N){var O=new FileReader;O.onload=function(W){A(W.target.result)},O.onerror=function(W){N(W.target.error)},O.readAsArrayBuffer(T)}):T}).then(function(T){var A=t.getTypeOf(T);return A?(A==="arraybuffer"?T=t.transformTo("uint8array",T):A==="string"&&(S?T=i.decode(T):w&&b!==!0&&(T=(function(N){return l(N,r.uint8array?new Uint8Array(N.length):new Array(N.length))})(T))),T):s.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),i=n("./utils"),o=n("./signature"),s=n("./zipEntry"),a=n("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(c)+")")}},isSignature:function(c,f){var d=this.reader.index;this.reader.setIndex(c);var y=this.reader.readString(4)===f;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",d=i.transformTo(f,c);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,f,d,y=this.zip64EndOfCentralSize-44;0<y;)c=this.reader.readInt(2),f=this.reader.readInt(4),d=this.reader.readData(f),this.zip64ExtensibleData[c]={id:c,length:f,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,f;for(c=0;c<this.files.length;c++)f=this.files[c],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var f=c;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=f-d;if(0<y)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,e,t){"use strict";var r=n("./reader/readerFor"),i=n("./utils"),o=n("./compressedObject"),s=n("./crc32"),a=n("./utf8"),l=n("./compressions"),c=n("./support");function f(d,y){this.options=d,this.loadOptions=y}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(_){for(var w in l)if(Object.prototype.hasOwnProperty.call(l,w)&&l[w].magic===_)return l[w];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,p,_,w=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<w;)y=d.readInt(2),p=d.readInt(2),_=d.readData(p),this.extraFields[y]={id:y,length:p,value:_};d.setIndex(w)},handleUTF8:function(){var d=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var p=i.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var w=i.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=r(d.value);return y.readInt(1)!==1||s(this.fileName)!==y.readInt(4)?null:a.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=r(d.value);return y.readInt(1)!==1||s(this.fileComment)!==y.readInt(4)?null:a.utf8decode(y.readData(d.length-5))}return null}},e.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,e,t){"use strict";function r(y,p,_){this.name=y,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=p,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var i=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),s=n("./utf8"),a=n("./compressedObject"),l=n("./stream/GenericWorker");r.prototype={internalStream:function(y){var p=null,_="string";try{if(!y)throw new Error("No output type specified.");var w=(_=y.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),p=this._decompressWorker();var b=!this._dataBinary;b&&!w&&(p=p.pipe(new s.Utf8EncodeWorker)),!b&&w&&(p=p.pipe(new s.Utf8DecodeWorker))}catch(S){(p=new l("error")).error(S)}return new i(p,_,"")},async:function(y,p){return this.internalStream(y).accumulate(p)},nodeStream:function(y,p){return this.internalStream(y||"nodebuffer").toNodejsStream(p)},_compressWorker:function(y,p){if(this._data instanceof a&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(_,y,p)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=f;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,e,t){(function(r){"use strict";var i,o,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(y),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),i=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)i="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var p=r.document.createElement("script");p.onreadystatechange=function(){y(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},r.document.documentElement.appendChild(p)}:function(){setTimeout(y,0)};else{var f=new r.MessageChannel;f.port1.onmessage=y,i=function(){f.port2.postMessage(0)}}var d=[];function y(){var p,_;o=!0;for(var w=d.length;w;){for(_=d,d=[],p=-1;++p<w;)_[p]();w=d.length}o=!1}e.exports=function(p){d.push(p)!==1||o||i()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,e,t){"use strict";var r=n("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,w!==i&&p(this,w)}function f(w,b,S){this.promise=w,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function d(w,b,S){r(function(){var T;try{T=b(S)}catch(A){return o.reject(w,A)}T===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,T)})}function y(w){var b=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof b=="function")return function(){b.apply(w,arguments)}}function p(w,b){var S=!1;function T(O){S||(S=!0,o.reject(w,O))}function A(O){S||(S=!0,o.resolve(w,O))}var N=_(function(){b(A,T)});N.status==="error"&&T(N.value)}function _(w,b){var S={};try{S.value=w(b),S.status="success"}catch(T){S.status="error",S.value=T}return S}(e.exports=c).prototype.finally=function(w){if(typeof w!="function")return this;var b=this.constructor;return this.then(function(S){return b.resolve(w()).then(function(){return S})},function(S){return b.resolve(w()).then(function(){throw S})})},c.prototype.catch=function(w){return this.then(null,w)},c.prototype.then=function(w,b){if(typeof w!="function"&&this.state===a||typeof b!="function"&&this.state===s)return this;var S=new this.constructor(i);return this.state!==l?d(S,this.state===a?w:b,this.outcome):this.queue.push(new f(S,w,b)),S},f.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},f.prototype.otherCallFulfilled=function(w){d(this.promise,this.onFulfilled,w)},f.prototype.callRejected=function(w){o.reject(this.promise,w)},f.prototype.otherCallRejected=function(w){d(this.promise,this.onRejected,w)},o.resolve=function(w,b){var S=_(y,b);if(S.status==="error")return o.reject(w,S.value);var T=S.value;if(T)p(w,T);else{w.state=a,w.outcome=b;for(var A=-1,N=w.queue.length;++A<N;)w.queue[A].callFulfilled(b)}return w},o.reject=function(w,b){w.state=s,w.outcome=b;for(var S=-1,T=w.queue.length;++S<T;)w.queue[S].callRejected(b);return w},c.resolve=function(w){return w instanceof this?w:o.resolve(new this(i),w)},c.reject=function(w){var b=new this(i);return o.reject(b,w)},c.all=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=w.length,T=!1;if(!S)return this.resolve([]);for(var A=new Array(S),N=0,O=-1,W=new this(i);++O<S;)X(w[O],O);return W;function X(Y,$){b.resolve(Y).then(function(V){A[$]=V,++N!==S||T||(T=!0,o.resolve(W,A))},function(V){T||(T=!0,o.reject(W,V))})}},c.race=function(w){var b=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=w.length,T=!1;if(!S)return this.resolve([]);for(var A=-1,N=new this(i);++A<S;)O=w[A],b.resolve(O).then(function(W){T||(T=!0,o.resolve(N,W))},function(W){T||(T=!0,o.reject(N,W))});var O;return N}},{immediate:36}],38:[function(n,e,t){"use strict";var r={};(0,n("./lib/utils/common").assign)(r,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,e,t){"use strict";var r=n("./zlib/deflate"),i=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/messages"),a=n("./zlib/zstream"),l=Object.prototype.toString,c=0,f=-1,d=0,y=8;function p(w){if(!(this instanceof p))return new p(w);this.options=i.assign({level:f,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},w||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var S=r.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(S!==c)throw new Error(s[S]);if(b.header&&r.deflateSetHeader(this.strm,b.header),b.dictionary){var T;if(T=typeof b.dictionary=="string"?o.string2buf(b.dictionary):l.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(S=r.deflateSetDictionary(this.strm,T))!==c)throw new Error(s[S]);this._dict_set=!0}}function _(w,b){var S=new p(b);if(S.push(w,!0),S.err)throw S.msg||s[S.err];return S.result}p.prototype.push=function(w,b){var S,T,A=this.strm,N=this.options.chunkSize;if(this.ended)return!1;T=b===~~b?b:b===!0?4:0,typeof w=="string"?A.input=o.string2buf(w):l.call(w)==="[object ArrayBuffer]"?A.input=new Uint8Array(w):A.input=w,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new i.Buf8(N),A.next_out=0,A.avail_out=N),(S=r.deflate(A,T))!==1&&S!==c)return this.onEnd(S),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(i.shrinkBuf(A.output,A.next_out))):this.onData(i.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&S!==1);return T===4?(S=r.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===c):T!==2||(this.onEnd(c),!(A.avail_out=0))},p.prototype.onData=function(w){this.chunks.push(w)},p.prototype.onEnd=function(w){w===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},t.Deflate=p,t.deflate=_,t.deflateRaw=function(w,b){return(b=b||{}).raw=!0,_(w,b)},t.gzip=function(w,b){return(b=b||{}).gzip=!0,_(w,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,e,t){"use strict";var r=n("./zlib/inflate"),i=n("./utils/common"),o=n("./utils/strings"),s=n("./zlib/constants"),a=n("./zlib/messages"),l=n("./zlib/zstream"),c=n("./zlib/gzheader"),f=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},p||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||p&&p.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var w=r.inflateInit2(this.strm,_.windowBits);if(w!==s.Z_OK)throw new Error(a[w]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function y(p,_){var w=new d(_);if(w.push(p,!0),w.err)throw w.msg||a[w.err];return w.result}d.prototype.push=function(p,_){var w,b,S,T,A,N,O=this.strm,W=this.options.chunkSize,X=this.options.dictionary,Y=!1;if(this.ended)return!1;b=_===~~_?_:_===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof p=="string"?O.input=o.binstring2buf(p):f.call(p)==="[object ArrayBuffer]"?O.input=new Uint8Array(p):O.input=p,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new i.Buf8(W),O.next_out=0,O.avail_out=W),(w=r.inflate(O,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&X&&(N=typeof X=="string"?o.string2buf(X):f.call(X)==="[object ArrayBuffer]"?new Uint8Array(X):X,w=r.inflateSetDictionary(this.strm,N)),w===s.Z_BUF_ERROR&&Y===!0&&(w=s.Z_OK,Y=!1),w!==s.Z_STREAM_END&&w!==s.Z_OK)return this.onEnd(w),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&w!==s.Z_STREAM_END&&(O.avail_in!==0||b!==s.Z_FINISH&&b!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=o.utf8border(O.output,O.next_out),T=O.next_out-S,A=o.buf2string(O.output,S),O.next_out=T,O.avail_out=W-T,T&&i.arraySet(O.output,O.output,S,T,0),this.onData(A)):this.onData(i.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(Y=!0)}while((0<O.avail_in||O.avail_out===0)&&w!==s.Z_STREAM_END);return w===s.Z_STREAM_END&&(b=s.Z_FINISH),b===s.Z_FINISH?(w=r.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===s.Z_OK):b!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(O.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},t.Inflate=d,t.inflate=y,t.inflateRaw=function(p,_){return(_=_||{}).raw=!0,y(p,_)},t.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,e,t){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},t.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var i={arraySet:function(s,a,l,c,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),f);else for(var d=0;d<c;d++)s[f+d]=a[l+d]},flattenChunks:function(s){var a,l,c,f,d,y;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(y=new Uint8Array(c),a=f=0,l=s.length;a<l;a++)d=s[a],y.set(d,f),f+=d.length;return y}},o={arraySet:function(s,a,l,c,f){for(var d=0;d<c;d++)s[f+d]=a[l+d]},flattenChunks:function(s){return[].concat.apply([],s)}};t.setTyped=function(s){s?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},{}],42:[function(n,e,t){"use strict";var r=n("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,f){if(f<65537&&(c.subarray&&o||!c.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(c,f));for(var d="",y=0;y<f;y++)d+=String.fromCharCode(c[y]);return d}s[254]=s[254]=1,t.string2buf=function(c){var f,d,y,p,_,w=c.length,b=0;for(p=0;p<w;p++)(64512&(d=c.charCodeAt(p)))==55296&&p+1<w&&(64512&(y=c.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),b+=d<128?1:d<2048?2:d<65536?3:4;for(f=new r.Buf8(b),p=_=0;_<b;p++)(64512&(d=c.charCodeAt(p)))==55296&&p+1<w&&(64512&(y=c.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),d<128?f[_++]=d:(d<2048?f[_++]=192|d>>>6:(d<65536?f[_++]=224|d>>>12:(f[_++]=240|d>>>18,f[_++]=128|d>>>12&63),f[_++]=128|d>>>6&63),f[_++]=128|63&d);return f},t.buf2binstring=function(c){return l(c,c.length)},t.binstring2buf=function(c){for(var f=new r.Buf8(c.length),d=0,y=f.length;d<y;d++)f[d]=c.charCodeAt(d);return f},t.buf2string=function(c,f){var d,y,p,_,w=f||c.length,b=new Array(2*w);for(d=y=0;d<w;)if((p=c[d++])<128)b[y++]=p;else if(4<(_=s[p]))b[y++]=65533,d+=_-1;else{for(p&=_===2?31:_===3?15:7;1<_&&d<w;)p=p<<6|63&c[d++],_--;1<_?b[y++]=65533:p<65536?b[y++]=p:(p-=65536,b[y++]=55296|p>>10&1023,b[y++]=56320|1023&p)}return l(b,y)},t.utf8border=function(c,f){var d;for((f=f||c.length)>c.length&&(f=c.length),d=f-1;0<=d&&(192&c[d])==128;)d--;return d<0||d===0?f:d+s[c[d]]>f?d:f}},{"./common":41}],43:[function(n,e,t){"use strict";e.exports=function(r,i,o,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;o!==0;){for(o-=c=2e3<o?2e3:o;l=l+(a=a+i[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(n,e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,e,t){"use strict";var r=(function(){for(var i,o=[],s=0;s<256;s++){i=s;for(var a=0;a<8;a++)i=1&i?3988292384^i>>>1:i>>>1;o[s]=i}return o})();e.exports=function(i,o,s,a){var l=r,c=a+s;i^=-1;for(var f=a;f<c;f++)i=i>>>8^l[255&(i^o[f])];return-1^i}},{}],46:[function(n,e,t){"use strict";var r,i=n("../utils/common"),o=n("./trees"),s=n("./adler32"),a=n("./crc32"),l=n("./messages"),c=0,f=4,d=0,y=-2,p=-1,_=4,w=2,b=8,S=9,T=286,A=30,N=19,O=2*T+1,W=15,X=3,Y=258,$=Y+X+1,V=42,B=113,v=1,I=2,M=3,j=4;function Q(G,be){return G.msg=l[be],be}function Z(G){return(G<<1)-(4<G?9:0)}function q(G){for(var be=G.length;0<=--be;)G[be]=0}function K(G){var be=G.state,Ie=be.pending;Ie>G.avail_out&&(Ie=G.avail_out),Ie!==0&&(i.arraySet(G.output,be.pending_buf,be.pending_out,Ie,G.next_out),G.next_out+=Ie,be.pending_out+=Ie,G.total_out+=Ie,G.avail_out-=Ie,be.pending-=Ie,be.pending===0&&(be.pending_out=0))}function oe(G,be){o._tr_flush_block(G,0<=G.block_start?G.block_start:-1,G.strstart-G.block_start,be),G.block_start=G.strstart,K(G.strm)}function _e(G,be){G.pending_buf[G.pending++]=be}function F(G,be){G.pending_buf[G.pending++]=be>>>8&255,G.pending_buf[G.pending++]=255&be}function ee(G,be){var Ie,U,ae=G.max_chain_length,he=G.strstart,Fe=G.prev_length,Ce=G.nice_match,we=G.strstart>G.w_size-$?G.strstart-(G.w_size-$):0,Ue=G.window,Le=G.w_mask,Be=G.prev,ft=G.strstart+Y,It=Ue[he+Fe-1],qe=Ue[he+Fe];G.prev_length>=G.good_match&&(ae>>=2),Ce>G.lookahead&&(Ce=G.lookahead);do if(Ue[(Ie=be)+Fe]===qe&&Ue[Ie+Fe-1]===It&&Ue[Ie]===Ue[he]&&Ue[++Ie]===Ue[he+1]){he+=2,Ie++;do;while(Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&Ue[++he]===Ue[++Ie]&&he<ft);if(U=Y-(ft-he),he=ft-Y,Fe<U){if(G.match_start=be,Ce<=(Fe=U))break;It=Ue[he+Fe-1],qe=Ue[he+Fe]}}while((be=Be[be&Le])>we&&--ae!=0);return Fe<=G.lookahead?Fe:G.lookahead}function ce(G){var be,Ie,U,ae,he,Fe,Ce,we,Ue,Le,Be=G.w_size;do{if(ae=G.window_size-G.lookahead-G.strstart,G.strstart>=Be+(Be-$)){for(i.arraySet(G.window,G.window,Be,Be,0),G.match_start-=Be,G.strstart-=Be,G.block_start-=Be,be=Ie=G.hash_size;U=G.head[--be],G.head[be]=Be<=U?U-Be:0,--Ie;);for(be=Ie=Be;U=G.prev[--be],G.prev[be]=Be<=U?U-Be:0,--Ie;);ae+=Be}if(G.strm.avail_in===0)break;if(Fe=G.strm,Ce=G.window,we=G.strstart+G.lookahead,Ue=ae,Le=void 0,Le=Fe.avail_in,Ue<Le&&(Le=Ue),Ie=Le===0?0:(Fe.avail_in-=Le,i.arraySet(Ce,Fe.input,Fe.next_in,Le,we),Fe.state.wrap===1?Fe.adler=s(Fe.adler,Ce,Le,we):Fe.state.wrap===2&&(Fe.adler=a(Fe.adler,Ce,Le,we)),Fe.next_in+=Le,Fe.total_in+=Le,Le),G.lookahead+=Ie,G.lookahead+G.insert>=X)for(he=G.strstart-G.insert,G.ins_h=G.window[he],G.ins_h=(G.ins_h<<G.hash_shift^G.window[he+1])&G.hash_mask;G.insert&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[he+X-1])&G.hash_mask,G.prev[he&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=he,he++,G.insert--,!(G.lookahead+G.insert<X)););}while(G.lookahead<$&&G.strm.avail_in!==0)}function pe(G,be){for(var Ie,U;;){if(G.lookahead<$){if(ce(G),G.lookahead<$&&be===c)return v;if(G.lookahead===0)break}if(Ie=0,G.lookahead>=X&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),Ie!==0&&G.strstart-Ie<=G.w_size-$&&(G.match_length=ee(G,Ie)),G.match_length>=X)if(U=o._tr_tally(G,G.strstart-G.match_start,G.match_length-X),G.lookahead-=G.match_length,G.match_length<=G.max_lazy_match&&G.lookahead>=X){for(G.match_length--;G.strstart++,G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart,--G.match_length!=0;);G.strstart++}else G.strstart+=G.match_length,G.match_length=0,G.ins_h=G.window[G.strstart],G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+1])&G.hash_mask;else U=o._tr_tally(G,0,G.window[G.strstart]),G.lookahead--,G.strstart++;if(U&&(oe(G,!1),G.strm.avail_out===0))return v}return G.insert=G.strstart<X-1?G.strstart:X-1,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):G.last_lit&&(oe(G,!1),G.strm.avail_out===0)?v:I}function J(G,be){for(var Ie,U,ae;;){if(G.lookahead<$){if(ce(G),G.lookahead<$&&be===c)return v;if(G.lookahead===0)break}if(Ie=0,G.lookahead>=X&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),G.prev_length=G.match_length,G.prev_match=G.match_start,G.match_length=X-1,Ie!==0&&G.prev_length<G.max_lazy_match&&G.strstart-Ie<=G.w_size-$&&(G.match_length=ee(G,Ie),G.match_length<=5&&(G.strategy===1||G.match_length===X&&4096<G.strstart-G.match_start)&&(G.match_length=X-1)),G.prev_length>=X&&G.match_length<=G.prev_length){for(ae=G.strstart+G.lookahead-X,U=o._tr_tally(G,G.strstart-1-G.prev_match,G.prev_length-X),G.lookahead-=G.prev_length-1,G.prev_length-=2;++G.strstart<=ae&&(G.ins_h=(G.ins_h<<G.hash_shift^G.window[G.strstart+X-1])&G.hash_mask,Ie=G.prev[G.strstart&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=G.strstart),--G.prev_length!=0;);if(G.match_available=0,G.match_length=X-1,G.strstart++,U&&(oe(G,!1),G.strm.avail_out===0))return v}else if(G.match_available){if((U=o._tr_tally(G,0,G.window[G.strstart-1]))&&oe(G,!1),G.strstart++,G.lookahead--,G.strm.avail_out===0)return v}else G.match_available=1,G.strstart++,G.lookahead--}return G.match_available&&(U=o._tr_tally(G,0,G.window[G.strstart-1]),G.match_available=0),G.insert=G.strstart<X-1?G.strstart:X-1,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):G.last_lit&&(oe(G,!1),G.strm.avail_out===0)?v:I}function xe(G,be,Ie,U,ae){this.good_length=G,this.max_lazy=be,this.nice_length=Ie,this.max_chain=U,this.func=ae}function Se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*O),this.dyn_dtree=new i.Buf16(2*(2*A+1)),this.bl_tree=new i.Buf16(2*(2*N+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(W+1),this.heap=new i.Buf16(2*T+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*T+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ve(G){var be;return G&&G.state?(G.total_in=G.total_out=0,G.data_type=w,(be=G.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?V:B,G.adler=be.wrap===2?0:1,be.last_flush=c,o._tr_init(be),d):Q(G,y)}function re(G){var be=ve(G);return be===d&&(function(Ie){Ie.window_size=2*Ie.w_size,q(Ie.head),Ie.max_lazy_match=r[Ie.level].max_lazy,Ie.good_match=r[Ie.level].good_length,Ie.nice_match=r[Ie.level].nice_length,Ie.max_chain_length=r[Ie.level].max_chain,Ie.strstart=0,Ie.block_start=0,Ie.lookahead=0,Ie.insert=0,Ie.match_length=Ie.prev_length=X-1,Ie.match_available=0,Ie.ins_h=0})(G.state),be}function Ve(G,be,Ie,U,ae,he){if(!G)return y;var Fe=1;if(be===p&&(be=6),U<0?(Fe=0,U=-U):15<U&&(Fe=2,U-=16),ae<1||S<ae||Ie!==b||U<8||15<U||be<0||9<be||he<0||_<he)return Q(G,y);U===8&&(U=9);var Ce=new Se;return(G.state=Ce).strm=G,Ce.wrap=Fe,Ce.gzhead=null,Ce.w_bits=U,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=ae+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+X-1)/X),Ce.window=new i.Buf8(2*Ce.w_size),Ce.head=new i.Buf16(Ce.hash_size),Ce.prev=new i.Buf16(Ce.w_size),Ce.lit_bufsize=1<<ae+6,Ce.pending_buf_size=4*Ce.lit_bufsize,Ce.pending_buf=new i.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=be,Ce.strategy=he,Ce.method=Ie,re(G)}r=[new xe(0,0,0,0,function(G,be){var Ie=65535;for(Ie>G.pending_buf_size-5&&(Ie=G.pending_buf_size-5);;){if(G.lookahead<=1){if(ce(G),G.lookahead===0&&be===c)return v;if(G.lookahead===0)break}G.strstart+=G.lookahead,G.lookahead=0;var U=G.block_start+Ie;if((G.strstart===0||G.strstart>=U)&&(G.lookahead=G.strstart-U,G.strstart=U,oe(G,!1),G.strm.avail_out===0)||G.strstart-G.block_start>=G.w_size-$&&(oe(G,!1),G.strm.avail_out===0))return v}return G.insert=0,be===f?(oe(G,!0),G.strm.avail_out===0?M:j):(G.strstart>G.block_start&&(oe(G,!1),G.strm.avail_out),v)}),new xe(4,4,8,4,pe),new xe(4,5,16,8,pe),new xe(4,6,32,32,pe),new xe(4,4,16,16,J),new xe(8,16,32,32,J),new xe(8,16,128,128,J),new xe(8,32,128,256,J),new xe(32,128,258,1024,J),new xe(32,258,258,4096,J)],t.deflateInit=function(G,be){return Ve(G,be,b,15,8,0)},t.deflateInit2=Ve,t.deflateReset=re,t.deflateResetKeep=ve,t.deflateSetHeader=function(G,be){return G&&G.state?G.state.wrap!==2?y:(G.state.gzhead=be,d):y},t.deflate=function(G,be){var Ie,U,ae,he;if(!G||!G.state||5<be||be<0)return G?Q(G,y):y;if(U=G.state,!G.output||!G.input&&G.avail_in!==0||U.status===666&&be!==f)return Q(G,G.avail_out===0?-5:y);if(U.strm=G,Ie=U.last_flush,U.last_flush=be,U.status===V)if(U.wrap===2)G.adler=0,_e(U,31),_e(U,139),_e(U,8),U.gzhead?(_e(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),_e(U,255&U.gzhead.time),_e(U,U.gzhead.time>>8&255),_e(U,U.gzhead.time>>16&255),_e(U,U.gzhead.time>>24&255),_e(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),_e(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(_e(U,255&U.gzhead.extra.length),_e(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(G.adler=a(G.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(_e(U,0),_e(U,0),_e(U,0),_e(U,0),_e(U,0),_e(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),_e(U,3),U.status=B);else{var Fe=b+(U.w_bits-8<<4)<<8;Fe|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(Fe|=32),Fe+=31-Fe%31,U.status=B,F(U,Fe),U.strstart!==0&&(F(U,G.adler>>>16),F(U,65535&G.adler)),G.adler=1}if(U.status===69)if(U.gzhead.extra){for(ae=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending!==U.pending_buf_size));)_e(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){ae=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending===U.pending_buf_size)){he=1;break}he=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,_e(U,he)}while(he!==0);U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),he===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){ae=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),K(G),ae=U.pending,U.pending===U.pending_buf_size)){he=1;break}he=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,_e(U,he)}while(he!==0);U.gzhead.hcrc&&U.pending>ae&&(G.adler=a(G.adler,U.pending_buf,U.pending-ae,ae)),he===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&K(G),U.pending+2<=U.pending_buf_size&&(_e(U,255&G.adler),_e(U,G.adler>>8&255),G.adler=0,U.status=B)):U.status=B),U.pending!==0){if(K(G),G.avail_out===0)return U.last_flush=-1,d}else if(G.avail_in===0&&Z(be)<=Z(Ie)&&be!==f)return Q(G,-5);if(U.status===666&&G.avail_in!==0)return Q(G,-5);if(G.avail_in!==0||U.lookahead!==0||be!==c&&U.status!==666){var Ce=U.strategy===2?(function(we,Ue){for(var Le;;){if(we.lookahead===0&&(ce(we),we.lookahead===0)){if(Ue===c)return v;break}if(we.match_length=0,Le=o._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,Le&&(oe(we,!1),we.strm.avail_out===0))return v}return we.insert=0,Ue===f?(oe(we,!0),we.strm.avail_out===0?M:j):we.last_lit&&(oe(we,!1),we.strm.avail_out===0)?v:I})(U,be):U.strategy===3?(function(we,Ue){for(var Le,Be,ft,It,qe=we.window;;){if(we.lookahead<=Y){if(ce(we),we.lookahead<=Y&&Ue===c)return v;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=X&&0<we.strstart&&(Be=qe[ft=we.strstart-1])===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]){It=we.strstart+Y;do;while(Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&Be===qe[++ft]&&ft<It);we.match_length=Y-(It-ft),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=X?(Le=o._tr_tally(we,1,we.match_length-X),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(Le=o._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),Le&&(oe(we,!1),we.strm.avail_out===0))return v}return we.insert=0,Ue===f?(oe(we,!0),we.strm.avail_out===0?M:j):we.last_lit&&(oe(we,!1),we.strm.avail_out===0)?v:I})(U,be):r[U.level].func(U,be);if(Ce!==M&&Ce!==j||(U.status=666),Ce===v||Ce===M)return G.avail_out===0&&(U.last_flush=-1),d;if(Ce===I&&(be===1?o._tr_align(U):be!==5&&(o._tr_stored_block(U,0,0,!1),be===3&&(q(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),K(G),G.avail_out===0))return U.last_flush=-1,d}return be!==f?d:U.wrap<=0?1:(U.wrap===2?(_e(U,255&G.adler),_e(U,G.adler>>8&255),_e(U,G.adler>>16&255),_e(U,G.adler>>24&255),_e(U,255&G.total_in),_e(U,G.total_in>>8&255),_e(U,G.total_in>>16&255),_e(U,G.total_in>>24&255)):(F(U,G.adler>>>16),F(U,65535&G.adler)),K(G),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?d:1)},t.deflateEnd=function(G){var be;return G&&G.state?(be=G.state.status)!==V&&be!==69&&be!==73&&be!==91&&be!==103&&be!==B&&be!==666?Q(G,y):(G.state=null,be===B?Q(G,-3):d):y},t.deflateSetDictionary=function(G,be){var Ie,U,ae,he,Fe,Ce,we,Ue,Le=be.length;if(!G||!G.state||(he=(Ie=G.state).wrap)===2||he===1&&Ie.status!==V||Ie.lookahead)return y;for(he===1&&(G.adler=s(G.adler,be,Le,0)),Ie.wrap=0,Le>=Ie.w_size&&(he===0&&(q(Ie.head),Ie.strstart=0,Ie.block_start=0,Ie.insert=0),Ue=new i.Buf8(Ie.w_size),i.arraySet(Ue,be,Le-Ie.w_size,Ie.w_size,0),be=Ue,Le=Ie.w_size),Fe=G.avail_in,Ce=G.next_in,we=G.input,G.avail_in=Le,G.next_in=0,G.input=be,ce(Ie);Ie.lookahead>=X;){for(U=Ie.strstart,ae=Ie.lookahead-(X-1);Ie.ins_h=(Ie.ins_h<<Ie.hash_shift^Ie.window[U+X-1])&Ie.hash_mask,Ie.prev[U&Ie.w_mask]=Ie.head[Ie.ins_h],Ie.head[Ie.ins_h]=U,U++,--ae;);Ie.strstart=U,Ie.lookahead=X-1,ce(Ie)}return Ie.strstart+=Ie.lookahead,Ie.block_start=Ie.strstart,Ie.insert=Ie.lookahead,Ie.lookahead=0,Ie.match_length=Ie.prev_length=X-1,Ie.match_available=0,G.next_in=Ce,G.input=we,G.avail_in=Fe,Ie.wrap=he,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,e,t){"use strict";e.exports=function(r,i){var o,s,a,l,c,f,d,y,p,_,w,b,S,T,A,N,O,W,X,Y,$,V,B,v,I;o=r.state,s=r.next_in,v=r.input,a=s+(r.avail_in-5),l=r.next_out,I=r.output,c=l-(i-r.avail_out),f=l+(r.avail_out-257),d=o.dmax,y=o.wsize,p=o.whave,_=o.wnext,w=o.window,b=o.hold,S=o.bits,T=o.lencode,A=o.distcode,N=(1<<o.lenbits)-1,O=(1<<o.distbits)-1;e:do{S<15&&(b+=v[s++]<<S,S+=8,b+=v[s++]<<S,S+=8),W=T[b&N];t:for(;;){if(b>>>=X=W>>>24,S-=X,(X=W>>>16&255)===0)I[l++]=65535&W;else{if(!(16&X)){if((64&X)==0){W=T[(65535&W)+(b&(1<<X)-1)];continue t}if(32&X){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}Y=65535&W,(X&=15)&&(S<X&&(b+=v[s++]<<S,S+=8),Y+=b&(1<<X)-1,b>>>=X,S-=X),S<15&&(b+=v[s++]<<S,S+=8,b+=v[s++]<<S,S+=8),W=A[b&O];n:for(;;){if(b>>>=X=W>>>24,S-=X,!(16&(X=W>>>16&255))){if((64&X)==0){W=A[(65535&W)+(b&(1<<X)-1)];continue n}r.msg="invalid distance code",o.mode=30;break e}if($=65535&W,S<(X&=15)&&(b+=v[s++]<<S,(S+=8)<X&&(b+=v[s++]<<S,S+=8)),d<($+=b&(1<<X)-1)){r.msg="invalid distance too far back",o.mode=30;break e}if(b>>>=X,S-=X,(X=l-c)<$){if(p<(X=$-X)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(B=w,(V=0)===_){if(V+=y-X,X<Y){for(Y-=X;I[l++]=w[V++],--X;);V=l-$,B=I}}else if(_<X){if(V+=y+_-X,(X-=_)<Y){for(Y-=X;I[l++]=w[V++],--X;);if(V=0,_<Y){for(Y-=X=_;I[l++]=w[V++],--X;);V=l-$,B=I}}}else if(V+=_-X,X<Y){for(Y-=X;I[l++]=w[V++],--X;);V=l-$,B=I}for(;2<Y;)I[l++]=B[V++],I[l++]=B[V++],I[l++]=B[V++],Y-=3;Y&&(I[l++]=B[V++],1<Y&&(I[l++]=B[V++]))}else{for(V=l-$;I[l++]=I[V++],I[l++]=I[V++],I[l++]=I[V++],2<(Y-=3););Y&&(I[l++]=I[V++],1<Y&&(I[l++]=I[V++]))}break}}break}}while(s<a&&l<f);s-=Y=S>>3,b&=(1<<(S-=Y<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<f?f-l+257:257-(l-f),o.hold=b,o.bits=S}},{}],49:[function(n,e,t){"use strict";var r=n("../utils/common"),i=n("./adler32"),o=n("./crc32"),s=n("./inffast"),a=n("./inftrees"),l=1,c=2,f=0,d=-2,y=1,p=852,_=592;function w(V){return(V>>>24&255)+(V>>>8&65280)+((65280&V)<<8)+((255&V)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(V){var B;return V&&V.state?(B=V.state,V.total_in=V.total_out=B.total=0,V.msg="",B.wrap&&(V.adler=1&B.wrap),B.mode=y,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(p),B.distcode=B.distdyn=new r.Buf32(_),B.sane=1,B.back=-1,f):d}function T(V){var B;return V&&V.state?((B=V.state).wsize=0,B.whave=0,B.wnext=0,S(V)):d}function A(V,B){var v,I;return V&&V.state?(I=V.state,B<0?(v=0,B=-B):(v=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?d:(I.window!==null&&I.wbits!==B&&(I.window=null),I.wrap=v,I.wbits=B,T(V))):d}function N(V,B){var v,I;return V?(I=new b,(V.state=I).window=null,(v=A(V,B))!==f&&(V.state=null),v):d}var O,W,X=!0;function Y(V){if(X){var B;for(O=new r.Buf32(512),W=new r.Buf32(32),B=0;B<144;)V.lens[B++]=8;for(;B<256;)V.lens[B++]=9;for(;B<280;)V.lens[B++]=7;for(;B<288;)V.lens[B++]=8;for(a(l,V.lens,0,288,O,0,V.work,{bits:9}),B=0;B<32;)V.lens[B++]=5;a(c,V.lens,0,32,W,0,V.work,{bits:5}),X=!1}V.lencode=O,V.lenbits=9,V.distcode=W,V.distbits=5}function $(V,B,v,I){var M,j=V.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new r.Buf8(j.wsize)),I>=j.wsize?(r.arraySet(j.window,B,v-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(I<(M=j.wsize-j.wnext)&&(M=I),r.arraySet(j.window,B,v-I,M,j.wnext),(I-=M)?(r.arraySet(j.window,B,v-I,I,0),j.wnext=I,j.whave=j.wsize):(j.wnext+=M,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=M))),0}t.inflateReset=T,t.inflateReset2=A,t.inflateResetKeep=S,t.inflateInit=function(V){return N(V,15)},t.inflateInit2=N,t.inflate=function(V,B){var v,I,M,j,Q,Z,q,K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re,Ve,G,be,Ie,U,ae=0,he=new r.Buf8(4),Fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!V||!V.state||!V.output||!V.input&&V.avail_in!==0)return d;(v=V.state).mode===12&&(v.mode=13),Q=V.next_out,M=V.output,q=V.avail_out,j=V.next_in,I=V.input,Z=V.avail_in,K=v.hold,oe=v.bits,_e=Z,F=q,be=f;e:for(;;)switch(v.mode){case y:if(v.wrap===0){v.mode=13;break}for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(2&v.wrap&&K===35615){he[v.check=0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0),oe=K=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&K)<<8)+(K>>8))%31){V.msg="incorrect header check",v.mode=30;break}if((15&K)!=8){V.msg="unknown compression method",v.mode=30;break}if(oe-=4,G=8+(15&(K>>>=4)),v.wbits===0)v.wbits=G;else if(G>v.wbits){V.msg="invalid window size",v.mode=30;break}v.dmax=1<<G,V.adler=v.check=1,v.mode=512&K?10:12,oe=K=0;break;case 2:for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(v.flags=K,(255&v.flags)!=8){V.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){V.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=K>>8&1),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0,v.mode=3;case 3:for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.head&&(v.head.time=K),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,he[2]=K>>>16&255,he[3]=K>>>24&255,v.check=o(v.check,he,4,0)),oe=K=0,v.mode=4;case 4:for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.head&&(v.head.xflags=255&K,v.head.os=K>>8),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0,v.mode=5;case 5:if(1024&v.flags){for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.length=K,v.head&&(v.head.extra_len=K),512&v.flags&&(he[0]=255&K,he[1]=K>>>8&255,v.check=o(v.check,he,2,0)),oe=K=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(Z<(ee=v.length)&&(ee=Z),ee&&(v.head&&(G=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),r.arraySet(v.head.extra,I,j,ee,G)),512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,v.length-=ee),v.length))break e;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(Z===0)break e;for(ee=0;G=I[j+ee++],v.head&&G&&v.length<65536&&(v.head.name+=String.fromCharCode(G)),G&&ee<Z;);if(512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,G)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(Z===0)break e;for(ee=0;G=I[j+ee++],v.head&&G&&v.length<65536&&(v.head.comment+=String.fromCharCode(G)),G&&ee<Z;);if(512&v.flags&&(v.check=o(v.check,I,ee,j)),Z-=ee,j+=ee,G)break e}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;oe<16;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K!==(65535&v.check)){V.msg="header crc mismatch",v.mode=30;break}oe=K=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),V.adler=v.check=0,v.mode=12;break;case 10:for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}V.adler=v.check=w(K),oe=K=0,v.mode=11;case 11:if(v.havedict===0)return V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,2;V.adler=v.check=1,v.mode=12;case 12:if(B===5||B===6)break e;case 13:if(v.last){K>>>=7&oe,oe-=7&oe,v.mode=27;break}for(;oe<3;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}switch(v.last=1&K,oe-=1,3&(K>>>=1)){case 0:v.mode=14;break;case 1:if(Y(v),v.mode=20,B!==6)break;K>>>=2,oe-=2;break e;case 2:v.mode=17;break;case 3:V.msg="invalid block type",v.mode=30}K>>>=2,oe-=2;break;case 14:for(K>>>=7&oe,oe-=7&oe;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if((65535&K)!=(K>>>16^65535)){V.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&K,oe=K=0,v.mode=15,B===6)break e;case 15:v.mode=16;case 16:if(ee=v.length){if(Z<ee&&(ee=Z),q<ee&&(ee=q),ee===0)break e;r.arraySet(M,I,j,ee,Q),Z-=ee,j+=ee,q-=ee,Q+=ee,v.length-=ee;break}v.mode=12;break;case 17:for(;oe<14;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(v.nlen=257+(31&K),K>>>=5,oe-=5,v.ndist=1+(31&K),K>>>=5,oe-=5,v.ncode=4+(15&K),K>>>=4,oe-=4,286<v.nlen||30<v.ndist){V.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;oe<3;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.lens[Fe[v.have++]]=7&K,K>>>=3,oe-=3}for(;v.have<19;)v.lens[Fe[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,Ie={bits:v.lenbits},be=a(0,v.lens,0,19,v.lencode,0,v.work,Ie),v.lenbits=Ie.bits,be){V.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;xe=(ae=v.lencode[K&(1<<v.lenbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(Se<16)K>>>=J,oe-=J,v.lens[v.have++]=Se;else{if(Se===16){for(U=J+2;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K>>>=J,oe-=J,v.have===0){V.msg="invalid bit length repeat",v.mode=30;break}G=v.lens[v.have-1],ee=3+(3&K),K>>>=2,oe-=2}else if(Se===17){for(U=J+3;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}oe-=J,G=0,ee=3+(7&(K>>>=J)),K>>>=3,oe-=3}else{for(U=J+7;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}oe-=J,G=0,ee=11+(127&(K>>>=J)),K>>>=7,oe-=7}if(v.have+ee>v.nlen+v.ndist){V.msg="invalid bit length repeat",v.mode=30;break}for(;ee--;)v.lens[v.have++]=G}}if(v.mode===30)break;if(v.lens[256]===0){V.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,Ie={bits:v.lenbits},be=a(l,v.lens,0,v.nlen,v.lencode,0,v.work,Ie),v.lenbits=Ie.bits,be){V.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,Ie={bits:v.distbits},be=a(c,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,Ie),v.distbits=Ie.bits,be){V.msg="invalid distances set",v.mode=30;break}if(v.mode=20,B===6)break e;case 20:v.mode=21;case 21:if(6<=Z&&258<=q){V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,s(V,F),Q=V.next_out,M=V.output,q=V.avail_out,j=V.next_in,I=V.input,Z=V.avail_in,K=v.hold,oe=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;xe=(ae=v.lencode[K&(1<<v.lenbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(xe&&(240&xe)==0){for(ve=J,re=xe,Ve=Se;xe=(ae=v.lencode[Ve+((K&(1<<ve+re)-1)>>ve)])>>>16&255,Se=65535&ae,!(ve+(J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}K>>>=ve,oe-=ve,v.back+=ve}if(K>>>=J,oe-=J,v.back+=J,v.length=Se,xe===0){v.mode=26;break}if(32&xe){v.back=-1,v.mode=12;break}if(64&xe){V.msg="invalid literal/length code",v.mode=30;break}v.extra=15&xe,v.mode=22;case 22:if(v.extra){for(U=v.extra;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.length+=K&(1<<v.extra)-1,K>>>=v.extra,oe-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;xe=(ae=v.distcode[K&(1<<v.distbits)-1])>>>16&255,Se=65535&ae,!((J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if((240&xe)==0){for(ve=J,re=xe,Ve=Se;xe=(ae=v.distcode[Ve+((K&(1<<ve+re)-1)>>ve)])>>>16&255,Se=65535&ae,!(ve+(J=ae>>>24)<=oe);){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}K>>>=ve,oe-=ve,v.back+=ve}if(K>>>=J,oe-=J,v.back+=J,64&xe){V.msg="invalid distance code",v.mode=30;break}v.offset=Se,v.extra=15&xe,v.mode=24;case 24:if(v.extra){for(U=v.extra;oe<U;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}v.offset+=K&(1<<v.extra)-1,K>>>=v.extra,oe-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){V.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(q===0)break e;if(ee=F-q,v.offset>ee){if((ee=v.offset-ee)>v.whave&&v.sane){V.msg="invalid distance too far back",v.mode=30;break}ce=ee>v.wnext?(ee-=v.wnext,v.wsize-ee):v.wnext-ee,ee>v.length&&(ee=v.length),pe=v.window}else pe=M,ce=Q-v.offset,ee=v.length;for(q<ee&&(ee=q),q-=ee,v.length-=ee;M[Q++]=pe[ce++],--ee;);v.length===0&&(v.mode=21);break;case 26:if(q===0)break e;M[Q++]=v.length,q--,v.mode=21;break;case 27:if(v.wrap){for(;oe<32;){if(Z===0)break e;Z--,K|=I[j++]<<oe,oe+=8}if(F-=q,V.total_out+=F,v.total+=F,F&&(V.adler=v.check=v.flags?o(v.check,M,F,Q-F):i(v.check,M,F,Q-F)),F=q,(v.flags?K:w(K))!==v.check){V.msg="incorrect data check",v.mode=30;break}oe=K=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;oe<32;){if(Z===0)break e;Z--,K+=I[j++]<<oe,oe+=8}if(K!==(4294967295&v.total)){V.msg="incorrect length check",v.mode=30;break}oe=K=0}v.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return d}return V.next_out=Q,V.avail_out=q,V.next_in=j,V.avail_in=Z,v.hold=K,v.bits=oe,(v.wsize||F!==V.avail_out&&v.mode<30&&(v.mode<27||B!==4))&&$(V,V.output,V.next_out,F-V.avail_out)?(v.mode=31,-4):(_e-=V.avail_in,F-=V.avail_out,V.total_in+=_e,V.total_out+=F,v.total+=F,v.wrap&&F&&(V.adler=v.check=v.flags?o(v.check,M,F,V.next_out-F):i(v.check,M,F,V.next_out-F)),V.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(_e==0&&F===0||B===4)&&be===f&&(be=-5),be)},t.inflateEnd=function(V){if(!V||!V.state)return d;var B=V.state;return B.window&&(B.window=null),V.state=null,f},t.inflateGetHeader=function(V,B){var v;return V&&V.state?(2&(v=V.state).wrap)==0?d:((v.head=B).done=!1,f):d},t.inflateSetDictionary=function(V,B){var v,I=B.length;return V&&V.state?(v=V.state).wrap!==0&&v.mode!==11?d:v.mode===11&&i(1,B,I,0)!==v.check?-3:$(V,B,I,I)?(v.mode=31,-4):(v.havedict=1,f):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,e,t){"use strict";var r=n("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(l,c,f,d,y,p,_,w){var b,S,T,A,N,O,W,X,Y,$=w.bits,V=0,B=0,v=0,I=0,M=0,j=0,Q=0,Z=0,q=0,K=0,oe=null,_e=0,F=new r.Buf16(16),ee=new r.Buf16(16),ce=null,pe=0;for(V=0;V<=15;V++)F[V]=0;for(B=0;B<d;B++)F[c[f+B]]++;for(M=$,I=15;1<=I&&F[I]===0;I--);if(I<M&&(M=I),I===0)return y[p++]=20971520,y[p++]=20971520,w.bits=1,0;for(v=1;v<I&&F[v]===0;v++);for(M<v&&(M=v),V=Z=1;V<=15;V++)if(Z<<=1,(Z-=F[V])<0)return-1;if(0<Z&&(l===0||I!==1))return-1;for(ee[1]=0,V=1;V<15;V++)ee[V+1]=ee[V]+F[V];for(B=0;B<d;B++)c[f+B]!==0&&(_[ee[c[f+B]]++]=B);if(O=l===0?(oe=ce=_,19):l===1?(oe=i,_e-=257,ce=o,pe-=257,256):(oe=s,ce=a,-1),V=v,N=p,Q=B=K=0,T=-1,A=(q=1<<(j=M))-1,l===1&&852<q||l===2&&592<q)return 1;for(;;){for(W=V-Q,Y=_[B]<O?(X=0,_[B]):_[B]>O?(X=ce[pe+_[B]],oe[_e+_[B]]):(X=96,0),b=1<<V-Q,v=S=1<<j;y[N+(K>>Q)+(S-=b)]=W<<24|X<<16|Y|0,S!==0;);for(b=1<<V-1;K&b;)b>>=1;if(b!==0?(K&=b-1,K+=b):K=0,B++,--F[V]==0){if(V===I)break;V=c[f+_[B]]}if(M<V&&(K&A)!==T){for(Q===0&&(Q=M),N+=v,Z=1<<(j=V-Q);j+Q<I&&!((Z-=F[j+Q])<=0);)j++,Z<<=1;if(q+=1<<j,l===1&&852<q||l===2&&592<q)return 1;y[T=K&A]=M<<24|j<<16|N-p|0}}return K!==0&&(y[N+K]=V-Q<<24|64<<16|0),w.bits=M,0}},{"../utils/common":41}],51:[function(n,e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,e,t){"use strict";var r=n("../utils/common"),i=0,o=1;function s(ae){for(var he=ae.length;0<=--he;)ae[he]=0}var a=0,l=29,c=256,f=c+1+l,d=30,y=19,p=2*f+1,_=15,w=16,b=7,S=256,T=16,A=17,N=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(f+2));s($);var V=new Array(2*d);s(V);var B=new Array(512);s(B);var v=new Array(256);s(v);var I=new Array(l);s(I);var M,j,Q,Z=new Array(d);function q(ae,he,Fe,Ce,we){this.static_tree=ae,this.extra_bits=he,this.extra_base=Fe,this.elems=Ce,this.max_length=we,this.has_stree=ae&&ae.length}function K(ae,he){this.dyn_tree=ae,this.max_code=0,this.stat_desc=he}function oe(ae){return ae<256?B[ae]:B[256+(ae>>>7)]}function _e(ae,he){ae.pending_buf[ae.pending++]=255&he,ae.pending_buf[ae.pending++]=he>>>8&255}function F(ae,he,Fe){ae.bi_valid>w-Fe?(ae.bi_buf|=he<<ae.bi_valid&65535,_e(ae,ae.bi_buf),ae.bi_buf=he>>w-ae.bi_valid,ae.bi_valid+=Fe-w):(ae.bi_buf|=he<<ae.bi_valid&65535,ae.bi_valid+=Fe)}function ee(ae,he,Fe){F(ae,Fe[2*he],Fe[2*he+1])}function ce(ae,he){for(var Fe=0;Fe|=1&ae,ae>>>=1,Fe<<=1,0<--he;);return Fe>>>1}function pe(ae,he,Fe){var Ce,we,Ue=new Array(_+1),Le=0;for(Ce=1;Ce<=_;Ce++)Ue[Ce]=Le=Le+Fe[Ce-1]<<1;for(we=0;we<=he;we++){var Be=ae[2*we+1];Be!==0&&(ae[2*we]=ce(Ue[Be]++,Be))}}function J(ae){var he;for(he=0;he<f;he++)ae.dyn_ltree[2*he]=0;for(he=0;he<d;he++)ae.dyn_dtree[2*he]=0;for(he=0;he<y;he++)ae.bl_tree[2*he]=0;ae.dyn_ltree[2*S]=1,ae.opt_len=ae.static_len=0,ae.last_lit=ae.matches=0}function xe(ae){8<ae.bi_valid?_e(ae,ae.bi_buf):0<ae.bi_valid&&(ae.pending_buf[ae.pending++]=ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0}function Se(ae,he,Fe,Ce){var we=2*he,Ue=2*Fe;return ae[we]<ae[Ue]||ae[we]===ae[Ue]&&Ce[he]<=Ce[Fe]}function ve(ae,he,Fe){for(var Ce=ae.heap[Fe],we=Fe<<1;we<=ae.heap_len&&(we<ae.heap_len&&Se(he,ae.heap[we+1],ae.heap[we],ae.depth)&&we++,!Se(he,Ce,ae.heap[we],ae.depth));)ae.heap[Fe]=ae.heap[we],Fe=we,we<<=1;ae.heap[Fe]=Ce}function re(ae,he,Fe){var Ce,we,Ue,Le,Be=0;if(ae.last_lit!==0)for(;Ce=ae.pending_buf[ae.d_buf+2*Be]<<8|ae.pending_buf[ae.d_buf+2*Be+1],we=ae.pending_buf[ae.l_buf+Be],Be++,Ce===0?ee(ae,we,he):(ee(ae,(Ue=v[we])+c+1,he),(Le=O[Ue])!==0&&F(ae,we-=I[Ue],Le),ee(ae,Ue=oe(--Ce),Fe),(Le=W[Ue])!==0&&F(ae,Ce-=Z[Ue],Le)),Be<ae.last_lit;);ee(ae,S,he)}function Ve(ae,he){var Fe,Ce,we,Ue=he.dyn_tree,Le=he.stat_desc.static_tree,Be=he.stat_desc.has_stree,ft=he.stat_desc.elems,It=-1;for(ae.heap_len=0,ae.heap_max=p,Fe=0;Fe<ft;Fe++)Ue[2*Fe]!==0?(ae.heap[++ae.heap_len]=It=Fe,ae.depth[Fe]=0):Ue[2*Fe+1]=0;for(;ae.heap_len<2;)Ue[2*(we=ae.heap[++ae.heap_len]=It<2?++It:0)]=1,ae.depth[we]=0,ae.opt_len--,Be&&(ae.static_len-=Le[2*we+1]);for(he.max_code=It,Fe=ae.heap_len>>1;1<=Fe;Fe--)ve(ae,Ue,Fe);for(we=ft;Fe=ae.heap[1],ae.heap[1]=ae.heap[ae.heap_len--],ve(ae,Ue,1),Ce=ae.heap[1],ae.heap[--ae.heap_max]=Fe,ae.heap[--ae.heap_max]=Ce,Ue[2*we]=Ue[2*Fe]+Ue[2*Ce],ae.depth[we]=(ae.depth[Fe]>=ae.depth[Ce]?ae.depth[Fe]:ae.depth[Ce])+1,Ue[2*Fe+1]=Ue[2*Ce+1]=we,ae.heap[1]=we++,ve(ae,Ue,1),2<=ae.heap_len;);ae.heap[--ae.heap_max]=ae.heap[1],(function(qe,Vt){var vt,Ke,Zt,ht,Rr,pt,Yt=Vt.dyn_tree,ln=Vt.max_code,hr=Vt.stat_desc.static_tree,Tt=Vt.stat_desc.has_stree,ir=Vt.stat_desc.extra_bits,Dt=Vt.stat_desc.extra_base,Gt=Vt.stat_desc.max_length,Fn=0;for(ht=0;ht<=_;ht++)qe.bl_count[ht]=0;for(Yt[2*qe.heap[qe.heap_max]+1]=0,vt=qe.heap_max+1;vt<p;vt++)Gt<(ht=Yt[2*Yt[2*(Ke=qe.heap[vt])+1]+1]+1)&&(ht=Gt,Fn++),Yt[2*Ke+1]=ht,ln<Ke||(qe.bl_count[ht]++,Rr=0,Dt<=Ke&&(Rr=ir[Ke-Dt]),pt=Yt[2*Ke],qe.opt_len+=pt*(ht+Rr),Tt&&(qe.static_len+=pt*(hr[2*Ke+1]+Rr)));if(Fn!==0){do{for(ht=Gt-1;qe.bl_count[ht]===0;)ht--;qe.bl_count[ht]--,qe.bl_count[ht+1]+=2,qe.bl_count[Gt]--,Fn-=2}while(0<Fn);for(ht=Gt;ht!==0;ht--)for(Ke=qe.bl_count[ht];Ke!==0;)ln<(Zt=qe.heap[--vt])||(Yt[2*Zt+1]!==ht&&(qe.opt_len+=(ht-Yt[2*Zt+1])*Yt[2*Zt],Yt[2*Zt+1]=ht),Ke--)}})(ae,he),pe(Ue,It,ae.bl_count)}function G(ae,he,Fe){var Ce,we,Ue=-1,Le=he[1],Be=0,ft=7,It=4;for(Le===0&&(ft=138,It=3),he[2*(Fe+1)+1]=65535,Ce=0;Ce<=Fe;Ce++)we=Le,Le=he[2*(Ce+1)+1],++Be<ft&&we===Le||(Be<It?ae.bl_tree[2*we]+=Be:we!==0?(we!==Ue&&ae.bl_tree[2*we]++,ae.bl_tree[2*T]++):Be<=10?ae.bl_tree[2*A]++:ae.bl_tree[2*N]++,Ue=we,It=(Be=0)===Le?(ft=138,3):we===Le?(ft=6,3):(ft=7,4))}function be(ae,he,Fe){var Ce,we,Ue=-1,Le=he[1],Be=0,ft=7,It=4;for(Le===0&&(ft=138,It=3),Ce=0;Ce<=Fe;Ce++)if(we=Le,Le=he[2*(Ce+1)+1],!(++Be<ft&&we===Le)){if(Be<It)for(;ee(ae,we,ae.bl_tree),--Be!=0;);else we!==0?(we!==Ue&&(ee(ae,we,ae.bl_tree),Be--),ee(ae,T,ae.bl_tree),F(ae,Be-3,2)):Be<=10?(ee(ae,A,ae.bl_tree),F(ae,Be-3,3)):(ee(ae,N,ae.bl_tree),F(ae,Be-11,7));Ue=we,It=(Be=0)===Le?(ft=138,3):we===Le?(ft=6,3):(ft=7,4)}}s(Z);var Ie=!1;function U(ae,he,Fe,Ce){F(ae,(a<<1)+(Ce?1:0),3),(function(we,Ue,Le,Be){xe(we),Be&&(_e(we,Le),_e(we,~Le)),r.arraySet(we.pending_buf,we.window,Ue,Le,we.pending),we.pending+=Le})(ae,he,Fe,!0)}t._tr_init=function(ae){Ie||((function(){var he,Fe,Ce,we,Ue,Le=new Array(_+1);for(we=Ce=0;we<l-1;we++)for(I[we]=Ce,he=0;he<1<<O[we];he++)v[Ce++]=we;for(v[Ce-1]=we,we=Ue=0;we<16;we++)for(Z[we]=Ue,he=0;he<1<<W[we];he++)B[Ue++]=we;for(Ue>>=7;we<d;we++)for(Z[we]=Ue<<7,he=0;he<1<<W[we]-7;he++)B[256+Ue++]=we;for(Fe=0;Fe<=_;Fe++)Le[Fe]=0;for(he=0;he<=143;)$[2*he+1]=8,he++,Le[8]++;for(;he<=255;)$[2*he+1]=9,he++,Le[9]++;for(;he<=279;)$[2*he+1]=7,he++,Le[7]++;for(;he<=287;)$[2*he+1]=8,he++,Le[8]++;for(pe($,f+1,Le),he=0;he<d;he++)V[2*he+1]=5,V[2*he]=ce(he,5);M=new q($,O,c+1,f,_),j=new q(V,W,0,d,_),Q=new q(new Array(0),X,0,y,b)})(),Ie=!0),ae.l_desc=new K(ae.dyn_ltree,M),ae.d_desc=new K(ae.dyn_dtree,j),ae.bl_desc=new K(ae.bl_tree,Q),ae.bi_buf=0,ae.bi_valid=0,J(ae)},t._tr_stored_block=U,t._tr_flush_block=function(ae,he,Fe,Ce){var we,Ue,Le=0;0<ae.level?(ae.strm.data_type===2&&(ae.strm.data_type=(function(Be){var ft,It=4093624447;for(ft=0;ft<=31;ft++,It>>>=1)if(1&It&&Be.dyn_ltree[2*ft]!==0)return i;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return o;for(ft=32;ft<c;ft++)if(Be.dyn_ltree[2*ft]!==0)return o;return i})(ae)),Ve(ae,ae.l_desc),Ve(ae,ae.d_desc),Le=(function(Be){var ft;for(G(Be,Be.dyn_ltree,Be.l_desc.max_code),G(Be,Be.dyn_dtree,Be.d_desc.max_code),Ve(Be,Be.bl_desc),ft=y-1;3<=ft&&Be.bl_tree[2*Y[ft]+1]===0;ft--);return Be.opt_len+=3*(ft+1)+5+5+4,ft})(ae),we=ae.opt_len+3+7>>>3,(Ue=ae.static_len+3+7>>>3)<=we&&(we=Ue)):we=Ue=Fe+5,Fe+4<=we&&he!==-1?U(ae,he,Fe,Ce):ae.strategy===4||Ue===we?(F(ae,2+(Ce?1:0),3),re(ae,$,V)):(F(ae,4+(Ce?1:0),3),(function(Be,ft,It,qe){var Vt;for(F(Be,ft-257,5),F(Be,It-1,5),F(Be,qe-4,4),Vt=0;Vt<qe;Vt++)F(Be,Be.bl_tree[2*Y[Vt]+1],3);be(Be,Be.dyn_ltree,ft-1),be(Be,Be.dyn_dtree,It-1)})(ae,ae.l_desc.max_code+1,ae.d_desc.max_code+1,Le+1),re(ae,ae.dyn_ltree,ae.dyn_dtree)),J(ae),Ce&&xe(ae)},t._tr_tally=function(ae,he,Fe){return ae.pending_buf[ae.d_buf+2*ae.last_lit]=he>>>8&255,ae.pending_buf[ae.d_buf+2*ae.last_lit+1]=255&he,ae.pending_buf[ae.l_buf+ae.last_lit]=255&Fe,ae.last_lit++,he===0?ae.dyn_ltree[2*Fe]++:(ae.matches++,he--,ae.dyn_ltree[2*(v[Fe]+c+1)]++,ae.dyn_dtree[2*oe(he)]++),ae.last_lit===ae.lit_bufsize-1},t._tr_align=function(ae){F(ae,2,3),ee(ae,S,$),(function(he){he.bi_valid===16?(_e(he,he.bi_buf),he.bi_buf=0,he.bi_valid=0):8<=he.bi_valid&&(he.pending_buf[he.pending++]=255&he.bi_buf,he.bi_buf>>=8,he.bi_valid-=8)})(ae)}},{"../utils/common":41}],53:[function(n,e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,e,t){(function(r){(function(i,o){"use strict";if(!i.setImmediate){var s,a,l,c,f=1,d={},y=!1,p=i.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(i);_=_&&_.setTimeout?_:i,s={}.toString.call(i.process)==="[object process]"?function(T){process.nextTick(function(){b(T)})}:(function(){if(i.postMessage&&!i.importScripts){var T=!0,A=i.onmessage;return i.onmessage=function(){T=!1},i.postMessage("","*"),i.onmessage=A,T}})()?(c="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",S,!1):i.attachEvent("onmessage",S),function(T){i.postMessage(c+T,"*")}):i.MessageChannel?((l=new MessageChannel).port1.onmessage=function(T){b(T.data)},function(T){l.port2.postMessage(T)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,function(T){var A=p.createElement("script");A.onreadystatechange=function(){b(T),A.onreadystatechange=null,a.removeChild(A),A=null},a.appendChild(A)}):function(T){setTimeout(b,0,T)},_.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var A=new Array(arguments.length-1),N=0;N<A.length;N++)A[N]=arguments[N+1];var O={callback:T,args:A};return d[f]=O,s(f),f++},_.clearImmediate=w}function w(T){delete d[T]}function b(T){if(y)setTimeout(b,0,T);else{var A=d[T];if(A){y=!0;try{(function(N){var O=N.callback,W=N.args;switch(W.length){case 0:O();break;case 1:O(W[0]);break;case 2:O(W[0],W[1]);break;case 3:O(W[0],W[1],W[2]);break;default:O.apply(o,W)}})(A)}finally{w(T),y=!1}}}}function S(T){T.source===i&&typeof T.data=="string"&&T.data.indexOf(c)===0&&b(+T.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var mk=gr((RQe,YH)=>{"use strict";YH.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}});var yk=gr((MQe,XH)=>{"use strict";XH.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}});var ZH=gr((NQe,oC)=>{"use strict";oC.exports.lpad=function(e,t,r){for(;e.length<t;)e=r+e;return e};oC.exports.rpad=function(e,t,r){for(;e.length<t;)e=e+r;return e};oC.exports.writeField=function(e,t,r,i){for(var o=0;o<t;o++)e.setUint8(i,r.charCodeAt(o)),i++;return i}});var JH=gr((PQe,sC)=>{"use strict";var Ege=yk(),bge={string:"C",number:"N",boolean:"L",null:"C"};sC.exports.multi=Sge;sC.exports.bytesPer=Ige;sC.exports.obj=KH;function Sge(n){var e={};n.forEach(t);function t(r){Cge(e,r)}return KH(e)}function Cge(n,e){for(var t in e){var r=typeof e[t]<"u"&&e[t]!==null;(typeof n[t]>"u"||r)&&(n[t]=e[t])}return n}function KH(n){var e={},t=[];for(var r in n)e[r]=n[r]===null?"null":typeof n[r];for(var i in e){var o=bge[e[i]];o&&t.push({name:i,type:o,size:Ege[o]})}return t}function Ige(n){return n.reduce(function(e,t){return e+t.size},1)}});var tq=gr((kQe,eq)=>{"use strict";var LQe=yk(),Cy=ZH(),QH=JH();eq.exports=function(e,t){var r=t||QH.multi(e),i=32*r.length+1,o=QH.bytesPer(r),s=new ArrayBuffer(i+32+o*e.length+1),a=new Date,l=new DataView(s);l.setUint8(0,3),l.setUint8(1,a.getFullYear()-1900),l.setUint8(2,a.getMonth()+1),l.setUint8(3,a.getDate()),l.setUint32(4,e.length,!0);var c=i+32;l.setUint16(8,c,!0),l.setUint16(10,o,!0),l.setInt8(32+i-1,13),r.forEach(function(d,y){d.name.split("").slice(0,10).forEach(function(p,_){l.setInt8(32+y*32+_,p.charCodeAt(0))}),l.setInt8(32+y*32+11,d.type.charCodeAt(0)),l.setInt8(32+y*32+16,d.size),d.type=="N"&&l.setInt8(32+y*32+17,3)});var f=i+32;return e.forEach(function(d,y){l.setUint8(f,32),f++,r.forEach(function(p){var _=d[p.name];switch((_===null||typeof _>"u")&&(_=""),p.type){case"L":l.setUint8(f,_?84:70),f++;break;case"D":f=Cy.writeField(l,8,Cy.lpad(_.toString(),8," "),f);break;case"N":f=Cy.writeField(l,p.size,Cy.lpad(_.toString(),p.size," ").substr(0,18),f);break;case"C":f=Cy.writeField(l,p.size,Cy.rpad(_.toString(),p.size," "),f);break;default:throw new Error("Unknown field type")}})}),l.setUint8(f,26),l}});var rq=gr((OQe,nq)=>{"use strict";nq.exports.structure=tq()});var _k=gr((FQe,iq)=>{"use strict";iq.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'});var vk=gr((BQe,aC)=>{"use strict";aC.exports.enlarge=function(e,t){return t[0]<e.xmin&&(e.xmin=t[0]),t[0]>e.xmax&&(e.xmax=t[0]),t[1]<e.ymin&&(e.ymin=t[1]),t[1]>e.ymax&&(e.ymax=t[1]),e};aC.exports.enlargeExtent=function(e,t){return t.xmax>e.xmax&&(e.xmax=t.xmax),t.xmin<e.xmin&&(e.xmin=t.xmin),t.ymax>e.ymax&&(e.ymax=t.ymax),t.ymin<e.ymin&&(e.ymin=t.ymin),e};aC.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}});var sq=gr((jQe,Iy)=>{"use strict";var oq=vk();Iy.exports.write=function(e,t,r,i){var o=28,s=100,a=0,l=0;e.forEach(function(f,d){r.setInt32(a,d+1),r.setInt32(a+4,10),r.setInt32(a+8,1,!0),r.setFloat64(a+12,f[0],!0),r.setFloat64(a+20,f[1],!0),i.setInt32(l,s/2),i.setInt32(l+4,10),l+=8,a+=o,s+=o})};Iy.exports.extent=function(n){return n.reduce(function(e,t){return oq.enlarge(e,t)},oq.blank())};Iy.exports.parts=function(e,t){return e.length};Iy.exports.shxLength=function(n){return n.length*8};Iy.exports.shpLength=function(n){return n.length*28}});var uq=gr((UQe,Ty)=>{"use strict";var lC=vk(),aq=mk();Ty.exports.write=function(e,t,r,i,o){var s=0,a=0,l=100;e.forEach(c);function c(f,d){var y=uC(f),p=lq([f],o),_=y.length*16+48+(p-1)*4,w=y.reduce(function(T,A){return lC.enlarge(T,A)},lC.blank());i.setInt32(a,l/2),i.setInt32(a+4,_/2),a+=8,l+=_+8,r.setInt32(s,d+1),r.setInt32(s+4,_/2),r.setInt32(s+8,o,!0),r.setFloat64(s+12,w.xmin,!0),r.setFloat64(s+20,w.ymin,!0),r.setFloat64(s+28,w.xmax,!0),r.setFloat64(s+36,w.ymax,!0),r.setInt32(s+44,p,!0),r.setInt32(s+48,y.length,!0),r.setInt32(s+52,0,!0);for(var b=f.reduce(function(T,A){return Array.isArray(A[0][0])?T=T.concat(A):T.push(A),T},[]),S=1;S<p;S++)r.setInt32(s+52+S*4,b.reduce(function(T,A,N){return N<S?T+A.length:T},0),!0);y.forEach(function(A,N){r.setFloat64(s+56+N*16+(p-1)*4,A[0],!0),r.setFloat64(s+56+N*16+(p-1)*4+8,A[1],!0)}),s+=_+8}};Ty.exports.shpLength=function(n){return n.length*56+uC(n).length*16};Ty.exports.shxLength=function(n){return n.length*8};Ty.exports.extent=function(n){return uC(n).reduce(function(e,t){return lC.enlarge(e,t)},lC.blank())};function lq(n,e){var t=1;return(e===aq.geometries.POLYGON||e===aq.geometries.POLYLINE)&&(t=n.reduce(function(r,i){return r+=i.length,Array.isArray(i[0][0][0])&&(r+=i.reduce(function(o,s){return o+s.length-1},0)),r},0)),t}Ty.exports.parts=lq;function uC(n,e){return e===void 0&&(e=[]),typeof n[0][0]=="object"?n.reduce(function(t,r){return t.concat(uC(r))},e):n}});var xk=gr((GQe,dq)=>{"use strict";var Tge=mk(),Dge=rq(),Age=_k(),Rge=sq(),cq=uq(),Mge={1:Rge,5:cq,3:cq};dq.exports=Nge;function Nge(n,e,t,r){var i=Tge.geometries[e],o=Mge[i],s=o.parts(t,i),a=100+(s-t.length)*4+o.shpLength(t),l=100+o.shxLength(t),c=new ArrayBuffer(a),f=new DataView(c),d=new ArrayBuffer(l),y=new DataView(d),p=o.extent(t);hq(f,i),hq(y,i),fq(p,f),fq(p,y),o.write(t,p,new DataView(c,100),new DataView(d,100),i),f.setInt32(24,a/2),y.setInt32(24,50+t.length*4);var _=Dge.structure(n);r(null,{shp:f,shx:y,dbf:_,prj:Age})}function hq(n,e){n.setInt32(0,9994),n.setInt32(28,1e3,!0),n.setInt32(32,e,!0)}function fq(n,e){e.setFloat64(36,n.xmin,!0),e.setFloat64(44,n.ymin,!0),e.setFloat64(52,n.xmax,!0),e.setFloat64(60,n.ymax,!0)}});var gq=gr((zQe,Dy)=>{"use strict";Dy.exports.point=tx("Point","POINT");Dy.exports.line=tx("LineString","POLYLINE");Dy.exports.multiline=tx("MultiLineString","POLYLINE");Dy.exports.polygon=tx("Polygon","POLYGON");Dy.exports.multipolygon=tx("MultiPolygon","POLYGON");function tx(n,e){return function(t){var r=t.features.filter(Lge(n));return{geometries:e==="POLYLINE"?[r.map(pq)]:r.map(pq),properties:r.map(Pge),type:e}}}function pq(n){return n.geometry.coordinates}function Pge(n){return n.properties}function Lge(n){return Array.isArray(n)?function(e){return n.includes(e.geometry.type)}:function(e){return e.geometry.type===n}}});var wk=gr((VQe,mq)=>{"use strict";var kge=xk(),nx=gq(),Oge=_k(),Fge=ok();mq.exports=function(n,e,t=!1){let r=new Fge,i=r;e&&e.folder&&(i=r.folder(e.folder));var o=e&&e.prj?e.prj:Oge;[nx.point(n),nx.line(n),nx.polygon(n),nx.multipolygon(n),nx.multiline(n)].forEach(function(a){a.geometries.length&&a.geometries[0].length&&kge(a.properties,a.type,a.geometries,function(l,c){var f=e&&e.types&&e.types[a.type.toLowerCase()]?e.types[a.type.toLowerCase()]:a.type;i.file(f+".shp",c.shp.buffer,{binary:!0}),i.file(f+".shx",c.shx.buffer,{binary:!0}),i.file(f+".dbf",c.dbf.buffer,{binary:!0}),i.file(f+".prj",o)})});var s={};return!e||!e.outputType?s.type="base64":s.type=e.outputType,!e||!e.compression?s.compression="DEFLATE":s.compression=e.compression,t?r.generateNodeStream(tn(dt({},s),{streamFiles:!0})):r.generateAsync(s)}});var yq=gr((Ek,bk)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof Ek<"u"?e():(e(),n.FileSaver={})})(Ek,function(){"use strict";function n(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,c){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,c)},f.onerror=function(){console.error("could not download file")},f.send()}function t(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(a,l,c){var f=i.URL||i.webkitURL,d=document.createElement("a");l=l||a.name||"download",d.download=l,d.rel="noopener",typeof a=="string"?(d.href=a,d.origin===location.origin?r(d):t(d.href)?e(a,l,c):r(d,d.target="_blank")):(d.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(d.href)},4e4),setTimeout(function(){r(d)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(n(a,c),l);else if(t(a))e(a,l,c);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){r(f)})}}:function(a,l,c,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,c);var d=a.type==="application/octet-stream",y=/constructor/i.test(i.HTMLElement)||i.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&y||o)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var S=_.result;S=p?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=S:location=S,f=null},_.readAsDataURL(a)}else{var w=i.URL||i.webkitURL,b=w.createObjectURL(a);f?f.location=b:location.href=b,f=null,setTimeout(function(){w.revokeObjectURL(b)},4e4)}});i.saveAs=s.saveAs=s,typeof bk<"u"&&(bk.exports=s)})});var vq=gr((qQe,_q)=>{"use strict";var Bge=wk(),jge=yq().saveAs;_q.exports=function(n,e){let t="download";e&&(e.filename||e.folder)&&(t=e.filename||e.folder),Bge(n,e).then(function(r){jge(r,t+".zip")})}});var xq=gr((WQe,cC)=>{"use strict";cC.exports.download=vq();cC.exports.write=xk();cC.exports.zip=wk()});var m$=gr((xO,wO)=>{"use strict";(function(n,e){typeof xO=="object"&&typeof wO<"u"?wO.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self).jsts=e()})(xO,function(){"use strict";function n(m,u){(u==null||u>m.length)&&(u=m.length);for(var h=0,g=Array(u);h<u;h++)g[h]=m[h];return g}function e(m,u,h){return u=l(u),(function(g,x){if(x&&(typeof x=="object"||typeof x=="function"))return x;if(x!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D})(g)})(m,f()?Reflect.construct(u,h||[],l(m).constructor):u.apply(m,h))}function t(m,u){if(!(m instanceof u))throw new TypeError("Cannot call a class as a function")}function r(m,u,h){if(f())return Reflect.construct.apply(null,arguments);var g=[null];g.push.apply(g,u);var x=new(m.bind.apply(m,g));return h&&d(x,h.prototype),x}function i(m,u){for(var h=0;h<u.length;h++){var g=u[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(m,_(g.key),g)}}function o(m,u,h){return u&&i(m.prototype,u),h&&i(m,h),Object.defineProperty(m,"prototype",{writable:!1}),m}function s(m,u){var h=typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(!h){if(Array.isArray(m)||(h=w(m))||u){h&&(m=h);var g=0,x=function(){};return{s:x,n:function(){return g>=m.length?{done:!0}:{done:!1,value:m[g++]}},e:function(ie){throw ie},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var D,k=!0,H=!1;return{s:function(){h=h.call(m)},n:function(){var ie=h.next();return k=ie.done,ie},e:function(ie){H=!0,D=ie},f:function(){try{k||h.return==null||h.return()}finally{if(H)throw D}}}}function a(){return a=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(m,u,h){var g=(function(D,k){for(;!{}.hasOwnProperty.call(D,k)&&(D=l(D))!==null;);return D})(m,u);if(g){var x=Object.getOwnPropertyDescriptor(g,u);return x.get?x.get.call(arguments.length<3?m:h):x.value}},a.apply(null,arguments)}function l(m){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(u){return u.__proto__||Object.getPrototypeOf(u)},l(m)}function c(m,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(u&&u.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),Object.defineProperty(m,"prototype",{writable:!1}),u&&d(m,u)}function f(){try{var m=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f=function(){return!!m})()}function d(m,u){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},d(m,u)}function y(m,u,h,g){var x=a(l(1&g?m.prototype:m),u,h);return 2&g&&typeof x=="function"?function(D){return x.apply(h,D)}:x}function p(m){return(function(u){if(Array.isArray(u))return n(u)})(m)||(function(u){if(typeof Symbol<"u"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)})(m)||w(m)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function _(m){var u=(function(h,g){if(typeof h!="object"||!h)return h;var x=h[Symbol.toPrimitive];if(x!==void 0){var D=x.call(h,g);if(typeof D!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)})(m,"string");return typeof u=="symbol"?u:u+""}function w(m,u){if(m){if(typeof m=="string")return n(m,u);var h={}.toString.call(m).slice(8,-1);return h==="Object"&&m.constructor&&(h=m.constructor.name),h==="Map"||h==="Set"?Array.from(m):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?n(m,u):void 0}}function b(m){var u=typeof Map=="function"?new Map:void 0;return b=function(h){if(h===null||!(function(x){try{return Function.toString.call(x).indexOf("[native code]")!==-1}catch{return typeof x=="function"}})(h))return h;if(typeof h!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(h))return u.get(h);u.set(h,g)}function g(){return r(h,arguments,l(this).constructor)}return g.prototype=Object.create(h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),d(g,h)},b(m)}var S=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getEndCapStyle",value:function(){return this._endCapStyle}},{key:"isSingleSided",value:function(){return this._isSingleSided}},{key:"setQuadrantSegments",value:function(u){this._quadrantSegments=u,this._quadrantSegments===0&&(this._joinStyle=m.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=m.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),u<=0&&(this._quadrantSegments=1),this._joinStyle!==m.JOIN_ROUND&&(this._quadrantSegments=m.DEFAULT_QUADRANT_SEGMENTS)}},{key:"getJoinStyle",value:function(){return this._joinStyle}},{key:"setJoinStyle",value:function(u){this._joinStyle=u}},{key:"setSimplifyFactor",value:function(u){this._simplifyFactor=u<0?0:u}},{key:"getSimplifyFactor",value:function(){return this._simplifyFactor}},{key:"getQuadrantSegments",value:function(){return this._quadrantSegments}},{key:"setEndCapStyle",value:function(u){this._endCapStyle=u}},{key:"getMitreLimit",value:function(){return this._mitreLimit}},{key:"setMitreLimit",value:function(u){this._mitreLimit=u}},{key:"setSingleSided",value:function(u){this._isSingleSided=u}}],[{key:"constructor_",value:function(){if(this._quadrantSegments=m.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=m.CAP_ROUND,this._joinStyle=m.JOIN_ROUND,this._mitreLimit=m.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=m.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var u=arguments[0];this.setQuadrantSegments(u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.setQuadrantSegments(h),this.setEndCapStyle(g)}else if(arguments.length===4){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3];this.setQuadrantSegments(x),this.setEndCapStyle(D),this.setJoinStyle(k),this.setMitreLimit(H)}}}},{key:"bufferDistanceError",value:function(u){var h=Math.PI/2/u;return 1-Math.cos(h/2)}}])})();S.CAP_ROUND=1,S.CAP_FLAT=2,S.CAP_SQUARE=3,S.JOIN_ROUND=1,S.JOIN_MITRE=2,S.JOIN_BEVEL=3,S.DEFAULT_QUADRANT_SEGMENTS=8,S.DEFAULT_MITRE_LIMIT=5,S.DEFAULT_SIMPLIFY_FACTOR=.01;var T=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({Exception:u})[0],g}return c(u,m),o(u,[{key:"toString",value:function(){return this.message}}])})(b(Error)),A=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({IllegalArgumentException:u})[0],g}return c(u,m),o(u)})(T),N=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})();function O(){}function W(){}function X(){}var Y,$,V,B,v,I,M,j,Q=(function(){return o(function m(){t(this,m)},null,[{key:"equalsWithTolerance",value:function(m,u,h){return Math.abs(m-u)<=h}}])})(),Z=(function(){return o(function m(u,h){t(this,m),this.low=h||0,this.high=u||0},null,[{key:"toBinaryString",value:function(m){var u,h="";for(u=2147483648;u>0;u>>>=1)h+=(m.high&u)===u?"1":"0";for(u=2147483648;u>0;u>>>=1)h+=(m.low&u)===u?"1":"0";return h}}])})();function q(){}function K(){}q.NaN=NaN,q.isNaN=function(m){return Number.isNaN(m)},q.isInfinite=function(m){return!Number.isFinite(m)},q.MAX_VALUE=Number.MAX_VALUE,q.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,q.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,typeof Float64Array=="function"&&typeof Int32Array=="function"?(I=2146435072,M=new Float64Array(1),j=new Int32Array(M.buffer),q.doubleToLongBits=function(m){M[0]=m;var u=0|j[0],h=0|j[1];return(h&I)===I&&1048575&h&&u!==0&&(u=0,h=2146959360),new Z(h,u)},q.longBitsToDouble=function(m){return j[0]=m.low,j[1]=m.high,M[0]}):(Y=1023,$=Math.log2,V=Math.floor,B=Math.pow,v=(function(){for(var m=53;m>0;m--){var u=B(2,m)-1;if(V($(u))+1===m)return u}return 0})(),q.doubleToLongBits=function(m){var u,h,g,x,D,k,H,ie,de;if(m<0||1/m===Number.NEGATIVE_INFINITY?(k=1<<31,m=-m):k=0,m===0)return new Z(ie=k,de=0);if(m===1/0)return new Z(ie=2146435072|k,de=0);if(m!=m)return new Z(ie=2146959360,de=0);if(x=0,de=0,(u=V(m))>1)if(u<=v)(x=V($(u)))<=20?(de=0,ie=u<<20-x&1048575):(de=u%(h=B(2,g=x-20))<<32-g,ie=u/h&1048575);else for(g=u,de=0;(g=V(h=g/2))!==0;)x++,de>>>=1,de|=(1&ie)<<31,ie>>>=1,h!==g&&(ie|=524288);if(H=x+Y,D=u===0,u=m-u,x<52&&u!==0)for(g=0;;){if((h=2*u)>=1?(u=h-1,D?(H--,D=!1):(g<<=1,g|=1,x++)):(u=h,D?--H==0&&(x++,D=!1):(g<<=1,x++)),x===20)ie|=g,g=0;else if(x===52){de|=g;break}if(h===1){x<20?ie|=g<<20-x:x<52&&(de|=g<<52-x);break}}return ie|=H<<20,new Z(ie|=k,de)},q.longBitsToDouble=function(m){var u,h,g,x,D=m.high,k=m.low,H=D&1<<31?-1:1;for(g=((2146435072&D)>>20)-Y,x=0,h=1<<19,u=1;u<=20;u++)D&h&&(x+=B(2,-u)),h>>>=1;for(h=1<<31,u=21;u<=52;u++)k&h&&(x+=B(2,-u)),h>>>=1;if(g===-1023){if(x===0)return 0*H;g=-1022}else{if(g===1024)return x===0?H/0:NaN;x+=1}return H*x*B(2,g)});var oe=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({RuntimeException:u})[0],g}return c(u,m),o(u)})(T),_e=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,null,[{key:"constructor_",value:function(){if(arguments.length===0)oe.constructor_.call(this);else if(arguments.length===1){var h=arguments[0];oe.constructor_.call(this,h)}}}])})(oe),F=(function(){function m(){t(this,m)}return o(m,null,[{key:"shouldNeverReachHere",value:function(){if(arguments.length===0)m.shouldNeverReachHere(null);else if(arguments.length===1){var u=arguments[0];throw new _e("Should never reach here"+(u!==null?": "+u:""))}}},{key:"isTrue",value:function(){if(arguments.length===1){var u=arguments[0];m.isTrue(u,null)}else if(arguments.length===2){var h=arguments[1];if(!arguments[0])throw h===null?new _e:new _e(h)}}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];m.equals(u,h,null)}else if(arguments.length===3){var g=arguments[0],x=arguments[1],D=arguments[2];if(!x.equals(g))throw new _e("Expected "+g+" but encountered "+x+(D!==null?": "+D:""))}}}])})(),ee=new ArrayBuffer(8),ce=new Float64Array(ee),pe=new Int32Array(ee),J=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getM",value:function(){return q.NaN}},{key:"setOrdinate",value:function(u,h){switch(u){case m.X:this.x=h;break;case m.Y:this.y=h;break;case m.Z:this.setZ(h);break;default:throw new A("Invalid ordinate index: "+u)}}},{key:"equals2D",value:function(){if(arguments.length===1){var u=arguments[0];return this.x===u.x&&this.y===u.y}if(arguments.length===2){var h=arguments[0],g=arguments[1];return!!Q.equalsWithTolerance(this.x,h.x,g)&&!!Q.equalsWithTolerance(this.y,h.y,g)}}},{key:"setM",value:function(u){throw new A("Invalid ordinate index: "+m.M)}},{key:"getZ",value:function(){return this.z}},{key:"getOrdinate",value:function(u){switch(u){case m.X:return this.x;case m.Y:return this.y;case m.Z:return this.getZ()}throw new A("Invalid ordinate index: "+u)}},{key:"equals3D",value:function(u){return this.x===u.x&&this.y===u.y&&(this.getZ()===u.getZ()||q.isNaN(this.getZ())&&q.isNaN(u.getZ()))}},{key:"equals",value:function(u){return u instanceof m&&this.equals2D(u)}},{key:"equalInZ",value:function(u,h){return Q.equalsWithTolerance(this.getZ(),u.getZ(),h)}},{key:"setX",value:function(u){this.x=u}},{key:"compareTo",value:function(u){var h=u;return this.x<h.x?-1:this.x>h.x?1:this.y<h.y?-1:this.y>h.y?1:0}},{key:"getX",value:function(){return this.x}},{key:"setZ",value:function(u){this.z=u}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return F.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw u}}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+")"}},{key:"distance3D",value:function(u){var h=this.x-u.x,g=this.y-u.y,x=this.getZ()-u.getZ();return Math.sqrt(h*h+g*g+x*x)}},{key:"getY",value:function(){return this.y}},{key:"setY",value:function(u){this.y=u}},{key:"distance",value:function(u){var h=this.x-u.x,g=this.y-u.y;return Math.sqrt(h*h+g*g)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*u+m.hashCode(this.x))+m.hashCode(this.y)}},{key:"setCoordinate",value:function(u){this.x=u.x,this.y=u.y,this.z=u.getZ()}},{key:"interfaces_",get:function(){return[O,W,X]}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)m.constructor_.call(this,0,0);else if(arguments.length===1){var u=arguments[0];m.constructor_.call(this,u.x,u.y,u.getZ())}else if(arguments.length===2){var h=arguments[0],g=arguments[1];m.constructor_.call(this,h,g,m.NULL_ORDINATE)}else if(arguments.length===3){var x=arguments[0],D=arguments[1],k=arguments[2];this.x=x,this.y=D,this.z=k}}},{key:"hashCode",value:function(u){return ce[0]=u,pe[0]^pe[1]}}])})(),xe=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compare",value:function(u,h){var g=m.compare(u.x,h.x);if(g!==0)return g;var x=m.compare(u.y,h.y);return x!==0?x:this._dimensionsToTest<=2?0:m.compare(u.getZ(),h.getZ())}},{key:"interfaces_",get:function(){return[K]}}],[{key:"constructor_",value:function(){if(this._dimensionsToTest=2,arguments.length===0)m.constructor_.call(this,2);else if(arguments.length===1){var u=arguments[0];if(u!==2&&u!==3)throw new A("only 2 or 3 dimensions may be specified");this._dimensionsToTest=u}}},{key:"compare",value:function(u,h){return u<h?-1:u>h?1:q.isNaN(u)?q.isNaN(h)?0:-1:q.isNaN(h)?1:0}}])})();J.DimensionalComparator=xe,J.NULL_ORDINATE=q.NaN,J.X=0,J.Y=1,J.Z=2,J.M=3;var Se=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getArea",value:function(){return this.getWidth()*this.getHeight()}},{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this.isNull()?h.isNull():this._maxx===h.getMaxX()&&this._maxy===h.getMaxY()&&this._minx===h.getMinX()&&this._miny===h.getMinY()}},{key:"intersection",value:function(u){if(this.isNull()||u.isNull()||!this.intersects(u))return new m;var h=this._minx>u._minx?this._minx:u._minx,g=this._miny>u._miny?this._miny:u._miny;return new m(h,this._maxx<u._maxx?this._maxx:u._maxx,g,this._maxy<u._maxy?this._maxy:u._maxy)}},{key:"isNull",value:function(){return this._maxx<this._minx}},{key:"getMaxX",value:function(){return this._maxx}},{key:"covers",value:function(){if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];return this.covers(u.x,u.y)}if(arguments[0]instanceof m){var h=arguments[0];return!this.isNull()&&!h.isNull()&&h.getMinX()>=this._minx&&h.getMaxX()<=this._maxx&&h.getMinY()>=this._miny&&h.getMaxY()<=this._maxy}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];return!this.isNull()&&g>=this._minx&&g<=this._maxx&&x>=this._miny&&x<=this._maxy}}},{key:"intersects",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return!this.isNull()&&!u.isNull()&&!(u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny)}if(arguments[0]instanceof J){var h=arguments[0];return this.intersects(h.x,h.y)}}else if(arguments.length===2){if(arguments[0]instanceof J&&arguments[1]instanceof J){var g=arguments[0],x=arguments[1];return!this.isNull()&&!((g.x<x.x?g.x:x.x)>this._maxx)&&!((g.x>x.x?g.x:x.x)<this._minx)&&!((g.y<x.y?g.y:x.y)>this._maxy)&&!((g.y>x.y?g.y:x.y)<this._miny)}if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var D=arguments[0],k=arguments[1];return!this.isNull()&&!(D>this._maxx||D<this._minx||k>this._maxy||k<this._miny)}}}},{key:"getMinY",value:function(){return this._miny}},{key:"getDiameter",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return Math.sqrt(u*u+h*h)}},{key:"getMinX",value:function(){return this._minx}},{key:"expandToInclude",value:function(){if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.expandToInclude(u.x,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];if(h.isNull())return null;this.isNull()?(this._minx=h.getMinX(),this._maxx=h.getMaxX(),this._miny=h.getMinY(),this._maxy=h.getMaxY()):(h._minx<this._minx&&(this._minx=h._minx),h._maxx>this._maxx&&(this._maxx=h._maxx),h._miny<this._miny&&(this._miny=h._miny),h._maxy>this._maxy&&(this._maxy=h._maxy))}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.isNull()?(this._minx=g,this._maxx=g,this._miny=x,this._maxy=x):(g<this._minx&&(this._minx=g),g>this._maxx&&(this._maxx=g),x<this._miny&&(this._miny=x),x>this._maxy&&(this._maxy=x))}}},{key:"minExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u<h?u:h}},{key:"getWidth",value:function(){return this.isNull()?0:this._maxx-this._minx}},{key:"compareTo",value:function(u){var h=u;return this.isNull()?h.isNull()?0:-1:h.isNull()?1:this._minx<h._minx?-1:this._minx>h._minx?1:this._miny<h._miny?-1:this._miny>h._miny?1:this._maxx<h._maxx?-1:this._maxx>h._maxx?1:this._maxy<h._maxy?-1:this._maxy>h._maxy?1:0}},{key:"translate",value:function(u,h){if(this.isNull())return null;this.init(this.getMinX()+u,this.getMaxX()+u,this.getMinY()+h,this.getMaxY()+h)}},{key:"copy",value:function(){return new m(this)}},{key:"toString",value:function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"}},{key:"setToNull",value:function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1}},{key:"disjoint",value:function(u){return!(!this.isNull()&&!u.isNull())||u._minx>this._maxx||u._maxx<this._minx||u._miny>this._maxy||u._maxy<this._miny}},{key:"getHeight",value:function(){return this.isNull()?0:this._maxy-this._miny}},{key:"maxExtent",value:function(){if(this.isNull())return 0;var u=this.getWidth(),h=this.getHeight();return u>h?u:h}},{key:"expandBy",value:function(){if(arguments.length===1){var u=arguments[0];this.expandBy(u,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];if(this.isNull())return null;this._minx-=h,this._maxx+=h,this._miny-=g,this._maxy+=g,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}}},{key:"contains",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.covers(u)}if(arguments[0]instanceof J){var h=arguments[0];return this.covers(h)}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];return this.covers(g,x)}}},{key:"centre",value:function(){return this.isNull()?null:new J((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)}},{key:"init",value:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];this._minx=h._minx,this._maxx=h._maxx,this._miny=h._miny,this._maxy=h._maxy}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.init(g.x,x.x,g.y,x.y)}else if(arguments.length===4){var D=arguments[0],k=arguments[1],H=arguments[2],ie=arguments[3];D<k?(this._minx=D,this._maxx=k):(this._minx=k,this._maxx=D),H<ie?(this._miny=H,this._maxy=ie):(this._miny=ie,this._maxy=H)}}},{key:"getMaxY",value:function(){return this._maxy}},{key:"distance",value:function(u){if(this.intersects(u))return 0;var h=0;this._maxx<u._minx?h=u._minx-this._maxx:this._minx>u._maxx&&(h=this._minx-u._maxx);var g=0;return this._maxy<u._miny?g=u._miny-this._maxy:this._miny>u._maxy&&(g=this._miny-u._maxy),h===0?g:g===0?h:Math.sqrt(h*h+g*g)}},{key:"hashCode",value:function(){var u=17;return u=37*(u=37*(u=37*(u=37*u+J.hashCode(this._minx))+J.hashCode(this._maxx))+J.hashCode(this._miny))+J.hashCode(this._maxy)}},{key:"interfaces_",get:function(){return[O,X]}}],[{key:"constructor_",value:function(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];this.init(u.x,u.x,u.y,u.y)}else if(arguments[0]instanceof m){var h=arguments[0];this.init(h)}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.init(g.x,x.x,g.y,x.y)}else if(arguments.length===4){var D=arguments[0],k=arguments[1],H=arguments[2],ie=arguments[3];this.init(D,k,H,ie)}}},{key:"intersects",value:function(){if(arguments.length===3){var u=arguments[0],h=arguments[1],g=arguments[2];return g.x>=(u.x<h.x?u.x:h.x)&&g.x<=(u.x>h.x?u.x:h.x)&&g.y>=(u.y<h.y?u.y:h.y)&&g.y<=(u.y>h.y?u.y:h.y)}if(arguments.length===4){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3],ie=Math.min(k.x,H.x),de=Math.max(k.x,H.x),Te=Math.min(x.x,D.x),Pe=Math.max(x.x,D.x);return!(Te>de)&&!(Pe<ie)&&(ie=Math.min(k.y,H.y),de=Math.max(k.y,H.y),Te=Math.min(x.y,D.y),Pe=Math.max(x.y,D.y),!(Te>de)&&!(Pe<ie))}}}])})(),ve=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isGeometryCollection",value:function(){return this.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION}},{key:"getFactory",value:function(){return this._factory}},{key:"getGeometryN",value:function(u){return this}},{key:"getArea",value:function(){return 0}},{key:"isRectangle",value:function(){return!1}},{key:"equalsExact",value:function(u){return this===u||this.equalsExact(u,0)}},{key:"geometryChanged",value:function(){this.apply(m.geometryChangedFilter)}},{key:"geometryChangedAction",value:function(){this._envelope=null}},{key:"equalsNorm",value:function(u){return u!==null&&this.norm().equalsExact(u.norm())}},{key:"getLength",value:function(){return 0}},{key:"getNumGeometries",value:function(){return 1}},{key:"compareTo",value:function(){var u;if(arguments.length===1){var h=arguments[0];return u=h,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(h)}if(arguments.length===2){var g=arguments[0],x=arguments[1];return u=g,this.getTypeCode()!==u.getTypeCode()?this.getTypeCode()-u.getTypeCode():this.isEmpty()&&u.isEmpty()?0:this.isEmpty()?-1:u.isEmpty()?1:this.compareToSameClass(g,x)}}},{key:"getUserData",value:function(){return this._userData}},{key:"getSRID",value:function(){return this._SRID}},{key:"getEnvelope",value:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())}},{key:"checkNotGeometryCollection",value:function(u){if(u.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION)throw new A("This method does not support GeometryCollection arguments")}},{key:"equal",value:function(u,h,g){return g===0?u.equals(h):u.distance(h)<=g}},{key:"norm",value:function(){var u=this.copy();return u.normalize(),u}},{key:"reverse",value:function(){var u=this.reverseInternal();return this.envelope!=null&&(u.envelope=this.envelope.copy()),u.setSRID(this.getSRID()),u}},{key:"copy",value:function(){var u=this.copyInternal();return u.envelope=this._envelope==null?null:this._envelope.copy(),u._SRID=this._SRID,u._userData=this._userData,u}},{key:"getPrecisionModel",value:function(){return this._factory.getPrecisionModel()}},{key:"getEnvelopeInternal",value:function(){return this._envelope===null&&(this._envelope=this.computeEnvelopeInternal()),new Se(this._envelope)}},{key:"setSRID",value:function(u){this._SRID=u}},{key:"setUserData",value:function(u){this._userData=u}},{key:"compare",value:function(u,h){for(var g=u.iterator(),x=h.iterator();g.hasNext()&&x.hasNext();){var D=g.next(),k=x.next(),H=D.compareTo(k);if(H!==0)return H}return g.hasNext()?1:x.hasNext()?-1:0}},{key:"hashCode",value:function(){return this.getEnvelopeInternal().hashCode()}},{key:"isEquivalentClass",value:function(u){return this.getClass()===u.getClass()}},{key:"isGeometryCollectionOrDerived",value:function(){return this.getTypeCode()===m.TYPECODE_GEOMETRYCOLLECTION||this.getTypeCode()===m.TYPECODE_MULTIPOINT||this.getTypeCode()===m.TYPECODE_MULTILINESTRING||this.getTypeCode()===m.TYPECODE_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[W,O,X]}},{key:"getClass",value:function(){return m}}],[{key:"hasNonEmptyElements",value:function(u){for(var h=0;h<u.length;h++)if(!u[h].isEmpty())return!0;return!1}},{key:"hasNullElements",value:function(u){for(var h=0;h<u.length;h++)if(u[h]===null)return!0;return!1}}])})();ve.constructor_=function(m){m&&(this._envelope=null,this._userData=null,this._factory=m,this._SRID=m.getSRID())},ve.TYPECODE_POINT=0,ve.TYPECODE_MULTIPOINT=1,ve.TYPECODE_LINESTRING=2,ve.TYPECODE_LINEARRING=3,ve.TYPECODE_MULTILINESTRING=4,ve.TYPECODE_POLYGON=5,ve.TYPECODE_MULTIPOLYGON=6,ve.TYPECODE_GEOMETRYCOLLECTION=7,ve.TYPENAME_POINT="Point",ve.TYPENAME_MULTIPOINT="MultiPoint",ve.TYPENAME_LINESTRING="LineString",ve.TYPENAME_LINEARRING="LinearRing",ve.TYPENAME_MULTILINESTRING="MultiLineString",ve.TYPENAME_POLYGON="Polygon",ve.TYPENAME_MULTIPOLYGON="MultiPolygon",ve.TYPENAME_GEOMETRYCOLLECTION="GeometryCollection",ve.geometryChangedFilter={get interfaces_(){return[N]},filter:function(m){m.geometryChangedAction()}};var re=(function(){function m(){t(this,m)}return o(m,null,[{key:"toLocationSymbol",value:function(u){switch(u){case m.EXTERIOR:return"e";case m.BOUNDARY:return"b";case m.INTERIOR:return"i";case m.NONE:return"-"}throw new A("Unknown location value: "+u)}}])})();re.INTERIOR=0,re.BOUNDARY=1,re.EXTERIOR=2,re.NONE=-1;var Ve=(function(){return o(function m(){t(this,m)},[{key:"add",value:function(){}},{key:"addAll",value:function(){}},{key:"isEmpty",value:function(){}},{key:"iterator",value:function(){}},{key:"size",value:function(){}},{key:"toArray",value:function(){}},{key:"remove",value:function(){}}])})(),G=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({NoSuchElementException:u})[0],g}return c(u,m),o(u)})(T),be=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({UnsupportedOperationException:u})[0],g}return c(u,m),o(u)})(T),Ie=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u,[{key:"contains",value:function(){}}])})(Ve),U=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).map=new Map,h instanceof Ve&&g.addAll(h),g}return c(u,m),o(u,[{key:"contains",value:function(h){var g=h.hashCode?h.hashCode():h;return!!this.map.has(g)}},{key:"add",value:function(h){var g=h.hashCode?h.hashCode():h;return!this.map.has(g)&&!!this.map.set(g,h)}},{key:"addAll",value:function(h){var g,x=s(h);try{for(x.s();!(g=x.n()).done;){var D=g.value;this.add(D)}}catch(k){x.e(k)}finally{x.f()}return!0}},{key:"remove",value:function(){throw new be}},{key:"size",value:function(){return this.map.size}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"toArray",value:function(){return Array.from(this.map.values())}},{key:"iterator",value:function(){return new ae(this.map)}},{key:Symbol.iterator,value:function(){return this.map}}])})(Ie),ae=(function(){return o(function m(u){t(this,m),this.iterator=u.values();var h=this.iterator.next(),g=h.done,x=h.value;this.done=g,this.value=x},[{key:"next",value:function(){if(this.done)throw new G;var m=this.value,u=this.iterator.next(),h=u.done,g=u.value;return this.done=h,this.value=g,m}},{key:"hasNext",value:function(){return!this.done}},{key:"remove",value:function(){throw new be}}])})(),he=(function(){function m(){t(this,m)}return o(m,null,[{key:"opposite",value:function(u){return u===m.LEFT?m.RIGHT:u===m.RIGHT?m.LEFT:u}}])})();he.ON=0,he.LEFT=1,he.RIGHT=2;var Fe=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({EmptyStackException:u})[0],g}return c(u,m),o(u)})(T),Ce=(function(m){function u(h){var g;return t(this,u),(g=e(this,u,[h])).name=Object.keys({IndexOutOfBoundsException:u})[0],g}return c(u,m),o(u)})(T),we=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u,[{key:"get",value:function(){}},{key:"set",value:function(){}},{key:"isEmpty",value:function(){}}])})(Ve),Ue=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).array=[],h}return c(u,m),o(u,[{key:"add",value:function(h){return this.array.push(h),!0}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ce;return this.array[h]}},{key:"push",value:function(h){return this.array.push(h),h}},{key:"pop",value:function(){if(this.array.length===0)throw new Fe;return this.array.pop()}},{key:"peek",value:function(){if(this.array.length===0)throw new Fe;return this.array[this.array.length-1]}},{key:"empty",value:function(){return this.array.length===0}},{key:"isEmpty",value:function(){return this.empty()}},{key:"search",value:function(h){return this.array.indexOf(h)}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}}])})(we);function Le(m,u){return m.interfaces_&&m.interfaces_.indexOf(u)>-1}var Be=(function(){return o(function m(u){t(this,m),this.str=u},[{key:"append",value:function(m){this.str+=m}},{key:"setCharAt",value:function(m,u){this.str=this.str.substr(0,m)+u+this.str.substr(m+1)}},{key:"toString",value:function(){return this.str}}])})(),ft=(function(){function m(u){t(this,m),this.value=u}return o(m,[{key:"intValue",value:function(){return this.value}},{key:"compareTo",value:function(u){return this.value<u?-1:this.value>u?1:0}}],[{key:"compare",value:function(u,h){return u<h?-1:u>h?1:0}},{key:"isNan",value:function(u){return Number.isNaN(u)}},{key:"valueOf",value:function(u){return new m(u)}}])})(),It=(function(){return o(function m(){t(this,m)},null,[{key:"isWhitespace",value:function(m){return m<=32&&m>=0||m===127}},{key:"toUpperCase",value:function(m){return m.toUpperCase()}}])})(),qe=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"le",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<=u._lo}},{key:"extractSignificantDigits",value:function(u,h){var g=this.abs(),x=m.magnitude(g._hi),D=m.TEN.pow(x);(g=g.divide(D)).gt(m.TEN)?(g=g.divide(m.TEN),x+=1):g.lt(m.ONE)&&(g=g.multiply(m.TEN),x-=1);for(var k=x+1,H=new Be,ie=m.MAX_PRINT_DIGITS-1,de=0;de<=ie;de++){u&&de===k&&H.append(".");var Te=Math.trunc(g._hi);if(Te<0)break;var Pe=!1,tt=0;Te>9?(Pe=!0,tt="9"):tt="0"+Te,H.append(tt),g=g.subtract(m.valueOf(Te)).multiply(m.TEN),Pe&&g.selfAdd(m.TEN);var mt=!0,At=m.magnitude(g._hi);if(At<0&&Math.abs(At)>=ie-de&&(mt=!1),!mt)break}return h[0]=x,H.toString()}},{key:"sqr",value:function(){return this.multiply(this)}},{key:"doubleValue",value:function(){return this._hi+this._lo}},{key:"subtract",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.add(u.negate())}if(typeof arguments[0]=="number"){var h=arguments[0];return this.add(-h)}}},{key:"equals",value:function(){if(arguments.length===1&&arguments[0]instanceof m){var u=arguments[0];return this._hi===u._hi&&this._lo===u._lo}}},{key:"isZero",value:function(){return this._hi===0&&this._lo===0}},{key:"selfSubtract",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.isNaN()?this:this.selfAdd(-u._hi,-u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.isNaN()?this:this.selfAdd(-h,0)}}},{key:"getSpecialNumberString",value:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null}},{key:"min",value:function(u){return this.le(u)?this:u}},{key:"selfDivide",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfDivide(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfDivide(h,0)}}else if(arguments.length===2){var g,x,D,k,H=arguments[0],ie=arguments[1],de=null,Te=null,Pe=null,tt=null;return D=this._hi/H,tt=(de=(Pe=m.SPLIT*D)-(de=Pe-D))*(Te=(tt=m.SPLIT*H)-(Te=tt-H))-(k=D*H)+de*(x=H-Te)+(g=D-de)*Te+g*x,tt=D+(Pe=(this._hi-k-tt+this._lo-D*ie)/H),this._hi=tt,this._lo=D-tt+Pe,this}}},{key:"dump",value:function(){return"DD<"+this._hi+", "+this._lo+">"}},{key:"divide",value:function(){if(arguments[0]instanceof m){var u,h,g,x,D=arguments[0],k=null,H=null,ie=null,de=null;return u=(g=this._hi/D._hi)-(k=(ie=m.SPLIT*g)-(k=ie-g)),de=k*(H=(de=m.SPLIT*D._hi)-(H=de-D._hi))-(x=g*D._hi)+k*(h=D._hi-H)+u*H+u*h,new m(de=g+(ie=(this._hi-x-de+this._lo-g*D._lo)/D._hi),g-de+ie)}if(typeof arguments[0]=="number"){var Te=arguments[0];return q.isNaN(Te)?m.createNaN():m.copy(this).selfDivide(Te,0)}}},{key:"ge",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>=u._lo}},{key:"pow",value:function(u){if(u===0)return m.valueOf(1);var h=new m(this),g=m.valueOf(1),x=Math.abs(u);if(x>1)for(;x>0;)x%2==1&&g.selfMultiply(h),(x/=2)>0&&(h=h.sqr());else g=h;return u<0?g.reciprocal():g}},{key:"ceil",value:function(){if(this.isNaN())return m.NaN;var u=Math.ceil(this._hi),h=0;return u===this._hi&&(h=Math.ceil(this._lo)),new m(u,h)}},{key:"compareTo",value:function(u){var h=u;return this._hi<h._hi?-1:this._hi>h._hi?1:this._lo<h._lo?-1:this._lo>h._lo?1:0}},{key:"rint",value:function(){return this.isNaN()?this:this.add(.5).floor()}},{key:"setValue",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return this.init(u),this}if(typeof arguments[0]=="number"){var h=arguments[0];return this.init(h),this}}},{key:"max",value:function(u){return this.ge(u)?this:u}},{key:"sqrt",value:function(){if(this.isZero())return m.valueOf(0);if(this.isNegative())return m.NaN;var u=1/Math.sqrt(this._hi),h=this._hi*u,g=m.valueOf(h),x=this.subtract(g.sqr())._hi*(.5*u);return g.add(x)}},{key:"selfAdd",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfAdd(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h,g,x,D,k,H=arguments[0],ie=null;return ie=(x=this._hi+H)-(D=x-this._hi),g=(k=(ie=H-D+(this._hi-ie))+this._lo)+(x-(h=x+k)),this._hi=h+g,this._lo=g+(h-this._hi),this}}else if(arguments.length===2){var de,Te,Pe,tt,mt=arguments[0],At=arguments[1],Ht=null,Jn=null,qn=null;Pe=this._hi+mt,Te=this._lo+At,Jn=Pe-(qn=Pe-this._hi),Ht=Te-(tt=Te-this._lo);var Mr=(de=Pe+(qn=(Jn=mt-qn+(this._hi-Jn))+Te))+(qn=(Ht=At-tt+(this._lo-Ht))+(qn+(Pe-de))),ho=qn+(de-Mr);return this._hi=Mr,this._lo=ho,this}}},{key:"selfMultiply",value:function(){if(arguments.length===1){if(arguments[0]instanceof m){var u=arguments[0];return this.selfMultiply(u._hi,u._lo)}if(typeof arguments[0]=="number"){var h=arguments[0];return this.selfMultiply(h,0)}}else if(arguments.length===2){var g,x,D=arguments[0],k=arguments[1],H=null,ie=null,de=null,Te=null;H=(de=m.SPLIT*this._hi)-this._hi,Te=m.SPLIT*D,H=de-H,g=this._hi-H,ie=Te-D;var Pe=(de=this._hi*D)+(Te=H*(ie=Te-ie)-de+H*(x=D-ie)+g*ie+g*x+(this._hi*k+this._lo*D)),tt=Te+(H=de-Pe);return this._hi=Pe,this._lo=tt,this}}},{key:"selfSqr",value:function(){return this.selfMultiply(this)}},{key:"floor",value:function(){if(this.isNaN())return m.NaN;var u=Math.floor(this._hi),h=0;return u===this._hi&&(h=Math.floor(this._lo)),new m(u,h)}},{key:"negate",value:function(){return this.isNaN()?this:new m(-this._hi,-this._lo)}},{key:"clone",value:function(){try{return null}catch(u){if(u instanceof CloneNotSupportedException)return null;throw u}}},{key:"multiply",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return u.isNaN()?m.createNaN():m.copy(this).selfMultiply(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return q.isNaN(h)?m.createNaN():m.copy(this).selfMultiply(h,0)}}},{key:"isNaN",value:function(){return q.isNaN(this._hi)}},{key:"intValue",value:function(){return Math.trunc(this._hi)}},{key:"toString",value:function(){var u=m.magnitude(this._hi);return u>=-3&&u<=20?this.toStandardNotation():this.toSciNotation()}},{key:"toStandardNotation",value:function(){var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),g=this.extractSignificantDigits(!0,h),x=h[0]+1,D=g;if(g.charAt(0)===".")D="0"+g;else if(x<0)D="0."+m.stringOfChar("0",-x)+g;else if(g.indexOf(".")===-1){var k=x-g.length;D=g+m.stringOfChar("0",k)+".0"}return this.isNegative()?"-"+D:D}},{key:"reciprocal",value:function(){var u,h,g,x,D=null,k=null,H=null,ie=null;u=(g=1/this._hi)-(D=(H=m.SPLIT*g)-(D=H-g)),k=(ie=m.SPLIT*this._hi)-this._hi;var de=g+(H=(1-(x=g*this._hi)-(ie=D*(k=ie-k)-x+D*(h=this._hi-k)+u*k+u*h)-g*this._lo)/this._hi);return new m(de,g-de+H)}},{key:"toSciNotation",value:function(){if(this.isZero())return m.SCI_NOT_ZERO;var u=this.getSpecialNumberString();if(u!==null)return u;var h=new Array(1).fill(null),g=this.extractSignificantDigits(!1,h),x=m.SCI_NOT_EXPONENT_CHAR+h[0];if(g.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+g);var D="";g.length>1&&(D=g.substring(1));var k=g.charAt(0)+"."+D;return this.isNegative()?"-"+k+x:k+x}},{key:"abs",value:function(){return this.isNaN()?m.NaN:this.isNegative()?this.negate():new m(this)}},{key:"isPositive",value:function(){return this._hi>0||this._hi===0&&this._lo>0}},{key:"lt",value:function(u){return this._hi<u._hi||this._hi===u._hi&&this._lo<u._lo}},{key:"add",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return m.copy(this).selfAdd(u)}if(typeof arguments[0]=="number"){var h=arguments[0];return m.copy(this).selfAdd(h)}}},{key:"init",value:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this._hi=u,this._lo=0}else if(arguments[0]instanceof m){var h=arguments[0];this._hi=h._hi,this._lo=h._lo}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this._hi=g,this._lo=x}}},{key:"gt",value:function(u){return this._hi>u._hi||this._hi===u._hi&&this._lo>u._lo}},{key:"isNegative",value:function(){return this._hi<0||this._hi===0&&this._lo<0}},{key:"trunc",value:function(){return this.isNaN()?m.NaN:this.isPositive()?this.floor():this.ceil()}},{key:"signum",value:function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0}},{key:"interfaces_",get:function(){return[X,O,W]}}],[{key:"constructor_",value:function(){if(this._hi=0,this._lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var u=arguments[0];this.init(u)}else if(arguments[0]instanceof m){var h=arguments[0];this.init(h)}else if(typeof arguments[0]=="string"){var g=arguments[0];m.constructor_.call(this,m.parse(g))}}else if(arguments.length===2){var x=arguments[0],D=arguments[1];this.init(x,D)}}},{key:"determinant",value:function(){if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1],g=arguments[2],x=arguments[3];return m.determinant(m.valueOf(u),m.valueOf(h),m.valueOf(g),m.valueOf(x))}if(arguments[3]instanceof m&&arguments[2]instanceof m&&arguments[0]instanceof m&&arguments[1]instanceof m){var D=arguments[1],k=arguments[2],H=arguments[3];return arguments[0].multiply(H).selfSubtract(D.multiply(k))}}},{key:"sqr",value:function(u){return m.valueOf(u).selfMultiply(u)}},{key:"valueOf",value:function(){if(typeof arguments[0]=="string"){var u=arguments[0];return m.parse(u)}if(typeof arguments[0]=="number")return new m(arguments[0])}},{key:"sqrt",value:function(u){return m.valueOf(u).sqrt()}},{key:"parse",value:function(u){for(var h=0,g=u.length;It.isWhitespace(u.charAt(h));)h++;var x=!1;if(h<g){var D=u.charAt(h);D!=="-"&&D!=="+"||(h++,D==="-"&&(x=!0))}for(var k=new m,H=0,ie=0,de=0,Te=!1;!(h>=g);){var Pe=u.charAt(h);if(h++,It.isDigit(Pe)){var tt=Pe-"0";k.selfMultiply(m.TEN),k.selfAdd(tt),H++}else{if(Pe!=="."){if(Pe==="e"||Pe==="E"){var mt=u.substring(h);try{de=ft.parseInt(mt)}catch(Mr){throw Mr instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+mt+" in string "+u):Mr}break}throw new NumberFormatException("Unexpected character '"+Pe+"' at position "+h+" in string "+u)}ie=H,Te=!0}}var At=k;Te||(ie=H);var Ht=H-ie-de;if(Ht===0)At=k;else if(Ht>0){var Jn=m.TEN.pow(Ht);At=k.divide(Jn)}else if(Ht<0){var qn=m.TEN.pow(-Ht);At=k.multiply(qn)}return x?At.negate():At}},{key:"createNaN",value:function(){return new m(q.NaN,q.NaN)}},{key:"copy",value:function(u){return new m(u)}},{key:"magnitude",value:function(u){var h=Math.abs(u),g=Math.log(h)/Math.log(10),x=Math.trunc(Math.floor(g));return 10*Math.pow(10,x)<=h&&(x+=1),x}},{key:"stringOfChar",value:function(u,h){for(var g=new Be,x=0;x<h;x++)g.append(u);return g.toString()}}])})();qe.PI=new qe(3.141592653589793,12246467991473532e-32),qe.TWO_PI=new qe(6.283185307179586,24492935982947064e-32),qe.PI_2=new qe(1.5707963267948966,6123233995736766e-32),qe.E=new qe(2.718281828459045,14456468917292502e-32),qe.NaN=new qe(q.NaN,q.NaN),qe.EPS=123259516440783e-46,qe.SPLIT=134217729,qe.MAX_PRINT_DIGITS=32,qe.TEN=qe.valueOf(10),qe.ONE=qe.valueOf(1),qe.SCI_NOT_EXPONENT_CHAR="E",qe.SCI_NOT_ZERO="0.0E0";var Vt=(function(){function m(){t(this,m)}return o(m,null,[{key:"orientationIndex",value:function(u,h,g){var x=m.orientationIndexFilter(u,h,g);if(x<=1)return x;var D=qe.valueOf(h.x).selfAdd(-u.x),k=qe.valueOf(h.y).selfAdd(-u.y),H=qe.valueOf(g.x).selfAdd(-h.x),ie=qe.valueOf(g.y).selfAdd(-h.y);return D.selfMultiply(ie).selfSubtract(k.selfMultiply(H)).signum()}},{key:"signOfDet2x2",value:function(){if(arguments[3]instanceof qe&&arguments[2]instanceof qe&&arguments[0]instanceof qe&&arguments[1]instanceof qe){var u=arguments[1],h=arguments[2],g=arguments[3];return arguments[0].multiply(g).selfSubtract(u.multiply(h)).signum()}if(typeof arguments[3]=="number"&&typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3],ie=qe.valueOf(x),de=qe.valueOf(D),Te=qe.valueOf(k),Pe=qe.valueOf(H);return ie.multiply(Pe).selfSubtract(de.multiply(Te)).signum()}}},{key:"intersection",value:function(u,h,g,x){var D=new qe(u.y).selfSubtract(h.y),k=new qe(h.x).selfSubtract(u.x),H=new qe(u.x).selfMultiply(h.y).selfSubtract(new qe(h.x).selfMultiply(u.y)),ie=new qe(g.y).selfSubtract(x.y),de=new qe(x.x).selfSubtract(g.x),Te=new qe(g.x).selfMultiply(x.y).selfSubtract(new qe(x.x).selfMultiply(g.y)),Pe=k.multiply(Te).selfSubtract(de.multiply(H)),tt=ie.multiply(H).selfSubtract(D.multiply(Te)),mt=D.multiply(de).selfSubtract(ie.multiply(k)),At=Pe.selfDivide(mt).doubleValue(),Ht=tt.selfDivide(mt).doubleValue();return q.isNaN(At)||q.isInfinite(At)||q.isNaN(Ht)||q.isInfinite(Ht)?null:new J(At,Ht)}},{key:"orientationIndexFilter",value:function(u,h,g){var x=null,D=(u.x-g.x)*(h.y-g.y),k=(u.y-g.y)*(h.x-g.x),H=D-k;if(D>0){if(k<=0)return m.signum(H);x=D+k}else{if(!(D<0)||k>=0)return m.signum(H);x=-D-k}var ie=m.DP_SAFE_EPSILON*x;return H>=ie||-H>=ie?m.signum(H):2}},{key:"signum",value:function(u){return u>0?1:u<0?-1:0}}])})();Vt.DP_SAFE_EPSILON=1e-15;var vt=(function(){return o(function m(){t(this,m)},[{key:"getM",value:function(m){if(this.hasM()){var u=this.getDimension()-this.getMeasures();return this.getOrdinate(m,u)}return q.NaN}},{key:"setOrdinate",value:function(m,u,h){}},{key:"getZ",value:function(m){return this.hasZ()?this.getOrdinate(m,2):q.NaN}},{key:"size",value:function(){}},{key:"getOrdinate",value:function(m,u){}},{key:"getCoordinate",value:function(){}},{key:"getCoordinateCopy",value:function(m){}},{key:"createCoordinate",value:function(){}},{key:"getDimension",value:function(){}},{key:"hasM",value:function(){return this.getMeasures()>0}},{key:"getX",value:function(m){}},{key:"hasZ",value:function(){return this.getDimension()-this.getMeasures()>2}},{key:"getMeasures",value:function(){return 0}},{key:"expandEnvelope",value:function(m){}},{key:"copy",value:function(){}},{key:"getY",value:function(m){}},{key:"toCoordinateArray",value:function(){}},{key:"interfaces_",get:function(){return[W]}}])})();vt.X=0,vt.Y=1,vt.Z=2,vt.M=3;var Ke=(function(){function m(){t(this,m)}return o(m,null,[{key:"index",value:function(u,h,g){return Vt.orientationIndex(u,h,g)}},{key:"isCCW",value:function(){if(arguments[0]instanceof Array){var u=arguments[0],h=u.length-1;if(h<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var g=u[0],x=0,D=1;D<=h;D++){var k=u[D];k.y>g.y&&(g=k,x=D)}var H=x;do(H-=1)<0&&(H=h);while(u[H].equals2D(g)&&H!==x);var ie=x;do ie=(ie+1)%h;while(u[ie].equals2D(g)&&ie!==x);var de=u[H],Te=u[ie];if(de.equals2D(g)||Te.equals2D(g)||de.equals2D(Te))return!1;var Pe=m.index(de,g,Te);return Pe===0?de.x>Te.x:Pe>0}if(Le(arguments[0],vt)){var tt=arguments[0],mt=tt.size()-1;if(mt<3)throw new A("Ring has fewer than 4 points, so orientation cannot be determined");for(var At=tt.getCoordinate(0),Ht=0,Jn=1;Jn<=mt;Jn++){var qn=tt.getCoordinate(Jn);qn.y>At.y&&(At=qn,Ht=Jn)}var Mr=null,ho=Ht;do(ho-=1)<0&&(ho=mt),Mr=tt.getCoordinate(ho);while(Mr.equals2D(At)&&ho!==Ht);var Ro=null,el=Ht;do el=(el+1)%mt,Ro=tt.getCoordinate(el);while(Ro.equals2D(At)&&el!==Ht);if(Mr.equals2D(At)||Ro.equals2D(At)||Mr.equals2D(Ro))return!1;var Rf=m.index(Mr,At,Ro);return Rf===0?Mr.x>Ro.x:Rf>0}}}])})();Ke.CLOCKWISE=-1,Ke.RIGHT=Ke.CLOCKWISE,Ke.COUNTERCLOCKWISE=1,Ke.LEFT=Ke.COUNTERCLOCKWISE,Ke.COLLINEAR=0,Ke.STRAIGHT=Ke.COLLINEAR;var Zt=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this._minCoord}},{key:"getRightmostSide",value:function(m,u){var h=this.getRightmostSideOfSegment(m,u);return h<0&&(h=this.getRightmostSideOfSegment(m,u-1)),h<0&&(this._minCoord=null,this.checkForRightmostCoordinate(m)),h}},{key:"findRightmostEdgeAtVertex",value:function(){var m=this._minDe.getEdge().getCoordinates();F.isTrue(this._minIndex>0&&this._minIndex<m.length,"rightmost point expected to be interior vertex of edge");var u=m[this._minIndex-1],h=m[this._minIndex+1],g=Ke.index(this._minCoord,h,u),x=!1;(u.y<this._minCoord.y&&h.y<this._minCoord.y&&g===Ke.COUNTERCLOCKWISE||u.y>this._minCoord.y&&h.y>this._minCoord.y&&g===Ke.CLOCKWISE)&&(x=!0),x&&(this._minIndex=this._minIndex-1)}},{key:"getRightmostSideOfSegment",value:function(m,u){var h=m.getEdge().getCoordinates();if(u<0||u+1>=h.length||h[u].y===h[u+1].y)return-1;var g=he.LEFT;return h[u].y<h[u+1].y&&(g=he.RIGHT),g}},{key:"getEdge",value:function(){return this._orientedDe}},{key:"checkForRightmostCoordinate",value:function(m){for(var u=m.getEdge().getCoordinates(),h=0;h<u.length-1;h++)(this._minCoord===null||u[h].x>this._minCoord.x)&&(this._minDe=m,this._minIndex=h,this._minCoord=u[h])}},{key:"findRightmostEdgeAtNode",value:function(){var m=this._minDe.getNode().getEdges();this._minDe=m.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)}},{key:"findEdge",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next();h.isForward()&&this.checkForRightmostCoordinate(h)}F.isTrue(this._minIndex!==0||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),this._minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===he.LEFT&&(this._orientedDe=this._minDe.getSym())}}],[{key:"constructor_",value:function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}}])})(),ht=(function(m){function u(h,g){var x;return t(this,u),(x=e(this,u,[g?h+" [ "+g+" ]":h])).pt=g?new J(g):void 0,x.name=Object.keys({TopologyException:u})[0],x}return c(u,m),o(u,[{key:"getCoordinate",value:function(){return this.pt}}])})(oe),Rr=(function(){return o(function m(){t(this,m),this.array=[]},[{key:"addLast",value:function(m){this.array.push(m)}},{key:"removeFirst",value:function(){return this.array.shift()}},{key:"isEmpty",value:function(){return this.array.length===0}}])})(),pt=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).array=[],h instanceof Ve&&g.addAll(h),g}return c(u,m),o(u,[{key:"interfaces_",get:function(){return[we,Ve]}},{key:"ensureCapacity",value:function(){}},{key:"add",value:function(h){return arguments.length===1?this.array.push(h):this.array.splice(arguments[0],0,arguments[1]),!0}},{key:"clear",value:function(){this.array=[]}},{key:"addAll",value:function(h){var g,x=s(h);try{for(x.s();!(g=x.n()).done;){var D=g.value;this.array.push(D)}}catch(k){x.e(k)}finally{x.f()}}},{key:"set",value:function(h,g){var x=this.array[h];return this.array[h]=g,x}},{key:"iterator",value:function(){return new Yt(this)}},{key:"get",value:function(h){if(h<0||h>=this.size())throw new Ce;return this.array[h]}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"sort",value:function(h){h?this.array.sort(function(g,x){return h.compare(g,x)}):this.array.sort()}},{key:"size",value:function(){return this.array.length}},{key:"toArray",value:function(){return this.array.slice()}},{key:"remove",value:function(h){for(var g=0,x=this.array.length;g<x;g++)if(this.array[g]===h)return!!this.array.splice(g,1);return!1}},{key:Symbol.iterator,value:function(){return this.array.values()}}])})(we),Yt=(function(){return o(function m(u){t(this,m),this.arrayList=u,this.position=0},[{key:"next",value:function(){if(this.position===this.arrayList.size())throw new G;return this.arrayList.get(this.position++)}},{key:"hasNext",value:function(){return this.position<this.arrayList.size()}},{key:"set",value:function(m){return this.arrayList.set(this.position-1,m)}},{key:"remove",value:function(){this.arrayList.remove(this.arrayList.get(this.position))}}])})(),ln=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"clearVisitedEdges",value:function(){for(var m=this._dirEdgeList.iterator();m.hasNext();)m.next().setVisited(!1)}},{key:"getRightmostCoordinate",value:function(){return this._rightMostCoord}},{key:"computeNodeDepth",value:function(m){for(var u=null,h=m.getEdges().iterator();h.hasNext();){var g=h.next();if(g.isVisited()||g.getSym().isVisited()){u=g;break}}if(u===null)throw new ht("unable to find edge to compute depths at "+m.getCoordinate());m.getEdges().computeDepths(u);for(var x=m.getEdges().iterator();x.hasNext();){var D=x.next();D.setVisited(!0),this.copySymDepths(D)}}},{key:"computeDepth",value:function(m){this.clearVisitedEdges();var u=this._finder.getEdge();u.getNode(),u.getLabel(),u.setEdgeDepths(he.RIGHT,m),this.copySymDepths(u),this.computeDepths(u)}},{key:"create",value:function(m){this.addReachable(m),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()}},{key:"findResultEdges",value:function(){for(var m=this._dirEdgeList.iterator();m.hasNext();){var u=m.next();u.getDepth(he.RIGHT)>=1&&u.getDepth(he.LEFT)<=0&&!u.isInteriorAreaEdge()&&u.setInResult(!0)}}},{key:"computeDepths",value:function(m){var u=new U,h=new Rr,g=m.getNode();for(h.addLast(g),u.add(g),m.setVisited(!0);!h.isEmpty();){var x=h.removeFirst();u.add(x),this.computeNodeDepth(x);for(var D=x.getEdges().iterator();D.hasNext();){var k=D.next().getSym();if(!k.isVisited()){var H=k.getNode();u.contains(H)||(h.addLast(H),u.add(H))}}}}},{key:"compareTo",value:function(m){var u=m;return this._rightMostCoord.x<u._rightMostCoord.x?-1:this._rightMostCoord.x>u._rightMostCoord.x?1:0}},{key:"getEnvelope",value:function(){if(this._env===null){for(var m=new Se,u=this._dirEdgeList.iterator();u.hasNext();)for(var h=u.next().getEdge().getCoordinates(),g=0;g<h.length-1;g++)m.expandToInclude(h[g]);this._env=m}return this._env}},{key:"addReachable",value:function(m){var u=new Ue;for(u.add(m);!u.empty();){var h=u.pop();this.add(h,u)}}},{key:"copySymDepths",value:function(m){var u=m.getSym();u.setDepth(he.LEFT,m.getDepth(he.RIGHT)),u.setDepth(he.RIGHT,m.getDepth(he.LEFT))}},{key:"add",value:function(m,u){m.setVisited(!0),this._nodes.add(m);for(var h=m.getEdges().iterator();h.hasNext();){var g=h.next();this._dirEdgeList.add(g);var x=g.getSym().getNode();x.isVisited()||u.push(x)}}},{key:"getNodes",value:function(){return this._nodes}},{key:"getDirectedEdges",value:function(){return this._dirEdgeList}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._finder=null,this._dirEdgeList=new pt,this._nodes=new pt,this._rightMostCoord=null,this._env=null,this._finder=new Zt}}])})(),hr=(function(){return o(function m(){t(this,m)},null,[{key:"intersection",value:function(m,u,h,g){var x=m.x<u.x?m.x:u.x,D=m.y<u.y?m.y:u.y,k=m.x>u.x?m.x:u.x,H=m.y>u.y?m.y:u.y,ie=h.x<g.x?h.x:g.x,de=h.y<g.y?h.y:g.y,Te=h.x>g.x?h.x:g.x,Pe=h.y>g.y?h.y:g.y,tt=((x>ie?x:ie)+(k<Te?k:Te))/2,mt=((D>de?D:de)+(H<Pe?H:Pe))/2,At=m.x-tt,Ht=m.y-mt,Jn=u.x-tt,qn=u.y-mt,Mr=h.x-tt,ho=h.y-mt,Ro=g.x-tt,el=g.y-mt,Rf=Ht-qn,g_=Jn-At,m_=At*qn-Jn*Ht,y_=ho-el,__=Ro-Mr,v_=Mr*el-Ro*ho,x_=Rf*__-y_*g_,om=(g_*v_-__*m_)/x_,mp=(y_*m_-Rf*v_)/x_;return q.isNaN(om)||q.isInfinite(om)||q.isNaN(mp)||q.isInfinite(mp)?null:new J(om+tt,mp+mt)}}])})(),Tt=(function(){return o(function m(){t(this,m)},null,[{key:"arraycopy",value:function(m,u,h,g,x){for(var D=0,k=u;k<u+x;k++)h[g+D]=m[k],D++}},{key:"getProperty",value:function(m){return{"line.separator":`
`}[m]}}])})(),ir=(function(){function m(){t(this,m)}return o(m,null,[{key:"log10",value:function(u){var h=Math.log(u);return q.isInfinite(h)||q.isNaN(h)?h:h/m.LOG_10}},{key:"min",value:function(u,h,g,x){var D=u;return h<D&&(D=h),g<D&&(D=g),x<D&&(D=x),D}},{key:"clamp",value:function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1],g=arguments[2];return u<h?h:u>g?g:u}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var x=arguments[0],D=arguments[1],k=arguments[2];return x<D?D:x>k?k:x}}},{key:"wrap",value:function(u,h){return u<0?h- -u%h:u%h}},{key:"max",value:function(){if(arguments.length===3){var u=arguments[1],h=arguments[2],g=arguments[0];return u>g&&(g=u),h>g&&(g=h),g}if(arguments.length===4){var x=arguments[1],D=arguments[2],k=arguments[3],H=arguments[0];return x>H&&(H=x),D>H&&(H=D),k>H&&(H=k),H}}},{key:"average",value:function(u,h){return(u+h)/2}}])})();ir.LOG_10=Math.log(10);var Dt=(function(){function m(){t(this,m)}return o(m,null,[{key:"segmentToSegment",value:function(u,h,g,x){if(u.equals(h))return m.pointToSegment(u,g,x);if(g.equals(x))return m.pointToSegment(x,u,h);var D=!1;if(Se.intersects(u,h,g,x)){var k=(h.x-u.x)*(x.y-g.y)-(h.y-u.y)*(x.x-g.x);if(k===0)D=!0;else{var H=(u.y-g.y)*(x.x-g.x)-(u.x-g.x)*(x.y-g.y),ie=((u.y-g.y)*(h.x-u.x)-(u.x-g.x)*(h.y-u.y))/k,de=H/k;(de<0||de>1||ie<0||ie>1)&&(D=!0)}}else D=!0;return D?ir.min(m.pointToSegment(u,g,x),m.pointToSegment(h,g,x),m.pointToSegment(g,u,h),m.pointToSegment(x,u,h)):0}},{key:"pointToSegment",value:function(u,h,g){if(h.x===g.x&&h.y===g.y)return u.distance(h);var x=(g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y),D=((u.x-h.x)*(g.x-h.x)+(u.y-h.y)*(g.y-h.y))/x;if(D<=0)return u.distance(h);if(D>=1)return u.distance(g);var k=((h.y-u.y)*(g.x-h.x)-(h.x-u.x)*(g.y-h.y))/x;return Math.abs(k)*Math.sqrt(x)}},{key:"pointToLinePerpendicular",value:function(u,h,g){var x=(g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y),D=((h.y-u.y)*(g.x-h.x)-(h.x-u.x)*(g.y-h.y))/x;return Math.abs(D)*Math.sqrt(x)}},{key:"pointToSegmentString",value:function(u,h){if(h.length===0)throw new A("Line array must contain at least one vertex");for(var g=u.distance(h[0]),x=0;x<h.length-1;x++){var D=m.pointToSegment(u,h[x],h[x+1]);D<g&&(g=D)}return g}}])})(),Gt=(function(){return o(function m(){t(this,m)},[{key:"create",value:function(){if(arguments.length===1)arguments[0]instanceof Array||Le(arguments[0],vt);else if(arguments.length!==2){if(arguments.length===3){var m=arguments[0],u=arguments[1];return this.create(m,u)}}}}])})(),Fn=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})(),mn=(function(){return o(function m(){t(this,m)},null,[{key:"ofLine",value:function(m){var u=m.size();if(u<=1)return 0;var h=0,g=new J;m.getCoordinate(0,g);for(var x=g.x,D=g.y,k=1;k<u;k++){m.getCoordinate(k,g);var H=g.x,ie=g.y,de=H-x,Te=ie-D;h+=Math.sqrt(de*de+Te*Te),x=H,D=ie}return h}}])})(),qt=o(function m(){t(this,m)}),Rn=(function(){function m(){t(this,m)}return o(m,null,[{key:"copyCoord",value:function(u,h,g,x){for(var D=Math.min(u.getDimension(),g.getDimension()),k=0;k<D;k++)g.setOrdinate(x,k,u.getOrdinate(h,k))}},{key:"isRing",value:function(u){var h=u.size();return h===0||!(h<=3)&&u.getOrdinate(0,vt.X)===u.getOrdinate(h-1,vt.X)&&u.getOrdinate(0,vt.Y)===u.getOrdinate(h-1,vt.Y)}},{key:"scroll",value:function(){if(arguments.length===2){if(Le(arguments[0],vt)&&Number.isInteger(arguments[1])){var u=arguments[0],h=arguments[1];m.scroll(u,h,m.isRing(u))}else if(Le(arguments[0],vt)&&arguments[1]instanceof J){var g=arguments[0],x=arguments[1],D=m.indexOf(x,g);if(D<=0)return null;m.scroll(g,D)}}else if(arguments.length===3){var k=arguments[0],H=arguments[1],ie=arguments[2];if(H<=0)return null;for(var de=k.copy(),Te=ie?k.size()-1:k.size(),Pe=0;Pe<Te;Pe++)for(var tt=0;tt<k.getDimension();tt++)k.setOrdinate(Pe,tt,de.getOrdinate((H+Pe)%Te,tt));if(ie)for(var mt=0;mt<k.getDimension();mt++)k.setOrdinate(Te,mt,k.getOrdinate(0,mt))}}},{key:"isEqual",value:function(u,h){var g=u.size();if(g!==h.size())return!1;for(var x=Math.min(u.getDimension(),h.getDimension()),D=0;D<g;D++)for(var k=0;k<x;k++){var H=u.getOrdinate(D,k),ie=h.getOrdinate(D,k);if(u.getOrdinate(D,k)!==h.getOrdinate(D,k)&&(!q.isNaN(H)||!q.isNaN(ie)))return!1}return!0}},{key:"minCoordinateIndex",value:function(){if(arguments.length===1){var u=arguments[0];return m.minCoordinateIndex(u,0,u.size()-1)}if(arguments.length===3){for(var h=arguments[0],g=arguments[2],x=-1,D=null,k=arguments[1];k<=g;k++){var H=h.getCoordinate(k);(D===null||D.compareTo(H)>0)&&(D=H,x=k)}return x}}},{key:"extend",value:function(u,h,g){var x=u.create(g,h.getDimension()),D=h.size();if(m.copy(h,0,x,0,D),D>0)for(var k=D;k<g;k++)m.copy(h,D-1,x,k,1);return x}},{key:"reverse",value:function(u){for(var h=u.size()-1,g=Math.trunc(h/2),x=0;x<=g;x++)m.swap(u,x,h-x)}},{key:"swap",value:function(u,h,g){if(h===g)return null;for(var x=0;x<u.getDimension();x++){var D=u.getOrdinate(h,x);u.setOrdinate(h,x,u.getOrdinate(g,x)),u.setOrdinate(g,x,D)}}},{key:"copy",value:function(u,h,g,x,D){for(var k=0;k<D;k++)m.copyCoord(u,h+k,g,x+k)}},{key:"ensureValidRing",value:function(u,h){var g=h.size();return g===0?h:g<=3?m.createClosedRing(u,h,4):h.getOrdinate(0,vt.X)===h.getOrdinate(g-1,vt.X)&&h.getOrdinate(0,vt.Y)===h.getOrdinate(g-1,vt.Y)?h:m.createClosedRing(u,h,g+1)}},{key:"indexOf",value:function(u,h){for(var g=0;g<h.size();g++)if(u.x===h.getOrdinate(g,vt.X)&&u.y===h.getOrdinate(g,vt.Y))return g;return-1}},{key:"createClosedRing",value:function(u,h,g){var x=u.create(g,h.getDimension()),D=h.size();m.copy(h,0,x,0,D);for(var k=D;k<g;k++)m.copy(h,0,x,k,1);return x}},{key:"minCoordinate",value:function(u){for(var h=null,g=0;g<u.size();g++){var x=u.getCoordinate(g);(h===null||h.compareTo(x)>0)&&(h=x)}return h}}])})(),at=(function(){function m(){t(this,m)}return o(m,null,[{key:"toDimensionSymbol",value:function(u){switch(u){case m.FALSE:return m.SYM_FALSE;case m.TRUE:return m.SYM_TRUE;case m.DONTCARE:return m.SYM_DONTCARE;case m.P:return m.SYM_P;case m.L:return m.SYM_L;case m.A:return m.SYM_A}throw new A("Unknown dimension value: "+u)}},{key:"toDimensionValue",value:function(u){switch(It.toUpperCase(u)){case m.SYM_FALSE:return m.FALSE;case m.SYM_TRUE:return m.TRUE;case m.SYM_DONTCARE:return m.DONTCARE;case m.SYM_P:return m.P;case m.SYM_L:return m.L;case m.SYM_A:return m.A}throw new A("Unknown dimension symbol: "+u)}}])})();at.P=0,at.L=1,at.A=2,at.FALSE=-1,at.TRUE=-2,at.DONTCARE=-3,at.SYM_FALSE="F",at.SYM_TRUE="T",at.SYM_DONTCARE="*",at.SYM_P="0",at.SYM_L="1",at.SYM_A="2";var Fr=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m){}}])})(),Jr=(function(){return o(function m(){t(this,m)},[{key:"filter",value:function(m,u){}},{key:"isDone",value:function(){}},{key:"isGeometryChanged",value:function(){}}])})(),Qr=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){return this.isEmpty()?new Se:this._points.expandEnvelope(new Se)}},{key:"isRing",value:function(){return this.isClosed()&&this.isSimple()}},{key:"getCoordinates",value:function(){return this._points.toCoordinateArray()}},{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var x=h;if(this._points.size()!==x._points.size())return!1;for(var D=0;D<this._points.size();D++)if(!this.equal(this._points.getCoordinate(D),x._points.getCoordinate(D),g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<Math.trunc(this._points.size()/2);h++){var g=this._points.size()-1-h;if(!this._points.getCoordinate(h).equals(this._points.getCoordinate(g))){if(this._points.getCoordinate(h).compareTo(this._points.getCoordinate(g))>0){var x=this._points.copy();Rn.reverse(x),this._points=x}return null}}}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._points.getCoordinate(0)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?at.FALSE:0}},{key:"isClosed",value:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Rn.reverse(h),this.getFactory().createLineString(h)}},{key:"getEndPoint",value:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getLength",value:function(){return mn.ofLine(this._points)}},{key:"getNumPoints",value:function(){return this._points.size()}},{key:"compareToSameClass",value:function(){if(arguments.length===1){for(var h=arguments[0],g=0,x=0;g<this._points.size()&&x<h._points.size();){var D=this._points.getCoordinate(g).compareTo(h._points.getCoordinate(x));if(D!==0)return D;g++,x++}return g<this._points.size()?1:x<h._points.size()?-1:0}if(arguments.length===2){var k=arguments[0];return arguments[1].compare(this._points,k._points)}}},{key:"apply",value:function(){if(Le(arguments[0],Fn))for(var h=arguments[0],g=0;g<this._points.size();g++)h.filter(this._points.getCoordinate(g));else if(Le(arguments[0],Jr)){var x=arguments[0];if(this._points.size()===0)return null;for(var D=0;D<this._points.size()&&(x.filter(this._points,D),!x.isDone());D++);x.isGeometryChanged()&&this.geometryChanged()}else Le(arguments[0],Fr)?arguments[0].filter(this):Le(arguments[0],N)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){throw new be}},{key:"isEquivalentClass",value:function(h){return h instanceof u}},{key:"getCoordinateN",value:function(h){return this._points.getCoordinate(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINESTRING}},{key:"getCoordinateSequence",value:function(){return this._points}},{key:"isEmpty",value:function(){return this._points.size()===0}},{key:"init",value:function(h){if(h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),h.size()===1)throw new A("Invalid number of points in LineString (found "+h.size()+" - must be 0 or >= 2)");this._points=h}},{key:"isCoordinate",value:function(h){for(var g=0;g<this._points.size();g++)if(this._points.getCoordinate(g).equals(h))return!0;return!1}},{key:"getStartPoint",value:function(){return this.isEmpty()?null:this.getPointN(0)}},{key:"getPointN",value:function(h){return this.getFactory().createPoint(this._points.getCoordinate(h))}},{key:"interfaces_",get:function(){return[qt]}}],[{key:"constructor_",value:function(){if(this._points=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],g=arguments[1];ve.constructor_.call(this,g),this.init(h)}}}}])})(ve),Rt=o(function m(){t(this,m)}),wi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){if(this.isEmpty())return new Se;var h=new Se;return h.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),h}},{key:"getCoordinates",value:function(){return this.isEmpty()?[]:[this.getCoordinate()]}},{key:"copyInternal",value:function(){return new u(this._coordinates.copy(),this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&(!(!this.isEmpty()||!h.isEmpty())||this.isEmpty()===h.isEmpty()&&this.equal(h.getCoordinate(),this.getCoordinate(),g))}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){}},{key:"getCoordinate",value:function(){return this._coordinates.size()!==0?this._coordinates.getCoordinate(0):null}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"reverseInternal",value:function(){return this.getFactory().createPoint(this._coordinates.copy())}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POINT}},{key:"getDimension",value:function(){return 0}},{key:"getNumPoints",value:function(){return this.isEmpty()?0:1}},{key:"getX",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0];return this.getCoordinate().compareTo(h.getCoordinate())}if(arguments.length===2){var g=arguments[0];return arguments[1].compare(this._coordinates,g._coordinates)}}},{key:"apply",value:function(){if(Le(arguments[0],Fn)){var h=arguments[0];if(this.isEmpty())return null;h.filter(this.getCoordinate())}else if(Le(arguments[0],Jr)){var g=arguments[0];if(this.isEmpty())return null;g.filter(this._coordinates,0),g.isGeometryChanged()&&this.geometryChanged()}else Le(arguments[0],Fr)?arguments[0].filter(this):Le(arguments[0],N)&&arguments[0].filter(this)}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POINT}},{key:"getCoordinateSequence",value:function(){return this._coordinates}},{key:"getY",value:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y}},{key:"isEmpty",value:function(){return this._coordinates.size()===0}},{key:"init",value:function(h){h===null&&(h=this.getFactory().getCoordinateSequenceFactory().create([])),F.isTrue(h.size()<=1),this._coordinates=h}},{key:"isSimple",value:function(){return!0}},{key:"interfaces_",get:function(){return[Rt]}}],[{key:"constructor_",value:function(){this._coordinates=null;var h=arguments[0],g=arguments[1];ve.constructor_.call(this,g),this.init(h)}}])})(ve),Li=(function(){function m(){t(this,m)}return o(m,null,[{key:"ofRing",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];return Math.abs(m.ofRingSigned(u))}if(Le(arguments[0],vt)){var h=arguments[0];return Math.abs(m.ofRingSigned(h))}}},{key:"ofRingSigned",value:function(){if(arguments[0]instanceof Array){var u=arguments[0];if(u.length<3)return 0;for(var h=0,g=u[0].x,x=1;x<u.length-1;x++){var D=u[x].x-g,k=u[x+1].y;h+=D*(u[x-1].y-k)}return h/2}if(Le(arguments[0],vt)){var H=arguments[0],ie=H.size();if(ie<3)return 0;var de=new J,Te=new J,Pe=new J;H.getCoordinate(0,Te),H.getCoordinate(1,Pe);var tt=Te.x;Pe.x-=tt;for(var mt=0,At=1;At<ie-1;At++)de.y=Te.y,Te.x=Pe.x,Te.y=Pe.y,H.getCoordinate(At+1,Pe),Pe.x-=tt,mt+=Te.x*(de.y-Pe.y);return mt/2}}}])})(),bn=(function(){return o(function m(){t(this,m)},null,[{key:"sort",value:function(){var m=arguments,u=arguments[0];if(arguments.length===1)u.sort(function(tt,mt){return tt.compareTo(mt)});else if(arguments.length===2)u.sort(function(tt,mt){return m[1].compare(tt,mt)});else if(arguments.length===3){var h=u.slice(arguments[1],arguments[2]);h.sort();var g=u.slice(0,arguments[1]).concat(h,u.slice(arguments[2],u.length));u.splice(0,u.length);var x,D=s(g);try{for(D.s();!(x=D.n()).done;){var k=x.value;u.push(k)}}catch(tt){D.e(tt)}finally{D.f()}}else if(arguments.length===4){var H=u.slice(arguments[1],arguments[2]);H.sort(function(tt,mt){return m[3].compare(tt,mt)});var ie=u.slice(0,arguments[1]).concat(H,u.slice(arguments[2],u.length));u.splice(0,u.length);var de,Te=s(ie);try{for(Te.s();!(de=Te.n()).done;){var Pe=de.value;u.push(Pe)}}catch(tt){Te.e(tt)}finally{Te.f()}}}},{key:"asList",value:function(m){var u,h=new pt,g=s(m);try{for(g.s();!(u=g.n()).done;){var x=u.value;h.add(x)}}catch(D){g.e(D)}finally{g.f()}return h}},{key:"copyOf",value:function(m,u){return m.slice(0,u)}}])})(),Er=o(function m(){t(this,m)}),Zn=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){return this._shell.getEnvelopeInternal()}},{key:"getCoordinates",value:function(){if(this.isEmpty())return[];for(var h=new Array(this.getNumPoints()).fill(null),g=-1,x=this._shell.getCoordinates(),D=0;D<x.length;D++)h[++g]=x[D];for(var k=0;k<this._holes.length;k++)for(var H=this._holes[k].getCoordinates(),ie=0;ie<H.length;ie++)h[++g]=H[ie];return h}},{key:"getArea",value:function(){var h=0;h+=Li.ofRing(this._shell.getCoordinateSequence());for(var g=0;g<this._holes.length;g++)h-=Li.ofRing(this._holes[g].getCoordinateSequence());return h}},{key:"copyInternal",value:function(){for(var h=this._shell.copy(),g=new Array(this._holes.length).fill(null),x=0;x<this._holes.length;x++)g[x]=this._holes[x].copy();return new u(h,g,this._factory)}},{key:"isRectangle",value:function(){if(this.getNumInteriorRing()!==0||this._shell===null||this._shell.getNumPoints()!==5)return!1;for(var h=this._shell.getCoordinateSequence(),g=this.getEnvelopeInternal(),x=0;x<5;x++){var D=h.getX(x);if(D!==g.getMinX()&&D!==g.getMaxX())return!1;var k=h.getY(x);if(k!==g.getMinY()&&k!==g.getMaxY())return!1}for(var H=h.getX(0),ie=h.getY(0),de=1;de<=4;de++){var Te=h.getX(de),Pe=h.getY(de);if(Te!==H==(Pe!==ie))return!1;H=Te,ie=Pe}return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var x=h,D=this._shell,k=x._shell;if(!D.equalsExact(k,g)||this._holes.length!==x._holes.length)return!1;for(var H=0;H<this._holes.length;H++)if(!this._holes[H].equalsExact(x._holes[H],g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){if(arguments.length===0){this._shell=this.normalized(this._shell,!0);for(var h=0;h<this._holes.length;h++)this._holes[h]=this.normalized(this._holes[h],!1);bn.sort(this._holes)}else if(arguments.length===2){var g=arguments[0],x=arguments[1];if(g.isEmpty())return null;var D=g.getCoordinateSequence(),k=Rn.minCoordinateIndex(D,0,D.size()-2);Rn.scroll(D,k,!0),Ke.isCCW(D)===x&&Rn.reverse(D)}}},{key:"getCoordinate",value:function(){return this._shell.getCoordinate()}},{key:"getNumInteriorRing",value:function(){return this._holes.length}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"reverseInternal",value:function(){for(var h=this.getExteriorRing().reverse(),g=new Array(this.getNumInteriorRing()).fill(null),x=0;x<g.length;x++)g[x]=this.getInteriorRingN(x).reverse();return this.getFactory().createPolygon(h,g)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_POLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getLength",value:function(){var h=0;h+=this._shell.getLength();for(var g=0;g<this._holes.length;g++)h+=this._holes[g].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=this._shell.getNumPoints(),g=0;g<this._holes.length;g++)h+=this._holes[g].getNumPoints();return h}},{key:"convexHull",value:function(){return this.getExteriorRing().convexHull()}},{key:"normalized",value:function(h,g){var x=h.copy();return this.normalize(x,g),x}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],g=this._shell,x=h._shell;return g.compareToSameClass(x)}if(arguments.length===2){var D=arguments[1],k=arguments[0],H=this._shell,ie=k._shell,de=H.compareToSameClass(ie,D);if(de!==0)return de;for(var Te=this.getNumInteriorRing(),Pe=k.getNumInteriorRing(),tt=0;tt<Te&&tt<Pe;){var mt=this.getInteriorRingN(tt),At=k.getInteriorRingN(tt),Ht=mt.compareToSameClass(At,D);if(Ht!==0)return Ht;tt++}return tt<Te?1:tt<Pe?-1:0}}},{key:"apply",value:function(){if(Le(arguments[0],Fn)){var h=arguments[0];this._shell.apply(h);for(var g=0;g<this._holes.length;g++)this._holes[g].apply(h)}else if(Le(arguments[0],Jr)){var x=arguments[0];if(this._shell.apply(x),!x.isDone())for(var D=0;D<this._holes.length&&(this._holes[D].apply(x),!x.isDone());D++);x.isGeometryChanged()&&this.geometryChanged()}else if(Le(arguments[0],Fr))arguments[0].filter(this);else if(Le(arguments[0],N)){var k=arguments[0];k.filter(this),this._shell.apply(k);for(var H=0;H<this._holes.length;H++)this._holes[H].apply(k)}}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var h=new Array(this._holes.length+1).fill(null);h[0]=this._shell;for(var g=0;g<this._holes.length;g++)h[g+1]=this._holes[g];return h.length<=1?this.getFactory().createLinearRing(h[0].getCoordinateSequence()):this.getFactory().createMultiLineString(h)}},{key:"getGeometryType",value:function(){return ve.TYPENAME_POLYGON}},{key:"getExteriorRing",value:function(){return this._shell}},{key:"isEmpty",value:function(){return this._shell.isEmpty()}},{key:"getInteriorRingN",value:function(h){return this._holes[h]}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"constructor_",value:function(){this._shell=null,this._holes=null;var h=arguments[0],g=arguments[1],x=arguments[2];if(ve.constructor_.call(this,x),h===null&&(h=this.getFactory().createLinearRing()),g===null&&(g=[]),ve.hasNullElements(g))throw new A("holes must not contain null elements");if(h.isEmpty()&&ve.hasNonEmptyElements(g))throw new A("shell is empty but holes are not");this._shell=h,this._holes=g}}])})(ve),ki=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u)})(Ie),lo=(function(m){function u(h){var g;return t(this,u),(g=e(this,u)).array=[],h instanceof Ve&&g.addAll(h),g}return c(u,m),o(u,[{key:"contains",value:function(h){var g,x=s(this.array);try{for(x.s();!(g=x.n()).done;)if(g.value.compareTo(h)===0)return!0}catch(D){x.e(D)}finally{x.f()}return!1}},{key:"add",value:function(h){if(this.contains(h))return!1;for(var g=0,x=this.array.length;g<x;g++)if(this.array[g].compareTo(h)===1)return!!this.array.splice(g,0,h);return this.array.push(h),!0}},{key:"addAll",value:function(h){var g,x=s(h);try{for(x.s();!(g=x.n()).done;){var D=g.value;this.add(D)}}catch(k){x.e(k)}finally{x.f()}return!0}},{key:"remove",value:function(){throw new be}},{key:"size",value:function(){return this.array.length}},{key:"isEmpty",value:function(){return this.array.length===0}},{key:"toArray",value:function(){return this.array.slice()}},{key:"iterator",value:function(){return new Kc(this.array)}}])})(ki),Kc=(function(){return o(function m(u){t(this,m),this.array=u,this.position=0},[{key:"next",value:function(){if(this.position===this.array.length)throw new G;return this.array[this.position++]}},{key:"hasNext",value:function(){return this.position<this.array.length}},{key:"remove",value:function(){throw new be}}])})(),Oi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeEnvelopeInternal",value:function(){for(var h=new Se,g=0;g<this._geometries.length;g++)h.expandToInclude(this._geometries[g].getEnvelopeInternal());return h}},{key:"getGeometryN",value:function(h){return this._geometries[h]}},{key:"getCoordinates",value:function(){for(var h=new Array(this.getNumPoints()).fill(null),g=-1,x=0;x<this._geometries.length;x++)for(var D=this._geometries[x].getCoordinates(),k=0;k<D.length;k++)h[++g]=D[k];return h}},{key:"getArea",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getArea();return h}},{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];if(!this.isEquivalentClass(h))return!1;var x=h;if(this._geometries.length!==x._geometries.length)return!1;for(var D=0;D<this._geometries.length;D++)if(!this._geometries[D].equalsExact(x._geometries[D],g))return!1;return!0}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"normalize",value:function(){for(var h=0;h<this._geometries.length;h++)this._geometries[h].normalize();bn.sort(this._geometries)}},{key:"getCoordinate",value:function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()}},{key:"getBoundaryDimension",value:function(){for(var h=at.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,this._geometries[g].getBoundaryDimension());return h}},{key:"reverseInternal",value:function(){for(var h=this._geometries.length,g=new pt(h),x=0;x<h;x++)g.add(this._geometries[x].reverse());return this.getFactory().buildGeometry(g)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_GEOMETRYCOLLECTION}},{key:"getDimension",value:function(){for(var h=at.FALSE,g=0;g<this._geometries.length;g++)h=Math.max(h,this._geometries[g].getDimension());return h}},{key:"getLength",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getLength();return h}},{key:"getNumPoints",value:function(){for(var h=0,g=0;g<this._geometries.length;g++)h+=this._geometries[g].getNumPoints();return h}},{key:"getNumGeometries",value:function(){return this._geometries.length}},{key:"compareToSameClass",value:function(){if(arguments.length===1){var h=arguments[0],g=new lo(bn.asList(this._geometries)),x=new lo(bn.asList(h._geometries));return this.compare(g,x)}if(arguments.length===2){for(var D=arguments[1],k=arguments[0],H=this.getNumGeometries(),ie=k.getNumGeometries(),de=0;de<H&&de<ie;){var Te=this.getGeometryN(de),Pe=k.getGeometryN(de),tt=Te.compareToSameClass(Pe,D);if(tt!==0)return tt;de++}return de<H?1:de<ie?-1:0}}},{key:"apply",value:function(){if(Le(arguments[0],Fn))for(var h=arguments[0],g=0;g<this._geometries.length;g++)this._geometries[g].apply(h);else if(Le(arguments[0],Jr)){var x=arguments[0];if(this._geometries.length===0)return null;for(var D=0;D<this._geometries.length&&(this._geometries[D].apply(x),!x.isDone());D++);x.isGeometryChanged()&&this.geometryChanged()}else if(Le(arguments[0],Fr)){var k=arguments[0];k.filter(this);for(var H=0;H<this._geometries.length;H++)this._geometries[H].apply(k)}else if(Le(arguments[0],N)){var ie=arguments[0];ie.filter(this);for(var de=0;de<this._geometries.length;de++)this._geometries[de].apply(ie)}}},{key:"getBoundary",value:function(){return ve.checkNotGeometryCollection(this),F.shouldNeverReachHere(),null}},{key:"getGeometryType",value:function(){return ve.TYPENAME_GEOMETRYCOLLECTION}},{key:"isEmpty",value:function(){for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isEmpty())return!1;return!0}}],[{key:"constructor_",value:function(){if(this._geometries=null,arguments.length!==0){if(arguments.length===2){var h=arguments[0],g=arguments[1];if(ve.constructor_.call(this,g),h===null&&(h=[]),ve.hasNullElements(h))throw new A("geometries must not contain null elements");this._geometries=h}}}}])})(ve),ta=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"isValid",value:function(){return!0}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getCoordinate",value:function(){if(arguments.length===1&&Number.isInteger(arguments[0])){var h=arguments[0];return this._geometries[h].getCoordinate()}return y(u,"getCoordinate",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOINT}},{key:"getDimension",value:function(){return 0}},{key:"getBoundary",value:function(){return this.getFactory().createGeometryCollection()}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOINT}},{key:"interfaces_",get:function(){return[Rt]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Oi.constructor_.call(this,h,g)}}])})(Oi),Es=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){return new u(this._points.copy(),this._factory)}},{key:"getBoundaryDimension",value:function(){return at.FALSE}},{key:"isClosed",value:function(){return!!this.isEmpty()||y(u,"isClosed",this,1).call(this)}},{key:"reverseInternal",value:function(){var h=this._points.copy();return Rn.reverse(h),this.getFactory().createLinearRing(h)}},{key:"getTypeCode",value:function(){return ve.TYPECODE_LINEARRING}},{key:"validateConstruction",value:function(){if(!this.isEmpty()&&!y(u,"isClosed",this,1).call(this))throw new A("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<u.MINIMUM_VALID_SIZE)throw new A("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")}},{key:"getGeometryType",value:function(){return ve.TYPENAME_LINEARRING}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Qr.constructor_.call(this,h,g),this.validateConstruction()}}])})(Qr);Es.MINIMUM_VALID_SIZE=4;var So=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"setOrdinate",value:function(h,g){switch(h){case u.X:this.x=g;break;case u.Y:this.y=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"getZ",value:function(){return J.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case u.X:return this.x;case u.Y:return this.y}throw new A("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ()}}],[{key:"constructor_",value:function(){if(arguments.length===0)J.constructor_.call(this);else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h.x,h.y)}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g.x,g.y)}}else if(arguments.length===2){var x=arguments[0],D=arguments[1];J.constructor_.call(this,x,D,J.NULL_ORDINATE)}}}])})(J);So.X=0,So.Y=1,So.Z=-1,So.M=-1;var Co=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,g){switch(h){case u.X:this.x=g;break;case u.Y:this.y=g;break;case u.M:this._m=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getZ",value:function(){return J.NULL_ORDINATE}},{key:"getOrdinate",value:function(h){switch(h){case u.X:return this.x;case u.Y:return this.y;case u.M:return this._m}throw new A("Invalid ordinate index: "+h)}},{key:"setZ",value:function(h){throw new A("CoordinateXY dimension 2 does not support z-ordinate")}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)J.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h.x,h.y),this._m=h._m}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g.x,g.y),this._m=this.getM()}}else if(arguments.length===3){var x=arguments[0],D=arguments[1],k=arguments[2];J.constructor_.call(this,x,D,J.NULL_ORDINATE),this._m=k}}}])})(J);Co.X=0,Co.Y=1,Co.Z=-1,Co.M=2;var bs=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getM",value:function(){return this._m}},{key:"setOrdinate",value:function(h,g){switch(h){case J.X:this.x=g;break;case J.Y:this.y=g;break;case J.Z:this.z=g;break;case J.M:this._m=g;break;default:throw new A("Invalid ordinate index: "+h)}}},{key:"setM",value:function(h){this._m=h}},{key:"getOrdinate",value:function(h){switch(h){case J.X:return this.x;case J.Y:return this.y;case J.Z:return this.getZ();case J.M:return this.getM()}throw new A("Invalid ordinate index: "+h)}},{key:"copy",value:function(){return new u(this)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+", "+this.getZ()+" m="+this.getM()+")"}},{key:"setCoordinate",value:function(h){this.x=h.x,this.y=h.y,this.z=h.getZ(),this._m=h.getM()}}],[{key:"constructor_",value:function(){if(this._m=null,arguments.length===0)J.constructor_.call(this),this._m=0;else if(arguments.length===1){if(arguments[0]instanceof u){var h=arguments[0];J.constructor_.call(this,h),this._m=h._m}else if(arguments[0]instanceof J){var g=arguments[0];J.constructor_.call(this,g),this._m=this.getM()}}else if(arguments.length===4){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3];J.constructor_.call(this,x,D,k),this._m=H}}}])})(J),Cl=(function(){function m(){t(this,m)}return o(m,null,[{key:"measures",value:function(u){return u instanceof So?0:u instanceof Co||u instanceof bs?1:0}},{key:"dimension",value:function(u){return u instanceof So?2:u instanceof Co?3:u instanceof bs?4:3}},{key:"create",value:function(){if(arguments.length===1){var u=arguments[0];return m.create(u,0)}if(arguments.length===2){var h=arguments[0],g=arguments[1];return h===2?new So:h===3&&g===0?new J:h===3&&g===1?new Co:h===4&&g===1?new bs:new J}}}])})(),Ss=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getCoordinate",value:function(h){return this.get(h)}},{key:"addAll",value:function(){if(arguments.length===2&&typeof arguments[1]=="boolean"&&Le(arguments[0],Ve)){for(var h=arguments[1],g=!1,x=arguments[0].iterator();x.hasNext();)this.add(x.next(),h),g=!0;return g}return y(u,"addAll",this,1).apply(this,arguments)}},{key:"clone",value:function(){for(var h=y(u,"clone",this,1).call(this),g=0;g<this.size();g++)h.add(g,this.get(g).clone());return h}},{key:"toCoordinateArray",value:function(){if(arguments.length===0)return this.toArray(u.coordArrayType);if(arguments.length===1){if(arguments[0])return this.toArray(u.coordArrayType);for(var h=this.size(),g=new Array(h).fill(null),x=0;x<h;x++)g[x]=this.get(h-x-1);return g}}},{key:"add",value:function(){if(arguments.length===1){var h=arguments[0];return y(u,"add",this,1).call(this,h)}if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var g=arguments[0],x=arguments[1];return this.add(g,x,!0),!0}if(arguments[0]instanceof J&&typeof arguments[1]=="boolean"){var D=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(D))return null;y(u,"add",this,1).call(this,D)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var k=arguments[0],H=arguments[1];return this.add(k,H),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var ie=arguments[0],de=arguments[1];if(arguments[2])for(var Te=0;Te<ie.length;Te++)this.add(ie[Te],de);else for(var Pe=ie.length-1;Pe>=0;Pe--)this.add(ie[Pe],de);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof J){var tt=arguments[0],mt=arguments[1];if(!arguments[2]){var At=this.size();if(At>0&&(tt>0&&this.get(tt-1).equals2D(mt)||tt<At&&this.get(tt).equals2D(mt)))return null}y(u,"add",this,1).call(this,tt,mt)}}else if(arguments.length===4){var Ht=arguments[0],Jn=arguments[1],qn=arguments[2],Mr=arguments[3],ho=1;qn>Mr&&(ho=-1);for(var Ro=qn;Ro!==Mr;Ro+=ho)this.add(Ht[Ro],Jn);return!0}}},{key:"closeRing",value:function(){if(this.size()>0){var h=this.get(0).copy();this.add(h,!1)}}}],[{key:"constructor_",value:function(){if(arguments.length!==0){if(arguments.length===1){var h=arguments[0];this.ensureCapacity(h.length),this.add(h,!0)}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.ensureCapacity(g.length),this.add(g,x)}}}}])})(pt);Ss.coordArrayType=new Array(0).fill(null);var ei=(function(){function m(){t(this,m)}return o(m,null,[{key:"isRing",value:function(u){return!(u.length<4)&&!!u[0].equals2D(u[u.length-1])}},{key:"ptNotInList",value:function(u,h){for(var g=0;g<u.length;g++){var x=u[g];if(m.indexOf(x,h)<0)return x}return null}},{key:"scroll",value:function(u,h){var g=m.indexOf(h,u);if(g<0)return null;var x=new Array(u.length).fill(null);Tt.arraycopy(u,g,x,0,u.length-g),Tt.arraycopy(u,0,x,u.length-g,g),Tt.arraycopy(x,0,u,0,u.length)}},{key:"equals",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];if(u===h)return!0;if(u===null||h===null||u.length!==h.length)return!1;for(var g=0;g<u.length;g++)if(!u[g].equals(h[g]))return!1;return!0}if(arguments.length===3){var x=arguments[0],D=arguments[1],k=arguments[2];if(x===D)return!0;if(x===null||D===null||x.length!==D.length)return!1;for(var H=0;H<x.length;H++)if(k.compare(x[H],D[H])!==0)return!1;return!0}}},{key:"intersection",value:function(u,h){for(var g=new Ss,x=0;x<u.length;x++)h.intersects(u[x])&&g.add(u[x],!0);return g.toCoordinateArray()}},{key:"measures",value:function(u){if(u===null||u.length===0)return 0;var h,g=0,x=s(u);try{for(x.s();!(h=x.n()).done;){var D=h.value;g=Math.max(g,Cl.measures(D))}}catch(k){x.e(k)}finally{x.f()}return g}},{key:"hasRepeatedPoints",value:function(u){for(var h=1;h<u.length;h++)if(u[h-1].equals(u[h]))return!0;return!1}},{key:"removeRepeatedPoints",value:function(u){return m.hasRepeatedPoints(u)?new Ss(u,!1).toCoordinateArray():u}},{key:"reverse",value:function(u){for(var h=u.length-1,g=Math.trunc(h/2),x=0;x<=g;x++){var D=u[x];u[x]=u[h-x],u[h-x]=D}}},{key:"removeNull",value:function(u){for(var h=0,g=0;g<u.length;g++)u[g]!==null&&h++;var x=new Array(h).fill(null);if(h===0)return x;for(var D=0,k=0;k<u.length;k++)u[k]!==null&&(x[D++]=u[k]);return x}},{key:"copyDeep",value:function(){if(arguments.length===1){for(var u=arguments[0],h=new Array(u.length).fill(null),g=0;g<u.length;g++)h[g]=u[g].copy();return h}if(arguments.length===5)for(var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3],ie=arguments[4],de=0;de<ie;de++)k[H+de]=x[D+de].copy()}},{key:"isEqualReversed",value:function(u,h){for(var g=0;g<u.length;g++){var x=u[g],D=h[u.length-g-1];if(x.compareTo(D)!==0)return!1}return!0}},{key:"envelope",value:function(u){for(var h=new Se,g=0;g<u.length;g++)h.expandToInclude(u[g]);return h}},{key:"toCoordinateArray",value:function(u){return u.toArray(m.coordArrayType)}},{key:"dimension",value:function(u){if(u===null||u.length===0)return 3;var h,g=0,x=s(u);try{for(x.s();!(h=x.n()).done;){var D=h.value;g=Math.max(g,Cl.dimension(D))}}catch(k){x.e(k)}finally{x.f()}return g}},{key:"atLeastNCoordinatesOrNothing",value:function(u,h){return h.length>=u?h:[]}},{key:"indexOf",value:function(u,h){for(var g=0;g<h.length;g++)if(u.equals(h[g]))return g;return-1}},{key:"increasingDirection",value:function(u){for(var h=0;h<Math.trunc(u.length/2);h++){var g=u.length-1-h,x=u[h].compareTo(u[g]);if(x!==0)return x}return 1}},{key:"compare",value:function(u,h){for(var g=0;g<u.length&&g<h.length;){var x=u[g].compareTo(h[g]);if(x!==0)return x;g++}return g<h.length?-1:g<u.length?1:0}},{key:"minCoordinate",value:function(u){for(var h=null,g=0;g<u.length;g++)(h===null||h.compareTo(u[g])>0)&&(h=u[g]);return h}},{key:"extract",value:function(u,h,g){h=ir.clamp(h,0,u.length);var x=(g=ir.clamp(g,-1,u.length))-h+1;g<0&&(x=0),h>=u.length&&(x=0),g<h&&(x=0);var D=new Array(x).fill(null);if(x===0)return D;for(var k=0,H=h;H<=g;H++)D[k++]=u[H];return D}}])})(),yf=(function(){return o(function m(){t(this,m)},[{key:"compare",value:function(m,u){var h=m,g=u;return ei.compare(h,g)}},{key:"interfaces_",get:function(){return[K]}}])})(),_f=(function(){return o(function m(){t(this,m)},[{key:"compare",value:function(m,u){var h=m,g=u;if(h.length<g.length)return-1;if(h.length>g.length)return 1;if(h.length===0)return 0;var x=ei.compare(h,g);return ei.isEqualReversed(h,g)?0:x}},{key:"OLDcompare",value:function(m,u){var h=m,g=u;if(h.length<g.length)return-1;if(h.length>g.length)return 1;if(h.length===0)return 0;for(var x=ei.increasingDirection(h),D=ei.increasingDirection(g),k=x>0?0:h.length-1,H=D>0?0:h.length-1,ie=0;ie<h.length;ie++){var de=h[k].compareTo(g[H]);if(de!==0)return de;k+=x,H+=D}return 0}},{key:"interfaces_",get:function(){return[K]}}])})();ei.ForwardComparator=yf,ei.BidirectionalComparator=_f,ei.coordArrayType=new Array(0).fill(null);var du=(function(){return o(function m(u){t(this,m),this.str=u},[{key:"append",value:function(m){this.str+=m}},{key:"setCharAt",value:function(m,u){this.str=this.str.substr(0,m)+u+this.str.substr(m+1)}},{key:"toString",value:function(){return this.str}}])})(),Jc=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getM",value:function(u){return this.hasM()?this._coordinates[u].getM():q.NaN}},{key:"setOrdinate",value:function(u,h,g){switch(h){case vt.X:this._coordinates[u].x=g;break;case vt.Y:this._coordinates[u].y=g;break;default:this._coordinates[u].setOrdinate(h,g)}}},{key:"getZ",value:function(u){return this.hasZ()?this._coordinates[u].getZ():q.NaN}},{key:"size",value:function(){return this._coordinates.length}},{key:"getOrdinate",value:function(u,h){switch(h){case vt.X:return this._coordinates[u].x;case vt.Y:return this._coordinates[u].y;default:return this._coordinates[u].getOrdinate(h)}}},{key:"getCoordinate",value:function(){if(arguments.length===1){var u=arguments[0];return this._coordinates[u]}if(arguments.length===2){var h=arguments[0];arguments[1].setCoordinate(this._coordinates[h])}}},{key:"getCoordinateCopy",value:function(u){var h=this.createCoordinate();return h.setCoordinate(this._coordinates[u]),h}},{key:"createCoordinate",value:function(){return Cl.create(this.getDimension(),this.getMeasures())}},{key:"getDimension",value:function(){return this._dimension}},{key:"getX",value:function(u){return this._coordinates[u].x}},{key:"getMeasures",value:function(){return this._measures}},{key:"expandEnvelope",value:function(u){for(var h=0;h<this._coordinates.length;h++)u.expandToInclude(this._coordinates[h]);return u}},{key:"copy",value:function(){for(var u=new Array(this.size()).fill(null),h=0;h<this._coordinates.length;h++){var g=this.createCoordinate();g.setCoordinate(this._coordinates[h]),u[h]=g}return new m(u,this._dimension,this._measures)}},{key:"toString",value:function(){if(this._coordinates.length>0){var u=new du(17*this._coordinates.length);u.append("("),u.append(this._coordinates[0]);for(var h=1;h<this._coordinates.length;h++)u.append(", "),u.append(this._coordinates[h]);return u.append(")"),u.toString()}return"()"}},{key:"getY",value:function(u){return this._coordinates[u].y}},{key:"toCoordinateArray",value:function(){return this._coordinates}},{key:"interfaces_",get:function(){return[vt,X]}}],[{key:"constructor_",value:function(){if(this._dimension=3,this._measures=0,this._coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];m.constructor_.call(this,u,ei.dimension(u),ei.measures(u))}else if(Number.isInteger(arguments[0])){var h=arguments[0];this._coordinates=new Array(h).fill(null);for(var g=0;g<h;g++)this._coordinates[g]=new J}else if(Le(arguments[0],vt)){var x=arguments[0];if(x===null)return this._coordinates=new Array(0).fill(null),null;this._dimension=x.getDimension(),this._measures=x.getMeasures(),this._coordinates=new Array(x.size()).fill(null);for(var D=0;D<this._coordinates.length;D++)this._coordinates[D]=x.getCoordinateCopy(D)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var k=arguments[0],H=arguments[1];m.constructor_.call(this,k,H,ei.measures(k))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var ie=arguments[0],de=arguments[1];this._coordinates=new Array(ie).fill(null),this._dimension=de;for(var Te=0;Te<ie;Te++)this._coordinates[Te]=Cl.create(de)}}else if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var Pe=arguments[0],tt=arguments[1],mt=arguments[2];this._dimension=tt,this._measures=mt,this._coordinates=Pe===null?new Array(0).fill(null):Pe}else if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var At=arguments[0],Ht=arguments[1],Jn=arguments[2];this._coordinates=new Array(At).fill(null),this._dimension=Ht,this._measures=Jn;for(var qn=0;qn<At;qn++)this._coordinates[qn]=this.createCoordinate()}}}}])})(),Qc=(function(){function m(){t(this,m)}return o(m,[{key:"readResolve",value:function(){return m.instance()}},{key:"create",value:function(){if(arguments.length===1){if(arguments[0]instanceof Array)return new Jc(arguments[0]);if(Le(arguments[0],vt))return new Jc(arguments[0])}else{if(arguments.length===2){var u=arguments[1];return u>3&&(u=3),u<2&&(u=2),new Jc(arguments[0],u)}if(arguments.length===3){var h=arguments[2],g=arguments[1]-h;return h>1&&(h=1),g>3&&(g=3),g<2&&(g=2),new Jc(arguments[0],g+h,h)}}}},{key:"interfaces_",get:function(){return[Gt,X]}}],[{key:"instance",value:function(){return m.instanceObject}}])})();Qc.instanceObject=new Qc;var vf=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return 1}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTIPOLYGON}},{key:"getDimension",value:function(){return 2}},{key:"getBoundary",value:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var h=new pt,g=0;g<this._geometries.length;g++)for(var x=this._geometries[g].getBoundary(),D=0;D<x.getNumGeometries();D++)h.add(x.getGeometryN(D));var k=new Array(h.size()).fill(null);return this.getFactory().createMultiLineString(h.toArray(k))}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTIPOLYGON}},{key:"interfaces_",get:function(){return[Er]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Oi.constructor_.call(this,h,g)}}])})(Oi),Qd=(function(){return o(function m(){t(this,m)},[{key:"get",value:function(){}},{key:"put",value:function(){}},{key:"size",value:function(){}},{key:"values",value:function(){}},{key:"entrySet",value:function(){}}])})(),Ea=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).map=new Map,h}return c(u,m),o(u,[{key:"get",value:function(h){return this.map.get(h)||null}},{key:"put",value:function(h,g){return this.map.set(h,g),g}},{key:"values",value:function(){for(var h=new pt,g=this.map.values(),x=g.next();!x.done;)h.add(x.value),x=g.next();return h}},{key:"entrySet",value:function(){var h=new U;return this.map.entries().forEach(function(g){return h.add(g)}),h}},{key:"size",value:function(){return this.map.size()}}])})(Qd),os=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this._modelType===h._modelType&&this._scale===h._scale}},{key:"compareTo",value:function(u){var h=u,g=this.getMaximumSignificantDigits(),x=h.getMaximumSignificantDigits();return ft.compare(g,x)}},{key:"getScale",value:function(){return this._scale}},{key:"isFloating",value:function(){return this._modelType===m.FLOATING||this._modelType===m.FLOATING_SINGLE}},{key:"getType",value:function(){return this._modelType}},{key:"toString",value:function(){var u="UNKNOWN";return this._modelType===m.FLOATING?u="Floating":this._modelType===m.FLOATING_SINGLE?u="Floating-Single":this._modelType===m.FIXED&&(u="Fixed (Scale="+this.getScale()+")"),u}},{key:"makePrecise",value:function(){if(typeof arguments[0]=="number"){var u=arguments[0];return q.isNaN(u)||this._modelType===m.FLOATING_SINGLE?u:this._modelType===m.FIXED?Math.round(u*this._scale)/this._scale:u}if(arguments[0]instanceof J){var h=arguments[0];if(this._modelType===m.FLOATING)return null;h.x=this.makePrecise(h.x),h.y=this.makePrecise(h.y)}}},{key:"getMaximumSignificantDigits",value:function(){var u=16;return this._modelType===m.FLOATING?u=16:this._modelType===m.FLOATING_SINGLE?u=6:this._modelType===m.FIXED&&(u=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),u}},{key:"setScale",value:function(u){this._scale=Math.abs(u)}},{key:"interfaces_",get:function(){return[X,O]}}],[{key:"constructor_",value:function(){if(this._modelType=null,this._scale=null,arguments.length===0)this._modelType=m.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof pu){var u=arguments[0];this._modelType=u,u===m.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var h=arguments[0];this._modelType=m.FIXED,this.setScale(h)}else if(arguments[0]instanceof m){var g=arguments[0];this._modelType=g._modelType,this._scale=g._scale}}}},{key:"mostPrecise",value:function(u,h){return u.compareTo(h)>=0?u:h}}])})(),pu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"readResolve",value:function(){return m.nameToTypeMap.get(this._name)}},{key:"toString",value:function(){return this._name}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){this._name=null;var u=arguments[0];this._name=u,m.nameToTypeMap.put(u,this)}}])})();pu.nameToTypeMap=new Ea,os.Type=pu,os.FIXED=new pu("FIXED"),os.FLOATING=new pu("FLOATING"),os.FLOATING_SINGLE=new pu("FLOATING SINGLE"),os.maximumPreciseValue=9007199254740992;var eh=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"copyInternal",value:function(){for(var h=new Array(this._geometries.length).fill(null),g=0;g<h.length;g++)h[g]=this._geometries[g].copy();return new u(h,this._factory)}},{key:"equalsExact",value:function(){if(arguments.length===2&&typeof arguments[1]=="number"&&arguments[0]instanceof ve){var h=arguments[0],g=arguments[1];return!!this.isEquivalentClass(h)&&y(u,"equalsExact",this,1).call(this,h,g)}return y(u,"equalsExact",this,1).apply(this,arguments)}},{key:"getBoundaryDimension",value:function(){return this.isClosed()?at.FALSE:0}},{key:"isClosed",value:function(){if(this.isEmpty())return!1;for(var h=0;h<this._geometries.length;h++)if(!this._geometries[h].isClosed())return!1;return!0}},{key:"getTypeCode",value:function(){return ve.TYPECODE_MULTILINESTRING}},{key:"getDimension",value:function(){return 1}},{key:"getBoundary",value:function(){throw new be}},{key:"getGeometryType",value:function(){return ve.TYPENAME_MULTILINESTRING}},{key:"interfaces_",get:function(){return[qt]}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Oi.constructor_.call(this,h,g)}}])})(Oi),gu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"createEmpty",value:function(u){switch(u){case-1:return this.createGeometryCollection();case 0:return this.createPoint();case 1:return this.createLineString();case 2:return this.createPolygon();default:throw new A("Invalid dimension: "+u)}}},{key:"toGeometry",value:function(u){return u.isNull()?this.createPoint():u.getMinX()===u.getMaxX()&&u.getMinY()===u.getMaxY()?this.createPoint(new J(u.getMinX(),u.getMinY())):u.getMinX()===u.getMaxX()||u.getMinY()===u.getMaxY()?this.createLineString([new J(u.getMinX(),u.getMinY()),new J(u.getMaxX(),u.getMaxY())]):this.createPolygon(this.createLinearRing([new J(u.getMinX(),u.getMinY()),new J(u.getMinX(),u.getMaxY()),new J(u.getMaxX(),u.getMaxY()),new J(u.getMaxX(),u.getMinY()),new J(u.getMinX(),u.getMinY())]),null)}},{key:"createLineString",value:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLineString(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Le(arguments[0],vt))return new Qr(arguments[0],this)}}},{key:"createMultiLineString",value:function(){return arguments.length===0?new eh(null,this):arguments.length===1?new eh(arguments[0],this):void 0}},{key:"buildGeometry",value:function(u){for(var h=null,g=!1,x=!1,D=u.iterator();D.hasNext();){var k=D.next(),H=k.getTypeCode();h===null&&(h=H),H!==h&&(g=!0),k instanceof Oi&&(x=!0)}if(h===null)return this.createGeometryCollection();if(g||x)return this.createGeometryCollection(m.toGeometryArray(u));var ie=u.iterator().next();if(u.size()>1){if(ie instanceof Zn)return this.createMultiPolygon(m.toPolygonArray(u));if(ie instanceof Qr)return this.createMultiLineString(m.toLineStringArray(u));if(ie instanceof wi)return this.createMultiPoint(m.toPointArray(u));F.shouldNeverReachHere("Unhandled geometry type: "+ie.getGeometryType())}return ie}},{key:"createMultiPointFromCoords",value:function(u){return this.createMultiPoint(u!==null?this.getCoordinateSequenceFactory().create(u):null)}},{key:"createPoint",value:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof J){var u=arguments[0];return this.createPoint(u!==null?this.getCoordinateSequenceFactory().create([u]):null)}if(Le(arguments[0],vt))return new wi(arguments[0],this)}}},{key:"getCoordinateSequenceFactory",value:function(){return this._coordinateSequenceFactory}},{key:"createPolygon",value:function(){if(arguments.length===0)return this.createPolygon(null,null);if(arguments.length===1){if(Le(arguments[0],vt)){var u=arguments[0];return this.createPolygon(this.createLinearRing(u))}if(arguments[0]instanceof Array){var h=arguments[0];return this.createPolygon(this.createLinearRing(h))}if(arguments[0]instanceof Es){var g=arguments[0];return this.createPolygon(g,null)}}else if(arguments.length===2)return new Zn(arguments[0],arguments[1],this)}},{key:"getSRID",value:function(){return this._SRID}},{key:"createGeometryCollection",value:function(){return arguments.length===0?new Oi(null,this):arguments.length===1?new Oi(arguments[0],this):void 0}},{key:"getPrecisionModel",value:function(){return this._precisionModel}},{key:"createLinearRing",value:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];return this.createLinearRing(u!==null?this.getCoordinateSequenceFactory().create(u):null)}if(Le(arguments[0],vt))return new Es(arguments[0],this)}}},{key:"createMultiPolygon",value:function(){return arguments.length===0?new vf(null,this):arguments.length===1?new vf(arguments[0],this):void 0}},{key:"createMultiPoint",value:function(){if(arguments.length===0)return new ta(null,this);if(arguments.length===1){if(arguments[0]instanceof Array)return new ta(arguments[0],this);if(Le(arguments[0],vt)){var u=arguments[0];if(u===null)return this.createMultiPoint(new Array(0).fill(null));for(var h=new Array(u.size()).fill(null),g=0;g<u.size();g++){var x=this.getCoordinateSequenceFactory().create(1,u.getDimension(),u.getMeasures());Rn.copy(u,g,x,0,1),h[g]=this.createPoint(x)}return this.createMultiPoint(h)}}}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._precisionModel=null,this._coordinateSequenceFactory=null,this._SRID=null,arguments.length===0)m.constructor_.call(this,new os,0);else if(arguments.length===1){if(Le(arguments[0],Gt)){var u=arguments[0];m.constructor_.call(this,new os,0,u)}else if(arguments[0]instanceof os){var h=arguments[0];m.constructor_.call(this,h,0,m.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];m.constructor_.call(this,g,x,m.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var D=arguments[0],k=arguments[1],H=arguments[2];this._precisionModel=D,this._coordinateSequenceFactory=H,this._SRID=k}}},{key:"toMultiPolygonArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toGeometryArray",value:function(u){if(u===null)return null;var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"getDefaultCoordinateSequenceFactory",value:function(){return Qc.instance()}},{key:"toMultiLineStringArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toLineStringArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toMultiPointArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toLinearRingArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toPointArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"toPolygonArray",value:function(u){var h=new Array(u.size()).fill(null);return u.toArray(h)}},{key:"createPointFromInternalCoord",value:function(u,h){return h.getPrecisionModel().makePrecise(u),h.getFactory().createPoint(u)}}])})(),xf="XY",Yg="XYZ",Il="XYM",wf="XYZM",Xg={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Ei="EMPTY",th=1,uo=2,na=3,ep=4,Io=5,Wi=6;for(var mu in Xg)Xg[mu].toUpperCase();var Zg=(function(){return o(function m(u){t(this,m),this.wkt=u,this.index_=-1},[{key:"isAlpha_",value:function(m){return m>="a"&&m<="z"||m>="A"&&m<="Z"}},{key:"isNumeric_",value:function(m,u){return m>="0"&&m<="9"||m=="."&&!(u!==void 0&&u)}},{key:"isWhiteSpace_",value:function(m){return m==" "||m=="	"||m=="\r"||m==`
`}},{key:"nextChar_",value:function(){return this.wkt.charAt(++this.index_)}},{key:"nextToken",value:function(){var m,u=this.nextChar_(),h=this.index_,g=u;if(u=="(")m=uo;else if(u==",")m=Io;else if(u==")")m=na;else if(this.isNumeric_(u)||u=="-")m=ep,g=this.readNumber_();else if(this.isAlpha_(u))m=th,g=this.readText_();else{if(this.isWhiteSpace_(u))return this.nextToken();if(u!=="")throw new Error("Unexpected character: "+u);m=Wi}return{position:h,value:g,type:m}}},{key:"readNumber_",value:function(){var m,u=this.index_,h=!1,g=!1;do m=="."?h=!0:m!="e"&&m!="E"||(g=!0),m=this.nextChar_();while(this.isNumeric_(m,h)||!g&&(m=="e"||m=="E")||g&&(m=="-"||m=="+"));return parseFloat(this.wkt.substring(u,this.index_--))}},{key:"readText_",value:function(){var m,u=this.index_;do m=this.nextChar_();while(this.isAlpha_(m));return this.wkt.substring(u,this.index_--).toUpperCase()}}])})(),f_=(function(){return o(function m(u,h){t(this,m),this.lexer_=u,this.token_,this.layout_=xf,this.factory=h},[{key:"consume_",value:function(){this.token_=this.lexer_.nextToken()}},{key:"isTokenType",value:function(m){return this.token_.type==m}},{key:"match",value:function(m){var u=this.isTokenType(m);return u&&this.consume_(),u}},{key:"parse",value:function(){return this.consume_(),this.parseGeometry_()}},{key:"parseGeometryLayout_",value:function(){var m=xf,u=this.token_;if(this.isTokenType(th)){var h=u.value;h==="Z"?m=Yg:h==="M"?m=Il:h==="ZM"&&(m=wf),m!==xf&&this.consume_()}return m}},{key:"parseGeometryCollectionText_",value:function(){if(this.match(uo)){var m=[];do m.push(this.parseGeometry_());while(this.match(Io));if(this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePointText_",value:function(){if(this.match(uo)){var m=this.parsePoint_();if(this.match(na))return m}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())}},{key:"parseLineStringText_",value:function(){if(this.match(uo)){var m=this.parsePointList_();if(this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePolygonText_",value:function(){if(this.match(uo)){var m=this.parseLineStringTextList_();if(this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPointText_",value:function(){var m;if(this.match(uo)){if(m=this.token_.type==uo?this.parsePointTextList_():this.parsePointList_(),this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiLineStringText_",value:function(){if(this.match(uo)){var m=this.parseLineStringTextList_();if(this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parseMultiPolygonText_",value:function(){if(this.match(uo)){var m=this.parsePolygonTextList_();if(this.match(na))return m}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())}},{key:"parsePoint_",value:function(){for(var m=[],u=this.layout_.length,h=0;h<u;++h){var g=this.token_;if(!this.match(ep))break;m.push(g.value)}if(m.length==u)return m;throw new Error(this.formatErrorMessage_())}},{key:"parsePointList_",value:function(){for(var m=[this.parsePoint_()];this.match(Io);)m.push(this.parsePoint_());return m}},{key:"parsePointTextList_",value:function(){for(var m=[this.parsePointText_()];this.match(Io);)m.push(this.parsePointText_());return m}},{key:"parseLineStringTextList_",value:function(){for(var m=[this.parseLineStringText_()];this.match(Io);)m.push(this.parseLineStringText_());return m}},{key:"parsePolygonTextList_",value:function(){for(var m=[this.parsePolygonText_()];this.match(Io);)m.push(this.parsePolygonText_());return m}},{key:"isEmptyGeometry_",value:function(){var m=this.isTokenType(th)&&this.token_.value==Ei;return m&&this.consume_(),m}},{key:"formatErrorMessage_",value:function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}},{key:"parseGeometry_",value:function(){var m=this.factory,u=function(Ht){return r(J,p(Ht))},h=function(Ht){var Jn=Ht.map(function(qn){return m.createLinearRing(qn.map(u))});return Jn.length>1?m.createPolygon(Jn[0],Jn.slice(1)):m.createPolygon(Jn[0])},g=this.token_;if(this.match(th)){var x=g.value;if(this.layout_=this.parseGeometryLayout_(),x=="GEOMETRYCOLLECTION"){var D=this.parseGeometryCollectionText_();return m.createGeometryCollection(D)}switch(x){case"POINT":var k=this.parsePointText_();return k?m.createPoint(r(J,p(k))):m.createPoint();case"LINESTRING":var H=this.parseLineStringText_().map(u);return m.createLineString(H);case"LINEARRING":var ie=this.parseLineStringText_().map(u);return m.createLinearRing(ie);case"POLYGON":var de=this.parsePolygonText_();return de&&de.length!==0?h(de):m.createPolygon();case"MULTIPOINT":var Te=this.parseMultiPointText_();if(!Te||Te.length===0)return m.createMultiPoint();var Pe=Te.map(u).map(function(Ht){return m.createPoint(Ht)});return m.createMultiPoint(Pe);case"MULTILINESTRING":var tt=this.parseMultiLineStringText_().map(function(Ht){return m.createLineString(Ht.map(u))});return m.createMultiLineString(tt);case"MULTIPOLYGON":var mt=this.parseMultiPolygonText_();if(!mt||mt.length===0)return m.createMultiPolygon();var At=mt.map(h);return m.createMultiPolygon(At);default:throw new Error("Invalid geometry type: "+x)}}throw new Error(this.formatErrorMessage_())}}])})();function Kg(m){if(m.isEmpty())return"";var u=m.getCoordinate(),h=[u.x,u.y];return u.z===void 0||Number.isNaN(u.z)||h.push(u.z),u.m===void 0||Number.isNaN(u.m)||h.push(u.m),h.join(" ")}function Cs(m){for(var u=m.getCoordinates().map(function(D){var k=[D.x,D.y];return D.z===void 0||Number.isNaN(D.z)||k.push(D.z),D.m===void 0||Number.isNaN(D.m)||k.push(D.m),k}),h=[],g=0,x=u.length;g<x;++g)h.push(u[g].join(" "));return h.join(", ")}function tp(m){var u=[];u.push("("+Cs(m.getExteriorRing())+")");for(var h=0,g=m.getNumInteriorRing();h<g;++h)u.push("("+Cs(m.getInteriorRingN(h))+")");return u.join(", ")}var Jg={Point:Kg,LineString:Cs,LinearRing:Cs,Polygon:tp,MultiPoint:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+Kg(m.getGeometryN(h))+")");return u.join(", ")},MultiLineString:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+Cs(m.getGeometryN(h))+")");return u.join(", ")},MultiPolygon:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push("("+tp(m.getGeometryN(h))+")");return u.join(", ")},GeometryCollection:function(m){for(var u=[],h=0,g=m.getNumGeometries();h<g;++h)u.push(nh(m.getGeometryN(h)));return u.join(", ")}};function nh(m){var u=m.getGeometryType(),h=Jg[u];u=u.toUpperCase();var g=(function(x){var D="";if(x.isEmpty())return D;var k=x.getCoordinate();return k.z===void 0||Number.isNaN(k.z)||(D+="Z"),k.m===void 0||Number.isNaN(k.m)||(D+="M"),D})(m);return g.length>0&&(u+=" "+g),m.isEmpty()?u+" "+Ei:u+" ("+h(m)+")"}var rh=(function(){return o(function m(u){t(this,m),this.geometryFactory=u||new gu,this.precisionModel=this.geometryFactory.getPrecisionModel()},[{key:"read",value:function(m){var u=new Zg(m);return new f_(u,this.geometryFactory).parse()}},{key:"write",value:function(m){return nh(m)}}])})(),np=(function(){return o(function m(u){t(this,m),this.parser=new rh(u)},[{key:"write",value:function(m){return this.parser.write(m)}}],[{key:"toLineString",value:function(m,u){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+m.x+" "+m.y+", "+u.x+" "+u.y+" )"}}])})(),$r=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getIndexAlongSegment",value:function(u,h){return this.computeIntLineIndex(),this._intLineIndex[u][h]}},{key:"getTopologySummary",value:function(){var u=new du;return this.isEndPoint()&&u.append(" endpoint"),this._isProper&&u.append(" proper"),this.isCollinear()&&u.append(" collinear"),u.toString()}},{key:"computeIntersection",value:function(u,h,g,x){this._inputLines[0][0]=u,this._inputLines[0][1]=h,this._inputLines[1][0]=g,this._inputLines[1][1]=x,this._result=this.computeIntersect(u,h,g,x)}},{key:"getIntersectionNum",value:function(){return this._result}},{key:"computeIntLineIndex",value:function(){if(arguments.length===0)this._intLineIndex===null&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var u=arguments[0];this.getEdgeDistance(u,0)>this.getEdgeDistance(u,1)?(this._intLineIndex[u][0]=0,this._intLineIndex[u][1]=1):(this._intLineIndex[u][0]=1,this._intLineIndex[u][1]=0)}}},{key:"isProper",value:function(){return this.hasIntersection()&&this._isProper}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"isInteriorIntersection",value:function(){if(arguments.length===0)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(arguments.length===1){for(var u=arguments[0],h=0;h<this._result;h++)if(!this._intPt[h].equals2D(this._inputLines[u][0])&&!this._intPt[h].equals2D(this._inputLines[u][1]))return!0;return!1}}},{key:"getIntersection",value:function(u){return this._intPt[u]}},{key:"isEndPoint",value:function(){return this.hasIntersection()&&!this._isProper}},{key:"hasIntersection",value:function(){return this._result!==m.NO_INTERSECTION}},{key:"getEdgeDistance",value:function(u,h){return m.computeEdgeDistance(this._intPt[h],this._inputLines[u][0],this._inputLines[u][1])}},{key:"isCollinear",value:function(){return this._result===m.COLLINEAR_INTERSECTION}},{key:"toString",value:function(){return np.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+np.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()}},{key:"getEndpoint",value:function(u,h){return this._inputLines[u][h]}},{key:"isIntersection",value:function(u){for(var h=0;h<this._result;h++)if(this._intPt[h].equals2D(u))return!0;return!1}},{key:"getIntersectionAlongSegment",value:function(u,h){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[u][h]]}}],[{key:"constructor_",value:function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new J,this._intPt[1]=new J,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}},{key:"computeEdgeDistance",value:function(u,h,g){var x=Math.abs(g.x-h.x),D=Math.abs(g.y-h.y),k=-1;if(u.equals(h))k=0;else if(u.equals(g))k=x>D?x:D;else{var H=Math.abs(u.x-h.x),ie=Math.abs(u.y-h.y);(k=x>D?H:ie)!==0||u.equals(h)||(k=Math.max(H,ie))}return F.isTrue(!(k===0&&!u.equals(h)),"Bad distance calculation"),k}},{key:"nonRobustComputeEdgeDistance",value:function(u,h,g){var x=u.x-h.x,D=u.y-h.y,k=Math.sqrt(x*x+D*D);return F.isTrue(!(k===0&&!u.equals(h)),"Invalid distance calculation"),k}}])})();$r.DONT_INTERSECT=0,$r.DO_INTERSECT=1,$r.COLLINEAR=2,$r.NO_INTERSECTION=0,$r.POINT_INTERSECTION=1,$r.COLLINEAR_INTERSECTION=2;var yu=(function(m){function u(){return t(this,u),e(this,u)}return c(u,m),o(u,[{key:"isInSegmentEnvelopes",value:function(h){var g=new Se(this._inputLines[0][0],this._inputLines[0][1]),x=new Se(this._inputLines[1][0],this._inputLines[1][1]);return g.contains(h)&&x.contains(h)}},{key:"computeIntersection",value:function(){if(arguments.length!==3)return y(u,"computeIntersection",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1],x=arguments[2];if(this._isProper=!1,Se.intersects(g,x,h)&&Ke.index(g,x,h)===0&&Ke.index(x,g,h)===0)return this._isProper=!0,(h.equals(g)||h.equals(x))&&(this._isProper=!1),this._result=$r.POINT_INTERSECTION,null;this._result=$r.NO_INTERSECTION}},{key:"intersection",value:function(h,g,x,D){var k=this.intersectionSafe(h,g,x,D);return this.isInSegmentEnvelopes(k)||(k=new J(u.nearestEndpoint(h,g,x,D))),this._precisionModel!==null&&this._precisionModel.makePrecise(k),k}},{key:"checkDD",value:function(h,g,x,D,k){var H=Vt.intersection(h,g,x,D),ie=this.isInSegmentEnvelopes(H);Tt.out.println("DD in env = "+ie+"  --------------------- "+H),k.distance(H)>1e-4&&Tt.out.println("Distance = "+k.distance(H))}},{key:"intersectionSafe",value:function(h,g,x,D){var k=hr.intersection(h,g,x,D);return k===null&&(k=u.nearestEndpoint(h,g,x,D)),k}},{key:"computeCollinearIntersection",value:function(h,g,x,D){var k=Se.intersects(h,g,x),H=Se.intersects(h,g,D),ie=Se.intersects(x,D,h),de=Se.intersects(x,D,g);return k&&H?(this._intPt[0]=x,this._intPt[1]=D,$r.COLLINEAR_INTERSECTION):ie&&de?(this._intPt[0]=h,this._intPt[1]=g,$r.COLLINEAR_INTERSECTION):k&&ie?(this._intPt[0]=x,this._intPt[1]=h,!x.equals(h)||H||de?$r.COLLINEAR_INTERSECTION:$r.POINT_INTERSECTION):k&&de?(this._intPt[0]=x,this._intPt[1]=g,!x.equals(g)||H||ie?$r.COLLINEAR_INTERSECTION:$r.POINT_INTERSECTION):H&&ie?(this._intPt[0]=D,this._intPt[1]=h,!D.equals(h)||k||de?$r.COLLINEAR_INTERSECTION:$r.POINT_INTERSECTION):H&&de?(this._intPt[0]=D,this._intPt[1]=g,!D.equals(g)||k||ie?$r.COLLINEAR_INTERSECTION:$r.POINT_INTERSECTION):$r.NO_INTERSECTION}},{key:"computeIntersect",value:function(h,g,x,D){if(this._isProper=!1,!Se.intersects(h,g,x,D))return $r.NO_INTERSECTION;var k=Ke.index(h,g,x),H=Ke.index(h,g,D);if(k>0&&H>0||k<0&&H<0)return $r.NO_INTERSECTION;var ie=Ke.index(x,D,h),de=Ke.index(x,D,g);return ie>0&&de>0||ie<0&&de<0?$r.NO_INTERSECTION:k===0&&H===0&&ie===0&&de===0?this.computeCollinearIntersection(h,g,x,D):(k===0||H===0||ie===0||de===0?(this._isProper=!1,h.equals2D(x)||h.equals2D(D)?this._intPt[0]=h:g.equals2D(x)||g.equals2D(D)?this._intPt[0]=g:k===0?this._intPt[0]=new J(x):H===0?this._intPt[0]=new J(D):ie===0?this._intPt[0]=new J(h):de===0&&(this._intPt[0]=new J(g))):(this._isProper=!0,this._intPt[0]=this.intersection(h,g,x,D)),$r.POINT_INTERSECTION)}}],[{key:"nearestEndpoint",value:function(h,g,x,D){var k=h,H=Dt.pointToSegment(h,x,D),ie=Dt.pointToSegment(g,x,D);return ie<H&&(H=ie,k=g),(ie=Dt.pointToSegment(x,h,g))<H&&(H=ie,k=x),(ie=Dt.pointToSegment(D,h,g))<H&&(H=ie,k=D),k}}])})($r),rp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"countSegment",value:function(u,h){if(u.x<this._p.x&&h.x<this._p.x)return null;if(this._p.x===h.x&&this._p.y===h.y)return this._isPointOnSegment=!0,null;if(u.y===this._p.y&&h.y===this._p.y){var g=u.x,x=h.x;return g>x&&(g=h.x,x=u.x),this._p.x>=g&&this._p.x<=x&&(this._isPointOnSegment=!0),null}if(u.y>this._p.y&&h.y<=this._p.y||h.y>this._p.y&&u.y<=this._p.y){var D=Ke.index(u,h,this._p);if(D===Ke.COLLINEAR)return this._isPointOnSegment=!0,null;h.y<u.y&&(D=-D),D===Ke.LEFT&&this._crossingCount++}}},{key:"isPointInPolygon",value:function(){return this.getLocation()!==re.EXTERIOR}},{key:"getLocation",value:function(){return this._isPointOnSegment?re.BOUNDARY:this._crossingCount%2==1?re.INTERIOR:re.EXTERIOR}},{key:"isOnSegment",value:function(){return this._isPointOnSegment}}],[{key:"constructor_",value:function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var u=arguments[0];this._p=u}},{key:"locatePointInRing",value:function(){if(arguments[0]instanceof J&&Le(arguments[1],vt)){for(var u=arguments[1],h=new m(arguments[0]),g=new J,x=new J,D=1;D<u.size();D++)if(u.getCoordinate(D,g),u.getCoordinate(D-1,x),h.countSegment(g,x),h.isOnSegment())return h.getLocation();return h.getLocation()}if(arguments[0]instanceof J&&arguments[1]instanceof Array){for(var k=arguments[1],H=new m(arguments[0]),ie=1;ie<k.length;ie++){var de=k[ie],Te=k[ie-1];if(H.countSegment(de,Te),H.isOnSegment())return H.getLocation()}return H.getLocation()}}}])})(),Ef=(function(){function m(){t(this,m)}return o(m,null,[{key:"isOnLine",value:function(){if(arguments[0]instanceof J&&Le(arguments[1],vt)){for(var u=arguments[0],h=arguments[1],g=new yu,x=new J,D=new J,k=h.size(),H=1;H<k;H++)if(h.getCoordinate(H-1,x),h.getCoordinate(H,D),g.computeIntersection(u,x,D),g.hasIntersection())return!0;return!1}if(arguments[0]instanceof J&&arguments[1]instanceof Array){for(var ie=arguments[0],de=arguments[1],Te=new yu,Pe=1;Pe<de.length;Pe++){var tt=de[Pe-1],mt=de[Pe];if(Te.computeIntersection(ie,tt,mt),Te.hasIntersection())return!0}return!1}}},{key:"locateInRing",value:function(u,h){return rp.locatePointInRing(u,h)}},{key:"isInRing",value:function(u,h){return m.locateInRing(u,h)!==re.EXTERIOR}}])})(),di=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"setAllLocations",value:function(u){for(var h=0;h<this.location.length;h++)this.location[h]=u}},{key:"isNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]!==re.NONE)return!1;return!0}},{key:"setAllLocationsIfNull",value:function(u){for(var h=0;h<this.location.length;h++)this.location[h]===re.NONE&&(this.location[h]=u)}},{key:"isLine",value:function(){return this.location.length===1}},{key:"merge",value:function(u){if(u.location.length>this.location.length){var h=new Array(3).fill(null);h[he.ON]=this.location[he.ON],h[he.LEFT]=re.NONE,h[he.RIGHT]=re.NONE,this.location=h}for(var g=0;g<this.location.length;g++)this.location[g]===re.NONE&&g<u.location.length&&(this.location[g]=u.location[g])}},{key:"getLocations",value:function(){return this.location}},{key:"flip",value:function(){if(this.location.length<=1)return null;var u=this.location[he.LEFT];this.location[he.LEFT]=this.location[he.RIGHT],this.location[he.RIGHT]=u}},{key:"toString",value:function(){var u=new Be;return this.location.length>1&&u.append(re.toLocationSymbol(this.location[he.LEFT])),u.append(re.toLocationSymbol(this.location[he.ON])),this.location.length>1&&u.append(re.toLocationSymbol(this.location[he.RIGHT])),u.toString()}},{key:"setLocations",value:function(u,h,g){this.location[he.ON]=u,this.location[he.LEFT]=h,this.location[he.RIGHT]=g}},{key:"get",value:function(u){return u<this.location.length?this.location[u]:re.NONE}},{key:"isArea",value:function(){return this.location.length>1}},{key:"isAnyNull",value:function(){for(var u=0;u<this.location.length;u++)if(this.location[u]===re.NONE)return!0;return!1}},{key:"setLocation",value:function(){if(arguments.length===1){var u=arguments[0];this.setLocation(he.ON,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.location[h]=g}}},{key:"init",value:function(u){this.location=new Array(u).fill(null),this.setAllLocations(re.NONE)}},{key:"isEqualOnSide",value:function(u,h){return this.location[h]===u.location[h]}},{key:"allPositionsEqual",value:function(u){for(var h=0;h<this.location.length;h++)if(this.location[h]!==u)return!1;return!0}}],[{key:"constructor_",value:function(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var u=arguments[0];this.init(u.length)}else if(Number.isInteger(arguments[0])){var h=arguments[0];this.init(1),this.location[he.ON]=h}else if(arguments[0]instanceof m){var g=arguments[0];if(this.init(g.location.length),g!==null)for(var x=0;x<this.location.length;x++)this.location[x]=g.location[x]}}else if(arguments.length===3){var D=arguments[0],k=arguments[1],H=arguments[2];this.init(3),this.location[he.ON]=D,this.location[he.LEFT]=k,this.location[he.RIGHT]=H}}}])})(),Is=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getGeometryCount",value:function(){var u=0;return this.elt[0].isNull()||u++,this.elt[1].isNull()||u++,u}},{key:"setAllLocations",value:function(u,h){this.elt[u].setAllLocations(h)}},{key:"isNull",value:function(u){return this.elt[u].isNull()}},{key:"setAllLocationsIfNull",value:function(){if(arguments.length===1){var u=arguments[0];this.setAllLocationsIfNull(0,u),this.setAllLocationsIfNull(1,u)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.elt[h].setAllLocationsIfNull(g)}}},{key:"isLine",value:function(u){return this.elt[u].isLine()}},{key:"merge",value:function(u){for(var h=0;h<2;h++)this.elt[h]===null&&u.elt[h]!==null?this.elt[h]=new di(u.elt[h]):this.elt[h].merge(u.elt[h])}},{key:"flip",value:function(){this.elt[0].flip(),this.elt[1].flip()}},{key:"getLocation",value:function(){if(arguments.length===1){var u=arguments[0];return this.elt[u].get(he.ON)}if(arguments.length===2){var h=arguments[0],g=arguments[1];return this.elt[h].get(g)}}},{key:"toString",value:function(){var u=new Be;return this.elt[0]!==null&&(u.append("A:"),u.append(this.elt[0].toString())),this.elt[1]!==null&&(u.append(" B:"),u.append(this.elt[1].toString())),u.toString()}},{key:"isArea",value:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var u=arguments[0];return this.elt[u].isArea()}}},{key:"isAnyNull",value:function(u){return this.elt[u].isAnyNull()}},{key:"setLocation",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.elt[u].setLocation(he.ON,h)}else if(arguments.length===3){var g=arguments[0],x=arguments[1],D=arguments[2];this.elt[g].setLocation(x,D)}}},{key:"isEqualOnSide",value:function(u,h){return this.elt[0].isEqualOnSide(u.elt[0],h)&&this.elt[1].isEqualOnSide(u.elt[1],h)}},{key:"allPositionsEqual",value:function(u,h){return this.elt[u].allPositionsEqual(h)}},{key:"toLine",value:function(u){this.elt[u].isArea()&&(this.elt[u]=new di(this.elt[u].location[0]))}}],[{key:"constructor_",value:function(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var u=arguments[0];this.elt[0]=new di(u),this.elt[1]=new di(u)}else if(arguments[0]instanceof m){var h=arguments[0];this.elt[0]=new di(h.elt[0]),this.elt[1]=new di(h.elt[1])}}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.elt[0]=new di(re.NONE),this.elt[1]=new di(re.NONE),this.elt[g].setLocation(x)}else if(arguments.length===3){var D=arguments[0],k=arguments[1],H=arguments[2];this.elt[0]=new di(D,k,H),this.elt[1]=new di(D,k,H)}else if(arguments.length===4){var ie=arguments[0],de=arguments[1],Te=arguments[2],Pe=arguments[3];this.elt[0]=new di(re.NONE,re.NONE,re.NONE),this.elt[1]=new di(re.NONE,re.NONE,re.NONE),this.elt[ie].setLocations(de,Te,Pe)}}},{key:"toLineLabel",value:function(u){for(var h=new m(re.NONE),g=0;g<2;g++)h.setLocation(g,u.getLocation(g));return h}}])})(),Tl=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"computeRing",value:function(){if(this._ring!==null)return null;for(var m=new Array(this._pts.size()).fill(null),u=0;u<this._pts.size();u++)m[u]=this._pts.get(u);this._ring=this._geometryFactory.createLinearRing(m),this._isHole=Ke.isCCW(this._ring.getCoordinates())}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"computePoints",value:function(m){this._startDe=m;var u=m,h=!0;do{if(u===null)throw new ht("Found null DirectedEdge");if(u.getEdgeRing()===this)throw new ht("Directed Edge visited twice during ring-building at "+u.getCoordinate());this._edges.add(u);var g=u.getLabel();F.isTrue(g.isArea()),this.mergeLabel(g),this.addPoints(u.getEdge(),u.isForward(),h),h=!1,this.setEdgeRing(u,this),u=this.getNext(u)}while(u!==this._startDe)}},{key:"getLinearRing",value:function(){return this._ring}},{key:"getCoordinate",value:function(m){return this._pts.get(m)}},{key:"computeMaxNodeDegree",value:function(){this._maxNodeDegree=0;var m=this._startDe;do{var u=m.getNode().getEdges().getOutgoingDegree(this);u>this._maxNodeDegree&&(this._maxNodeDegree=u),m=this.getNext(m)}while(m!==this._startDe);this._maxNodeDegree*=2}},{key:"addPoints",value:function(m,u,h){var g=m.getCoordinates();if(u){var x=1;h&&(x=0);for(var D=x;D<g.length;D++)this._pts.add(g[D])}else{var k=g.length-2;h&&(k=g.length-1);for(var H=k;H>=0;H--)this._pts.add(g[H])}}},{key:"isHole",value:function(){return this._isHole}},{key:"setInResult",value:function(){var m=this._startDe;do m.getEdge().setInResult(!0),m=m.getNext();while(m!==this._startDe)}},{key:"containsPoint",value:function(m){var u=this.getLinearRing();if(!u.getEnvelopeInternal().contains(m)||!Ef.isInRing(m,u.getCoordinates()))return!1;for(var h=this._holes.iterator();h.hasNext();)if(h.next().containsPoint(m))return!1;return!0}},{key:"addHole",value:function(m){this._holes.add(m)}},{key:"isShell",value:function(){return this._shell===null}},{key:"getLabel",value:function(){return this._label}},{key:"getEdges",value:function(){return this._edges}},{key:"getMaxNodeDegree",value:function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree}},{key:"getShell",value:function(){return this._shell}},{key:"mergeLabel",value:function(){if(arguments.length===1){var m=arguments[0];this.mergeLabel(m,0),this.mergeLabel(m,1)}else if(arguments.length===2){var u=arguments[1],h=arguments[0].getLocation(u,he.RIGHT);if(h===re.NONE)return null;if(this._label.getLocation(u)===re.NONE)return this._label.setLocation(u,h),null}}},{key:"setShell",value:function(m){this._shell=m,m!==null&&m.addHole(this)}},{key:"toPolygon",value:function(m){for(var u=new Array(this._holes.size()).fill(null),h=0;h<this._holes.size();h++)u[h]=this._holes.get(h).getLinearRing();return m.createPolygon(this.getLinearRing(),u)}}],[{key:"constructor_",value:function(){if(this._startDe=null,this._maxNodeDegree=-1,this._edges=new pt,this._pts=new pt,this._label=new Is(re.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new pt,this._geometryFactory=null,arguments.length!==0){if(arguments.length===2){var m=arguments[0],u=arguments[1];this._geometryFactory=u,this.computePoints(m),this.computeRing()}}}}])})(),ip=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"setEdgeRing",value:function(h,g){h.setMinEdgeRing(g)}},{key:"getNext",value:function(h){return h.getNextMin()}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Tl.constructor_.call(this,h,g)}}])})(Tl),d_=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"buildMinimalRings",value:function(){var h=new pt,g=this._startDe;do{if(g.getMinEdgeRing()===null){var x=new ip(g,this._geometryFactory);h.add(x)}g=g.getNext()}while(g!==this._startDe);return h}},{key:"setEdgeRing",value:function(h,g){h.setEdgeRing(g)}},{key:"linkDirectedEdgesForMinimalEdgeRings",value:function(){var h=this._startDe;do h.getNode().getEdges().linkMinimalDirectedEdges(this),h=h.getNext();while(h!==this._startDe)}},{key:"getNext",value:function(h){return h.getNext()}}],[{key:"constructor_",value:function(){var h=arguments[0],g=arguments[1];Tl.constructor_.call(this,h,g)}}])})(Tl),sn=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"setVisited",value:function(m){this._isVisited=m}},{key:"setInResult",value:function(m){this._isInResult=m}},{key:"isCovered",value:function(){return this._isCovered}},{key:"isCoveredSet",value:function(){return this._isCoveredSet}},{key:"setLabel",value:function(m){this._label=m}},{key:"getLabel",value:function(){return this._label}},{key:"setCovered",value:function(m){this._isCovered=m,this._isCoveredSet=!0}},{key:"updateIM",value:function(m){F.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(m)}},{key:"isInResult",value:function(){return this._isInResult}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this._label=m}}}}])})(),bf=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"isIncidentEdgeInResult",value:function(){for(var h=this.getEdges().getEdges().iterator();h.hasNext();)if(h.next().getEdge().isInResult())return!0;return!1}},{key:"isIsolated",value:function(){return this._label.getGeometryCount()===1}},{key:"getCoordinate",value:function(){return this._coord}},{key:"print",value:function(h){h.println("node "+this._coord+" lbl: "+this._label)}},{key:"computeIM",value:function(h){}},{key:"computeMergedLocation",value:function(h,g){var x=re.NONE;if(x=this._label.getLocation(g),!h.isNull(g)){var D=h.getLocation(g);x!==re.BOUNDARY&&(x=D)}return x}},{key:"setLabel",value:function(){if(arguments.length!==2||!Number.isInteger(arguments[1])||!Number.isInteger(arguments[0]))return y(u,"setLabel",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1];this._label===null?this._label=new Is(h,g):this._label.setLocation(h,g)}},{key:"getEdges",value:function(){return this._edges}},{key:"mergeLabel",value:function(){if(arguments[0]instanceof u){var h=arguments[0];this.mergeLabel(h._label)}else if(arguments[0]instanceof Is)for(var g=arguments[0],x=0;x<2;x++){var D=this.computeMergedLocation(g,x);this._label.getLocation(x)===re.NONE&&this._label.setLocation(x,D)}}},{key:"add",value:function(h){this._edges.insert(h),h.setNode(this)}},{key:"setLabelBoundary",value:function(h){if(this._label===null)return null;var g=re.NONE;this._label!==null&&(g=this._label.getLocation(h));var x=null;switch(g){case re.BOUNDARY:x=re.INTERIOR;break;case re.INTERIOR:default:x=re.BOUNDARY}this._label.setLocation(h,x)}}],[{key:"constructor_",value:function(){this._coord=null,this._edges=null;var h=arguments[0],g=arguments[1];this._coord=h,this._edges=g,this._label=new Is(0,re.NONE)}}])})(sn),p_=(function(m){function u(){return t(this,u),e(this,u,arguments)}return c(u,m),o(u)})(Qd);function Qg(m){return m==null?0:m.color}function Mn(m){return m==null?null:m.parent}function co(m,u){m!==null&&(m.color=u)}function op(m){return m==null?null:m.left}function em(m){return m==null?null:m.right}var Dl=(function(m){function u(){var h;return t(this,u),(h=e(this,u)).root_=null,h.size_=0,h}return c(u,m),o(u,[{key:"get",value:function(h){for(var g=this.root_;g!==null;){var x=h.compareTo(g.key);if(x<0)g=g.left;else{if(!(x>0))return g.value;g=g.right}}return null}},{key:"put",value:function(h,g){if(this.root_===null)return this.root_={key:h,value:g,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var x,D,k=this.root_;do if(x=k,(D=h.compareTo(k.key))<0)k=k.left;else{if(!(D>0)){var H=k.value;return k.value=g,H}k=k.right}while(k!==null);var ie={key:h,left:null,right:null,value:g,parent:x,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return D<0?x.left=ie:x.right=ie,this.fixAfterInsertion(ie),this.size_++,null}},{key:"fixAfterInsertion",value:function(h){var g;for(h.color=1;h!=null&&h!==this.root_&&h.parent.color===1;)Mn(h)===op(Mn(Mn(h)))?Qg(g=em(Mn(Mn(h))))===1?(co(Mn(h),0),co(g,0),co(Mn(Mn(h)),1),h=Mn(Mn(h))):(h===em(Mn(h))&&(h=Mn(h),this.rotateLeft(h)),co(Mn(h),0),co(Mn(Mn(h)),1),this.rotateRight(Mn(Mn(h)))):Qg(g=op(Mn(Mn(h))))===1?(co(Mn(h),0),co(g,0),co(Mn(Mn(h)),1),h=Mn(Mn(h))):(h===op(Mn(h))&&(h=Mn(h),this.rotateRight(h)),co(Mn(h),0),co(Mn(Mn(h)),1),this.rotateLeft(Mn(Mn(h))));this.root_.color=0}},{key:"values",value:function(){var h=new pt,g=this.getFirstEntry();if(g!==null)for(h.add(g.value);(g=u.successor(g))!==null;)h.add(g.value);return h}},{key:"entrySet",value:function(){var h=new U,g=this.getFirstEntry();if(g!==null)for(h.add(g);(g=u.successor(g))!==null;)h.add(g);return h}},{key:"rotateLeft",value:function(h){if(h!=null){var g=h.right;h.right=g.left,g.left!=null&&(g.left.parent=h),g.parent=h.parent,h.parent==null?this.root_=g:h.parent.left===h?h.parent.left=g:h.parent.right=g,g.left=h,h.parent=g}}},{key:"rotateRight",value:function(h){if(h!=null){var g=h.left;h.left=g.right,g.right!=null&&(g.right.parent=h),g.parent=h.parent,h.parent==null?this.root_=g:h.parent.right===h?h.parent.right=g:h.parent.left=g,g.right=h,h.parent=g}}},{key:"getFirstEntry",value:function(){var h=this.root_;if(h!=null)for(;h.left!=null;)h=h.left;return h}},{key:"size",value:function(){return this.size_}},{key:"containsKey",value:function(h){for(var g=this.root_;g!==null;){var x=h.compareTo(g.key);if(x<0)g=g.left;else{if(!(x>0))return!0;g=g.right}}return!1}}],[{key:"successor",value:function(h){var g;if(h===null)return null;if(h.right!==null){for(g=h.right;g.left!==null;)g=g.left;return g}g=h.parent;for(var x=h;g!==null&&x===g.right;)x=g,g=g.parent;return g}}])})(p_),Sf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"find",value:function(m){return this.nodeMap.get(m)}},{key:"addNode",value:function(){if(arguments[0]instanceof J){var m=arguments[0],u=this.nodeMap.get(m);return u===null&&(u=this.nodeFact.createNode(m),this.nodeMap.put(m,u)),u}if(arguments[0]instanceof bf){var h=arguments[0],g=this.nodeMap.get(h.getCoordinate());return g===null?(this.nodeMap.put(h.getCoordinate(),h),h):(g.mergeLabel(h),g)}}},{key:"print",value:function(m){for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"iterator",value:function(){return this.nodeMap.values().iterator()}},{key:"values",value:function(){return this.nodeMap.values()}},{key:"getBoundaryNodes",value:function(m){for(var u=new pt,h=this.iterator();h.hasNext();){var g=h.next();g.getLabel().getLocation(m)===re.BOUNDARY&&u.add(g)}return u}},{key:"add",value:function(m){var u=m.getCoordinate();this.addNode(u).add(m)}}],[{key:"constructor_",value:function(){this.nodeMap=new Dl,this.nodeFact=null;var m=arguments[0];this.nodeFact=m}}])})(),bi=(function(){function m(){t(this,m)}return o(m,null,[{key:"isNorthern",value:function(u){return u===m.NE||u===m.NW}},{key:"isOpposite",value:function(u,h){return u!==h&&(u-h+4)%4===2}},{key:"commonHalfPlane",value:function(u,h){if(u===h)return u;if((u-h+4)%4===2)return-1;var g=u<h?u:h;return g===0&&(u>h?u:h)===3?3:g}},{key:"isInHalfPlane",value:function(u,h){return h===m.SE?u===m.SE||u===m.SW:u===h||u===h+1}},{key:"quadrant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new A("Cannot compute the quadrant for point ( "+u+", "+h+" )");return u>=0?h>=0?m.NE:m.SE:h>=0?m.NW:m.SW}if(arguments[0]instanceof J&&arguments[1]instanceof J){var g=arguments[0],x=arguments[1];if(x.x===g.x&&x.y===g.y)throw new A("Cannot compute the quadrant for two identical points "+g);return x.x>=g.x?x.y>=g.y?m.NE:m.SE:x.y>=g.y?m.NW:m.SW}}}])})();bi.NE=0,bi.NW=1,bi.SW=2,bi.SE=3;var tm=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compareDirection",value:function(u){return this._dx===u._dx&&this._dy===u._dy?0:this._quadrant>u._quadrant?1:this._quadrant<u._quadrant?-1:Ke.index(u._p0,u._p1,this._p1)}},{key:"getDy",value:function(){return this._dy}},{key:"getCoordinate",value:function(){return this._p0}},{key:"setNode",value:function(u){this._node=u}},{key:"print",value:function(u){var h=Math.atan2(this._dy,this._dx),g=this.getClass().getName(),x=g.lastIndexOf("."),D=g.substring(x+1);u.print("  "+D+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+h+"   "+this._label)}},{key:"compareTo",value:function(u){var h=u;return this.compareDirection(h)}},{key:"getDirectedCoordinate",value:function(){return this._p1}},{key:"getDx",value:function(){return this._dx}},{key:"getLabel",value:function(){return this._label}},{key:"getEdge",value:function(){return this._edge}},{key:"getQuadrant",value:function(){return this._quadrant}},{key:"getNode",value:function(){return this._node}},{key:"toString",value:function(){var u=Math.atan2(this._dy,this._dx),h=this.getClass().getName(),g=h.lastIndexOf(".");return"  "+h.substring(g+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+u+"   "+this._label}},{key:"computeLabel",value:function(u){}},{key:"init",value:function(u,h){this._p0=u,this._p1=h,this._dx=h.x-u.x,this._dy=h.y-u.y,this._quadrant=bi.quadrant(this._dx,this._dy),F.isTrue(!(this._dx===0&&this._dy===0),"EdgeEnd with identical endpoints found")}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,arguments.length===1){var u=arguments[0];this._edge=u}else if(arguments.length===3){var h=arguments[0],g=arguments[1],x=arguments[2];m.constructor_.call(this,h,g,x,null)}else if(arguments.length===4){var D=arguments[0],k=arguments[1],H=arguments[2],ie=arguments[3];m.constructor_.call(this,D),this.init(k,H),this._label=ie}}}])})(),Ja=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getNextMin",value:function(){return this._nextMin}},{key:"getDepth",value:function(h){return this._depth[h]}},{key:"setVisited",value:function(h){this._isVisited=h}},{key:"computeDirectedLabel",value:function(){this._label=new Is(this._edge.getLabel()),this._isForward||this._label.flip()}},{key:"getNext",value:function(){return this._next}},{key:"setDepth",value:function(h,g){if(this._depth[h]!==-999&&this._depth[h]!==g)throw new ht("assigned depths do not match",this.getCoordinate());this._depth[h]=g}},{key:"isInteriorAreaEdge",value:function(){for(var h=!0,g=0;g<2;g++)this._label.isArea(g)&&this._label.getLocation(g,he.LEFT)===re.INTERIOR&&this._label.getLocation(g,he.RIGHT)===re.INTERIOR||(h=!1);return h}},{key:"setNextMin",value:function(h){this._nextMin=h}},{key:"print",value:function(h){y(u,"print",this,1).call(this,h),h.print(" "+this._depth[he.LEFT]+"/"+this._depth[he.RIGHT]),h.print(" ("+this.getDepthDelta()+")"),this._isInResult&&h.print(" inResult")}},{key:"setMinEdgeRing",value:function(h){this._minEdgeRing=h}},{key:"isLineEdge",value:function(){var h=this._label.isLine(0)||this._label.isLine(1),g=!this._label.isArea(0)||this._label.allPositionsEqual(0,re.EXTERIOR),x=!this._label.isArea(1)||this._label.allPositionsEqual(1,re.EXTERIOR);return h&&g&&x}},{key:"setEdgeRing",value:function(h){this._edgeRing=h}},{key:"getMinEdgeRing",value:function(){return this._minEdgeRing}},{key:"getDepthDelta",value:function(){var h=this._edge.getDepthDelta();return this._isForward||(h=-h),h}},{key:"setInResult",value:function(h){this._isInResult=h}},{key:"getSym",value:function(){return this._sym}},{key:"isForward",value:function(){return this._isForward}},{key:"getEdge",value:function(){return this._edge}},{key:"printEdge",value:function(h){this.print(h),h.print(" "),this._isForward?this._edge.print(h):this._edge.printReverse(h)}},{key:"setSym",value:function(h){this._sym=h}},{key:"setVisitedEdge",value:function(h){this.setVisited(h),this._sym.setVisited(h)}},{key:"setEdgeDepths",value:function(h,g){var x=this.getEdge().getDepthDelta();this._isForward||(x=-x);var D=1;h===he.LEFT&&(D=-1);var k=he.opposite(h),H=g+x*D;this.setDepth(h,g),this.setDepth(k,H)}},{key:"getEdgeRing",value:function(){return this._edgeRing}},{key:"isInResult",value:function(){return this._isInResult}},{key:"setNext",value:function(h){this._next=h}},{key:"isVisited",value:function(){return this._isVisited}}],[{key:"constructor_",value:function(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999];var h=arguments[0],g=arguments[1];if(tm.constructor_.call(this,h),this._isForward=g,g)this.init(h.getCoordinate(0),h.getCoordinate(1));else{var x=h.getNumPoints()-1;this.init(h.getCoordinate(x),h.getCoordinate(x-1))}this.computeDirectedLabel()}},{key:"depthFactor",value:function(h,g){return h===re.EXTERIOR&&g===re.INTERIOR?1:h===re.INTERIOR&&g===re.EXTERIOR?-1:0}}])})(tm),nm=(function(){return o(function m(){t(this,m)},[{key:"createNode",value:function(m){return new bf(m,null)}}])})(),Cf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"printEdges",value:function(m){m.println("Edges:");for(var u=0;u<this._edges.size();u++){m.println("edge "+u+":");var h=this._edges.get(u);h.print(m),h.eiList.print(m)}}},{key:"find",value:function(m){return this._nodes.find(m)}},{key:"addNode",value:function(){if(arguments[0]instanceof bf){var m=arguments[0];return this._nodes.addNode(m)}if(arguments[0]instanceof J){var u=arguments[0];return this._nodes.addNode(u)}}},{key:"getNodeIterator",value:function(){return this._nodes.iterator()}},{key:"linkResultDirectedEdges",value:function(){for(var m=this._nodes.iterator();m.hasNext();)m.next().getEdges().linkResultDirectedEdges()}},{key:"debugPrintln",value:function(m){Tt.out.println(m)}},{key:"isBoundaryNode",value:function(m,u){var h=this._nodes.find(u);if(h===null)return!1;var g=h.getLabel();return g!==null&&g.getLocation(m)===re.BOUNDARY}},{key:"linkAllDirectedEdges",value:function(){for(var m=this._nodes.iterator();m.hasNext();)m.next().getEdges().linkAllDirectedEdges()}},{key:"matchInSameDirection",value:function(m,u,h,g){return!!m.equals(h)&&Ke.index(m,u,g)===Ke.COLLINEAR&&bi.quadrant(m,u)===bi.quadrant(h,g)}},{key:"getEdgeEnds",value:function(){return this._edgeEndList}},{key:"debugPrint",value:function(m){Tt.out.print(m)}},{key:"getEdgeIterator",value:function(){return this._edges.iterator()}},{key:"findEdgeInSameDirection",value:function(m,u){for(var h=0;h<this._edges.size();h++){var g=this._edges.get(h),x=g.getCoordinates();if(this.matchInSameDirection(m,u,x[0],x[1])||this.matchInSameDirection(m,u,x[x.length-1],x[x.length-2]))return g}return null}},{key:"insertEdge",value:function(m){this._edges.add(m)}},{key:"findEdgeEnd",value:function(m){for(var u=this.getEdgeEnds().iterator();u.hasNext();){var h=u.next();if(h.getEdge()===m)return h}return null}},{key:"addEdges",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next();this._edges.add(h);var g=new Ja(h,!0),x=new Ja(h,!1);g.setSym(x),x.setSym(g),this.add(g),this.add(x)}}},{key:"add",value:function(m){this._nodes.add(m),this._edgeEndList.add(m)}},{key:"getNodes",value:function(){return this._nodes.values()}},{key:"findEdge",value:function(m,u){for(var h=0;h<this._edges.size();h++){var g=this._edges.get(h),x=g.getCoordinates();if(m.equals(x[0])&&u.equals(x[1]))return g}return null}}],[{key:"constructor_",value:function(){if(this._edges=new pt,this._nodes=null,this._edgeEndList=new pt,arguments.length===0)this._nodes=new Sf(new nm);else if(arguments.length===1){var m=arguments[0];this._nodes=new Sf(m)}}},{key:"linkResultDirectedEdges",value:function(m){for(var u=m.iterator();u.hasNext();)u.next().getEdges().linkResultDirectedEdges()}}])})(),sp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"sortShellsAndHoles",value:function(u,h,g){for(var x=u.iterator();x.hasNext();){var D=x.next();D.isHole()?g.add(D):h.add(D)}}},{key:"computePolygons",value:function(u){for(var h=new pt,g=u.iterator();g.hasNext();){var x=g.next().toPolygon(this._geometryFactory);h.add(x)}return h}},{key:"placeFreeHoles",value:function(u,h){for(var g=h.iterator();g.hasNext();){var x=g.next();if(x.getShell()===null){var D=m.findEdgeRingContaining(x,u);if(D===null)throw new ht("unable to assign hole to a shell",x.getCoordinate(0));x.setShell(D)}}}},{key:"buildMinimalEdgeRings",value:function(u,h,g){for(var x=new pt,D=u.iterator();D.hasNext();){var k=D.next();if(k.getMaxNodeDegree()>2){k.linkDirectedEdgesForMinimalEdgeRings();var H=k.buildMinimalRings(),ie=this.findShell(H);ie!==null?(this.placePolygonHoles(ie,H),h.add(ie)):g.addAll(H)}else x.add(k)}return x}},{key:"buildMaximalEdgeRings",value:function(u){for(var h=new pt,g=u.iterator();g.hasNext();){var x=g.next();if(x.isInResult()&&x.getLabel().isArea()&&x.getEdgeRing()===null){var D=new d_(x,this._geometryFactory);h.add(D),D.setInResult()}}return h}},{key:"placePolygonHoles",value:function(u,h){for(var g=h.iterator();g.hasNext();){var x=g.next();x.isHole()&&x.setShell(u)}}},{key:"getPolygons",value:function(){return this.computePolygons(this._shellList)}},{key:"findShell",value:function(u){for(var h=0,g=null,x=u.iterator();x.hasNext();){var D=x.next();D.isHole()||(g=D,h++)}return F.isTrue(h<=1,"found two shells in MinimalEdgeRing list"),g}},{key:"add",value:function(){if(arguments.length===1){var u=arguments[0];this.add(u.getEdgeEnds(),u.getNodes())}else if(arguments.length===2){var h=arguments[0],g=arguments[1];Cf.linkResultDirectedEdges(g);var x=this.buildMaximalEdgeRings(h),D=new pt,k=this.buildMinimalEdgeRings(x,this._shellList,D);this.sortShellsAndHoles(k,this._shellList,D),this.placeFreeHoles(this._shellList,D)}}}],[{key:"constructor_",value:function(){this._geometryFactory=null,this._shellList=new pt;var u=arguments[0];this._geometryFactory=u}},{key:"findEdgeRingContaining",value:function(u,h){for(var g=u.getLinearRing(),x=g.getEnvelopeInternal(),D=g.getCoordinateN(0),k=null,H=null,ie=h.iterator();ie.hasNext();){var de=ie.next(),Te=de.getLinearRing(),Pe=Te.getEnvelopeInternal();if(!Pe.equals(x)&&Pe.contains(x)){D=ei.ptNotInList(g.getCoordinates(),Te.getCoordinates());var tt=!1;Ef.isInRing(D,Te.getCoordinates())&&(tt=!0),tt&&(k===null||H.contains(Pe))&&(H=(k=de).getLinearRing().getEnvelopeInternal())}}return k}}])})(),ap=(function(){return o(function m(){t(this,m)},[{key:"getBounds",value:function(){}}])})(),To=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getItem",value:function(){return this._item}},{key:"getBounds",value:function(){return this._bounds}},{key:"interfaces_",get:function(){return[ap,X]}}],[{key:"constructor_",value:function(){this._bounds=null,this._item=null;var m=arguments[0],u=arguments[1];this._bounds=m,this._item=u}}])})(),oc=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"poll",value:function(){if(this.isEmpty())return null;var m=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),m}},{key:"size",value:function(){return this._size}},{key:"reorder",value:function(m){for(var u=null,h=this._items.get(m);2*m<=this._size&&((u=2*m)!==this._size&&this._items.get(u+1).compareTo(this._items.get(u))<0&&u++,this._items.get(u).compareTo(h)<0);m=u)this._items.set(m,this._items.get(u));this._items.set(m,h)}},{key:"clear",value:function(){this._size=0,this._items.clear()}},{key:"peek",value:function(){return this.isEmpty()?null:this._items.get(1)}},{key:"isEmpty",value:function(){return this._size===0}},{key:"add",value:function(m){this._items.add(null),this._size+=1;var u=this._size;for(this._items.set(0,m);m.compareTo(this._items.get(Math.trunc(u/2)))<0;u/=2)this._items.set(u,this._items.get(Math.trunc(u/2)));this._items.set(u,m)}}],[{key:"constructor_",value:function(){this._size=null,this._items=null,this._size=0,this._items=new pt,this._items.add(null)}}])})(),If=(function(){return o(function m(){t(this,m)},[{key:"insert",value:function(m,u){}},{key:"remove",value:function(m,u){}},{key:"query",value:function(){}}])})(),$o=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getLevel",value:function(){return this._level}},{key:"size",value:function(){return this._childBoundables.size()}},{key:"getChildBoundables",value:function(){return this._childBoundables}},{key:"addChildBoundable",value:function(m){F.isTrue(this._bounds===null),this._childBoundables.add(m)}},{key:"isEmpty",value:function(){return this._childBoundables.isEmpty()}},{key:"getBounds",value:function(){return this._bounds===null&&(this._bounds=this.computeBounds()),this._bounds}},{key:"interfaces_",get:function(){return[ap,X]}}],[{key:"constructor_",value:function(){if(this._childBoundables=new pt,this._bounds=null,this._level=null,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this._level=m}}}}])})(),ba={reverseOrder:function(){return{compare:function(m,u){return u.compareTo(m)}}},min:function(m){return ba.sort(m),m.get(0)},sort:function(m,u){var h=m.toArray();u?bn.sort(h,u):bn.sort(h);for(var g=m.iterator(),x=0,D=h.length;x<D;x++)g.next(),g.set(h[x])},singletonList:function(m){var u=new pt;return u.add(m),u}},lp=(function(){function m(){t(this,m)}return o(m,null,[{key:"maxDistance",value:function(u,h,g,x,D,k,H,ie){var de=m.distance(u,h,D,k);return de=Math.max(de,m.distance(u,h,H,ie)),de=Math.max(de,m.distance(g,x,D,k)),de=Math.max(de,m.distance(g,x,H,ie))}},{key:"distance",value:function(u,h,g,x){var D=g-u,k=x-h;return Math.sqrt(D*D+k*k)}},{key:"maximumDistance",value:function(u,h){var g=Math.min(u.getMinX(),h.getMinX()),x=Math.min(u.getMinY(),h.getMinY()),D=Math.max(u.getMaxX(),h.getMaxX()),k=Math.max(u.getMaxY(),h.getMaxY());return m.distance(g,x,D,k)}},{key:"minMaxDistance",value:function(u,h){var g=u.getMinX(),x=u.getMinY(),D=u.getMaxX(),k=u.getMaxY(),H=h.getMinX(),ie=h.getMinY(),de=h.getMaxX(),Te=h.getMaxY(),Pe=m.maxDistance(g,x,g,k,H,ie,H,Te);return Pe=Math.min(Pe,m.maxDistance(g,x,g,k,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,x,g,k,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,x,g,k,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,x,D,x,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,x,D,x,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(g,x,D,x,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(g,x,D,x,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,k,g,k,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,k,g,k,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,k,g,k,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,k,g,k,de,Te,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,k,D,x,H,ie,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,k,D,x,H,ie,de,ie)),Pe=Math.min(Pe,m.maxDistance(D,k,D,x,de,Te,H,Te)),Pe=Math.min(Pe,m.maxDistance(D,k,D,x,de,Te,de,ie))}}])})(),_u=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"maximumDistance",value:function(){return lp.maximumDistance(this._boundable1.getBounds(),this._boundable2.getBounds())}},{key:"expandToQueue",value:function(u,h){var g=m.isComposite(this._boundable1),x=m.isComposite(this._boundable2);if(g&&x)return m.area(this._boundable1)>m.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,!1,u,h),null):(this.expand(this._boundable2,this._boundable1,!0,u,h),null);if(g)return this.expand(this._boundable1,this._boundable2,!1,u,h),null;if(x)return this.expand(this._boundable2,this._boundable1,!0,u,h),null;throw new A("neither boundable is composite")}},{key:"isLeaves",value:function(){return!(m.isComposite(this._boundable1)||m.isComposite(this._boundable2))}},{key:"compareTo",value:function(u){var h=u;return this._distance<h._distance?-1:this._distance>h._distance?1:0}},{key:"expand",value:function(u,h,g,x,D){for(var k=u.getChildBoundables().iterator();k.hasNext();){var H=k.next(),ie=null;(ie=g?new m(h,H,this._itemDistance):new m(H,h,this._itemDistance)).getDistance()<D&&x.add(ie)}}},{key:"getBoundable",value:function(u){return u===0?this._boundable1:this._boundable2}},{key:"getDistance",value:function(){return this._distance}},{key:"distance",value:function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var u=arguments[0],h=arguments[1],g=arguments[2];this._boundable1=u,this._boundable2=h,this._itemDistance=g,this._distance=this.distance()}},{key:"area",value:function(u){return u.getBounds().getArea()}},{key:"isComposite",value:function(u){return u instanceof $o}}])})(),up=(function(){return o(function m(){t(this,m)},[{key:"visitItem",value:function(m){}}])})(),Ts=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"queryInternal",value:function(){if(Le(arguments[2],up)&&arguments[0]instanceof Object&&arguments[1]instanceof $o)for(var u=arguments[0],h=arguments[2],g=arguments[1].getChildBoundables(),x=0;x<g.size();x++){var D=g.get(x);this.getIntersectsOp().intersects(D.getBounds(),u)&&(D instanceof $o?this.queryInternal(u,D,h):D instanceof To?h.visitItem(D.getItem()):F.shouldNeverReachHere())}else if(Le(arguments[2],we)&&arguments[0]instanceof Object&&arguments[1]instanceof $o)for(var k=arguments[0],H=arguments[2],ie=arguments[1].getChildBoundables(),de=0;de<ie.size();de++){var Te=ie.get(de);this.getIntersectsOp().intersects(Te.getBounds(),k)&&(Te instanceof $o?this.queryInternal(k,Te,H):Te instanceof To?H.add(Te.getItem()):F.shouldNeverReachHere())}}},{key:"getNodeCapacity",value:function(){return this._nodeCapacity}},{key:"lastNode",value:function(u){return u.get(u.size()-1)}},{key:"size",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var g=h.next();g instanceof $o?u+=this.size(g):g instanceof To&&(u+=1)}return u}}},{key:"removeItem",value:function(u,h){for(var g=null,x=u.getChildBoundables().iterator();x.hasNext();){var D=x.next();D instanceof To&&D.getItem()===h&&(g=D)}return g!==null&&(u.getChildBoundables().remove(g),!0)}},{key:"itemsTree",value:function(){if(arguments.length===0){this.build();var u=this.itemsTree(this._root);return u===null?new pt:u}if(arguments.length===1){for(var h=arguments[0],g=new pt,x=h.getChildBoundables().iterator();x.hasNext();){var D=x.next();if(D instanceof $o){var k=this.itemsTree(D);k!==null&&g.add(k)}else D instanceof To?g.add(D.getItem()):F.shouldNeverReachHere()}return g.size()<=0?null:g}}},{key:"insert",value:function(u,h){F.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new To(u,h))}},{key:"boundablesAtLevel",value:function(){if(arguments.length===1){var u=arguments[0],h=new pt;return this.boundablesAtLevel(u,this._root,h),h}if(arguments.length===3){var g=arguments[0],x=arguments[1],D=arguments[2];if(F.isTrue(g>-2),x.getLevel()===g)return D.add(x),null;for(var k=x.getChildBoundables().iterator();k.hasNext();){var H=k.next();H instanceof $o?this.boundablesAtLevel(g,H,D):(F.isTrue(H instanceof To),g===-1&&D.add(H))}return null}}},{key:"query",value:function(){if(arguments.length===1){var u=arguments[0];this.build();var h=new pt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.queryInternal(u,this._root,h),h}if(arguments.length===2){var g=arguments[0],x=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),g)&&this.queryInternal(g,this._root,x)}}},{key:"build",value:function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0}},{key:"getRoot",value:function(){return this.build(),this._root}},{key:"remove",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),u)&&this.remove(u,this._root,h)}if(arguments.length===3){var g=arguments[0],x=arguments[1],D=arguments[2],k=this.removeItem(x,D);if(k)return!0;for(var H=null,ie=x.getChildBoundables().iterator();ie.hasNext();){var de=ie.next();if(this.getIntersectsOp().intersects(de.getBounds(),g)&&de instanceof $o&&(k=this.remove(g,de,D))){H=de;break}}return H!==null&&H.getChildBoundables().isEmpty()&&x.getChildBoundables().remove(H),k}}},{key:"createHigherLevels",value:function(u,h){F.isTrue(!u.isEmpty());var g=this.createParentBoundables(u,h+1);return g.size()===1?g.get(0):this.createHigherLevels(g,h+1)}},{key:"depth",value:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(arguments.length===1){for(var u=0,h=arguments[0].getChildBoundables().iterator();h.hasNext();){var g=h.next();if(g instanceof $o){var x=this.depth(g);x>u&&(u=x)}}return u+1}}},{key:"createParentBoundables",value:function(u,h){F.isTrue(!u.isEmpty());var g=new pt;g.add(this.createNode(h));var x=new pt(u);ba.sort(x,this.getComparator());for(var D=x.iterator();D.hasNext();){var k=D.next();this.lastNode(g).getChildBoundables().size()===this.getNodeCapacity()&&g.add(this.createNode(h)),this.lastNode(g).addChildBoundable(k)}return g}},{key:"isEmpty",value:function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()}},{key:"interfaces_",get:function(){return[X]}}],[{key:"constructor_",value:function(){if(this._root=null,this._built=!1,this._itemBoundables=new pt,this._nodeCapacity=null,arguments.length===0)m.constructor_.call(this,m.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var u=arguments[0];F.isTrue(u>1,"Node capacity must be greater than 1"),this._nodeCapacity=u}}},{key:"compareDoubles",value:function(u,h){return u>h?1:u<h?-1:0}}])})();Ts.IntersectsOp=function(){},Ts.DEFAULT_NODE_CAPACITY=10;var vu=(function(){return o(function m(){t(this,m)},[{key:"distance",value:function(m,u){}}])})(),ra=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"createParentBoundablesFromVerticalSlices",value:function(h,g){F.isTrue(h.length>0);for(var x=new pt,D=0;D<h.length;D++)x.addAll(this.createParentBoundablesFromVerticalSlice(h[D],g));return x}},{key:"nearestNeighbourK",value:function(){if(arguments.length===2){var h=arguments[0],g=arguments[1];return this.nearestNeighbourK(h,q.POSITIVE_INFINITY,g)}if(arguments.length===3){var x=arguments[0],D=arguments[2],k=arguments[1],H=new oc;H.add(x);for(var ie=new oc;!H.isEmpty()&&k>=0;){var de=H.poll(),Te=de.getDistance();if(Te>=k)break;de.isLeaves()?ie.size()<D?ie.add(de):(ie.peek().getDistance()>Te&&(ie.poll(),ie.add(de)),k=ie.peek().getDistance()):de.expandToQueue(H,k)}return u.getItems(ie)}}},{key:"createNode",value:function(h){return new sc(h)}},{key:"size",value:function(){return arguments.length===0?y(u,"size",this,1).call(this):y(u,"size",this,1).apply(this,arguments)}},{key:"insert",value:function(){if(!(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Se))return y(u,"insert",this,1).apply(this,arguments);var h=arguments[0],g=arguments[1];if(h.isNull())return null;y(u,"insert",this,1).call(this,h,g)}},{key:"getIntersectsOp",value:function(){return u.intersectsOp}},{key:"verticalSlices",value:function(h,g){for(var x=Math.trunc(Math.ceil(h.size()/g)),D=new Array(g).fill(null),k=h.iterator(),H=0;H<g;H++){D[H]=new pt;for(var ie=0;k.hasNext()&&ie<x;){var de=k.next();D[H].add(de),ie++}}return D}},{key:"query",value:function(){if(arguments.length===1){var h=arguments[0];return y(u,"query",this,1).call(this,h)}if(arguments.length===2){var g=arguments[0],x=arguments[1];y(u,"query",this,1).call(this,g,x)}}},{key:"getComparator",value:function(){return u.yComparator}},{key:"createParentBoundablesFromVerticalSlice",value:function(h,g){return y(u,"createParentBoundables",this,1).call(this,h,g)}},{key:"remove",value:function(){if(arguments.length===2&&arguments[1]instanceof Object&&arguments[0]instanceof Se){var h=arguments[0],g=arguments[1];return y(u,"remove",this,1).call(this,h,g)}return y(u,"remove",this,1).apply(this,arguments)}},{key:"depth",value:function(){return arguments.length===0?y(u,"depth",this,1).call(this):y(u,"depth",this,1).apply(this,arguments)}},{key:"createParentBoundables",value:function(h,g){F.isTrue(!h.isEmpty());var x=Math.trunc(Math.ceil(h.size()/this.getNodeCapacity())),D=new pt(h);ba.sort(D,u.xComparator);var k=this.verticalSlices(D,Math.trunc(Math.ceil(Math.sqrt(x))));return this.createParentBoundablesFromVerticalSlices(k,g)}},{key:"nearestNeighbour",value:function(){if(arguments.length===1){if(Le(arguments[0],vu)){var h=arguments[0];if(this.isEmpty())return null;var g=new _u(this.getRoot(),this.getRoot(),h);return this.nearestNeighbour(g)}if(arguments[0]instanceof _u){var x=arguments[0],D=q.POSITIVE_INFINITY,k=null,H=new oc;for(H.add(x);!H.isEmpty()&&D>0;){var ie=H.poll(),de=ie.getDistance();if(de>=D)break;ie.isLeaves()?(D=de,k=ie):ie.expandToQueue(H,D)}return k===null?null:[k.getBoundable(0).getItem(),k.getBoundable(1).getItem()]}}else{if(arguments.length===2){var Te=arguments[0],Pe=arguments[1];if(this.isEmpty()||Te.isEmpty())return null;var tt=new _u(this.getRoot(),Te.getRoot(),Pe);return this.nearestNeighbour(tt)}if(arguments.length===3){var mt=arguments[2],At=new To(arguments[0],arguments[1]),Ht=new _u(this.getRoot(),At,mt);return this.nearestNeighbour(Ht)[0]}if(arguments.length===4){var Jn=arguments[2],qn=arguments[3],Mr=new To(arguments[0],arguments[1]),ho=new _u(this.getRoot(),Mr,Jn);return this.nearestNeighbourK(ho,qn)}}}},{key:"isWithinDistance",value:function(){if(arguments.length===2){var h=arguments[0],g=arguments[1],x=q.POSITIVE_INFINITY,D=new oc;for(D.add(h);!D.isEmpty();){var k=D.poll(),H=k.getDistance();if(H>g)return!1;if(k.maximumDistance()<=g)return!0;if(k.isLeaves()){if((x=H)<=g)return!0}else k.expandToQueue(D,x)}return!1}if(arguments.length===3){var ie=arguments[0],de=arguments[1],Te=arguments[2],Pe=new _u(this.getRoot(),ie.getRoot(),de);return this.isWithinDistance(Pe,Te)}}},{key:"interfaces_",get:function(){return[If,X]}}],[{key:"constructor_",value:function(){if(arguments.length===0)u.constructor_.call(this,u.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var h=arguments[0];Ts.constructor_.call(this,h)}}},{key:"centreX",value:function(h){return u.avg(h.getMinX(),h.getMaxX())}},{key:"avg",value:function(h,g){return(h+g)/2}},{key:"getItems",value:function(h){for(var g=new Array(h.size()).fill(null),x=0;!h.isEmpty();){var D=h.poll();g[x]=D.getBoundable(0).getItem(),x++}return g}},{key:"centreY",value:function(h){return u.avg(h.getMinY(),h.getMaxY())}}])})(Ts),sc=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"computeBounds",value:function(){for(var h=null,g=this.getChildBoundables().iterator();g.hasNext();){var x=g.next();h===null?h=new Se(x.getBounds()):h.expandToInclude(x.getBounds())}return h}}],[{key:"constructor_",value:function(){var h=arguments[0];$o.constructor_.call(this,h)}}])})($o);ra.STRtreeNode=sc,ra.xComparator=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[K]}},{key:"compare",value:function(m,u){return Ts.compareDoubles(ra.centreX(m.getBounds()),ra.centreX(u.getBounds()))}}])})()),ra.yComparator=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[K]}},{key:"compare",value:function(m,u){return Ts.compareDoubles(ra.centreY(m.getBounds()),ra.centreY(u.getBounds()))}}])})()),ra.intersectsOp=new((function(){return o(function m(){t(this,m)},[{key:"interfaces_",get:function(){return[IntersectsOp]}},{key:"intersects",value:function(m,u){return m.intersects(u)}}])})()),ra.DEFAULT_NODE_CAPACITY=10;var rm=(function(){function m(){t(this,m)}return o(m,null,[{key:"relativeSign",value:function(u,h){return u<h?-1:u>h?1:0}},{key:"compare",value:function(u,h,g){if(h.equals2D(g))return 0;var x=m.relativeSign(h.x,g.x),D=m.relativeSign(h.y,g.y);switch(u){case 0:return m.compareValue(x,D);case 1:return m.compareValue(D,x);case 2:return m.compareValue(D,-x);case 3:return m.compareValue(-x,D);case 4:return m.compareValue(-x,-D);case 5:return m.compareValue(-D,-x);case 6:return m.compareValue(-D,x);case 7:return m.compareValue(x,-D)}return F.shouldNeverReachHere("invalid octant value"),0}},{key:"compareValue",value:function(u,h){return u<0?-1:u>0?1:h<0?-1:h>0?1:0}}])})(),R=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(m){m.print(this.coord),m.print(" seg # = "+this.segmentIndex)}},{key:"compareTo",value:function(m){var u=m;return this.segmentIndex<u.segmentIndex?-1:this.segmentIndex>u.segmentIndex?1:this.coord.equals2D(u.coord)?0:this._isInterior?u._isInterior?rm.compare(this._segmentOctant,this.coord,u.coord):1:-1}},{key:"isEndPoint",value:function(m){return this.segmentIndex===0&&!this._isInterior||this.segmentIndex===m}},{key:"toString",value:function(){return this.segmentIndex+":"+this.coord.toString()}},{key:"isInterior",value:function(){return this._isInterior}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this._segString=m,this.coord=new J(u),this.segmentIndex=h,this._segmentOctant=g,this._isInterior=!u.equals2D(m.getCoordinate(h))}}])})(),te=(function(){return o(function m(){t(this,m)},[{key:"hasNext",value:function(){}},{key:"next",value:function(){}},{key:"remove",value:function(){}}])})(),ge=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getSplitCoordinates",value:function(){var m=new Ss;this.addEndpoints();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next();this.addEdgeCoordinates(h,g,m),h=g}return m.toCoordinateArray()}},{key:"addCollapsedNodes",value:function(){var m=new pt;this.findCollapsesFromInsertedNodes(m),this.findCollapsesFromExistingVertices(m);for(var u=m.iterator();u.hasNext();){var h=u.next().intValue();this.add(this._edge.getCoordinate(h),h)}}},{key:"createSplitEdgePts",value:function(m,u){var h=u.segmentIndex-m.segmentIndex+2;if(h===2)return[new J(m.coord),new J(u.coord)];var g=this._edge.getCoordinate(u.segmentIndex),x=u.isInterior()||!u.coord.equals2D(g);x||h--;var D=new Array(h).fill(null),k=0;D[k++]=new J(m.coord);for(var H=m.segmentIndex+1;H<=u.segmentIndex;H++)D[k++]=this._edge.getCoordinate(H);return x&&(D[k]=new J(u.coord)),D}},{key:"print",value:function(m){m.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"findCollapsesFromExistingVertices",value:function(m){for(var u=0;u<this._edge.size()-2;u++){var h=this._edge.getCoordinate(u);this._edge.getCoordinate(u+1);var g=this._edge.getCoordinate(u+2);h.equals2D(g)&&m.add(ft.valueOf(u+1))}}},{key:"addEdgeCoordinates",value:function(m,u,h){var g=this.createSplitEdgePts(m,u);h.add(g,!1)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(m){this.addEndpoints(),this.addCollapsedNodes();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next(),x=this.createSplitEdge(h,g);m.add(x),h=g}}},{key:"findCollapseIndex",value:function(m,u,h){if(!m.coord.equals2D(u.coord))return!1;var g=u.segmentIndex-m.segmentIndex;return u.isInterior()||g--,g===1&&(h[0]=m.segmentIndex+1,!0)}},{key:"findCollapsesFromInsertedNodes",value:function(m){for(var u=new Array(1).fill(null),h=this.iterator(),g=h.next();h.hasNext();){var x=h.next();this.findCollapseIndex(g,x,u)&&m.add(ft.valueOf(u[0])),g=x}}},{key:"getEdge",value:function(){return this._edge}},{key:"addEndpoints",value:function(){var m=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(m),m)}},{key:"createSplitEdge",value:function(m,u){var h=this.createSplitEdgePts(m,u);return new et(h,this._edge.getData())}},{key:"add",value:function(m,u){var h=new R(this._edge,m,u,this._edge.getSegmentOctant(u)),g=this._nodeMap.get(h);return g!==null?(F.isTrue(g.coord.equals2D(m),"Found equal nodes with different coordinates"),g):(this._nodeMap.put(h,h),h)}},{key:"checkSplitEdgesCorrectness",value:function(m){var u=this._edge.getCoordinates(),h=m.get(0).getCoordinate(0);if(!h.equals2D(u[0]))throw new oe("bad split edge start point at "+h);var g=m.get(m.size()-1).getCoordinates(),x=g[g.length-1];if(!x.equals2D(u[u.length-1]))throw new oe("bad split edge end point at "+x)}}],[{key:"constructor_",value:function(){this._nodeMap=new Dl,this._edge=null;var m=arguments[0];this._edge=m}}])})(),Ee=(function(){function m(){t(this,m)}return o(m,null,[{key:"octant",value:function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var u=arguments[0],h=arguments[1];if(u===0&&h===0)throw new A("Cannot compute the octant for point ( "+u+", "+h+" )");var g=Math.abs(u),x=Math.abs(h);return u>=0?h>=0?g>=x?0:1:g>=x?7:6:h>=0?g>=x?3:2:g>=x?4:5}if(arguments[0]instanceof J&&arguments[1]instanceof J){var D=arguments[0],k=arguments[1],H=k.x-D.x,ie=k.y-D.y;if(H===0&&ie===0)throw new A("Cannot compute the octant for two identical points "+D);return m.octant(H,ie)}}}])})(),Ne=(function(){return o(function m(){t(this,m)},[{key:"getCoordinates",value:function(){}},{key:"size",value:function(){}},{key:"getCoordinate",value:function(m){}},{key:"isClosed",value:function(){}},{key:"setData",value:function(m){}},{key:"getData",value:function(){}}])})(),Xe=(function(){return o(function m(){t(this,m)},[{key:"addIntersection",value:function(m,u){}},{key:"interfaces_",get:function(){return[Ne]}}])})(),et=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getCoordinates",value:function(){return this._pts}},{key:"size",value:function(){return this._pts.length}},{key:"getCoordinate",value:function(u){return this._pts[u]}},{key:"isClosed",value:function(){return this._pts[0].equals(this._pts[this._pts.length-1])}},{key:"getSegmentOctant",value:function(u){return u===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(u),this.getCoordinate(u+1))}},{key:"setData",value:function(u){this._data=u}},{key:"safeOctant",value:function(u,h){return u.equals2D(h)?0:Ee.octant(u,h)}},{key:"getData",value:function(){return this._data}},{key:"addIntersection",value:function(){if(arguments.length===2){var u=arguments[0],h=arguments[1];this.addIntersectionNode(u,h)}else if(arguments.length===4){var g=arguments[1],x=arguments[3],D=new J(arguments[0].getIntersection(x));this.addIntersection(D,g)}}},{key:"toString",value:function(){return np.toLineString(new Jc(this._pts))}},{key:"getNodeList",value:function(){return this._nodeList}},{key:"addIntersectionNode",value:function(u,h){var g=h,x=g+1;if(x<this._pts.length){var D=this._pts[x];u.equals2D(D)&&(g=x)}return this._nodeList.add(u,g)}},{key:"addIntersections",value:function(u,h,g){for(var x=0;x<u.getIntersectionNum();x++)this.addIntersection(u,h,g,x)}},{key:"interfaces_",get:function(){return[Xe]}}],[{key:"constructor_",value:function(){this._nodeList=new ge(this),this._pts=null,this._data=null;var u=arguments[0],h=arguments[1];this._pts=u,this._data=h}},{key:"getNodedSubstrings",value:function(){if(arguments.length===1){var u=arguments[0],h=new pt;return m.getNodedSubstrings(u,h),h}if(arguments.length===2)for(var g=arguments[1],x=arguments[0].iterator();x.hasNext();)x.next().getNodeList().addSplitEdges(g)}}])})(),bt=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"minX",value:function(){return Math.min(this.p0.x,this.p1.x)}},{key:"orientationIndex",value:function(){if(arguments[0]instanceof m){var u=arguments[0],h=Ke.index(this.p0,this.p1,u.p0),g=Ke.index(this.p0,this.p1,u.p1);return h>=0&&g>=0||h<=0&&g<=0?Math.max(h,g):0}if(arguments[0]instanceof J){var x=arguments[0];return Ke.index(this.p0,this.p1,x)}}},{key:"toGeometry",value:function(u){return u.createLineString([this.p0,this.p1])}},{key:"isVertical",value:function(){return this.p0.x===this.p1.x}},{key:"equals",value:function(u){if(!(u instanceof m))return!1;var h=u;return this.p0.equals(h.p0)&&this.p1.equals(h.p1)}},{key:"intersection",value:function(u){var h=new yu;return h.computeIntersection(this.p0,this.p1,u.p0,u.p1),h.hasIntersection()?h.getIntersection(0):null}},{key:"project",value:function(){if(arguments[0]instanceof J){var u=arguments[0];if(u.equals(this.p0)||u.equals(this.p1))return new J(u);var h=this.projectionFactor(u),g=new J;return g.x=this.p0.x+h*(this.p1.x-this.p0.x),g.y=this.p0.y+h*(this.p1.y-this.p0.y),g}if(arguments[0]instanceof m){var x=arguments[0],D=this.projectionFactor(x.p0),k=this.projectionFactor(x.p1);if(D>=1&&k>=1||D<=0&&k<=0)return null;var H=this.project(x.p0);D<0&&(H=this.p0),D>1&&(H=this.p1);var ie=this.project(x.p1);return k<0&&(ie=this.p0),k>1&&(ie=this.p1),new m(H,ie)}}},{key:"normalize",value:function(){this.p1.compareTo(this.p0)<0&&this.reverse()}},{key:"angle",value:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)}},{key:"getCoordinate",value:function(u){return u===0?this.p0:this.p1}},{key:"distancePerpendicular",value:function(u){return Dt.pointToLinePerpendicular(u,this.p0,this.p1)}},{key:"minY",value:function(){return Math.min(this.p0.y,this.p1.y)}},{key:"midPoint",value:function(){return m.midPoint(this.p0,this.p1)}},{key:"projectionFactor",value:function(u){if(u.equals(this.p0))return 0;if(u.equals(this.p1))return 1;var h=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,x=h*h+g*g;return x<=0?q.NaN:((u.x-this.p0.x)*h+(u.y-this.p0.y)*g)/x}},{key:"closestPoints",value:function(u){var h=this.intersection(u);if(h!==null)return[h,h];var g=new Array(2).fill(null),x=q.MAX_VALUE,D=null,k=this.closestPoint(u.p0);x=k.distance(u.p0),g[0]=k,g[1]=u.p0;var H=this.closestPoint(u.p1);(D=H.distance(u.p1))<x&&(x=D,g[0]=H,g[1]=u.p1);var ie=u.closestPoint(this.p0);(D=ie.distance(this.p0))<x&&(x=D,g[0]=this.p0,g[1]=ie);var de=u.closestPoint(this.p1);return(D=de.distance(this.p1))<x&&(x=D,g[0]=this.p1,g[1]=de),g}},{key:"closestPoint",value:function(u){var h=this.projectionFactor(u);return h>0&&h<1?this.project(u):this.p0.distance(u)<this.p1.distance(u)?this.p0:this.p1}},{key:"maxX",value:function(){return Math.max(this.p0.x,this.p1.x)}},{key:"getLength",value:function(){return this.p0.distance(this.p1)}},{key:"compareTo",value:function(u){var h=u,g=this.p0.compareTo(h.p0);return g!==0?g:this.p1.compareTo(h.p1)}},{key:"reverse",value:function(){var u=this.p0;this.p0=this.p1,this.p1=u}},{key:"equalsTopo",value:function(u){return this.p0.equals(u.p0)&&this.p1.equals(u.p1)||this.p0.equals(u.p1)&&this.p1.equals(u.p0)}},{key:"lineIntersection",value:function(u){return hr.intersection(this.p0,this.p1,u.p0,u.p1)}},{key:"maxY",value:function(){return Math.max(this.p0.y,this.p1.y)}},{key:"pointAlongOffset",value:function(u,h){var g=this.p0.x+u*(this.p1.x-this.p0.x),x=this.p0.y+u*(this.p1.y-this.p0.y),D=this.p1.x-this.p0.x,k=this.p1.y-this.p0.y,H=Math.sqrt(D*D+k*k),ie=0,de=0;if(h!==0){if(H<=0)throw new IllegalStateException("Cannot compute offset from zero-length line segment");ie=h*D/H,de=h*k/H}return new J(g-de,x+ie)}},{key:"setCoordinates",value:function(){if(arguments.length===1){var u=arguments[0];this.setCoordinates(u.p0,u.p1)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.p0.x=h.x,this.p0.y=h.y,this.p1.x=g.x,this.p1.y=g.y}}},{key:"segmentFraction",value:function(u){var h=this.projectionFactor(u);return h<0?h=0:(h>1||q.isNaN(h))&&(h=1),h}},{key:"toString",value:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"}},{key:"isHorizontal",value:function(){return this.p0.y===this.p1.y}},{key:"reflect",value:function(u){var h=this.p1.getY()-this.p0.getY(),g=this.p0.getX()-this.p1.getX(),x=this.p0.getY()*(this.p1.getX()-this.p0.getX())-this.p0.getX()*(this.p1.getY()-this.p0.getY()),D=h*h+g*g,k=h*h-g*g,H=u.getX(),ie=u.getY();return new J((-k*H-2*h*g*ie-2*h*x)/D,(k*ie-2*h*g*H-2*g*x)/D)}},{key:"distance",value:function(){if(arguments[0]instanceof m){var u=arguments[0];return Dt.segmentToSegment(this.p0,this.p1,u.p0,u.p1)}if(arguments[0]instanceof J){var h=arguments[0];return Dt.pointToSegment(h,this.p0,this.p1)}}},{key:"pointAlong",value:function(u){var h=new J;return h.x=this.p0.x+u*(this.p1.x-this.p0.x),h.y=this.p0.y+u*(this.p1.y-this.p0.y),h}},{key:"hashCode",value:function(){var u=q.doubleToLongBits(this.p0.x);u^=31*q.doubleToLongBits(this.p0.y);var h=Math.trunc(u)^Math.trunc(u>>32),g=q.doubleToLongBits(this.p1.x);return g^=31*q.doubleToLongBits(this.p1.y),h^(Math.trunc(g)^Math.trunc(g>>32))}},{key:"interfaces_",get:function(){return[O,X]}}],[{key:"constructor_",value:function(){if(this.p0=null,this.p1=null,arguments.length===0)m.constructor_.call(this,new J,new J);else if(arguments.length===1){var u=arguments[0];m.constructor_.call(this,u.p0,u.p1)}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this.p0=h,this.p1=g}else if(arguments.length===4){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3];m.constructor_.call(this,new J(x,D),new J(k,H))}}},{key:"midPoint",value:function(u,h){return new J((u.x+h.x)/2,(u.y+h.y)/2)}}])})(),kt=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"overlap",value:function(){if(arguments.length!==2){if(arguments.length===4){var m=arguments[1],u=arguments[2],h=arguments[3];arguments[0].getLineSegment(m,this._overlapSeg1),u.getLineSegment(h,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}}}}],[{key:"constructor_",value:function(){this._overlapSeg1=new bt,this._overlapSeg2=new bt}}])})(),en=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getLineSegment",value:function(m,u){u.p0=this._pts[m],u.p1=this._pts[m+1]}},{key:"computeSelect",value:function(m,u,h,g){var x=this._pts[u],D=this._pts[h];if(h-u==1)return g.select(this,u),null;if(!m.intersects(x,D))return null;var k=Math.trunc((u+h)/2);u<k&&this.computeSelect(m,u,k,g),k<h&&this.computeSelect(m,k,h,g)}},{key:"getCoordinates",value:function(){for(var m=new Array(this._end-this._start+1).fill(null),u=0,h=this._start;h<=this._end;h++)m[u++]=this._pts[h];return m}},{key:"computeOverlaps",value:function(){if(arguments.length===2){var m=arguments[0],u=arguments[1];this.computeOverlaps(this._start,this._end,m,m._start,m._end,u)}else if(arguments.length===6){var h=arguments[0],g=arguments[1],x=arguments[2],D=arguments[3],k=arguments[4],H=arguments[5];if(g-h==1&&k-D==1)return H.overlap(this,h,x,D),null;if(!this.overlaps(h,g,x,D,k))return null;var ie=Math.trunc((h+g)/2),de=Math.trunc((D+k)/2);h<ie&&(D<de&&this.computeOverlaps(h,ie,x,D,de,H),de<k&&this.computeOverlaps(h,ie,x,de,k,H)),ie<g&&(D<de&&this.computeOverlaps(ie,g,x,D,de,H),de<k&&this.computeOverlaps(ie,g,x,de,k,H))}}},{key:"setId",value:function(m){this._id=m}},{key:"select",value:function(m,u){this.computeSelect(m,this._start,this._end,u)}},{key:"getEnvelope",value:function(){if(this._env===null){var m=this._pts[this._start],u=this._pts[this._end];this._env=new Se(m,u)}return this._env}},{key:"overlaps",value:function(m,u,h,g,x){return Se.intersects(this._pts[m],this._pts[u],h._pts[g],h._pts[x])}},{key:"getEndIndex",value:function(){return this._end}},{key:"getStartIndex",value:function(){return this._start}},{key:"getContext",value:function(){return this._context}},{key:"getId",value:function(){return this._id}}],[{key:"constructor_",value:function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this._pts=m,this._start=u,this._end=h,this._context=g}}])})(),wn=(function(){function m(){t(this,m)}return o(m,null,[{key:"findChainEnd",value:function(u,h){for(var g=h;g<u.length-1&&u[g].equals2D(u[g+1]);)g++;if(g>=u.length-1)return u.length-1;for(var x=bi.quadrant(u[g],u[g+1]),D=h+1;D<u.length&&!(!u[D-1].equals2D(u[D])&&bi.quadrant(u[D-1],u[D])!==x);)D++;return D-1}},{key:"getChains",value:function(){if(arguments.length===1){var u=arguments[0];return m.getChains(u,null)}if(arguments.length===2){var h=arguments[0],g=arguments[1],x=new pt,D=0;do{var k=m.findChainEnd(h,D),H=new en(h,D,k,g);x.add(H),D=k}while(D<h.length-1);return x}}}])})(),Kn=(function(){return o(function m(){t(this,m)},[{key:"computeNodes",value:function(m){}},{key:"getNodedSubstrings",value:function(){}}])})(),si=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"setSegmentIntersector",value:function(m){this._segInt=m}},{key:"interfaces_",get:function(){return[Kn]}}],[{key:"constructor_",value:function(){if(this._segInt=null,arguments.length!==0){if(arguments.length===1){var m=arguments[0];this.setSegmentIntersector(m)}}}}])})(),pi=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getMonotoneChains",value:function(){return this._monoChains}},{key:"getNodedSubstrings",value:function(){return et.getNodedSubstrings(this._nodedSegStrings)}},{key:"getIndex",value:function(){return this._index}},{key:"add",value:function(h){for(var g=wn.getChains(h.getCoordinates(),h).iterator();g.hasNext();){var x=g.next();x.setId(this._idCounter++),this._index.insert(x.getEnvelope(),x),this._monoChains.add(x)}}},{key:"computeNodes",value:function(h){this._nodedSegStrings=h;for(var g=h.iterator();g.hasNext();)this.add(g.next());this.intersectChains()}},{key:"intersectChains",value:function(){for(var h=new Br(this._segInt),g=this._monoChains.iterator();g.hasNext();)for(var x=g.next(),D=this._index.query(x.getEnvelope()).iterator();D.hasNext();){var k=D.next();if(k.getId()>x.getId()&&(x.computeOverlaps(k,h),this._nOverlaps++),this._segInt.isDone())return null}}}],[{key:"constructor_",value:function(){if(this._monoChains=new pt,this._index=new ra,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0,arguments.length!==0){if(arguments.length===1){var h=arguments[0];si.constructor_.call(this,h)}}}}])})(si),Br=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"overlap",value:function(){if(arguments.length!==4)return y(u,"overlap",this,1).apply(this,arguments);var h=arguments[1],g=arguments[2],x=arguments[3],D=arguments[0].getContext(),k=g.getContext();this._si.processIntersections(D,h,k,x)}}],[{key:"constructor_",value:function(){this._si=null;var h=arguments[0];this._si=h}}])})(kt);pi.SegmentOverlapAction=Br;var br=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isDeletable",value:function(u,h,g,x){var D=this._inputLine[u],k=this._inputLine[h],H=this._inputLine[g];return!!this.isConcave(D,k,H)&&!!this.isShallow(D,k,H,x)&&this.isShallowSampled(D,k,u,g,x)}},{key:"deleteShallowConcavities",value:function(){for(var u=1,h=this.findNextNonDeletedIndex(u),g=this.findNextNonDeletedIndex(h),x=!1;g<this._inputLine.length;){var D=!1;this.isDeletable(u,h,g,this._distanceTol)&&(this._isDeleted[h]=m.DELETE,D=!0,x=!0),u=D?g:h,h=this.findNextNonDeletedIndex(u),g=this.findNextNonDeletedIndex(h)}return x}},{key:"isShallowConcavity",value:function(u,h,g,x){return Ke.index(u,h,g)===this._angleOrientation&&Dt.pointToSegment(h,u,g)<x}},{key:"isShallowSampled",value:function(u,h,g,x,D){var k=Math.trunc((x-g)/m.NUM_PTS_TO_CHECK);k<=0&&(k=1);for(var H=g;H<x;H+=k)if(!this.isShallow(u,h,this._inputLine[H],D))return!1;return!0}},{key:"isConcave",value:function(u,h,g){var x=Ke.index(u,h,g)===this._angleOrientation;return x}},{key:"simplify",value:function(u){this._distanceTol=Math.abs(u),u<0&&(this._angleOrientation=Ke.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var h=!1;do h=this.deleteShallowConcavities();while(h);return this.collapseLine()}},{key:"findNextNonDeletedIndex",value:function(u){for(var h=u+1;h<this._inputLine.length&&this._isDeleted[h]===m.DELETE;)h++;return h}},{key:"isShallow",value:function(u,h,g,x){return Dt.pointToSegment(h,u,g)<x}},{key:"collapseLine",value:function(){for(var u=new Ss,h=0;h<this._inputLine.length;h++)this._isDeleted[h]!==m.DELETE&&u.add(this._inputLine[h]);return u.toCoordinateArray()}}],[{key:"constructor_",value:function(){this._inputLine=null,this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Ke.COUNTERCLOCKWISE;var u=arguments[0];this._inputLine=u}},{key:"simplify",value:function(u,h){return new m(u).simplify(h)}}])})();br.INIT=0,br.DELETE=1,br.KEEP=1,br.NUM_PTS_TO_CHECK=10;var Si=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getCoordinates",value:function(){return this._ptList.toArray(m.COORDINATE_ARRAY_TYPE)}},{key:"setPrecisionModel",value:function(u){this._precisionModel=u}},{key:"addPt",value:function(u){var h=new J(u);if(this._precisionModel.makePrecise(h),this.isRedundant(h))return null;this._ptList.add(h)}},{key:"reverse",value:function(){}},{key:"addPts",value:function(u,h){if(h)for(var g=0;g<u.length;g++)this.addPt(u[g]);else for(var x=u.length-1;x>=0;x--)this.addPt(u[x])}},{key:"isRedundant",value:function(u){if(this._ptList.size()<1)return!1;var h=this._ptList.get(this._ptList.size()-1);return u.distance(h)<this._minimimVertexDistance}},{key:"toString",value:function(){return new gu().createLineString(this.getCoordinates()).toString()}},{key:"closeRing",value:function(){if(this._ptList.size()<1)return null;var u=new J(this._ptList.get(0)),h=this._ptList.get(this._ptList.size()-1);if(u.equals(h))return null;this._ptList.add(u)}},{key:"setMinimumVertexDistance",value:function(u){this._minimimVertexDistance=u}}],[{key:"constructor_",value:function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new pt}}])})();Si.COORDINATE_ARRAY_TYPE=new Array(0).fill(null);var Sr=(function(){function m(){t(this,m)}return o(m,null,[{key:"toDegrees",value:function(u){return 180*u/Math.PI}},{key:"normalize",value:function(u){for(;u>Math.PI;)u-=m.PI_TIMES_2;for(;u<=-Math.PI;)u+=m.PI_TIMES_2;return u}},{key:"angle",value:function(){if(arguments.length===1){var u=arguments[0];return Math.atan2(u.y,u.x)}if(arguments.length===2){var h=arguments[0],g=arguments[1],x=g.x-h.x,D=g.y-h.y;return Math.atan2(D,x)}}},{key:"isAcute",value:function(u,h,g){var x=u.x-h.x,D=u.y-h.y;return x*(g.x-h.x)+D*(g.y-h.y)>0}},{key:"isObtuse",value:function(u,h,g){var x=u.x-h.x,D=u.y-h.y;return x*(g.x-h.x)+D*(g.y-h.y)<0}},{key:"interiorAngle",value:function(u,h,g){var x=m.angle(h,u),D=m.angle(h,g);return Math.abs(D-x)}},{key:"normalizePositive",value:function(u){if(u<0){for(;u<0;)u+=m.PI_TIMES_2;u>=m.PI_TIMES_2&&(u=0)}else{for(;u>=m.PI_TIMES_2;)u-=m.PI_TIMES_2;u<0&&(u=0)}return u}},{key:"angleBetween",value:function(u,h,g){var x=m.angle(h,u),D=m.angle(h,g);return m.diff(x,D)}},{key:"diff",value:function(u,h){var g=null;return(g=u<h?h-u:u-h)>Math.PI&&(g=2*Math.PI-g),g}},{key:"toRadians",value:function(u){return u*Math.PI/180}},{key:"getTurn",value:function(u,h){var g=Math.sin(h-u);return g>0?m.COUNTERCLOCKWISE:g<0?m.CLOCKWISE:m.NONE}},{key:"angleBetweenOriented",value:function(u,h,g){var x=m.angle(h,u),D=m.angle(h,g)-x;return D<=-Math.PI?D+m.PI_TIMES_2:D>Math.PI?D-m.PI_TIMES_2:D}}])})();Sr.PI_TIMES_2=2*Math.PI,Sr.PI_OVER_2=Math.PI/2,Sr.PI_OVER_4=Math.PI/4,Sr.COUNTERCLOCKWISE=Ke.COUNTERCLOCKWISE,Sr.CLOCKWISE=Ke.CLOCKWISE,Sr.NONE=Ke.COLLINEAR;var ia=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"addNextSegment",value:function(u,h){if(this._s0=this._s1,this._s1=this._s2,this._s2=u,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var g=Ke.index(this._s0,this._s1,this._s2),x=g===Ke.CLOCKWISE&&this._side===he.LEFT||g===Ke.COUNTERCLOCKWISE&&this._side===he.RIGHT;g===0?this.addCollinear(h):x?this.addOutsideTurn(g,h):this.addInsideTurn(g,h)}},{key:"addLineEndCap",value:function(u,h){var g=new bt(u,h),x=new bt;this.computeOffsetSegment(g,he.LEFT,this._distance,x);var D=new bt;this.computeOffsetSegment(g,he.RIGHT,this._distance,D);var k=h.x-u.x,H=h.y-u.y,ie=Math.atan2(H,k);switch(this._bufParams.getEndCapStyle()){case S.CAP_ROUND:this._segList.addPt(x.p1),this.addDirectedFillet(h,ie+Math.PI/2,ie-Math.PI/2,Ke.CLOCKWISE,this._distance),this._segList.addPt(D.p1);break;case S.CAP_FLAT:this._segList.addPt(x.p1),this._segList.addPt(D.p1);break;case S.CAP_SQUARE:var de=new J;de.x=Math.abs(this._distance)*Math.cos(ie),de.y=Math.abs(this._distance)*Math.sin(ie);var Te=new J(x.p1.x+de.x,x.p1.y+de.y),Pe=new J(D.p1.x+de.x,D.p1.y+de.y);this._segList.addPt(Te),this._segList.addPt(Pe)}}},{key:"getCoordinates",value:function(){return this._segList.getCoordinates()}},{key:"addMitreJoin",value:function(u,h,g,x){var D=hr.intersection(h.p0,h.p1,g.p0,g.p1);if(D!==null&&(x<=0?1:D.distance(u)/Math.abs(x))<=this._bufParams.getMitreLimit())return this._segList.addPt(D),null;this.addLimitedMitreJoin(h,g,x,this._bufParams.getMitreLimit())}},{key:"addOutsideTurn",value:function(u,h){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*m.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===S.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===S.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(h&&this._segList.addPt(this._offset0.p1),this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,u,this._distance),this._segList.addPt(this._offset1.p0))}},{key:"createSquare",value:function(u){this._segList.addPt(new J(u.x+this._distance,u.y+this._distance)),this._segList.addPt(new J(u.x+this._distance,u.y-this._distance)),this._segList.addPt(new J(u.x-this._distance,u.y-this._distance)),this._segList.addPt(new J(u.x-this._distance,u.y+this._distance)),this._segList.closeRing()}},{key:"addSegments",value:function(u,h){this._segList.addPts(u,h)}},{key:"addFirstSegment",value:function(){this._segList.addPt(this._offset1.p0)}},{key:"addCornerFillet",value:function(u,h,g,x,D){var k=h.x-u.x,H=h.y-u.y,ie=Math.atan2(H,k),de=g.x-u.x,Te=g.y-u.y,Pe=Math.atan2(Te,de);x===Ke.CLOCKWISE?ie<=Pe&&(ie+=2*Math.PI):ie>=Pe&&(ie-=2*Math.PI),this._segList.addPt(h),this.addDirectedFillet(u,ie,Pe,x,D),this._segList.addPt(g)}},{key:"addLastSegment",value:function(){this._segList.addPt(this._offset1.p1)}},{key:"initSideSegments",value:function(u,h,g){this._s1=u,this._s2=h,this._side=g,this._seg1.setCoordinates(u,h),this.computeOffsetSegment(this._seg1,g,this._distance,this._offset1)}},{key:"addLimitedMitreJoin",value:function(u,h,g,x){var D=this._seg0.p1,k=Sr.angle(D,this._seg0.p0),H=Sr.angleBetweenOriented(this._seg0.p0,D,this._seg1.p1)/2,ie=Sr.normalize(k+H),de=Sr.normalize(ie+Math.PI),Te=x*g,Pe=g-Te*Math.abs(Math.sin(H)),tt=D.x+Te*Math.cos(de),mt=D.y+Te*Math.sin(de),At=new J(tt,mt),Ht=new bt(D,At),Jn=Ht.pointAlongOffset(1,Pe),qn=Ht.pointAlongOffset(1,-Pe);this._side===he.LEFT?(this._segList.addPt(Jn),this._segList.addPt(qn)):(this._segList.addPt(qn),this._segList.addPt(Jn))}},{key:"addDirectedFillet",value:function(u,h,g,x,D){var k=x===Ke.CLOCKWISE?-1:1,H=Math.abs(h-g),ie=Math.trunc(H/this._filletAngleQuantum+.5);if(ie<1)return null;for(var de=H/ie,Te=new J,Pe=0;Pe<ie;Pe++){var tt=h+k*Pe*de;Te.x=u.x+D*Math.cos(tt),Te.y=u.y+D*Math.sin(tt),this._segList.addPt(Te)}}},{key:"computeOffsetSegment",value:function(u,h,g,x){var D=h===he.LEFT?1:-1,k=u.p1.x-u.p0.x,H=u.p1.y-u.p0.y,ie=Math.sqrt(k*k+H*H),de=D*g*k/ie,Te=D*g*H/ie;x.p0.x=u.p0.x-Te,x.p0.y=u.p0.y+de,x.p1.x=u.p1.x-Te,x.p1.y=u.p1.y+de}},{key:"addInsideTurn",value:function(u,h){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*m.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var g=new J((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(g);var x=new J((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(x)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}}},{key:"createCircle",value:function(u){var h=new J(u.x+this._distance,u.y);this._segList.addPt(h),this.addDirectedFillet(u,0,2*Math.PI,-1,this._distance),this._segList.closeRing()}},{key:"addBevelJoin",value:function(u,h){this._segList.addPt(u.p1),this._segList.addPt(h.p0)}},{key:"init",value:function(u){this._distance=u,this._maxCurveSegmentError=u*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Si,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(u*m.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)}},{key:"addCollinear",value:function(u){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===S.JOIN_BEVEL||this._bufParams.getJoinStyle()===S.JOIN_MITRE?(u&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addCornerFillet(this._s1,this._offset0.p1,this._offset1.p0,Ke.CLOCKWISE,this._distance))}},{key:"closeRing",value:function(){this._segList.closeRing()}},{key:"hasNarrowConcaveAngle",value:function(){return this._hasNarrowConcaveAngle}}],[{key:"constructor_",value:function(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new bt,this._seg1=new bt,this._offset0=new bt,this._offset1=new bt,this._side=0,this._hasNarrowConcaveAngle=!1;var u=arguments[0],h=arguments[1],g=arguments[2];this._precisionModel=u,this._bufParams=h,this._li=new yu,this._filletAngleQuantum=Math.PI/2/h.getQuadrantSegments(),h.getQuadrantSegments()>=8&&h.getJoinStyle()===S.JOIN_ROUND&&(this._closingSegLengthFactor=m.MAX_CLOSING_SEG_LEN_FACTOR),this.init(g)}}])})();ia.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,ia.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,ia.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,ia.MAX_CLOSING_SEG_LEN_FACTOR=80;var Qa=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getOffsetCurve",value:function(u,h){if(this._distance=h,h===0)return null;var g=h<0,x=Math.abs(h),D=this.getSegGen(x);u.length<=1?this.computePointCurve(u[0],D):this.computeOffsetCurve(u,g,D);var k=D.getCoordinates();return g&&ei.reverse(k),k}},{key:"computeSingleSidedBufferCurve",value:function(u,h,g){var x=this.simplifyTolerance(this._distance);if(h){g.addSegments(u,!0);var D=br.simplify(u,-x),k=D.length-1;g.initSideSegments(D[k],D[k-1],he.LEFT),g.addFirstSegment();for(var H=k-2;H>=0;H--)g.addNextSegment(D[H],!0)}else{g.addSegments(u,!1);var ie=br.simplify(u,x),de=ie.length-1;g.initSideSegments(ie[0],ie[1],he.LEFT),g.addFirstSegment();for(var Te=2;Te<=de;Te++)g.addNextSegment(ie[Te],!0)}g.addLastSegment(),g.closeRing()}},{key:"computeRingBufferCurve",value:function(u,h,g){var x=this.simplifyTolerance(this._distance);h===he.RIGHT&&(x=-x);var D=br.simplify(u,x),k=D.length-1;g.initSideSegments(D[k-1],D[0],h);for(var H=1;H<=k;H++){var ie=H!==1;g.addNextSegment(D[H],ie)}g.closeRing()}},{key:"computeLineBufferCurve",value:function(u,h){var g=this.simplifyTolerance(this._distance),x=br.simplify(u,g),D=x.length-1;h.initSideSegments(x[0],x[1],he.LEFT);for(var k=2;k<=D;k++)h.addNextSegment(x[k],!0);h.addLastSegment(),h.addLineEndCap(x[D-1],x[D]);var H=br.simplify(u,-g),ie=H.length-1;h.initSideSegments(H[ie],H[ie-1],he.LEFT);for(var de=ie-2;de>=0;de--)h.addNextSegment(H[de],!0);h.addLastSegment(),h.addLineEndCap(H[1],H[0]),h.closeRing()}},{key:"computePointCurve",value:function(u,h){switch(this._bufParams.getEndCapStyle()){case S.CAP_ROUND:h.createCircle(u);break;case S.CAP_SQUARE:h.createSquare(u)}}},{key:"getLineCurve",value:function(u,h){if(this._distance=h,this.isLineOffsetEmpty(h))return null;var g=Math.abs(h),x=this.getSegGen(g);if(u.length<=1)this.computePointCurve(u[0],x);else if(this._bufParams.isSingleSided()){var D=h<0;this.computeSingleSidedBufferCurve(u,D,x)}else this.computeLineBufferCurve(u,x);return x.getCoordinates()}},{key:"getBufferParameters",value:function(){return this._bufParams}},{key:"simplifyTolerance",value:function(u){return u*this._bufParams.getSimplifyFactor()}},{key:"getRingCurve",value:function(u,h,g){if(this._distance=g,u.length<=2)return this.getLineCurve(u,g);if(g===0)return m.copyCoordinates(u);var x=this.getSegGen(g);return this.computeRingBufferCurve(u,h,x),x.getCoordinates()}},{key:"computeOffsetCurve",value:function(u,h,g){var x=this.simplifyTolerance(this._distance);if(h){var D=br.simplify(u,-x),k=D.length-1;g.initSideSegments(D[k],D[k-1],he.LEFT),g.addFirstSegment();for(var H=k-2;H>=0;H--)g.addNextSegment(D[H],!0)}else{var ie=br.simplify(u,x),de=ie.length-1;g.initSideSegments(ie[0],ie[1],he.LEFT),g.addFirstSegment();for(var Te=2;Te<=de;Te++)g.addNextSegment(ie[Te],!0)}g.addLastSegment()}},{key:"isLineOffsetEmpty",value:function(u){return u===0||u<0&&!this._bufParams.isSingleSided()}},{key:"getSegGen",value:function(u){return new ia(this._precisionModel,this._bufParams,u)}}],[{key:"constructor_",value:function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var u=arguments[0],h=arguments[1];this._precisionModel=u,this._bufParams=h}},{key:"copyCoordinates",value:function(u){for(var h=new Array(u.length).fill(null),g=0;g<h.length;g++)h[g]=new J(u[g]);return h}}])})(),Al=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"findStabbedSegments",value:function(){if(arguments.length===1){for(var m=arguments[0],u=new pt,h=this._subgraphs.iterator();h.hasNext();){var g=h.next(),x=g.getEnvelope();m.y<x.getMinY()||m.y>x.getMaxY()||this.findStabbedSegments(m,g.getDirectedEdges(),u)}return u}if(arguments.length===3){if(Le(arguments[2],we)&&arguments[0]instanceof J&&arguments[1]instanceof Ja){for(var D=arguments[0],k=arguments[1],H=arguments[2],ie=k.getEdge().getCoordinates(),de=0;de<ie.length-1;de++)if(this._seg.p0=ie[de],this._seg.p1=ie[de+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<D.x||this._seg.isHorizontal()||D.y<this._seg.p0.y||D.y>this._seg.p1.y||Ke.index(this._seg.p0,this._seg.p1,D)===Ke.RIGHT)){var Te=k.getDepth(he.LEFT);this._seg.p0.equals(ie[de])||(Te=k.getDepth(he.RIGHT));var Pe=new Tf(this._seg,Te);H.add(Pe)}}else if(Le(arguments[2],we)&&arguments[0]instanceof J&&Le(arguments[1],we))for(var tt=arguments[0],mt=arguments[2],At=arguments[1].iterator();At.hasNext();){var Ht=At.next();Ht.isForward()&&this.findStabbedSegments(tt,Ht,mt)}}}},{key:"getDepth",value:function(m){var u=this.findStabbedSegments(m);return u.size()===0?0:ba.min(u)._leftDepth}}],[{key:"constructor_",value:function(){this._subgraphs=null,this._seg=new bt;var m=arguments[0];this._subgraphs=m}}])})(),Tf=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"compareTo",value:function(m){var u=m;if(this._upwardSeg.minX()>=u._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=u._upwardSeg.minX())return-1;var h=this._upwardSeg.orientationIndex(u._upwardSeg);return h!==0||(h=-1*u._upwardSeg.orientationIndex(this._upwardSeg))!==0?h:this._upwardSeg.compareTo(u._upwardSeg)}},{key:"compareX",value:function(m,u){var h=m.p0.compareTo(u.p0);return h!==0?h:m.p1.compareTo(u.p1)}},{key:"toString",value:function(){return this._upwardSeg.toString()}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._upwardSeg=null,this._leftDepth=null;var m=arguments[0],u=arguments[1];this._upwardSeg=new bt(m),this._leftDepth=u}}])})();Al.DepthSegment=Tf;var ih=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,null,[{key:"constructor_",value:function(){T.constructor_.call(this,"Projective point not representable on the Cartesian plane.")}}])})(T),Rl=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getY",value:function(){var u=this.y/this.w;if(q.isNaN(u)||q.isInfinite(u))throw new ih;return u}},{key:"getX",value:function(){var u=this.x/this.w;if(q.isNaN(u)||q.isInfinite(u))throw new ih;return u}},{key:"getCoordinate",value:function(){var u=new J;return u.x=this.getX(),u.y=this.getY(),u}}],[{key:"constructor_",value:function(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var u=arguments[0];this.x=u.x,this.y=u.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var h=arguments[0],g=arguments[1];this.x=h,this.y=g,this.w=1}else if(arguments[0]instanceof m&&arguments[1]instanceof m){var x=arguments[0],D=arguments[1];this.x=x.y*D.w-D.y*x.w,this.y=D.x*x.w-x.x*D.w,this.w=x.x*D.y-D.x*x.y}else if(arguments[0]instanceof J&&arguments[1]instanceof J){var k=arguments[0],H=arguments[1];this.x=k.y-H.y,this.y=H.x-k.x,this.w=k.x*H.y-H.x*k.y}}else if(arguments.length===3){var ie=arguments[0],de=arguments[1],Te=arguments[2];this.x=ie,this.y=de,this.w=Te}else if(arguments.length===4){var Pe=arguments[0],tt=arguments[1],mt=arguments[2],At=arguments[3],Ht=Pe.y-tt.y,Jn=tt.x-Pe.x,qn=Pe.x*tt.y-tt.x*Pe.y,Mr=mt.y-At.y,ho=At.x-mt.x,Ro=mt.x*At.y-At.x*mt.y;this.x=Jn*Ro-ho*qn,this.y=Mr*qn-Ht*Ro,this.w=Ht*ho-Mr*Jn}}}])})(),oh=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"area",value:function(){return m.area(this.p0,this.p1,this.p2)}},{key:"signedArea",value:function(){return m.signedArea(this.p0,this.p1,this.p2)}},{key:"interpolateZ",value:function(u){if(u===null)throw new A("Supplied point is null.");return m.interpolateZ(u,this.p0,this.p1,this.p2)}},{key:"longestSideLength",value:function(){return m.longestSideLength(this.p0,this.p1,this.p2)}},{key:"isAcute",value:function(){return m.isAcute(this.p0,this.p1,this.p2)}},{key:"circumcentre",value:function(){return m.circumcentre(this.p0,this.p1,this.p2)}},{key:"area3D",value:function(){return m.area3D(this.p0,this.p1,this.p2)}},{key:"centroid",value:function(){return m.centroid(this.p0,this.p1,this.p2)}},{key:"inCentre",value:function(){return m.inCentre(this.p0,this.p1,this.p2)}}],[{key:"constructor_",value:function(){this.p0=null,this.p1=null,this.p2=null;var u=arguments[0],h=arguments[1],g=arguments[2];this.p0=u,this.p1=h,this.p2=g}},{key:"area",value:function(u,h,g){return Math.abs(((g.x-u.x)*(h.y-u.y)-(h.x-u.x)*(g.y-u.y))/2)}},{key:"signedArea",value:function(u,h,g){return((g.x-u.x)*(h.y-u.y)-(h.x-u.x)*(g.y-u.y))/2}},{key:"det",value:function(u,h,g,x){return u*x-h*g}},{key:"interpolateZ",value:function(u,h,g,x){var D=h.x,k=h.y,H=g.x-D,ie=x.x-D,de=g.y-k,Te=x.y-k,Pe=H*Te-ie*de,tt=u.x-D,mt=u.y-k,At=(Te*tt-ie*mt)/Pe,Ht=(-de*tt+H*mt)/Pe;return h.getZ()+At*(g.getZ()-h.getZ())+Ht*(x.getZ()-h.getZ())}},{key:"longestSideLength",value:function(u,h,g){var x=u.distance(h),D=h.distance(g),k=g.distance(u),H=x;return D>H&&(H=D),k>H&&(H=k),H}},{key:"circumcentreDD",value:function(u,h,g){var x=qe.valueOf(u.x).subtract(g.x),D=qe.valueOf(u.y).subtract(g.y),k=qe.valueOf(h.x).subtract(g.x),H=qe.valueOf(h.y).subtract(g.y),ie=qe.determinant(x,D,k,H).multiply(2),de=x.sqr().add(D.sqr()),Te=k.sqr().add(H.sqr()),Pe=qe.determinant(D,de,H,Te),tt=qe.determinant(x,de,k,Te),mt=qe.valueOf(g.x).subtract(Pe.divide(ie)).doubleValue(),At=qe.valueOf(g.y).add(tt.divide(ie)).doubleValue();return new J(mt,At)}},{key:"isAcute",value:function(u,h,g){return!!Sr.isAcute(u,h,g)&&!!Sr.isAcute(h,g,u)&&!!Sr.isAcute(g,u,h)}},{key:"circumcentre",value:function(u,h,g){var x=g.x,D=g.y,k=u.x-x,H=u.y-D,ie=h.x-x,de=h.y-D,Te=2*m.det(k,H,ie,de),Pe=m.det(H,k*k+H*H,de,ie*ie+de*de),tt=m.det(k,k*k+H*H,ie,ie*ie+de*de);return new J(x-Pe/Te,D+tt/Te)}},{key:"perpendicularBisector",value:function(u,h){var g=h.x-u.x,x=h.y-u.y,D=new Rl(u.x+g/2,u.y+x/2,1),k=new Rl(u.x-x+g/2,u.y+g+x/2,1);return new Rl(D,k)}},{key:"angleBisector",value:function(u,h,g){var x=h.distance(u),D=x/(x+h.distance(g)),k=g.x-u.x,H=g.y-u.y;return new J(u.x+D*k,u.y+D*H)}},{key:"area3D",value:function(u,h,g){var x=h.x-u.x,D=h.y-u.y,k=h.getZ()-u.getZ(),H=g.x-u.x,ie=g.y-u.y,de=g.getZ()-u.getZ(),Te=D*de-k*ie,Pe=k*H-x*de,tt=x*ie-D*H,mt=Te*Te+Pe*Pe+tt*tt,At=Math.sqrt(mt)/2;return At}},{key:"centroid",value:function(u,h,g){var x=(u.x+h.x+g.x)/3,D=(u.y+h.y+g.y)/3;return new J(x,D)}},{key:"inCentre",value:function(u,h,g){var x=h.distance(g),D=u.distance(g),k=u.distance(h),H=x+D+k,ie=(x*u.x+D*h.x+k*g.x)/H,de=(x*u.y+D*h.y+k*g.y)/H;return new J(ie,de)}}])})(),sh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"addRingSide",value:function(m,u,h,g,x){if(u===0&&m.length<Es.MINIMUM_VALID_SIZE)return null;var D=g,k=x;m.length>=Es.MINIMUM_VALID_SIZE&&Ke.isCCW(m)&&(D=x,k=g,h=he.opposite(h));var H=this._curveBuilder.getRingCurve(m,h,u);this.addCurve(H,D,k)}},{key:"addRingBothSides",value:function(m,u){this.addRingSide(m,u,he.LEFT,re.EXTERIOR,re.INTERIOR),this.addRingSide(m,u,he.RIGHT,re.INTERIOR,re.EXTERIOR)}},{key:"addPoint",value:function(m){if(this._distance<=0)return null;var u=m.getCoordinates(),h=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(h,re.EXTERIOR,re.INTERIOR)}},{key:"addPolygon",value:function(m){var u=this._distance,h=he.LEFT;this._distance<0&&(u=-this._distance,h=he.RIGHT);var g=m.getExteriorRing(),x=ei.removeRepeatedPoints(g.getCoordinates());if(this._distance<0&&this.isErodedCompletely(g,this._distance)||this._distance<=0&&x.length<3)return null;this.addRingSide(x,u,h,re.EXTERIOR,re.INTERIOR);for(var D=0;D<m.getNumInteriorRing();D++){var k=m.getInteriorRingN(D),H=ei.removeRepeatedPoints(k.getCoordinates());this._distance>0&&this.isErodedCompletely(k,-this._distance)||this.addRingSide(H,u,he.opposite(h),re.INTERIOR,re.EXTERIOR)}}},{key:"isTriangleErodedCompletely",value:function(m,u){var h=new oh(m[0],m[1],m[2]),g=h.inCentre();return Dt.pointToSegment(g,h.p0,h.p1)<Math.abs(u)}},{key:"addLineString",value:function(m){if(this._curveBuilder.isLineOffsetEmpty(this._distance))return null;var u=ei.removeRepeatedPoints(m.getCoordinates());if(ei.isRing(u)&&!this._curveBuilder.getBufferParameters().isSingleSided())this.addRingBothSides(u,this._distance);else{var h=this._curveBuilder.getLineCurve(u,this._distance);this.addCurve(h,re.EXTERIOR,re.INTERIOR)}}},{key:"addCurve",value:function(m,u,h){if(m===null||m.length<2)return null;var g=new et(m,new Is(0,re.BOUNDARY,u,h));this._curveList.add(g)}},{key:"getCurves",value:function(){return this.add(this._inputGeom),this._curveList}},{key:"add",value:function(m){if(m.isEmpty())return null;if(m instanceof Zn)this.addPolygon(m);else if(m instanceof Qr)this.addLineString(m);else if(m instanceof wi)this.addPoint(m);else if(m instanceof ta)this.addCollection(m);else if(m instanceof eh)this.addCollection(m);else if(m instanceof vf)this.addCollection(m);else{if(!(m instanceof Oi))throw new be(m.getGeometryType());this.addCollection(m)}}},{key:"isErodedCompletely",value:function(m,u){var h=m.getCoordinates();if(h.length<4)return u<0;if(h.length===4)return this.isTriangleErodedCompletely(h,u);var g=m.getEnvelopeInternal(),x=Math.min(g.getHeight(),g.getWidth());return u<0&&2*Math.abs(u)>x}},{key:"addCollection",value:function(m){for(var u=0;u<m.getNumGeometries();u++){var h=m.getGeometryN(u);this.add(h)}}}],[{key:"constructor_",value:function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new pt;var m=arguments[0],u=arguments[1],h=arguments[2];this._inputGeom=m,this._distance=u,this._curveBuilder=h}}])})(),ac=(function(){return o(function m(){t(this,m)},[{key:"locate",value:function(m){}}])})(),Do=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"next",value:function(){if(this._atStart)return this._atStart=!1,m.isAtomic(this._parent)&&this._index++,this._parent;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new G;var u=this._parent.getGeometryN(this._index++);return u instanceof Oi?(this._subcollectionIterator=new m(u),this._subcollectionIterator.next()):u}},{key:"remove",value:function(){throw new be(this.getClass().getName())}},{key:"hasNext",value:function(){if(this._atStart)return!0;if(this._subcollectionIterator!==null){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)}},{key:"interfaces_",get:function(){return[te]}}],[{key:"constructor_",value:function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var u=arguments[0];this._parent=u,this._atStart=!0,this._index=0,this._max=u.getNumGeometries()}},{key:"isAtomic",value:function(u){return!(u instanceof Oi)}}])})(),ah=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"locate",value:function(u){return m.locate(u,this._geom)}},{key:"interfaces_",get:function(){return[ac]}}],[{key:"constructor_",value:function(){this._geom=null;var u=arguments[0];this._geom=u}},{key:"locatePointInPolygon",value:function(u,h){if(h.isEmpty())return re.EXTERIOR;var g=h.getExteriorRing(),x=m.locatePointInRing(u,g);if(x!==re.INTERIOR)return x;for(var D=0;D<h.getNumInteriorRing();D++){var k=h.getInteriorRingN(D),H=m.locatePointInRing(u,k);if(H===re.BOUNDARY)return re.BOUNDARY;if(H===re.INTERIOR)return re.EXTERIOR}return re.INTERIOR}},{key:"locatePointInRing",value:function(u,h){return h.getEnvelopeInternal().intersects(u)?Ef.locateInRing(u,h.getCoordinates()):re.EXTERIOR}},{key:"containsPointInPolygon",value:function(u,h){return re.EXTERIOR!==m.locatePointInPolygon(u,h)}},{key:"locateInGeometry",value:function(u,h){if(h instanceof Zn)return m.locatePointInPolygon(u,h);if(h instanceof Oi)for(var g=new Do(h);g.hasNext();){var x=g.next();if(x!==h){var D=m.locateInGeometry(u,x);if(D!==re.EXTERIOR)return D}}return re.EXTERIOR}},{key:"isContained",value:function(u,h){return re.EXTERIOR!==m.locate(u,h)}},{key:"locate",value:function(u,h){return h.isEmpty()?re.EXTERIOR:h.getEnvelopeInternal().intersects(u)?m.locateInGeometry(u,h):re.EXTERIOR}}])})(),lh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getNextCW",value:function(m){this.getEdges();var u=this._edgeList.indexOf(m),h=u-1;return u===0&&(h=this._edgeList.size()-1),this._edgeList.get(h)}},{key:"propagateSideLabels",value:function(m){for(var u=re.NONE,h=this.iterator();h.hasNext();){var g=h.next().getLabel();g.isArea(m)&&g.getLocation(m,he.LEFT)!==re.NONE&&(u=g.getLocation(m,he.LEFT))}if(u===re.NONE)return null;for(var x=u,D=this.iterator();D.hasNext();){var k=D.next(),H=k.getLabel();if(H.getLocation(m,he.ON)===re.NONE&&H.setLocation(m,he.ON,x),H.isArea(m)){var ie=H.getLocation(m,he.LEFT),de=H.getLocation(m,he.RIGHT);if(de!==re.NONE){if(de!==x)throw new ht("side location conflict",k.getCoordinate());ie===re.NONE&&F.shouldNeverReachHere("found single null side (at "+k.getCoordinate()+")"),x=ie}else F.isTrue(H.getLocation(m,he.LEFT)===re.NONE,"found single null side"),H.setLocation(m,he.RIGHT,x),H.setLocation(m,he.LEFT,x)}}}},{key:"getCoordinate",value:function(){var m=this.iterator();return m.hasNext()?m.next().getCoordinate():null}},{key:"print",value:function(m){Tt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"isAreaLabelsConsistent",value:function(m){return this.computeEdgeEndLabels(m.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)}},{key:"checkAreaLabelsConsistent",value:function(m){var u=this.getEdges();if(u.size()<=0)return!0;var h=u.size()-1,g=u.get(h).getLabel().getLocation(m,he.LEFT);F.isTrue(g!==re.NONE,"Found unlabelled area edge");for(var x=g,D=this.iterator();D.hasNext();){var k=D.next().getLabel();F.isTrue(k.isArea(m),"Found non-area edge");var H=k.getLocation(m,he.LEFT),ie=k.getLocation(m,he.RIGHT);if(H===ie||ie!==x)return!1;x=H}return!0}},{key:"findIndex",value:function(m){this.iterator();for(var u=0;u<this._edgeList.size();u++)if(this._edgeList.get(u)===m)return u;return-1}},{key:"iterator",value:function(){return this.getEdges().iterator()}},{key:"getEdges",value:function(){return this._edgeList===null&&(this._edgeList=new pt(this._edgeMap.values())),this._edgeList}},{key:"getLocation",value:function(m,u,h){return this._ptInAreaLocation[m]===re.NONE&&(this._ptInAreaLocation[m]=ah.locate(u,h[m].getGeometry())),this._ptInAreaLocation[m]}},{key:"toString",value:function(){var m=new Be;m.append("EdgeEndStar:   "+this.getCoordinate()),m.append(`
`);for(var u=this.iterator();u.hasNext();){var h=u.next();m.append(h),m.append(`
`)}return m.toString()}},{key:"computeEdgeEndLabels",value:function(m){for(var u=this.iterator();u.hasNext();)u.next().computeLabel(m)}},{key:"computeLabelling",value:function(m){this.computeEdgeEndLabels(m[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var u=[!1,!1],h=this.iterator();h.hasNext();)for(var g=h.next().getLabel(),x=0;x<2;x++)g.isLine(x)&&g.getLocation(x)===re.BOUNDARY&&(u[x]=!0);for(var D=this.iterator();D.hasNext();)for(var k=D.next(),H=k.getLabel(),ie=0;ie<2;ie++)if(H.isAnyNull(ie)){var de=re.NONE;if(u[ie])de=re.EXTERIOR;else{var Te=k.getCoordinate();de=this.getLocation(ie,Te,m)}H.setAllLocationsIfNull(ie,de)}}},{key:"getDegree",value:function(){return this._edgeMap.size()}},{key:"insertEdgeEnd",value:function(m,u){this._edgeMap.put(m,u),this._edgeList=null}}],[{key:"constructor_",value:function(){this._edgeMap=new Dl,this._edgeList=null,this._ptInAreaLocation=[re.NONE,re.NONE]}}])})(),cp=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"linkResultDirectedEdges",value:function(){this.getResultAreaEdges();for(var h=null,g=null,x=this._SCANNING_FOR_INCOMING,D=0;D<this._resultAreaEdgeList.size();D++){var k=this._resultAreaEdgeList.get(D),H=k.getSym();if(k.getLabel().isArea())switch(h===null&&k.isInResult()&&(h=k),x){case this._SCANNING_FOR_INCOMING:if(!H.isInResult())continue;g=H,x=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!k.isInResult())continue;g.setNext(k),x=this._SCANNING_FOR_INCOMING}}if(x===this._LINKING_TO_OUTGOING){if(h===null)throw new ht("no outgoing dirEdge found",this.getCoordinate());F.isTrue(h.isInResult(),"unable to link last incoming dirEdge"),g.setNext(h)}}},{key:"insert",value:function(h){var g=h;this.insertEdgeEnd(g,g)}},{key:"getRightmostEdge",value:function(){var h=this.getEdges(),g=h.size();if(g<1)return null;var x=h.get(0);if(g===1)return x;var D=h.get(g-1),k=x.getQuadrant(),H=D.getQuadrant();return bi.isNorthern(k)&&bi.isNorthern(H)?x:bi.isNorthern(k)||bi.isNorthern(H)?x.getDy()!==0?x:D.getDy()!==0?D:(F.shouldNeverReachHere("found two horizontal edges incident on node"),null):D}},{key:"print",value:function(h){Tt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var g=this.iterator();g.hasNext();){var x=g.next();h.print("out "),x.print(h),h.println(),h.print("in "),x.getSym().print(h),h.println()}}},{key:"getResultAreaEdges",value:function(){if(this._resultAreaEdgeList!==null)return this._resultAreaEdgeList;this._resultAreaEdgeList=new pt;for(var h=this.iterator();h.hasNext();){var g=h.next();(g.isInResult()||g.getSym().isInResult())&&this._resultAreaEdgeList.add(g)}return this._resultAreaEdgeList}},{key:"updateLabelling",value:function(h){for(var g=this.iterator();g.hasNext();){var x=g.next().getLabel();x.setAllLocationsIfNull(0,h.getLocation(0)),x.setAllLocationsIfNull(1,h.getLocation(1))}}},{key:"linkAllDirectedEdges",value:function(){this.getEdges();for(var h=null,g=null,x=this._edgeList.size()-1;x>=0;x--){var D=this._edgeList.get(x),k=D.getSym();g===null&&(g=k),h!==null&&k.setNext(h),h=D}g.setNext(h)}},{key:"computeDepths",value:function(){if(arguments.length===1){var h=arguments[0],g=this.findIndex(h),x=h.getDepth(he.LEFT),D=h.getDepth(he.RIGHT),k=this.computeDepths(g+1,this._edgeList.size(),x);if(this.computeDepths(0,g,k)!==D)throw new ht("depth mismatch at "+h.getCoordinate())}else if(arguments.length===3){for(var H=arguments[1],ie=arguments[2],de=arguments[0];de<H;de++){var Te=this._edgeList.get(de);Te.setEdgeDepths(he.RIGHT,ie),ie=Te.getDepth(he.LEFT)}return ie}}},{key:"mergeSymLabels",value:function(){for(var h=this.iterator();h.hasNext();){var g=h.next();g.getLabel().merge(g.getSym().getLabel())}}},{key:"linkMinimalDirectedEdges",value:function(h){for(var g=null,x=null,D=this._SCANNING_FOR_INCOMING,k=this._resultAreaEdgeList.size()-1;k>=0;k--){var H=this._resultAreaEdgeList.get(k),ie=H.getSym();switch(g===null&&H.getEdgeRing()===h&&(g=H),D){case this._SCANNING_FOR_INCOMING:if(ie.getEdgeRing()!==h)continue;x=ie,D=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(H.getEdgeRing()!==h)continue;x.setNextMin(H),D=this._SCANNING_FOR_INCOMING}}D===this._LINKING_TO_OUTGOING&&(F.isTrue(g!==null,"found null for first outgoing dirEdge"),F.isTrue(g.getEdgeRing()===h,"unable to link last incoming dirEdge"),x.setNextMin(g))}},{key:"getOutgoingDegree",value:function(){if(arguments.length===0){for(var h=0,g=this.iterator();g.hasNext();)g.next().isInResult()&&h++;return h}if(arguments.length===1){for(var x=arguments[0],D=0,k=this.iterator();k.hasNext();)k.next().getEdgeRing()===x&&D++;return D}}},{key:"getLabel",value:function(){return this._label}},{key:"findCoveredLineEdges",value:function(){for(var h=re.NONE,g=this.iterator();g.hasNext();){var x=g.next(),D=x.getSym();if(!x.isLineEdge()){if(x.isInResult()){h=re.INTERIOR;break}if(D.isInResult()){h=re.EXTERIOR;break}}}if(h===re.NONE)return null;for(var k=h,H=this.iterator();H.hasNext();){var ie=H.next(),de=ie.getSym();ie.isLineEdge()?ie.getEdge().setCovered(k===re.INTERIOR):(ie.isInResult()&&(k=re.EXTERIOR),de.isInResult()&&(k=re.INTERIOR))}}},{key:"computeLabelling",value:function(h){y(u,"computeLabelling",this,1).call(this,h),this._label=new Is(re.NONE);for(var g=this.iterator();g.hasNext();)for(var x=g.next().getEdge().getLabel(),D=0;D<2;D++){var k=x.getLocation(D);k!==re.INTERIOR&&k!==re.BOUNDARY||this._label.setLocation(D,re.INTERIOR)}}}],[{key:"constructor_",value:function(){this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}}])})(lh),hp=(function(m){function u(){return t(this,u),e(this,u)}return c(u,m),o(u,[{key:"createNode",value:function(h){return new bf(h,new cp)}}])})(nm),Yo=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"compareTo",value:function(u){var h=u;return m.compareOriented(this._pts,this._orientation,h._pts,h._orientation)}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this._pts=null,this._orientation=null;var u=arguments[0];this._pts=u,this._orientation=m.orientation(u)}},{key:"orientation",value:function(u){return ei.increasingDirection(u)===1}},{key:"compareOriented",value:function(u,h,g,x){for(var D=h?1:-1,k=x?1:-1,H=h?u.length:-1,ie=x?g.length:-1,de=h?0:u.length-1,Te=x?0:g.length-1;;){var Pe=u[de].compareTo(g[Te]);if(Pe!==0)return Pe;var tt=(de+=D)===H,mt=(Te+=k)===ie;if(tt&&!mt)return-1;if(!tt&&mt)return 1;if(tt&&mt)return 0}}}])})(),xu=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"print",value:function(m){m.print("MULTILINESTRING ( ");for(var u=0;u<this._edges.size();u++){var h=this._edges.get(u);u>0&&m.print(","),m.print("(");for(var g=h.getCoordinates(),x=0;x<g.length;x++)x>0&&m.print(","),m.print(g[x].x+" "+g[x].y);m.println(")")}m.print(")  ")}},{key:"addAll",value:function(m){for(var u=m.iterator();u.hasNext();)this.add(u.next())}},{key:"findEdgeIndex",value:function(m){for(var u=0;u<this._edges.size();u++)if(this._edges.get(u).equals(m))return u;return-1}},{key:"iterator",value:function(){return this._edges.iterator()}},{key:"getEdges",value:function(){return this._edges}},{key:"get",value:function(m){return this._edges.get(m)}},{key:"findEqualEdge",value:function(m){var u=new Yo(m.getCoordinates());return this._ocaMap.get(u)}},{key:"add",value:function(m){this._edges.add(m);var u=new Yo(m.getCoordinates());this._ocaMap.put(u,m)}}],[{key:"constructor_",value:function(){this._edges=new pt,this._ocaMap=new Dl}}])})(),uh=(function(){return o(function m(){t(this,m)},[{key:"processIntersections",value:function(m,u,h,g){}},{key:"isDone",value:function(){}}])})(),im=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isTrivialIntersection",value:function(u,h,g,x){if(u===g&&this._li.getIntersectionNum()===1){if(m.isAdjacentSegments(h,x))return!0;if(u.isClosed()){var D=u.size()-1;if(h===0&&x===D||x===0&&h===D)return!0}}return!1}},{key:"getProperIntersectionPoint",value:function(){return this._properIntersectionPoint}},{key:"hasProperInteriorIntersection",value:function(){return this._hasProperInterior}},{key:"getLineIntersector",value:function(){return this._li}},{key:"hasProperIntersection",value:function(){return this._hasProper}},{key:"processIntersections",value:function(u,h,g,x){if(u===g&&h===x)return null;this.numTests++;var D=u.getCoordinates()[h],k=u.getCoordinates()[h+1],H=g.getCoordinates()[x],ie=g.getCoordinates()[x+1];this._li.computeIntersection(D,k,H,ie),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(u,h,g,x)||(this._hasIntersection=!0,u.addIntersections(this._li,h,0),g.addIntersections(this._li,x,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))}},{key:"hasIntersection",value:function(){return this._hasIntersection}},{key:"isDone",value:function(){return!1}},{key:"hasInteriorIntersection",value:function(){return this._hasInterior}},{key:"interfaces_",get:function(){return[uh]}}],[{key:"constructor_",value:function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var u=arguments[0];this._li=u}},{key:"isAdjacentSegments",value:function(u,h){return Math.abs(u-h)===1}}])})(),Sa=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getSegmentIndex",value:function(){return this.segmentIndex}},{key:"getCoordinate",value:function(){return this.coord}},{key:"print",value:function(m){m.print(this.coord),m.print(" seg # = "+this.segmentIndex),m.println(" dist = "+this.dist)}},{key:"compareTo",value:function(m){var u=m;return this.compare(u.segmentIndex,u.dist)}},{key:"isEndPoint",value:function(m){return this.segmentIndex===0&&this.dist===0||this.segmentIndex===m}},{key:"toString",value:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist}},{key:"getDistance",value:function(){return this.dist}},{key:"compare",value:function(m,u){return this.segmentIndex<m?-1:this.segmentIndex>m?1:this.dist<u?-1:this.dist>u?1:0}},{key:"interfaces_",get:function(){return[O]}}],[{key:"constructor_",value:function(){this.coord=null,this.segmentIndex=null,this.dist=null;var m=arguments[0],u=arguments[1],h=arguments[2];this.coord=new J(m),this.segmentIndex=u,this.dist=h}}])})(),ch=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"print",value:function(m){m.println("Intersections:");for(var u=this.iterator();u.hasNext();)u.next().print(m)}},{key:"iterator",value:function(){return this._nodeMap.values().iterator()}},{key:"addSplitEdges",value:function(m){this.addEndpoints();for(var u=this.iterator(),h=u.next();u.hasNext();){var g=u.next(),x=this.createSplitEdge(h,g);m.add(x),h=g}}},{key:"addEndpoints",value:function(){var m=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[m],m,0)}},{key:"createSplitEdge",value:function(m,u){var h=u.segmentIndex-m.segmentIndex+2,g=this.edge.pts[u.segmentIndex],x=u.dist>0||!u.coord.equals2D(g);x||h--;var D=new Array(h).fill(null),k=0;D[k++]=new J(m.coord);for(var H=m.segmentIndex+1;H<=u.segmentIndex;H++)D[k++]=this.edge.pts[H];return x&&(D[k]=u.coord),new As(D,new Is(this.edge._label))}},{key:"add",value:function(m,u,h){var g=new Sa(m,u,h),x=this._nodeMap.get(g);return x!==null?x:(this._nodeMap.put(g,g),g)}},{key:"isIntersection",value:function(m){for(var u=this.iterator();u.hasNext();)if(u.next().coord.equals(m))return!0;return!1}}],[{key:"constructor_",value:function(){this._nodeMap=new Dl,this.edge=null;var m=arguments[0];this.edge=m}}])})(),fp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"isIntersects",value:function(){return!this.isDisjoint()}},{key:"isCovers",value:function(){return(m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])||m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"isCoveredBy",value:function(){return(m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])||m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE}},{key:"set",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<u.length;h++){var g=Math.trunc(h/3),x=h%3;this._matrix[g][x]=at.toDimensionValue(u.charAt(h))}else if(arguments.length===3){var D=arguments[0],k=arguments[1],H=arguments[2];this._matrix[D][k]=H}}},{key:"isContains",value:function(){return m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"setAtLeast",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<u.length;h++){var g=Math.trunc(h/3),x=h%3;this.setAtLeast(g,x,at.toDimensionValue(u.charAt(h)))}else if(arguments.length===3){var D=arguments[0],k=arguments[1],H=arguments[2];this._matrix[D][k]<H&&(this._matrix[D][k]=H)}}},{key:"setAtLeastIfValid",value:function(u,h,g){u>=0&&h>=0&&this.setAtLeast(u,h,g)}},{key:"isWithin",value:function(){return m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE}},{key:"isTouches",value:function(u,h){return u>h?this.isTouches(h,u):(u===at.A&&h===at.A||u===at.L&&h===at.L||u===at.L&&h===at.A||u===at.P&&h===at.A||u===at.P&&h===at.L)&&this._matrix[re.INTERIOR][re.INTERIOR]===at.FALSE&&(m.isTrue(this._matrix[re.INTERIOR][re.BOUNDARY])||m.isTrue(this._matrix[re.BOUNDARY][re.INTERIOR])||m.isTrue(this._matrix[re.BOUNDARY][re.BOUNDARY]))}},{key:"isOverlaps",value:function(u,h){return u===at.P&&h===at.P||u===at.A&&h===at.A?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR]):u===at.L&&h===at.L&&this._matrix[re.INTERIOR][re.INTERIOR]===1&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR])}},{key:"isEquals",value:function(u,h){return u===h&&m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&this._matrix[re.INTERIOR][re.EXTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.EXTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.EXTERIOR][re.BOUNDARY]===at.FALSE}},{key:"toString",value:function(){for(var u=new du("123456789"),h=0;h<3;h++)for(var g=0;g<3;g++)u.setCharAt(3*h+g,at.toDimensionSymbol(this._matrix[h][g]));return u.toString()}},{key:"setAll",value:function(u){for(var h=0;h<3;h++)for(var g=0;g<3;g++)this._matrix[h][g]=u}},{key:"get",value:function(u,h){return this._matrix[u][h]}},{key:"transpose",value:function(){var u=this._matrix[1][0];return this._matrix[1][0]=this._matrix[0][1],this._matrix[0][1]=u,u=this._matrix[2][0],this._matrix[2][0]=this._matrix[0][2],this._matrix[0][2]=u,u=this._matrix[2][1],this._matrix[2][1]=this._matrix[1][2],this._matrix[1][2]=u,this}},{key:"matches",value:function(u){if(u.length!==9)throw new A("Should be length 9: "+u);for(var h=0;h<3;h++)for(var g=0;g<3;g++)if(!m.matches(this._matrix[h][g],u.charAt(3*h+g)))return!1;return!0}},{key:"add",value:function(u){for(var h=0;h<3;h++)for(var g=0;g<3;g++)this.setAtLeast(h,g,u.get(h,g))}},{key:"isDisjoint",value:function(){return this._matrix[re.INTERIOR][re.INTERIOR]===at.FALSE&&this._matrix[re.INTERIOR][re.BOUNDARY]===at.FALSE&&this._matrix[re.BOUNDARY][re.INTERIOR]===at.FALSE&&this._matrix[re.BOUNDARY][re.BOUNDARY]===at.FALSE}},{key:"isCrosses",value:function(u,h){return u===at.P&&h===at.L||u===at.P&&h===at.A||u===at.L&&h===at.A?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.INTERIOR][re.EXTERIOR]):u===at.L&&h===at.P||u===at.A&&h===at.P||u===at.A&&h===at.L?m.isTrue(this._matrix[re.INTERIOR][re.INTERIOR])&&m.isTrue(this._matrix[re.EXTERIOR][re.INTERIOR]):u===at.L&&h===at.L&&this._matrix[re.INTERIOR][re.INTERIOR]===0}},{key:"interfaces_",get:function(){return[W]}}],[{key:"constructor_",value:function(){if(this._matrix=null,arguments.length===0)this._matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(at.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var u=arguments[0];m.constructor_.call(this),this.set(u)}else if(arguments[0]instanceof m){var h=arguments[0];m.constructor_.call(this),this._matrix[re.INTERIOR][re.INTERIOR]=h._matrix[re.INTERIOR][re.INTERIOR],this._matrix[re.INTERIOR][re.BOUNDARY]=h._matrix[re.INTERIOR][re.BOUNDARY],this._matrix[re.INTERIOR][re.EXTERIOR]=h._matrix[re.INTERIOR][re.EXTERIOR],this._matrix[re.BOUNDARY][re.INTERIOR]=h._matrix[re.BOUNDARY][re.INTERIOR],this._matrix[re.BOUNDARY][re.BOUNDARY]=h._matrix[re.BOUNDARY][re.BOUNDARY],this._matrix[re.BOUNDARY][re.EXTERIOR]=h._matrix[re.BOUNDARY][re.EXTERIOR],this._matrix[re.EXTERIOR][re.INTERIOR]=h._matrix[re.EXTERIOR][re.INTERIOR],this._matrix[re.EXTERIOR][re.BOUNDARY]=h._matrix[re.EXTERIOR][re.BOUNDARY],this._matrix[re.EXTERIOR][re.EXTERIOR]=h._matrix[re.EXTERIOR][re.EXTERIOR]}}}},{key:"matches",value:function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var u=arguments[0],h=arguments[1];return h===at.SYM_DONTCARE||h===at.SYM_TRUE&&(u>=0||u===at.TRUE)||h===at.SYM_FALSE&&u===at.FALSE||h===at.SYM_P&&u===at.P||h===at.SYM_L&&u===at.L||h===at.SYM_A&&u===at.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var g=arguments[1];return new m(arguments[0]).matches(g)}}},{key:"isTrue",value:function(u){return u>=0||u===at.TRUE}}])})(),dp=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"size",value:function(){return this._size}},{key:"addAll",value:function(u){return u===null||u.length===0?null:(this.ensureCapacity(this._size+u.length),Tt.arraycopy(u,0,this._data,this._size,u.length),void(this._size+=u.length))}},{key:"ensureCapacity",value:function(u){if(u<=this._data.length)return null;var h=Math.max(u,2*this._data.length);this._data=bn.copyOf(this._data,h)}},{key:"toArray",value:function(){var u=new Array(this._size).fill(null);return Tt.arraycopy(this._data,0,u,0,this._size),u}},{key:"add",value:function(u){this.ensureCapacity(this._size+1),this._data[this._size]=u,++this._size}}],[{key:"constructor_",value:function(){if(this._data=null,this._size=0,arguments.length===0)m.constructor_.call(this,10);else if(arguments.length===1){var u=arguments[0];this._data=new Array(u).fill(null)}}}])})(),lc=(function(){function m(){t(this,m)}return o(m,[{key:"getChainStartIndices",value:function(u){var h=0,g=new dp(Math.trunc(u.length/2));g.add(h);do{var x=this.findChainEnd(u,h);g.add(x),h=x}while(h<u.length-1);return g.toArray()}},{key:"findChainEnd",value:function(u,h){for(var g=bi.quadrant(u[h],u[h+1]),x=h+1;x<u.length&&bi.quadrant(u[x-1],u[x])===g;)x++;return x-1}},{key:"OLDgetChainStartIndices",value:function(u){var h=0,g=new pt;g.add(h);do{var x=this.findChainEnd(u,h);g.add(x),h=x}while(h<u.length-1);return m.toIntArray(g)}}],[{key:"toIntArray",value:function(u){for(var h=new Array(u.size()).fill(null),g=0;g<h.length;g++)h[g]=u.get(g).intValue();return h}}])})(),hh=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"getCoordinates",value:function(){return this.pts}},{key:"getMaxX",value:function(m){var u=this.pts[this.startIndex[m]].x,h=this.pts[this.startIndex[m+1]].x;return u>h?u:h}},{key:"getMinX",value:function(m){var u=this.pts[this.startIndex[m]].x,h=this.pts[this.startIndex[m+1]].x;return u<h?u:h}},{key:"computeIntersectsForChain",value:function(){if(arguments.length===4){var m=arguments[0],u=arguments[1],h=arguments[2],g=arguments[3];this.computeIntersectsForChain(this.startIndex[m],this.startIndex[m+1],u,u.startIndex[h],u.startIndex[h+1],g)}else if(arguments.length===6){var x=arguments[0],D=arguments[1],k=arguments[2],H=arguments[3],ie=arguments[4],de=arguments[5];if(D-x==1&&ie-H==1)return de.addIntersections(this.e,x,k.e,H),null;if(!this.overlaps(x,D,k,H,ie))return null;var Te=Math.trunc((x+D)/2),Pe=Math.trunc((H+ie)/2);x<Te&&(H<Pe&&this.computeIntersectsForChain(x,Te,k,H,Pe,de),Pe<ie&&this.computeIntersectsForChain(x,Te,k,Pe,ie,de)),Te<D&&(H<Pe&&this.computeIntersectsForChain(Te,D,k,H,Pe,de),Pe<ie&&this.computeIntersectsForChain(Te,D,k,Pe,ie,de))}}},{key:"overlaps",value:function(m,u,h,g,x){return Se.intersects(this.pts[m],this.pts[u],h.pts[g],h.pts[x])}},{key:"getStartIndexes",value:function(){return this.startIndex}},{key:"computeIntersects",value:function(m,u){for(var h=0;h<this.startIndex.length-1;h++)for(var g=0;g<m.startIndex.length-1;g++)this.computeIntersectsForChain(h,m,g,u)}}],[{key:"constructor_",value:function(){this.e=null,this.pts=null,this.startIndex=null;var m=arguments[0];this.e=m,this.pts=m.getCoordinates();var u=new lc;this.startIndex=u.getChainStartIndices(this.pts)}}])})(),Ds=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"getDepth",value:function(u,h){return this._depth[u][h]}},{key:"setDepth",value:function(u,h,g){this._depth[u][h]=g}},{key:"isNull",value:function(){if(arguments.length===0){for(var u=0;u<2;u++)for(var h=0;h<3;h++)if(this._depth[u][h]!==m.NULL_VALUE)return!1;return!0}if(arguments.length===1){var g=arguments[0];return this._depth[g][1]===m.NULL_VALUE}if(arguments.length===2){var x=arguments[0],D=arguments[1];return this._depth[x][D]===m.NULL_VALUE}}},{key:"normalize",value:function(){for(var u=0;u<2;u++)if(!this.isNull(u)){var h=this._depth[u][1];this._depth[u][2]<h&&(h=this._depth[u][2]),h<0&&(h=0);for(var g=1;g<3;g++){var x=0;this._depth[u][g]>h&&(x=1),this._depth[u][g]=x}}}},{key:"getDelta",value:function(u){return this._depth[u][he.RIGHT]-this._depth[u][he.LEFT]}},{key:"getLocation",value:function(u,h){return this._depth[u][h]<=0?re.EXTERIOR:re.INTERIOR}},{key:"toString",value:function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]}},{key:"add",value:function(){if(arguments.length===1)for(var u=arguments[0],h=0;h<2;h++)for(var g=1;g<3;g++){var x=u.getLocation(h,g);x!==re.EXTERIOR&&x!==re.INTERIOR||(this.isNull(h,g)?this._depth[h][g]=m.depthAtLocation(x):this._depth[h][g]+=m.depthAtLocation(x))}else if(arguments.length===3){var D=arguments[0],k=arguments[1];arguments[2]===re.INTERIOR&&this._depth[D][k]++}}}],[{key:"constructor_",value:function(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var u=0;u<2;u++)for(var h=0;h<3;h++)this._depth[u][h]=m.NULL_VALUE}},{key:"depthAtLocation",value:function(u){return u===re.EXTERIOR?0:u===re.INTERIOR?1:m.NULL_VALUE}}])})();Ds.NULL_VALUE=-1;var As=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"getDepth",value:function(){return this._depth}},{key:"getCollapsedEdge",value:function(){var h=new Array(2).fill(null);return h[0]=this.pts[0],h[1]=this.pts[1],new u(h,Is.toLineLabel(this._label))}},{key:"isIsolated",value:function(){return this._isIsolated}},{key:"getCoordinates",value:function(){return this.pts}},{key:"setIsolated",value:function(h){this._isIsolated=h}},{key:"setName",value:function(h){this._name=h}},{key:"equals",value:function(h){if(!(h instanceof u))return!1;var g=h;if(this.pts.length!==g.pts.length)return!1;for(var x=!0,D=!0,k=this.pts.length,H=0;H<this.pts.length;H++)if(this.pts[H].equals2D(g.pts[H])||(x=!1),this.pts[H].equals2D(g.pts[--k])||(D=!1),!x&&!D)return!1;return!0}},{key:"getCoordinate",value:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var h=arguments[0];return this.pts[h]}}},{key:"print",value:function(h){h.print("edge "+this._name+": "),h.print("LINESTRING (");for(var g=0;g<this.pts.length;g++)g>0&&h.print(","),h.print(this.pts[g].x+" "+this.pts[g].y);h.print(")  "+this._label+" "+this._depthDelta)}},{key:"computeIM",value:function(h){u.updateIM(this._label,h)}},{key:"isCollapsed",value:function(){return!!this._label.isArea()&&this.pts.length===3&&!!this.pts[0].equals(this.pts[2])}},{key:"isClosed",value:function(){return this.pts[0].equals(this.pts[this.pts.length-1])}},{key:"getMaximumSegmentIndex",value:function(){return this.pts.length-1}},{key:"getDepthDelta",value:function(){return this._depthDelta}},{key:"getNumPoints",value:function(){return this.pts.length}},{key:"printReverse",value:function(h){h.print("edge "+this._name+": ");for(var g=this.pts.length-1;g>=0;g--)h.print(this.pts[g]+" ");h.println("")}},{key:"getMonotoneChainEdge",value:function(){return this._mce===null&&(this._mce=new hh(this)),this._mce}},{key:"getEnvelope",value:function(){if(this._env===null){this._env=new Se;for(var h=0;h<this.pts.length;h++)this._env.expandToInclude(this.pts[h])}return this._env}},{key:"addIntersection",value:function(h,g,x,D){var k=new J(h.getIntersection(D)),H=g,ie=h.getEdgeDistance(x,D),de=H+1;if(de<this.pts.length){var Te=this.pts[de];k.equals2D(Te)&&(H=de,ie=0)}this.eiList.add(k,H,ie)}},{key:"toString",value:function(){var h=new du;h.append("edge "+this._name+": "),h.append("LINESTRING (");for(var g=0;g<this.pts.length;g++)g>0&&h.append(","),h.append(this.pts[g].x+" "+this.pts[g].y);return h.append(")  "+this._label+" "+this._depthDelta),h.toString()}},{key:"isPointwiseEqual",value:function(h){if(this.pts.length!==h.pts.length)return!1;for(var g=0;g<this.pts.length;g++)if(!this.pts[g].equals2D(h.pts[g]))return!1;return!0}},{key:"setDepthDelta",value:function(h){this._depthDelta=h}},{key:"getEdgeIntersectionList",value:function(){return this.eiList}},{key:"addIntersections",value:function(h,g,x){for(var D=0;D<h.getIntersectionNum();D++)this.addIntersection(h,g,x,D)}}],[{key:"constructor_",value:function(){if(this.pts=null,this._env=null,this.eiList=new ch(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ds,this._depthDelta=0,arguments.length===1){var h=arguments[0];u.constructor_.call(this,h,null)}else if(arguments.length===2){var g=arguments[0],x=arguments[1];this.pts=g,this._label=x}}},{key:"updateIM",value:function(){if(!(arguments.length===2&&arguments[1]instanceof fp&&arguments[0]instanceof Is))return y(u,"updateIM",this).apply(this,arguments);var h=arguments[0],g=arguments[1];g.setAtLeastIfValid(h.getLocation(0,he.ON),h.getLocation(1,he.ON),1),h.isArea()&&(g.setAtLeastIfValid(h.getLocation(0,he.LEFT),h.getLocation(1,he.LEFT),2),g.setAtLeastIfValid(h.getLocation(0,he.RIGHT),h.getLocation(1,he.RIGHT),2))}}])})(sn),wu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"setWorkingPrecisionModel",value:function(u){this._workingPrecisionModel=u}},{key:"insertUniqueEdge",value:function(u){var h=this._edgeList.findEqualEdge(u);if(h!==null){var g=h.getLabel(),x=u.getLabel();h.isPointwiseEqual(u)||(x=new Is(u.getLabel())).flip(),g.merge(x);var D=m.depthDelta(x),k=h.getDepthDelta()+D;h.setDepthDelta(k)}else this._edgeList.add(u),u.setDepthDelta(m.depthDelta(u.getLabel()))}},{key:"buildSubgraphs",value:function(u,h){for(var g=new pt,x=u.iterator();x.hasNext();){var D=x.next(),k=D.getRightmostCoordinate(),H=new Al(g).getDepth(k);D.computeDepth(H),D.findResultEdges(),g.add(D),h.add(D.getDirectedEdges(),D.getNodes())}}},{key:"createSubgraphs",value:function(u){for(var h=new pt,g=u.getNodes().iterator();g.hasNext();){var x=g.next();if(!x.isVisited()){var D=new ln;D.create(x),h.add(D)}}return ba.sort(h,ba.reverseOrder()),h}},{key:"createEmptyResultGeometry",value:function(){return this._geomFact.createPolygon()}},{key:"getNoder",value:function(u){if(this._workingNoder!==null)return this._workingNoder;var h=new pi,g=new yu;return g.setPrecisionModel(u),h.setSegmentIntersector(new im(g)),h}},{key:"buffer",value:function(u,h){var g=this._workingPrecisionModel;g===null&&(g=u.getPrecisionModel()),this._geomFact=u.getFactory();var x=new Qa(g,this._bufParams),D=new sh(u,h,x).getCurves();if(D.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(D,g),this._graph=new Cf(new hp),this._graph.addEdges(this._edgeList.getEdges());var k=this.createSubgraphs(this._graph),H=new sp(this._geomFact);this.buildSubgraphs(k,H);var ie=H.getPolygons();return ie.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(ie)}},{key:"computeNodedEdges",value:function(u,h){var g=this.getNoder(h);g.computeNodes(u);for(var x=g.getNodedSubstrings().iterator();x.hasNext();){var D=x.next(),k=D.getCoordinates();if(k.length!==2||!k[0].equals2D(k[1])){var H=D.getData(),ie=new As(D.getCoordinates(),new Is(H));this.insertUniqueEdge(ie)}}}},{key:"setNoder",value:function(u){this._workingNoder=u}}],[{key:"constructor_",value:function(){this._bufParams=null,this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new xu;var u=arguments[0];this._bufParams=u}},{key:"depthDelta",value:function(u){var h=u.getLocation(0,he.LEFT),g=u.getLocation(0,he.RIGHT);return h===re.INTERIOR&&g===re.EXTERIOR?1:h===re.EXTERIOR&&g===re.INTERIOR?-1:0}},{key:"convertSegStrings",value:function(u){for(var h=new gu,g=new pt;u.hasNext();){var x=u.next(),D=h.createLineString(x.getCoordinates());g.add(D)}return h.buildGeometry(g)}}])})(),Eu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"rescale",value:function(){if(Le(arguments[0],Ve))for(var u=arguments[0].iterator();u.hasNext();){var h=u.next();this.rescale(h.getCoordinates())}else if(arguments[0]instanceof Array){for(var g=arguments[0],x=0;x<g.length;x++)g[x].x=g[x].x/this._scaleFactor+this._offsetX,g[x].y=g[x].y/this._scaleFactor+this._offsetY;g.length===2&&g[0].equals2D(g[1])&&Tt.out.println(g)}}},{key:"scale",value:function(){if(Le(arguments[0],Ve)){for(var u=arguments[0],h=new pt(u.size()),g=u.iterator();g.hasNext();){var x=g.next();h.add(new et(this.scale(x.getCoordinates()),x.getData()))}return h}if(arguments[0]instanceof Array){for(var D=arguments[0],k=new Array(D.length).fill(null),H=0;H<D.length;H++)k[H]=new J(Math.round((D[H].x-this._offsetX)*this._scaleFactor),Math.round((D[H].y-this._offsetY)*this._scaleFactor),D[H].getZ());return ei.removeRepeatedPoints(k)}}},{key:"isIntegerPrecision",value:function(){return this._scaleFactor===1}},{key:"getNodedSubstrings",value:function(){var u=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(u),u}},{key:"computeNodes",value:function(u){var h=u;this._isScaled&&(h=this.scale(u)),this._noder.computeNodes(h)}},{key:"interfaces_",get:function(){return[Kn]}}],[{key:"constructor_",value:function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,arguments.length===2){var u=arguments[0],h=arguments[1];m.constructor_.call(this,u,h,0,0)}else if(arguments.length===4){var g=arguments[0],x=arguments[1];this._noder=g,this._scaleFactor=x,this._isScaled=!this.isIntegerPrecision()}}}])})(),bu=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"checkEndPtVertexIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next().getCoordinates();this.checkEndPtVertexIntersections(h[0],this._segStrings),this.checkEndPtVertexIntersections(h[h.length-1],this._segStrings)}else if(arguments.length===2){for(var g=arguments[0],x=arguments[1].iterator();x.hasNext();)for(var D=x.next().getCoordinates(),k=1;k<D.length-1;k++)if(D[k].equals(g))throw new oe("found endpt/interior pt intersection at index "+k+" :pt "+g)}}},{key:"checkInteriorIntersections",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();)for(var h=u.next(),g=this._segStrings.iterator();g.hasNext();){var x=g.next();this.checkInteriorIntersections(h,x)}else if(arguments.length===2)for(var D=arguments[0],k=arguments[1],H=D.getCoordinates(),ie=k.getCoordinates(),de=0;de<H.length-1;de++)for(var Te=0;Te<ie.length-1;Te++)this.checkInteriorIntersections(D,de,k,Te);else if(arguments.length===4){var Pe=arguments[0],tt=arguments[1],mt=arguments[2],At=arguments[3];if(Pe===mt&&tt===At)return null;var Ht=Pe.getCoordinates()[tt],Jn=Pe.getCoordinates()[tt+1],qn=mt.getCoordinates()[At],Mr=mt.getCoordinates()[At+1];if(this._li.computeIntersection(Ht,Jn,qn,Mr),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,Ht,Jn)||this.hasInteriorIntersection(this._li,qn,Mr)))throw new oe("found non-noded intersection at "+Ht+"-"+Jn+" and "+qn+"-"+Mr)}}},{key:"checkValid",value:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()}},{key:"checkCollapses",value:function(){if(arguments.length===0)for(var u=this._segStrings.iterator();u.hasNext();){var h=u.next();this.checkCollapses(h)}else if(arguments.length===1)for(var g=arguments[0].getCoordinates(),x=0;x<g.length-2;x++)this.checkCollapse(g[x],g[x+1],g[x+2])}},{key:"hasInteriorIntersection",value:function(u,h,g){for(var x=0;x<u.getIntersectionNum();x++){var D=u.getIntersection(x);if(!D.equals(h)&&!D.equals(g))return!0}return!1}},{key:"checkCollapse",value:function(u,h,g){if(u.equals(g))throw new oe("found non-noded collapse at "+m.fact.createLineString([u,h,g]))}}],[{key:"constructor_",value:function(){this._li=new yu,this._segStrings=null;var u=arguments[0];this._segStrings=u}}])})();bu.fact=new gu;var fh=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"intersectsScaled",value:function(u,h){var g=Math.min(u.x,h.x),x=Math.max(u.x,h.x),D=Math.min(u.y,h.y),k=Math.max(u.y,h.y),H=this._maxx<g||this._minx>x||this._maxy<D||this._miny>k;if(H)return!1;var ie=this.intersectsToleranceSquare(u,h);return F.isTrue(!(H&&ie),"Found bad envelope test"),ie}},{key:"initCorners",value:function(u){var h=.5;this._minx=u.x-h,this._maxx=u.x+h,this._miny=u.y-h,this._maxy=u.y+h,this._corner[0]=new J(this._maxx,this._maxy),this._corner[1]=new J(this._minx,this._maxy),this._corner[2]=new J(this._minx,this._miny),this._corner[3]=new J(this._maxx,this._miny)}},{key:"intersects",value:function(u,h){return this._scaleFactor===1?this.intersectsScaled(u,h):(this.copyScaled(u,this._p0Scaled),this.copyScaled(h,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))}},{key:"scale",value:function(u){return Math.round(u*this._scaleFactor)}},{key:"getCoordinate",value:function(){return this._originalPt}},{key:"copyScaled",value:function(u,h){h.x=this.scale(u.x),h.y=this.scale(u.y)}},{key:"getSafeEnvelope",value:function(){if(this._safeEnv===null){var u=m.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Se(this._originalPt.x-u,this._originalPt.x+u,this._originalPt.y-u,this._originalPt.y+u)}return this._safeEnv}},{key:"intersectsPixelClosure",value:function(u,h){return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))}},{key:"intersectsToleranceSquare",value:function(u,h){var g=!1,x=!1;return this._li.computeIntersection(u,h,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(u,h,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(g=!0),this._li.computeIntersection(u,h,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(x=!0),this._li.computeIntersection(u,h,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!g||!x)||!!u.equals(this._pt)||!!h.equals(this._pt))))}},{key:"addSnappedNode",value:function(u,h){var g=u.getCoordinate(h),x=u.getCoordinate(h+1);return!!this.intersects(g,x)&&(u.addIntersection(this.getCoordinate(),h),!0)}}],[{key:"constructor_",value:function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var u=arguments[0],h=arguments[1],g=arguments[2];if(this._originalPt=u,this._pt=u,this._scaleFactor=h,this._li=g,h<=0)throw new A("Scale factor must be non-zero");h!==1&&(this._pt=new J(this.scale(u.x),this.scale(u.y)),this._p0Scaled=new J,this._p1Scaled=new J),this.initCorners(this._pt)}}])})();fh.SAFE_ENV_EXPANSION_FACTOR=.75;var Df=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"select",value:function(){if(arguments.length!==1){if(arguments.length===2){var m=arguments[1];arguments[0].getLineSegment(m,this.selectedSegment),this.select(this.selectedSegment)}}}}],[{key:"constructor_",value:function(){this.selectedSegment=new bt}}])})(),gi=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"snap",value:function(){if(arguments.length===1){var m=arguments[0];return this.snap(m,null,-1)}if(arguments.length===3){var u=arguments[0],h=arguments[1],g=arguments[2],x=u.getSafeEnvelope(),D=new pp(u,h,g);return this._index.query(x,new((function(){return o(function k(){t(this,k)},[{key:"interfaces_",get:function(){return[up]}},{key:"visitItem",value:function(k){k.select(x,D)}}])})())),D.isNodeAdded()}}}],[{key:"constructor_",value:function(){this._index=null;var m=arguments[0];this._index=m}}])})(),pp=(function(m){function u(){var h;return t(this,u),h=e(this,u),u.constructor_.apply(h,arguments),h}return c(u,m),o(u,[{key:"isNodeAdded",value:function(){return this._isNodeAdded}},{key:"select",value:function(){if(!(arguments.length===2&&Number.isInteger(arguments[1])&&arguments[0]instanceof en))return y(u,"select",this,1).apply(this,arguments);var h=arguments[1],g=arguments[0].getContext();if(this._parentEdge===g&&(h===this._hotPixelVertexIndex||h+1===this._hotPixelVertexIndex))return null;this._isNodeAdded|=this._hotPixel.addSnappedNode(g,h)}}],[{key:"constructor_",value:function(){this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var h=arguments[0],g=arguments[1],x=arguments[2];this._hotPixel=h,this._parentEdge=g,this._hotPixelVertexIndex=x}}])})(Df);gi.HotPixelSnapAction=pp;var Ml=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"processIntersections",value:function(m,u,h,g){if(m===h&&u===g)return null;var x=m.getCoordinates()[u],D=m.getCoordinates()[u+1],k=h.getCoordinates()[g],H=h.getCoordinates()[g+1];if(this._li.computeIntersection(x,D,k,H),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var ie=0;ie<this._li.getIntersectionNum();ie++)this._interiorIntersections.add(this._li.getIntersection(ie));m.addIntersections(this._li,u,0),h.addIntersections(this._li,g,1)}}},{key:"isDone",value:function(){return!1}},{key:"getInteriorIntersections",value:function(){return this._interiorIntersections}},{key:"interfaces_",get:function(){return[uh]}}],[{key:"constructor_",value:function(){this._li=null,this._interiorIntersections=null;var m=arguments[0];this._li=m,this._interiorIntersections=new pt}}])})(),Nl=(function(){return o(function m(){t(this,m),m.constructor_.apply(this,arguments)},[{key:"checkCorrectness",value:function(m){var u=et.getNodedSubstrings(m),h=new bu(u);try{h.checkValid()}catch(g){if(!(g instanceof T))throw g;g.printStackTrace()}}},{key:"getNodedSubstrings",value:function(){return et.getNodedSubstrings(this._nodedSegStrings)}},{key:"snapRound",value:function(m,u){var h=this.findInteriorIntersections(m,u);this.computeIntersectionSnaps(h),this.computeVertexSnaps(m)}},{key:"findInteriorIntersections",value:function(m,u){var h=new Ml(u);return this._noder.setSegmentIntersector(h),this._noder.computeNodes(m),h.getInteriorIntersections()}},{key:"computeVertexSnaps",value:function(){if(Le(arguments[0],Ve))for(var m=arguments[0].iterator();m.hasNext();){var u=m.next();this.computeVertexSnaps(u)}else if(arguments[0]instanceof et)for(var h=arguments[0],g=h.getCoordinates(),x=0;x<g.length;x++){var D=new fh(g[x],this._scaleFactor,this._li);this._pointSnapper.snap(D,h,x)&&h.addIntersection(g[x],x)}}},{key:"computeNodes",value:function(m){this._nodedSegStrings=m,this._noder=new pi,this._pointSnapper=new gi(this._noder.getIndex()),this.snapRound(m,this._li)}},{key:"computeIntersectionSnaps",value:function(m){for(var u=m.iterator();u.hasNext();){var h=u.next(),g=new fh(h,this._scaleFactor,this._li);this._pointSnapper.snap(g)}}},{key:"interfaces_",get:function(){return[Kn]}}],[{key:"constructor_",value:function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var m=arguments[0];this._pm=m,this._li=new yu,this._li.setPrecisionModel(m),this._scaleFactor=m.getScale()}}])})(),Pl=(function(){function m(){t(this,m),m.constructor_.apply(this,arguments)}return o(m,[{key:"bufferFixedPrecision",value:function(u){var h=new Eu(new Nl(new os(1)),u.getScale()),g=new wu(this._bufParams);g.setWorkingPrecisionModel(u),g.setNoder(h),this._resultGeometry=g.buffer(this._argGeom,this._distance)}},{key:"bufferReducedPrecision",value:function(){if(arguments.length===0){for(var u=m.MAX_PRECISION_DIGITS;u>=0;u--){try{this.bufferReducedPrecision(u)}catch(D){if(!(D instanceof ht))throw D;this._saveException=D}if(this._resultGeometry!==null)return null}throw this._saveException}if(arguments.length===1){var h=arguments[0],g=m.precisionScaleFactor(this._argGeom,this._distance,h),x=new os(g);this.bufferFixedPrecision(x)}}},{key:"computeGeometry",value:function(){if(this.bufferOriginalPrecision(),this._resultGeometry!==null)return null;var u=this._argGeom.getFactory().getPrecisionModel();u.getType()===os.FIXED?this.bufferFixedPrecision(u):this.bufferReducedPrecision()}},{key:"setQuadrantSegments",value:function(u){this._bufParams.setQuadrantSegments(u)}},{key:"bufferOriginalPrecision",value:function(){try{var u=new wu(this._bufParams);this._resultGeometry=u.buffer(this._argGeom,this._distance)}catch(h){if(!(h instanceof oe))throw h;this._saveException=h}}},{key:"getResultGeometry",value:function(u){return this._distance=u,this.computeGeometry(),this._resultGeometry}},{key:"setEndCapStyle",value:function(u){this._bufParams.setEndCapStyle(u)}}],[{key:"constructor_",value:function(){if(this._argGeom=null,this._distance=null,this._bufParams=new S,this._resultGeometry=null,this._saveException=null,arguments.length===1){var u=arguments[0];this._argGeom=u}else if(arguments.length===2){var h=arguments[0],g=arguments[1];this._argGeom=h,this._bufParams=g}}},{key:"bufferOp",value:function(){if(arguments.length===2){var u=arguments[1];return new m(arguments[0]).getResultGeometry(u)}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var h=arguments[1],g=arguments[2],x=new m(arguments[0]);return x.setQuadrantSegments(g),x.getResultGeometry(h)}if(arguments[2]instanceof S&&arguments[0]instanceof ve&&typeof arguments[1]=="number"){var D=arguments[1];return new m(arguments[0],arguments[2]).getResultGeometry(D)}}else if(arguments.length===4){var k=arguments[1],H=arguments[2],ie=arguments[3],de=new m(arguments[0]);return de.setQuadrantSegments(H),de.setEndCapStyle(ie),de.getResultGeometry(k)}}},{key:"precisionScaleFactor",value:function(u,h,g){var x=u.getEnvelopeInternal(),D=ir.max(Math.abs(x.getMaxX()),Math.abs(x.getMaxY()),Math.abs(x.getMinX()),Math.abs(x.getMinY()))+2*(h>0?h:0),k=g-Math.trunc(Math.log(D)/Math.log(10)+1);return Math.pow(10,k)}}])})();Pl.CAP_ROUND=S.CAP_ROUND,Pl.CAP_BUTT=S.CAP_FLAT,Pl.CAP_FLAT=S.CAP_FLAT,Pl.CAP_SQUARE=S.CAP_SQUARE,Pl.MAX_PRECISION_DIGITS=12;var gp=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Af=(function(){return o(function m(u){t(this,m),this.geometryFactory=u||new gu},[{key:"read",value:function(m){var u,h=(u=typeof m=="string"?JSON.parse(m):m).type;if(!Xo[h])throw new Error("Unknown GeoJSON type: "+u.type);return gp.indexOf(h)!==-1?Xo[h].call(this,u.coordinates):h==="GeometryCollection"?Xo[h].call(this,u.geometries):Xo[h].call(this,u)}},{key:"write",value:function(m){var u=m.getGeometryType();if(!Ao[u])throw new Error("Geometry is not supported");return Ao[u].call(this,m)}}])})(),Xo={Feature:function(m){var u={};for(var h in m)u[h]=m[h];if(m.geometry){var g=m.geometry.type;if(!Xo[g])throw new Error("Unknown GeoJSON type: "+m.type);u.geometry=this.read(m.geometry)}return m.bbox&&(u.bbox=Xo.bbox.call(this,m.bbox)),u},FeatureCollection:function(m){var u={};if(m.features){u.features=[];for(var h=0;h<m.features.length;++h)u.features.push(this.read(m.features[h]))}return m.bbox&&(u.bbox=this.parse.bbox.call(this,m.bbox)),u},coordinates:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(r(J,p(g)))}return u},bbox:function(m){return this.geometryFactory.createLinearRing([new J(m[0],m[1]),new J(m[2],m[1]),new J(m[2],m[3]),new J(m[0],m[3]),new J(m[0],m[1])])},Point:function(m){var u=r(J,p(m));return this.geometryFactory.createPoint(u)},MultiPoint:function(m){for(var u=[],h=0;h<m.length;++h)u.push(Xo.Point.call(this,m[h]));return this.geometryFactory.createMultiPoint(u)},LineString:function(m){var u=Xo.coordinates.call(this,m);return this.geometryFactory.createLineString(u)},MultiLineString:function(m){for(var u=[],h=0;h<m.length;++h)u.push(Xo.LineString.call(this,m[h]));return this.geometryFactory.createMultiLineString(u)},Polygon:function(m){for(var u=Xo.coordinates.call(this,m[0]),h=this.geometryFactory.createLinearRing(u),g=[],x=1;x<m.length;++x){var D=m[x],k=Xo.coordinates.call(this,D),H=this.geometryFactory.createLinearRing(k);g.push(H)}return this.geometryFactory.createPolygon(h,g)},MultiPolygon:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(Xo.Polygon.call(this,g))}return this.geometryFactory.createMultiPolygon(u)},GeometryCollection:function(m){for(var u=[],h=0;h<m.length;++h){var g=m[h];u.push(this.read(g))}return this.geometryFactory.createGeometryCollection(u)}},Ao={coordinate:function(m){var u=[m.x,m.y];return m.z&&u.push(m.z),m.m&&u.push(m.m),u},Point:function(m){return{type:"Point",coordinates:Ao.coordinate.call(this,m.getCoordinate())}},MultiPoint:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],x=Ao.Point.call(this,g);u.push(x.coordinates)}return{type:"MultiPoint",coordinates:u}},LineString:function(m){for(var u=[],h=m.getCoordinates(),g=0;g<h.length;++g){var x=h[g];u.push(Ao.coordinate.call(this,x))}return{type:"LineString",coordinates:u}},MultiLineString:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],x=Ao.LineString.call(this,g);u.push(x.coordinates)}return{type:"MultiLineString",coordinates:u}},Polygon:function(m){var u=[],h=Ao.LineString.call(this,m._shell);u.push(h.coordinates);for(var g=0;g<m._holes.length;++g){var x=m._holes[g],D=Ao.LineString.call(this,x);u.push(D.coordinates)}return{type:"Polygon",coordinates:u}},MultiPolygon:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],x=Ao.Polygon.call(this,g);u.push(x.coordinates)}return{type:"MultiPolygon",coordinates:u}},GeometryCollection:function(m){for(var u=[],h=0;h<m._geometries.length;++h){var g=m._geometries[h],x=g.getGeometryType();u.push(Ao[x].call(this,g))}return{type:"GeometryCollection",geometries:u}}};return{BufferOp:Pl,GeoJSONReader:(function(){return o(function m(u){t(this,m),this.parser=new Af(u||new gu)},[{key:"read",value:function(m){return this.parser.read(m)}}])})(),GeoJSONWriter:(function(){return o(function m(){t(this,m),this.parser=new Af(this.geometryFactory)},[{key:"write",value:function(m){return this.parser.write(m)}}])})()}})});var xX=gr((B3,vX)=>{"use strict";(function(n,e){typeof define=="function"&&define.amd?define([],e):typeof B3=="object"?vX.exports=e():n.compareVersions=e()})(B3,function(){var n=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function e(c,f){return c.indexOf(f)===-1?c.length:c.indexOf(f)}function t(c){var f=c.replace(/^v/,"").replace(/\+.*$/,""),d=e(f,"-"),y=f.substring(0,d).split(".");return y.push(f.substring(d+1)),y}function r(c){return isNaN(Number(c))?c:Number(c)}function i(c){if(typeof c!="string")throw new TypeError("Invalid argument expected string");if(!n.test(c))throw new Error("Invalid argument not valid semver ('"+c+"' received)")}function o(c,f){[c,f].forEach(i);for(var d=t(c),y=t(f),p=0;p<Math.max(d.length-1,y.length-1);p++){var _=parseInt(d[p]||0,10),w=parseInt(y[p]||0,10);if(_>w)return 1;if(w>_)return-1}var b=d[d.length-1],S=y[y.length-1];if(b&&S){var T=b.split(".").map(r),A=S.split(".").map(r);for(p=0;p<Math.max(T.length,A.length);p++){if(T[p]===void 0||typeof A[p]=="string"&&typeof T[p]=="number")return-1;if(A[p]===void 0||typeof T[p]=="string"&&typeof A[p]=="number"||T[p]>A[p])return 1;if(A[p]>T[p])return-1}}else if(b||S)return b?-1:1;return 0}var s=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function l(c){if(typeof c!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof c);if(s.indexOf(c)===-1)throw new TypeError("Invalid operator, expected one of "+s.join("|"))}return o.validate=function(c){return typeof c=="string"&&n.test(c)},o.compare=function(c,f,d){l(d);var y=o(c,f);return a[d].indexOf(y)>-1},o})});var SX=gr((j0t,bX)=>{"use strict";var j3=xX(),G3="1.1.0",lt=!0,$t={classification:"https://stac-extensions.github.io/classification/v2.0.0/schema.json",datacube:"https://stac-extensions.github.io/datacube/v2.2.0/schema.json",eo:"https://stac-extensions.github.io/eo/v2.0.0/schema.json",file:"https://stac-extensions.github.io/file/v2.1.0/schema.json","item-assets":"https://stac-extensions.github.io/item-assets/v1.0.0/schema.json",label:"https://stac-extensions.github.io/label/v1.0.1/schema.json",pointcloud:"https://stac-extensions.github.io/pointcloud/v1.0.0/schema.json",processing:"https://stac-extensions.github.io/processing/v1.2.0/schema.json",projection:"https://stac-extensions.github.io/projection/v2.0.0/schema.json",raster:"https://stac-extensions.github.io/raster/v2.0.0/schema.json",sar:"https://stac-extensions.github.io/sar/v1.0.0/schema.json",sat:"https://stac-extensions.github.io/sat/v1.0.0/schema.json",scientific:"https://stac-extensions.github.io/scientific/v1.0.0/schema.json",table:"https://stac-extensions.github.io/table/v1.2.0/schema.json",timestamps:"https://stac-extensions.github.io/timestamps/v1.1.0/schema.json",version:"https://stac-extensions.github.io/version/v1.2.0/schema.json",view:"https://stac-extensions.github.io/view/v1.0.0/schema.json"},zg={itemAndCollection:{"classification:":$t.classification,"cube:":$t.datacube,"eo:":$t.eo,"file:":$t.file,"label:":$t.label,"pc:":$t.pointcloud,"processing:":$t.processing,"proj:":$t.projection,"raster:":$t.raster,"sar:":$t.sar,"sat:":$t.sat,"sci:":$t.scientific,"view:":$t.view,version:$t.version,deprecated:$t.version,published:$t.timestamps,expires:$t.timestamps,unpublished:$t.timestamps},catalog:{},collection:{},item:{}};zg.collection=Object.assign(zg.collection,zg.itemAndCollection);zg.item=Object.assign(zg.item,zg.itemAndCollection);var Fx={parseExtension(n){let e=n.match(/^https?:\/\/stac-extensions.github.io\/([^\/]+)\/v([^\/]+)\/[^.]+.json$/i);if(e)return{id:e[1],version:e[2]};let t=n.match(/(\d+\.\d+(\.\d+)([a-z_.-][\w.-]+)?)/i);if(t)return{id:n,version:t[1]};if(n in $t)return{id:n,version:"0.0.0"}}},Vn={version:G3,extensions:{},set(n){if(typeof n.stac_version!="string"?Vn.version="0.6.0":Vn.version=n.stac_version,Array.isArray(n.stac_extensions))for(let e of n.stac_extensions){let t=Fx.parseExtension(e);t&&(Vn.extensions[t.id]=t.version)}},before(n,e=null){return Vn.compare("<",n,e)},compare(n,e,t=null){let r=t?Vn.extensions[t]:Vn.version;return typeof r>"u"?!1:j3.compare(r,e,n)}},Ae={type(n){let e=typeof n;if(e==="object"){if(n===null)return"null";if(Array.isArray(n))return"array"}return e},is(n,e){return Array.isArray(e)?e.includes(Ae.type(n)):Ae.type(n)===e},isDefined(n){return typeof n<"u"},isObject(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)},rename(n,e,t){return typeof n[e]<"u"&&typeof n[t]>"u"?(n[t]=n[e],delete n[e],!0):!1},copy(n,e,t){return typeof n[e]<"u"&&typeof n[t]>"u"?(n[t]=n[e],!0):!1},forAll(n,e,t){if(n[e]&&typeof n[e]=="object")for(let r in n[e])t(n[e][r])},toArray(n,e){return typeof n[e]<"u"&&!Array.isArray(n[e])?(n[e]=[n[e]],!0):!1},flattenArray(n,e,t,r=!1){if(Array.isArray(n[e])){for(let i in n[e])if(typeof t[i]=="string"){let o=n[e][i];n[t[i]]=r?[o]:o}return delete n[e],!0}return!1},flattenOneElementArray(n,e,t=!1){return!t&&Array.isArray(n[e])?n[e].length===1?(n[e]=n[e][0],!0):!1:!0},removeFromArray(n,e,t){if(Array.isArray(n[e])){let r=n[e].indexOf(t);return r>-1&&n[e].splice(r,1),!0}return!1},pickFirst(n,e){return Array.isArray(n[e])&&n[e].length>0?(n[e]=n[e][0],!0):(delete n[e],!1)},ensure(n,e,t){return Ae.type(t)!==Ae.type(n[e])&&(n[e]=t),!0},upgradeExtension(n,e){let{id:t,version:r}=Fx.parseExtension(e),i=n.stac_extensions.findIndex(o=>{let s=Fx.parseExtension(o);return s&&s.id===t&&j3.compare(s.version,r,"<")});return i!==-1?(n.stac_extensions[i]=e,!0):!1},addExtension(n,e){let{id:t,version:r}=Fx.parseExtension(e),i=n.stac_extensions.findIndex(o=>{if(o===e)return!0;let s=Fx.parseExtension(o);return!!(s&&s.id===t&&j3.compare(s.version,r,"<"))});return i===-1?n.stac_extensions.push(e):n.stac_extensions[i]=e,n.stac_extensions.sort(),!0},removeExtension(n,e){return Ae.removeFromArray(n,"stac_extensions",e)},migrateExtensionShortnames(n){let e=Object.keys($t),t=Object.values($t);return Ae.mapValues(n,"stac_extensions",e,t)},populateExtensions(n,e){let t=[];(e=="catalog"||e=="collection")&&t.push(n),(e=="item"||e=="collection")&&Ae.isObject(n.assets)&&(t=t.concat(Object.values(n.assets))),e=="collection"&&Ae.isObject(n.item_assets)&&(t=t.concat(Object.values(n.item_assets))),e=="collection"&&Ae.isObject(n.summaries)&&t.push(n.summaries),e=="item"&&Ae.isObject(n.properties)&&t.push(n.properties),t.push(n.links);let r;for(;r=t.pop();)Object.keys(r).forEach(i=>{Array.isArray(r.bands)&&(t=t.concat(r.bands));let o=i.match(/^(\w+:|[^:]+$)/i);if(Array.isArray(o)){let s=zg[e][o[0]];Ae.is(s,"string")&&Ae.addExtension(n,s)}})},mapValues(n,e,t,r){let i=o=>{let s=t.indexOf(o);return s>=0?r[s]:o};return Array.isArray(n[e])?n[e]=n[e].map(i):typeof n[e]<"u"&&(n[e]=i(n[e])),!0},mapObject(n,e){for(let t in n)n[t]=e(n[t],t)},moveTo(n,e,t,r=!1,i=!1){let o;return r?i?o=s=>Array.isArray(s):o=s=>Array.isArray(s)&&s.length===1:o=Ae.isDefined,o(n[e])?(t[e]=r&&!i?n[e][0]:n[e],delete n[e],!0):!1},runAll(n,e,t,r){for(let i in n)i.startsWith("migrate")||n[i](e,t,r)},toUTC(n,e){if(Ae.is(n[e],"string"))try{return n[e]=this.toISOString(n[e]),!0}catch{}return delete n[e],!1},toISOString(n){return n instanceof Date||(n=new Date(n)),n.toISOString().replace(/\.0+(?=[-\+Z])/,"")},formatString(n,e,t){let r=i=>Ae.is(i,["string","number"])?t.replaceAll("{}",i):i;Array.isArray(n[e])?n[e]=n[e].map(r):n[e]=r(n[e])}},$c={multihash:null,hexToUint8(n){if(n.length===0||n.length%2!==0)throw new Error(`The string "${n}" is not valid hex.`);return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))},uint8ToHex(n){return n.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")},toMultihash(n,e,t){if(!$c.multihash||!Ae.is(n[e],"string"))return!1;try{let r=$c.multihash.encode($c.hexToUint8(n[e]),t);return n[e]=$c.uint8ToHex(r),!0}catch(r){return console.warn(r),!1}}},z3={migrate(n,e=!0){return Vn.set(n),e&&(n.stac_version=G3),n.type="Catalog",Ae.ensure(n,"stac_extensions",[]),Vn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"id",""),Ae.ensure(n,"description",""),Ae.ensure(n,"links",[]),Ae.runAll(z3,n,n),Vn.before("0.8.0")&&Ae.populateExtensions(n,"catalog"),n}},V3={migrate(n,e=!0){return z3.migrate(n,e),n.type="Collection",Vn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"license","other"),Ae.ensure(n,"extent",{spatial:{bbox:[]},temporal:{interval:[]}}),Ae.runAll(V3,n,n),Ae.isObject(n.properties)&&(Ae.removeFromArray(n,"stac_extensions","commons"),delete n.properties),Vn.before("0.8.0")&&Ae.populateExtensions(n,"collection"),Vn.before("1.0.0-beta.1")&&Ae.mapValues(n,"stac_extensions",["assets"],["item-assets"]),n},extent(n){if(Ae.ensure(n,"extent",{}),Vn.before("0.8.0")&&(Array.isArray(n.extent.spatial)&&(n.extent.spatial={bbox:[n.extent.spatial]}),Array.isArray(n.extent.temporal)&&(n.extent.temporal={interval:[n.extent.temporal]})),Ae.ensure(n.extent,"spatial",{}),Ae.ensure(n.extent.spatial,"bbox",[]),Ae.ensure(n.extent,"temporal",{}),Ae.ensure(n.extent.temporal,"interval",[]),Vn.before("1.0.0-rc.3")){if(n.extent.temporal.interval.length>1){let e,t;for(let r of n.extent.temporal.interval){if(r[0]===null)e=null;else if(typeof r[0]=="string"&&e!==null)try{let i=new Date(r[0]);(typeof e>"u"||i<e)&&(e=i)}catch{}if(r[1]===null)t=null;else if(typeof r[1]=="string"&&t!==null)try{let i=new Date(r[1]);(typeof t>"u"||i>t)&&(t=i)}catch{}}n.extent.temporal.interval.unshift([e?Ae.toISOString(e):null,t?Ae.toISOString(t):null])}if(n.extent.spatial.bbox.length>1){let e=n.extent.spatial.bbox.reduce((t,r)=>Array.isArray(r)?Math.max(r.length,t):t,4);if(e>=4){let t=new Array(e).fill(null),r=e/2;for(let i of n.extent.spatial.bbox){if(!Array.isArray(i)||i.length<4)break;for(let o in i){let s=i[o];t[o]===null?t[o]=s:o<r?t[o]=Math.min(s,t[o]):t[o]=Math.max(s,t[o])}}t.findIndex(i=>i===null)===-1&&n.extent.spatial.bbox.unshift(t)}}}},collectionAssets(n){Vn.before("1.0.0-rc.1")&&Ae.removeExtension(n,"collection-assets"),Bx.migrateAll(n)},itemAsset(n){Vn.before("1.0.0-beta.2")&&Ae.rename(n,"item_assets","assets"),Ae.removeExtension(n,$t["item-assets"]),Bx.migrateAll(n,"item_assets")},summaries(n){if(Ae.ensure(n,"summaries",{}),Vn.before("0.8.0")&&Ae.isObject(n.other_properties)){for(let e in n.other_properties){let t=n.other_properties[e];Array.isArray(t.extent)&&t.extent.length===2?n.summaries[e]={minimum:t.extent[0],maximum:t.extent[1]}:Array.isArray(t.values)&&(t.values.filter(r=>Array.isArray(r)).length===t.values.length?n.summaries[e]=t.values.reduce((r,i)=>r.concat(i),[]):n.summaries[e]=t.values)}delete n.other_properties}if(Vn.before("1.0.0-beta.1")&&Ae.isObject(n.properties)&&!n.links.find(e=>["child","item"].includes(e.rel)))for(let e in n.properties){let t=n.properties[e];Array.isArray(t)||(t=[t]),n.summaries[e]=t}Vn.before("1.0.0-rc.1")&&Ae.mapObject(n.summaries,e=>(Ae.rename(e,"min","minimum"),Ae.rename(e,"max","maximum"),e)),jx.migrate(n.summaries,n,!0),Ae.moveTo(n.summaries,"sci:doi",n,!0)&&Ae.addExtension(n,$t.scientific),Ae.moveTo(n.summaries,"sci:publications",n,!0,!0)&&Ae.addExtension(n,$t.scientific),Ae.moveTo(n.summaries,"sci:citation",n,!0)&&Ae.addExtension(n,$t.scientific),Ae.moveTo(n.summaries,"cube:dimensions",n,!0)&&Ae.addExtension(n,$t.datacube),Object.keys(n.summaries).length===0&&delete n.summaries}},H3={migrate(n,e=null,t=!0){Vn.set(n),t&&(n.stac_version=G3),Ae.ensure(n,"stac_extensions",[]),Vn.before("1.0.0-rc.1")&&Ae.migrateExtensionShortnames(n),Ae.ensure(n,"id",""),Ae.ensure(n,"type","Feature"),Ae.isObject(n.geometry)||(n.geometry=null),n.geometry!==null&&Ae.ensure(n,"bbox",[]),Ae.ensure(n,"properties",{}),Ae.ensure(n,"links",[]),Ae.ensure(n,"assets",{});let r=!1;return Ae.isObject(e)&&Ae.isObject(e.properties)&&(Ae.removeFromArray(n,"stac_extensions","commons"),n.properties=Object.assign({},e.properties,n.properties),r=!0),Ae.runAll(H3,n,n),jx.migrate(n.properties,n),Bx.migrateAll(n),(Vn.before("0.8.0")||r)&&Ae.populateExtensions(n,"item"),n}},wX={migrate(n,e=!0){return Ae.ensure(n,"collections",[]),Ae.ensure(n,"links",[]),Ae.runAll(wX,n,n),n.collections=n.collections.map(t=>V3.migrate(t,e)),n}},EX={migrate(n,e=!0){return Ae.ensure(n,"type","FeatureCollection"),Ae.ensure(n,"features",[]),Ae.ensure(n,"links",[]),Ae.runAll(EX,n,n),n.features=n.features.map(t=>H3.migrate(t,null,e)),n}},Bx={migrateAll(n,e="assets"){for(let t in n[e])Bx.migrate(n[e][t],n)},migrate(n,e){return Ae.runAll(Bx,n,e),jx.migrate(n,e),n},mediaTypes(n){Ae.is(n.type,"string")&&Ae.mapValues(n,"type",["image/vnd.stac.geotiff","image/vnd.stac.geotiff; cloud-optimized=true"],["image/tiff; application=geotiff","image/tiff; application=geotiff; profile=cloud-optimized"])}},U3={migrateAll(n,e){if(Vn.before("1.0.0")){let t=Ae.isObject(e.properties)&&Array.isArray(e.properties.bands)?e.properties.bands:[];if(Array.isArray(n["eo:bands"]))for(let r in n["eo:bands"]){let i=n["eo:bands"][r];Ae.is(i,"number")&&Ae.isObject(t[i])&&(i=t[i]),Ae.isObject(i)||(i={}),n["eo:bands"][r]=i}}if(Vn.before("1.1.0-beta.1")&&(Array.isArray(n["raster:bands"])||Array.isArray(n["eo:bands"]))){Ae.ensure(n,"bands",[]);let t=n["raster:bands"]||[],r=n["eo:bands"]||[],i=Math.max(t.length,r.length);for(let o=0;o<i;o++)Ae.ensure(n.bands,o,{}),Object.assign(n.bands[o],t[o],r[o]),n.bands[o]=U3.migrate(n.bands[o],e);delete n["raster:bands"],delete n["eo:bands"]}},migrate(n,e){return Ae.runAll(U3,n,e),jx.migrate(n,e),n},eo(n){Vn.before("2.0.0-beta.1","eo")&&(Ae.rename(n,"common_name","eo:common_name"),Ae.rename(n,"center_wavelength","eo:center_wavelength"),Ae.rename(n,"full_width_half_max","eo:full_width_half_max"),Ae.rename(n,"solar_illumination","eo:solar_illumination"))},raster(n){Vn.before("2.0.0-beta.1","raster")&&(Ae.rename(n,"sampling","raster:sampling"),Ae.rename(n,"bits_per_sample","raster:bits_per_sample"),Ae.rename(n,"spatial_resolution","raster:spatial_resolution"),Ae.rename(n,"scale","raster:scale"),Ae.rename(n,"offset","raster:offset"),Ae.rename(n,"histogram","raster:histogram"))}},jx={migrate(n,e,t=!1){return Ae.runAll(jx,n,e,t),n},_commonMetadata(n,e){Vn.before("1.0.0-rc.3")&&(Ae.toUTC(n,"created"),Ae.toUTC(n,"updated")),U3.migrateAll(n,e)},_timestamps(n,e){Ae.toUTC(n,"published"),Ae.toUTC(n,"expires"),Ae.toUTC(n,"unpublished"),Ae.upgradeExtension(e,$t.timestamps)},_versioningIndicator(n,e){Ae.upgradeExtension(e,$t.version)},checksum(n,e){Vn.before("0.9.0")&&$c.multihash&&(Ae.rename(n,"checksum:md5","checksum:multihash")&&$c.toMultihash(n,"checksum:multihash","md5"),Ae.rename(n,"checksum:sha1","checksum:multihash")&&$c.toMultihash(n,"checksum:multihash","sha1"),Ae.rename(n,"checksum:sha2","checksum:multihash")&&$c.toMultihash(n,"checksum:multihash","sha2-256"),Ae.rename(n,"checksum:sha3","checksum:multihash")&&$c.toMultihash(n,"checksum:multihash","sha3-256")),Vn.before("1.0.0-rc.1")&&Ae.rename(n,"checksum:multihash","file:checksum")&&Ae.addExtension(e,$t.file),Ae.removeExtension(e,"checksum")},classification(n,e){Vn.before("1.1.0","classification")&&Ae.forAll(n,"classification:classes",t=>Ae.rename(t,"color-hint","color_hint")),Vn.before("2.0.0","classification")&&Ae.forAll(n,"classification:classes",t=>Ae.ensure(t,"name",t.description)),Ae.upgradeExtension(e,$t.classification)},cube(n,e){Ae.upgradeExtension(e,$t.datacube)},dtr(n,e){Vn.before("0.9.0")&&(Ae.rename(n,"dtr:start_datetime","start_datetime"),Ae.rename(n,"dtr:end_datetime","end_datetime"),Ae.removeExtension(e,"datetime-range"))},eo(n,e){Vn.before("0.9.0")&&(Ae.rename(n,"eo:epsg","proj:epsg")&&Ae.addExtension(e,$t.projection),Ae.rename(n,"eo:platform","platform"),Ae.rename(n,"eo:instrument","instruments")&&Ae.toArray(n,"instruments"),Ae.rename(n,"eo:constellation","constellation"),Ae.rename(n,"eo:off_nadir","view:off_nadir")&&Ae.addExtension(e,$t.view),Ae.rename(n,"eo:azimuth","view:azimuth")&&Ae.addExtension(e,$t.view),Ae.rename(n,"eo:incidence_angle","view:incidence_angle")&&Ae.addExtension(e,$t.view),Ae.rename(n,"eo:sun_azimuth","view:sun_azimuth")&&Ae.addExtension(e,$t.view),Ae.rename(n,"eo:sun_elevation","view:sun_elevation")&&Ae.addExtension(e,$t.view)),Vn.before("1.0.0-beta.1")&&Ae.rename(n,"eo:gsd","gsd"),Ae.upgradeExtension(e,$t.eo)},file(n,e,t){Ae.rename(n,"file:bits_per_sample","raster:bits_per_sample")&&Ae.addExtension(e,$t.raster),Ae.rename(n,"file:data_type","data_type"),Ae.rename(n,"file:unit","unit"),Array.isArray(n["file:nodata"])&&n["file:nodata"].length>1&&Ae.copy(n,"file:nodata","nodata:values"),Ae.rename(n,"file:nodata","nodata")&&!t&&Ae.pickFirst(n,"nodata"),Ae.upgradeExtension(e,$t.file)},label(n,e){Vn.before("0.8.0")&&(Ae.rename(n,"label:property","label:properties"),Ae.rename(n,"label:task","label:tasks"),Ae.rename(n,"label:overview","label:overviews")&&Ae.toArray(n,"label:overviews"),Ae.rename(n,"label:method","label:methods"),Ae.toArray(n,"label:classes")),Ae.upgradeExtension(e,$t.label)},pc(n,e){Vn.before("0.8.0")&&Ae.rename(n,"pc:schema","pc:schemas"),Ae.upgradeExtension(e,$t.pointcloud)},processing(n,e){Ae.upgradeExtension(e,$t.processing)},proj(n,e){Ae.rename(n,"proj:epsg","proj:code")&&Ae.formatString(n,"proj:code","EPSG:{}"),Ae.upgradeExtension(e,$t.projection)},raster(n,e){Ae.upgradeExtension(e,$t.raster)},sar(n,e,t){Ae.rename(n,"sar:incidence_angle","view:incidence_angle")&&Ae.addExtension(e,$t.view),Ae.rename(n,"sar:pass_direction","sat:orbit_state")&&Ae.mapValues(n,"sat:orbit_state",[null],["geostationary"])&&Ae.addExtension(e,$t.sat),Vn.before("0.7.0")&&(Ae.flattenArray(n,"sar:resolution",["sar:resolution_range","sar:resolution_azimuth"],t),Ae.flattenArray(n,"sar:pixel_spacing",["sar:pixel_spacing_range","sar:pixel_spacing_azimuth"],t),Ae.flattenArray(n,"sar:looks",["sar:looks_range","sar:looks_azimuth","sar:looks_equivalent_number"],t),Ae.rename(n,"sar:off_nadir","view:off_nadir")&&Ae.addExtension(e,$t.view)),Vn.before("0.9.0")&&(Ae.rename(n,"sar:platform","platform"),Ae.rename(n,"sar:instrument","instruments")&&Ae.toArray(n,"instruments"),Ae.rename(n,"sar:constellation","constellation"),Ae.rename(n,"sar:type","sar:product_type"),Ae.rename(n,"sar:polarization","sar:polarizations"),Ae.flattenOneElementArray(n,"sar:absolute_orbit",t)&&Ae.rename(n,"sar:absolute_orbit","sat:absolute_orbit")&&Ae.addExtension(e,$t.sat),Ae.flattenOneElementArray(n,"sar:relative_orbit",t)&&Ae.rename(n,"sar:relative_orbit","sat:relative_orbit")&&Ae.addExtension(e,$t.sat)),Ae.upgradeExtension(e,$t.sar)},sat(n,e){Vn.before("0.9.0")&&(Ae.rename(n,"sat:off_nadir_angle","sat:off_nadir"),Ae.rename(n,"sat:azimuth_angle","sat:azimuth"),Ae.rename(n,"sat:sun_azimuth_angle","sat:sun_azimuth"),Ae.rename(n,"sat:sun_elevation_angle","sat:sun_elevation")),Ae.upgradeExtension(e,$t.sat)},sci(n,e){Ae.upgradeExtension(e,$t.scientific)},item(n){Vn.before("0.8.0")&&(Ae.rename(n,"item:license","license"),Ae.rename(n,"item:providers","providers"))},table(n,e){Ae.upgradeExtension(e,$t.table)},view(n,e){Ae.upgradeExtension(e,$t.view)}},Zy={item(n,e=null,t=!0){return H3.migrate(n,e,t)},catalog(n,e=!0){return z3.migrate(n,e)},collection(n,e=!0){return V3.migrate(n,e)},collectionCollection(n,e=!0){return wX.migrate(n,e)},itemCollection(n,e=!0){return EX.migrate(n,e)},stac(n,e=!0){return n.type==="Feature"?Zy.item(n,null,e):n.type==="FeatureCollection"?Zy.itemCollection(n,e):n.type==="Collection"||!n.type&&Ae.isDefined(n.extent)&&Ae.isDefined(n.license)?Zy.collection(n,e):!n.type&&Array.isArray(n.collections)?Zy.collectionCollection(n,e):Zy.catalog(n,e)},enableMultihash(n){$c.multihash=n}};bX.exports=Zy});var DX=gr((Qy,e_)=>{"use strict";(function(n){var e=typeof Qy=="object"&&Qy&&!Qy.nodeType&&Qy,t=typeof e_=="object"&&e_&&!e_.nodeType&&e_,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(n=r);var i,o=2147483647,s=36,a=1,l=26,c=38,f=700,d=72,y=128,p="-",_=/^xn--/,w=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=s-a,A=Math.floor,N=String.fromCharCode,O;function W(q){throw new RangeError(S[q])}function X(q,K){for(var oe=q.length,_e=[];oe--;)_e[oe]=K(q[oe]);return _e}function Y(q,K){var oe=q.split("@"),_e="";oe.length>1&&(_e=oe[0]+"@",q=oe[1]),q=q.replace(b,".");var F=q.split("."),ee=X(F,K).join(".");return _e+ee}function $(q){for(var K=[],oe=0,_e=q.length,F,ee;oe<_e;)F=q.charCodeAt(oe++),F>=55296&&F<=56319&&oe<_e?(ee=q.charCodeAt(oe++),(ee&64512)==56320?K.push(((F&1023)<<10)+(ee&1023)+65536):(K.push(F),oe--)):K.push(F);return K}function V(q){return X(q,function(K){var oe="";return K>65535&&(K-=65536,oe+=N(K>>>10&1023|55296),K=56320|K&1023),oe+=N(K),oe}).join("")}function B(q){return q-48<10?q-22:q-65<26?q-65:q-97<26?q-97:s}function v(q,K){return q+22+75*(q<26)-((K!=0)<<5)}function I(q,K,oe){var _e=0;for(q=oe?A(q/f):q>>1,q+=A(q/K);q>T*l>>1;_e+=s)q=A(q/T);return A(_e+(T+1)*q/(q+c))}function M(q){var K=[],oe=q.length,_e,F=0,ee=y,ce=d,pe,J,xe,Se,ve,re,Ve,G,be;for(pe=q.lastIndexOf(p),pe<0&&(pe=0),J=0;J<pe;++J)q.charCodeAt(J)>=128&&W("not-basic"),K.push(q.charCodeAt(J));for(xe=pe>0?pe+1:0;xe<oe;){for(Se=F,ve=1,re=s;xe>=oe&&W("invalid-input"),Ve=B(q.charCodeAt(xe++)),(Ve>=s||Ve>A((o-F)/ve))&&W("overflow"),F+=Ve*ve,G=re<=ce?a:re>=ce+l?l:re-ce,!(Ve<G);re+=s)be=s-G,ve>A(o/be)&&W("overflow"),ve*=be;_e=K.length+1,ce=I(F-Se,_e,Se==0),A(F/_e)>o-ee&&W("overflow"),ee+=A(F/_e),F%=_e,K.splice(F++,0,ee)}return V(K)}function j(q){var K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re=[],Ve,G,be,Ie;for(q=$(q),Ve=q.length,K=y,oe=0,ee=d,ce=0;ce<Ve;++ce)ve=q[ce],ve<128&&re.push(N(ve));for(_e=F=re.length,F&&re.push(p);_e<Ve;){for(pe=o,ce=0;ce<Ve;++ce)ve=q[ce],ve>=K&&ve<pe&&(pe=ve);for(G=_e+1,pe-K>A((o-oe)/G)&&W("overflow"),oe+=(pe-K)*G,K=pe,ce=0;ce<Ve;++ce)if(ve=q[ce],ve<K&&++oe>o&&W("overflow"),ve==K){for(J=oe,xe=s;Se=xe<=ee?a:xe>=ee+l?l:xe-ee,!(J<Se);xe+=s)Ie=J-Se,be=s-Se,re.push(N(v(Se+Ie%be,0))),J=A(Ie/be);re.push(N(v(J,0))),ee=I(oe,G,_e==F),oe=0,++_e}++oe,++K}return re.join("")}function Q(q){return Y(q,function(K){return _.test(K)?M(K.slice(4).toLowerCase()):K})}function Z(q){return Y(q,function(K){return w.test(K)?"xn--"+j(K):K})}if(i={version:"1.3.2",ucs2:{decode:$,encode:V},decode:M,encode:j,toASCII:Z,toUnicode:Q},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(e_.exports==e)t.exports=i;else for(O in i)i.hasOwnProperty(O)&&(e[O]=i[O]);else n.punycode=i})(Qy)});var RX=gr((AX,iT)=>{"use strict";(function(n,e){"use strict";typeof iT=="object"&&iT.exports?iT.exports=e():typeof define=="function"&&define.amd?define(e):n.IPv6=e(n)})(AX,function(n){"use strict";var e=n&&n.IPv6;function t(i){var o=i.toLowerCase(),s=o.split(":"),a=s.length,l=8;s[0]===""&&s[1]===""&&s[2]===""?(s.shift(),s.shift()):s[0]===""&&s[1]===""?s.shift():s[a-1]===""&&s[a-2]===""&&s.pop(),a=s.length,s[a-1].indexOf(".")!==-1&&(l=7);var c;for(c=0;c<a&&s[c]!=="";c++);if(c<l)for(s.splice(c,1,"0000");s.length<l;)s.splice(c,0,"0000");for(var f,d=0;d<l;d++){f=s[d].split("");for(var y=0;y<3&&(f[0]==="0"&&f.length>1);y++)f.splice(0,1);s[d]=f.join("")}var p=-1,_=0,w=0,b=-1,S=!1;for(d=0;d<l;d++)S?s[d]==="0"?w+=1:(S=!1,w>_&&(p=b,_=w)):s[d]==="0"&&(S=!0,b=d,w=1);w>_&&(p=b,_=w),_>1&&s.splice(p,_,""),a=s.length;var T="";for(s[0]===""&&(T=":"),d=0;d<a&&(T+=s[d],d!==a-1);d++)T+=":";return s[a-1]===""&&(T+=":"),T}function r(){return n.IPv6===this&&(n.IPv6=e),this}return{best:t,noConflict:r}})});var NX=gr((MX,oT)=>{"use strict";(function(n,e){"use strict";typeof oT=="object"&&oT.exports?oT.exports=e():typeof define=="function"&&define.amd?define(e):n.SecondLevelDomains=e(n)})(MX,function(n){"use strict";var e=n&&n.SecondLevelDomains,t={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return!1;var o=r.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return!1;var s=t.list[r.slice(i+1)];return s?s.indexOf(" "+r.slice(o+1,i)+" ")>=0:!1},is:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return!1;var o=r.lastIndexOf(".",i-1);if(o>=0)return!1;var s=t.list[r.slice(i+1)];return s?s.indexOf(" "+r.slice(0,i)+" ")>=0:!1},get:function(r){var i=r.lastIndexOf(".");if(i<=0||i>=r.length-1)return null;var o=r.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return null;var s=t.list[r.slice(i+1)];return!s||s.indexOf(" "+r.slice(o+1,i)+" ")<0?null:r.slice(o+1)},noConflict:function(){return n.SecondLevelDomains===this&&(n.SecondLevelDomains=e),this}};return t})});var aT=gr((PX,sT)=>{"use strict";(function(n,e){"use strict";typeof sT=="object"&&sT.exports?sT.exports=e(DX(),RX(),NX()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):n.URI=e(n.punycode,n.IPv6,n.SecondLevelDomains,n)})(PX,function(n,e,t,r){"use strict";var i=r&&r.URI;function o(v,I){var M=arguments.length>=1,j=arguments.length>=2;if(!(this instanceof o))return M?j?new o(v,I):new o(v):new o;if(v===void 0){if(M)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?v=location.href+"":v=""}if(v===null&&M)throw new TypeError("null is not a valid argument for URI");return this.href(v),I!==void 0?this.absoluteTo(I):this}function s(v){return/^[0-9]+$/.test(v)}o.version="1.19.11";var a=o.prototype,l=Object.prototype.hasOwnProperty;function c(v){return v.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function f(v){return v===void 0?"Undefined":String(Object.prototype.toString.call(v)).slice(8,-1)}function d(v){return f(v)==="Array"}function y(v,I){var M={},j,Q;if(f(I)==="RegExp")M=null;else if(d(I))for(j=0,Q=I.length;j<Q;j++)M[I[j]]=!0;else M[I]=!0;for(j=0,Q=v.length;j<Q;j++){var Z=M&&M[v[j]]!==void 0||!M&&I.test(v[j]);Z&&(v.splice(j,1),Q--,j--)}return v}function p(v,I){var M,j;if(d(I)){for(M=0,j=I.length;M<j;M++)if(!p(v,I[M]))return!1;return!0}var Q=f(I);for(M=0,j=v.length;M<j;M++)if(Q==="RegExp"){if(typeof v[M]=="string"&&v[M].match(I))return!0}else if(v[M]===I)return!0;return!1}function _(v,I){if(!d(v)||!d(I)||v.length!==I.length)return!1;v.sort(),I.sort();for(var M=0,j=v.length;M<j;M++)if(v[M]!==I[M])return!1;return!0}function w(v){var I=/^\/+|\/+$/g;return v.replace(I,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(v){if(!(!v||!v.nodeName)){var I=v.nodeName.toLowerCase();if(!(I==="input"&&v.type!=="image"))return o.domAttributes[I]}};function b(v){return escape(v)}function S(v){return encodeURIComponent(v).replace(/[!'()*]/g,b).replace(/\*/g,"%2A")}o.encode=S,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=S,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(v,I){var M=o.encode(v+"");return I===void 0&&(I=o.escapeQuerySpace),I?M.replace(/%20/g,"+"):M},o.decodeQuery=function(v,I){v+="",I===void 0&&(I=o.escapeQuerySpace);try{return o.decode(I?v.replace(/\+/g,"%20"):v)}catch{return v}};var T={encode:"encode",decode:"decode"},A,N=function(v,I){return function(M){try{return o[I](M+"").replace(o.characters[v][I].expression,function(j){return o.characters[v][I].map[j]})}catch{return M}}};for(A in T)o[A+"PathSegment"]=N("pathname",T[A]),o[A+"UrnPathSegment"]=N("urnpath",T[A]);var O=function(v,I,M){return function(j){var Q;M?Q=function(oe){return o[I](o[M](oe))}:Q=o[I];for(var Z=(j+"").split(v),q=0,K=Z.length;q<K;q++)Z[q]=Q(Z[q]);return Z.join(v)}};o.decodePath=O("/","decodePathSegment"),o.decodeUrnPath=O(":","decodeUrnPathSegment"),o.recodePath=O("/","encodePathSegment","decode"),o.recodeUrnPath=O(":","encodeUrnPathSegment","decode"),o.encodeReserved=N("reserved","encode"),o.parse=function(v,I){var M;return I||(I={preventInvalidHostname:o.preventInvalidHostname}),v=v.replace(o.leading_whitespace_expression,""),v=v.replace(o.ascii_tab_whitespace,""),M=v.indexOf("#"),M>-1&&(I.fragment=v.substring(M+1)||null,v=v.substring(0,M)),M=v.indexOf("?"),M>-1&&(I.query=v.substring(M+1)||null,v=v.substring(0,M)),v=v.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),v=v.replace(/^[/\\]{2,}/i,"//"),v.substring(0,2)==="//"?(I.protocol=null,v=v.substring(2),v=o.parseAuthority(v,I)):(M=v.indexOf(":"),M>-1&&(I.protocol=v.substring(0,M)||null,I.protocol&&!I.protocol.match(o.protocol_expression)?I.protocol=void 0:v.substring(M+1,M+3).replace(/\\/g,"/")==="//"?(v=v.substring(M+3),v=o.parseAuthority(v,I)):(v=v.substring(M+1),I.urn=!0))),I.path=v,I},o.parseHost=function(v,I){v||(v=""),v=v.replace(/\\/g,"/");var M=v.indexOf("/"),j,Q;if(M===-1&&(M=v.length),v.charAt(0)==="[")j=v.indexOf("]"),I.hostname=v.substring(1,j)||null,I.port=v.substring(j+2,M)||null,I.port==="/"&&(I.port=null);else{var Z=v.indexOf(":"),q=v.indexOf("/"),K=v.indexOf(":",Z+1);K!==-1&&(q===-1||K<q)?(I.hostname=v.substring(0,M)||null,I.port=null):(Q=v.substring(0,M).split(":"),I.hostname=Q[0]||null,I.port=Q[1]||null)}return I.hostname&&v.substring(M).charAt(0)!=="/"&&(M++,v="/"+v),I.preventInvalidHostname&&o.ensureValidHostname(I.hostname,I.protocol),I.port&&o.ensureValidPort(I.port),v.substring(M)||"/"},o.parseAuthority=function(v,I){return v=o.parseUserinfo(v,I),o.parseHost(v,I)},o.parseUserinfo=function(v,I){var M=v,j=v.indexOf("\\");j!==-1&&(v=v.replace(/\\/g,"/"));var Q=v.indexOf("/"),Z=v.lastIndexOf("@",Q>-1?Q:v.length-1),q;return Z>-1&&(Q===-1||Z<Q)?(q=v.substring(0,Z).split(":"),I.username=q[0]?o.decode(q[0]):null,q.shift(),I.password=q[0]?o.decode(q.join(":")):null,v=M.substring(Z+1)):(I.username=null,I.password=null),v},o.parseQuery=function(v,I){if(!v)return{};if(v=v.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!v)return{};for(var M={},j=v.split("&"),Q=j.length,Z,q,K,oe=0;oe<Q;oe++)Z=j[oe].split("="),q=o.decodeQuery(Z.shift(),I),K=Z.length?o.decodeQuery(Z.join("="),I):null,q!=="__proto__"&&(l.call(M,q)?((typeof M[q]=="string"||M[q]===null)&&(M[q]=[M[q]]),M[q].push(K)):M[q]=K);return M},o.build=function(v){var I="",M=!1;return v.protocol&&(I+=v.protocol+":"),!v.urn&&(I||v.hostname)&&(I+="//",M=!0),I+=o.buildAuthority(v)||"",typeof v.path=="string"&&(v.path.charAt(0)!=="/"&&M&&(I+="/"),I+=v.path),typeof v.query=="string"&&v.query&&(I+="?"+v.query),typeof v.fragment=="string"&&v.fragment&&(I+="#"+v.fragment),I},o.buildHost=function(v){var I="";if(v.hostname)o.ip6_expression.test(v.hostname)?I+="["+v.hostname+"]":I+=v.hostname;else return"";return v.port&&(I+=":"+v.port),I},o.buildAuthority=function(v){return o.buildUserinfo(v)+o.buildHost(v)},o.buildUserinfo=function(v){var I="";return v.username&&(I+=o.encode(v.username)),v.password&&(I+=":"+o.encode(v.password)),I&&(I+="@"),I},o.buildQuery=function(v,I,M){var j="",Q,Z,q,K;for(Z in v)if(Z!=="__proto__"&&l.call(v,Z))if(d(v[Z]))for(Q={},q=0,K=v[Z].length;q<K;q++)v[Z][q]!==void 0&&Q[v[Z][q]+""]===void 0&&(j+="&"+o.buildQueryParameter(Z,v[Z][q],M),I!==!0&&(Q[v[Z][q]+""]=!0));else v[Z]!==void 0&&(j+="&"+o.buildQueryParameter(Z,v[Z],M));return j.substring(1)},o.buildQueryParameter=function(v,I,M){return o.encodeQuery(v,M)+(I!==null?"="+o.encodeQuery(I,M):"")},o.addQuery=function(v,I,M){if(typeof I=="object")for(var j in I)l.call(I,j)&&o.addQuery(v,j,I[j]);else if(typeof I=="string"){if(v[I]===void 0){v[I]=M;return}else typeof v[I]=="string"&&(v[I]=[v[I]]);d(M)||(M=[M]),v[I]=(v[I]||[]).concat(M)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(v,I,M){if(typeof I=="object")for(var j in I)l.call(I,j)&&o.setQuery(v,j,I[j]);else if(typeof I=="string")v[I]=M===void 0?null:M;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(v,I,M){var j,Q,Z;if(d(I))for(j=0,Q=I.length;j<Q;j++)v[I[j]]=void 0;else if(f(I)==="RegExp")for(Z in v)I.test(Z)&&(v[Z]=void 0);else if(typeof I=="object")for(Z in I)l.call(I,Z)&&o.removeQuery(v,Z,I[Z]);else if(typeof I=="string")M!==void 0?f(M)==="RegExp"?!d(v[I])&&M.test(v[I])?v[I]=void 0:v[I]=y(v[I],M):v[I]===String(M)&&(!d(M)||M.length===1)?v[I]=void 0:d(v[I])&&(v[I]=y(v[I],M)):v[I]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(v,I,M,j){switch(f(I)){case"String":break;case"RegExp":for(var Q in v)if(l.call(v,Q)&&I.test(Q)&&(M===void 0||o.hasQuery(v,Q,M)))return!0;return!1;case"Object":for(var Z in I)if(l.call(I,Z)&&!o.hasQuery(v,Z,I[Z]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(f(M)){case"Undefined":return I in v;case"Boolean":var q=!!(d(v[I])?v[I].length:v[I]);return M===q;case"Function":return!!M(v[I],I,v);case"Array":if(!d(v[I]))return!1;var K=j?p:_;return K(v[I],M);case"RegExp":return d(v[I])?j?p(v[I],M):!1:!!(v[I]&&v[I].match(M));case"Number":M=String(M);case"String":return d(v[I])?j?p(v[I],M):!1:v[I]===M;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var v=[],I=[],M=0,j=0;j<arguments.length;j++){var Q=new o(arguments[j]);v.push(Q);for(var Z=Q.segment(),q=0;q<Z.length;q++)typeof Z[q]=="string"&&I.push(Z[q]),Z[q]&&M++}if(!I.length||!M)return new o("");var K=new o("").segment(I);return(v[0].path()===""||v[0].path().slice(0,1)==="/")&&K.path("/"+K.path()),K.normalize()},o.commonPath=function(v,I){var M=Math.min(v.length,I.length),j;for(j=0;j<M;j++)if(v.charAt(j)!==I.charAt(j)){j--;break}return j<1?v.charAt(0)===I.charAt(0)&&v.charAt(0)==="/"?"/":"":((v.charAt(j)!=="/"||I.charAt(j)!=="/")&&(j=v.substring(0,j).lastIndexOf("/")),v.substring(0,j+1))},o.withinString=function(v,I,M){M||(M={});var j=M.start||o.findUri.start,Q=M.end||o.findUri.end,Z=M.trim||o.findUri.trim,q=M.parens||o.findUri.parens,K=/[a-z0-9-]=["']?$/i;for(j.lastIndex=0;;){var oe=j.exec(v);if(!oe)break;var _e=oe.index;if(M.ignoreHtml){var F=v.slice(Math.max(_e-3,0),_e);if(F&&K.test(F))continue}for(var ee=_e+v.slice(_e).search(Q),ce=v.slice(_e,ee),pe=-1;;){var J=q.exec(ce);if(!J)break;var xe=J.index+J[0].length;pe=Math.max(pe,xe)}if(pe>-1?ce=ce.slice(0,pe)+ce.slice(pe).replace(Z,""):ce=ce.replace(Z,""),!(ce.length<=oe[0].length)&&!(M.ignore&&M.ignore.test(ce))){ee=_e+ce.length;var Se=I(ce,_e,ee,v);if(Se===void 0){j.lastIndex=ee;continue}Se=String(Se),v=v.slice(0,_e)+Se+v.slice(ee),j.lastIndex=_e+Se.length}}return j.lastIndex=0,v},o.ensureValidHostname=function(v,I){var M=!!v,j=!!I,Q=!1;if(j&&(Q=p(o.hostProtocols,I)),Q&&!M)throw new TypeError("Hostname cannot be empty, if protocol is "+I);if(v&&v.match(o.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(n.toASCII(v).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(v){if(v){var I=Number(v);if(!(s(I)&&I>0&&I<65536))throw new TypeError('Port "'+v+'" is not a valid port')}},o.noConflict=function(v){if(v){var I={URI:this.noConflict()};return r.URITemplate&&typeof r.URITemplate.noConflict=="function"&&(I.URITemplate=r.URITemplate.noConflict()),r.IPv6&&typeof r.IPv6.noConflict=="function"&&(I.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict=="function"&&(I.SecondLevelDomains=r.SecondLevelDomains.noConflict()),I}else r.URI===this&&(r.URI=i);return this},a.build=function(v){return v===!0?this._deferred_build=!0:(v===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new o(this)},a.valueOf=a.toString=function(){return this.build(!1)._string};function W(v){return function(I,M){return I===void 0?this._parts[v]||"":(this._parts[v]=I||null,this.build(!M),this)}}function X(v,I){return function(M,j){return M===void 0?this._parts[v]||"":(M!==null&&(M=M+"",M.charAt(0)===I&&(M=M.substring(1))),this._parts[v]=M,this.build(!j),this)}}a.protocol=W("protocol"),a.username=W("username"),a.password=W("password"),a.hostname=W("hostname"),a.port=W("port"),a.query=X("query","?"),a.fragment=X("fragment","#"),a.search=function(v,I){var M=this.query(v,I);return typeof M=="string"&&M.length?"?"+M:M},a.hash=function(v,I){var M=this.fragment(v,I);return typeof M=="string"&&M.length?"#"+M:M},a.pathname=function(v,I){if(v===void 0||v===!0){var M=this._parts.path||(this._parts.hostname?"/":"");return v?(this._parts.urn?o.decodeUrnPath:o.decodePath)(M):M}else return this._parts.urn?this._parts.path=v?o.recodeUrnPath(v):"":this._parts.path=v?o.recodePath(v):"/",this.build(!I),this},a.path=a.pathname,a.href=function(v,I){var M;if(v===void 0)return this.toString();this._string="",this._parts=o._parts();var j=v instanceof o,Q=typeof v=="object"&&(v.hostname||v.path||v.pathname);if(v.nodeName){var Z=o.getDomAttribute(v);v=v[Z]||"",Q=!1}if(!j&&Q&&v.pathname!==void 0&&(v=v.toString()),typeof v=="string"||v instanceof String)this._parts=o.parse(String(v),this._parts);else if(j||Q){var q=j?v._parts:v;for(M in q)M!=="query"&&l.call(this._parts,M)&&(this._parts[M]=q[M]);q.query&&this.query(q.query,!1)}else throw new TypeError("invalid input");return this.build(!I),this},a.is=function(v){var I=!1,M=!1,j=!1,Q=!1,Z=!1,q=!1,K=!1,oe=!this._parts.urn;switch(this._parts.hostname&&(oe=!1,M=o.ip4_expression.test(this._parts.hostname),j=o.ip6_expression.test(this._parts.hostname),I=M||j,Q=!I,Z=Q&&t&&t.has(this._parts.hostname),q=Q&&o.idn_expression.test(this._parts.hostname),K=Q&&o.punycode_expression.test(this._parts.hostname)),v.toLowerCase()){case"relative":return oe;case"absolute":return!oe;case"domain":case"name":return Q;case"sld":return Z;case"ip":return I;case"ip4":case"ipv4":case"inet4":return M;case"ip6":case"ipv6":case"inet6":return j;case"idn":return q;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return K}return null};var Y=a.protocol,$=a.port,V=a.hostname;a.protocol=function(v,I){if(v&&(v=v.replace(/:(\/\/)?$/,""),!v.match(o.protocol_expression)))throw new TypeError('Protocol "'+v+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return Y.call(this,v,I)},a.scheme=a.protocol,a.port=function(v,I){return this._parts.urn?v===void 0?"":this:(v!==void 0&&(v===0&&(v=null),v&&(v+="",v.charAt(0)===":"&&(v=v.substring(1)),o.ensureValidPort(v))),$.call(this,v,I))},a.hostname=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v!==void 0){var M={preventInvalidHostname:this._parts.preventInvalidHostname},j=o.parseHost(v,M);if(j!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');v=M.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(v,this._parts.protocol)}return V.call(this,v,I)},a.origin=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var M=this.protocol(),j=this.authority();return j?(M?M+"://":"")+this.authority():""}else{var Q=o(v);return this.protocol(Q.protocol()).authority(Q.authority()).build(!I),this}},a.host=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var M=o.parseHost(v,this._parts);if(M!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},a.authority=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var M=o.parseAuthority(v,this._parts);if(M!=="/")throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!I),this},a.userinfo=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){var M=o.buildUserinfo(this._parts);return M&&M.substring(0,M.length-1)}else return v[v.length-1]!=="@"&&(v+="@"),o.parseUserinfo(v,this._parts),this.build(!I),this},a.resource=function(v,I){var M;return v===void 0?this.path()+this.search()+this.hash():(M=o.parse(v),this._parts.path=M.path,this._parts.query=M.query,this._parts.fragment=M.fragment,this.build(!I),this)},a.subdomain=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,M)||""}else{var j=this._parts.hostname.length-this.domain().length,Q=this._parts.hostname.substring(0,j),Z=new RegExp("^"+c(Q));if(v&&v.charAt(v.length-1)!=="."&&(v+="."),v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return v&&o.ensureValidHostname(v,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(Z,v),this.build(!I),this}},a.domain=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(I=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.match(/\./g);if(M&&M.length<2)return this._parts.hostname;var j=this._parts.hostname.length-this.tld(I).length-1;return j=this._parts.hostname.lastIndexOf(".",j-1)+1,this._parts.hostname.substring(j)||""}else{if(!v)throw new TypeError("cannot set domain empty");if(v.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(v,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=v;else{var Q=new RegExp(c(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(Q,v)}return this.build(!I),this}},a.tld=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v=="boolean"&&(I=v,v=void 0),v===void 0){if(!this._parts.hostname||this.is("IP"))return"";var M=this._parts.hostname.lastIndexOf("."),j=this._parts.hostname.substring(M+1);return I!==!0&&t&&t.list[j.toLowerCase()]&&t.get(this._parts.hostname)||j}else{var Q;if(v)if(v.match(/[^a-zA-Z0-9-]/))if(t&&t.is(v))Q=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Q,v);else throw new TypeError('TLD "'+v+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");Q=new RegExp(c(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Q,v)}else throw new TypeError("cannot set TLD empty");return this.build(!I),this}},a.directory=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var M=this._parts.path.length-this.filename().length-1,j=this._parts.path.substring(0,M)||(this._parts.hostname?"/":"");return v?o.decodePath(j):j}else{var Q=this._parts.path.length-this.filename().length,Z=this._parts.path.substring(0,Q),q=new RegExp("^"+c(Z));return this.is("relative")||(v||(v="/"),v.charAt(0)!=="/"&&(v="/"+v)),v&&v.charAt(v.length-1)!=="/"&&(v+="/"),v=o.recodePath(v),this._parts.path=this._parts.path.replace(q,v),this.build(!I),this}},a.filename=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(typeof v!="string"){if(!this._parts.path||this._parts.path==="/")return"";var M=this._parts.path.lastIndexOf("/"),j=this._parts.path.substring(M+1);return v?o.decodePathSegment(j):j}else{var Q=!1;v.charAt(0)==="/"&&(v=v.substring(1)),v.match(/\.?\//)&&(Q=!0);var Z=new RegExp(c(this.filename())+"$");return v=o.recodePath(v),this._parts.path=this._parts.path.replace(Z,v),Q?this.normalizePath(I):this.build(!I),this}},a.suffix=function(v,I){if(this._parts.urn)return v===void 0?"":this;if(v===void 0||v===!0){if(!this._parts.path||this._parts.path==="/")return"";var M=this.filename(),j=M.lastIndexOf("."),Q,Z;return j===-1?"":(Q=M.substring(j+1),Z=/^[a-z0-9%]+$/i.test(Q)?Q:"",v?o.decodePathSegment(Z):Z)}else{v.charAt(0)==="."&&(v=v.substring(1));var q=this.suffix(),K;if(q)v?K=new RegExp(c(q)+"$"):K=new RegExp(c("."+q)+"$");else{if(!v)return this;this._parts.path+="."+o.recodePath(v)}return K&&(v=o.recodePath(v),this._parts.path=this._parts.path.replace(K,v)),this.build(!I),this}},a.segment=function(v,I,M){var j=this._parts.urn?":":"/",Q=this.path(),Z=Q.substring(0,1)==="/",q=Q.split(j);if(v!==void 0&&typeof v!="number"&&(M=I,I=v,v=void 0),v!==void 0&&typeof v!="number")throw new Error('Bad segment "'+v+'", must be 0-based integer');if(Z&&q.shift(),v<0&&(v=Math.max(q.length+v,0)),I===void 0)return v===void 0?q:q[v];if(v===null||q[v]===void 0)if(d(I)){q=[];for(var K=0,oe=I.length;K<oe;K++)!I[K].length&&(!q.length||!q[q.length-1].length)||(q.length&&!q[q.length-1].length&&q.pop(),q.push(w(I[K])))}else(I||typeof I=="string")&&(I=w(I),q[q.length-1]===""?q[q.length-1]=I:q.push(I));else I?q[v]=w(I):q.splice(v,1);return Z&&q.unshift(""),this.path(q.join(j),M)},a.segmentCoded=function(v,I,M){var j,Q,Z;if(typeof v!="number"&&(M=I,I=v,v=void 0),I===void 0){if(j=this.segment(v,I,M),!d(j))j=j!==void 0?o.decode(j):void 0;else for(Q=0,Z=j.length;Q<Z;Q++)j[Q]=o.decode(j[Q]);return j}if(!d(I))I=typeof I=="string"||I instanceof String?o.encode(I):I;else for(Q=0,Z=I.length;Q<Z;Q++)I[Q]=o.encode(I[Q]);return this.segment(v,I,M)};var B=a.query;return a.query=function(v,I){if(v===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="function"){var M=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),j=v.call(this,M);return this._parts.query=o.buildQuery(j||M,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this}else return v!==void 0&&typeof v!="string"?(this._parts.query=o.buildQuery(v,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!I),this):B.call(this,v,I)},a.setQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof v=="string"||v instanceof String)j[v]=I!==void 0?I:null;else if(typeof v=="object")for(var Q in v)l.call(v,Q)&&(j[Q]=v[Q]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.addQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(j,v,I===void 0?null:I),this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.removeQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(j,v,I),this._parts.query=o.buildQuery(j,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof v!="string"&&(M=I),this.build(!M),this},a.hasQuery=function(v,I,M){var j=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(j,v,I,M)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(v){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!v)),this},a.normalizeHostname=function(v){return this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!v)),this},a.normalizePort=function(v){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!v)),this},a.normalizePath=function(v){var I=this._parts.path;if(!I)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!v),this;if(this._parts.path==="/")return this;I=o.recodePath(I);var M,j="",Q,Z;for(I.charAt(0)!=="/"&&(M=!0,I="/"+I),(I.slice(-3)==="/.."||I.slice(-2)==="/.")&&(I+="/"),I=I.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),M&&(j=I.substring(1).match(/^(\.\.\/)+/)||"",j&&(j=j[0]));Q=I.search(/\/\.\.(\/|$)/),Q!==-1;){if(Q===0){I=I.substring(3);continue}Z=I.substring(0,Q).lastIndexOf("/"),Z===-1&&(Z=Q),I=I.substring(0,Z)+I.substring(Q+3)}return M&&this.is("relative")&&(I=j+I.substring(1)),this._parts.path=I,this.build(!v),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(v){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!v)),this},a.normalizeFragment=function(v){return this._parts.fragment||(this._parts.fragment=null,this.build(!v)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var v=o.encode,I=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=v,o.decode=I}return this},a.unicode=function(){var v=o.encode,I=o.decode;o.encode=S,o.decode=unescape;try{this.normalize()}finally{o.encode=v,o.decode=I}return this},a.readable=function(){var v=this.clone();v.username("").password("").normalize();var I="";if(v._parts.protocol&&(I+=v._parts.protocol+"://"),v._parts.hostname&&(v.is("punycode")&&n?(I+=n.toUnicode(v._parts.hostname),v._parts.port&&(I+=":"+v._parts.port)):I+=v.host()),v._parts.hostname&&v._parts.path&&v._parts.path.charAt(0)!=="/"&&(I+="/"),I+=v.path(!0),v._parts.query){for(var M="",j=0,Q=v._parts.query.split("&"),Z=Q.length;j<Z;j++){var q=(Q[j]||"").split("=");M+="&"+o.decodeQuery(q[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),q[1]!==void 0&&(M+="="+o.decodeQuery(q[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}I+="?"+M.substring(1)}return I+=o.decodeQuery(v.hash(),!0),I},a.absoluteTo=function(v){var I=this.clone(),M=["protocol","username","password","hostname","port"],j,Q,Z;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v instanceof o||(v=new o(v)),I._parts.protocol||(I._parts.protocol=v._parts.protocol,this._parts.hostname))return I;for(Q=0;Z=M[Q];Q++)I._parts[Z]=v._parts[Z];return I._parts.path?(I._parts.path.substring(-2)===".."&&(I._parts.path+="/"),I.path().charAt(0)!=="/"&&(j=v.directory(),j=j||(v.path().indexOf("/")===0?"/":""),I._parts.path=(j?j+"/":"")+I._parts.path,I.normalizePath())):(I._parts.path=v._parts.path,I._parts.query||(I._parts.query=v._parts.query)),I.build(),I},a.relativeTo=function(v){var I=this.clone().normalize(),M,j,Q,Z,q;if(I._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(v=new o(v).normalize(),M=I._parts,j=v._parts,Z=I.path(),q=v.path(),Z.charAt(0)!=="/")throw new Error("URI is already relative");if(q.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(M.protocol===j.protocol&&(M.protocol=null),M.username!==j.username||M.password!==j.password||M.protocol!==null||M.username!==null||M.password!==null)return I.build();if(M.hostname===j.hostname&&M.port===j.port)M.hostname=null,M.port=null;else return I.build();if(Z===q)return M.path="",I.build();if(Q=o.commonPath(Z,q),!Q)return I.build();var K=j.path.substring(Q.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return M.path=K+M.path.substring(Q.length)||"./",I.build()},a.equals=function(v){var I=this.clone(),M=new o(v),j={},Q={},Z={},q,K,oe;if(I.normalize(),M.normalize(),I.toString()===M.toString())return!0;if(q=I.query(),K=M.query(),I.query(""),M.query(""),I.toString()!==M.toString()||q.length!==K.length)return!1;j=o.parseQuery(q,this._parts.escapeQuerySpace),Q=o.parseQuery(K,this._parts.escapeQuerySpace);for(oe in j)if(l.call(j,oe)){if(d(j[oe])){if(!_(j[oe],Q[oe]))return!1}else if(j[oe]!==Q[oe])return!1;Z[oe]=!0}for(oe in Q)if(l.call(Q,oe)&&!Z[oe])return!1;return!0},a.preventInvalidHostname=function(v){return this._parts.preventInvalidHostname=!!v,this},a.duplicateQueryParameters=function(v){return this._parts.duplicateQueryParameters=!!v,this},a.escapeQuerySpace=function(v){return this._parts.escapeQuerySpace=!!v,this},o})});var hZ=gr((xvt,x4)=>{"use strict";function cZ(n,e,t){let r=t&&t.debug||!1;r&&console.log("[xml-utils] getting "+e+" in "+n);let i=typeof n=="object"?n.outer:n,o=i.slice(0,i.indexOf(">")+1),s=['"',"'"];for(let a=0;a<s.length;a++){let l=s[a],c=e+"\\="+l+"([^"+l+"]*)"+l;r&&console.log("[xml-utils] pattern:",c);let d=new RegExp(c).exec(o);if(r&&console.log("[xml-utils] match:",d),d)return d[1]}}x4.exports=cZ;x4.exports.default=cZ});var dZ=gr((wvt,w4)=>{"use strict";function fZ(n,e,t){let i=new RegExp(e).exec(n.slice(t));return i?t+i.index:-1}w4.exports=fZ;w4.exports.default=fZ});var gZ=gr((Evt,E4)=>{"use strict";function pZ(n,e,t){let i=new RegExp(e).exec(n.slice(t));return i?t+i.index+i[0].length-1:-1}E4.exports=pZ;E4.exports.default=pZ});var yZ=gr((bvt,b4)=>{"use strict";function mZ(n,e){let t=new RegExp(e,"g"),r=n.match(t);return r?r.length:0}b4.exports=mZ;b4.exports.default=mZ});var xZ=gr((Svt,C4)=>{"use strict";var r1e=dZ(),S4=gZ(),_Z=yZ();function vZ(n,e,t){let r=t&&t.debug||!1,i=!(t&&typeof t.nested===!1),o=t&&t.startIndex||0;r&&console.log("[xml-utils] starting findTagByName with",e," and ",t);let s=r1e(n,`<${e}[ 
>/]`,o);if(r&&console.log("[xml-utils] start:",s),s===-1)return;let a=n.slice(s+e.length),l=S4(a,"^[^<]*[ /]>",0),c=l!==-1&&a[l-1]==="/";if(r&&console.log("[xml-utils] selfClosing:",c),c===!1)if(i){let p=0,_=1,w=0;for(;(l=S4(a,"[ /]"+e+">",p))!==-1;){let b=a.substring(p,l+1);if(_+=_Z(b,"<"+e+`[ 
	>]`),w+=_Z(b,"</"+e+">"),w>=_)break;p=l}}else l=S4(a,"[ /]"+e+">",0);let f=s+e.length+l+1;if(r&&console.log("[xml-utils] end:",f),f===-1)return;let d=n.slice(s,f),y;return c?y=null:y=d.slice(d.indexOf(">")+1,d.lastIndexOf("<")),{inner:y,outer:d,start:s,end:f}}C4.exports=vZ;C4.exports.default=vZ});var EZ=gr((Cvt,I4)=>{"use strict";var i1e=xZ();function wZ(n,e,t){let r=[],i=t&&t.debug||!1,o=t&&typeof t.nested=="boolean"?t.nested:!0,s=t&&t.startIndex||0,a;for(;a=i1e(n,e,{debug:i,startIndex:s});)o?s=a.start+1+e.length:s=a.end,r.push(a);return i&&console.log("findTagsByName found",r.length,"tags"),r}I4.exports=wZ;I4.exports.default=wZ});var UZ=gr(()=>{"use strict"});var GZ=gr(()=>{"use strict"});var zZ=gr(()=>{"use strict"});var pD;function Dw(){return pD}function hc(n){let e=pD;return pD=n,e}var n8=Symbol("NotFound");function xm(n){return n===n8||n?.name==="\u0275NotFound"}var ks=null,Aw=!1,gD=1,pJ=null,ua=Symbol("SIGNAL");function un(n){let e=ks;return ks=n,e}function Pw(){return ks}var xp={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function wm(n){if(Aw)throw new Error("");if(ks===null)return;ks.consumerOnSignalRead(n);let e=ks.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ks.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ks.producers,t!==void 0&&t.producer===n)){ks.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ks&&(!r||mJ(i,ks)))return;let o=Sm(ks),s={producer:n,consumer:ks,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ks.producersTail=s,e!==void 0?e.nextProducer=s:ks.producers=s,o&&s8(n,s)}function r8(){gD++}function Lw(n){if(!(Sm(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===gD)){if(!n.producerMustRecompute(n)&&!bm(n)){Nw(n);return}n.producerRecomputeValue(n),Nw(n)}}function mD(n){if(n.consumers===void 0)return;let e=Aw;Aw=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||gJ(r)}}finally{Aw=e}}function yD(){return ks?.consumerAllowSignalWrites!==!1}function gJ(n){n.dirty=!0,mD(n),n.consumerMarkedDirty?.(n)}function Nw(n){n.dirty=!1,n.lastCleanEpoch=gD}function wp(n){return n&&i8(n),un(n)}function i8(n){n.producersTail=void 0,n.recomputing=!0}function Em(n,e){un(e),n&&o8(n)}function o8(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Sm(n))do t=_D(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function bm(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Lw(t),r!==t.version))return!0}return!1}function Ep(n){if(Sm(n)){let e=n.producers;for(;e!==void 0;)e=_D(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function s8(n,e){let t=n.consumersTail,r=Sm(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)s8(i.producer,i)}function _D(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Sm(e)){let o=e.producers;for(;o!==void 0;)o=_D(o)}return t}function Sm(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function kw(n){pJ?.(n)}function mJ(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Ow(n,e){return Object.is(n,e)}function Fw(n,e){let t=Object.create(yJ);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Lw(t),wm(t),t.value===M_)throw t.error;return t.value};return r[ua]=t,kw(t),r}var Rw=Symbol("UNSET"),Mw=Symbol("COMPUTING"),M_=Symbol("ERRORED"),yJ=tn(dt({},xp),{value:Rw,dirty:!0,error:null,equal:Ow,kind:"computed",producerMustRecompute(n){return n.value===Rw||n.value===Mw},producerRecomputeValue(n){if(n.value===Mw)throw new Error("");let e=n.value;n.value=Mw;let t=wp(n),r,i=!1;try{r=n.computation(),un(null),i=e!==Rw&&e!==M_&&r!==M_&&n.equal(e,r)}catch(o){r=M_,n.error=o}finally{Em(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function _J(){throw new Error}var a8=_J;function l8(n){a8(n)}function vD(n){a8=n}var vJ=null;function xD(n,e){let t=Object.create(Bw);t.value=n,e!==void 0&&(t.equal=e);let r=()=>u8(t);return r[ua]=t,kw(t),[r,s=>Cm(t,s),s=>wD(t,s)]}function u8(n){return wm(n),n.value}function Cm(n,e){yD()||l8(n),n.equal(n.value,e)||(n.value=e,xJ(n))}function wD(n,e){yD()||l8(n),Cm(n,e(n.value))}var Bw=tn(dt({},xp),{equal:Ow,value:void 0,kind:"signal"});function xJ(n){n.version++,r8(),mD(n),vJ?.(n)}function Cn(n){return typeof n=="function"}function Im(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jw=Im(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function bp(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var dr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Cn(r))try{r()}catch(o){e=o instanceof jw?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{c8(o)}catch(s){e=e??[],s instanceof jw?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jw(e)}}add(e){var t;if(e&&e!==this)if(this.closed)c8(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&bp(t,e)}remove(e){let{_finalizers:t}=this;t&&bp(t,e),e instanceof n&&e._removeParent(this)}};dr.EMPTY=(()=>{let n=new dr;return n.closed=!0,n})();var ED=dr.EMPTY;function Uw(n){return n instanceof dr||n&&"closed"in n&&Cn(n.remove)&&Cn(n.add)&&Cn(n.unsubscribe)}function c8(n){Cn(n)?n():n.unsubscribe()}var Au={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Tm={setTimeout(n,e,...t){let{delegate:r}=Tm;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Tm;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Gw(n){Tm.setTimeout(()=>{let{onUnhandledError:e}=Au;if(e)e(n);else throw n})}function N_(){}var h8=bD("C",void 0,void 0);function f8(n){return bD("E",void 0,n)}function d8(n){return bD("N",n,void 0)}function bD(n,e,t){return{kind:n,value:e,error:t}}var Sp=null;function Dm(n){if(Au.useDeprecatedSynchronousErrorHandling){let e=!Sp;if(e&&(Sp={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Sp;if(Sp=null,t)throw r}}else n()}function p8(n){Au.useDeprecatedSynchronousErrorHandling&&Sp&&(Sp.errorThrown=!0,Sp.error=n)}var Cp=class extends dr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uw(e)&&e.add(this)):this.destination=bJ}static create(e,t,r){return new Am(e,t,r)}next(e){this.isStopped?CD(d8(e),this):this._next(e)}error(e){this.isStopped?CD(f8(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?CD(h8,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},wJ=Function.prototype.bind;function SD(n,e){return wJ.call(n,e)}var ID=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){zw(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){zw(r)}else zw(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){zw(t)}}},Am=class extends Cp{constructor(e,t,r){super();let i;if(Cn(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Au.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&SD(e.next,o),error:e.error&&SD(e.error,o),complete:e.complete&&SD(e.complete,o)}):i=e}this.destination=new ID(i)}};function zw(n){Au.useDeprecatedSynchronousErrorHandling?p8(n):Gw(n)}function EJ(n){throw n}function CD(n,e){let{onStoppedNotification:t}=Au;t&&Tm.setTimeout(()=>t(n,e))}var bJ={closed:!0,next:N_,error:EJ,complete:N_};var Rm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ca(n){return n}function TD(...n){return DD(n)}function DD(n){return n.length===0?ca:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Bn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=CJ(t)?t:new Am(t,r,i);return Dm(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=g8(r),new r((i,o)=>{let s=new Am({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Rm](){return this}pipe(...t){return DD(t)(this)}toPromise(t){return t=g8(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function g8(n){var e;return(e=n??Au.Promise)!==null&&e!==void 0?e:Promise}function SJ(n){return n&&Cn(n.next)&&Cn(n.error)&&Cn(n.complete)}function CJ(n){return n&&n instanceof Cp||SJ(n)&&Uw(n)}function AD(n){return Cn(n?.lift)}function jn(n){return e=>{if(AD(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Tn(n,e,t,r,i){return new RD(n,e,t,r,i)}var RD=class extends Cp{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Mm(){return jn((n,e)=>{let t=null;n._refCount++;let r=Tn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Nm=class extends Bn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,AD(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dr;let t=this.getSubject();e.add(this.source.subscribe(Tn(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dr.EMPTY)}return e}refCount(){return Mm()(this)}};var Pm={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Pm;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(o=>{t=void 0,n(o)});return new dr(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Pm;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Pm;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var m8=Im(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Jt=(()=>{class n extends Bn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Vw(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new m8}next(t){Dm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Dm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Dm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ED:(this.currentObservers=null,o.push(t),new dr(()=>{this.currentObservers=null,bp(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Bn;return t.source=this,t}}return n.create=(e,t)=>new Vw(e,t),n})(),Vw=class extends Jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ED}};var Oo=class extends Jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var MD={now(){return(MD.delegate||Date).now()},delegate:void 0};var Hw=class extends dr{constructor(e,t){super()}schedule(e,t=0){return this}};var P_={setInterval(n,e,...t){let{delegate:r}=P_;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=P_;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Lm=class extends Hw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return P_.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&P_.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,bp(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var km=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};km.now=MD.now;var Om=class extends km{constructor(e,t=km.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var fc=new Om(Lm),ND=fc;var qw=class extends Lm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Pm.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:o}=e;t!=null&&t===e._scheduled&&((i=o[o.length-1])===null||i===void 0?void 0:i.id)!==t&&(Pm.cancelAnimationFrame(t),e._scheduled=void 0)}};var Ww=class extends Om{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var $w=new Ww(qw);var Os=new Bn(n=>n.complete());function Yw(n){return n&&Cn(n.schedule)}function PD(n){return n[n.length-1]}function y8(n){return Cn(PD(n))?n.pop():void 0}function dc(n){return Yw(PD(n))?n.pop():void 0}function _8(n,e){return typeof PD(n)=="number"?n.pop():e}function x8(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(f){try{c(r.next(f))}catch(d){s(d)}}function l(f){try{c(r.throw(f))}catch(d){s(d)}}function c(f){f.done?o(f.value):i(f.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}function v8(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ip(n){return this instanceof Ip?(this.v=n,this):new Ip(n)}function w8(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){r[p]&&(i[p]=function(w){return new Promise(function(b,S){o.push([p,w,b,S])>1||l(p,w)})},_&&(i[p]=_(i[p])))}function l(p,_){try{c(r[p](_))}catch(w){y(o[0][3],w)}}function c(p){p.value instanceof Ip?Promise.resolve(p.value.v).then(f,d):y(o[0][2],p)}function f(p){l("next",p)}function d(p){l("throw",p)}function y(p,_){p(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}function E8(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof v8=="function"?v8(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Xw=n=>n&&typeof n.length=="number"&&typeof n!="function";function Zw(n){return Cn(n?.then)}function Kw(n){return Cn(n[Rm])}function Jw(n){return Symbol.asyncIterator&&Cn(n?.[Symbol.asyncIterator])}function Qw(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IJ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eE=IJ();function tE(n){return Cn(n?.[eE])}function nE(n){return w8(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ip(t.read());if(i)return yield Ip(void 0);yield yield Ip(r)}}finally{t.releaseLock()}})}function rE(n){return Cn(n?.getReader)}function mi(n){if(n instanceof Bn)return n;if(n!=null){if(Kw(n))return TJ(n);if(Xw(n))return DJ(n);if(Zw(n))return AJ(n);if(Jw(n))return b8(n);if(tE(n))return RJ(n);if(rE(n))return MJ(n)}throw Qw(n)}function TJ(n){return new Bn(e=>{let t=n[Rm]();if(Cn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function DJ(n){return new Bn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function AJ(n){return new Bn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Gw)})}function RJ(n){return new Bn(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function b8(n){return new Bn(e=>{NJ(n,e).catch(t=>e.error(t))})}function MJ(n){return b8(nE(n))}function NJ(n,e){var t,r,i,o;return x8(this,void 0,void 0,function*(){try{for(t=E8(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ra(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function iE(n,e=0){return jn((t,r)=>{t.subscribe(Tn(r,i=>Ra(r,n,()=>r.next(i),e),()=>Ra(r,n,()=>r.complete(),e),i=>Ra(r,n,()=>r.error(i),e)))})}function oE(n,e=0){return jn((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function S8(n,e){return mi(n).pipe(oE(e),iE(e))}function C8(n,e){return mi(n).pipe(oE(e),iE(e))}function I8(n,e){return new Bn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function T8(n,e){return new Bn(t=>{let r;return Ra(t,e,()=>{r=n[eE](),Ra(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Cn(r?.return)&&r.return()})}function sE(n,e){if(!n)throw new Error("Iterable cannot be null");return new Bn(t=>{Ra(t,e,()=>{let r=n[Symbol.asyncIterator]();Ra(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function D8(n,e){return sE(nE(n),e)}function A8(n,e){if(n!=null){if(Kw(n))return S8(n,e);if(Xw(n))return I8(n,e);if(Zw(n))return C8(n,e);if(Jw(n))return sE(n,e);if(tE(n))return T8(n,e);if(rE(n))return D8(n,e)}throw Qw(n)}function ji(n,e){return e?A8(n,e):mi(n)}function cn(...n){let e=dc(n);return ji(n,e)}function Fm(n,e){let t=Cn(n)?n:()=>n,r=i=>i.error(t());return new Bn(e?i=>e.schedule(r,0,i):r)}function aE(n){return!!n&&(n instanceof Bn||Cn(n.lift)&&Cn(n.subscribe))}var _h=Im(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function R8(n){return n instanceof Date&&!isNaN(n)}function or(n,e){return jn((t,r)=>{let i=0;t.subscribe(Tn(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:PJ}=Array;function LJ(n,e){return PJ(e)?n(...e):n(e)}function M8(n){return or(e=>LJ(n,e))}var{isArray:kJ}=Array,{getPrototypeOf:OJ,prototype:FJ,keys:BJ}=Object;function N8(n){if(n.length===1){let e=n[0];if(kJ(e))return{args:e,keys:null};if(jJ(e)){let t=BJ(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function jJ(n){return n&&typeof n=="object"&&OJ(n)===FJ}function P8(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lE(...n){let e=dc(n),t=y8(n),{args:r,keys:i}=N8(n);if(r.length===0)return ji([],e);let o=new Bn(UJ(r,e,i?s=>P8(i,s):ca));return t?o.pipe(M8(t)):o}function UJ(n,e,t=ca){return r=>{L8(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)L8(e,()=>{let c=ji(n[l],e),f=!1;c.subscribe(Tn(r,d=>{o[l]=d,f||(f=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function L8(n,e,t){n?Ra(t,n,e):e()}function k8(n,e,t,r,i,o,s,a){let l=[],c=0,f=0,d=!1,y=()=>{d&&!l.length&&!c&&e.complete()},p=w=>c<r?_(w):l.push(w),_=w=>{o&&e.next(w),c++;let b=!1;mi(t(w,f++)).subscribe(Tn(e,S=>{i?.(S),o?p(S):e.next(S)},()=>{b=!0},void 0,()=>{if(b)try{for(c--;l.length&&c<r;){let S=l.shift();s?Ra(e,s,()=>_(S)):_(S)}y()}catch(S){e.error(S)}}))};return n.subscribe(Tn(e,p,()=>{d=!0,y()})),()=>{a?.()}}function Fo(n,e,t=1/0){return Cn(e)?Fo((r,i)=>or((o,s)=>e(r,o,i,s))(mi(n(r,i))),t):(typeof e=="number"&&(t=e),jn((r,i)=>k8(r,i,n,t)))}function uE(n=1/0){return Fo(ca,n)}function O8(){return uE(1)}function Bm(...n){return O8()(ji(n,dc(n)))}function L_(n){return new Bn(e=>{mi(n()).subscribe(e)})}function jm(n=0,e,t=ND){let r=-1;return e!=null&&(Yw(e)?t=e:r=e),new Bn(i=>{let o=R8(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function LD(n=0,e=fc){return n<0&&(n=0),jm(n,n,e)}function cE(...n){let e=dc(n),t=_8(n,1/0),r=n;return r.length?r.length===1?mi(r[0]):uE(t)(ji(r,e)):Os}function Fs(n,e){return jn((t,r)=>{let i=0;t.subscribe(Tn(r,o=>n.call(e,o,i++)&&r.next(o)))})}function F8(n){return jn((e,t)=>{let r=!1,i=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,r){r=!1;let c=i;i=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Tn(t,c=>{r=!0,i=c,o||mi(n(c)).subscribe(o=Tn(t,a,l))},()=>{s=!0,(!r||!o||o.closed)&&t.complete()}))})}function hE(n,e=fc){return F8(()=>jm(n,e))}function jf(n){return jn((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Tn(t,void 0,void 0,s=>{o=mi(n(s,jf(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function B8(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Tn(s,f=>{let d=c++;l=a?n(l,f,d):(a=!0,f),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function Um(n,e){return Cn(e)?Fo(n,e,1):Fo(n,1)}function Uf(n){return jn((e,t)=>{let r=!1;e.subscribe(Tn(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ru(n){return n<=0?()=>Os:jn((e,t)=>{let r=0;e.subscribe(Tn(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function fE(n,e=ca){return n=n??GJ,jn((t,r)=>{let i,o=!0;t.subscribe(Tn(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function GJ(n,e){return n===e}function dE(n=zJ){return jn((e,t)=>{let r=!1;e.subscribe(Tn(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function zJ(){return new _h}function k_(n){return jn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vh(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Fs((i,o)=>n(i,o,r)):ca,Ru(1),t?Uf(e):dE(()=>new _h))}function Gm(n){return n<=0?()=>Os:jn((e,t)=>{let r=[];e.subscribe(Tn(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kD(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Fs((i,o)=>n(i,o,r)):ca,Gm(1),t?Uf(e):dE(()=>new _h))}function OD(n,e){return jn(B8(n,e,arguments.length>=2,!0))}function zm(...n){let e=dc(n);return jn((t,r)=>{(e?Bm(n,t,e):Bm(n,t)).subscribe(r)})}function cs(n,e){return jn((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Tn(r,l=>{i?.unsubscribe();let c=0,f=o++;mi(n(l,f)).subscribe(i=Tn(r,d=>r.next(e?e(l,d,f,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function xh(n){return jn((e,t)=>{mi(n).subscribe(Tn(t,()=>t.complete(),N_)),!t.closed&&e.subscribe(t)})}function fo(n,e,t){let r=Cn(n)||e||t?{next:n,error:e,complete:t}:n;return r?jn((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Tn(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ca}function j8(n,e){return jn((t,r)=>{let{leading:i=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,c=!1,f=()=>{l?.unsubscribe(),l=null,o&&(p(),c&&r.complete())},d=()=>{l=null,c&&r.complete()},y=_=>l=mi(n(_)).subscribe(Tn(r,f,d)),p=()=>{if(s){s=!1;let _=a;a=null,r.next(_),!c&&y(_)}};t.subscribe(Tn(r,_=>{s=!0,a=_,!(l&&!l.closed)&&(i?p():y(_))},()=>{c=!0,!(o&&s&&l&&!l.closed)&&r.complete()}))})}function FD(n,e=fc,t){let r=jm(n,e);return j8(()=>r,t)}function U8(n){let e=un(null);try{return n()}finally{un(e)}}var G8=tn(dt({},xp),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function z8(n){if(n.dirty=!1,n.version>0&&!bm(n))return;n.version++;let e=wp(n);try{n.cleanup(),n.fn()}finally{Em(n,e)}}var yE="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Pt=class extends Error{code;constructor(e,t){super(Mp(e,t)),this.code=e}};function VJ(n){return`NG0${Math.abs(n)}`}function Mp(n,e){return`${VJ(n)}${e?": "+e:""}`}var Np=globalThis;function Pr(n){for(let e in n)if(n[e]===Pr)return e;throw Error("")}function Eh(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Eh).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function YD(n,e){return n?e?`${n} ${e}`:n:e||""}var HJ=Pr({__forward_ref__:Pr});function U_(n){return n.__forward_ref__=U_,n.toString=function(){return Eh(this())},n}function hs(n){return XD(n)?n():n}function XD(n){return typeof n=="function"&&n.hasOwnProperty(HJ)&&n.__forward_ref__===U_}function yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bh(n){return{providers:n.providers||[],imports:n.imports||[]}}function G_(n){return qJ(n,_E)}function ZD(n){return G_(n)!==null}function qJ(n,e){return n.hasOwnProperty(e)&&n[e]||null}function WJ(n){let e=n?.[_E]??null;return e||null}function jD(n){return n&&n.hasOwnProperty(gE)?n[gE]:null}var _E=Pr({\u0275prov:Pr}),gE=Pr({\u0275inj:Pr}),Bt=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=yt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KD(n){return n&&!!n.\u0275providers}var JD=Pr({\u0275cmp:Pr}),QD=Pr({\u0275dir:Pr}),eA=Pr({\u0275pipe:Pr}),tA=Pr({\u0275mod:Pr}),F_=Pr({\u0275fac:Pr}),Pp=Pr({__NG_ELEMENT_ID__:Pr}),V8=Pr({__NG_ENV_ID__:Pr});function vE(n){return typeof n=="string"?n:n==null?"":String(n)}function q8(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vE(n)}var W8=Pr({ngErrorCode:Pr}),$J=Pr({ngErrorMessage:Pr}),YJ=Pr({ngTokenPath:Pr});function nA(n,e){return $8("",-200,e)}function xE(n,e){throw new Pt(-201,!1)}function $8(n,e,t){let r=new Pt(e,n);return r[W8]=e,r[$J]=n,t&&(r[YJ]=t),r}function XJ(n){return n[W8]}var UD;function Y8(){return UD}function ha(n){let e=UD;return UD=n,e}function rA(n,e,t){let r=G_(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;xE(n,"Injector")}var ZJ={},Tp=ZJ,KJ="__NG_DI_FLAG__",GD=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Dp(t)||0;try{return this.injector.get(e,r&8?null:Tp,r)}catch(i){if(xm(i))return i;throw i}}};function JJ(n,e=0){let t=Dw();if(t===void 0)throw new Pt(-203,!1);if(t===null)return rA(n,void 0,e);{let r=QJ(e),i=t.retrieve(n,r);if(xm(i)){if(r.optional)return null;throw i}return i}}function Un(n,e=0){return(Y8()||JJ)(hs(n),e)}function Me(n,e){return Un(n,Dp(e))}function Dp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function QJ(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function zD(n){let e=[];for(let t=0;t<n.length;t++){let r=hs(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Pt(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=eQ(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(Un(i,o))}else e.push(Un(r))}return e}function eQ(n){return n[KJ]}function Gf(n,e){let t=n.hasOwnProperty(F_);return t?n[F_]:null}function X8(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Z8(n){return n.flat(Number.POSITIVE_INFINITY)}function wE(n,e){n.forEach(t=>Array.isArray(t)?wE(t,e):e(t))}function iA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function z_(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function K8(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function J8(n,e,t){let r=Hm(n,e);return r>=0?n[r|1]=t:(r=~r,K8(n,r,e,t)),r}function EE(n,e){let t=Hm(n,e);if(t>=0)return n[t|1]}function Hm(n,e){return tQ(n,e,1)}function tQ(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Lp={},Ul=[],Sh=new Bt(""),oA=new Bt("",-1),sA=new Bt(""),B_=class{get(e,t=Tp){if(t===Tp){let i=$8("",-201);throw i.name="\u0275NotFound",i}return t}};function aA(n){return n[tA]||null}function Ch(n){return n[JD]||null}function lA(n){return n[QD]||null}function Q8(n){return n[eA]||null}function kp(n){return{\u0275providers:n}}function e6(n){return kp([{provide:Sh,multi:!0,useValue:n}])}function t6(...n){return{\u0275providers:uA(!0,n),\u0275fromNgModule:!0}}function uA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return wE(e,s=>{let a=s;mE(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&n6(i,o),t}function n6(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];cA(i,o=>{e(o,r)})}}function mE(n,e,t,r){if(n=hs(n),!n)return!1;let i=null,o=jD(n),s=!o&&Ch(n);if(!o&&!s){let l=n.ngModule;if(o=jD(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)mE(c,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{wE(o.imports,f=>{mE(f,e,t,r)&&(c||=[],c.push(f))})}finally{}c!==void 0&&n6(c,e)}if(!a){let c=Gf(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ul},i),e({provide:sA,useValue:i,multi:!0},i),e({provide:Sh,useValue:()=>Un(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=n;cA(l,f=>{e(f,c)})}}else return!1;return i!==n&&n.providers!==void 0}function cA(n,e){for(let t of n)KD(t)&&(t=t.\u0275providers),Array.isArray(t)?cA(t,e):e(t)}var nQ=Pr({provide:String,useValue:Pr});function r6(n){return n!==null&&typeof n=="object"&&nQ in n}function rQ(n){return!!(n&&n.useExisting)}function iQ(n){return!!(n&&n.useFactory)}function Ap(n){return typeof n=="function"}function i6(n){return!!n.useClass}var V_=new Bt(""),pE={},H8={},BD;function qm(){return BD===void 0&&(BD=new B_),BD}var Ii=class{},Rp=class extends Ii{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,HD(e,s=>this.processProvider(s)),this.records.set(oA,Vm(void 0,this)),i.has("environment")&&this.records.set(Ii,Vm(void 0,this));let o=this.records.get(V_);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(sA,Ul,{self:!0}))}retrieve(e,t){let r=Dp(t)||0;try{return this.get(e,Tp,r)}catch(i){if(xm(i))return i;throw i}}destroy(){O_(this),this._destroyed=!0;let e=un(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),un(e)}}onDestroy(e){return O_(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){O_(this);let t=hc(this),r=ha(void 0),i;try{return e()}finally{hc(t),ha(r)}}get(e,t=Tp,r){if(O_(this),e.hasOwnProperty(V8))return e[V8](this);let i=Dp(r),o,s=hc(this),a=ha(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let f=uQ(e)&&G_(e);f&&this.injectableDefInScope(f)?c=Vm(VD(e),pE):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?qm():this.parent;return t=i&8&&t===Tp?null:t,l.get(e,t)}catch(l){let c=XJ(l);throw c===-200||c===-201?new Pt(c,null):l}finally{ha(a),hc(s)}}resolveInjectorInitializers(){let e=un(null),t=hc(this),r=ha(void 0),i;try{let o=this.get(Sh,Ul,{self:!0});for(let s of o)s()}finally{hc(t),ha(r),un(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Eh(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=hs(e);let t=Ap(e)?e:hs(e&&e.provide),r=sQ(e);if(!Ap(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vm(void 0,pE,!0),i.factory=()=>zD(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=un(null);try{if(t.value===H8)throw nA(Eh(e));return t.value===pE&&(t.value=H8,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&lQ(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{un(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=hs(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function VD(n){let e=G_(n),t=e!==null?e.factory:Gf(n);if(t!==null)return t;if(n instanceof Bt)throw new Pt(204,!1);if(n instanceof Function)return oQ(n);throw new Pt(204,!1)}function oQ(n){if(n.length>0)throw new Pt(204,!1);let t=WJ(n);return t!==null?()=>t.factory(n):()=>new n}function sQ(n){if(r6(n))return Vm(void 0,n.useValue);{let e=hA(n);return Vm(e,pE)}}function hA(n,e,t){let r;if(Ap(n)){let i=hs(n);return Gf(i)||VD(i)}else if(r6(n))r=()=>hs(n.useValue);else if(iQ(n))r=()=>n.useFactory(...zD(n.deps||[]));else if(rQ(n))r=(i,o)=>Un(hs(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=hs(n&&(n.useClass||n.provide));if(aQ(n))r=()=>new i(...zD(n.deps));else return Gf(i)||VD(i)}return r}function O_(n){if(n.destroyed)throw new Pt(205,!1)}function Vm(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aQ(n){return!!n.deps}function lQ(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function uQ(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function HD(n,e){for(let t of n)Array.isArray(t)?HD(t,e):t&&KD(t)?HD(t.\u0275providers,e):e(t)}function fa(n,e){let t;n instanceof Rp?(O_(n),t=n):t=new GD(n);let r,i=hc(t),o=ha(void 0);try{return e()}finally{hc(i),ha(o)}}function o6(){return Y8()!==void 0||Dw()!=null}var Mu=0,Qt=1,hn=2,Bo=3,zl=4,Vl=5,Wm=6,$m=7,Xi=8,Ih=9,gc=10,Zi=11,Ym=12,fA=13,Op=14,ul=15,Vf=16,Fp=17,mc=18,H_=19,dA=20,wh=21,bE=22,Th=23,cl=24,Bp=25,jp=26,Ki=27,s6=1,pA=6,Hf=7,q_=8,Up=9,Ui=10;function yc(n){return Array.isArray(n)&&typeof n[s6]=="object"}function Nu(n){return Array.isArray(n)&&n[s6]===!0}function gA(n){return(n.flags&4)!==0}function qf(n){return n.componentOffset>-1}function W_(n){return(n.flags&1)===1}function Wf(n){return!!n.template}function Xm(n){return(n[hn]&512)!==0}function Gp(n){return(n[hn]&256)===256}var mA="svg",a6="math";function Hl(n){for(;Array.isArray(n);)n=n[Mu];return n}function yA(n,e){return Hl(e[n])}function _c(n,e){return Hl(e[n.index])}function $_(n,e){return n.data[e]}function _A(n,e){return n[e]}function vA(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ql(n,e){let t=e[n];return yc(t)?t:t[Mu]}function l6(n){return(n[hn]&4)===4}function SE(n){return(n[hn]&128)===128}function u6(n){return Nu(n[Bo])}function Wl(n,e){return e==null?null:n[e]}function xA(n){n[Fp]=0}function wA(n){n[hn]&1024||(n[hn]|=1024,SE(n)&&$f(n))}function c6(n,e){for(;n>0;)e=e[Op],n--;return e}function Y_(n){return!!(n[hn]&9216||n[cl]?.dirty)}function CE(n){n[gc].changeDetectionScheduler?.notify(8),n[hn]&64&&(n[hn]|=1024),Y_(n)&&$f(n)}function $f(n){n[gc].changeDetectionScheduler?.notify(0);let e=zf(n);for(;e!==null&&!(e[hn]&8192||(e[hn]|=8192,!SE(e)));)e=zf(e)}function EA(n,e){if(Gp(n))throw new Pt(911,!1);n[wh]===null&&(n[wh]=[]),n[wh].push(e)}function h6(n,e){if(n[wh]===null)return;let t=n[wh].indexOf(e);t!==-1&&n[wh].splice(t,1)}function zf(n){let e=n[Bo];return Nu(e)?e[Bo]:e}function bA(n){return n[$m]??=[]}function SA(n){return n.cleanup??=[]}function f6(n,e,t,r){let i=bA(e);i.push(t),n.firstCreatePass&&SA(n).push(r,i.length-1)}var kn={lFrame:T6(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qD=!1;function d6(){return kn.lFrame.elementDepthCount}function p6(){kn.lFrame.elementDepthCount++}function CA(){kn.lFrame.elementDepthCount--}function IA(){return kn.bindingsEnabled}function g6(){return kn.skipHydrationRootTNode!==null}function TA(n){return kn.skipHydrationRootTNode===n}function DA(){kn.skipHydrationRootTNode=null}function er(){return kn.lFrame.lView}function fs(){return kn.lFrame.tView}function tr(n){return kn.lFrame.contextLView=n,n[Xi]}function nr(n){return kn.lFrame.contextLView=null,n}function Bs(){let n=AA();for(;n!==null&&n.type===64;)n=n.parent;return n}function AA(){return kn.lFrame.currentTNode}function m6(){let n=kn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Zm(n,e){let t=kn.lFrame;t.currentTNode=n,t.isParent=e}function RA(){return kn.lFrame.isParent}function y6(){kn.lFrame.isParent=!1}function _6(){return kn.lFrame.contextLView}function MA(){return qD}function Km(n){let e=qD;return qD=n,e}function v6(){let n=kn.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function x6(n){return kn.lFrame.bindingIndex=n}function X_(){return kn.lFrame.bindingIndex++}function w6(n){let e=kn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function E6(){return kn.lFrame.inI18n}function b6(n,e){let t=kn.lFrame;t.bindingIndex=t.bindingRootIndex=n,IE(e)}function S6(){return kn.lFrame.currentDirectiveIndex}function IE(n){kn.lFrame.currentDirectiveIndex=n}function C6(n){let e=kn.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function NA(){return kn.lFrame.currentQueryIndex}function TE(n){kn.lFrame.currentQueryIndex=n}function cQ(n){let e=n[Qt];return e.type===2?e.declTNode:e.type===1?n[Vl]:null}function PA(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=cQ(o),i===null||(o=o[Op],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=kn.lFrame=I6();return r.currentTNode=e,r.lView=n,!0}function DE(n){let e=I6(),t=n[Qt];kn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function I6(){let n=kn.lFrame,e=n===null?null:n.child;return e===null?T6(n):e}function T6(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function D6(){let n=kn.lFrame;return kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var LA=D6;function AE(){let n=D6();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function A6(n){return(kn.lFrame.contextLView=c6(n,kn.lFrame.contextLView))[Xi]}function Yf(){return kn.lFrame.selectedIndex}function Xf(n){kn.lFrame.selectedIndex=n}function R6(){let n=kn.lFrame;return $_(n.tView,n.selectedIndex)}function yr(){kn.lFrame.currentNamespace=mA}function po(){hQ()}function hQ(){kn.lFrame.currentNamespace=null}function M6(){return kn.lFrame.currentNamespace}var N6=!0;function RE(){return N6}function ME(n){N6=n}function WD(n,e=null,t=null,r){let i=kA(n,e,t,r);return i.resolveInjectorInitializers(),i}function kA(n,e=null,t=null,r,i=new Set){let o=[t||Ul,t6(n)];return r=r||(typeof n=="object"?void 0:Eh(n)),new Rp(o,e||qm(),r||null,i)}var yi=class n{static THROW_IF_NOT_FOUND=Tp;static NULL=new B_;static create(e,t){if(Array.isArray(e))return WD({name:""},t,e,"");{let r=e.name??"";return WD({name:r},e.parent,e.providers,r)}}static \u0275prov=yt({token:n,providedIn:"any",factory:()=>Un(oA)});static __NG_ELEMENT_ID__=-1},_r=new Bt(""),Pu=(()=>{class n{static __NG_ELEMENT_ID__=fQ;static __NG_ENV_ID__=t=>t}return n})(),j_=class extends Pu{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Gp(this._lView)}onDestroy(e){let t=this._lView;return EA(t,e),()=>h6(t,e)}};function fQ(){return new j_(er())}var Gl=class{_console=console;handleError(e){this._console.error("ERROR",e)}},hl=new Bt("",{providedIn:"root",factory:()=>{let n=Me(Ii),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Gl),e.handleError(t))}}}),P6={provide:Sh,useValue:()=>void Me(Gl),multi:!0},dQ=new Bt("",{providedIn:"root",factory:()=>{let n=Me(_r).defaultView;if(!n)return;let e=Me(hl),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),Me(Pu).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function OA(){return kp([e6(()=>void Me(dQ))])}function Gn(n,e){let[t,r,i]=xD(n,e?.equal),o=t,s=o[ua];return o.set=r,o.update=i,o.asReadonly=FA.bind(o),o}function FA(){let n=this[ua];if(n.readonlyFn===void 0){let e=()=>this();e[ua]=n,n.readonlyFn=e}return n.readonlyFn}var Jm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=pQ}return n})();function pQ(){return new Jm(er(),Bs())}var pc=class{},Z_=new Bt("",{providedIn:"root",factory:()=>!1});var BA=new Bt(""),jA=new Bt(""),Dh=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Oo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Bn(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})();function zp(...n){}var K_=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new $D})}return n})(),$D=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function sv(n){return{toString:n}.toString()}function wQ(n){return typeof n=="function"}var jE=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function h7(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Kf=(()=>{let n=()=>f7;return n.ngInherit=!0,n})();function f7(n){return n.type.prototype.ngOnChanges&&(n.setInput=bQ),EQ}function EQ(){let n=p7(this),e=n?.current;if(e){let t=n.previous;if(t===Lp)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function bQ(n,e,t,r,i){let o=this.declaredInputs[r],s=p7(n)||SQ(n,{previous:Lp,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new jE(c&&c.currentValue,t,l===Lp),h7(n,e,i,t)}var d7="__ngSimpleChanges__";function p7(n){return n[d7]||null}function SQ(n,e){return n[d7]=e}var L6=[];var zr=function(n,e=null,t){for(let r=0;r<L6.length;r++){let i=L6[r];i(n,e,t)}};function CQ(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=f7(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function g7(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function LE(n,e,t){m7(n,e,3,t)}function kE(n,e,t,r){(n[hn]&3)===t&&m7(n,e,t,r)}function UA(n,e){let t=n[hn];(t&3)===e&&(t&=16383,t+=1,n[hn]=t)}function m7(n,e,t,r){let i=r!==void 0?n[Fp]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(n[Fp]+=65536),(a<o||o==-1)&&(IQ(n,t,e,l),n[Fp]=(n[Fp]&4294901760)+l+2),l++}function k6(n,e){zr(4,n,e);let t=un(null);try{e.call(n)}finally{un(t),zr(5,n,e)}}function IQ(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[hn]>>14<n[Fp]>>16&&(n[hn]&3)===e&&(n[hn]+=16384,k6(a,o)):k6(a,o)}var e0=-1,Hp=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function TQ(n){return(n.flags&8)!==0}function DQ(n){return(n.flags&16)!==0}function AQ(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];MQ(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function RQ(n){return n===3||n===4||n===6}function MQ(n){return n.charCodeAt(0)===64}function s2(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?O6(n,t,i,null,e[++r]):O6(n,t,i,null,null))}}return n}function O6(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function y7(n){return n!==e0}function UE(n){return n&32767}function NQ(n){return n>>16}function GE(n,e){let t=NQ(n),r=e;for(;t>0;)r=r[Op],t--;return r}var ZA=!0;function zE(n){let e=ZA;return ZA=n,e}var PQ=256,_7=PQ-1,v7=5,LQ=0,vc={};function kQ(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Pp)&&(r=t[Pp]),r==null&&(r=t[Pp]=LQ++);let i=r&_7,o=1<<i;e.data[n+(i>>v7)]|=o}function VE(n,e){let t=x7(n,e);if(t!==-1)return t;let r=e[Qt];r.firstCreatePass&&(n.injectorIndex=e.length,GA(r.data,n),GA(e,null),GA(r.blueprint,null));let i=TR(n,e),o=n.injectorIndex;if(y7(i)){let s=UE(i),a=GE(i,e),l=a[Qt].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function GA(n,e){n.push(0,0,0,0,0,0,0,0,e)}function x7(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function TR(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=C7(i),r===null)return e0;if(t++,i=i[Op],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return e0}function KA(n,e,t){kQ(n,e,t)}function w7(n,e,t){if(t&8||n!==void 0)return n;xE(e,"NodeInjector")}function E7(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ih],o=ha(void 0);try{return i?i.get(e,r,t&8):rA(e,r,t&8)}finally{ha(o)}}return w7(r,e,t)}function b7(n,e,t,r=0,i){if(n!==null){if(e[hn]&2048&&!(r&2)){let s=jQ(n,e,t,r,vc);if(s!==vc)return s}let o=S7(n,e,t,r,vc);if(o!==vc)return o}return E7(e,t,r,i)}function S7(n,e,t,r,i){let o=FQ(t);if(typeof o=="function"){if(!PA(e,n,r))return r&1?w7(i,t,r):E7(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))xE(t);else return s}finally{LA()}}else if(typeof o=="number"){let s=null,a=x7(n,e),l=e0,c=r&1?e[ul][Vl]:null;for((a===-1||r&4)&&(l=a===-1?TR(n,e):e[a+8],l===e0||!B6(r,!1)?a=-1:(s=e[Qt],a=UE(l),e=GE(l,e)));a!==-1;){let f=e[Qt];if(F6(o,a,f.data)){let d=OQ(a,e,t,s,r,c);if(d!==vc)return d}l=e[a+8],l!==e0&&B6(r,e[Qt].data[a+8]===c)&&F6(o,a,e)?(s=f,a=UE(l),e=GE(l,e)):a=-1}}return i}function OQ(n,e,t,r,i,o){let s=e[Qt],a=s.data[n+8],l=r==null?qf(a)&&ZA:r!=s&&(a.type&3)!==0,c=i&1&&o===a,f=OE(a,s,t,l,c);return f!==null?ev(e,s,f,a,i):vc}function OE(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,f=o>>20,d=r?a:a+f,y=i?a+f:c;for(let p=d;p<y;p++){let _=s[p];if(p<l&&t===_||p>=l&&_.type===t)return p}if(i){let p=s[l];if(p&&Wf(p)&&p.type===t)return l}return null}function ev(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Hp){let a=o;if(a.resolving){let p=q8(s[t]);throw nA(p)}let l=zE(a.canSeeViewProviders);a.resolving=!0;let c=s[t].type||s[t],f,d=a.injectImpl?ha(a.injectImpl):null,y=PA(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&CQ(t,s[t],e)}finally{d!==null&&ha(d),zE(l),a.resolving=!1,LA()}}return o}function FQ(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Pp)?n[Pp]:void 0;return typeof e=="number"?e>=0?e&_7:BQ:e}function F6(n,e,t){let r=1<<n;return!!(t[e+(n>>v7)]&r)}function B6(n,e){return!(n&2)&&!(n&1&&e)}var Vp=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return b7(this._tNode,this._lView,e,Dp(r),t)}};function BQ(){return new Vp(Bs(),er())}function Xp(n){return sv(()=>{let e=n.prototype.constructor,t=e[F_]||JA(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[F_]||JA(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function JA(n){return XD(n)?()=>{let e=JA(hs(n));return e&&e()}:Gf(n)}function jQ(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[hn]&2048&&!Xm(s);){let a=S7(o,s,t,r|2,vc);if(a!==vc)return a;let l=o.parent;if(!l){let c=s[dA];if(c){let f=c.get(t,vc,r);if(f!==vc)return f}l=C7(s),s=s[Op]}o=l}return i}function C7(n){let e=n[Qt],t=e.type;return t===2?e.declTNode:t===1?n[Vl]:null}function UQ(){return r0(Bs(),er())}function r0(n,e){return new ni(_c(n,e))}var ni=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=UQ}return n})();function GQ(n){return n instanceof ni?n.nativeElement:n}function zQ(){return this._results[Symbol.iterator]()}var HE=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Jt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Z8(e);(this._changesDetected=!X8(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zQ};function I7(n){return(n.flags&128)===128}var DR=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(DR||{}),T7=new Map,VQ=0;function HQ(){return VQ++}function qQ(n){T7.set(n[H_],n)}function QA(n){T7.delete(n[H_])}var j6="__ngContext__";function t0(n,e){yc(e)?(n[j6]=e[H_],qQ(e)):n[j6]=e}function D7(n){return R7(n[Ym])}function A7(n){return R7(n[zl])}function R7(n){for(;n!==null&&!Nu(n);)n=n[zl];return n}var eR;function AR(n){eR=n}function M7(){if(eR!==void 0)return eR;if(typeof document<"u")return document;throw new Pt(210,!1)}var i0=new Bt("",{providedIn:"root",factory:()=>WQ}),WQ="ng",a2=new Bt(""),Zp=new Bt("",{providedIn:"platform",factory:()=>"unknown"});var RR=new Bt(""),l2=new Bt("",{providedIn:"root",factory:()=>M7().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $Q="h",YQ="b";var N7="r";var P7="di";var L7=!1,k7=new Bt("",{providedIn:"root",factory:()=>L7});var XQ=(n,e,t,r)=>{};function ZQ(n,e,t,r){XQ(n,e,t,r)}function MR(n){return(n.flags&32)===32}var KQ=()=>null;function O7(n,e,t=!1){return KQ(n,e,t)}function F7(n,e){let t=n.contentQueries;if(t!==null){let r=un(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];TE(o),a.contentQueries(2,e[s],s)}}}finally{un(r)}}}function tR(n,e,t){TE(0);let r=un(null);try{e(n,t)}finally{un(r)}}function B7(n,e,t){if(gA(e)){let r=un(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{un(r)}}}var Ah=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Ah||{});var qE=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yE})`}};function NR(n){return n instanceof qE?n.changingThisBreaksApplicationSecurity:n}function j7(n,e){let t=U7(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yE})`)}return t===e}function U7(n){return n instanceof qE&&n.getTypeName()||null}var JQ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function G7(n){return n=String(n),n.match(JQ)?n:"unsafe:"+n}function QQ(n,e){return n.createText(e)}function eee(n,e,t){n.setValue(e,t)}function z7(n,e,t){return n.createElement(e,t)}function WE(n,e,t,r,i){n.insertBefore(e,t,r,i)}function V7(n,e,t){n.appendChild(e,t)}function U6(n,e,t,r,i){r!==null?WE(n,e,t,r,i):V7(n,e,t)}function H7(n,e,t,r){n.removeChild(null,e,t,r)}function tee(n,e,t){n.setAttribute(e,"style",t)}function nee(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function q7(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&AQ(n,e,r),i!==null&&nee(n,e,i),o!==null&&tee(n,e,o)}var PR=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(PR||{});function LR(n){let e=ree();return e?e.sanitize(PR.URL,n)||"":j7(n,"URL")?NR(n):G7(vE(n))}function ree(){let n=er();return n&&n[gc].sanitizer}function Mh(n){return n.ownerDocument}function W7(n){return n instanceof Function?n():n}function iee(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var $7="ng-template";function oee(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&iee(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(kR(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function kR(n){return n.type===4&&n.value!==$7}function see(n,e,t){let r=n.type===4&&!t?$7:n.value;return e===r}function aee(n,e,t){let r=4,i=n.attrs,o=i!==null?cee(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Lu(r)&&!Lu(l))return!1;if(s&&Lu(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!see(n,l,t)||l===""&&e.length===1){if(Lu(r))return!1;s=!0}}else if(r&8){if(i===null||!oee(n,i,l,t)){if(Lu(r))return!1;s=!0}}else{let c=e[++a],f=lee(l,i,kR(n),t);if(f===-1){if(Lu(r))return!1;s=!0;continue}if(c!==""){let d;if(f>o?d="":d=i[f+1].toLowerCase(),r&2&&c!==d){if(Lu(r))return!1;s=!0}}}}return Lu(r)||s}function Lu(n){return(n&1)===0}function lee(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return hee(e,n)}function uee(n,e,t=!1){for(let r=0;r<e.length;r++)if(aee(n,e[r],t))return!0;return!1}function cee(n){for(let e=0;e<n.length;e++){let t=n[e];if(RQ(t))return e}return n.length}function hee(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function G6(n,e){return n?":not("+e.trim()+")":e}function fee(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Lu(s)&&(e+=G6(o,i),i=""),r=s,o=o||!Lu(r);t++}return i!==""&&(e+=G6(o,i)),e}function dee(n){return n.map(fee).join(",")}function pee(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Lu(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wc={};function OR(n,e,t,r,i,o,s,a,l,c,f){let d=Ki+r,y=d+i,p=gee(d,y),_=typeof c=="function"?c():c;return p[Qt]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:f}}function gee(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wc);return t}function mee(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=OR(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function FR(n,e,t,r,i,o,s,a,l,c,f){let d=e.blueprint.slice();return d[Mu]=i,d[hn]=r|4|128|8|64|1024,(c!==null||n&&n[hn]&2048)&&(d[hn]|=2048),xA(d),d[Bo]=d[Op]=n,d[Xi]=t,d[gc]=s||n&&n[gc],d[Zi]=a||n&&n[Zi],d[Ih]=l||n&&n[Ih]||null,d[Vl]=o,d[H_]=HQ(),d[Wm]=f,d[dA]=c,d[ul]=e.type==2?n[ul]:d,d}function yee(n,e,t){let r=_c(e,n),i=mee(t),o=n[gc].rendererFactory,s=BR(n,FR(n,i,null,Y7(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function Y7(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function X7(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function BR(n,e){return n[Ym]?n[fA][zl]=e:n[Ym]=e,n[fA]=e,e}function Xt(n=1){Z7(fs(),er(),Yf()+n,!1)}function Z7(n,e,t,r){if(!r)if((e[hn]&3)===3){let o=n.preOrderCheckHooks;o!==null&&LE(e,o,t)}else{let o=n.preOrderHooks;o!==null&&kE(e,o,0,t)}Xf(t)}var u2=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(u2||{});function nR(n,e,t,r){let i=un(null);try{let[o,s,a]=n.inputs[t],l=null;(s&u2.SignalBased)!==0&&(l=e[o][ua]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):h7(e,l,o,r)}finally{un(i)}}var xc=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(xc||{}),_ee;function jR(n,e){return _ee(n,e)}var qp=new Set,c2=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(c2||{}),Kp=new Bt(""),z6=new Set;function Nh(n){z6.has(n)||(z6.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var K7=!1,rR=class extends Jt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,o6()&&(this.destroyRef=Me(Pu,{optional:!0})??void 0,this.pendingTasks=Me(Dh,{optional:!0})??void 0)}emit(e){let t=un(null);try{super.next(e)}finally{un(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof dr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},li=rR;function J7(n){let e,t;function r(){n=zp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function V6(n){return queueMicrotask(()=>n()),()=>{n=zp}}var UR="isAngularZone",$E=UR+"_ID",vee=0,rr=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new li(!1);onMicrotaskEmpty=new li(!1);onStable=new li(!1);onError=new li(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=K7}=e;if(typeof Zone>"u")throw new Pt(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Eee(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(UR)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Pt(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Pt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,xee,zp,zp);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},xee={};function GR(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wee(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){J7(()=>{n.callbackScheduled=!1,iR(n),n.isCheckStableRunning=!0,GR(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),iR(n)}function Eee(n){let e=()=>{wee(n)},t=vee++;n._inner=n._inner.fork({name:"angular",properties:{[UR]:!0,[$E]:t,[$E+t]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(bee(l))return r.invokeTask(o,s,a,l);try{return H6(n),r.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),q6(n)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return H6(n),r.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!See(l)&&e(),q6(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,iR(n),GR(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function iR(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function H6(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function q6(n){n._nesting--,GR(n)}var YE=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new li;onMicrotaskEmpty=new li;onStable=new li;onError=new li;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function bee(n){return Q7(n,"__ignore_ng_zone__")}function See(n){return Q7(n,"__scheduler_tick__")}function Q7(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zR=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),eB=[0,1,2,3],tB=(()=>{class n{ngZone=Me(rr);scheduler=Me(pc);errorHandler=Me(Gl,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Me(Kp,{optional:!0})}execute(){let t=this.sequences.size>0;t&&zr(16),this.executing=!0;for(let r of eB)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&zr(17)}register(t){let{view:r}=t;r!==void 0?((r[Bp]??=[]).push(t),$f(r),r[hn]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(c2.AFTER_NEXT_RENDER,t):t()}static \u0275prov=yt({token:n,providedIn:"root",factory:()=>new n})}return n})(),XE=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Bp];e&&(this.view[Bp]=e.filter(t=>t!==this))}};function Jf(n,e){let t=e?.injector??Me(yi);return Nh("NgAfterNextRender"),Iee(n,t,e,!0)}function Cee(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Iee(n,e,t,r){let i=e.get(zR);i.impl??=e.get(tB);let o=e.get(Kp,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(Pu):null,a=e.get(Jm,null,{optional:!0}),l=new XE(i.impl,Cee(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var nB=new Bt("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function rB(n,e,t){let r=n.get(nB);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function Tee(n,e){let t=n.get(nB);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function Dee(n,e){for(let[t,r]of e)rB(n,r.animateFns)}function W6(n,e,t,r){let i=n?.[jp]?.enter;e!==null&&i&&i.has(t.index)&&Dee(r,i)}function Qm(n,e,t,r,i,o,s,a){if(i!=null){let l,c=!1;Nu(i)?l=i:yc(i)&&(c=!0,i=i[Mu]);let f=Hl(i);n===0&&r!==null?(W6(a,r,o,t),s==null?V7(e,r,f):WE(e,r,f,s||null,!0)):n===1&&r!==null?(W6(a,r,o,t),WE(e,r,f,s||null,!0)):n===2?$6(a,o,t,d=>{H7(e,f,c,d)}):n===3&&$6(a,o,t,()=>{e.destroyNode(f)}),l!=null&&Gee(e,n,t,l,o,r,s)}}function Aee(n,e){iB(n,e),e[Mu]=null,e[Vl]=null}function Ree(n,e,t,r,i,o){r[Mu]=i,r[Vl]=e,f2(n,r,t,1,i,o)}function iB(n,e){e[gc].changeDetectionScheduler?.notify(9),f2(n,e,e[Zi],2,null,null)}function Mee(n){let e=n[Ym];if(!e)return zA(n[Qt],n);for(;e;){let t=null;if(yc(e))t=e[Ym];else{let r=e[Ui];r&&(t=r)}if(!t){for(;e&&!e[zl]&&e!==n;)yc(e)&&zA(e[Qt],e),e=e[Bo];e===null&&(e=n),yc(e)&&zA(e[Qt],e),t=e&&e[zl]}e=t}}function VR(n,e){let t=n[Up],r=t.indexOf(e);t.splice(r,1)}function h2(n,e){if(Gp(e))return;let t=e[Zi];t.destroyNode&&f2(n,e,t,3,null,null),Mee(e)}function zA(n,e){if(Gp(e))return;let t=un(null);try{e[hn]&=-129,e[hn]|=256,e[cl]&&Ep(e[cl]),Lee(n,e),Pee(n,e),e[Qt].type===1&&e[Zi].destroy();let r=e[Vf];if(r!==null&&Nu(e[Bo])){r!==e[Bo]&&VR(r,e);let i=e[mc];i!==null&&i.detachView(n)}QA(e)}finally{un(t)}}function $6(n,e,t,r){let i=n?.[jp];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&qp.add(n),rB(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:f}=c();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Nee(n,r)}else n&&qp.delete(n),r(!1)},i)}function Nee(n,e){let t=n[jp]?.running;if(t){t.then(()=>{n[jp].running=void 0,qp.delete(n),e(!0)});return}e(!1)}function Pee(n,e){let t=n.cleanup,r=e[$m];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[$m]=null);let i=e[wh];if(i!==null){e[wh]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Th];if(o!==null){e[Th]=null;for(let s of o)s.destroy()}}function Lee(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Hp)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];zr(4,a,l);try{l.call(a)}finally{zr(5,a,l)}}else{zr(4,i,o);try{o.call(i)}finally{zr(5,i,o)}}}}}function kee(n,e,t){return Oee(n,e.parent,t)}function Oee(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Mu];if(qf(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Ah.None||i===Ah.Emulated)return null}return _c(r,t)}function Fee(n,e,t){return jee(n,e,t)}function Bee(n,e,t){return n.type&40?_c(n,t):null}var jee=Bee,Y6;function HR(n,e,t,r){let i=kee(n,r,e),o=e[Zi],s=r.parent||e[Vl],a=Fee(s,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)U6(o,i,t[l],a,!1);else U6(o,i,t,a,!1);Y6!==void 0&&Y6(o,r,e,t,i)}function J_(n,e){if(e!==null){let t=e.type;if(t&3)return _c(e,n);if(t&4)return oR(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return J_(n,r);{let i=n[e.index];return Nu(i)?oR(-1,i):Hl(i)}}else{if(t&128)return J_(n,e.next);if(t&32)return jR(e,n)()||Hl(n[e.index]);{let r=oB(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=zf(n[ul]);return J_(i,r)}else return J_(n,e.next)}}}return null}function oB(n,e){if(e!==null){let r=n[ul][Vl],i=e.projection;return r.projection[i]}return null}function oR(n,e){let t=Ui+n+1;if(t<e.length){let r=e[t],i=r[Qt].firstChild;if(i!==null)return J_(r,i)}return e[Hf]}function qR(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Ih];if(t.type===128){t=t.next;continue}let l=r[t.index],c=t.type;if(s&&e===0&&(l&&t0(Hl(l),r),t.flags|=2),!MR(t))if(c&8)qR(n,e,t.child,r,i,o,!1),Qm(e,n,a,i,l,t,o,r);else if(c&32){let f=jR(t,r),d;for(;d=f();)Qm(e,n,a,i,d,t,o,r);Qm(e,n,a,i,l,t,o,r)}else c&16?Uee(n,e,r,t,i,o):Qm(e,n,a,i,l,t,o,r);t=s?t.projectionNext:t.next}}function f2(n,e,t,r,i,o){qR(t,r,n.firstChild,e,i,o,!1)}function Uee(n,e,t,r,i,o){let s=t[ul],l=s[Vl].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let f=l[c];Qm(e,n,t[Ih],i,f,r,o,t)}else{let c=l,f=s[Bo];I7(r)&&(c.flags|=128),qR(n,e,c,f,i,o,!0)}}function Gee(n,e,t,r,i,o,s){let a=r[Hf],l=Hl(r);a!==l&&Qm(e,n,t,o,a,i,s);for(let c=Ui;c<r.length;c++){let f=r[c];f2(f[Qt],f,n,e,o,a)}}function zee(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:xc.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xc.Important),n.setStyle(t,r,i,o))}}function sB(n,e,t,r,i){let o=Yf(),s=r&2;try{Xf(-1),s&&e.length>Ki&&Z7(n,e,Ki,!1),zr(s?2:0,i,t),t(r,i)}finally{Xf(o),zr(s?3:1,i,t)}}function WR(n,e,t){Zee(n,e,t),(t.flags&64)===64&&Kee(n,e,t)}function d2(n,e,t=_c){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Vee(n,e,t,r){let o=r.get(k7,L7)||t===Ah.ShadowDom,s=n.selectRootElement(e,o);return Hee(s),s}function Hee(n){qee(n)}var qee=()=>null;function Wee(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $ee(n,e,t,r,i,o){let s=e[Qt];if($R(n,s,e,t,r)){qf(n)&&Xee(e,n.index);return}n.type&3&&(t=Wee(t)),Yee(n,e,t,r,i,o)}function Yee(n,e,t,r,i,o){if(n.type&3){let s=_c(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function Xee(n,e){let t=ql(e,n);t[hn]&16||(t[hn]|=64)}function Zee(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qf(t)&&yee(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||VE(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],l=ev(e,n,s,t);if(t0(l,e),o!==null&&Qee(e,s-r,l,a,t,o),Wf(a)){let c=ql(t.index,e);c[Xi]=ev(e,n,s,t)}}}function Kee(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=S6();try{Xf(o);for(let a=r;a<i;a++){let l=n.data[a],c=e[a];IE(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Jee(l,c)}}finally{Xf(-1),IE(s)}}function Jee(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function aB(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];uee(e,o.selectors,!1)&&(r??=[],Wf(o)?r.unshift(o):r.push(o))}return r}function Qee(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];nR(r,t,l,c)}}function lB(n,e,t,r,i){let o=Ki+t,s=e[Qt],a=i(s,e,n,r,t);e[o]=a,Zm(n,!0);let l=n.type===2;return l?(q7(e[Zi],a,n),(d6()===0||W_(n))&&t0(a,e),p6()):t0(a,e),RE()&&(!l||!MR(n))&&HR(s,e,a,n),n}function uB(n){let e=n;return RA()?y6():(e=e.parent,Zm(e,!1)),e}function ete(n,e){let t=n[Ih];if(!t)return;let r;try{r=t.get(hl,null)}catch{r=null}r?.(e)}function $R(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],f=s[l+1],d=e.data[c];nR(d,t[c],f,i),a=!0}if(o)for(let l of o){let c=t[l],f=e.data[l];nR(f,c,r,i),a=!0}return a}function tte(n,e){let t=ql(e,n),r=t[Qt];nte(r,t);let i=t[Mu];i!==null&&t[Wm]===null&&(t[Wm]=O7(i,t[Ih])),zr(18),YR(r,t,t[Xi]),zr(19,t[Xi])}function nte(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function YR(n,e,t){DE(e);try{let r=n.viewQuery;r!==null&&tR(1,r,t);let i=n.template;i!==null&&sB(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[mc]?.finishViewCreation(n),n.staticContentQueries&&F7(n,e),n.staticViewQueries&&tR(2,n.viewQuery,t);let o=n.components;o!==null&&rte(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[hn]&=-5,AE()}}function rte(n,e){for(let t=0;t<e.length;t++)tte(n,e[t])}function p2(n,e,t,r){let i=un(null);try{let o=e.tView,a=n[hn]&4096?4096:16,l=FR(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[e.index];l[Vf]=c;let f=n[mc];return f!==null&&(l[mc]=f.createEmbeddedView(o)),YR(o,l,t),l}finally{un(i)}}function tv(n,e){return!e||e.firstChild===null||I7(n)}function nv(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Hl(o)),Nu(o)&&cB(o,r);let s=t.type;if(s&8)nv(n,e,t.child,r);else if(s&32){let a=jR(t,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=oB(e,t);if(Array.isArray(a))r.push(...a);else{let l=zf(e[ul]);nv(l[Qt],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function cB(n,e){for(let t=Ui;t<n.length;t++){let r=n[t],i=r[Qt].firstChild;i!==null&&nv(r[Qt],r,i,e)}n[Hf]!==n[Mu]&&e.push(n[Hf])}function hB(n){if(n[Bp]!==null){for(let e of n[Bp])e.impl.addSequence(e);n[Bp].length=0}}var fB=[];function ite(n){return n[cl]??ote(n)}function ote(n){let e=fB.pop()??Object.create(ate);return e.lView=n,e}function ste(n){n.lView[cl]!==n&&(n.lView=null,fB.push(n))}var ate=tn(dt({},xp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{$f(n.lView)},consumerOnSignalRead(){this.lView[cl]=this}});function lte(n){let e=n[cl]??Object.create(ute);return e.lView=n,e}var ute=tn(dt({},xp),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=zf(n.lView);for(;e&&!dB(e[Qt]);)e=zf(e);e&&wA(e)},consumerOnSignalRead(){this.lView[cl]=this}});function dB(n){return n.type!==2}function pB(n){if(n[Th]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Th])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[hn]&8192)}}var cte=100;function gB(n,e=0){let r=n[gc].rendererFactory,i=!1;i||r.begin?.();try{hte(n,e)}finally{i||r.end?.()}}function hte(n,e){let t=MA();try{Km(!0),sR(n,e);let r=0;for(;Y_(n);){if(r===cte)throw new Pt(103,!1);r++,sR(n,1)}}finally{Km(t)}}function fte(n,e,t,r){if(Gp(e))return;let i=e[hn],o=!1,s=!1;DE(e);let a=!0,l=null,c=null;o||(dB(n)?(c=ite(e),l=wp(c)):Pw()===null?(a=!1,c=lte(e),l=wp(c)):e[cl]&&(Ep(e[cl]),e[cl]=null));try{xA(e),x6(n.bindingStartIndex),t!==null&&sB(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let p=n.preOrderCheckHooks;p!==null&&LE(e,p,null)}else{let p=n.preOrderHooks;p!==null&&kE(e,p,0,null),UA(e,0)}if(s||dte(e),pB(e),mB(e,0),n.contentQueries!==null&&F7(n,e),!o)if(f){let p=n.contentCheckHooks;p!==null&&LE(e,p)}else{let p=n.contentHooks;p!==null&&kE(e,p,1),UA(e,1)}gte(n,e);let d=n.components;d!==null&&_B(e,d,0);let y=n.viewQuery;if(y!==null&&tR(2,y,r),!o)if(f){let p=n.viewCheckHooks;p!==null&&LE(e,p)}else{let p=n.viewHooks;p!==null&&kE(e,p,2),UA(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[bE]){for(let p of e[bE])p();e[bE]=null}o||(hB(e),e[hn]&=-73)}catch(f){throw o||$f(e),f}finally{c!==null&&(Em(c,l),a&&ste(c)),AE()}}function mB(n,e){for(let t=D7(n);t!==null;t=A7(t))for(let r=Ui;r<t.length;r++){let i=t[r];yB(i,e)}}function dte(n){for(let e=D7(n);e!==null;e=A7(e)){if(!(e[hn]&2))continue;let t=e[Up];for(let r=0;r<t.length;r++){let i=t[r];wA(i)}}}function pte(n,e,t){zr(18);let r=ql(e,n);yB(r,t),zr(19,r[Xi])}function yB(n,e){SE(n)&&sR(n,e)}function sR(n,e){let r=n[Qt],i=n[hn],o=n[cl],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&bm(o)),s||=!1,o&&(o.dirty=!1),n[hn]&=-9217,s)fte(r,n,r.template,n[Xi]);else if(i&8192){let a=un(null);try{pB(n),mB(n,1);let l=r.components;l!==null&&_B(n,l,1),hB(n)}finally{un(a)}}}function _B(n,e,t){for(let r=0;r<e.length;r++)pte(n,e[r],t)}function gte(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Xf(~i);else{let o=i,s=t[++r],a=t[++r];b6(s,o);let l=e[o];zr(24,l),a(2,l),zr(25,l)}}}finally{Xf(-1)}}function XR(n,e){let t=MA()?64:1088;for(n[gc].changeDetectionScheduler?.notify(e);n;){n[hn]|=t;let r=zf(n);if(Xm(n)&&!r)return n;n=r}return null}function vB(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function xB(n,e){let t=Ui+e;if(t<n.length)return n[t]}function g2(n,e,t,r=!0){let i=e[Qt];if(mte(i,e,n,t),r){let s=oR(t,n),a=e[Zi],l=a.parentNode(n[Hf]);l!==null&&Ree(i,n[Vl],a,e,l,s)}let o=e[Wm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wB(n,e){let t=rv(n,e);return t!==void 0&&h2(t[Qt],t),t}function rv(n,e){if(n.length<=Ui)return;let t=Ui+e,r=n[t];if(r){let i=r[Vf];i!==null&&i!==n&&VR(i,r),e>0&&(n[t-1][zl]=r[zl]);let o=z_(n,Ui+e);Aee(r[Qt],r);let s=o[mc];s!==null&&s.detachView(o[Qt]),r[Bo]=null,r[zl]=null,r[hn]&=-129}return r}function mte(n,e,t,r){let i=Ui+r,o=t.length;r>0&&(t[i-1][zl]=e),r<o-Ui?(e[zl]=t[i],iA(t,Ui+r,e)):(t.push(e),e[zl]=null),e[Bo]=t;let s=e[Vf];s!==null&&t!==s&&EB(s,e);let a=e[mc];a!==null&&a.insertView(n),CE(e),e[hn]|=128}function EB(n,e){let t=n[Up],r=e[Bo];if(yc(r))n[hn]|=2;else{let i=r[Bo][ul];e[ul]!==i&&(n[hn]|=2)}t===null?n[Up]=[e]:t.push(e)}var Zf=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Qt];return nv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Xi]}set context(e){this._lView[Xi]=e}get destroyed(){return Gp(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bo];if(Nu(e)){let t=e[q_],r=t?t.indexOf(this):-1;r>-1&&(rv(e,r),z_(t,r))}this._attachedToViewContainer=!1}h2(this._lView[Qt],this._lView)}onDestroy(e){EA(this._lView,e)}markForCheck(){XR(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[hn]&=-129}reattach(){CE(this._lView),this._lView[hn]|=128}detectChanges(){this._lView[hn]|=1024,gB(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Xm(this._lView),t=this._lView[Vf];t!==null&&!e&&VR(t,this._lView),iB(this._lView[Qt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Pt(902,!1);this._appRef=e;let t=Xm(this._lView),r=this._lView[Vf];r!==null&&!t&&EB(r,this._lView),CE(this._lView)}};var $l=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=yte;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=p2(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Zf(o)}}return n})();function yte(){return ZR(Bs(),er())}function ZR(n,e){return n.type&4?new $l(e,n,r0(n,e)):null}function av(n,e,t,r,i){let o=n.data[e];if(o===null)o=_te(n,e,t,r,i),E6()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=m6();o.injectorIndex=s===null?-1:s.injectorIndex}return Zm(o,!0),o}function _te(n,e,t,r,i){let o=AA(),s=RA(),a=s?o:o&&o.parent,l=n.data[e]=xte(n,a,t,e,r,i);return vte(n,l,o,s),l}function vte(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function xte(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return g6()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var TTe=new RegExp(`^(\\d+)*(${YQ}|${$Q})*(.*)`);function wte(n){let e=n[pA]??[],r=n[Bo][Zi],i=[];for(let o of e)o.data[P7]!==void 0?i.push(o):Ete(o,r);n[pA]=i}function Ete(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[N7];for(;t<i;){let o=r.nextSibling;H7(e,r,!1),r=o,t++}}}var bte=()=>null,Ste=()=>null;function aR(n,e){return bte(n,e)}function bB(n,e,t){return Ste(n,e,t)}var SB=class{},m2=class{},lR=class{resolveComponentFactory(e){throw new Pt(917,!1)}},lv=class{static NULL=new lR},ds=class{},o0=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Cte()}return n})();function Cte(){let n=er(),e=Bs(),t=ql(e.index,n);return(yc(t)?t:n)[Zi]}var CB=(()=>{class n{static \u0275prov=yt({token:n,providedIn:"root",factory:()=>null})}return n})();var FE={},uR=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,FE,r);return i!==FE||t===FE?i:this.parentInjector.get(e,t,r)}};function ZE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=YD(i,a);else if(o==2){let l=a,c=e[++s];r=YD(r,l+": "+c+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function go(n,e=0){let t=er();if(t===null)return Un(n,e);let r=Bs();return b7(r,t,hs(n),e)}function IB(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,l=null,c=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,c]=f.resolveHostDirectives(s);break}Dte(n,e,t,a,o,l,c)}o!==null&&r!==null&&Ite(t,r,o)}function Ite(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new Pt(-301,!1);r.push(e[i],o)}}function Tte(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Dte(n,e,t,r,i,o,s){let a=r.length,l=!1;for(let y=0;y<a;y++){let p=r[y];!l&&Wf(p)&&(l=!0,Tte(n,t,y)),KA(VE(t,e),n,p.type)}Lte(t,n.data.length,a);for(let y=0;y<a;y++){let p=r[y];p.providersResolver&&p.providersResolver(p)}let c=!1,f=!1,d=X7(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let p=r[y];if(t.mergedAttrs=s2(t.mergedAttrs,p.hostAttrs),Rte(n,t,e,d,p),Pte(d,p,i),s!==null&&s.has(p)){let[w,b]=s.get(p);t.directiveToIndex.set(p.type,[d,w+t.directiveStart,b+t.directiveStart])}else(o===null||!o.has(p))&&t.directiveToIndex.set(p.type,d);p.contentQueries!==null&&(t.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(t.flags|=64);let _=p.type.prototype;!c&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!f&&(_.ngOnChanges||_.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),d++}Ate(n,t,o)}function Ate(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))X6(0,e,i,r),X6(1,e,i,r),K6(e,r,!1);else{let o=t.get(i);Z6(0,e,o,r),Z6(1,e,o,r),K6(e,r,!0)}}}function X6(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),TB(e,o)}}function Z6(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),TB(e,s)}}function TB(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function K6(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||kR(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let c=i[l];for(let f of c)if(f===e){s??=[],s.push(l,r[a+1]);break}}else if(t&&o.hasOwnProperty(l)){let c=o[l];for(let f=0;f<c.length;f+=2)if(c[f]===e){s??=[],s.push(c[f+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Rte(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Gf(i.type,!0)),s=new Hp(o,Wf(i),go,null);n.blueprint[r]=s,t[r]=s,Mte(n,e,r,X7(n,t,i.hostVars,wc),i)}function Mte(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Nte(s)!=a&&s.push(a),s.push(t,r,o)}}function Nte(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Pte(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Wf(e)&&(t[""]=n)}}function Lte(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DB(n,e,t,r,i,o,s,a){let l=e[Qt],c=l.consts,f=Wl(c,s),d=av(l,n,t,r,f);return o&&IB(l,e,d,Wl(c,a),i),d.mergedAttrs=s2(d.mergedAttrs,d.attrs),d.attrs!==null&&ZE(d,d.attrs,!1),d.mergedAttrs!==null&&ZE(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function AB(n,e){g7(n,e),gA(e)&&n.queries.elementEnd(e)}function kte(n,e,t,r,i,o){let s=e.consts,a=Wl(s,i),l=av(e,n,t,r,a);if(l.mergedAttrs=s2(l.mergedAttrs,l.attrs),o!=null){let c=Wl(s,o);l.localNames=[];for(let f=0;f<c.length;f+=2)l.localNames.push(c[f],-1)}return l.attrs!==null&&ZE(l,l.attrs,!1),l.mergedAttrs!==null&&ZE(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function KR(n){return MB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function MB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Ote(n,e,t){return n[e]=t}function Wp(n,e,t){if(t===wc)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Fte(n,e,t,r){let i=Wp(n,e,t);return Wp(n,e+1,r)||i}function BE(n,e,t){return function r(i){let o=qf(n)?ql(n.index,e):e;XR(o,5);let s=e[Xi],a=J6(e,s,t,i),l=r.__ngNextListenerFn__;for(;l;)a=J6(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function J6(n,e,t,r){let i=un(null);try{return zr(6,e,t),t(r)!==!1}catch(o){return ete(n,o),!1}finally{zr(7,e,t),un(i)}}function NB(n,e,t,r,i,o,s,a){let l=W_(n),c=!1,f=null;if(!r&&l&&(f=jte(e,t,o,n.index)),f!==null){let d=f.__ngLastListenerFn__||f;d.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,c=!0}else{let d=_c(n,t),y=r?r(d):d;ZQ(t,y,o,a);let p=i.listen(y,o,a);if(!Bte(o)){let _=r?w=>r(Hl(w[n.index])):n.index;PB(_,e,t,o,a,p,!1)}}return c}function Bte(n){return n.startsWith("animation")||n.startsWith("transition")}function jte(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[$m],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function PB(n,e,t,r,i,o,s){let a=e.firstCreatePass?SA(e):null,l=bA(t),c=l.length;l.push(i,o),a&&a.push(r,n,c,(c+1)*(s?-1:1))}function Q6(n,e,t,r,i,o){let s=e[t],a=e[Qt],c=a.data[t].outputs[r],d=s[c].subscribe(o);PB(n.index,a,e,i,o,d,!0)}var cR=Symbol("BINDING");var KE=class extends lv{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ch(e);return new $p(t,this.ngModule)}};function Ute(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&u2.SignalBased)!==0};return i&&(o.transform=i),o})}function Gte(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function zte(n,e,t){let r=e instanceof Ii?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new uR(t,r):t}function Vte(n){let e=n.get(ds,null);if(e===null)throw new Pt(407,!1);let t=n.get(CB,null),r=n.get(pc,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function Hte(n,e){let t=LB(n);return z7(e,t,t==="svg"?mA:t==="math"?a6:null)}function LB(n){return(n.selectors[0][0]||"div").toLowerCase()}var $p=class extends m2{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Ute(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Gte(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=dee(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){zr(22);let a=un(null);try{let l=this.componentDef,c=qte(r,l,s,o),f=zte(l,i||this.ngModule,e),d=Vte(f),y=d.rendererFactory.createRenderer(null,l),p=r?Vee(y,r,l.encapsulation,f):Hte(l,y),_=s?.some(e7)||o?.some(S=>typeof S!="function"&&S.bindings.some(e7)),w=FR(null,c,null,512|Y7(l),null,null,d,y,f,null,O7(p,f,!0));w[Ki]=p,DE(w);let b=null;try{let S=DB(Ki,w,2,"#host",()=>c.directiveRegistry,!0,0);q7(y,p,S),t0(p,w),WR(c,w,S),B7(c,S,w),AB(c,S),t!==void 0&&$te(S,this.ngContentSelectors,t),b=ql(S.index,w),w[Xi]=b[Xi],YR(c,w,null)}catch(S){throw b!==null&&QA(b),QA(w),S}finally{zr(23),AE()}return new JE(this.componentType,w,!!_)}finally{un(a)}}};function qte(n,e,t,r){let i=n?["ng-version","20.3.15"]:pee(e.selectors[0]),o=null,s=null,a=0;if(t)for(let f of t)a+=f[cR].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let d=r[f];if(typeof d!="function")for(let y of d.bindings){a+=y[cR].requiredVars;let p=f+1;y.create&&(y.targetIdx=p,(o??=[]).push(y)),y.update&&(y.targetIdx=p,(s??=[]).push(y))}}let l=[e];if(r)for(let f of r){let d=typeof f=="function"?f:f.type,y=lA(d);l.push(y)}return OR(0,null,Wte(o,s),1,a,l,null,null,null,[i],null)}function Wte(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function e7(n){let e=n[cR].kind;return e==="input"||e==="twoWay"}var JE=class extends SB{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=$_(t[Qt],Ki),this.location=r0(this._tNode,t),this.instance=ql(this._tNode.index,t)[Xi],this.hostView=this.changeDetectorRef=new Zf(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$R(r,i[Qt],i,e,t);this.previousInputValues.set(e,t);let s=ql(r.index,i);XR(s,1)}get injector(){return new Vp(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $te(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ma=(()=>{class n{static __NG_ELEMENT_ID__=Yte}return n})();function Yte(){let n=Bs();return OB(n,er())}var Xte=Ma,kB=class extends Xte{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return r0(this._hostTNode,this._hostLView)}get injector(){return new Vp(this._hostTNode,this._hostLView)}get parentInjector(){let e=TR(this._hostTNode,this._hostLView);if(y7(e)){let t=GE(e,this._hostLView),r=UE(e),i=t[Qt].data[r+8];return new Vp(i,t)}else return new Vp(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=t7(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ui}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=aR(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,tv(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let l=e&&!wQ(e),c;if(l)c=t;else{let b=t||{};c=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef,s=b.directives,a=b.bindings}let f=l?e:new $p(Ch(e)),d=r||this.parentInjector;if(!o&&f.ngModule==null){let S=(l?d:this.parentInjector).get(Ii,null);S&&(o=S)}let y=Ch(f.componentType??{}),p=aR(this._lContainer,y?.id??null),_=p?.firstChild??null,w=f.create(d,i,_,o,s,a);return this.insertImpl(w.hostView,c,tv(this._hostTNode,p)),w}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(u6(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Bo],c=new kB(l,l[Vl],l[Bo]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return g2(s,i,o,r),e.attachToViewContainerRef(),iA(VA(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=t7(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=rv(this._lContainer,t);r&&(z_(VA(this._lContainer),t),h2(r[Qt],r))}detach(e){let t=this._adjustIndex(e,-1),r=rv(this._lContainer,t);return r&&z_(VA(this._lContainer),t)!=null?new Zf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function t7(n){return n[q_]}function VA(n){return n[q_]||(n[q_]=[])}function OB(n,e){let t,r=e[n.index];return Nu(r)?t=r:(t=vB(r,e,null,n),e[n.index]=t,BR(e,t)),Kte(t,e,n,r),new kB(t,n,e)}function Zte(n,e){let t=n[Zi],r=t.createComment(""),i=_c(e,n),o=t.parentNode(i);return WE(t,o,r,t.nextSibling(i),!1),r}var Kte=ene,Jte=()=>!1;function Qte(n,e,t){return Jte(n,e,t)}function ene(n,e,t,r){if(n[Hf])return;let i;t.type&8?i=Hl(r):i=Zte(e,t),n[Hf]=i}var hR=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},fR=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)JR(e,t).matches!==null&&this.queries[t].setDirty()}},dR=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=lne(e):this.predicate=e}},pR=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},gR=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,tne(t,o)),this.matchTNodeWithReadOption(e,t,OE(t,e,o,!1,!1))}else r===$l?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,OE(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ni||i===Ma||i===$l&&t.type&4)this.addMatch(t.index,-2);else{let o=OE(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function tne(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function nne(n,e){return n.type&11?r0(n,e):n.type&4?ZR(n,e):null}function rne(n,e,t,r){return t===-1?nne(e,n):t===-2?ine(n,e,r):ev(n,n[Qt],t,e)}function ine(n,e,t){if(t===ni)return r0(e,n);if(t===$l)return ZR(e,n);if(t===Ma)return OB(e,n)}function FB(n,e,t,r){let i=e[mc].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let f=o[c];a.push(rne(e,f,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function mR(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=FB(n,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],f=e[-l];for(let d=Ui;d<f.length;d++){let y=f[d];y[Vf]===y[Bo]&&mR(y[Qt],y,c,r)}if(f[Up]!==null){let d=f[Up];for(let y=0;y<d.length;y++){let p=d[y];mR(p[Qt],p,c,r)}}}}}return r}function one(n,e){return n[mc].queries[e].queryList}function sne(n,e,t){let r=new HE((t&4)===4);return f6(n,e,r,r.destroy),(e[mc]??=new fR).queries.push(new hR(r))-1}function ane(n,e,t){let r=fs();return r.firstCreatePass&&(une(r,new dR(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),sne(r,er(),e)}function lne(n){return n.split(",").map(e=>e.trim())}function une(n,e,t){n.queries===null&&(n.queries=new pR),n.queries.track(new gR(e,t))}function JR(n,e){return n.queries.getByIndex(e)}function cne(n,e){let t=n[Qt],r=JR(t,e);return r.crossesNgTemplate?mR(t,n,e,[]):FB(t,n,r,e)}var Rh=class{},y2=class{};var QE=class extends Rh{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new KE(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=aA(e);this._bootstrapComponents=W7(o.bootstrap),this._r3Injector=kA(e,t,[{provide:Rh,useValue:this},{provide:lv,useValue:this.componentFactoryResolver},...r],Eh(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},e2=class extends y2{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new QE(this.moduleType,e,[])}};var iv=class extends Rh{injector;componentFactoryResolver=new KE(this);instance=null;constructor(e){super();let t=new Rp([...e.providers,{provide:Rh,useValue:this},{provide:lv,useValue:this.componentFactoryResolver}],e.parent||qm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function uv(n,e,t=null){return new iv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var hne=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=uA(!1,t.type),i=r.length>0?uv([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=yt({token:n,providedIn:"environment",factory:()=>new n(Un(Ii))})}return n})();function vr(n){return sv(()=>{let e=BB(n),t=tn(dt({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===DR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(hne).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ah.Emulated,styles:n.styles||Ul,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Nh("NgStandalone"),jB(t);let r=n.dependencies;return t.directiveDefs=n7(r,fne),t.pipeDefs=n7(r,Q8),t.id=gne(t),t})}function fne(n){return Ch(n)||lA(n)}function Qf(n){return sv(()=>({type:n.type,bootstrap:n.bootstrap||Ul,declarations:n.declarations||Ul,imports:n.imports||Ul,exports:n.exports||Ul,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dne(n,e){if(n==null)return Lp;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=u2.None,l=null),t[o]=[r,a,l],e[o]=s}return t}function pne(n){if(n==null)return Lp;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Yl(n){return sv(()=>{let e=BB(n);return jB(e),e})}function QR(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function BB(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Lp,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ul,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:dne(n.inputs,e),outputs:pne(n.outputs),debugInfo:null}}function jB(n){n.features?.forEach(e=>e(n))}function n7(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function gne(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function UB(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=s2(n.mergedAttrs,n.attrs);let f=n.tView=OR(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Zm(n,!1);let l=yne(t,e,n,r);RE()&&HR(t,e,l,n),t0(l,e);let c=vB(l,e,l,n);e[r+Ki]=c,BR(e,c),Qte(c,n,e)}function mne(n,e,t,r,i,o,s,a,l,c,f){let d=t+Ki,y;return e.firstCreatePass?(y=av(e,d,4,s||null,a||null),IA()&&IB(e,n,y,Wl(e.consts,c),aB),g7(e,y)):y=e.data[d],UB(y,n,e,t,r,i,o,l),W_(y)&&WR(e,n,y),c!=null&&d2(n,y,f),y}function t2(n,e,t,r,i,o,s,a,l,c,f){let d=t+Ki,y;if(e.firstCreatePass){if(y=av(e,d,4,s||null,a||null),c!=null){let p=Wl(e.consts,c);y.localNames=[];for(let _=0;_<p.length;_+=2)y.localNames.push(p[_],-1)}}else y=e.data[d];return UB(y,n,e,t,r,i,o,l),c!=null&&d2(n,y,f),y}function Ji(n,e,t,r,i,o,s,a){let l=er(),c=fs(),f=Wl(c.consts,o);return mne(l,c,n,e,t,r,i,f,void 0,s,a),Ji}var yne=_ne;function _ne(n,e,t,r){return ME(!0),e[Zi].createComment("")}var eM=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var tM=new Bt("");function s0(n){return!!n&&typeof n.then=="function"}function nM(n){return!!n&&typeof n.subscribe=="function"}var GB=new Bt("");var rM=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Me(GB,{optional:!0})??[];injector=Me(yi);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=fa(this.injector,i);if(s0(o))t.push(o);else if(nM(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_2=new Bt("");function zB(){vD(()=>{let n="";throw new Pt(600,n)})}function VB(n){return n.isBoundToModule}var vne=10;var Xl=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Me(hl);afterRenderManager=Me(zR);zonelessEnabled=Me(Z_);rootEffectScheduler=Me(K_);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Jt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Me(Dh);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(or(t=>!t))}constructor(){Me(Kp,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Me(Ii);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=yi.NULL){return this._injector.get(rr).run(()=>{zr(10);let s=t instanceof m2;if(!this._injector.get(rM).done){let _="";throw new Pt(405,_)}let l;s?l=t:l=this._injector.get(lv).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=VB(l)?void 0:this._injector.get(Rh),f=r||l.selector,d=l.create(i,[],f,c),y=d.location.nativeElement,p=d.injector.get(tM,null);return p?.registerApplication(y),d.onDestroy(()=>{this.detachView(d.hostView),Q_(this.components,d),p?.unregisterApplication(y)}),this._loadComponent(d),zr(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){zr(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(c2.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Pt(101,!1);let t=un(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,un(t),this.afterTick.next(),zr(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ds,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<vne;)zr(14),this.synchronizeOnce(),zr(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Y_(i))continue;let o=r&&!this.zonelessEnabled?0:1;gB(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Y_(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Q_(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(_2,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Q_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Pt(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Q_(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var LTe=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var yR=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function HA(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function xne(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),f=e[o],d=HA(o,c,o,f,t);if(d!==0){d<0&&n.updateValue(o,f),o++;continue}let y=n.at(s),p=e[l],_=HA(s,y,l,p,t);if(_!==0){_<0&&n.updateValue(s,p),s--,l--;continue}let w=t(o,c),b=t(s,y),S=t(o,f);if(Object.is(S,b)){let T=t(l,p);Object.is(T,w)?(n.swap(o,s),n.updateValue(s,p),l--,s--):n.move(s,o),n.updateValue(o,f),o++;continue}if(r??=new n2,i??=i7(n,o,s,t),_R(n,r,o,S))n.updateValue(o,f),o++,s++;else if(i.has(S))r.set(w,n.detach(o)),s--;else{let T=n.create(o,e[o]);n.attach(o,T),o++,s++}}for(;o<=l;)r7(n,r,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let f=n.at(o),d=c.value,y=HA(o,f,o,d,t);if(y!==0)y<0&&n.updateValue(o,d),o++,c=l.next();else{r??=new n2,i??=i7(n,o,s,t);let p=t(o,d);if(_R(n,r,o,p))n.updateValue(o,d),o++,s++,c=l.next();else if(!i.has(p))n.attach(o,n.create(o,d)),o++,s++,c=l.next();else{let _=t(o,f);r.set(_,n.detach(o)),s--}}}for(;!c.done;)r7(n,r,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(l=>{n.destroy(l)})}function _R(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function r7(n,e,t,r,i){if(_R(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function i7(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var n2=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ed(n,e,t,r,i,o,s,a){Nh("NgControlFlow");let l=er(),c=fs(),f=Wl(c.consts,o);return t2(l,c,n,e,t,r,i,f,256,s,a),iM}function iM(n,e,t,r,i,o,s,a){Nh("NgControlFlow");let l=er(),c=fs(),f=Wl(c.consts,o);return t2(l,c,n,e,t,r,i,f,512,s,a),iM}function td(n,e){Nh("NgControlFlow");let t=er(),r=X_(),i=t[r]!==wc?t[r]:-1,o=i!==-1?r2(t,Ki+i):void 0,s=0;if(Wp(t,r,n)){let a=un(null);try{if(o!==void 0&&wB(o,s),n!==-1){let l=Ki+n,c=r2(t,l),f=ER(t[Qt],l),d=bB(c,f,t),y=p2(t,f,e,{dehydratedView:d});g2(c,y,s,tv(f,d))}}finally{un(a)}}else if(o!==void 0){let a=xB(o,s);a!==void 0&&(a[Xi]=e)}}var vR=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ui}};var xR=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function cv(n,e,t,r,i,o,s,a,l,c,f,d,y){Nh("NgControlFlow");let p=er(),_=fs(),w=l!==void 0,b=er(),S=a?s.bind(b[ul][Xi]):s,T=new xR(w,S);b[Ki+n]=T,t2(p,_,n+1,e,t,r,i,Wl(_.consts,o),256),w&&t2(p,_,n+2,l,c,f,d,Wl(_.consts,y),512)}var wR=class extends yR{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Ui}at(e){return this.getLView(e)[Xi].$implicit}attach(e,t){let r=t[Wm];this.needsIndexUpdate||=e!==this.length,g2(this.lContainer,t,e,tv(this.templateTNode,r)),wne(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Ene(this.lContainer,e),bne(this.lContainer,e)}create(e,t){let r=aR(this.lContainer,this.templateTNode.tView.ssrId),i=p2(this.hostLView,this.templateTNode,new vR(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){h2(e[Qt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Xi].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Xi].$index=e}getLView(e){return Sne(this.lContainer,e)}};function hv(n){let e=un(null),t=Yf();try{let r=er(),i=r[Qt],o=r[t],s=t+1,a=r2(r,s);if(o.liveCollection===void 0){let c=ER(i,s);o.liveCollection=new wR(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(xne(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=X_(),f=l.length===0;if(Wp(r,c,f)){let d=t+2,y=r2(r,d);if(f){let p=ER(i,d),_=bB(y,p,r),w=p2(r,p,void 0,{dehydratedView:_});g2(y,w,0,tv(p,_))}else i.firstUpdatePass&&wte(y),wB(y,0)}}}finally{un(e)}}function r2(n,e){return n[e]}function wne(n,e){if(n.length<=Ui)return;let t=Ui+e,r=n[t],i=r?r[jp]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Ih];Tee(o,i),qp.delete(r),i.detachedLeaveAnimationFns=void 0}}function Ene(n,e){if(n.length<=Ui)return;let t=Ui+e,r=n[t],i=r?r[jp]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function bne(n,e){return rv(n,e)}function Sne(n,e){return xB(n,e)}function ER(n,e){return $_(n,e)}function Cr(n,e,t){let r=er(),i=X_();if(Wp(r,i,e)){let o=fs(),s=R6();$ee(s,r,n,e,r[Zi],t)}return Cr}function o7(n,e,t,r,i){$R(e,n,t,i?"class":"style",r)}function Qe(n,e,t,r){let i=er(),o=i[Qt],s=n+Ki,a=o.firstCreatePass?DB(s,i,2,e,aB,IA(),t,r):o.data[s];if(lB(a,i,n,e,HB),W_(a)){let l=i[Qt];WR(l,i,a),B7(l,a,i)}return r!=null&&d2(i,a),Qe}function it(){let n=fs(),e=Bs(),t=uB(e);return n.firstCreatePass&&AB(n,t),TA(t)&&DA(),CA(),t.classesWithoutHost!=null&&TQ(t)&&o7(n,t,er(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&DQ(t)&&o7(n,t,er(),t.stylesWithoutHost,!1),it}function Kt(n,e,t,r){return Qe(n,e,t,r),it(),Kt}function Ti(n,e,t,r){let i=er(),o=i[Qt],s=n+Ki,a=o.firstCreatePass?kte(s,o,2,e,t,r):o.data[s];return lB(a,i,n,e,HB),r!=null&&d2(i,a),Ti}function Gi(){let n=Bs(),e=uB(n);return TA(e)&&DA(),CA(),Gi}function Ec(n,e,t,r){return Ti(n,e,t,r),Gi(),Ec}var HB=(n,e,t,r,i)=>(ME(!0),z7(e[Zi],r,M6()));function Di(){return er()}var NE=void 0;function Cne(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Ine=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],NE,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],NE,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",NE,"{1} 'at' {0}",NE],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Cne],qA={};function fl(n){let e=Tne(n),t=s7(e);if(t)return t;let r=e.split("-")[0];if(t=s7(r),t)return t;if(r==="en")return Ine;throw new Pt(701,!1)}function s7(n){return n in qA||(qA[n]=Np.ng&&Np.ng.common&&Np.ng.common.locales&&Np.ng.common.locales[n]),qA[n]}var Qi=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Qi||{});function Tne(n){return n.toLowerCase().replace(/_/g,"-")}var fv="en-US";var Dne=fv;function qB(n){typeof n=="string"&&(Dne=n.toLowerCase().replace(/_/g,"-"))}function yn(n,e,t){let r=er(),i=fs(),o=Bs();return Ane(i,r,r[Zi],o,n,e,t),yn}function dv(n,e,t){let r=er(),i=fs(),o=Bs();return(o.type&3||t)&&NB(o,i,r,t,r[Zi],n,e,BE(o,r,e)),dv}function Ane(n,e,t,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=BE(r,e,o),NB(r,n,e,s,t,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let d=0;d<f.length;d+=2){let y=f[d],p=f[d+1];l??=BE(r,e,o),Q6(r,e,y,p,i,l)}if(c&&c.length)for(let d of c)l??=BE(r,e,o),Q6(r,e,d,i,i,l)}}function Dn(n=1){return A6(n)}function v2(n,e,t){ane(n,e,t)}function x2(n){let e=er(),t=fs(),r=NA();TE(r+1);let i=JR(t,r);if(n.dirty&&l6(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=cne(e,r);n.reset(o,GQ),n.notifyOnChanges()}return!0}return!1}function w2(){return one(er(),NA())}function oM(n){let e=_6();return _A(e,Ki+n)}function PE(n,e){return n<<17|e<<2}function Yp(n){return n>>17&32767}function Rne(n){return(n&2)==2}function Mne(n,e){return n&131071|e<<17}function bR(n){return n|2}function n0(n){return(n&131068)>>2}function WA(n,e){return n&-131069|e<<2}function Nne(n){return(n&1)===1}function SR(n){return n|1}function Pne(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Yp(s),l=n0(s);n[r]=t;let c=!1,f;if(Array.isArray(t)){let d=t;f=d[1],(f===null||Hm(d,f)>0)&&(c=!0)}else f=t;if(i)if(l!==0){let y=Yp(n[a+1]);n[r+1]=PE(y,a),y!==0&&(n[y+1]=WA(n[y+1],r)),n[a+1]=Mne(n[a+1],r)}else n[r+1]=PE(a,0),a!==0&&(n[a+1]=WA(n[a+1],r)),a=r;else n[r+1]=PE(l,0),a===0?a=r:n[l+1]=WA(n[l+1],r),l=r;c&&(n[r+1]=bR(n[r+1])),a7(n,f,r,!0),a7(n,f,r,!1),Lne(e,f,n,r,o),s=PE(a,l),o?e.classBindings=s:e.styleBindings=s}function Lne(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Hm(o,e)>=0&&(t[r+1]=SR(t[r+1]))}function a7(n,e,t,r){let i=n[t+1],o=e===null,s=r?Yp(i):n0(i),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];kne(l,e)&&(a=!0,n[s+1]=r?SR(c):bR(c)),s=r?Yp(c):n0(c)}a&&(n[t+1]=r?bR(i):SR(i))}function kne(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Hm(n,e)>=0:!1}function pv(n,e,t){return WB(n,e,t,!1),pv}function bc(n,e){return WB(n,e,null,!0),bc}function WB(n,e,t,r){let i=er(),o=fs(),s=w6(2);if(o.firstUpdatePass&&Fne(o,n,s,r),e!==wc&&Wp(i,s,e)){let a=o.data[Yf()];zne(o,a,i,i[Zi],n,i[s+1]=Vne(e,t),r,s)}}function One(n,e){return e>=n.expandoStartIndex}function Fne(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Yf()],s=One(n,t);Hne(o,r)&&e===null&&!s&&(e=!1),e=Bne(i,o,e,r),Pne(i,o,e,t,s,r)}}function Bne(n,e,t,r){let i=C6(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$A(null,n,e,t,r),t=ov(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$A(i,n,e,t,r),o===null){let l=jne(n,e,r);l!==void 0&&Array.isArray(l)&&(l=$A(null,n,e,l[1],r),l=ov(l,e.attrs,r),Une(n,e,r,l))}else o=Gne(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function jne(n,e,t){let r=t?e.classBindings:e.styleBindings;if(n0(r)!==0)return n[Yp(r)]}function Une(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Yp(i)]=r}function Gne(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=ov(r,s,t)}return ov(r,e.attrs,t)}function $A(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=ov(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function ov(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),J8(n,s,t?!0:e[++o]))}return n===void 0?null:n}function zne(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],f=Nne(c)?l7(l,e,t,i,n0(c),s):void 0;if(!i2(f)){i2(o)||Rne(c)&&(o=l7(l,null,t,i,a,s));let d=yA(Yf(),t);zee(r,s,d,i,o)}}function l7(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),f=c?l[1]:l,d=f===null,y=t[i+1];y===wc&&(y=d?Ul:void 0);let p=d?EE(y,r):f===r?y:void 0;if(c&&!i2(p)&&(p=EE(l,r)),i2(p)&&(a=p,s))return a;let _=n[i+1];i=s?Yp(_):n0(_)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=EE(l,r))}return a}function i2(n){return n!==void 0}function Vne(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Eh(NR(n)))),n}function Hne(n,e){return(n.flags&(e?8:16))!==0}function St(n,e=""){let t=er(),r=fs(),i=n+Ki,o=r.firstCreatePass?av(r,i,1,e,null):r.data[i],s=qne(r,t,o,e,n);t[i]=s,RE()&&HR(r,t,s,o),Zm(o,!1)}var qne=(n,e,t,r,i)=>(ME(!0),QQ(e[Zi],r));function Wne(n,e,t,r=""){return Wp(n,X_(),t)?e+vE(t)+r:wc}function a0(n){return Ko("",n),a0}function Ko(n,e,t){let r=er(),i=Wne(r,n,e,t);return i!==wc&&$ne(r,Yf(),i),Ko}function $ne(n,e,t){let r=yA(e,n);eee(n[Zi],r,t)}function Yne(n,e,t){let r=fs();if(r.firstCreatePass){let i=Wf(n);CR(t,r.data,r.blueprint,i,!0),CR(e,r.data,r.blueprint,i,!1)}}function CR(n,e,t,r,i){if(n=hs(n),Array.isArray(n))for(let o=0;o<n.length;o++)CR(n[o],e,t,r,i);else{let o=fs(),s=er(),a=Bs(),l=Ap(n)?n:hs(n.provide),c=hA(n),f=a.providerIndexes&1048575,d=a.directiveStart,y=a.providerIndexes>>20;if(Ap(n)||!n.multi){let p=new Hp(c,i,go,null),_=XA(l,e,i?f:f+y,d);_===-1?(KA(VE(a,s),o,l),YA(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[_]=p,s[_]=p)}else{let p=XA(l,e,f+y,d),_=XA(l,e,f,f+y),w=p>=0&&t[p],b=_>=0&&t[_];if(i&&!b||!i&&!w){KA(VE(a,s),o,l);let S=Kne(i?Zne:Xne,t.length,i,r,c,n);!i&&b&&(t[_].providerFactory=S),YA(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=$B(t[i?_:p],c,!i&&r);YA(o,n,p>-1?p:_,S)}!i&&r&&b&&t[_].componentProviders++}}}function YA(n,e,t,r){let i=Ap(e),o=i6(e);if(i||o){let l=(o?hs(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=c.indexOf(t);f===-1?c.push(t,[r,l]):c[f+1].push(r,l)}else c.push(t,l)}}}function $B(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function XA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Xne(n,e,t,r,i){return IR(this.multi,[])}function Zne(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ev(r,r[Qt],this.providerFactory.index,i);s=l.slice(0,a),IR(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],IR(o,s);return s}function IR(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Kne(n,e,t,r,i,o){let s=new Hp(n,t,go,null);return s.multi=[],s.index=e,s.componentProviders=0,$B(s,i,r&&!t),s}function gv(n,e=[]){return t=>{t.providersResolver=(r,i)=>Yne(r,i?i(n):n,e)}}function Jne(n,e){let t=n[e];return t===wc?void 0:t}function Qne(n,e,t,r,i,o,s){let a=e+t;return Fte(n,a,i,o)?Ote(n,a+2,s?r.call(s,i,o):r(i,o)):Jne(n,a+2)}function sM(n,e){let t=fs(),r,i=n+Ki;t.firstCreatePass?(r=ere(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Gf(r.type,!0)),s,a=ha(go);try{let l=zE(!1),c=o();return zE(l),vA(t,er(),i,c),c}finally{ha(a)}}function ere(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function aM(n,e,t,r){let i=n+Ki,o=er(),s=_A(o,i);return tre(o,i)?Qne(o,v6(),e,s.transform,t,r,s):s.transform(t,r)}function tre(n,e){return n[Qt].data[e].pure}var o2=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},lM=(()=>{class n{compileModuleSync(t){return new e2(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=aA(t),o=W7(i.declarations).reduce((s,a)=>{let l=Ch(a);return l&&s.push(new $p(l)),s},[]);return new o2(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nre=(()=>{class n{zone=Me(rr);changeDetectionScheduler=Me(pc);applicationRef=Me(Xl);applicationErrorHandler=Me(hl);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YB=new Bt("",{factory:()=>!1});function uM({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new rr(tn(dt({},hM()),{scheduleInRootZone:t})),[{provide:rr,useFactory:n},{provide:Sh,multi:!0,useFactory:()=>{let r=Me(nre,{optional:!0});return()=>r.initialize()}},{provide:Sh,multi:!0,useFactory:()=>{let r=Me(rre);return()=>{r.initialize()}}},e===!0?{provide:BA,useValue:!0}:[],{provide:jA,useValue:t??K7},{provide:hl,useFactory:()=>{let r=Me(rr),i=Me(Ii),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Gl),o.handleError(s))})}}}]}function cM(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=uM({ngZoneFactory:()=>{let i=hM(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Nh("NgZone_CoalesceEvent"),new rr(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return kp([{provide:YB,useValue:!0},{provide:Z_,useValue:!1},r])}function hM(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var rre=(()=>{class n{subscription=new dr;initialized=!1;zone=Me(rr);pendingTasks=Me(Dh);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{rr.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{rr.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var XB=(()=>{class n{applicationErrorHandler=Me(hl);appRef=Me(Xl);taskService=Me(Dh);ngZone=Me(rr);zonelessEnabled=Me(Z_);tracing=Me(Kp,{optional:!0});disableScheduling=Me(BA,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($E):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Me(jA,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof YE||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?V6:J7;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($E+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,V6(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ire(){return typeof $localize<"u"&&$localize.locale||fv}var mv=new Bt("",{providedIn:"root",factory:()=>Me(mv,{optional:!0,skipSelf:!0})||ire()});function Sc(n){return U8(n)}function yv(n,e){return Fw(n,e?.equal)}var fM=class{[ua];constructor(e){this[ua]=e}destroy(){this[ua].destroy()}};function l0(n,e){let t=e?.injector??Me(yi),r=e?.manualCleanup!==!0?t.get(Pu):null,i,o=t.get(Jm,null,{optional:!0}),s=t.get(pc);return o!==null?(i=are(o.view,s,n),r instanceof j_&&r._lView===o.view&&(r=null)):i=lre(n,t.get(K_),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new fM(i)}var ZB=tn(dt({},G8),{cleanupFns:void 0,zone:null,onDestroyFn:zp,run(){let n=Km(!1);try{z8(this)}finally{Km(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=un(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],un(n)}}}),ore=tn(dt({},ZB),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Ep(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),sre=tn(dt({},ZB),{consumerMarkedDirty(){this.view[hn]|=8192,$f(this.view),this.notifier.notify(13)},destroy(){Ep(this),this.onDestroyFn(),this.cleanup(),this.view[Th]?.delete(this)}});function are(n,e,t){let r=Object.create(sre);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=KB(r,t),n[Th]??=new Set,n[Th].add(r),r.consumerMarkedDirty(r),r}function lre(n,e,t){let r=Object.create(ore);return r.fn=KB(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function KB(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var tj=Symbol("InputSignalNode#UNSET"),Dre=tn(dt({},Bw),{transformFn:void 0,applyValueToInputSignal(n,e){Cm(n,e)}});function nj(n,e){let t=Object.create(Dre);t.value=n,t.transformFn=e?.transform;function r(){if(wm(t),t.value===tj){let i=null;throw new Pt(-950,i)}return t.value}return r[ua]=t,r}var Are=new Bt("");Are.__NG_ELEMENT_ID__=n=>{let e=Bs();if(e===null)throw new Pt(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new Pt(204,!1)};function JB(n,e){return nj(n,e)}function Rre(n){return nj(tj,n)}var rj=(JB.required=Rre,JB);var dM=new Bt(""),Mre=new Bt("");function _v(n){return!n.moduleRef}function Nre(n){let e=_v(n)?n.r3Injector:n.moduleRef.injector,t=e.get(rr);return t.run(()=>{_v(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(hl),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),_v(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dM);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dM);s.add(o),n.moduleRef.onDestroy(()=>{Q_(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Lre(r,t,()=>{let o=e.get(Dh),s=o.add(),a=e.get(rM);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(mv,fv);if(qB(l||fv),!e.get(Mre,!0))return _v(n)?e.get(Xl):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(_v(n)){let f=e.get(Xl);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return Pre?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var Pre;function Lre(n,e,t){try{let r=t();return s0(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var E2=null;function kre(n=[],e){return yi.create({name:e,providers:[{provide:V_,useValue:"platform"},{provide:dM,useValue:new Set([()=>E2=null])},...n]})}function Ore(n=[]){if(E2)return E2;let e=kre(n);return E2=e,zB(),Fre(e),e}function Fre(n){let e=n.get(a2,null);fa(n,()=>{e?.forEach(t=>t())})}var nd=(()=>{class n{static __NG_ELEMENT_ID__=Bre}return n})();function Bre(n){return jre(Bs(),er(),(n&16)===16)}function jre(n,e,t){if(qf(n)&&!t){let r=ql(n.index,e);return new Zf(r,r)}else if(n.type&175){let r=e[ul];return new Zf(r,e)}return null}var pM=class{constructor(){}supports(e){return KR(e)}create(e){return new gM(e)}},Ure=(n,e)=>e,gM=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Ure}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<QB(r,i,o)?t:r,a=QB(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let c=a-i,f=l-i;if(c!=f){for(let y=0;y<c;y++){let p=y<o.length?o[y]:o[y]=0,_=p+y;f<=_&&_<c&&(o[y]=p+1)}let d=s.previousIndex;o[d]=f-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!KR(e))throw new Pt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,RB(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new mM(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new b2),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new b2),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},mM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},yM=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},b2=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yM,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function QB(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function ej(){return new S2([new pM])}var S2=(()=>{class n{factories;static \u0275prov=yt({token:n,providedIn:"root",factory:ej});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=Me(n,{optional:!0,skipSelf:!0});return n.create(t,r||ej())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Pt(901,!1)}}return n})();function ij(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;zr(8);try{let o=i?.injector??Ore(r),s=[uM({}),{provide:pc,useExisting:XB},P6,...t||[]],a=new iv({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Nre({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{zr(9)}}function u0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function oj(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function C2(n,e){let t=Ch(n),r=e.elementInjector||qm();return new $p(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}var lj=null;function Ph(){return lj}function _M(n){lj??=n}var vv=class{},vM=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(uj),providedIn:"platform"})}return n})();var uj=(()=>{class n extends vM{_location;_history;_doc=Me(_r);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ph().getBaseHref(this._doc)}onPopState(t){let r=Ph().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ph().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cj(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function sj(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function rd(n){return n&&n[0]!=="?"?`?${n}`:n}var I2=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(fj),providedIn:"root"})}return n})(),hj=new Bt(""),fj=(()=>{class n extends I2{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Me(_r).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cj(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+rd(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+rd(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+rd(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Un(vM),Un(hj,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),id=(()=>{class n{_subject=new Jt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Vre(sj(aj(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rd(r))}normalize(t){return n.stripTrailingSlash(zre(this._basePath,aj(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rd(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rd(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=rd;static joinWithSlash=cj;static stripTrailingSlash=sj;static \u0275fac=function(r){return new(r||n)(Un(I2))};static \u0275prov=yt({token:n,factory:()=>Gre(),providedIn:"root"})}return n})();function Gre(){return new id(Un(I2))}function zre(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function aj(n){return n.replace(/\/index.html$/,"")}function Vre(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var js=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(js||{}),Xr=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Xr||{}),Na=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Na||{}),kh={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function yj(n){return fl(n)[Qi.LocaleId]}function _j(n,e,t){let r=fl(n),i=[r[Qi.DayPeriodsFormat],r[Qi.DayPeriodsStandalone]],o=Kl(i,e);return Kl(o,t)}function vj(n,e,t){let r=fl(n),i=[r[Qi.DaysFormat],r[Qi.DaysStandalone]],o=Kl(i,e);return Kl(o,t)}function xj(n,e,t){let r=fl(n),i=[r[Qi.MonthsFormat],r[Qi.MonthsStandalone]],o=Kl(i,e);return Kl(o,t)}function wj(n,e){let r=fl(n)[Qi.Eras];return Kl(r,e)}function xv(n,e){let t=fl(n);return Kl(t[Qi.DateFormat],e)}function wv(n,e){let t=fl(n);return Kl(t[Qi.TimeFormat],e)}function Ev(n,e){let r=fl(n)[Qi.DateTimeFormat];return Kl(r,e)}function bv(n,e){let t=fl(n),r=t[Qi.NumberSymbols][e];if(typeof r>"u"){if(e===kh.CurrencyDecimal)return t[Qi.NumberSymbols][kh.Decimal];if(e===kh.CurrencyGroup)return t[Qi.NumberSymbols][kh.Group]}return r}function Ej(n){if(!n[Qi.ExtraData])throw new Pt(2303,!1)}function bj(n){let e=fl(n);return Ej(e),(e[Qi.ExtraData][2]||[]).map(r=>typeof r=="string"?xM(r):[xM(r[0]),xM(r[1])])}function Sj(n,e,t){let r=fl(n);Ej(r);let i=[r[Qi.ExtraData][0],r[Qi.ExtraData][1]],o=Kl(i,e)||[];return Kl(o,t)||[]}function Kl(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Pt(2304,!1)}function xM(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var Hre=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,T2={},qre=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Cj(n,e,t,r){let i=eie(n);e=Lh(t,e)||e;let s=[],a;for(;e;)if(a=qre.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let l=i.getTimezoneOffset();r&&(l=Tj(r,l),i=Qre(i,r));let c="";return s.forEach(f=>{let d=Kre(f);c+=d?d(i,t,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function N2(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Lh(n,e){let t=yj(n);if(T2[t]??={},T2[t][e])return T2[t][e];let r="";switch(e){case"shortDate":r=xv(n,Na.Short);break;case"mediumDate":r=xv(n,Na.Medium);break;case"longDate":r=xv(n,Na.Long);break;case"fullDate":r=xv(n,Na.Full);break;case"shortTime":r=wv(n,Na.Short);break;case"mediumTime":r=wv(n,Na.Medium);break;case"longTime":r=wv(n,Na.Long);break;case"fullTime":r=wv(n,Na.Full);break;case"short":let i=Lh(n,"shortTime"),o=Lh(n,"shortDate");r=D2(Ev(n,Na.Short),[i,o]);break;case"medium":let s=Lh(n,"mediumTime"),a=Lh(n,"mediumDate");r=D2(Ev(n,Na.Medium),[s,a]);break;case"long":let l=Lh(n,"longTime"),c=Lh(n,"longDate");r=D2(Ev(n,Na.Long),[l,c]);break;case"full":let f=Lh(n,"fullTime"),d=Lh(n,"fullDate");r=D2(Ev(n,Na.Full),[f,d]);break}return r&&(T2[t][e]=r),r}function D2(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function ku(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Wre(n,e){return ku(n,3).substring(0,e)}function mo(n,e,t=0,r=!1,i=!1){return function(o,s){let a=$re(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Wre(a,e);let l=bv(s,kh.MinusSign);return ku(a,e,l,r,i)}}function $re(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Pt(2301,!1)}}function ui(n,e,t=js.Format,r=!1){return function(i,o){return Yre(i,o,n,e,t,r)}}function Yre(n,e,t,r,i,o){switch(t){case 2:return xj(e,i,r)[n.getMonth()];case 1:return vj(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let c=bj(e),f=Sj(e,i,r),d=c.findIndex(y=>{if(Array.isArray(y)){let[p,_]=y,w=s>=p.hours&&a>=p.minutes,b=s<_.hours||s===_.hours&&a<_.minutes;if(p.hours<_.hours){if(w&&b)return!0}else if(w||b)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(d!==-1)return f[d]}return _j(e,i,r)[s<12?0:1];case 3:return wj(e,r)[n.getFullYear()<=0?0:1];default:let l=t;throw new Pt(2302,!1)}}function A2(n){return function(e,t,r){let i=-1*r,o=bv(t,kh.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+ku(s,2,o)+ku(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+ku(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+ku(s,2,o)+":"+ku(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+ku(s,2,o)+":"+ku(Math.abs(i%60),2,o);default:throw new Pt(2310,!1)}}}var Xre=0,M2=4;function Zre(n){let e=N2(n,Xre,1).getDay();return N2(n,0,1+(e<=M2?M2:M2+7)-e)}function Ij(n){let e=n.getDay(),t=e===0?-3:M2-e;return N2(n.getFullYear(),n.getMonth(),n.getDate()+t)}function wM(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=Ij(t),s=Zre(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return ku(i,n,bv(r,kh.MinusSign))}}function R2(n,e=!1){return function(t,r){let o=Ij(t).getFullYear();return ku(o,n,bv(r,kh.MinusSign),e)}}var EM={};function Kre(n){if(EM[n])return EM[n];let e;switch(n){case"G":case"GG":case"GGG":e=ui(3,Xr.Abbreviated);break;case"GGGG":e=ui(3,Xr.Wide);break;case"GGGGG":e=ui(3,Xr.Narrow);break;case"y":e=mo(0,1,0,!1,!0);break;case"yy":e=mo(0,2,0,!0,!0);break;case"yyy":e=mo(0,3,0,!1,!0);break;case"yyyy":e=mo(0,4,0,!1,!0);break;case"Y":e=R2(1);break;case"YY":e=R2(2,!0);break;case"YYY":e=R2(3);break;case"YYYY":e=R2(4);break;case"M":case"L":e=mo(1,1,1);break;case"MM":case"LL":e=mo(1,2,1);break;case"MMM":e=ui(2,Xr.Abbreviated);break;case"MMMM":e=ui(2,Xr.Wide);break;case"MMMMM":e=ui(2,Xr.Narrow);break;case"LLL":e=ui(2,Xr.Abbreviated,js.Standalone);break;case"LLLL":e=ui(2,Xr.Wide,js.Standalone);break;case"LLLLL":e=ui(2,Xr.Narrow,js.Standalone);break;case"w":e=wM(1);break;case"ww":e=wM(2);break;case"W":e=wM(1,!0);break;case"d":e=mo(2,1);break;case"dd":e=mo(2,2);break;case"c":case"cc":e=mo(7,1);break;case"ccc":e=ui(1,Xr.Abbreviated,js.Standalone);break;case"cccc":e=ui(1,Xr.Wide,js.Standalone);break;case"ccccc":e=ui(1,Xr.Narrow,js.Standalone);break;case"cccccc":e=ui(1,Xr.Short,js.Standalone);break;case"E":case"EE":case"EEE":e=ui(1,Xr.Abbreviated);break;case"EEEE":e=ui(1,Xr.Wide);break;case"EEEEE":e=ui(1,Xr.Narrow);break;case"EEEEEE":e=ui(1,Xr.Short);break;case"a":case"aa":case"aaa":e=ui(0,Xr.Abbreviated);break;case"aaaa":e=ui(0,Xr.Wide);break;case"aaaaa":e=ui(0,Xr.Narrow);break;case"b":case"bb":case"bbb":e=ui(0,Xr.Abbreviated,js.Standalone,!0);break;case"bbbb":e=ui(0,Xr.Wide,js.Standalone,!0);break;case"bbbbb":e=ui(0,Xr.Narrow,js.Standalone,!0);break;case"B":case"BB":case"BBB":e=ui(0,Xr.Abbreviated,js.Format,!0);break;case"BBBB":e=ui(0,Xr.Wide,js.Format,!0);break;case"BBBBB":e=ui(0,Xr.Narrow,js.Format,!0);break;case"h":e=mo(3,1,-12);break;case"hh":e=mo(3,2,-12);break;case"H":e=mo(3,1);break;case"HH":e=mo(3,2);break;case"m":e=mo(4,1);break;case"mm":e=mo(4,2);break;case"s":e=mo(5,1);break;case"ss":e=mo(5,2);break;case"S":e=mo(6,1);break;case"SS":e=mo(6,2);break;case"SSS":e=mo(6,3);break;case"Z":case"ZZ":case"ZZZ":e=A2(0);break;case"ZZZZZ":e=A2(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=A2(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=A2(2);break;default:return null}return EM[n]=e,e}function Tj(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Jre(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Qre(n,e,t){let i=n.getTimezoneOffset(),o=Tj(e,i);return Jre(n,-1*(o-i))}function eie(n){if(dj(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return N2(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Hre))return tie(r)}let e=new Date(n);if(!dj(e))throw new Pt(2311,!1);return e}function tie(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,l=Number(n[6]||0),c=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,l,c),e}function dj(n){return n instanceof Date&&!isNaN(n.valueOf())}var bM=/\s+/,pj=[],Jp=(()=>{class n{_ngEl;_renderer;initialClasses=pj;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(bM):pj}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(bM):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(bM).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(go(ni),go(o0))};static \u0275dir=Yl({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var P2=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},k2=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new P2(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),gj(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);gj(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(go(Ma),go($l),go(S2))};static \u0275dir=Yl({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function gj(n,e){n.context.$implicit=e.item}var dl=(()=>{class n{_viewContainer;_context=new L2;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mj(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mj(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(go(Ma),go($l))};static \u0275dir=Yl({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),L2=class{$implicit=null;ngIf=null};function mj(n,e){if(n&&!n.createEmbeddedView)throw new Pt(2020,!1)}function nie(n,e){return new Pt(2100,!1)}var rie="mediumDate",Dj=new Bt(""),Aj=new Bt(""),SM=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??rie,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Cj(t,s,o||this.locale,a)}catch(s){throw nie(n,s.message)}}static \u0275fac=function(r){return new(r||n)(go(mv,16),go(Dj,24),go(Aj,24))};static \u0275pipe=QR({name:"date",type:n,pure:!0})}return n})();var zi=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Qf({type:n});static \u0275inj=bh({})}return n})();function CM(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Sv=class{};var IM="browser";function Rj(n){return n===IM}var Cv=class{_doc;constructor(e){this._doc=e}manager},O2=(()=>{class n extends Cv{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Un(_r))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),B2=new Bt(""),MM=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof O2));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof O2);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Pt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Un(B2),Un(rr))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),TM="ng-app-id";function Mj(n){for(let e of n)e.remove()}function Nj(n,e){let t=e.createElement("style");return t.textContent=n,t}function iie(n,e,t,r){let i=n.head?.querySelectorAll(`style[${TM}="${e}"],link[${TM}="${e}"]`);if(i)for(let o of i)o.removeAttribute(TM),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function AM(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var NM=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,iie(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Nj);r?.forEach(i=>this.addUsage(i,this.external,AM))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(Mj(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Mj(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Nj(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,AM(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Un(_r),Un(i0),Un(l2,8),Un(Zp))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),DM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},PM=/%COMP%/g;var Lj="%COMP%",oie=`_nghost-${Lj}`,sie=`_ngcontent-${Lj}`,aie=!0,lie=new Bt("",{providedIn:"root",factory:()=>aie});function uie(n){return sie.replace(PM,n)}function cie(n){return oie.replace(PM,n)}function kj(n,e){return e.map(t=>t.replace(PM,n))}var LM=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,l=null,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new Iv(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof F2?i.applyToHost(t):i instanceof Tv&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case Ah.Emulated:o=new F2(l,c,r,this.appId,f,s,a,d,y);break;case Ah.ShadowDom:return new RM(l,c,t,r,s,a,this.nonce,d,y);default:o=new Tv(l,c,r,f,s,a,d,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Un(MM),Un(NM),Un(i0),Un(lie),Un(_r),Un(rr),Un(l2),Un(Kp,8))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),Iv=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(DM[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Pj(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Pj(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Pt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=DM[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=DM[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(xc.DashCase|xc.Important)?e.style.setProperty(t,r,i&xc.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&xc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Ph().getGlobalEventTarget(this.doc,e),!e))throw new Pt(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Pj(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var RM=class extends Iv{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,l,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=kj(i.id,f);for(let y of f){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=y,this.shadowRoot.appendChild(p)}let d=i.getExternalStyles?.();if(d)for(let y of d){let p=AM(y,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tv=class extends Iv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=c?kj(c,f):f,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&qp.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},F2=class extends Tv{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,l,c){let f=i+"-"+r.id;super(e,t,r,o,s,a,l,c,f),this.contentAttr=uie(f),this.hostAttr=cie(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var j2=class n extends vv{supportsDOMEvents=!0;static makeCurrent(){_M(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=hie();return t==null?null:fie(t)}resetBaseElement(){Dv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return CM(document.cookie,e)}},Dv=null;function hie(){return Dv=Dv||document.head.querySelector("base"),Dv?Dv.getAttribute("href"):null}function fie(n){return new URL(n,document.baseURI).pathname}var die=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})(),Oj=["alt","control","meta","shift"],pie={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gie={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Fj=(()=>{class n extends Cv{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ph().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Oj.forEach(c=>{let f=r.indexOf(c);f>-1&&(r.splice(f,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=pie[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Oj.forEach(s=>{if(s!==i){let a=gie[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Un(_r))};static \u0275prov=yt({token:n,factory:n.\u0275fac})}return n})();function kM(n,e,t){let r=dt({rootComponent:n,platformRef:t?.platformRef},mie(e));return ij(r)}function mie(n){return{appProviders:[...wie,...n?.providers??[]],platformProviders:xie}}function yie(){j2.makeCurrent()}function _ie(){return new Gl}function vie(){return AR(document),document}var xie=[{provide:Zp,useValue:IM},{provide:a2,useValue:yie,multi:!0},{provide:_r,useFactory:vie}];var wie=[{provide:V_,useValue:"root"},{provide:Gl,useFactory:_ie},{provide:B2,useClass:O2,multi:!0,deps:[_r]},{provide:B2,useClass:Fj,multi:!0,deps:[_r]},LM,NM,MM,{provide:ds,useExisting:LM},{provide:Sv,useClass:die},[]];var Bj=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Un(_r))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var In="primary",Gv=Symbol("RouteTitle"),UM=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function g0(n){return new UM(n)}function bie(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Sie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cc(n[t],e[t]))return!1;return!0}function Cc(n,e){let t=n?GM(n):void 0,r=e?GM(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!Wj(n[i],e[i]))return!1;return!0}function GM(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function $j(n){return n.length>0?n[n.length-1]:null}function Bh(n){return aE(n)?n:s0(n)?ji(Promise.resolve(n)):cn(n)}var Cie={exact:Xj,subset:Zj},Yj={exact:Iie,subset:Tie,ignored:()=>!0};function jj(n,e,t){return Cie[t.paths](n.root,e.root,t.matrixParams)&&Yj[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Iie(n,e){return Cc(n,e)}function Xj(n,e,t){if(!eg(n.segments,e.segments)||!z2(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Xj(n.children[r],e.children[r],t))return!1;return!0}function Tie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Wj(n[t],e[t]))}function Zj(n,e,t){return Kj(n,e,e.segments,t)}function Kj(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!eg(i,t)||e.hasChildren()||!z2(i,t,r))}else if(n.segments.length===t.length){if(!eg(n.segments,t)||!z2(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Zj(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!eg(n.segments,i)||!z2(n.segments,i,r)||!n.children[In]?!1:Kj(n.children[In],e,o,r)}}function z2(n,e,t){return e.every((r,i)=>Yj[t](n[i].parameters,r.parameters))}var Fh=class{root;queryParams;fragment;_queryParamMap;constructor(e=new kr([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=g0(this.queryParams),this._queryParamMap}toString(){return Rie.serialize(this)}},kr=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return V2(this)}},Qp=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=g0(this.parameters),this._parameterMap}toString(){return Qj(this)}};function Die(n,e){return eg(n,e)&&n.every((t,r)=>Cc(t.parameters,e[r].parameters))}function eg(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Aie(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===In&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==In&&(t=t.concat(e(i,r)))}),t}var tb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>new m0,providedIn:"root"})}return n})(),m0=class{parse(e){let t=new VM(e);return new Fh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Av(e.root,!0)}`,r=Pie(e.queryParams),i=typeof e.fragment=="string"?`#${Mie(e.fragment)}`:"";return`${t}${r}${i}`}},Rie=new m0;function V2(n){return n.segments.map(e=>Qj(e)).join("/")}function Av(n,e){if(!n.hasChildren())return V2(n);if(e){let t=n.children[In]?Av(n.children[In],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==In&&r.push(`${i}:${Av(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Aie(n,(r,i)=>i===In?[Av(n.children[In],!1)]:[`${i}:${Av(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[In]!=null?`${V2(n)}/${t[0]}`:`${V2(n)}/(${t.join("//")})`}}function Jj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function U2(n){return Jj(n).replace(/%3B/gi,";")}function Mie(n){return encodeURI(n)}function zM(n){return Jj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H2(n){return decodeURIComponent(n)}function Uj(n){return H2(n.replace(/\+/g,"%20"))}function Qj(n){return`${zM(n.path)}${Nie(n.parameters)}`}function Nie(n){return Object.entries(n).map(([e,t])=>`;${zM(e)}=${zM(t)}`).join("")}function Pie(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${U2(t)}=${U2(i)}`).join("&"):`${U2(t)}=${U2(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Lie=/^[^\/()?;#]+/;function OM(n){let e=n.match(Lie);return e?e[0]:""}var kie=/^[^\/()?;=#]+/;function Oie(n){let e=n.match(kie);return e?e[0]:""}var Fie=/^[^=?&#]+/;function Bie(n){let e=n.match(Fie);return e?e[0]:""}var jie=/^[^&#]+/;function Uie(n){let e=n.match(jie);return e?e[0]:""}var VM=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new kr([],{}):new kr([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[In]=new kr(e,t)),r}parseSegment(){let e=OM(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Pt(4009,!1);return this.capture(e),new Qp(H2(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Oie(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=OM(this.remaining);i&&(r=i,this.capture(r))}e[H2(t)]=H2(r)}parseQueryParam(e){let t=Bie(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Uie(this.remaining);s&&(r=s,this.capture(r))}let i=Uj(t),o=Uj(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=OM(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Pt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=In);let s=this.parseChildren();t[o??In]=Object.keys(s).length===1&&s[In]?s[In]:new kr([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Pt(4011,!1)}};function eU(n){return n.segments.length>0?new kr([],{[In]:n}):n}function tU(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=tU(i);if(r===In&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new kr(n.segments,e);return Gie(t)}function Gie(n){if(n.numberOfChildren===1&&n.children[In]){let e=n.children[In];return new kr(n.segments.concat(e.segments),e.children)}return n}function y0(n){return n instanceof Fh}function zie(n,e,t=null,r=null){let i=nU(n);return rU(i,e,t,r)}function nU(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new kr(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=eU(r);return e??i}function rU(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return FM(i,i,i,t,r);let o=Vie(e);if(o.toRoot())return FM(i,i,new kr([],{}),t,r);let s=Hie(o,i,n),a=s.processChildren?Mv(s.segmentGroup,s.index,o.commands):oU(s.segmentGroup,s.index,o.commands);return FM(i,s.segmentGroup,a,t,r)}function q2(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lv(n){return typeof n=="object"&&n!=null&&n.outlets}function FM(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(f=>`${f}`):`${c}`});let s;n===e?s=t:s=iU(n,e,t);let a=eU(tU(s));return new Fh(a,o,i)}function iU(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=iU(o,e,t)}),new kr(n.segments,r)}var W2=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&q2(r[0]))throw new Pt(4003,!1);let i=r.find(Lv);if(i&&i!==$j(r))throw new Pt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Vie(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new W2(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new W2(t,e,r)}var f0=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Hie(n,e,t){if(n.isAbsolute)return new f0(e,!0,0);if(!t)return new f0(e,!1,NaN);if(t.parent===null)return new f0(t,!0,0);let r=q2(n.commands[0])?0:1,i=t.segments.length-1+r;return qie(t,i,n.numberOfDoubleDots)}function qie(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Pt(4005,!1);i=r.segments.length}return new f0(r,!1,i-o)}function Wie(n){return Lv(n[0])?n[0].outlets:{[In]:n}}function oU(n,e,t){if(n??=new kr([],{}),n.segments.length===0&&n.hasChildren())return Mv(n,e,t);let r=$ie(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new kr(n.segments.slice(0,r.pathIndex),{});return o.children[In]=new kr(n.segments.slice(r.pathIndex),n.children),Mv(o,0,i)}else return r.match&&i.length===0?new kr(n.segments,{}):r.match&&!n.hasChildren()?HM(n,e,t):r.match?Mv(n,0,i):HM(n,e,t)}function Mv(n,e,t){if(t.length===0)return new kr(n.segments,{});{let r=Wie(t),i={};if(Object.keys(r).some(o=>o!==In)&&n.children[In]&&n.numberOfChildren===1&&n.children[In].segments.length===0){let o=Mv(n.children[In],e,t);return new kr(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=oU(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new kr(n.segments,i)}}function $ie(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Lv(a))break;let l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!zj(l,c,s))return o;r+=2}else{if(!zj(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function HM(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Lv(o)){let l=Yie(o.outlets);return new kr(r,l)}if(i===0&&q2(t[0])){let l=n.segments[e];r.push(new Qp(l.path,Gj(t[0]))),i++;continue}let s=Lv(o)?o.outlets[In]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&q2(a)?(r.push(new Qp(s,Gj(a))),i+=2):(r.push(new Qp(s,{})),i++)}return new kr(r,{})}function Yie(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=HM(new kr([],{}),0,r))}),e}function Gj(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function zj(n,e,t){return n==t.path&&Cc(e,t.parameters)}var Nv="imperative",ps=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ps||{}),Jl=class{id;url;constructor(e,t){this.id=e,this.url=t}},_0=class extends Jl{type=ps.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sd=class extends Jl{urlAfterRedirects;type=ps.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pa=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Pa||{}),$2=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})($2||{}),Oh=class extends Jl{reason;code;type=ps.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ad=class extends Jl{reason;code;type=ps.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},kv=class extends Jl{error;target;type=ps.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Y2=class extends Jl{urlAfterRedirects;state;type=ps.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qM=class extends Jl{urlAfterRedirects;state;type=ps.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WM=class extends Jl{urlAfterRedirects;state;shouldActivate;type=ps.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$M=class extends Jl{urlAfterRedirects;state;type=ps.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},YM=class extends Jl{urlAfterRedirects;state;type=ps.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},XM=class{route;type=ps.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ZM=class{route;type=ps.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},KM=class{snapshot;type=ps.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JM=class{snapshot;type=ps.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},QM=class{snapshot;type=ps.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e5=class{snapshot;type=ps.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ov=class{},v0=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Xie(n){return!(n instanceof Ov)&&!(n instanceof v0)}function Zie(n,e){return n.providers&&!n._injector&&(n._injector=uv(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ou(n){return n.outlet||In}function Kie(n,e){let t=n.filter(r=>Ou(r)===e);return t.push(...n.filter(r=>Ou(r)!==e)),t}function w0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var t5=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return w0(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zv(this.rootInjector)}},zv=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new t5(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Un(Ii))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X2=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=n5(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=n5(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=r5(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return r5(e,this._root).map(t=>t.value)}};function n5(n,e){if(n===e.value)return e;for(let t of e.children){let r=n5(n,t);if(r)return r}return null}function r5(n,e){if(n===e.value)return[e];for(let t of e.children){let r=r5(n,t);if(r.length)return r.unshift(e),r}return[]}var pl=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function h0(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Z2=class extends X2{snapshot;constructor(e,t){super(e),this.snapshot=t,f5(this,e)}toString(){return this.snapshot.toString()}};function sU(n){let e=Jie(n),t=new Oo([new Qp("",{})]),r=new Oo({}),i=new Oo({}),o=new Oo({}),s=new Oo(""),a=new tg(t,r,o,s,i,In,n,e.root);return a.snapshot=e.root,new Z2(new pl(a,[]),e)}function Jie(n){let e={},t={},r={},o=new d0([],e,r,"",t,In,n,null,{});return new J2("",new pl(o,[]))}var tg=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(or(c=>c[Gv]))??cn(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(or(e=>g0(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(or(e=>g0(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function K2(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:dt(dt({},e.params),n.params),data:dt(dt({},e.data),n.data),resolve:dt(dt(dt(dt({},n.data),e.data),i?.data),n._resolvedData)}:r={params:dt({},n.params),data:dt({},n.data),resolve:dt(dt({},n.data),n._resolvedData??{})},i&&lU(i)&&(r.resolve[Gv]=i.title),r}var d0=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Gv]}constructor(e,t,r,i,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=g0(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=g0(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},J2=class extends X2{url;constructor(e,t){super(t),this.url=e,f5(this,t)}toString(){return aU(this._root)}};function f5(n,e){e.value._routerState=n,e.children.forEach(t=>f5(n,t))}function aU(n){let e=n.children.length>0?` { ${n.children.map(aU).join(", ")} } `:"";return`${n.value}${e}`}function BM(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cc(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cc(e.params,t.params)||n.paramsSubject.next(t.params),Sie(e.url,t.url)||n.urlSubject.next(t.url),Cc(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function i5(n,e){let t=Cc(n.params,e.params)&&Die(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||i5(n.parent,e.parent))}function lU(n){return typeof n.title=="string"||n.title===null}var Qie=new Bt(""),uU=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=In;activateEvents=new li;deactivateEvents=new li;attachEvents=new li;detachEvents=new li;routerOutletData=rj();parentContexts=Me(zv);location=Me(Ma);changeDetector=Me(nd);inputBinder=Me(nb,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Pt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Pt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Pt(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Pt(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new o5(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yl({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Kf]})}return n})(),o5=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===tg?this.route:e===zv?this.childContexts:e===Qie?this.outletData:this.parent.get(e,t)}},nb=new Bt("");var cU=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vr({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Kt(0,"router-outlet")},dependencies:[uU],encapsulation:2})}return n})();function d5(n){let e=n.children&&n.children.map(d5),t=e?tn(dt({},n),{children:e}):dt({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==In&&(t.component=cU),t}function eoe(n,e,t){let r=Fv(n,e._root,t?t._root:void 0);return new Z2(r,e)}function Fv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=toe(n,e,t);return new pl(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Fv(n,a)),s}}let r=noe(e.value),i=e.children.map(o=>Fv(n,o));return new pl(r,i)}}function toe(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fv(n,r,i);return Fv(n,r)})}function noe(n){return new tg(new Oo(n.url),new Oo(n.params),new Oo(n.queryParams),new Oo(n.fragment),new Oo(n.data),n.outlet,n.component,n)}var Bv=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},hU="ngNavigationCancelingError";function Q2(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=y0(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=fU(!1,Pa.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function fU(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[hU]=!0,t.cancellationCode=e,t}function roe(n){return dU(n)&&y0(n.url)}function dU(n){return!!n&&n[hU]}var ioe=(n,e,t,r)=>or(i=>(new s5(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),s5=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),BM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=h0(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=h0(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=h0(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=h0(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new e5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new JM(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(BM(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),BM(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},eb=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},p0=class{component;route;constructor(e,t){this.component=e,this.route=t}};function ooe(n,e,t){let r=n._root,i=e?e._root:null;return Rv(r,i,t,[r.value])}function soe(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function E0(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ZD(n)?n:e.get(n):r}function Rv(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=h0(e);return n.children.forEach(s=>{aoe(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Pv(a,t.getContext(s),i)),i}function aoe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=loe(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new eb(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Rv(n,e,a?a.children:null,r,i):Rv(n,e,t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new p0(a.outlet.component,s))}else s&&Pv(e,a,i),i.canActivateChecks.push(new eb(r)),o.component?Rv(n,null,a?a.children:null,r,i):Rv(n,null,t,r,i);return i}function loe(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!eg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eg(n.url,e.url)||!Cc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!i5(n,e)||!Cc(n.queryParams,e.queryParams);case"paramsChange":default:return!i5(n,e)}}function Pv(n,e,t){let r=h0(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Pv(s,e.children.getContext(o),t):Pv(s,null,t):Pv(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new p0(e.outlet.component,i)):t.canDeactivateChecks.push(new p0(null,i)):t.canDeactivateChecks.push(new p0(null,i))}function Vv(n){return typeof n=="function"}function uoe(n){return typeof n=="boolean"}function coe(n){return n&&Vv(n.canLoad)}function hoe(n){return n&&Vv(n.canActivate)}function foe(n){return n&&Vv(n.canActivateChild)}function doe(n){return n&&Vv(n.canDeactivate)}function poe(n){return n&&Vv(n.canMatch)}function pU(n){return n instanceof _h||n?.name==="EmptyError"}var G2=Symbol("INITIAL_VALUE");function x0(){return cs(n=>lE(n.map(e=>e.pipe(Ru(1),zm(G2)))).pipe(or(e=>{for(let t of e)if(t!==!0){if(t===G2)return G2;if(t===!1||goe(t))return t}return!0}),Fs(e=>e!==G2),Ru(1)))}function goe(n){return y0(n)||n instanceof Bv}function moe(n,e){return Fo(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?cn(tn(dt({},t),{guardsResult:!0})):yoe(s,r,i,n).pipe(Fo(a=>a&&uoe(a)?_oe(r,o,n,e):cn(a)),or(a=>tn(dt({},t),{guardsResult:a})))})}function yoe(n,e,t,r){return ji(n).pipe(Fo(i=>boe(i.component,i.route,t,e,r)),vh(i=>i!==!0,!0))}function _oe(n,e,t,r){return ji(e).pipe(Um(i=>Bm(xoe(i.route.parent,r),voe(i.route,r),Eoe(n,i.path,t),woe(n,i.route,t))),vh(i=>i!==!0,!0))}function voe(n,e){return n!==null&&e&&e(new QM(n)),cn(!0)}function xoe(n,e){return n!==null&&e&&e(new KM(n)),cn(!0)}function woe(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return cn(!0);let i=r.map(o=>L_(()=>{let s=w0(e)??t,a=E0(o,s),l=hoe(a)?a.canActivate(e,n):fa(s,()=>a(e,n));return Bh(l).pipe(vh())}));return cn(i).pipe(x0())}function Eoe(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>soe(s)).filter(s=>s!==null).map(s=>L_(()=>{let a=s.guards.map(l=>{let c=w0(s.node)??t,f=E0(l,c),d=foe(f)?f.canActivateChild(r,n):fa(c,()=>f(r,n));return Bh(d).pipe(vh())});return cn(a).pipe(x0())}));return cn(o).pipe(x0())}function boe(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return cn(!0);let s=o.map(a=>{let l=w0(e)??i,c=E0(a,l),f=doe(c)?c.canDeactivate(n,e,t,r):fa(l,()=>c(n,e,t,r));return Bh(f).pipe(vh())});return cn(s).pipe(x0())}function Soe(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return cn(!0);let o=i.map(s=>{let a=E0(s,n),l=coe(a)?a.canLoad(e,t):fa(n,()=>a(e,t));return Bh(l)});return cn(o).pipe(x0(),gU(r))}function gU(n){return TD(fo(e=>{if(typeof e!="boolean")throw Q2(n,e)}),or(e=>e===!0))}function Coe(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return cn(!0);let o=i.map(s=>{let a=E0(s,n),l=poe(a)?a.canMatch(e,t):fa(n,()=>a(e,t));return Bh(l)});return cn(o).pipe(x0(),gU(r))}var jv=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Uv=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function c0(n){return Fm(new jv(n))}function Ioe(n){return Fm(new Pt(4e3,!1))}function Toe(n){return Fm(fU(!1,Pa.GuardRejected))}var a5=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return cn(r);if(i.numberOfChildren>1||!i.children[In])return Ioe(`${e.redirectTo}`);i=i.children[In]}}applyRedirectCommands(e,t,r,i,o){return Doe(t,i,o).pipe(or(s=>{if(s instanceof Fh)throw new Uv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Uv(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Fh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new kr(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Pt(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Doe(n,e,t){if(typeof n=="string")return cn(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:f,title:d}=e;return Bh(fa(t,()=>r({params:c,data:f,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:d})))}var l5={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Aoe(n,e,t,r,i){let o=mU(n,e,t);return o.matched?(r=Zie(e,r),Coe(r,e,t,i).pipe(or(s=>s===!0?o:dt({},l5)))):cn(o)}function mU(n,e,t){if(e.path==="**")return Roe(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?dt({},l5):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bie)(t,n,e);if(!i)return dt({},l5);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?dt(dt({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Roe(n){return{matched:!0,parameters:n.length>0?$j(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Vj(n,e,t,r){return t.length>0&&Poe(n,t,r)?{segmentGroup:new kr(e,Noe(r,new kr(t,n.children))),slicedSegments:[]}:t.length===0&&Loe(n,t,r)?{segmentGroup:new kr(n.segments,Moe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new kr(n.segments,n.children),slicedSegments:t}}function Moe(n,e,t,r){let i={};for(let o of t)if(rb(n,e,o)&&!r[Ou(o)]){let s=new kr([],{});i[Ou(o)]=s}return dt(dt({},r),i)}function Noe(n,e){let t={};t[In]=e;for(let r of n)if(r.path===""&&Ou(r)!==In){let i=new kr([],{});t[Ou(r)]=i}return t}function Poe(n,e,t){return t.some(r=>rb(n,e,r)&&Ou(r)!==In)}function Loe(n,e,t){return t.some(r=>rb(n,e,r))}function rb(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function koe(n,e,t){return e.length===0&&!n.children[t]}var u5=class{};function Ooe(n,e,t,r,i,o,s="emptyOnly"){return new c5(n,e,t,r,i,s,o).recognize()}var Foe=31,c5=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new a5(this.urlSerializer,this.urlTree)}noMatchError(e){return new Pt(4002,`'${e.segmentGroup}'`)}recognize(){let e=Vj(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(or(({children:t,rootSnapshot:r})=>{let i=new pl(r,t),o=new J2("",i),s=zie(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new d0([],Object.freeze({}),Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),In,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,In,t).pipe(or(r=>({children:r,rootSnapshot:t})),jf(r=>{if(r instanceof Uv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof jv?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(or(s=>s instanceof pl?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return ji(o).pipe(Um(s=>{let a=r.children[s],l=Kie(t,s);return this.processSegmentGroup(e,l,a,s,i)}),OD((s,a)=>(s.push(...a),s)),Uf(null),kD(),Fo(s=>{if(s===null)return c0(r);let a=yU(s);return Boe(a),cn(a)}))}processSegment(e,t,r,i,o,s,a){return ji(t).pipe(Um(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,s,a).pipe(jf(c=>{if(c instanceof jv)return cn(null);throw c}))),vh(l=>!!l),jf(l=>{if(pU(l))return koe(r,i,o)?cn(new u5):c0(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,l){return Ou(r)!==s&&(s===In||!rb(i,o,r))?c0(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,l):c0(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:f,positionalParamSegments:d,remainingSegments:y}=mU(t,i,o);if(!l)return c0(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Foe&&(this.allowRedirects=!1));let p=new d0(o,c,Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,Hj(i),Ou(i),i.component??i._loadedComponent??null,i,qj(i)),_=K2(p,a,this.paramsInheritanceStrategy);return p.params=Object.freeze(_.params),p.data=Object.freeze(_.data),this.applyRedirects.applyRedirectCommands(f,i.redirectTo,d,p,e).pipe(cs(b=>this.applyRedirects.lineralizeSegments(i,b)),Fo(b=>this.processSegment(e,r,t,b.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Aoe(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(cs(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(cs(({routes:c})=>{let f=r._loadedInjector??e,{parameters:d,consumedSegments:y,remainingSegments:p}=l,_=new d0(y,d,Object.freeze(dt({},this.urlTree.queryParams)),this.urlTree.fragment,Hj(r),Ou(r),r.component??r._loadedComponent??null,r,qj(r)),w=K2(_,s,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let{segmentGroup:b,slicedSegments:S}=Vj(t,y,p,c);if(S.length===0&&b.hasChildren())return this.processChildren(f,c,b,_).pipe(or(A=>new pl(_,A)));if(c.length===0&&S.length===0)return cn(new pl(_,[]));let T=Ou(r)===o;return this.processSegment(f,c,b,S,T?In:o,!0,_).pipe(or(A=>new pl(_,A instanceof pl?[A]:[])))}))):c0(t)))}getChildConfig(e,t,r){return t.children?cn({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?cn({routes:t._loadedRoutes,injector:t._loadedInjector}):Soe(e,t,r,this.urlSerializer).pipe(Fo(i=>i?this.configLoader.loadChildren(e,t).pipe(fo(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Toe(t))):cn({routes:[],injector:e})}};function Boe(n){n.sort((e,t)=>e.value.outlet===In?-1:t.value.outlet===In?1:e.value.outlet.localeCompare(t.value.outlet))}function joe(n){let e=n.value.routeConfig;return e&&e.path===""}function yU(n){let e=[],t=new Set;for(let r of n){if(!joe(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yU(r.children);e.push(new pl(r.value,i))}return e.filter(r=>!t.has(r))}function Hj(n){return n.data||{}}function qj(n){return n.resolve||{}}function Uoe(n,e,t,r,i,o){return Fo(s=>Ooe(n,e,t,r,s.extractedUrl,i,o).pipe(or(({state:a,tree:l})=>tn(dt({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function Goe(n,e){return Fo(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return cn(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of _U(l))s.add(c);let a=0;return ji(s).pipe(Um(l=>o.has(l)?zoe(l,r,n,e):(l.data=K2(l,l.parent,n).resolve,cn(void 0))),fo(()=>a++),Gm(1),Fo(l=>a===s.size?cn(t):Os))})}function _U(n){let e=n.children.map(t=>_U(t)).flat();return[n,...e]}function zoe(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!lU(i)&&(o[Gv]=i.title),L_(()=>(n.data=K2(n,n.parent,t).resolve,Voe(o,n,e,r).pipe(or(s=>(n._resolvedData=s,n.data=dt(dt({},n.data),s),null)))))}function Voe(n,e,t,r){let i=GM(n);if(i.length===0)return cn({});let o={};return ji(i).pipe(Fo(s=>Hoe(n[s],e,t,r).pipe(vh(),fo(a=>{if(a instanceof Bv)throw Q2(new m0,a);o[s]=a}))),Gm(1),or(()=>o),jf(s=>pU(s)?Os:Fm(s)))}function Hoe(n,e,t,r){let i=w0(e)??r,o=E0(n,i),s=o.resolve?o.resolve(e,t):fa(i,()=>o(e,t));return Bh(s)}function jM(n){return cs(e=>{let t=n(e);return t?ji(t).pipe(or(()=>e)):cn(e)})}var vU=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===In);return r}getResolvedTitleForRoute(t){return t.data[Gv]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(qoe),providedIn:"root"})}return n})(),qoe=(()=>{class n extends vU{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Un(Bj))};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ib=new Bt("",{providedIn:"root",factory:()=>({})}),ob=new Bt(""),xU=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Me(lM);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return cn(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Bh(fa(t,()=>r.loadComponent())).pipe(or(wU),cs(EU),fo(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),k_(()=>{this.componentLoaders.delete(r)})),o=new Nm(i,()=>new Jt).pipe(Mm());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return cn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Woe(r,this.compiler,t,this.onLoadEndListener).pipe(k_(()=>{this.childrenLoaders.delete(r)})),s=new Nm(o,()=>new Jt).pipe(Mm());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Woe(n,e,t,r){return Bh(fa(t,()=>n.loadChildren())).pipe(or(wU),cs(EU),Fo(i=>i instanceof y2||Array.isArray(i)?cn(i):ji(e.compileModuleAsync(i))),or(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ob,[],{optional:!0,self:!0}).flat()),{routes:s.map(d5),injector:o}}))}function $oe(n){return n&&typeof n=="object"&&"default"in n}function wU(n){return $oe(n)?n.default:n}function EU(n){return cn(n)}var p5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(Yoe),providedIn:"root"})}return n})(),Yoe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),bU=new Bt("");var SU=new Bt(""),CU=(()=>{class n{currentNavigation=Gn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Jt;transitionAbortWithErrorSubject=new Jt;configLoader=Me(xU);environmentInjector=Me(Ii);destroyRef=Me(Pu);urlSerializer=Me(tb);rootContexts=Me(zv);location=Me(id);inputBindingEnabled=Me(nb,{optional:!0})!==null;titleStrategy=Me(vU);options=Me(ib,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Me(p5);createViewTransition=Me(bU,{optional:!0});navigationErrorHandler=Me(SU,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>cn(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new XM(i)),r=i=>this.events.next(new ZM(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Sc(()=>{this.transitions?.next(tn(dt({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Oo(null),this.transitions.pipe(Fs(r=>r!==null),cs(r=>{let i=!1;return cn(r).pipe(cs(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pa.SupersededByNewNavigation),Os;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?tn(dt({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new ad(o.id,this.urlSerializer.serialize(o.rawUrl),"",$2.IgnoredSameUrlNavigation)),o.resolve(!1),Os;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return cn(o).pipe(cs(l=>(this.events.next(new _0(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Os:Promise.resolve(l))),Uoe(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),fo(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let c=new Y2(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:c,source:f,restoredState:d,extras:y}=o,p=new _0(l,this.urlSerializer.serialize(c),f,d);this.events.next(p);let _=sU(this.rootComponentType).snapshot;return this.currentTransition=r=tn(dt({},o),{targetSnapshot:_,urlAfterRedirects:c,extras:tn(dt({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(w=>(w.finalUrl=c,w)),cn(r)}else return this.events.next(new ad(o.id,this.urlSerializer.serialize(o.extractedUrl),"",$2.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Os}),fo(o=>{let s=new qM(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),or(o=>(this.currentTransition=r=tn(dt({},o),{guards:ooe(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),moe(this.environmentInjector,o=>this.events.next(o)),fo(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Q2(this.urlSerializer,o.guardsResult);let s=new WM(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Fs(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Pa.GuardRejected),!1)),jM(o=>{if(o.guards.canActivateChecks.length!==0)return cn(o).pipe(fo(s=>{let a=new $M(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),cs(s=>{let a=!1;return cn(s).pipe(Goe(this.paramsInheritanceStrategy,this.environmentInjector),fo({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Pa.NoDataFromResolver)}}))}),fo(s=>{let a=new YM(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),jM(o=>{let s=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=w0(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(fo(f=>{a.component=f}),or(()=>{})))}for(let c of a.children)l.push(...s(c));return l};return lE(s(o.targetSnapshot.root)).pipe(Uf(null),Ru(1))}),jM(()=>this.afterPreactivation()),cs(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?ji(a).pipe(or(()=>r)):cn(r)}),or(o=>{let s=eoe(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=tn(dt({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),fo(()=>{this.events.next(new Ov)}),ioe(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Ru(1),xh(new Bn(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Fs(()=>!i&&!r.targetRouterState),fo(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Pa.Aborted)}))),fo({next:o=>{i=!0,this.lastSuccessfulNavigation=Sc(this.currentNavigation),this.events.next(new sd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),xh(this.transitionAbortWithErrorSubject.pipe(fo(o=>{throw o}))),k_(()=>{i||this.cancelNavigationTransition(r,"",Pa.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),jf(o=>{if(this.destroyed)return r.resolve(!1),Os;if(i=!0,dU(o))this.events.next(new Oh(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),roe(o)?this.events.next(new v0(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new kv(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=fa(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Bv){let{message:l,cancellationCode:c}=Q2(this.urlSerializer,a);this.events.next(new Oh(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new v0(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return Os}))}))}cancelNavigationTransition(t,r,i){let o=new Oh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Sc(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xoe(n){return n!==Nv}var Zoe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(Koe),providedIn:"root"})}return n})(),h5=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Koe=(()=>{class n extends h5{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IU=(()=>{class n{urlSerializer=Me(tb);options=Me(ib,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Me(id);urlHandlingStrategy=Me(p5);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Fh;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Fh?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=sU(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:()=>Me(Joe),providedIn:"root"})}return n})(),Joe=(()=>{class n extends IU{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof _0?this.updateStateMemento():t instanceof ad?this.commitTransition(r):t instanceof Y2?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ov?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Oh&&t.code!==Pa.SupersededByNewNavigation&&t.code!==Pa.Redirect?this.restoreHistory(r):t instanceof kv?this.restoreHistory(r,!0):t instanceof sd&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,l=dt(dt({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",l)}else{let a=dt(dt({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TU(n,e){n.events.pipe(Fs(t=>t instanceof sd||t instanceof Oh||t instanceof kv||t instanceof ad),or(t=>t instanceof sd||t instanceof ad?0:(t instanceof Oh?t.code===Pa.Redirect||t.code===Pa.SupersededByNewNavigation:!1)?2:1),Fs(t=>t!==2),Ru(1)).subscribe(()=>{e()})}var Qoe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ese={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},g5=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Me(eM);stateManager=Me(IU);options=Me(ib,{optional:!0})||{};pendingTasks=Me(Dh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Me(CU);urlSerializer=Me(tb);location=Me(id);urlHandlingStrategy=Me(p5);injector=Me(Ii);_events=new Jt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Me(Zoe);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Me(ob,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Me(nb,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Sc(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Oh&&r.code!==Pa.Redirect&&r.code!==Pa.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sd)this.navigated=!0;else if(r instanceof v0){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=dt({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Xoe(i.source)},s);this.scheduleNavigation(a,Nv,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Xie(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nv,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=dt({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(hl)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Sc(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(d5),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=dt(dt({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let d;try{let y=i?i.snapshot:this.routerState.snapshot.root;d=nU(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return rU(d,t,f,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=y0(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Nv,null,r)}navigate(t,r={skipLocationChange:!1}){return tse(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Mp(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=dt({},Qoe):r===!1?i=dt({},ese):i=r,y0(t))return jj(this.currentUrlTree,t,i);let o=this.parseUrl(t);return jj(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,y)=>{a=d,l=y});let f=this.pendingTasks.add();return TU(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tse(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Pt(4008,!1)}var nse=new Bt("");function m5(n,...e){return kp([{provide:ob,multi:!0,useValue:n},[],{provide:tg,useFactory:rse,deps:[g5]},{provide:_2,multi:!0,useFactory:ise},e.map(t=>t.\u0275providers)])}function rse(n){return n.routerState.root}function ise(){let n=Me(yi);return e=>{let t=n.get(Xl);if(e!==t.components[0])return;let r=n.get(g5),i=n.get(ose);n.get(sse)===1&&r.initialNavigation(),n.get(ase,null,{optional:!0})?.setUpPreloading(),n.get(nse,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ose=new Bt("",{factory:()=>new Jt}),sse=new Bt("",{providedIn:"root",factory:()=>1});var ase=new Bt("");var DU=[];var AU={providers:[OA(),cM({eventCoalescing:!0}),m5(DU)]};var Jo={ADD:"add",REMOVE:"remove"};var Fu={PROPERTYCHANGE:"propertychange"};var gt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};var y5=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Ic=y5;function RU(n,e,t){let r,i;t=t||Us;let o=0,s=n.length,a=!1;for(;o<s;)r=o+(s-o>>1),i=+t(n[r],e),i<0?o=r+1:(s=r,a=!i);return a?o:~o}function Us(n,e){return n>e?1:n<e?-1:0}function sb(n,e){return n<e?1:n>e?-1:0}function ld(n,e,t){if(n[0]<=e)return 0;let r=n.length;if(e<=n[r-1])return r-1;if(typeof t=="function"){for(let i=1;i<r;++i){let o=n[i];if(o===e)return i;if(o<e)return t(e,n[i-1],o)>0?i-1:i}return r-1}if(t>0){for(let i=1;i<r;++i)if(n[i]<e)return i-1;return r-1}if(t<0){for(let i=1;i<r;++i)if(n[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(n[i]==e)return i;if(n[i]<e)return n[i-1]-e<e-n[i]?i-1:i}return r-1}function MU(n,e,t){for(;e<t;){let r=n[e];n[e]=n[t],n[t]=r,++e,--t}}function zn(n,e){let t=Array.isArray(e)?e:[e],r=t.length;for(let i=0;i<r;i++)n[n.length]=t[i]}function Gs(n,e){let t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function NU(n,e,t){let r=e||Us;return n.every(function(i,o){if(o===0)return!0;let s=r(n[o-1],i);return!(s>0||t&&s===0)})}function Bu(){return!0}function Ql(){return!1}function jh(){}function ab(n){let e,t,r;return function(){let i=Array.prototype.slice.call(arguments);return(!t||this!==r||!Gs(i,t))&&(r=this,t=i,e=n.apply(this,arguments)),e}}function b0(n){function e(){let t;try{t=n()}catch(r){return Promise.reject(r)}return t instanceof Promise?t:Promise.resolve(t)}return e()}var _5=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var _i=_5;var v5=class extends Ic{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;let r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(t)||i.push(t)}dispatchEvent(e){let t=typeof e=="string",r=t?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;let o=t?new _i(e):e;o.target||(o.target=this.eventTarget_||this);let s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in s||(s[r]=0,a[r]=0),++s[r];let l;for(let c=0,f=i.length;c<f;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(o):l=i[c].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,jh);delete s[r]}return l}disposeInternal(){this.listeners_&&Fl(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;let r=this.listeners_[e];if(!r)return;let i=r.indexOf(t);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=jh,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}},eu=v5;function an(n,e,t,r,i){if(i){let s=t;t=function(a){return n.removeEventListener(e,t),s.call(r??this,a)}}else r&&r!==n&&(t=t.bind(r));let o={target:n,type:e,listener:t};return n.addEventListener(e,t),o}function S0(n,e,t,r){return an(n,e,t,r,!0)}function An(n){n&&n.target&&(n.target.removeEventListener(n.type,n.listener),Fl(n))}var C0=class extends eu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(gt.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){let r=e.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=an(this,e[o],t);return i}return an(this,e,t)}onceInternal(e,t){let r;if(Array.isArray(e)){let i=e.length;r=new Array(i);for(let o=0;o<i;++o)r[o]=S0(this,e[o],t)}else r=S0(this,e,t);return t.ol_key=r,r}unInternal(e,t){let r=t.ol_key;if(r)lb(r);else if(Array.isArray(e))for(let i=0,o=e.length;i<o;++i)this.removeEventListener(e[i],t);else this.removeEventListener(e,t)}};C0.prototype.on;C0.prototype.once;C0.prototype.un;function lb(n){if(Array.isArray(n))for(let e=0,t=n.length;e<t;++e)An(n[e]);else An(n)}var ub=C0;function Ct(){throw new Error("Unimplemented abstract method.")}var use=0;function _t(n){return n.ol_uid||(n.ol_uid=String(++use))}var cb=class extends _i{constructor(e,t,r){super(e),this.key=t,this.oldValue=r}},x5=class extends ub{constructor(e){super(),this.on,this.once,this.un,_t(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new cb(r,e,t)),r=Fu.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new cb(r,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,r){let i=this.values_||(this.values_={});if(r)i[e]=t;else{let o=i[e];i[e]=t,o!==t&&this.notify(e,o)}}setProperties(e,t){for(let r in e)this.set(r,e[r],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){let r=this.values_[e];delete this.values_[e],la(this.values_)&&(this.values_=null),t||this.notify(e,r)}}},yo=x5;var PU={LENGTH:"length"},I0=class extends _i{constructor(e,t,r){super(e),this.element=t,this.index=r}},w5=class extends yo{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,r=e.length;t<r;++t)this.push(e[t]);return this}forEach(e){let t=this.array_;for(let r=0,i=t.length;r<i;++r)e(t[r],r,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(PU.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new I0(Jo.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){let t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){let t=this.array_;for(let r=0,i=t.length;r<i;++r)if(t[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;let t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new I0(Jo.REMOVE,t,e)),t}setAt(e,t){let r=this.getLength();if(e>=r){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);let i=this.array_[e];this.array_[e]=t,this.dispatchEvent(new I0(Jo.REMOVE,i,e)),this.dispatchEvent(new I0(Jo.ADD,t,e))}updateLength_(){this.set(PU.LENGTH,this.array_.length)}assertUnique_(e,t){let r=this.array_;for(let i=0,o=r.length;i<o;++i)if(r[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}},gs=w5;var E5=class extends _i{constructor(e,t,r){super(e),this.map=t,this.frameState=r!==void 0?r:null}},ud=E5;var b5=class extends ud{constructor(e,t,r,i,o,s){super(e,t,o),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},tu=b5;var ur={SINGLECLICK:"singleclick",CLICK:gt.CLICK,DBLCLICK:gt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var ng=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",cse=ng.includes("safari")&&!ng.includes("chrom"),LU=cse&&(ng.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ng)),kU=ng.includes("webkit")&&!ng.includes("edge"),S5=ng.includes("macintosh"),OU=typeof devicePixelRatio<"u"?devicePixelRatio:1,Ai=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,hb=typeof Image<"u"&&Image.prototype.decode,C5=typeof createImageBitmap=="function",fb=(function(){let n=!1;try{let e=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return n})();var Hv={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var I5=class extends eu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;let r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=an(r,Hv.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=an(r,Hv.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(gt.TOUCHMOVE,this.boundHandleTouchMove_,fb?{passive:!1}:!1)}emulateClick_(e){let t=new tu(ur.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new tu(ur.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let r=new tu(ur.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){let t=e,r=t.pointerId;if(t.type==ur.POINTERUP||t.type==ur.POINTERCANCEL){delete this.trackedTouches_[r];for(let i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==ur.POINTERDOWN||t.type==ur.POINTERMOVE)&&(this.trackedTouches_[r]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);let t=new tu(ur.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(An),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);let t=new tu(ur.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){let r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(an(r,ur.POINTERMOVE,this.handlePointerMove_,this),an(r,ur.POINTERUP,this.handlePointerUp_,this),an(this.element_,ur.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(an(this.element_.getRootNode(),ur.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;let t=new tu(ur.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;let t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new tu(ur.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){let t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(An(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(gt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(An(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(An),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},FU=I5;var Tc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var ms={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Ze={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function on(n,e){if(!n)throw new Error(e)}var qv=1/0,T5=class{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Fl(this.queuedElements_)}dequeue(){let e=this.elements_,t=this.priorities_,r=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));let i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){on(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let t=this.priorityFunction_(e);return t!=qv?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){let t=this.elements_,r=this.priorities_,i=t.length,o=t[e],s=r[e],a=e;for(;e<i>>1;){let l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),f=c<i&&r[c]<r[l]?c:l;t[e]=t[f],r[e]=r[f],e=f}t[e]=o,r[e]=s,this.siftDown_(a,e)}siftDown_(e,t){let r=this.elements_,i=this.priorities_,o=r[t],s=i[t];for(;t>e;){let a=this.getParentIndex_(t);if(i[a]>s)r[t]=r[a],i[t]=i[a],t=a;else break}r[t]=o,i[t]=s}reprioritize(){let e=this.priorityFunction_,t=this.elements_,r=this.priorities_,i=0,o=t.length,s,a,l;for(a=0;a<o;++a)s=t[a],l=e(s),l==qv?delete this.queuedElements_[this.keyFunction_(s)]:(r[i]=l,t[i++]=s);t.length=i,r.length=i,this.heapify_()}},BU=T5;var D5=class extends BU{constructor(e,t){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){let t=super.enqueue(e);return t&&e[0].addEventListener(gt.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){let t=e.target,r=t.getState();if(r===Ze.LOADED||r===Ze.ERROR||r===Ze.EMPTY){r!==Ze.ERROR&&t.removeEventListener(gt.CHANGE,this.boundHandleTileChange_);let i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let r=0;for(;this.tilesLoading_<e&&r<t&&this.getCount()>0;){let i=this.dequeue()[0],o=i.getKey();i.getState()===Ze.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++r,i.load())}}},jU=D5;function UU(n,e,t,r,i){if(!n||!(t in n.wantedTiles))return qv;if(!n.wantedTiles[t][e.getKey()])return qv;let o=n.viewState.center,s=r[0]-o[0],a=r[1]-o[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}var Vr={ANIMATING:0,INTERACTING:1};var nu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function A5(n,e,t){return(function(r,i,o,s,a){if(!r)return;if(!i&&!e)return r;let l=e?0:o[0]*i,c=e?0:o[1]*i,f=a?a[0]:0,d=a?a[1]:0,y=n[0]+l/2+f,p=n[2]-l/2+f,_=n[1]+c/2+d,w=n[3]-c/2+d;y>p&&(y=(p+y)/2,p=y),_>w&&(_=(w+_)/2,w=_);let b=Hn(r[0],y,p),S=Hn(r[1],_,w);if(s&&t&&i){let T=30*i;b+=-T*Math.log(1+Math.max(0,y-r[0])/T)+T*Math.log(1+Math.max(0,r[0]-p)/T),S+=-T*Math.log(1+Math.max(0,_-r[1])/T)+T*Math.log(1+Math.max(0,r[1]-w)/T)}return[b,S]})}function GU(n){return n}function R5(n){return Math.pow(n,3)}function La(n){return 1-R5(1-n)}function zU(n){return 3*n*n-2*n*n*n}function VU(n){return n}var M5=new Array(6);function Hr(){return[1,0,0,1,0,0]}function Wv(n){return pb(n,1,0,0,1,0,0)}function cd(n,e){let t=n[0],r=n[1],i=n[2],o=n[3],s=n[4],a=n[5],l=e[0],c=e[1],f=e[2],d=e[3],y=e[4],p=e[5];return n[0]=t*l+i*c,n[1]=r*l+o*c,n[2]=t*f+i*d,n[3]=r*f+o*d,n[4]=t*y+i*p+s,n[5]=r*y+o*p+a,n}function pb(n,e,t,r,i,o,s){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n[4]=o,n[5]=s,n}function HU(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Ir(n,e){let t=e[0],r=e[1];return e[0]=n[0]*t+n[2]*r+n[4],e[1]=n[1]*t+n[3]*r+n[5],e}function qU(n,e){let t=Math.cos(e),r=Math.sin(e);return cd(n,pb(M5,t,r,-r,t,0,0))}function hd(n,e,t){return cd(n,pb(M5,e,0,0,t,0,0))}function gb(n,e,t){return cd(n,pb(M5,1,0,0,1,e,t))}function Ri(n,e,t,r,i,o,s,a){let l=Math.sin(o),c=Math.cos(o);return n[0]=r*c,n[1]=i*l,n[2]=-r*l,n[3]=i*c,n[4]=s*r*c-a*r*l+e,n[5]=s*i*l+a*i*c+t,n}function T0(n,e){let t=hse(e);on(t!==0,"Transformation matrix cannot be inverted");let r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],l=e[5];return n[0]=s/t,n[1]=-i/t,n[2]=-o/t,n[3]=r/t,n[4]=(o*l-s*a)/t,n[5]=-(r*l-i*a)/t,n}function hse(n){return n[0]*n[3]-n[1]*n[2]}var fse=[1e5,1e5,1e5,1e5,2,2];function WU(n){return"matrix("+n.join(", ")+")"}function db(n){return n.substring(7,n.length-1).split(",").map(parseFloat)}function $U(n,e){let t=db(n),r=db(e);for(let i=0;i<6;++i)if(Math.round((t[i]-r[i])*fse[i])!==0)return!1;return!0}function ka(n,e,t,r,i,o,s){o=o||[],s=s||2;let a=0;for(let l=e;l<t;l+=r){let c=n[l],f=n[l+1];o[a++]=i[0]*c+i[2]*f+i[4],o[a++]=i[1]*c+i[3]*f+i[5];for(let d=2;d<s;d++)o[a++]=n[l+d]}return o&&o.length!=a&&(o.length=a),o}function D0(n,e,t,r,i,o,s){s=s||[];let a=Math.cos(i),l=Math.sin(i),c=o[0],f=o[1],d=0;for(let y=e;y<t;y+=r){let p=n[y]-c,_=n[y+1]-f;s[d++]=c+p*a-_*l,s[d++]=f+p*l+_*a;for(let w=y+2;w<y+r;++w)s[d++]=n[w]}return s&&s.length!=d&&(s.length=d),s}function YU(n,e,t,r,i,o,s,a){a=a||[];let l=s[0],c=s[1],f=0;for(let d=e;d<t;d+=r){let y=n[d]-l,p=n[d+1]-c;a[f++]=l+i*y,a[f++]=c+o*p;for(let _=d+2;_<d+r;++_)a[f++]=n[_]}return a&&a.length!=f&&(a.length=f),a}function XU(n,e,t,r,i,o,s){s=s||[];let a=0;for(let l=e;l<t;l+=r){s[a++]=n[l]+i,s[a++]=n[l+1]+o;for(let c=l+2;c<l+r;++c)s[a++]=n[c]}return s&&s.length!=a&&(s.length=a),s}var ZU=Hr(),dse=[NaN,NaN],N5=class extends yo{constructor(){super(),this.extent_=Ci(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=ab((e,t,r)=>{if(!r)return this.getSimplifiedGeometry(t);let i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Ct()}closestPointXY(e,t,r,i){return Ct()}containsXY(e,t){return this.closestPointXY(e,t,dse,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Ct()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&um(t),this.extentRevision_=this.getRevision()}return BF(this.extent_,e)}rotate(e,t){Ct()}scale(e,t,r){Ct()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Ct()}getType(){return Ct()}applyTransform(e){Ct()}intersectsExtent(e){return Ct()}translate(e,t){Ct()}transform(e,t){let r=rn(e),i=r.getUnits()=="tile-pixels"?function(o,s,a){let l=r.getExtent(),c=r.getWorldExtent(),f=Qn(c)/Qn(l);Ri(ZU,c[0],c[3],f,-f,0,0,0);let d=ka(o,0,o.length,a,ZU,s),y=mh(r,t);return y?y(d,d,a):d}:mh(r,t);return this.applyTransform(i),this}},mb=N5;var P5=class extends mb{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Ct()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=$v(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Ct()}setLayout(e,t,r){let i;if(e)i=$v(e);else{for(let o=0;o<r;++o){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}i=t.length,e=fd(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){let r=this.getFlatCoordinates();if(r){let i=this.getStride();D0(r,0,r.length,i,e,t,r),this.changed()}}scale(e,t,r){t===void 0&&(t=e),r||(r=Lo(this.getExtent()));let i=this.getFlatCoordinates();if(i){let o=this.getStride();YU(i,0,i.length,o,e,t,r,i),this.changed()}}translate(e,t){let r=this.getFlatCoordinates();if(r){let i=this.getStride();XU(r,0,r.length,i,e,t,r),this.changed()}}};function fd(n){let e;return n==2?e="XY":n==3?e="XYZ":n==4&&(e="XYZM"),e}function $v(n){let e;return n=="XY"?e=2:n=="XYZ"||n=="XYM"?e=3:n=="XYZM"&&(e=4),e}function KU(n,e,t){let r=n.getFlatCoordinates();if(!r)return null;let i=n.getStride();return ka(r,0,r.length,i,e,t)}var zs=P5;function L5(n,e,t,r){let i=0,o=n[t-r],s=n[t-r+1],a=0,l=0;for(;e<t;e+=r){let c=n[e]-o,f=n[e+1]-s;i+=l*c-a*f,a=c,l=f}return i/2}function k5(n,e,t,r){let i=0;for(let o=0,s=t.length;o<s;++o){let a=t[o];i+=L5(n,e,a,r),e=a}return i}function JU(n,e,t,r){let i=0;for(let o=0,s=t.length;o<s;++o){let a=t[o];i+=k5(n,e,a,r),e=a[a.length-1]}return i}function QU(n,e,t,r,i,o,s){let a=n[e],l=n[e+1],c=n[t]-a,f=n[t+1]-l,d;if(c===0&&f===0)d=e;else{let y=((i-a)*c+(o-l)*f)/(c*c+f*f);if(y>1)d=t;else if(y>0){for(let p=0;p<r;++p)s[p]=us(n[e+p],n[t+p],y);s.length=r;return}else d=e}for(let y=0;y<r;++y)s[y]=n[d+y];s.length=r}function Yv(n,e,t,r,i){let o=n[e],s=n[e+1];for(e+=r;e<t;e+=r){let a=n[e],l=n[e+1],c=al(o,s,a,l);c>i&&(i=c),o=a,s=l}return i}function Xv(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];i=Yv(n,e,a,r,i),e=a}return i}function eG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];i=Xv(n,e,a,r,i),e=a[a.length-1]}return i}function Zv(n,e,t,r,i,o,s,a,l,c,f){if(e==t)return c;let d,y;if(i===0){if(y=al(s,a,n[e],n[e+1]),y<c){for(d=0;d<r;++d)l[d]=n[e+d];return l.length=r,y}return c}f=f||[NaN,NaN];let p=e+r;for(;p<t;)if(QU(n,p-r,p,r,s,a,f),y=al(s,a,f[0],f[1]),y<c){for(c=y,d=0;d<r;++d)l[d]=f[d];l.length=r,p+=r}else p+=r*Math.max((Math.sqrt(y)-Math.sqrt(c))/i|0,1);if(o&&(QU(n,t-r,e,r,s,a,f),y=al(s,a,f[0],f[1]),y<c)){for(c=y,d=0;d<r;++d)l[d]=f[d];l.length=r}return c}function Kv(n,e,t,r,i,o,s,a,l,c,f){f=f||[NaN,NaN];for(let d=0,y=t.length;d<y;++d){let p=t[d];c=Zv(n,e,p,r,i,o,s,a,l,c,f),e=p}return c}function tG(n,e,t,r,i,o,s,a,l,c,f){f=f||[NaN,NaN];for(let d=0,y=t.length;d<y;++d){let p=t[d];c=Kv(n,e,p,r,i,o,s,a,l,c,f),e=p[p.length-1]}return c}function yb(n,e,t,r){for(let i=0,o=t.length;i<o;++i)n[e++]=t[i];return e}function rg(n,e,t,r){for(let i=0,o=t.length;i<o;++i){let s=t[i];for(let a=0;a<r;++a)n[e++]=s[a]}return e}function dd(n,e,t,r,i){i=i||[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=rg(n,e,t[s],r);i[o++]=l,e=l}return i.length=o,i}function _b(n,e,t,r,i){i=i||[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=dd(n,e,t[s],r,i[o]);l.length===0&&(l[0]=e),i[o++]=l,e=l[l.length-1]}return i.length=o,i}function ru(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=e;s<t;s+=r)i[o++]=n.slice(s,s+r);return i.length=o,i}function pd(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s];i[o++]=ru(n,e,l,r,i[o]),e=l}return i.length=o,i}function Jv(n,e,t,r,i){i=i!==void 0?i:[];let o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s];i[o++]=l.length===1&&l[0]===e?[]:pd(n,e,l,r,i[o]),e=l[l.length-1]}return i.length=o,i}function ig(n,e,t,r,i,o,s){let a=(t-e)/r;if(a<3){for(;e<t;e+=r)o[s++]=n[e],o[s++]=n[e+1];return s}let l=new Array(a);l[0]=1,l[a-1]=1;let c=[e,t-r],f=0;for(;c.length>0;){let d=c.pop(),y=c.pop(),p=0,_=n[y],w=n[y+1],b=n[d],S=n[d+1];for(let T=y+r;T<d;T+=r){let A=n[T],N=n[T+1],O=NF(A,N,_,w,b,S);O>p&&(f=T,p=O)}p>i&&(l[(f-e)/r]=1,y+r<f&&c.push(y,f),f+r<d&&c.push(f,d))}for(let d=0;d<a;++d)l[d]&&(o[s++]=n[e+d*r],o[s++]=n[e+d*r+1]);return s}function vb(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l];s=ig(n,e,f,r,i,o,s),a.push(s),e=f}return s}function gd(n,e){return e*Math.round(n/e)}function pse(n,e,t,r,i,o,s){if(e==t)return s;let a=gd(n[e],i),l=gd(n[e+1],i);e+=r,o[s++]=a,o[s++]=l;let c,f;do if(c=gd(n[e],i),f=gd(n[e+1],i),e+=r,e==t)return o[s++]=c,o[s++]=f,s;while(c==a&&f==l);for(;e<t;){let d=gd(n[e],i),y=gd(n[e+1],i);if(e+=r,d==c&&y==f)continue;let p=c-a,_=f-l,w=d-a,b=y-l;if(p*b==_*w&&(p<0&&w<p||p==w||p>0&&w>p)&&(_<0&&b<_||_==b||_>0&&b>_)){c=d,f=y;continue}o[s++]=c,o[s++]=f,a=c,l=f,c=d,f=y}return o[s++]=c,o[s++]=f,s}function Qv(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l];s=pse(n,e,f,r,i,o,s),a.push(s),e=f}return s}function nG(n,e,t,r,i,o,s,a){for(let l=0,c=t.length;l<c;++l){let f=t[l],d=[];s=Qv(n,e,f,r,i,o,s,d),a.push(d),e=f[f.length-1]}return s}var O5=class n extends zs{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new n(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,r,i){return i<Ta(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Zv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,r,i))}getArea(){return L5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){let t=[];return t.length=ig(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rg(this.flatCoordinates,0,e,this.stride),this.changed()}},F5=O5;var B5=class n extends zs{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){let o=this.flatCoordinates,s=al(e,t,o[0],o[1]);if(s<i){let a=this.stride;for(let l=0;l<a;++l)r[l]=o[l];return r.length=a,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return vw(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return _w(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yb(this.flatCoordinates,0,e,this.stride),this.changed()}},_o=B5;function rG(n,e,t,r,i){return!dm(i,function(s){return!md(n,e,t,r,s[0],s[1])})}function md(n,e,t,r,i,o){let s=0,a=n[t-r],l=n[t-r+1];for(;e<t;e+=r){let c=n[e],f=n[e+1];l<=o?f>o&&(c-a)*(o-l)-(i-a)*(f-l)>0&&s++:f<=o&&(c-a)*(o-l)-(i-a)*(f-l)<0&&s--,a=c,l=f}return s!==0}function e1(n,e,t,r,i,o){if(t.length===0||!md(n,e,t[0],r,i,o))return!1;for(let s=1,a=t.length;s<a;++s)if(md(n,t[s-1],t[s],r,i,o))return!1;return!0}function iG(n,e,t,r,i,o){if(t.length===0)return!1;for(let s=0,a=t.length;s<a;++s){let l=t[s];if(e1(n,e,l,r,i,o))return!0;e=l[l.length-1]}return!1}function t1(n,e,t,r,i,o,s){let a,l,c,f,d,y,p,_=i[o+1],w=[];for(let T=0,A=t.length;T<A;++T){let N=t[T];for(f=n[N-r],y=n[N-r+1],a=e;a<N;a+=r)d=n[a],p=n[a+1],(_<=y&&p<=_||y<=_&&_<=p)&&(c=(_-y)/(p-y)*(d-f)+f,w.push(c)),f=d,y=p}let b=NaN,S=-1/0;for(w.sort(Us),f=w[0],a=1,l=w.length;a<l;++a){d=w[a];let T=Math.abs(d-f);T>S&&(c=(f+d)/2,e1(n,e,t,r,c,_)&&(b=c,S=T)),f=d}return isNaN(b)&&(b=i[o]),s?(s.push(b,_,S),s):[b,_,S]}function xb(n,e,t,r,i){let o=[];for(let s=0,a=t.length;s<a;++s){let l=t[s];o=t1(n,e,l,r,i,2*s,o),e=l[l.length-1]}return o}function wb(n,e,t,r,i){let o;for(e+=r;e<t;e+=r)if(o=i(n.slice(e-r,e),n.slice(e,e+r)),o)return o;return!1}function n1(n,e,t,r,i,o){return o=o??OF(Ci(),n,e,t,r),Wn(i,o)?o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:wb(n,e,t,r,function(s,a){return jF(i,s,a)}):!1}function oG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){if(n1(n,e,t[o],r,i))return!0;e=t[o]}return!1}function j5(n,e,t,r,i){return!!(n1(n,e,t,r,i)||md(n,e,t,r,i[0],i[1])||md(n,e,t,r,i[0],i[3])||md(n,e,t,r,i[2],i[1])||md(n,e,t,r,i[2],i[3]))}function U5(n,e,t,r,i){if(!j5(n,e,t[0],r,i))return!1;if(t.length===1)return!0;for(let o=1,s=t.length;o<s;++o)if(rG(n,t[o-1],t[o],r,i)&&!n1(n,t[o-1],t[o],r,i))return!1;return!0}function sG(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];if(U5(n,e,a,r,i))return!0;e=a[a.length-1]}return!1}function aG(n,e,t,r){for(;e<t-r;){for(let i=0;i<r;++i){let o=n[e+i];n[e+i]=n[t-r+i],n[t-r+i]=o}e+=r,t-=r}}function G5(n,e,t,r){let i=0,o=n[t-r],s=n[t-r+1];for(;e<t;e+=r){let a=n[e],l=n[e+1];i+=(a-o)*(l+s),o=a,s=l}return i===0?void 0:i>0}function r1(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,s=t.length;o<s;++o){let a=t[o],l=G5(n,e,a,r);if(o===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function Eb(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o){let a=t[o];if(!r1(n,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function A0(n,e,t,r,i){i=i!==void 0?i:!1;for(let o=0,s=t.length;o<s;++o){let a=t[o],l=G5(n,e,a,r);(o===0?i&&l||!i&&!l:i&&!l||!i&&l)&&aG(n,e,a,r),e=a}return e}function i1(n,e,t,r,i){for(let o=0,s=t.length;o<s;++o)e=A0(n,e,t[o],r,i);return e}function bb(n,e){let t=[],r=0,i=0,o;for(let s=0,a=e.length;s<a;++s){let l=e[s],c=G5(n,r,l,2);if(o===void 0&&(o=c),c===o)t.push(e.slice(i,s+1));else{if(t.length===0)continue;t[t.length-1].push(e[i])}i=s+1,r=l}return t}var Sb=class n extends zs{constructor(e,t,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&r?(this.setFlatCoordinates(t,e),this.ends_=r):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?zn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Ta(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return e1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return k5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),A0(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,pd(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=Lo(this.getExtent());this.flatInteriorPoint_=t1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new _o(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new F5(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,t=this.flatCoordinates,r=this.ends_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s],c=new F5(t.slice(o,l),e);i.push(c),o=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;r1(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=A0(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=Qv(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,r),new n(t,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return U5(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=dd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},jo=Sb;function z5(n){if(Ls(n))throw new Error("Cannot create polygon from empty extent");let e=n[0],t=n[1],r=n[2],i=n[3],o=[e,t,e,i,r,i,r,t,e,t];return new Sb(o,"XY",[o.length])}function V5(n,e,t,r){let i=nn(e)/t[0],o=Qn(e)/t[1];return r?Math.min(n,Math.max(i,o)):Math.min(n,Math.min(i,o))}function H5(n,e,t){let r=Math.min(n,e),i=50;return r*=Math.log(1+i*Math.max(0,n/e-1))/i+1,t&&(r=Math.max(r,t),r/=Math.log(1+i*Math.max(0,t/n-1))/i+1),Hn(r,t/2,e*2)}function lG(n,e,t,r){return e=e!==void 0?e:!0,(function(i,o,s,a){if(i!==void 0){let l=n[0],c=n[n.length-1],f=t?V5(l,t,s,r):l;if(a)return e?H5(i,f,c):Hn(i,c,f);let d=Math.min(f,i),y=Math.floor(ld(n,d,o));return n[y]>f&&y<n.length-1?n[y+1]:n[y]}})}function uG(n,e,t,r,i,o){return r=r!==void 0?r:!0,t=t!==void 0?t:0,(function(s,a,l,c){if(s!==void 0){let f=i?V5(e,i,l,o):e;if(c)return r?H5(s,f,t):Hn(s,t,f);let d=1e-9,y=Math.ceil(Math.log(e/f)/Math.log(n)-d),p=-a*(.5-d)+.5,_=Math.min(f,s),w=Math.floor(Math.log(e/_)/Math.log(n)+p),b=Math.max(y,w),S=e/Math.pow(n,b);return Hn(S,t,f)}})}function q5(n,e,t,r,i){return t=t!==void 0?t:!0,(function(o,s,a,l){if(o!==void 0){let c=r?V5(n,r,a,i):n;return!t||!l?Hn(o,e,c):H5(o,c,e)}})}function R0(n){if(n!==void 0)return 0}function W5(n){if(n!==void 0)return n}function cG(n){let e=2*Math.PI/n;return(function(t,r){if(r)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t})}function hG(n){let e=n===void 0?mw(5):n;return(function(t,r){return r||t===void 0?t:Math.abs(t)<=e?0:t})}var $5=0,X5=class extends yo{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Iw(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&$F(),e.center&&(e.center=Da(e.center,this.projection_)),e.extent&&(e.extent=ko(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){let t=Object.assign({},e);for(let a in nu)delete t[a];this.setProperties(t,!0);let r=mse(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;let i=gse(e),o=r.constraint,s=yse(e);this.constraints_={center:i,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;let r=this.getCenterInternal();if(r){let i=e||[0,0,0,0];t=t||[0,0,0,0];let o=this.getResolution(),s=o/2*(i[3]-t[3]+t[1]-i[1]),a=o/2*(i[0]-t[0]+t[2]-i[2]);this.setCenterInternal([r[0]+s,r[1]-a])}}getUpdatedOptions_(e){let t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let t=new Array(arguments.length);for(let r=0;r<t.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Da(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Da(i.anchor,this.getProjection())),t[r]=i}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,r;t>1&&typeof arguments[t-1]=="function"&&(r=arguments[t-1],--t);let i=0;for(;i<t&&!this.isDef();++i){let f=arguments[i];f.center&&this.setCenterInternal(f.center),f.zoom!==void 0?this.setZoom(f.zoom):f.resolution&&this.setResolution(f.resolution),f.rotation!==void 0&&this.setRotation(f.rotation)}if(i===t){r&&Cb(r,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,c=[];for(;i<t;++i){let f=arguments[i],d={start:o,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||zU,callback:r};if(f.center&&(d.sourceCenter=s,d.targetCenter=f.center.slice(),s=d.targetCenter),f.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(f.zoom),a=d.targetResolution):f.resolution&&(d.sourceResolution=a,d.targetResolution=f.resolution,a=d.targetResolution),f.rotation!==void 0){d.sourceRotation=l;let y=Tu(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+y,l=d.targetRotation}_se(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(Vr.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Vr.ANIMATING]>0}getInteracting(){return this.hints_[Vr.INTERACTING]>0}cancelAnimations(){this.setHint(Vr.ANIMATING,-this.hints_[Vr.ANIMATING]);let e;for(let t=0,r=this.animations_.length;t<r;++t){let i=this.animations_[t];if(i[0].callback&&Cb(i[0].callback,!1),!e)for(let o=0,s=i.length;o<s;++o){let a=i[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),t=!1;for(let r=this.animations_.length-1;r>=0;--r){let i=this.animations_[r],o=!0;for(let s=0,a=i.length;s<a;++s){let l=i[s];if(l.complete)continue;let c=e-l.start,f=l.duration>0?c/l.duration:1;f>=1?(l.complete=!0,f=1):o=!1;let d=l.easing(f);if(l.sourceCenter){let y=l.sourceCenter[0],p=l.sourceCenter[1],_=l.targetCenter[0],w=l.targetCenter[1];this.nextCenter_=l.targetCenter;let b=y+d*(_-y),S=p+d*(w-p);this.targetCenter_=[b,S]}if(l.sourceResolution&&l.targetResolution){let y=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){let p=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(y,0,p,!0);this.targetCenter_=this.calculateCenterZoom(_,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let y=d===1?Tu(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){let p=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(p,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(o){this.animations_[r]=null,this.setHint(Vr.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let s=i[0].callback;s&&Cb(s,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let r,i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-t[0],i[1]-t[1]],mm(r,e-this.getRotation()),GF(r,t)),r}calculateCenterZoom(e,t){let r,i=this.getCenterInternal(),o=this.getResolution();if(i!==void 0&&o!==void 0){let s=t[0]-e*(t[0]-i[0])/o,a=t[1]-e*(t[1]-i[1])/o;r=[s,a]}return r}getViewportSize_(e){let t=this.viewportSize_;if(e){let r=t[0],i=t[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&vp(e,this.getProjection())}getCenterInternal(){return this.get(nu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){let t=this.calculateExtentInternal(e);return cc(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();let t=this.getCenterInternal();on(t,"The view center is not defined");let r=this.getResolution();on(r!==void 0,"The view resolution is not defined");let i=this.getRotation();return on(i!==void 0,"The view rotation is not defined"),Bf(t,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(nu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(ko(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();let r=nn(e)/t[0],i=Qn(e)/t[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;let t=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(t/r)/Math.log(e);return(function(o){return t/Math.pow(e,o*i)})}getRotation(){return this.get(nu.ROTATION)}getValueForResolutionFunction(e){let t=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,o=Math.log(r/i)/t;return(function(s){return Math.log(r/s)/t/o})}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e),r=this.padding_;return r&&(t=[t[0]-r[1]-r[3],t[1]-r[0]-r[2]]),t}getState(){let e=this.getProjection(),t=this.getResolution(),r=this.getRotation(),i=this.getCenterInternal(),o=this.padding_;if(o){let s=this.getViewportSizeMinusPadding_();i=Y5(i,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],t,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,r,i;if(this.resolutions_){let o=ld(this.resolutions_,e,1);t=o,r=this.resolutions_[o],o==this.resolutions_.length-1?i=2:i=r/this.resolutions_[o+1]}else r=this.maxResolution_,i=this.zoomFactor_;return t+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];let t=Hn(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(r,Hn(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let r;if(on(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){on(!Ls(e),"Cannot fit empty extent provided as `geometry`");let i=ko(e,this.getProjection());r=z5(i)}else if(e.getType()==="Circle"){let i=ko(e.getExtent(),this.getProjection());r=z5(i),r.rotate(this.getRotation(),Lo(i))}else{let i=yh();i?r=e.clone().transform(i,this.getProjection()):r=e}this.fitInternal(r,t)}rotatedExtentForGeometry(e){let t=this.getRotation(),r=Math.cos(t),i=Math.sin(-t),o=e.getFlatCoordinates(),s=e.getStride(),a=1/0,l=1/0,c=-1/0,f=-1/0;for(let d=0,y=o.length;d<y;d+=s){let p=o[d]*r-o[d+1]*i,_=o[d]*i+o[d+1]*r;a=Math.min(a,p),l=Math.min(l,_),c=Math.max(c,p),f=Math.max(f,_)}return[a,l,c,f]}fitInternal(e,t){t=t||{};let r=t.size;r||(r=this.getViewportSizeMinusPadding_());let i=t.padding!==void 0?t.padding:[0,0,0,0],o=t.nearest!==void 0?t.nearest:!1,s;t.minResolution!==void 0?s=t.minResolution:t.maxZoom!==void 0?s=this.getResolutionForZoom(t.maxZoom):s=0;let a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);let c=this.getRotation(),f=Math.sin(c),d=Math.cos(c),y=Lo(a);y[0]+=(i[1]-i[3])/2*l,y[1]+=(i[0]-i[2])/2*l;let p=y[0]*d-y[1]*f,_=y[1]*d+y[0]*f,w=this.getConstrainedCenter([p,_],l),b=t.callback?t.callback:jh;t.duration!==void 0?this.animateInternal({resolution:l,center:w,duration:t.duration,easing:t.easing},b):(this.targetResolution_=l,this.targetCenter_=w,this.applyTargetState_(!1,!0),Cb(b,!0))}centerOn(e,t,r){this.centerOnInternal(Da(e,this.getProjection()),t,r)}centerOnInternal(e,t,r){this.setCenterInternal(Y5(e,t,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,r,i){let o,s=this.padding_;if(s&&e){let a=this.getViewportSizeMinusPadding_(-r),l=Y5(e,i,[a[0]/2+s[3],a[1]/2+s[0]],t,r);o=[e[0]-l[0],e[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let t=vp(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){let t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&Da(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){let r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,i,r);t&&(this.targetCenter_=this.calculateCenterZoom(o,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=Da(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){let r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);t&&(this.targetCenter_=this.calculateCenterRotate(i,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Da(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){let r=this.getAnimating()||this.getInteracting()||t,i=this.constraints_.rotation(this.targetRotation_,r),o=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,o,r),a=this.constraints_.center(this.targetCenter_,s,o,r,this.calculateCenterShift(this.targetCenter_,s,i,o));this.get(nu.ROTATION)!==i&&this.set(nu.ROTATION,i),this.get(nu.RESOLUTION)!==s&&(this.set(nu.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(nu.CENTER)||!R_(this.get(nu.CENTER),a))&&this.set(nu.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,r){e=e!==void 0?e:200;let i=t||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!R_(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:e,easing:La,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Vr.INTERACTING,1)}endInteraction(e,t,r){r=r&&Da(r,this.getProjection()),this.endInteractionInternal(e,t,r)}endInteractionInternal(e,t,r){this.getInteracting()&&(this.setHint(Vr.INTERACTING,-1),this.resolveConstraints(e,t,r))}getConstrainedCenter(e,t){let r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),r)}getConstrainedZoom(e,t){let r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,t))}getConstrainedResolution(e,t){t=t||0;let r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,r)}};function Cb(n,e){setTimeout(function(){n(e)},0)}function gse(n){if(n.extent!==void 0){let t=n.smoothExtentConstraint!==void 0?n.smoothExtentConstraint:!0;return A5(n.extent,n.constrainOnlyCenter,t)}let e=Iw(n.projection,"EPSG:3857");if(n.multiWorld!==!0&&e.isGlobal()){let t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,A5(t,!1,!1)}return GU}function mse(n){let e,t,r,s=n.minZoom!==void 0?n.minZoom:$5,a=n.maxZoom!==void 0?n.maxZoom:28,l=n.zoomFactor!==void 0?n.zoomFactor:2,c=n.multiWorld!==void 0?n.multiWorld:!1,f=n.smoothResolutionConstraint!==void 0?n.smoothResolutionConstraint:!0,d=n.showFullExtent!==void 0?n.showFullExtent:!1,y=Iw(n.projection,"EPSG:3857"),p=y.getExtent(),_=n.constrainOnlyCenter,w=n.extent;if(!c&&!w&&y.isGlobal()&&(_=!1,w=p),n.resolutions!==void 0){let b=n.resolutions;t=b[s],r=b[a]!==void 0?b[a]:b[b.length-1],n.constrainResolution?e=lG(b,f,!_&&w,d):e=q5(t,r,f,!_&&w,d)}else{let S=(p?Math.max(nn(p),Qn(p)):360*Sw.degrees/y.getMetersPerUnit())/256/Math.pow(2,$5),T=S/Math.pow(2,28-$5);t=n.maxResolution,t!==void 0?s=0:t=S/Math.pow(l,s),r=n.minResolution,r===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?r=t/Math.pow(l,a):r=S/Math.pow(l,a):r=T),a=s+Math.floor(Math.log(t/r)/Math.log(l)),r=t/Math.pow(l,a-s),n.constrainResolution?e=uG(l,t,r,f,!_&&w,d):e=q5(t,r,f,!_&&w,d)}return{constraint:e,maxResolution:t,minResolution:r,minZoom:s,zoomFactor:l}}function yse(n){if(n.enableRotation!==void 0?n.enableRotation:!0){let t=n.constrainRotation;return t===void 0||t===!0?hG():t===!1?W5:typeof t=="number"?cG(t):W5}return R0}function _se(n){return!(n.sourceCenter&&n.targetCenter&&!R_(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}function Y5(n,e,t,r,i){let o=Math.cos(-i),s=Math.sin(-i),a=n[0]*o-n[1]*s,l=n[1]*o+n[0]*s;a+=(e[0]/2-t[0])*r,l+=(t[1]-e[1]/2)*r,s=-s;let c=a*o-l*s,f=l*o+a*s;return[c,f]}var gl=X5;var o1="ol-hidden";var yd="ol-unselectable";var M0="ol-control",Z5="ol-collapsed",vse=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),dG=["style","variant","weight","size","lineHeight","family"],Ib={normal:400,bold:700},Tb=function(n){let e=n.match(vse);if(!e)return null;let t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=dG.length;r<i;++r){let o=e[r+1];o!==void 0&&(t[dG[r]]=typeof o=="string"?o.trim():o)}return isNaN(Number(t.weight))&&t.weight in Ib&&(t.weight=Ib[t.weight]),t.families=t.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),t};function $n(n,e,t,r){let i;return t&&t.length?i=t.shift():Ai?i=new class extends OffscreenCanvas{style={}}(n??300,e??150):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("2d",r)}var K5;function N0(){return K5||(K5=$n(1,1)),K5}function Uh(n){let e=n.canvas;e.width=1,e.height=1,n.clearRect(0,0,1,1)}function J5(n,e){let t=e.parentNode;t&&t.replaceChild(n,e)}function pG(n){for(;n.lastChild;)n.lastChild.remove()}function gG(n,e){let t=n.childNodes;for(let r=0;;++r){let i=t[r],o=e[r];if(!i&&!o)break;if(i!==o){if(!i){n.appendChild(o);continue}if(!o){n.removeChild(i),--r;continue}n.insertBefore(o,i)}}}function Db(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){let t=this.childNodes.indexOf(e);if(t===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(t,1),e},insertBefore:function(e,t){let r=this.childNodes.indexOf(t);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,t,r){return t==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,t,r)}})}function ju(n){return typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}var Q5=class extends yo{constructor(e){super();let t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let t=0,r=this.listenerKeys.length;t<r;++t)An(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){let t=this.target_??e.getOverlayContainerStopEvent();this.element&&t.appendChild(this.element),this.render!==jh&&this.listenerKeys.push(an(e,Tc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}},Gh=Q5;var eN=class extends Gh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;let t=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:t+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",s=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;let a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(gt.CLICK,this.handleClick_.bind(this),!1);let c=t+" "+yd+" "+M0+(this.collapsed_&&this.collapsible_?" "+Z5:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=c,f.appendChild(this.toggleButton_),f.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){let t=this.getMap().getAllLayers(),r=new Set(t.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){let i=!t.some(o=>o.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}updateElement_(e){return He(this,null,function*(){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let t=yield Promise.all(this.collectSourceAttributions_(e).map(i=>b0(()=>i))),r=t.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Gs(t,this.renderedAttributions_)){pG(this.ulElement_);for(let i=0,o=t.length;i<o;++i){let s=document.createElement("li");s.innerHTML=t[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}})}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Z5),this.collapsed_?J5(this.collapseLabel_,this.label_):J5(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},mG=eN;var tN=class extends Gh{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});let t=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"\u21E7",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));let o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=t+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(gt.CLICK,this.handleClick_.bind(this),!1);let a=t+" "+yd+" "+M0,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(o1)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let t=this.getMap().getView();if(!t)return;let r=t.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:La}):t.setRotation(0))}render(e){let t=e.frameState;if(!t)return;let r=t.viewState.rotation;if(r!=this.rotation_){let i="rotate("+r+"rad)";if(this.autoHide_){let o=this.element.classList.contains(o1);!o&&r===0?this.element.classList.add(o1):o&&r!==0&&this.element.classList.remove(o1)}this.label_.style.transform=i}this.rotation_=r}},yG=tN;var nN=class extends Gh{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});let t=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i,f.setAttribute("type","button"),f.title=l,f.appendChild(typeof s=="string"?document.createTextNode(s):s),f.addEventListener(gt.CLICK,this.handleClick_.bind(this,r),!1);let d=document.createElement("button");d.className=o,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(gt.CLICK,this.handleClick_.bind(this,-r),!1);let y=t+" "+yd+" "+M0,p=this.element;p.className=y,p.appendChild(f),p.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){let r=this.getMap().getView();if(!r)return;let i=r.getZoom();if(i!==void 0){let o=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:o,duration:this.duration_,easing:La})):r.setZoom(o)}}},_G=nN;function s1(n){n=n||{};let e=new gs;return(n.zoom!==void 0?n.zoom:!0)&&e.push(new _G(n.zoomOptions)),(n.rotate!==void 0?n.rotate:!0)&&e.push(new yG(n.rotateOptions)),(n.attribution!==void 0?n.attribution:!0)&&e.push(new mG(n.attributionOptions)),e}var rN=class{constructor(e,t,r){this.decay_=e,this.minVelocity_=t,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;let e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let r=t-3;for(;r>0&&this.points_[r+2]>e;)r-=3;let i=this.points_[t+2]-this.points_[r+2];if(i<1e3/60)return!1;let o=this.points_[t]-this.points_[r],s=this.points_[t+1]-this.points_[r+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},vG=rN;var a1={ACTIVE:"active"};var iN=class extends yo{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(a1.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(a1.ACTIVE,e)}setMap(e){this.map_=e}};function xG(n,e,t){let r=n.getCenterInternal();if(r){let i=[r[0]+e[0],r[1]+e[1]];n.animateInternal({duration:t!==void 0?t:250,easing:VU,center:n.getConstrainedCenter(i)})}}function P0(n,e,t,r){let i=n.getZoom();if(i===void 0)return;let o=n.getConstrainedZoom(i+e),s=n.getResolutionForZoom(o);n.getAnimating()&&n.cancelAnimations(),n.animate({resolution:s,anchor:t,duration:r!==void 0?r:250,easing:La})}var Dc=iN;var oN=class extends Dc{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==ur.DBLCLICK){let r=e.originalEvent,i=e.map,o=e.coordinate,s=r.shiftKey?-this.delta_:this.delta_,a=i.getView();P0(a,s,o,this.duration_),r.preventDefault(),t=!0}return!t}},wG=oN;function l1(n){let e=arguments;return function(t){let r=!0;for(let i=0,o=e.length;i<o&&(r=r&&e[i](t),!!r);++i);return r}}var EG=function(n){let e=n.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},xse=function(n){let e=n.map.getTargetElement(),t=e.getRootNode(),r=n.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(r):e.contains(r)},Ab=function(n){let e=n.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?xse(n):!0},L0=Bu;var Rb=function(n){let e=n.originalEvent;return"pointerId"in e&&e.button==0&&!(kU&&S5&&e.ctrlKey)},bG=Ql;var k0=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var SG=function(n){let e=n.originalEvent;return S5?e.metaKey:e.ctrlKey},u1=function(n){let e=n.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Mb=function(n){let e=n.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},Nb=function(n){let e=n.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"};var CG=function(n){let e=n.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};var sN=class extends Dc{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ur.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ur.POINTERUP){let r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==ur.POINTERDOWN){let r=this.handleDownEvent(e);this.handlingDownUpSequence=r,t=this.stopDown(r)}else e.type==ur.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function O0(n){let e=n.length,t=0,r=0;for(let i=0;i<e;i++)t+=n[i].clientX,r+=n[i].clientY;return{clientX:t/e,clientY:r/e}}var iu=sN;var aN=class extends iu{constructor(e){super({stopDown:Ql}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let t=e.condition?e.condition:l1(k0,CG);this.condition_=e.onFocusOnly?l1(Ab,t):t,this.noKinetic_=!1}handleDragEvent(e){let t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());let r=this.targetPointers,i=t.getEventPixel(O0(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){let o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();VF(o,a.getResolution()),mm(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){let t=e.map,r=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let i=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=r.getCenterInternal(),a=t.getPixelFromCoordinateInternal(s),l=t.getCoordinateFromPixelInternal([a[0]-i*Math.cos(o),a[1]-i*Math.sin(o)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:La})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){let r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},IG=aN;var lN=class extends iu{constructor(e){e=e||{},super({stopDown:Ql}),this.condition_=e.condition?e.condition:EG,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Nb(e))return;let t=e.map,r=t.getView();if(r.getConstraints().rotation===R0)return;let i=t.getSize(),o=e.pixel,s=Math.atan2(i[1]/2-o[1],o[0]-i[0]/2);if(this.lastAngle_!==void 0){let a=s-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return Nb(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Nb(e)&&Rb(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},TG=lN;var uN=class extends Ic{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let e=this.startPixel_,t=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+r,i.top=Math.min(e[1],t[1])+r,i.width=Math.abs(t[0]-e[0])+r,i.height=Math.abs(t[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;let e=this.startPixel_,t=this.endPixel_,i=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new jo([i])}getGeometry(){return this.geometry_}},DG=uN;var F0={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},og=class extends _i{constructor(e,t,r){super(e),this.coordinate=t,this.mapBrowserEvent=r}},cN=class extends iu{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new DG(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Rb,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,r){let i=r[0]-t[0],o=r[1]-t[1];return i*i+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new og(F0.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;let t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new og(t?F0.BOXEND:F0.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new og(F0.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new og(F0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new og(F0.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}},AG=cN;var hN=class extends AG{constructor(e){e=e||{};let t=e.condition?e.condition:u1;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){let r=this.getMap().getView(),i=this.getGeometry();if(this.out_){let o=r.rotatedExtentForGeometry(i),s=r.getResolutionForExtentInternal(o),a=r.getResolution()/s;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:La})}},RG=hN;var _d={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var fN=class extends Dc{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return k0(t)&&Mb(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==gt.KEYDOWN){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==_d.DOWN||i==_d.LEFT||i==_d.RIGHT||i==_d.UP)){let s=e.map.getView(),a=s.getResolution()*this.pixelDelta_,l=0,c=0;i==_d.DOWN?c=-a:i==_d.LEFT?l=-a:i==_d.RIGHT?l=a:c=a;let f=[l,c];mm(f,s.getRotation()),xG(s,f,this.duration_),r.preventDefault(),t=!0}}return!t}},MG=fN;var dN=class extends Dc{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!SG(t)&&Mb(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==gt.KEYDOWN||e.type==gt.KEYPRESS){let r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){let o=e.map,s=i==="+"?this.delta_:-this.delta_,a=o.getView();P0(a,s,void 0,this.duration_),r.preventDefault(),t=!0}}return!t}},NG=dN;var wse=40,Ese=300,pN=class extends Dc{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;let t=e.condition?e.condition:L0;this.condition_=e.onFocusOnly?l1(Ab,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==gt.WHEEL)return!0;let r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let o=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:o*=wse;break;case WheelEvent.DOM_DELTA_PAGE:o*=Ese;break;default:}if(o===0)return!1;this.lastDelta_=o;let s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");let a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=o;let l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){let t=e.getView();t.getAnimating()&&t.cancelAnimations();let r=-Hn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),P0(t,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},PG=pN;var gN=class extends iu{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=Ql),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0,r=this.targetPointers[0],i=this.targetPointers[1],o=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){let l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=o;let s=e.map,a=s.getView();a.getConstraints().rotation!==R0&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(O0(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},LG=gN;var mN=class extends iu{constructor(e){e=e||{};let t=e;t.stopDown||(t.stopDown=Ql),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1,r=this.targetPointers[0],i=this.targetPointers[1],o=r.clientX-i.clientX,s=r.clientY-i.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;let l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(O0(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){let r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){let t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}},kG=mN;function OG(n){n=n||{};let e=new gs,t=new vG(-.005,.05,100);return(n.altShiftDragRotate!==void 0?n.altShiftDragRotate:!0)&&e.push(new TG),(n.doubleClickZoom!==void 0?n.doubleClickZoom:!0)&&e.push(new wG({delta:n.zoomDelta,duration:n.zoomDuration})),(n.dragPan!==void 0?n.dragPan:!0)&&e.push(new IG({onFocusOnly:n.onFocusOnly,kinetic:t})),(n.pinchRotate!==void 0?n.pinchRotate:!0)&&e.push(new LG),(n.pinchZoom!==void 0?n.pinchZoom:!0)&&e.push(new kG({duration:n.zoomDuration})),(n.keyboard!==void 0?n.keyboard:!0)&&(e.push(new MG),e.push(new NG({delta:n.zoomDelta,duration:n.zoomDuration}))),(n.mouseWheelZoom!==void 0?n.mouseWheelZoom:!0)&&e.push(new PG({onFocusOnly:n.onFocusOnly,duration:n.zoomDuration})),(n.shiftDragZoom!==void 0?n.shiftDragZoom:!0)&&e.push(new RG({duration:n.zoomDuration})),e}var sr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var yN=class extends yo{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[sr.OPACITY]=e.opacity!==void 0?e.opacity:1,on(typeof t[sr.OPACITY]=="number","Layer opacity must be a number"),t[sr.VISIBLE]=e.visible!==void 0?e.visible:!0,t[sr.Z_INDEX]=e.zIndex,t[sr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[sr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[sr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[sr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let t=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return t.opacity=Hn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=r===void 0&&!t.managed?1/0:r,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Ct()}getLayerStatesArray(e){return Ct()}getExtent(){return this.get(sr.EXTENT)}getMaxResolution(){return this.get(sr.MAX_RESOLUTION)}getMinResolution(){return this.get(sr.MIN_RESOLUTION)}getMinZoom(){return this.get(sr.MIN_ZOOM)}getMaxZoom(){return this.get(sr.MAX_ZOOM)}getOpacity(){return this.get(sr.OPACITY)}getSourceState(){return Ct()}getVisible(){return this.get(sr.VISIBLE)}getZIndex(){return this.get(sr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(sr.EXTENT,e)}setMaxResolution(e){this.set(sr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(sr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(sr.MAX_ZOOM,e)}setMinZoom(e){this.set(sr.MIN_ZOOM,e)}setOpacity(e){on(typeof e=="number","Layer opacity must be a number"),this.set(sr.OPACITY,e)}setVisible(e){this.set(sr.VISIBLE,e)}setZIndex(e){this.set(sr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Pb=yN;var vd={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"},Uu=class extends _i{constructor(e,t){super(e),this.layer=t}},_N={LAYERS:"layers"},vN=class n extends Pb{constructor(e){e=e||{};let t=Object.assign({},e);delete t.layers;let r=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(_N.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new gs(r.slice(),{unique:!0}):on(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new gs(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(An),this.layersListenerKeys_.length=0;let e=this.getLayers();this.layersListenerKeys_.push(an(e,Jo.ADD,this.handleLayersAdd_,this),an(e,Jo.REMOVE,this.handleLayersRemove_,this));for(let r in this.listenerKeys_)this.listenerKeys_[r].forEach(An);Fl(this.listenerKeys_);let t=e.getArray();for(let r=0,i=t.length;r<i;r++){let o=t[r];this.registerLayerListeners_(o),this.dispatchEvent(new Uu(vd.ADDLAYER,o))}this.changed()}registerLayerListeners_(e){let t=[an(e,Fu.PROPERTYCHANGE,this.handleLayerChange_,this),an(e,gt.CHANGE,this.handleLayerChange_,this)];e instanceof n&&t.push(an(e,vd.ADDLAYER,this.handleLayerGroupAdd_,this),an(e,vd.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[_t(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Uu(vd.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Uu(vd.REMOVELAYER,e.layer))}handleLayersAdd_(e){let t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Uu(vd.ADDLAYER,t)),this.changed()}handleLayersRemove_(e){let t=e.element,r=_t(t);this.listenerKeys_[r].forEach(An),delete this.listenerKeys_[r],this.dispatchEvent(new Uu(vd.REMOVELAYER,t)),this.changed()}getLayers(){return this.get(_N.LAYERS)}setLayers(e){let t=this.getLayers();if(t){let r=t.getArray();for(let i=0,o=r.length;i<o;++i)this.dispatchEvent(new Uu(vd.REMOVELAYER,r[i]))}this.set(_N.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){let t=e!==void 0?e:[],r=t.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(t)});let i=this.getLayerState(),o=i.zIndex;!e&&i.zIndex===void 0&&(o=0);for(let s=r,a=t.length;s<a;s++){let l=t[s];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=Nr(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=o)}return t}getSourceState(){return"ready"}},sg=vN;var vi={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var xN=class extends Pb{constructor(e){let t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(sr.SOURCE,this.handleSourcePropertyChange_);let r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(sr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(An(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=an(e,gt.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t,r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof gl?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&r&&(t.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(t.layerStatesArray){if(i=t.layerStatesArray.find(s=>s.layer===this),!i)return!1}else i=this.getLayerState();let o=this.getExtent();return c1(i,t.viewState)&&(!o||Wn(o,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t=this.getSource()?.getAttributions();if(!t)return[];let r=e instanceof gl?e.getViewStateAndExtent():e,i=t(r);return Array.isArray(i)||(i=[i]),i}render(e,t){let r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){let t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(sr.MAP,e)}getMapInternal(){return this.get(sr.MAP)}setMap(e){this.mapPrecomposeKey_&&(An(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(An(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=an(e,vi.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=an(this,gt.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){let t=e.frameState.layerStatesArray,r=this.getLayerState(!1);on(!t.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(r)}setSource(e){this.set(sr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function c1(n,e){if(!n.visible)return!1;let t=e.resolution;if(t<n.minResolution||t>=n.maxResolution)return!1;let r=e.zoom;return r>n.minZoom&&r<=n.maxZoom}var zh=xN;function Lb(n,e,t=0,r=n.length-1,i=bse){for(;r>t;){if(r-t>600){let l=r-t+1,c=e-t+1,f=Math.log(l),d=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*d*(l-d)/l)*(c-l/2<0?-1:1),p=Math.max(t,Math.floor(e-c*d/l+y)),_=Math.min(r,Math.floor(e+(l-c)*d/l+y));Lb(n,e,p,_,i)}let o=n[e],s=t,a=r;for(h1(n,t,e),i(n[r],o)>0&&h1(n,t,r);s<a;){for(h1(n,s,a),s++,a--;i(n[s],o)<0;)s++;for(;i(n[a],o)>0;)a--}i(n[t],o)===0?h1(n,t,a):(a++,h1(n,a,r)),a<=e&&(t=a+1),e<=a&&(r=a-1)}}function h1(n,e,t){let r=n[e];n[e]=n[t],n[t]=r}function bse(n,e){return n<e?-1:n>e?1:0}var U0=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,r=[];if(!Ob(e,t))return r;let i=this.toBBox,o=[];for(;t;){for(let s=0;s<t.children.length;s++){let a=t.children[s],l=t.leaf?i(a):a;Ob(e,l)&&(t.leaf?r.push(a):EN(e,l)?this._all(a,r):o.push(a))}t=o.pop()}return r}collides(e){let t=this.data;if(!Ob(e,t))return!1;let r=[];for(;t;){for(let i=0;i<t.children.length;i++){let o=t.children[i],s=t.leaf?this.toBBox(o):o;if(Ob(e,s)){if(t.leaf||EN(e,s))return!0;r.push(o)}}t=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let r=this.data;this.data=t,t=r}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=j0([]),this}remove(e,t){if(!e)return this;let r=this.data,i=this.toBBox(e),o=[],s=[],a,l,c;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],a=s.pop(),c=!0),r.leaf){let f=Sse(e,r.children,t);if(f!==-1)return r.children.splice(f,1),o.push(r),this._condense(o),this}!c&&!r.leaf&&EN(r,i)?(o.push(r),s.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let r=[];for(;e;)e.leaf?t.push(...e.children):r.push(...e.children),e=r.pop();return t}_build(e,t,r,i){let o=r-t+1,s=this._maxEntries,a;if(o<=s)return a=j0(e.slice(t,r+1)),B0(a,this.toBBox),a;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),a=j0([]),a.leaf=!1,a.height=i;let l=Math.ceil(o/s),c=l*Math.ceil(Math.sqrt(s));FG(e,t,r,c,this.compareMinX);for(let f=t;f<=r;f+=c){let d=Math.min(f+c-1,r);FG(e,f,d,l,this.compareMinY);for(let y=f;y<=d;y+=l){let p=Math.min(y+l-1,d);a.children.push(this._build(e,y,p,i-1))}}return B0(a,this.toBBox),a}_chooseSubtree(e,t,r,i){for(;i.push(t),!(t.leaf||i.length-1===r);){let o=1/0,s=1/0,a;for(let l=0;l<t.children.length;l++){let c=t.children[l],f=wN(c),d=Tse(e,c)-f;d<s?(s=d,o=f<o?f:o,a=c):d===s&&f<o&&(o=f,a=c)}t=a||t.children[0]}return t}_insert(e,t,r){let i=r?e:this.toBBox(e),o=[],s=this._chooseSubtree(i,this.data,t,o);for(s.children.push(e),d1(s,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)}_split(e,t){let r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);let s=this._chooseSplitIndex(r,o,i),a=j0(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,B0(r,this.toBBox),B0(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,t){this.data=j0([e,t]),this.data.height=e.height+1,this.data.leaf=!1,B0(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let i,o=1/0,s=1/0;for(let a=t;a<=r-t;a++){let l=f1(e,0,a,this.toBBox),c=f1(e,a,r,this.toBBox),f=Dse(l,c),d=wN(l)+wN(c);f<o?(o=f,i=a,s=d<s?d:s):f===o&&d<s&&(s=d,i=a)}return i||r-t}_chooseSplitAxis(e,t,r){let i=e.leaf?this.compareMinX:Cse,o=e.leaf?this.compareMinY:Ise,s=this._allDistMargin(e,t,r,i),a=this._allDistMargin(e,t,r,o);s<a&&e.children.sort(i)}_allDistMargin(e,t,r,i){e.children.sort(i);let o=this.toBBox,s=f1(e,0,t,o),a=f1(e,r-t,r,o),l=kb(s)+kb(a);for(let c=t;c<r-t;c++){let f=e.children[c];d1(s,e.leaf?o(f):f),l+=kb(s)}for(let c=r-t-1;c>=t;c--){let f=e.children[c];d1(a,e.leaf?o(f):f),l+=kb(a)}return l}_adjustParentBBoxes(e,t,r){for(let i=r;i>=0;i--)d1(t[i],e)}_condense(e){for(let t=e.length-1,r;t>=0;t--)e[t].children.length===0?t>0?(r=e[t-1].children,r.splice(r.indexOf(e[t]),1)):this.clear():B0(e[t],this.toBBox)}};function Sse(n,e,t){if(!t)return e.indexOf(n);for(let r=0;r<e.length;r++)if(t(n,e[r]))return r;return-1}function B0(n,e){f1(n,0,n.children.length,e,n)}function f1(n,e,t,r,i){i||(i=j0(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<t;o++){let s=n.children[o];d1(i,n.leaf?r(s):s)}return i}function d1(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}function Cse(n,e){return n.minX-e.minX}function Ise(n,e){return n.minY-e.minY}function wN(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function kb(n){return n.maxX-n.minX+(n.maxY-n.minY)}function Tse(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function Dse(n,e){let t=Math.max(n.minX,e.minX),r=Math.max(n.minY,e.minY),i=Math.min(n.maxX,e.maxX),o=Math.min(n.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,o-r)}function EN(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Ob(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function j0(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function FG(n,e,t,r,i){let o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=r)continue;let s=e+Math.ceil((t-e)/r/2)*r;Lb(n,s,e,t,i),o.push(e,s,s,t)}}var Bb=[NaN,NaN,NaN,0],bN;function Ase(){return bN||(bN=$n(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),bN}var Rse=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Mse=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Nse=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,Pse=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Fb(n,e){return n.endsWith("%")?Number(n.substring(0,n.length-1))/e:Number(n)}function g1(n){throw new Error('failed to parse "'+n+'" as color')}function BG(n){if(n.toLowerCase().startsWith("rgb")){let o=n.match(Mse)||n.match(Rse)||n.match(Nse);if(o){let s=o[4],a=100/255;return[Hn(Fb(o[1],a)+.5|0,0,255),Hn(Fb(o[2],a)+.5|0,0,255),Hn(Fb(o[3],a)+.5|0,0,255),s!==void 0?Hn(Fb(s,100),0,1):1]}g1(n)}if(n.startsWith("#")){if(Pse.test(n)){let o=n.substring(1),s=o.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=o.length;l<c;l+=s){let f=parseInt(o.substring(l,l+s),16);s===1&&(f+=f<<4),a[l/s]=f}return a[3]=a[3]/255,a}g1(n)}let e=Ase();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=n,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=n,e.fillStyle===t&&g1(n));let r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return BG(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);let i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=am(i[3]/255,3),i}function jG(n){return typeof n=="string"?n:y1(n)}var Lse=1024,p1={},SN=0;function UG(n){if(n.length===4)return n;let e=n.slice();return e[3]=1,e}function CN(n){return n>.0031308?Math.pow(n,1/2.4)*269.025-14.025:n*3294.6}function IN(n){return n>.2068965?Math.pow(n,3):(n-4/29)*(108/841)}function TN(n){return n>10.314724?Math.pow((n+14.025)/269.025,2.4):n/3294.6}function DN(n){return n>.0088564?Math.pow(n,1/3):n/(108/841)+4/29}function AN(n){let e=TN(n[0]),t=TN(n[1]),r=TN(n[2]),i=DN(e*.222488403+t*.716873169+r*.06060791),o=500*(DN(e*.452247074+t*.399439023+r*.148375274)-i),s=200*(i-DN(e*.016863605+t*.117638439+r*.865350722)),a=Math.atan2(s,o)*(180/Math.PI);return[116*i-16,Math.sqrt(o*o+s*s),a<0?a+360:a,n[3]]}function GG(n){let e=(n[0]+16)/116,t=n[1],r=n[2]*Math.PI/180,i=IN(e),o=IN(e+t/500*Math.cos(r)),s=IN(e-t/200*Math.sin(r)),a=CN(o*3.021973625-i*1.617392459-s*.404875592),l=CN(o*-.943766287+i*1.916279586+s*.027607165),c=CN(o*.069407491-i*.22898585+s*1.159737864);return[Hn(a+.5|0,0,255),Hn(l+.5|0,0,255),Hn(c+.5|0,0,255),n[3]]}function m1(n){if(n==="none")return Bb;if(p1.hasOwnProperty(n))return p1[n];if(SN>=Lse){let t=0;for(let r in p1)(t++&3)===0&&(delete p1[r],--SN)}let e=BG(n);e.length!==4&&g1(n);for(let t of e)isNaN(t)&&g1(n);return p1[n]=e,++SN,e}function Vs(n){return Array.isArray(n)?n:m1(n)}function y1(n){let e=n[0];e!=(e|0)&&(e=e+.5|0);let t=n[1];t!=(t|0)&&(t=t+.5|0);let r=n[2];r!=(r|0)&&(r=r+.5|0);let i=n[3]===void 0?1:Math.round(n[3]*1e3)/1e3;return"rgba("+e+","+t+","+r+","+i+")"}function RN(n){return n[0]>0&&n[1]>0}function zG(n,e,t){return t===void 0&&(t=[0,0]),t[0]=n[0]*e+.5|0,t[1]=n[1]*e+.5|0,t}function Yn(n,e){return Array.isArray(n)?n:(e===void 0?e=[n,n]:(e[0]=n,e[1]=n),e)}var lg=0;var vo=1<<lg++,_n=1<<lg++,ys=1<<lg++,Qo=1<<lg++,zu=1<<lg++,xd=1<<lg++,jb=Math.pow(2,lg)-1,NN={[vo]:"boolean",[_n]:"number",[ys]:"string",[Qo]:"color",[zu]:"number[]",[xd]:"size"},kse=Object.keys(NN).map(Number).sort(Us);function Ose(n){return n in NN}function ag(n){let e=[];for(let t of kse)_1(n,t)&&e.push(NN[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function _1(n,e){return(n&e)===e}function Gu(n,e){return n===e}var Vi=class{constructor(e,t){if(!Ose(e))throw new Error(`literal expressions must have a specific type, got ${ag(e)}`);this.type=e,this.value=t}},v1=class{constructor(e,t,...r){this.type=e,this.operator=t,this.args=r}};function x1(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function xo(n,e,t){switch(typeof n){case"boolean":{if(Gu(e,ys))return new Vi(ys,n?"true":"false");if(!_1(e,vo))throw new Error(`got a boolean, but expected ${ag(e)}`);return new Vi(vo,n)}case"number":{if(Gu(e,xd))return new Vi(xd,Yn(n));if(Gu(e,vo))return new Vi(vo,!!n);if(Gu(e,ys))return new Vi(ys,n.toString());if(!_1(e,_n))throw new Error(`got a number, but expected ${ag(e)}`);return new Vi(_n,n)}case"string":{if(Gu(e,Qo))return new Vi(Qo,m1(n));if(Gu(e,vo))return new Vi(vo,!!n);if(!_1(e,ys))throw new Error(`got a string, but expected ${ag(e)}`);return new Vi(ys,n)}default:}if(!Array.isArray(n))throw new Error("expression must be an array or a primitive value");if(n.length===0)throw new Error("empty expression");if(typeof n[0]=="string")return $se(n,e,t);for(let r of n)if(typeof r!="number")throw new Error("expected an array of numbers");if(Gu(e,xd)){if(n.length!==2)throw new Error(`expected an array of two values for a size, got ${n.length}`);return new Vi(xd,n)}if(Gu(e,Qo)){if(n.length===3)return new Vi(Qo,[...n,1]);if(n.length===4)return new Vi(Qo,n);throw new Error(`expected an array of 3 or 4 values for a color, got ${n.length}`)}if(!_1(e,zu))throw new Error(`got an array of numbers, but expected ${ag(e)}`);return new Vi(zu,n)}var je={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},Fse={[je.Get]:fn(On(1,1/0),VG),[je.Var]:fn(On(1,1),Bse),[je.Has]:fn(On(1,1/0),VG),[je.Id]:fn(jse,G0),[je.Concat]:fn(On(2,1/0),Tr(ys)),[je.GeometryType]:fn(Use,G0),[je.LineMetric]:fn(G0),[je.Resolution]:fn(MN,G0),[je.Zoom]:fn(MN,G0),[je.Time]:fn(MN,G0),[je.Any]:fn(On(2,1/0),Tr(vo)),[je.All]:fn(On(2,1/0),Tr(vo)),[je.Not]:fn(On(1,1),Tr(vo)),[je.Equal]:fn(On(2,2),Tr(jb)),[je.NotEqual]:fn(On(2,2),Tr(jb)),[je.GreaterThan]:fn(On(2,2),Tr(_n)),[je.GreaterThanOrEqualTo]:fn(On(2,2),Tr(_n)),[je.LessThan]:fn(On(2,2),Tr(_n)),[je.LessThanOrEqualTo]:fn(On(2,2),Tr(_n)),[je.Multiply]:fn(On(2,1/0),HG),[je.Coalesce]:fn(On(2,1/0),HG),[je.Divide]:fn(On(2,2),Tr(_n)),[je.Add]:fn(On(2,1/0),Tr(_n)),[je.Subtract]:fn(On(2,2),Tr(_n)),[je.Clamp]:fn(On(3,3),Tr(_n)),[je.Mod]:fn(On(2,2),Tr(_n)),[je.Pow]:fn(On(2,2),Tr(_n)),[je.Abs]:fn(On(1,1),Tr(_n)),[je.Floor]:fn(On(1,1),Tr(_n)),[je.Ceil]:fn(On(1,1),Tr(_n)),[je.Round]:fn(On(1,1),Tr(_n)),[je.Sin]:fn(On(1,1),Tr(_n)),[je.Cos]:fn(On(1,1),Tr(_n)),[je.Atan]:fn(On(1,2),Tr(_n)),[je.Sqrt]:fn(On(1,1),Tr(_n)),[je.Match]:fn(On(4,1/0),qG,zse),[je.Between]:fn(On(3,3),Tr(_n)),[je.Interpolate]:fn(On(6,1/0),qG,Vse),[je.Case]:fn(On(3,1/0),Gse,Hse),[je.In]:fn(On(2,2),qse),[je.Number]:fn(On(1,1/0),Tr(jb)),[je.String]:fn(On(1,1/0),Tr(jb)),[je.Array]:fn(On(1,1/0),Tr(_n)),[je.Color]:fn(On(1,4),Tr(_n)),[je.Band]:fn(On(1,3),Tr(_n)),[je.Palette]:fn(On(2,2),Wse),[je.ToString]:fn(On(1,1),Tr(vo|_n|ys|Qo))};function VG(n,e,t){let r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){let s=n[o+1];switch(typeof s){case"number":{i[o]=new Vi(_n,s);break}case"string":{i[o]=new Vi(ys,s);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${s}`)}o===0&&t.properties.add(String(s))}return i}function Bse(n,e,t){let r=n[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return t.variables.add(r),[new Vi(ys,r)]}function jse(n,e,t){t.featureId=!0}function Use(n,e,t){t.geometryType=!0}function MN(n,e,t){t.mapState=!0}function G0(n,e,t){let r=n[0];if(n.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function On(n,e){return function(t,r,i){let o=t[0],s=t.length-1;if(n===e){if(s!==n){let a=n===1?"":"s";throw new Error(`expected ${n} argument${a} for ${o}, got ${s}`)}}else if(s<n||s>e){let a=e===1/0?`${n} or more`:`${n} to ${e}`;throw new Error(`expected ${a} arguments for ${o}, got ${s}`)}}}function HG(n,e,t){let r=n.length-1,i=new Array(r);for(let o=0;o<r;++o){let s=xo(n[o+1],e,t);i[o]=s}return i}function Tr(n){return function(e,t,r){let i=e.length-1,o=new Array(i);for(let s=0;s<i;++s){let a=xo(e[s+1],n,r);o[s]=a}return o}}function Gse(n,e,t){let r=n[0],i=n.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function qG(n,e,t){let r=n[0],i=n.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function zse(n,e,t){let r=n.length-1,i=ys|_n|vo,o=xo(n[1],i,t),s=xo(n[n.length-1],e,t),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{let c=xo(n[l+2],o.type,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{let c=xo(n[l+3],s.type,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[o,...a,s]}function Vse(n,e,t){let r=n[1],i;switch(r[0]){case"linear":i=1;break;case"exponential":let l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}let o=new Vi(_n,i),s;try{s=xo(n[2],_n,t)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}let a=new Array(n.length-3);for(let l=0;l<a.length;l+=2){try{let c=xo(n[l+3],_n,t);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{let c=xo(n[l+4],e,t);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[o,s,...a]}function Hse(n,e,t){let r=xo(n[n.length-1],e,t),i=new Array(n.length-1);for(let o=0;o<i.length-1;o+=2){try{let s=xo(n[o+1],vo,t);i[o]=s}catch(s){throw new Error(`failed to parse argument ${o} of case expression: ${s.message}`)}try{let s=xo(n[o+2],r.type,t);i[o+1]=s}catch(s){throw new Error(`failed to parse argument ${o+1} of case expression: ${s.message}`)}}return i[i.length-1]=r,i}function qse(n,e,t){let r=n[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=ys}else i=_n;let o=new Array(r.length);for(let a=0;a<o.length;a++)try{let l=xo(r[a],i,t);o[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[xo(n[1],i,t),...o]}function Wse(n,e,t){let r;try{r=xo(n[1],_n,t)}catch(s){throw new Error(`failed to parse first argument in palette expression: ${s.message}`)}let i=n[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");let o=new Array(i.length);for(let s=0;s<o.length;s++){let a;try{a=xo(i[s],Qo,t)}catch(l){throw new Error(`failed to parse color at index ${s} in palette expression: ${l.message}`)}if(!(a instanceof Vi))throw new Error(`the palette color at index ${s} must be a literal value`);o[s]=a}return[r,...o]}function fn(...n){return function(e,t,r){let i=e[0],o;for(let s=0;s<n.length;s++){let a=n[s](e,t,r);if(s==n.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");o=a}}return new v1(t,i,...o)}}function $se(n,e,t){let r=n[0],i=Fse[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(n,e,t)}function PN(n){if(!n)return"";let e=n.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return PN(n.getGeometries()[0]);default:return""}}function LN(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ac(n,e,t){let r=xo(n,e,t);return Vu(r,t)}function Vu(n,e){if(n instanceof Vi){if(n.type===Qo&&typeof n.value=="string"){let r=m1(n.value);return function(){return r}}return function(){return n.value}}let t=n.operator;switch(t){case je.Number:case je.String:case je.Coalesce:return Yse(n,e);case je.Get:case je.Var:case je.Has:return Xse(n,e);case je.Id:return r=>r.featureId;case je.GeometryType:return r=>r.geometryType;case je.Concat:{let r=n.args.map(i=>Vu(i,e));return i=>"".concat(...r.map(o=>o(i).toString()))}case je.Resolution:return r=>r.resolution;case je.Any:case je.All:case je.Between:case je.In:case je.Not:return Kse(n,e);case je.Equal:case je.NotEqual:case je.LessThan:case je.LessThanOrEqualTo:case je.GreaterThan:case je.GreaterThanOrEqualTo:return Zse(n,e);case je.Multiply:case je.Divide:case je.Add:case je.Subtract:case je.Clamp:case je.Mod:case je.Pow:case je.Abs:case je.Floor:case je.Ceil:case je.Round:case je.Sin:case je.Cos:case je.Atan:case je.Sqrt:return Jse(n,e);case je.Case:return Qse(n,e);case je.Match:return eae(n,e);case je.Interpolate:return tae(n,e);case je.ToString:return nae(n,e);default:throw new Error(`Unsupported operator ${t}`)}}function Yse(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Vu(n.args[o],e);switch(t){case je.Coalesce:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case je.Number:case je.String:return o=>{for(let s=0;s<r;++s){let a=i[s](o);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Xse(n,e){let r=n.args[0].value;switch(n.operator){case je.Get:return i=>{let o=n.args,s=i.properties[r];for(let a=1,l=o.length;a<l;++a){let f=o[a].value;s=s[f]}return s};case je.Var:return i=>i.variables[r];case je.Has:return i=>{let o=n.args;if(!(r in i.properties))return!1;let s=i.properties[r];for(let a=1,l=o.length;a<l;++a){let f=o[a].value;if(!s||!Object.hasOwn(s,f))return!1;s=s[f]}return!0};default:throw new Error(`Unsupported accessor operator ${n.operator}`)}}function Zse(n,e){let t=n.operator,r=Vu(n.args[0],e),i=Vu(n.args[1],e);switch(t){case je.Equal:return o=>r(o)===i(o);case je.NotEqual:return o=>r(o)!==i(o);case je.LessThan:return o=>r(o)<i(o);case je.LessThanOrEqualTo:return o=>r(o)<=i(o);case je.GreaterThan:return o=>r(o)>i(o);case je.GreaterThanOrEqualTo:return o=>r(o)>=i(o);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Kse(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Vu(n.args[o],e);switch(t){case je.Any:return o=>{for(let s=0;s<r;++s)if(i[s](o))return!0;return!1};case je.All:return o=>{for(let s=0;s<r;++s)if(!i[s](o))return!1;return!0};case je.Between:return o=>{let s=i[0](o),a=i[1](o),l=i[2](o);return s>=a&&s<=l};case je.In:return o=>{let s=i[0](o);for(let a=1;a<r;++a)if(s===i[a](o))return!0;return!1};case je.Not:return o=>!i[0](o);default:throw new Error(`Unsupported logical operator ${t}`)}}function Jse(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Vu(n.args[o],e);switch(t){case je.Multiply:return o=>{let s=1;for(let a=0;a<r;++a)s*=i[a](o);return s};case je.Divide:return o=>i[0](o)/i[1](o);case je.Add:return o=>{let s=0;for(let a=0;a<r;++a)s+=i[a](o);return s};case je.Subtract:return o=>i[0](o)-i[1](o);case je.Clamp:return o=>{let s=i[0](o),a=i[1](o);if(s<a)return a;let l=i[2](o);return s>l?l:s};case je.Mod:return o=>i[0](o)%i[1](o);case je.Pow:return o=>Math.pow(i[0](o),i[1](o));case je.Abs:return o=>Math.abs(i[0](o));case je.Floor:return o=>Math.floor(i[0](o));case je.Ceil:return o=>Math.ceil(i[0](o));case je.Round:return o=>Math.round(i[0](o));case je.Sin:return o=>Math.sin(i[0](o));case je.Cos:return o=>Math.cos(i[0](o));case je.Atan:return r===2?o=>Math.atan2(i[0](o),i[1](o)):o=>Math.atan(i[0](o));case je.Sqrt:return o=>Math.sqrt(i[0](o));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Qse(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Vu(n.args[i],e);return i=>{for(let o=0;o<t-1;o+=2)if(r[o](i))return r[o+1](i);return r[t-1](i)}}function eae(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Vu(n.args[i],e);return i=>{let o=r[0](i);for(let s=1;s<t-1;s+=2)if(o===r[s](i))return r[s+1](i);return r[t-1](i)}}function tae(n,e){let t=n.args.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=Vu(n.args[i],e);return i=>{let o=r[0](i),s=r[1](i),a,l;for(let c=2;c<t;c+=2){let f=r[c](i),d=r[c+1](i),y=Array.isArray(d);if(y&&(d=UG(d)),f>=s)return c===2?d:y?rae(o,s,a,l,f,d):w1(o,s,a,l,f,d);a=f,l=d}return l}}function nae(n,e){let t=n.operator,r=n.args.length,i=new Array(r);for(let o=0;o<r;++o)i[o]=Vu(n.args[o],e);switch(t){case je.ToString:return o=>{let s=i[0](o);return n.args[0].type===Qo?y1(s):s.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function w1(n,e,t,r,i,o){let s=i-t;if(s===0)return r;let a=e-t,l=n===1?a/s:(Math.pow(n,a)-1)/(Math.pow(n,s)-1);return r+l*(o-r)}function rae(n,e,t,r,i,o){if(i-t===0)return r;let a=AN(r),l=AN(o),c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);let f=[w1(n,e,t,a[0],i,l[0]),w1(n,e,t,a[1],i,l[1]),a[2]+w1(n,e,t,0,i,c),w1(n,e,t,r[3],i,o[3])];return GG(f)}var wt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var kN=class extends eu{constructor(e,t,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=t,this.state=typeof i=="function"?wt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(gt.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==wt.IDLE&&this.loader){this.state=wt.LOADING,this.changed();let e=this.getResolution(),t=Array.isArray(e)?e[0]:e;b0(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||C5&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=wt.LOADED}).catch(r=>{this.state=wt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}};function WG(n,e,t){let r=n,i=!0,o=!1,s=!1,a=[S0(r,gt.LOAD,function(){s=!0,o||e()})];return r.src&&hb?(o=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(s?e():t())})):a.push(S0(r,gt.ERROR,t)),function(){i=!1,a.forEach(An)}}function iae(n,e){return new Promise((t,r)=>{function i(){s(),t(n)}function o(){s(),r(new Error("Image load error"))}function s(){n.removeEventListener("load",i),n.removeEventListener("error",o)}n.addEventListener("load",i),n.addEventListener("error",o),e&&(n.src=e)})}function ON(n,e){return e&&(n.src=e),n.src&&hb?new Promise((t,r)=>n.decode().then(()=>t(n)).catch(i=>n.complete&&n.width?t(n):r(i))):iae(n)}function Ub(n,e){return e&&(n.src=e),n.src&&hb&&C5?n.decode().then(()=>createImageBitmap(n)).catch(t=>{if(n.complete&&n.width)return n;throw t}):ON(n)}var z0=kN;var BN=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let t in this.cache_){let r=this.cache_[t];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,r){let i=FN(e,t,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,t,r){let i=FN(e,t,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,t,r,i,o){let s=FN(e,t,r),a=s in this.cache_;this.cache_[s]=i,o&&(i.getImageState()===wt.IDLE&&i.load(),i.getImageState()===wt.LOADING?i.ready().then(()=>{this.patternCache_[s]=N0().createPattern(i.getImage(1),"repeat")}):this.patternCache_[s]=N0().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function FN(n,e,t){let r=t?Vs(t):"null";return e+":"+n+":"+r}var Hs=new BN;var E1=null,Gb=class extends eu{constructor(e,t,r,i,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=o,this.imageState_=i===void 0?wt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===wt.LOADED){E1||(E1=$n(1,1,void 0,{willReadFrequently:!0})),E1.drawImage(this.image_,0,0);try{E1.getImageData(0,0,1,1),this.tainted_=!1}catch{E1=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(gt.CHANGE)}handleImageError_(){this.imageState_=wt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=wt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],t=this.size_[1],r=$n(e,t);r.fillRect(0,0,e,t),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===wt.IDLE){this.image_||this.initializeImage_(),this.imageState_=wt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&ON(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==wt.LOADED)return;let t=this.image_,r=$n(Math.ceil(t.width*e),Math.ceil(t.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=jG(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===wt.LOADED||this.imageState_===wt.ERROR)e();else{let t=()=>{(this.imageState_===wt.LOADED||this.imageState_===wt.ERROR)&&(this.removeEventListener(gt.CHANGE,t),e())};this.addEventListener(gt.CHANGE,t)}})),this.ready_}};function ug(n,e,t,r,i,o){let s=e===void 0?void 0:Hs.get(e,t,i);return s||(s=new Gb(n,n&&"src"in n?n.src||void 0:e,t,r,i),Hs.set(e,t,i,s,o)),o&&s&&!Hs.getPattern(e,t,i)&&Hs.set(e,t,i,s,o),s}var $G=Gb;function Oa(n){return n?Array.isArray(n)?y1(n):typeof n=="object"&&"src"in n?oae(n):n:null}function oae(n){if(!n.offset||!n.size)return Hs.getPattern(n.src,"anonymous",n.color);let e=n.src+":"+n.offset,t=Hs.getPattern(e,void 0,n.color);if(t)return t;let r=Hs.get(n.src,"anonymous",null);if(r.getImageState()!==wt.LOADED)return null;let i=$n(n.size[0],n.size[1]);return i.drawImage(r.getImage(1),n.offset[0],n.offset[1],n.size[0],n.size[1],0,0,n.size[0],n.size[1]),ug(i.canvas,e,void 0,wt.LOADED,n.color,!0),Hs.getPattern(e,void 0,n.color)}var zb="10px sans-serif",Uo="#000",Rc="round",Fa=[],Ba=0,Mc="round",Vh=10,Hh="#000",wd="center",hg="middle",qh=[0,0,0,0],Wh=1,cg=new yo,b1=null,YG,jN={},sae=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function aae(n,e,t){return`${n} ${e} 16px "${t}"`}var XG=(function(){let e,t;function r(o){return He(this,null,function*(){yield t.ready;let s=yield t.load(o);if(s.length===0)return!1;let a=Tb(o),l=a.families[0].toLowerCase(),c=a.weight;return s.some(f=>{let d=f.family.replace(/^['"]|['"]$/g,"").toLowerCase(),y=Ib[f.weight]||f.weight;return d===l&&f.style===a.style&&y==c})})}function i(){return He(this,null,function*(){yield t.ready;let o=!0,s=cg.getProperties(),a=Object.keys(s).filter(l=>s[l]<100);for(let l=a.length-1;l>=0;--l){let c=a[l],f=s[c];f<100&&((yield r(c))?(Fl(jN),cg.set(c,100)):(f+=10,cg.set(c,f,!0),f<100&&(o=!1)))}e=void 0,o||(e=setTimeout(i,100))})}return function(o){return He(this,null,function*(){t||(t=Ai?self.fonts:document.fonts);let s=Tb(o);if(!s)return;let a=s.families,l=!1;for(let c of a){if(sae.has(c))continue;let f=aae(s.style,s.weight,c);cg.get(f)===void 0&&(cg.set(f,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))})}})(),lae=(function(){let n;return function(e){let t=jN[e];if(t==null){if(Ai){let r=Tb(e),i=ZG(e,"\u017Dg");t=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else n||(n=document.createElement("div"),n.innerHTML="M",n.style.minHeight="0",n.style.maxHeight="none",n.style.height="auto",n.style.padding="0",n.style.border="none",n.style.position="absolute",n.style.display="block",n.style.left="-99999px"),n.style.font=e,document.body.appendChild(n),t=n.offsetHeight,document.body.removeChild(n);jN[e]=t}return t}})();function ZG(n,e){return b1||(b1=$n(1,1)),n!=YG&&(b1.font=n,YG=b1.font),b1.measureText(e)}function KG(n,e){return ZG(n,e).width}function UN(n,e,t){if(e in t)return t[e];let r=e.split(`
`).reduce((i,o)=>Math.max(i,KG(n,o)),0);return t[e]=r,r}function JG(n,e){let t=[],r=[],i=[],o=0,s=0,a=0,l=0;for(let c=0,f=e.length;c<=f;c+=2){let d=e[c];if(d===`
`||c===f){o=Math.max(o,s),i.push(s),s=0,a+=l,l=0;continue}let y=e[c+1]||n.font,p=KG(y,d);t.push(p),s+=p;let _=lae(y);r.push(_),l=Math.max(l,_)}return{width:o,height:a,widths:t,heights:r,lineWidths:i}}function QG(n,e,t,r,i,o,s,a,l,c,f){n.save(),t!==1&&(n.globalAlpha===void 0?n.globalAlpha=d=>d.globalAlpha*=t:n.globalAlpha*=t),e&&n.transform.apply(n,e),r.contextInstructions?(n.translate(l,c),n.scale(f[0],f[1]),uae(r,n)):f[0]<0||f[1]<0?(n.translate(l,c),n.scale(f[0],f[1]),n.drawImage(r,i,o,s,a,0,0,s,a)):n.drawImage(r,i,o,s,a,l,c,s*f[0],a*f[1]),n.restore()}function uae(n,e){let t=n.contextInstructions;for(let r=0,i=t.length;r<i;r+=2)Array.isArray(t[r+1])?e[t[r]].apply(e,t[r+1]):e[t[r]]=t[r+1]}var GN=class n{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Yn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Ct()}getImage(e){return Ct()}getHitDetectionImage(){return Ct()}getPixelRatio(e){return 1}getImageState(){return Ct()}getImageSize(){return Ct()}getOrigin(){return Ct()}getSize(){return Ct()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Yn(e)}listenImageChange(e){Ct()}load(){Ct()}unlistenImageChange(e){Ct()}ready(){return Promise.resolve()}},Vb=GN;var zN=class n extends Vb{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?wt.LOADING:wt.LOADED,this.imageState_===wt.LOADING&&this.ready().then(()=>this.imageState_=wt.LOADED),this.render()}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){let e=this.size_,t=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-t[0]/r[0],e[1]/2+t[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(","),i=Hs.get(r,null,null)?.getImage(1);if(!i){let o=this.renderOptions_,s=Math.ceil(o.size*e),a=$n(s,s);this.draw_(o,a,e),i=a.canvas,Hs.set(r,null,null,new $G(i,void 0,null,wt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,r){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let i=this.radius,o=this.radius2_===void 0?i:this.radius2_;if(i<o){let W=i;i=o,o=W}let s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),c=Math.sqrt(o*o-l*l),f=i-c,d=Math.sqrt(l*l+f*f),y=d/l;if(e==="miter"&&y<=r)return y*t;let p=t/2/y,_=t/2*(f/d),b=Math.sqrt((i+p)*(i+p)+_*_)-i;if(this.radius2_===void 0||e==="bevel")return b*2;let S=i*Math.sin(a),T=Math.sqrt(i*i-S*S),A=o-T,O=Math.sqrt(S*S+A*A)/S;if(O<=r){let W=O*t/2-o-i;return 2*Math.max(b,W)}return b*2}createRenderOptions(){let e=Rc,t=Mc,r=0,i=null,o=0,s,a=0;this.stroke_&&(s=Oa(this.stroke_.getColor()??Hh),a=this.stroke_.getWidth()??Wh,i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Mc,e=this.stroke_.getLineCap()??Rc,r=this.stroke_.getMiterLimit()??Vh);let l=this.calculateLineJoinSize_(t,a,r),c=Math.max(this.radius,this.radius2_||0),f=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:f,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,r){if(t.scale(r,r),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let i=this.fill_.getColor();i===null&&(i=Uo),t.fillStyle=Oa(i),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=Vs(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(t=$n(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_,r=this.radius;if(t===1/0)e.arc(0,0,r,0,2*Math.PI);else{let i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(t*=2);let o=this.angle_-Math.PI/2,s=2*Math.PI/t;for(let a=0;a<t;a++){let l=o+a*s,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Uo,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},Hb=zN;var VN=class n extends Hb{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){let e=this.getScale(),t=new n({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}},da=VN;var HN=class n{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){let t=ug(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===wt.IDLE&&t.load(),t.getImageState()===wt.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){let e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?_t(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Vs(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},qr=HN;function e9(n,e,t,r){return t!==void 0&&r!==void 0?[t/n,r/e]:t!==void 0?t/n:r!==void 0?r/e:1}var qN=class n extends Vb{constructor(e){e=e||{};let t=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;let s=e.img!==void 0?e.img:null,a=e.src;on(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||_t(s)),on(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),on(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=wt.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?wt.LOADED:wt.IDLE:l=wt.LOADING:l=wt.LOADED),this.color_=e.color!==void 0?Vs(e.color):null,this.iconImage_=ug(s,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,f;if(e.size)[c,f]=e.size;else{let d=this.getImage(1);if(d.width&&d.height)c=d.width,f=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;let y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;let p=this.iconImage_.getSize();this.setScale(e9(p[0],p[1],e.width,e.height))};this.listenImageChange(y);return}}c!==void 0&&this.setScale(e9(c,f,e.width,e.height))}}clone(){let e,t,r;return this.initialOptions_?(t=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new n({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}let t=this.getDisplacement(),r=this.getScaleArray();return[e[0]-t[0]/r[0],e[1]+t[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){let t=this.getSize(),r=this.iconImage_.getSize();if(!t||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=ug(null,e,this.crossOrigin_,wt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==wt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==wt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(gt.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(gt.CHANGE,e)}ready(){return this.iconImage_.ready()}},Ed=qN;var WN=class n{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let e=this.getColor();return new n({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},xi=WN;var bd=class n{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=t9,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new n({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=t9,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function n9(n){let e;if(typeof n=="function")e=n;else{let t;Array.isArray(n)?t=n:(on(typeof n.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[n]),e=function(){return t}}return e}var $N=null;function YN(n,e){if(!$N){let t=new qr({color:"rgba(255,255,255,0.4)"}),r=new xi({color:"#3399CC",width:1.25});$N=[new bd({image:new da({fill:t,stroke:r,radius:5}),fill:t,stroke:r})]}return $N}function r9(){let n={},e=[255,255,255,1],t=[0,153,255,1],r=3;return n.Polygon=[new bd({fill:new qr({color:[255,255,255,.5]})})],n.MultiPolygon=n.Polygon,n.LineString=[new bd({stroke:new xi({color:e,width:r+2})}),new bd({stroke:new xi({color:t,width:r})})],n.MultiLineString=n.LineString,n.Circle=n.Polygon.concat(n.LineString),n.Point=[new bd({image:new da({radius:r*2,fill:new qr({color:t}),stroke:new xi({color:e,width:r/2})}),zIndex:1/0})],n.MultiPoint=n.Point,n.GeometryCollection=n.Polygon.concat(n.LineString,n.Point),n}function t9(n){return n.getGeometry()}var ri=bd;var cae="#333",XN=class n{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Yn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new qr({color:cae}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new n({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof qr?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Yn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},Sd=XN;function hae(n){return!0}function a9(n){let e=x1(),t=fae(n,e),r=LN();return function(i,o){if(r.properties=i.getPropertiesInternal(),r.resolution=o,e.featureId){let s=i.getId();s!==void 0?r.featureId=s:r.featureId=null}return e.geometryType&&(r.geometryType=PN(i.getGeometry())),t(r)}}function JN(n){let e=x1(),t=n.length,r=new Array(t);for(let s=0;s<t;++s)r[s]=ZN(n[s],e);let i=LN(),o=new Array(t);return function(s,a){if(i.properties=s.getPropertiesInternal(),i.resolution=a,e.featureId){let c=s.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<t;++c){let f=r[c](i);f&&(o[l]=f,l+=1)}return o.length=l,o}}function fae(n,e){let t=n.length,r=new Array(t);for(let i=0;i<t;++i){let o=n[i],s="filter"in o?Ac(o.filter,vo,e):hae,a;if(Array.isArray(o.style)){let l=o.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=ZN(o.style[c],e)}else a=[ZN(o.style,e)];r[i]={filter:s,styles:a}}return function(i){let o=[],s=!1;for(let a=0;a<t;++a){let l=r[a].filter;if(l(i)&&!(n[a].else&&s)){s=!0;for(let c of r[a].styles){let f=c(i);f&&o.push(f)}}}return o}}function ZN(n,e){let t=S1(n,"",e),r=C1(n,"",e),i=dae(n,e),o=pae(n,e),s=ja(n,"z-index",e);if(!t&&!r&&!i&&!o&&!la(n))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(n));let a=new ri;return function(l){let c=!0;if(t){let f=t(l);f&&(c=!1),a.setFill(f)}if(r){let f=r(l);f&&(c=!1),a.setStroke(f)}if(i){let f=i(l);f&&(c=!1),a.setText(f)}if(o){let f=o(l);f&&(c=!1),a.setImage(f)}return s&&a.setZIndex(s(l)),c?null:a}}function S1(n,e,t){let r;if(e+"fill-pattern-src"in n)r=_ae(n,e+"fill-",t);else{if(n[e+"fill-color"]==="none")return o=>null;r=QN(n,e+"fill-color",t)}if(!r)return null;let i=new qr;return function(o){let s=r(o);return s===Bb?null:(i.setColor(s),i)}}function C1(n,e,t){let r=ja(n,e+"stroke-width",t),i=QN(n,e+"stroke-color",t);if(!r&&!i)return null;let o=$h(n,e+"stroke-line-cap",t),s=$h(n,e+"stroke-line-join",t),a=l9(n,e+"stroke-line-dash",t),l=ja(n,e+"stroke-line-dash-offset",t),c=ja(n,e+"stroke-miter-limit",t),f=new xi;return function(d){if(i){let y=i(d);if(y===Bb)return null;f.setColor(y)}if(r&&f.setWidth(r(d)),o){let y=o(d);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");f.setLineCap(y)}if(s){let y=s(d);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");f.setLineJoin(y)}return a&&f.setLineDash(a(d)),l&&f.setLineDashOffset(l(d)),c&&f.setMiterLimit(c(d)),f}}function dae(n,e){let t="text-",r=$h(n,t+"value",e);if(!r)return null;let i=S1(n,t,e),o=S1(n,t+"background-",e),s=C1(n,t,e),a=C1(n,t+"background-",e),l=$h(n,t+"font",e),c=ja(n,t+"max-angle",e),f=ja(n,t+"offset-x",e),d=ja(n,t+"offset-y",e),y=V0(n,t+"overflow",e),p=$h(n,t+"placement",e),_=ja(n,t+"repeat",e),w=$b(n,t+"scale",e),b=V0(n,t+"rotate-with-view",e),S=ja(n,t+"rotation",e),T=$h(n,t+"align",e),A=$h(n,t+"justify",e),N=$h(n,t+"baseline",e),O=V0(n,t+"keep-upright",e),W=l9(n,t+"padding",e),X=Yb(n,t+"declutter-mode"),Y=new Sd({declutterMode:X});return function($){if(Y.setText(r($)),i&&Y.setFill(i($)),o&&Y.setBackgroundFill(o($)),s&&Y.setStroke(s($)),a&&Y.setBackgroundStroke(a($)),l&&Y.setFont(l($)),c&&Y.setMaxAngle(c($)),f&&Y.setOffsetX(f($)),d&&Y.setOffsetY(d($)),y&&Y.setOverflow(y($)),p){let V=p($);if(V!=="point"&&V!=="line")throw new Error("Expected point or line for text-placement");Y.setPlacement(V)}if(_&&Y.setRepeat(_($)),w&&Y.setScale(w($)),b&&Y.setRotateWithView(b($)),S&&Y.setRotation(S($)),T){let V=T($);if(V!=="left"&&V!=="center"&&V!=="right"&&V!=="end"&&V!=="start")throw new Error("Expected left, right, center, start, or end for text-align");Y.setTextAlign(V)}if(A){let V=A($);if(V!=="left"&&V!=="right"&&V!=="center")throw new Error("Expected left, right, or center for text-justify");Y.setJustify(V)}if(N){let V=N($);if(V!=="bottom"&&V!=="top"&&V!=="middle"&&V!=="alphabetic"&&V!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Y.setTextBaseline(V)}return W&&Y.setPadding(W($)),O&&Y.setKeepUpright(O($)),Y}}function pae(n,e){return"icon-src"in n?gae(n,e):"shape-points"in n?mae(n,e):"circle-radius"in n?yae(n,e):null}function gae(n,e){let t="icon-",r=t+"src",i=u9(n[r],r),o=qb(n,t+"anchor",e),s=$b(n,t+"scale",e),a=ja(n,t+"opacity",e),l=qb(n,t+"displacement",e),c=ja(n,t+"rotation",e),f=V0(n,t+"rotate-with-view",e),d=o9(n,t+"anchor-origin"),y=s9(n,t+"anchor-x-units"),p=s9(n,t+"anchor-y-units"),_=Eae(n,t+"color"),w=xae(n,t+"cross-origin"),b=wae(n,t+"offset"),S=o9(n,t+"offset-origin"),T=Wb(n,t+"width"),A=Wb(n,t+"height"),N=vae(n,t+"size"),O=Yb(n,t+"declutter-mode"),W=new Ed({src:i,anchorOrigin:d,anchorXUnits:y,anchorYUnits:p,color:_,crossOrigin:w,offset:b,offsetOrigin:S,height:A,width:T,size:N,declutterMode:O});return function(X){return a&&W.setOpacity(a(X)),l&&W.setDisplacement(l(X)),c&&W.setRotation(c(X)),f&&W.setRotateWithView(f(X)),s&&W.setScale(s(X)),o&&W.setAnchor(o(X)),W}}function mae(n,e){let t="shape-",r=t+"points",i=t+"radius",o=KN(n[r],r),s=KN(n[i],i),a=S1(n,t,e),l=C1(n,t,e),c=$b(n,t+"scale",e),f=qb(n,t+"displacement",e),d=ja(n,t+"rotation",e),y=V0(n,t+"rotate-with-view",e),p=Wb(n,t+"radius2"),_=Wb(n,t+"angle"),w=Yb(n,t+"declutter-mode"),b=new Hb({points:o,radius:s,radius2:p,angle:_,declutterMode:w});return function(S){return a&&b.setFill(a(S)),l&&b.setStroke(l(S)),f&&b.setDisplacement(f(S)),d&&b.setRotation(d(S)),y&&b.setRotateWithView(y(S)),c&&b.setScale(c(S)),b}}function yae(n,e){let t="circle-",r=S1(n,t,e),i=C1(n,t,e),o=ja(n,t+"radius",e),s=$b(n,t+"scale",e),a=qb(n,t+"displacement",e),l=ja(n,t+"rotation",e),c=V0(n,t+"rotate-with-view",e),f=Yb(n,t+"declutter-mode"),d=new da({radius:5,declutterMode:f});return function(y){return o&&d.setRadius(o(y)),r&&d.setFill(r(y)),i&&d.setStroke(i(y)),a&&d.setDisplacement(a(y)),l&&d.setRotation(l(y)),c&&d.setRotateWithView(c(y)),s&&d.setScale(s(y)),d}}function ja(n,e,t){if(!(e in n))return;let r=Ac(n[e],_n,t);return function(i){return KN(r(i),e)}}function $h(n,e,t){if(!(e in n))return null;let r=Ac(n[e],ys,t);return function(i){return u9(r(i),e)}}function _ae(n,e,t){let r=$h(n,e+"pattern-src",t),i=i9(n,e+"pattern-offset",t),o=i9(n,e+"pattern-size",t),s=QN(n,e+"color",t);return function(a){return{src:r(a),offset:i&&i(a),size:o&&o(a),color:s&&s(a)}}}function V0(n,e,t){if(!(e in n))return null;let r=Ac(n[e],vo,t);return function(i){let o=r(i);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function QN(n,e,t){if(!(e in n))return null;let r=Ac(n[e],Qo,t);return function(i){return c9(r(i),e)}}function l9(n,e,t){if(!(e in n))return null;let r=Ac(n[e],zu,t);return function(i){return I1(r(i),e)}}function qb(n,e,t){if(!(e in n))return null;let r=Ac(n[e],zu,t);return function(i){let o=I1(r(i),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function i9(n,e,t){if(!(e in n))return null;let r=Ac(n[e],zu,t);return function(i){return h9(r(i),e)}}function $b(n,e,t){if(!(e in n))return null;let r=Ac(n[e],zu|_n,t);return function(i){return bae(r(i),e)}}function Wb(n,e){let t=n[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function vae(n,e){let t=n[e];if(t!==void 0){if(typeof t=="number")return Yn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function xae(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function o9(n,e){let t=n[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function s9(n,e){let t=n[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function wae(n,e){let t=n[e];if(t!==void 0)return I1(t,e)}function Yb(n,e){let t=n[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function Eae(n,e){let t=n[e];if(t!==void 0)return c9(t,e)}function I1(n,e){if(!Array.isArray(n))throw new Error(`Expected an array for ${e}`);let t=n.length;for(let r=0;r<t;++r)if(typeof n[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return n}function u9(n,e){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}function KN(n,e){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}function c9(n,e){if(typeof n=="string")return n;let t=I1(n,e),r=t.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function h9(n,e){let t=I1(n,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function bae(n,e){return typeof n=="number"?n:h9(n,e)}var f9={RENDER_ORDER:"renderOrder"},eP=class extends zh{constructor(e){e=e||{};let t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(f9.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){let r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new U0(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(f9.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?YN:e;let t=Sae(e);this.styleFunction_=e===null?void 0:n9(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}};function Sae(n){if(n===void 0)return YN;if(!n)return null;if(typeof n=="function"||n instanceof ri)return n;if(!Array.isArray(n))return JN([n]);if(n.length===0)return[];let e=n.length,t=n[0];if(t instanceof ri){let i=new Array(e);for(let o=0;o<e;++o){let s=n[o];if(!(s instanceof ri))throw new Error("Expected a list of style instances");i[o]=s}return i}if("style"in t){let i=new Array(e);for(let o=0;o<e;++o){let s=n[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");i[o]=s}return a9(i)}return JN(n)}var H0=eP;var tP=class extends _i{constructor(e,t,r,i){super(e),this.inversePixelTransform=t,this.frameState=r,this.context=i}},Cd=tP;var nP=class extends Ic{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Ct()}calculateMatrices2D(e){let t=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;Ri(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),T0(i,r)}forEachFeatureAtCoordinate(e,t,r,i,o,s,a,l){let c,f=t.viewState;function d(N,O,W,X){return o.call(s,O,N?W:null,X)}let y=f.projection,p=ym(e.slice(),y),_=[[0,0]];if(y.canWrapX()&&i){let N=y.getExtent(),O=nn(N);_.push([-O,0],[O,0])}let w=t.layerStatesArray,b=w.length,S=[],T=[];for(let N=0;N<_.length;N++)for(let O=b-1;O>=0;--O){let W=w[O],X=W.layer;if(X.hasRenderer()&&c1(W,f)&&a.call(l,X)){let Y=X.getRenderer(),$=X.getSource();if(Y&&$){let V=$.getWrapX()?p:e,B=d.bind(null,W.managed);T[0]=V[0]+_[N][0],T[1]=V[1]+_[N][1],c=Y.forEachFeatureAtCoordinate(T,t,r,B,S)}if(c)return c}}if(S.length===0)return;let A=1/S.length;return S.forEach((N,O)=>N.distanceSq+=O*A),S.sort((N,O)=>N.distanceSq-O.distanceSq),S.some(N=>c=N.callback(N.feature,N.layer,N.geometry)),c}hasFeatureAtCoordinate(e,t,r,i,o,s){return this.forEachFeatureAtCoordinate(e,t,r,i,Bu,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){Ct()}scheduleExpireIconCache(e){Hs.canExpireCache()&&e.postRenderFunctions.push(Cae)}};function Cae(n,e){Hs.expire()}var d9=nP;var rP=class extends d9{constructor(e){super(e),this.fontChangeListenerKey_=an(cg,Fu.PROPERTYCHANGE,e.redrawText,e),this.element_=Ai?Db():document.createElement("div");let t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=yd+" ol-layers";let r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){let r=this.getMap();if(r.hasListener(e)){let i=new Cd(e,void 0,t);r.dispatchEvent(i)}}disposeInternal(){An(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(vi.PRECOMPOSE,e);let t=e.layerStatesArray.sort((c,f)=>c.zIndex-f.zIndex);t.some(c=>c.layer instanceof H0&&c.layer.getDeclutter())&&(e.declutter={});let i=e.viewState;this.children_.length=0;let o=[],s=null;for(let c=0,f=t.length;c<f;++c){let d=t[c];e.layerIndex=c;let y=d.layer,p=y.getSourceState();if(!c1(d,i)||p!="ready"&&p!="undefined"){y.unrender();continue}let _=y.render(e,s);_&&(_!==s&&(this.children_.push(_),s=_),o.push(d))}this.declutter(e,o),gG(this.element_,this.children_);let l=this.getMap().getTargetElement();if(ju(l)){let c=l.getContext("2d");for(let f of this.children_){let d=f.firstElementChild||f,y=f.style.backgroundColor;if(y&&(!ju(d)||d.width>0)&&(c.fillStyle=y,c.fillRect(0,0,l.width,l.height)),ju(d)&&d.width>0){let p=f.style.opacity||d.style.opacity;c.globalAlpha=p===""?1:Number(p);let _=d.style.transform;if(_)c.setTransform(...db(_));else{let w=parseFloat(d.style.width)/d.width,b=parseFloat(d.style.height)/d.height;c.setTransform(w,0,0,b,0,0)}c.drawImage(d,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(vi.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let r=t.length-1;r>=0;--r){let i=t[r],o=i.layer;o.getDeclutter()&&o.renderDeclutter(e,i)}t.forEach(r=>r.layer.renderDeferred(e))}}},p9=rP;function g9(n){if(n instanceof zh){n.setMapInternal(null);return}n instanceof sg&&n.getLayers().forEach(g9)}function m9(n,e){if(n instanceof zh){n.setMapInternal(e);return}if(n instanceof sg){let t=n.getLayers().getArray();for(let r=0,i=t.length;r<i;++r)m9(t[r],e)}}var iP=class extends yo{constructor(e){super(),e=e||{},this.on,this.once,this.un;let t=Iae(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:OU,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Hr(),this.pixelToCoordinateTransform_=Hr(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,Ai||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,Ai||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=t.controls||(Ai?new gs:s1()),this.interactions=t.interactions||(Ai?new gs:OG({onFocusOnly:!0})),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ms.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ms.VIEW,this.handleViewChanged_),this.addChangeListener(ms.SIZE,this.handleSizeChanged_),this.addChangeListener(ms.TARGET,this.handleTargetChanged_),this.setProperties(t.values);let r=this;e.view&&!(e.view instanceof gl)&&e.view.then(function(i){r.setView(new gl(i))}),this.controls.addEventListener(Jo.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Jo.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Jo.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Jo.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Jo.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Jo.REMOVE,i=>{let o=i.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){m9(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){let t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,r){if(!this.frameState_||!this.renderer_)return;let i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};let o=r.hitTolerance!==void 0?r.hitTolerance:0,s=r.layerFilter!==void 0?r.layerFilter:Bu,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,o,a,t,null,s,null)}getFeaturesAtPixel(e,t){let r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},t),r}getAllLayers(){let e=[];function t(r){r.forEach(function(i){i instanceof sg?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;let r=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};let i=t.layerFilter!==void 0?t.layerFilter:Bu,o=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,o,s,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){let r=this.viewport_.getBoundingClientRect(),i=this.getSize(),o=r.width/i[0],s=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/o,(a.clientY-r.top)/s]}getTarget(){return this.get(ms.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return vp(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){let t=this.frameState_;return t?Ir(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){let t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ms.LAYERGROUP)}setLayers(e){let t=this.getLayerGroup();if(e instanceof gs){t.setLayers(e);return}let r=t.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let e=this.getLayerGroup().getLayerStatesArray();for(let t=0,r=e.length;t<r;++t){let i=e[t];if(!i.visible)continue;let o=i.layer.getRenderer();if(o&&!o.ready)return!0;let s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){let t=Da(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){let t=this.frameState_;return t?Ir(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ms.SIZE)}getView(){return this.get(ms.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,r,i){return UU(this.frameState_,e,t,r,i)}handleBrowserEvent(e,t){t=t||e.type;let r=new tu(t,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;let t=e.originalEvent,r=t.type;if(r===Hv.POINTERDOWN||r===gt.WHEEL||r===gt.KEYDOWN){let i=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():i,s=t.target,a=o instanceof ShadowRoot?o.host===s?o.host.ownerDocument:o:o===i?i.documentElement:o;if(this.overlayContainerStopEvent_.contains(s)||!a.contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){let i=this.getInteractions().getArray().slice();for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){let e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let i=this.maxTilesLoading_,o=i;if(e){let s=e.viewHints;if(s[Vr.ANIMATING]||s[Vr.INTERACTING]){let a=Date.now()-e.time>8;i=a?0:8,o=a?0:2}}t.getTilesLoading()<i&&(t.reprioritize(),t.loadMoreTiles(i,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(vi.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(vi.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ud(Tc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ud(Tc.LOADSTART,this,e))));let r=this.postRenderFunctions_;if(e)for(let i=0,o=r.length;i<o;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)An(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(gt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!ju(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);let r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}let e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(ju(t)||t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new p9(this)),!ju(t)){this.mapBrowserEventHandler_=new FU(this,this.moveTolerance_);for(let i in ur)this.mapBrowserEventHandler_.addEventListener(ur[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(gt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(gt.WHEEL,this.boundHandleBrowserEvent_,fb?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{let i=t.getRootNode();r=i instanceof ShadowRoot?i.host:t}if(this.targetChangeHandlerKeys_=[an(r,gt.KEYDOWN,this.handleBrowserEvent,this),an(r,gt.KEYPRESS,this.handleBrowserEvent,this)],t instanceof HTMLElement){let i=t.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(t)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(An(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(An(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=an(e,Fu.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=an(e,gt.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(An),this.layerGroupPropertyListenerKeys_=null);let e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Uu("addlayer",e)),this.layerGroupPropertyListenerKeys_=[an(e,Fu.PROPERTYCHANGE,this.render,this),an(e,gt.CHANGE,this.render,this),an(e,"addlayer",this.handleLayerAdd_,this),an(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;let e=this.frameState_.layerStatesArray;for(let t=0,r=e.length;t<r;++t){let i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){g9(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){let t=this.getSize(),r=this.getView(),i=this.frameState_,o=null;if(t!==void 0&&RN(t)&&r&&r.isDef()){let s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Bf(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:_t(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=Bf(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),i&&(!this.previousExtent_||!Ls(this.previousExtent_)&&!ll(o.extent,this.previousExtent_))&&(this.dispatchEvent(new ud(Tc.MOVESTART,this,i)),this.previousExtent_=um(this.previousExtent_)),this.previousExtent_&&!o.viewHints[Vr.ANIMATING]&&!o.viewHints[Vr.INTERACTING]&&!ll(o.extent,this.previousExtent_)&&(this.dispatchEvent(new ud(Tc.MOVEEND,this,o)),yw(o.extent,this.previousExtent_))),this.dispatchEvent(new ud(Tc.POSTRENDER,this,o)),this.renderComplete_=(this.hasListener(Tc.LOADSTART)||this.hasListener(Tc.LOADEND)||this.hasListener(vi.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){let t=this.getLayerGroup();t&&this.handleLayerRemove_(new Uu("removelayer",t)),this.set(ms.LAYERGROUP,e)}setSize(e){this.set(ms.SIZE,e)}setTarget(e){this.set(ms.TARGET,e)}setView(e){if(!e||e instanceof gl){this.set(ms.VIEW,e);return}this.set(ms.VIEW,new gl);let t=this;e.then(function(r){t.setView(new gl(r))})}updateSize(){let e=this.getTargetElement(),t;if(e){let i,o;if(ju(e))i=e.width,o=e.height;else{let s=getComputedStyle(e);i=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth)}!isNaN(i)&&!isNaN(o)&&(t=[Math.max(0,i),Math.max(0,o)],!RN(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&qF("No map visible because the map container's width or height are 0."))}let r=this.getSize();t&&(!r||!Gs(t,r))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){let t=this.getView();t&&t.setViewportSize(e)}};function Iae(n){let e=null;n.keyboardEventTarget!==void 0&&(e=typeof n.keyboardEventTarget=="string"?document.getElementById(n.keyboardEventTarget):n.keyboardEventTarget);let t={},r=n.layers&&typeof n.layers.getLayers=="function"?n.layers:new sg({layers:n.layers});t[ms.LAYERGROUP]=r,t[ms.TARGET]=n.target,t[ms.VIEW]=n.view instanceof gl?n.view:new gl;let i;n.controls!==void 0&&(Array.isArray(n.controls)?i=new gs(n.controls.slice()):(on(typeof n.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=n.controls));let o;n.interactions!==void 0&&(Array.isArray(n.interactions)?o=new gs(n.interactions.slice()):(on(typeof n.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=n.interactions));let s;return n.overlays!==void 0?Array.isArray(n.overlays)?s=new gs(n.overlays.slice()):(on(typeof n.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=n.overlays):s=new gs,{controls:i,interactions:o,keyboardEventTarget:e,overlays:s,values:t}}var y9=iP;var oP=class extends eu{constructor(e,t,r){super(),r=r||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(gt.CHANGE)}release(){this.setState(Ze.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ze.EMPTY){if(this.state!==Ze.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Ct()}getAlpha(e,t){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=t,this.transitionStarts_[e]=r;else if(r===-1)return 1;let i=t-r+1e3/60;return i>=this.transition_?1:R5(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}},Nc=oP;function Yh(n){return n instanceof Image||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageBitmap?n:null}function T1(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Float32Array||n instanceof DataView?n:null}var Tae=new Error("disposed"),q0=null;function _9(n){q0||(q0=$n(n.width,n.height,void 0,{willReadFrequently:!0}));let e=q0.canvas,t=n.width;e.width!==t&&(e.width=t);let r=n.height;return e.height!==r&&(e.height=r),q0.clearRect(0,0,t,r),q0.drawImage(n,0,0),q0.getImageData(0,0,t,r).data}var Dae=[256,256],sP=class extends Nc{constructor(e){let t=Ze.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;let e=Yh(this.data_);return e?[e.width,e.height]:Dae}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ze.IDLE&&this.state!==Ze.ERROR)return;this.state=Ze.LOADING,this.changed();let e=this;this.loader_().then(function(t){e.data_=t,e.state=Ze.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Ze.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Tae),this.controller_=null),super.disposeInternal()}},Xh=sP;var aP=class extends Nc{constructor(e,t,r,i,o,s){super(e,t,s),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,Ai?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ze.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=Ze.ERROR,this.unlistenImage_(),this.image_=Aae(),this.changed()}handleImageLoad_(){if(Ai)this.state=Ze.LOADED;else{let e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ze.LOADED:this.state=Ze.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==Ze.ERROR&&(this.state=Ze.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ze.IDLE&&(this.state=Ze.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=WG(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}};function Aae(){let n=$n(1,1);return n.fillStyle="rgba(0,0,0,0)",n.fillRect(0,0,1,1),n.canvas}var Id=aP;var Xb=class{constructor(e,t,r,i){this.minX=e,this.maxX=t,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function fg(n,e,t,r,i){return i!==void 0?(i.minX=n,i.maxX=e,i.minY=t,i.maxY=r,i):new Xb(n,e,t,r)}var W0=Xb;var lP,dg=[];function v9(n,e,t,r,i){n.beginPath(),n.moveTo(0,0),n.lineTo(e,t),n.lineTo(r,i),n.closePath(),n.save(),n.clip(),n.fillRect(0,0,Math.max(e,r)+1,Math.max(t,i)),n.restore()}function uP(n,e){return Math.abs(n[e*4]-210)>2||Math.abs(n[e*4+3]-.75*255)>2}function Rae(){if(lP===void 0){let n=$n(6,6,dg);n.globalCompositeOperation="lighter",n.fillStyle="rgba(210, 0, 0, 0.75)",v9(n,4,5,4,0),v9(n,4,5,0,5);let e=n.getImageData(0,0,3,3).data;lP=uP(e,0)||uP(e,4)||uP(e,8),Uh(n),dg.push(n.canvas)}return lP}function $0(n,e,t,r){let i=vm(t,e,n),o=cD(e,r,t),s=e.getMetersPerUnit();s!==void 0&&(o*=s);let a=n.getMetersPerUnit();a!==void 0&&(o/=a);let l=n.getExtent();if(!l||Ms(l,i)){let c=cD(n,o,i)/o;isFinite(c)&&c>0&&(o/=c)}return o}function Zb(n,e,t,r){let i=Lo(t),o=$0(n,e,i,r);return(!isFinite(o)||o<=0)&&dm(t,function(s){return o=$0(n,e,s,r),isFinite(o)&&o>0}),o}function Kb(n,e,t,r,i,o,s,a,l,c,f,d,y,p){let _=$n(Math.round(t*n),Math.round(t*e),dg);if(d||(_.imageSmoothingEnabled=!1),l.length===0)return _.canvas;_.scale(t,t);function w(O){return Math.round(O*t)/t}_.globalCompositeOperation="lighter";let b=Ci();l.forEach(function(O,W,X){hm(b,O.extent)});let S,T=t/r,A=(d?1:1+Math.pow(2,-24))/T;if(!y||l.length!==1||c!==0){if(S=$n(Math.round(nn(b)*T),Math.round(Qn(b)*T),dg),d||(S.imageSmoothingEnabled=!1),i&&p){let O=(i[0]-b[0])*T,W=-(i[3]-b[3])*T,X=nn(i)*T,Y=Qn(i)*T;S.rect(O,W,X,Y),S.clip()}l.forEach(function(O,W,X){if(O.image.width>0&&O.image.height>0){if(O.clipExtent){S.save();let v=(O.clipExtent[0]-b[0])*T,I=-(O.clipExtent[3]-b[3])*T,M=nn(O.clipExtent)*T,j=Qn(O.clipExtent)*T;S.rect(d?v:Math.round(v),d?I:Math.round(I),d?M:Math.round(v+M)-Math.round(v),d?j:Math.round(I+j)-Math.round(I)),S.clip()}let Y=(O.extent[0]-b[0])*T,$=-(O.extent[3]-b[3])*T,V=nn(O.extent)*T,B=Qn(O.extent)*T;S.drawImage(O.image,c,c,O.image.width-2*c,O.image.height-2*c,d?Y:Math.round(Y),d?$:Math.round($),d?V:Math.round(Y+V)-Math.round(Y),d?B:Math.round($+B)-Math.round($)),O.clipExtent&&S.restore()}})}let N=Ps(s);return a.getTriangles().forEach(function(O,W,X){let Y=O.source,$=O.target,V=Y[0][0],B=Y[0][1],v=Y[1][0],I=Y[1][1],M=Y[2][0],j=Y[2][1],Q=w(($[0][0]-N[0])/o),Z=w(-($[0][1]-N[1])/o),q=w(($[1][0]-N[0])/o),K=w(-($[1][1]-N[1])/o),oe=w(($[2][0]-N[0])/o),_e=w(-($[2][1]-N[1])/o),F=V,ee=B;V=0,B=0,v-=F,I-=ee,M-=F,j-=ee;let ce=[[v,I,0,0,q-Q],[M,j,0,0,oe-Q],[0,0,v,I,K-Z],[0,0,M,j,_e-Z]],pe=PF(ce);if(!pe)return;if(_.save(),_.beginPath(),Rae()||!d){_.moveTo(q,K);let xe=4,Se=Q-q,ve=Z-K;for(let re=0;re<xe;re++)_.lineTo(q+w((re+1)*Se/xe),K+w(re*ve/(xe-1))),re!=xe-1&&_.lineTo(q+w((re+1)*Se/xe),K+w((re+1)*ve/(xe-1)));_.lineTo(oe,_e)}else _.moveTo(q,K),_.lineTo(Q,Z),_.lineTo(oe,_e);_.clip(),_.transform(pe[0],pe[2],pe[1],pe[3],Q,Z),_.translate(b[0]-F,b[3]-ee);let J;if(S)J=S.canvas,_.scale(A,-A);else{let xe=l[0],Se=xe.extent;J=xe.image,_.scale(nn(Se)/J.width,-Qn(Se)/J.height)}_.drawImage(J,0,0),_.restore()}),S&&(Uh(S),dg.push(S.canvas)),f&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,a.getTriangles().forEach(function(O,W,X){let Y=O.target,$=(Y[0][0]-N[0])/o,V=-(Y[0][1]-N[1])/o,B=(Y[1][0]-N[0])/o,v=-(Y[1][1]-N[1])/o,I=(Y[2][0]-N[0])/o,M=-(Y[2][1]-N[1])/o;_.beginPath(),_.moveTo(B,v),_.lineTo($,V),_.lineTo(I,M),_.closePath(),_.stroke()}),_.restore()),_.canvas}var Mae=10,x9=.25,cP=class{constructor(e,t,r,i,o,s,a){this.sourceProj_=e,this.targetProj_=t;let l={},c=a?Tw(A=>Ir(a,vm(A,this.targetProj_,this.sourceProj_))):mh(this.targetProj_,this.sourceProj_);this.transformInv_=function(A){let N=A[0]+"/"+A[1];return l[N]||(l[N]=c(A)),l[N]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&nn(i)>=nn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?nn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?nn(this.targetProj_.getExtent()):null;let f=Ps(r),d=A_(r),y=D_(r),p=T_(r),_=this.transformInv_(f),w=this.transformInv_(d),b=this.transformInv_(y),S=this.transformInv_(p),T=Mae+(s?Math.max(0,Math.ceil(Math.log2(Ff(r)/(s*s*256*256)))):0);if(this.addQuad_(f,d,y,p,_,w,b,S,T),this.wrapsXInSource_){let A=1/0;this.triangles_.forEach(function(N,O,W){A=Math.min(A,N.source[0][0],N.source[1][0],N.source[2][0])}),this.triangles_.forEach(N=>{if(Math.max(N.source[0][0],N.source[1][0],N.source[2][0])-A>this.sourceWorldWidth_/2){let O=[[N.source[0][0],N.source[0][1]],[N.source[1][0],N.source[1][1]],[N.source[2][0],N.source[2][1]]];O[0][0]-A>this.sourceWorldWidth_/2&&(O[0][0]-=this.sourceWorldWidth_),O[1][0]-A>this.sourceWorldWidth_/2&&(O[1][0]-=this.sourceWorldWidth_),O[2][0]-A>this.sourceWorldWidth_/2&&(O[2][0]-=this.sourceWorldWidth_);let W=Math.min(O[0][0],O[1][0],O[2][0]);Math.max(O[0][0],O[1][0],O[2][0])-W<this.sourceWorldWidth_/2&&(N.source=O)}})}l={}}addTriangle_(e,t,r,i,o,s){this.triangles_.push({source:[i,o,s],target:[e,t,r]})}addQuad_(e,t,r,i,o,s,a,l,c){let f=Bl([o,s,a,l]),d=this.sourceWorldWidth_?nn(f)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1,_=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let b=Bl([e,t,r,i]);_=nn(b)/this.targetWorldWidth_>x9||_}!p&&this.sourceProj_.isGlobal()&&d&&(_=d>x9||_)}if(!_&&this.maxSourceExtent_&&isFinite(f[0])&&isFinite(f[1])&&isFinite(f[2])&&isFinite(f[3])&&!Wn(f,this.maxSourceExtent_))return;let w=0;if(!_&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)_=!0;else if(w=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(c>0){if(!_){let b=[(e[0]+r[0])/2,(e[1]+r[1])/2],S=this.transformInv_(b),T;p?T=(Tu(o[0],y)+Tu(a[0],y))/2-Tu(S[0],y):T=(o[0]+a[0])/2-S[0];let A=(o[1]+a[1])/2-S[1];_=T*T+A*A>this.errorThresholdSquared_}if(_){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){let b=[(t[0]+r[0])/2,(t[1]+r[1])/2],S=this.transformInv_(b),T=[(i[0]+e[0])/2,(i[1]+e[1])/2],A=this.transformInv_(T);this.addQuad_(e,t,b,T,o,s,S,A,c-1),this.addQuad_(T,b,r,i,A,S,a,l,c-1)}else{let b=[(e[0]+t[0])/2,(e[1]+t[1])/2],S=this.transformInv_(b),T=[(r[0]+i[0])/2,(r[1]+i[1])/2],A=this.transformInv_(T);this.addQuad_(e,b,T,i,o,S,A,l,c-1),this.addQuad_(b,t,r,T,S,s,a,A,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(w&11)==0&&this.addTriangle_(e,r,i,o,a,l),(w&14)==0&&this.addTriangle_(e,r,t,o,a,s),w&&((w&13)==0&&this.addTriangle_(t,i,e,s,l,o),(w&7)==0&&this.addTriangle_(t,i,r,s,l,a))}calculateSourceExtent(){let e=Ci();return this.triangles_.forEach(function(t,r,i){let o=t.source;fm(e,o[0]),fm(e,o[1]),fm(e,o[2])}),e}getTriangles(){return this.triangles_}},Y0=cP;var hP=class extends Nc{constructor(e,t,r,i,o,s,a,l,c,f,d,y){super(o,Ze.IDLE,y),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=i,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;let p=i.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent(),w=this.sourceTileGrid_.getExtent(),b=_?Nr(p,_):p;if(Ff(b)===0){this.state=Ze.EMPTY;return}let S=e.getExtent();S&&(w?w=Nr(w,S):w=S);let T=i.getResolution(this.wrappedTileCoord_[0]),A=Zb(e,r,b,T);if(!isFinite(A)||A<=0){this.state=Ze.EMPTY;return}let N=f!==void 0?f:.5;if(this.triangulation_=new Y0(e,r,b,w,A*N,T),this.triangulation_.getTriangles().length===0){this.state=Ze.EMPTY;return}this.sourceZ_=t.getZForResolution(A);let O=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(O[1]=Hn(O[1],w[1],w[3]),O[3]=Hn(O[3],w[1],w[3])):O=Nr(O,w)),!Ff(O))this.state=Ze.EMPTY;else{let W=0,X=0;e.canWrapX()&&(W=nn(S),X=Math.floor((O[0]-S[0])/W)),pm(O.slice(),e,!0).forEach($=>{let V=t.getTileRangeForExtentAndZ($,this.sourceZ_);for(let B=V.minX;B<=V.maxX;B++)for(let v=V.minY;v<=V.maxY;v++){let I=c(this.sourceZ_,B,v,a);if(I){let M=X*W;this.sourceTiles_.push({tile:I,offset:M})}}++X}),this.sourceTiles_.length===0&&(this.state=Ze.EMPTY)}}getImage(){return this.canvas_}reproject_(){let e=[];if(this.sourceTiles_.forEach(t=>{let r=t.tile;if(r&&r.getState()==Ze.LOADED){let i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=t.offset,i[2]+=t.offset;let o=this.clipExtent_?.slice();o&&(o[0]+=t.offset,o[2]+=t.offset),e.push({extent:i,clipExtent:o,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ze.ERROR;else{let t=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(t),i=typeof r=="number"?r:r[0],o=typeof r=="number"?r:r[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Kb(i,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ze.LOADED}this.changed()}load(){if(this.state==Ze.IDLE){this.state=Ze.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let r=t.getState();if(r==Ze.IDLE||r==Ze.LOADING){e++;let i=an(t,gt.CHANGE,o=>{let s=t.getState();(s==Ze.LOADED||s==Ze.ERROR||s==Ze.EMPTY)&&(An(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},r,i){t.getState()==Ze.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(An),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Uh(this.canvas_.getContext("2d")),dg.push(this.canvas_),this.canvas_=null),super.release()}},X0=hP;var fP=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){let e=this.pop();e instanceof Ic&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){let r=this.entries_[e];return on(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){let t=this.entries_[e];return on(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){let e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.key_;return e}getValues(){let e=new Array(this.count_),t=0,r;for(r=this.newest_;r;r=r.older)e[t++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){let e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){on(!(e in this.entries_),"Tried to set a value for a key that is used already");let r={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}},D1=fP;function Zh(n,e,t,r){return r!==void 0?(r[0]=n,r[1]=e,r[2]=t,r):[n,e,t]}function E9(n,e,t){return n+"/"+e+"/"+t}function pg(n){return E9(n[0],n[1],n[2])}function Td(n,e,t,r,i){return`${_t(n)},${e},${E9(t,r,i)}`}function Jb(n){return Nae(n[0],n[1],n[2])}function Nae(n,e,t){return(e<<n)+t}function b9(n,e){let t=n[0],r=n[1],i=n[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;let o=e.getFullTileRange(t);return o?o.containsXY(r,i):!0}var dP=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(N0(),{get:(e,t)=>{if(typeof N0()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,r)=>(this.push_(t,r),!0)})}push_(...e){let t=this.instructions_,r=this.zIndex+this.offset_;t[r]||(t[r]=[]),t[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let r=0,i=t.length;r<i;++r){let o=t[r];if(typeof o=="function"){o(e);continue}let s=t[++r];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Z0=dP;var Pae=5,pP=class extends ub{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=Pae}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Ct()}getData(e){return null}prepareFrame(e){return Ct()}renderFrame(e,t){return Ct()}forEachFeatureAtCoordinate(e,t,r,i,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let t=e.target;(t.getState()===wt.LOADED||t.getState()===wt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=wt.LOADED&&t!=wt.ERROR&&e.addEventListener(gt.CHANGE,this.boundHandleImageChange_),t==wt.IDLE&&(e.load(),t=e.getState()),t==wt.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},Qb=pP;var mP=[],K0=null;function Lae(){K0=$n(1,1,void 0,{willReadFrequently:!0})}var gP=class extends Qb{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Hr(),this.pixelTransform=Hr(),this.inversePixelTransform=Hr(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,r){K0||Lae(),K0.clearRect(0,0,1,1);let i;try{K0.drawImage(e,t,r,1,1,0,0,1,1),i=K0.getImageData(0,0,1,1).data}catch{return K0=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,t,r){let i=this.getLayer().getClassName(),o,s;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Gs(Vs(e.style.backgroundColor),Vs(r)))){let a=e.firstElementChild;ju(a)&&(s=a.getContext("2d"))}if(s&&$U(s.canvas.style.transform,t)?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=Ai?Db():document.createElement("div"),o.className=i;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=$n();let l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,t,r){let i=Ps(r),o=A_(r),s=D_(r),a=T_(r);Ir(t.coordinateToPixelTransform,i),Ir(t.coordinateToPixelTransform,o),Ir(t.coordinateToPixelTransform,s),Ir(t.coordinateToPixelTransform,a);let l=this.inversePixelTransform;Ir(l,i),Ir(l,o),Ir(l,s),Ir(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,t){let r=e.extent,i=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(nn(r)/i*s),l=Math.round(Qn(r)/i*s);Ri(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-l/2),T0(this.inversePixelTransform,this.pixelTransform);let c=WU(this.pixelTransform);if(this.useContainer(t,c,this.getBackground(e)),!this.containerReused){let f=this.context.canvas;f.width!=a||f.height!=l?(f.width=a,f.height=l):this.context.clearRect(0,0,a,l),c!==f.style.transform&&(f.style.transform=c)}}dispatchRenderEvent_(e,t,r){let i=this.getLayer();if(i.hasListener(e)){let o=new Cd(e,this.inversePixelTransform,r,t);i.dispatchEvent(o)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(vi.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(vi.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Z0),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(vi.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(vi.POSTRENDER,this.context,e))}getRenderTransform(e,t,r,i,o,s,a){let l=o/2,c=s/2,f=i/t,d=-f,y=-e[0]+a,p=-e[1];return Ri(this.tempTransform,l,c,f,d,-r,y,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}},J0=gP;function yP(n,e,t){if(!(t in n))return n[t]=new Set([e]),!0;let r=n[t],i=r.has(e);return i||r.add(e),!i}function kae(n,e,t){let r=n[t];return r?r.delete(e):!1}function S9(n,e){let t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Nr(e,ko(t.extent,n.viewState.projection)));let r=t.layer.getRenderSource();if(!r.getWrapX()){let i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Nr(e,i))}return e}var _P=class extends J0{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Ci(),this.tempTileRange_=new W0(0,0,0,0),this.tempTileCoord_=Zh(0,0,0);let r=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new D1(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new D1(512)),this.sourceTileCache_}getOrCreateTile(e,t,r,i){let o=this.tileCache_,a=this.getLayer().getSource(),l=Td(a,a.getKey(),e,t,r),c;if(o.containsKey(l))c=o.get(l);else{let f=i.viewState.projection,d=a.getProjection();if(c=a.getTile(e,t,r,i.pixelRatio,f,!d||Gr(d,f)?void 0:this.getSourceTileCache()),!c)return null;o.set(l,c)}return c}getTile(e,t,r,i){let o=this.getOrCreateTile(e,t,r,i);return o||null}getData(e){let t=this.frameState;if(!t)return null;let r=this.getLayer(),i=Ir(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Ms(o,i))return null;let s=t.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(s.projection),c=a.getTilePixelRatio(t.pixelRatio);for(let f=l.getZForResolution(s.resolution);f>=l.getMinZoom();--f){let d=l.getTileCoordForCoordAndZ(i,f),y=this.getTile(f,d[1],d[2],t);if(!y||y.getState()!==Ze.LOADED)continue;let p=l.getOrigin(f),_=Yn(l.getTileSize(f)),w=l.getResolution(f),b;if(y instanceof Id||y instanceof X0)b=y.getImage();else if(y instanceof Xh){if(b=Yh(y.getData()),!b)continue}else continue;let S=Math.floor(c*((i[0]-p[0])/w-d[1]*_[0])),T=Math.floor(c*((p[1]-i[1])/w-d[2]*_[1])),A=Math.round(c*a.getGutterForProjection(s.projection));return this.getImageData(b,S+A,T+A)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;let t=this.getLayer().getSource();if(!t)return!1;let r=t.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===t.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,t,r,i,o){let s=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),f=_t(l);f in e.wantedTiles||(e.wantedTiles[f]={});let d=e.wantedTiles[f],y=a.getMapInternal(),p=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),_=s.rotation,w=_?xw(s.center,s.resolution,_,e.size):void 0;for(let b=r;b>=p;--b){let S=c.getTileRangeForExtentAndZ(t,b,this.tempTileRange_),T=c.getResolution(b);for(let A=S.minX;A<=S.maxX;++A)for(let N=S.minY;N<=S.maxY;++N){if(_&&!c.tileCoordIntersectsViewport([b,A,N],w))continue;let O=this.getTile(b,A,N,e);if(!O||!yP(i,O,b))continue;let X=O.getKey();if(d[X]=!0,O.getState()===Ze.IDLE&&!e.tileQueue.isKeyQueued(X)){let Y=Zh(b,A,N,this.tempTileCoord_);e.tileQueue.enqueue([O,f,c.getTileCoordCenter(Y),T])}}}}findStaleTile_(e,t){let r=this.tileCache_,i=e[0],o=e[1],s=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){let c=Td(this.getLayer().getSource(),a[l],i,o,s);if(r.containsKey(c)){let f=r.peek(c);if(f.getState()===Ze.LOADED)return f.endTransition(_t(this)),yP(t,f,i),!0}}return!1}findAltTiles_(e,t,r,i){let o=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!o)return!1;let s=!0,a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let f=o.minX;f<=o.maxX;++f)for(let d=o.minY;d<=o.maxY;++d){let y=Td(l,c,r,f,d),p=!1;if(a.containsKey(y)){let _=a.peek(y);_.getState()===Ze.LOADED&&(yP(i,_,r),p=!0)}p||(s=!1)}return s}renderFrame(e,t){this.renderComplete=!0;let r=e.layerStatesArray[e.layerIndex],i=e.viewState,o=i.projection,s=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),f=c.getSource(),d=f.getTileGridForProjection(o),y=d.getZForResolution(s,f.zDirection),p=d.getResolution(y),_=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let w=e.extent,b=f.getTilePixelRatio(l);this.prepareContainer(e,t);let S=this.context.canvas.width,T=this.context.canvas.height,A=r.extent&&ko(r.extent,o);A&&(w=Nr(w,ko(r.extent,o)));let N=p*S/2/b,O=p*T/2/b,W=[a[0]-N,a[1]-O,a[0]+N,a[1]+O],X={};this.renderedTiles.length=0;let Y=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){let q=d.getZForResolution(i.nextResolution,f.zDirection),K=S9(e,e.nextExtent);this.enqueueTiles(e,K,q,X,Y)}let $=S9(e,w);if(this.enqueueTiles(e,$,y,X,0),Y>0&&setTimeout(()=>{this.enqueueTiles(e,$,y-1,X,Y-1)},0),!(y in X))return this.container;let V=_t(this),B=e.time;for(let q of X[y]){let K=q.getState();if(K===Ze.EMPTY)continue;let oe=q.tileCoord;if(K===Ze.LOADED&&q.getAlpha(V,B)===1){q.endTransition(V);continue}if(K!==Ze.ERROR&&(this.renderComplete=!1),this.findStaleTile_(oe,X)){kae(X,q,y),e.animate=!0;continue}if(this.findAltTiles_(d,oe,y+1,X))continue;let ee=d.getMinZoom();for(let ce=y-1;ce>=ee&&!this.findAltTiles_(d,oe,ce,X);--ce);}let v=p/s*l/b,I=this.getRenderContext(e);Ri(this.tempTransform,S/2,T/2,v,v,0,-S/2,-T/2),r.extent&&this.clipUnrotated(I,e,A),f.getInterpolate()||(I.imageSmoothingEnabled=!1),this.preRender(I,e);let M=Object.keys(X).map(Number);M.sort(Us);let j,Q=[],Z=[];for(let q=M.length-1;q>=0;--q){let K=M[q],oe=f.getTilePixelSize(K,l,o),F=d.getResolution(K)/p,ee=oe[0]*F*v,ce=oe[1]*F*v,pe=d.getTileCoordForCoordAndZ(Ps(W),K),J=d.getTileCoordExtent(pe),xe=Ir(this.tempTransform,[b*(J[0]-W[0])/p,b*(W[3]-J[3])/p]),Se=b*f.getGutterForProjection(o);for(let ve of X[K]){if(ve.getState()!==Ze.LOADED)continue;let re=ve.tileCoord,Ve=pe[1]-re[1],G=Math.round(xe[0]-(Ve-1)*ee),be=pe[2]-re[2],Ie=Math.round(xe[1]-(be-1)*ce),U=Math.round(xe[0]-Ve*ee),ae=Math.round(xe[1]-be*ce),he=G-U,Fe=Ie-ae,Ce=M.length===1,we=!1;j=[U,ae,U+he,ae,U+he,ae+Fe,U,ae+Fe];for(let Ue=0,Le=Q.length;Ue<Le;++Ue)if(!Ce&&K<Z[Ue]){let Be=Q[Ue];Wn([U,ae,U+he,ae+Fe],[Be[0],Be[3],Be[4],Be[7]])&&(we||(I.save(),we=!0),I.beginPath(),I.moveTo(j[0],j[1]),I.lineTo(j[2],j[3]),I.lineTo(j[4],j[5]),I.lineTo(j[6],j[7]),I.moveTo(Be[6],Be[7]),I.lineTo(Be[4],Be[5]),I.lineTo(Be[2],Be[3]),I.lineTo(Be[0],Be[1]),I.clip())}Q.push(j),Z.push(K),this.drawTile(ve,e,U,ae,he,Fe,Se,Ce),we&&I.restore(),this.renderedTiles.unshift(ve),this.updateUsedTiles(e.usedTiles,f,ve)}}if(this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!ll(this.renderedExtent_,W),this.renderedExtent_=W,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&I.restore(),I.imageSmoothingEnabled=!0,this.renderComplete){let q=(K,oe)=>{let _e=_t(f),F=oe.wantedTiles[_e],ee=F?Object.keys(F).length:0;this.updateCacheSize(ee),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(q)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,r,i,o,s,a,l){let c;if(e instanceof Xh){if(c=Yh(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;let f=this.getRenderContext(t),d=_t(this),y=t.layerStatesArray[t.layerIndex],p=y.opacity*(l?e.getAlpha(d,t.time):1),_=p!==f.globalAlpha;_&&(f.save(),f.globalAlpha=p),f.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,o,s),_&&f.restore(),p!==y.opacity?t.animate=!0:l&&e.endTransition(d)}getImage(){let e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,r){let i=_t(t);i in e||(e[i]={}),e[i][r.getKey()]=!0}},eS=_P;var Pc={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var vP=class extends zh{constructor(e){e=e||{};let t=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Pc.PRELOAD)}setPreload(e){this.set(Pc.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Pc.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Pc.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},tS=vP;var xP=class extends tS{constructor(e){super(e)}createRenderer(){return new eS(this,{cacheSize:this.getCacheSize()})}},Q0=xP;var wP=class{drawCustom(e,t,r,i,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,r){}drawFeature(e,t,r){}drawGeometryCollection(e,t,r){}drawLineString(e,t,r){}drawMultiLineString(e,t,r){}drawMultiPoint(e,t,r){}drawMultiPolygon(e,t,r){}drawPoint(e,t,r){}drawPolygon(e,t,r){}drawText(e,t,r){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}},nS=wP;var A1={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},R1=[A1.FILL],Lc=[A1.STROKE],Kh=[A1.BEGIN_PATH],EP=[A1.CLOSE_PATH],Wt=A1;var bP=class extends nS{constructor(e,t,r,i){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let t=this.pixelRatio;return t==1?e:e.map(function(r){return r*t})}appendFlatPointCoordinates(e,t){let r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,o=this.coordinates,s=o.length;for(let a=0,l=e.length;a<l;a+=t)i[0]=e[a],i[1]=e[a+1],Ms(r,i)&&(o[s++]=i[0],o[s++]=i[1]);return s}appendFlatLineCoordinates(e,t,r,i,o,s){let a=this.coordinates,l=a.length,c=this.getBufferedMaxExtent();s&&(t+=i);let f=e[t],d=e[t+1],y=this.tmpCoordinate_,p=!0,_,w,b;for(_=t+i;_<r;_+=i)y[0]=e[_],y[1]=e[_+1],b=kF(c,y),b!==w?(p&&(a[l++]=f,a[l++]=d,p=!1),a[l++]=y[0],a[l++]=y[1]):b===LF.INTERSECTING?(a[l++]=y[0],a[l++]=y[1],p=!1):p=!0,f=y[0],d=y[1],w=b;return(o&&p||_===t+i)&&(a[l++]=f,a[l++]=d),l}drawCustomCoordinates_(e,t,r,i,o){for(let s=0,a=r.length;s<a;++s){let l=r[s],c=this.appendFlatLineCoordinates(e,t,l,i,!1,!1);o.push(c),t=l}return t}drawCustom(e,t,r,i,o){this.beginGeometry(e,t,o);let s=e.getType(),a=e.getStride(),l=this.coordinates.length,c,f,d,y,p;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),y=[];let _=e.getEndss();p=0;for(let w=0,b=_.length;w<b;++w){let S=[];p=this.drawCustomCoordinates_(c,p,_[w],a,S),y.push(S)}this.instructions.push([Wt.CUSTOM,l,y,e,r,Jv,o]),this.hitDetectionInstructions.push([Wt.CUSTOM,l,y,e,i||r,Jv,o]);break;case"Polygon":case"MultiLineString":d=[],c=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),p=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([Wt.CUSTOM,l,d,e,r,pd,o]),this.hitDetectionInstructions.push([Wt.CUSTOM,l,d,e,i||r,pd,o]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),f=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([Wt.CUSTOM,l,f,e,r,ru,o]),this.hitDetectionInstructions.push([Wt.CUSTOM,l,f,e,i||r,ru,o]);break;case"MultiPoint":c=e.getFlatCoordinates(),f=this.appendFlatPointCoordinates(c,a),f>l&&(this.instructions.push([Wt.CUSTOM,l,f,e,r,ru,o]),this.hitDetectionInstructions.push([Wt.CUSTOM,l,f,e,i||r,ru,o]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),f=this.coordinates.length,this.instructions.push([Wt.CUSTOM,l,f,e,r,void 0,o]),this.hitDetectionInstructions.push([Wt.CUSTOM,l,f,e,i||r,void 0,o]);break;default:}this.endGeometry(t)}beginGeometry(e,t,r){this.beginGeometryInstruction1_=[Wt.BEGIN_GEOMETRY,t,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Wt.BEGIN_GEOMETRY,t,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let t,r=e.length,i,o,s=-1;for(t=0;t<r;++t)i=e[t],o=i[0],o==Wt.END_GEOMETRY?s=t:o==Wt.BEGIN_GEOMETRY&&(i[2]=t,MU(this.hitDetectionInstructions,s,t),s=-1)}fillStyleToState(e,t={}){if(e){let r=e.getColor();t.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,t.fillStyle=Oa(r||Uo)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){let r=e.getColor();t.strokeStyle=Oa(r||Hh);let i=e.getLineCap();t.lineCap=i!==void 0?i:Rc;let o=e.getLineDash();t.lineDash=o?o.slice():Fa;let s=e.getLineDashOffset();t.lineDashOffset=s||Ba;let a=e.getLineJoin();t.lineJoin=a!==void 0?a:Mc;let l=e.getWidth();t.lineWidth=l!==void 0?l:Wh;let c=e.getMiterLimit();t.miterLimit=c!==void 0?c:Vh,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){let r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(t,r)}createFill(e){let t=e.fillStyle,r=[Wt.SET_FILL_STYLE,t];return typeof t!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Wt.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){let r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(t.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,t){let r=e.strokeStyle,i=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||o!=e.currentLineDash&&!Gs(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(t.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let t=[Wt.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=yw(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;Zo(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},kc=bP;var SP=class extends kc{constructor(e,t,r,i){super(e,t,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,r){if(!this.image_||this.maxExtent&&!Ms(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,r);let i=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(i,o);this.instructions.push([Wt.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wt.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,r){if(!this.image_)return;this.beginGeometry(e,t,r);let i=e.getFlatCoordinates(),o=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||Ms(this.maxExtent,i.slice(l,l+2)))&&o.push(i[l],i[l+1]);let s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([Wt.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Wt.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){let r=e.getAnchor(),i=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},C9=SP;var CP=class extends kc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinates_(e,t,r,i){let o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,t,r,i,!1,!1),a=[Wt.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,t,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Wt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Fa,Ba],Kh);let a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Lc),this.endGeometry(t)}drawMultiLineString(e,t,r){let i=this.state,o=i.strokeStyle,s=i.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,t,r),this.hitDetectionInstructions.push([Wt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Fa,Ba],Kh);let a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride(),f=0;for(let d=0,y=a.length;d<y;++d)f=this.drawFlatCoordinates_(l,f,a[d],c);this.hitDetectionInstructions.push(Lc),this.endGeometry(t)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Lc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Lc),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Kh)}},I9=CP;var IP=class extends kc{constructor(e,t,r,i){super(e,t,r,i)}drawFlatCoordinatess_(e,t,r,i){let o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=r.length;this.instructions.push(Kh),this.hitDetectionInstructions.push(Kh);for(let c=0;c<l;++c){let f=r[c],d=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,f,i,!0,!a),p=[Wt.MOVE_TO_LINE_TO,d,y];this.instructions.push(p),this.hitDetectionInstructions.push(p),a&&(this.instructions.push(EP),this.hitDetectionInstructions.push(EP)),t=f}return s&&(this.instructions.push(R1),this.hitDetectionInstructions.push(R1)),a&&(this.instructions.push(Lc),this.hitDetectionInstructions.push(Lc)),t}drawCircle(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_FILL_STYLE,Uo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Fa,Ba]);let a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);let f=[Wt.CIRCLE,c];this.instructions.push(Kh,f),this.hitDetectionInstructions.push(Kh,f),i.fillStyle!==void 0&&(this.instructions.push(R1),this.hitDetectionInstructions.push(R1)),i.strokeStyle!==void 0&&(this.instructions.push(Lc),this.hitDetectionInstructions.push(Lc)),this.endGeometry(t)}drawPolygon(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_FILL_STYLE,Uo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Fa,Ba]);let a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(t)}drawMultiPolygon(e,t,r){let i=this.state,o=i.fillStyle,s=i.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_FILL_STYLE,Uo]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Wt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Fa,Ba]);let a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),f=0;for(let d=0,y=a.length;d<y;++d)f=this.drawFlatCoordinatess_(l,f,a[d],c);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let t=this.coordinates;for(let r=0,i=t.length;r<i;++r)t[r]=gd(t[r],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}},TP=IP;function T9(n,e,t,r,i){let o=[],s=t,a=0,l=e.slice(t,2);for(;a<n&&s+i<r;){let[c,f]=l.slice(-2),d=e[s+i],y=e[s+i+1],p=Math.sqrt((d-c)*(d-c)+(y-f)*(y-f));if(a+=p,a>=n){let _=(n-a+p)/p,w=us(c,d,_),b=us(f,y,_);l.push(w,b),o.push(l),l=[w,b],a==n&&(s+=i),a=0}else if(a<n)l.push(e[s+i],e[s+i+1]),s+=i;else{let _=p-a,w=us(c,d,_/p),b=us(f,y,_/p);l.push(w,b),o.push(l),l=[w,b],a=0,s+=i}}return a>0&&o.push(l),o}function D9(n,e,t,r,i){let o=t,s=t,a=0,l=0,c=t,f,d,y,p,_,w,b,S,T,A;for(d=t;d<r;d+=i){let N=e[d],O=e[d+1];_!==void 0&&(T=N-_,A=O-w,p=Math.sqrt(T*T+A*A),b!==void 0&&(l+=y,f=Math.acos((b*T+S*A)/(y*p)),f>n&&(l>a&&(a=l,o=c,s=d),l=0,c=d-i)),y=p,b=T,S=A),_=N,w=O}return l+=p,l>a?[c,d]:[o,s]}var M1={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},DP=class extends kc{constructor(e,t,r,i){super(e,t,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Uo]={fillStyle:Uo},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,r){let i=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!i&&!o)return;let a=this.coordinates,l=a.length,c=e.getType(),f=null,d=e.getStride();if(s.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Wn(this.maxExtent,e.getExtent()))return;let y;if(f=e.getFlatCoordinates(),c=="LineString")y=[f.length];else if(c=="MultiLineString")y=e.getEnds();else if(c=="Polygon")y=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){let b=e.getEndss();y=[];for(let S=0,T=b.length;S<T;++S)y.push(b[S][0])}this.beginGeometry(e,t,r);let p=s.repeat,_=p?void 0:s.textAlign,w=0;for(let b=0,S=y.length;b<S;++b){let T;p?T=T9(p*this.resolution,f,w,y[b],d):T=[f.slice(w,y[b])];for(let A=0,N=T.length;A<N;++A){let O=T[A],W=0,X=O.length;if(_==null){let $=D9(s.maxAngle,O,0,O.length,2);W=$[0],X=$[1]}for(let $=W;$<X;$+=d)a.push(O[$],O[$+1]);let Y=a.length;w=y[b],this.drawChars_(l,Y),l=Y}}this.endGeometry(t)}else{let y=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":f=e.getFlatCoordinates();break;case"LineString":f=e.getFlatMidpoint();break;case"Circle":f=e.getCenter();break;case"MultiLineString":f=e.getFlatMidpoints(),d=2;break;case"Polygon":f=e.getFlatInteriorPoint(),s.overflow||y.push(f[2]/this.resolution),d=3;break;case"MultiPolygon":let N=e.getFlatInteriorPoints();f=[];for(let O=0,W=N.length;O<W;O+=3)s.overflow||y.push(N[O+2]/this.resolution),f.push(N[O],N[O+1]);if(f.length===0)return;d=2;break;default:}let p=this.appendFlatPointCoordinates(f,d);if(p===l)return;if(y&&(p-l)/2!==f.length/d){let N=l/2;y=y.filter((O,W)=>{let X=a[(N+W)*2]===f[W*d]&&a[(N+W)*2+1]===f[W*d+1];return X||--N,X})}this.saveTextStates_();let _=s.backgroundFill?this.createFill(this.fillStyleToState(s.backgroundFill)):null,w=s.backgroundStroke?this.createStroke(this.strokeStyleToState(s.backgroundStroke)):null;this.beginGeometry(e,t,r);let b=s.padding;if(b!=qh&&(s.scale[0]<0||s.scale[1]<0)){let N=s.padding[0],O=s.padding[1],W=s.padding[2],X=s.padding[3];s.scale[0]<0&&(O=-O,X=-X),s.scale[1]<0&&(N=-N,W=-W),b=[N,O,W,X]}let S=this.pixelRatio;this.instructions.push([Wt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==qh?qh:b.map(function(N){return N*S}),_,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);let T=1/S,A=_?_.slice(0):null;A&&(A[1]=Uo),this.hitDetectionInstructions.push([Wt.DRAW_IMAGE,l,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[T,T],NaN,this.declutterMode_,this.declutterImageWithText_,b,A,w,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Uo:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(t)}}saveTextStates_(){let e=this.textStrokeState_,t=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:t.font,textAlign:t.textAlign||wd,justify:t.justify,textBaseline:t.textBaseline||hg,scale:t.scale});let s=this.fillKey_;r&&(s in this.fillStates||(this.fillStates[s]={fillStyle:r.fillStyle}))}drawChars_(e,t){let r=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,c=M1[i.textBaseline],f=this.textOffsetY_*l,d=this.text_,y=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([Wt.DRAW_CHARS,e,t,c,i.overflow,a,i.maxAngle,l,f,o,y*l,d,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Wt.DRAW_CHARS,e,t,c,i.overflow,a&&Uo,i.maxAngle,l,f,o,y*l,d,s,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let r,i,o;if(!e)this.text_="";else{let s=e.getFill();s?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=Oa(s.getColor()||Uo)):(i=null,this.textFillState_=i);let a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);let w=a.getLineDash(),b=a.getLineDashOffset(),S=a.getWidth(),T=a.getMiterLimit();o.lineCap=a.getLineCap()||Rc,o.lineDash=w?w.slice():Fa,o.lineDashOffset=b===void 0?Ba:b,o.lineJoin=a.getLineJoin()||Mc,o.lineWidth=S===void 0?Wh:S,o.miterLimit=T===void 0?Vh:T,o.strokeStyle=Oa(a.getColor()||Hh)}r=this.textState_;let l=e.getFont()||zb;XG(l);let c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||hg,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||qh,r.scale=c===void 0?[1,1]:c;let f=e.getOffsetX(),d=e.getOffsetY(),y=e.getRotateWithView(),p=e.getKeepUpright(),_=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=f===void 0?0:f,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=p===void 0?!0:p,this.textRotation_=_===void 0?0:_,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:_t(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+_t(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}},A9=DP;var Oae={Circle:TP,Default:kc,Image:C9,LineString:I9,Polygon:TP,Text:A9},AP=class{constructor(e,t,r,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){let e={};for(let t in this.buildersByZIndex_){e[t]=e[t]||{};let r=this.buildersByZIndex_[t];for(let i in r){let o=r[i].finish();e[t][i]=o}}return e}getBuilder(e,t){let r=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let o=i[t];if(o===void 0){let s=Oae[t];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o}},rS=AP;function ey(n,e,t,r){let i=n[e],o=n[e+1],s=0;for(let a=e+r;a<t;a+=r){let l=n[a],c=n[a+1];s+=Math.sqrt((l-i)*(l-i)+(c-o)*(c-o)),i=l,o=c}return s}function R9(n,e,t,r,i,o,s,a,l,c,f,d,y=!0){let p=n[e],_=n[e+1],w=0,b=0,S=0,T=0;function A(){w=p,b=_,e+=r,p=n[e],_=n[e+1],T+=S,S=Math.sqrt((p-w)*(p-w)+(_-b)*(_-b))}do A();while(e<t-r&&T+S<o);let N=S===0?0:(o-T)/S,O=us(w,p,N),W=us(b,_,N),X=e-r,Y=T,$=o+a*l(c,i,f);for(;e<t-r&&T+S<$;)A();N=S===0?0:($-T)/S;let V=us(w,p,N),B=us(b,_,N),v=!1;if(y)if(d){let Z=[O,W,V,B];D0(Z,0,4,2,d,Z,Z),v=Z[0]>Z[2]}else v=O>V;let I=Math.PI,M=[],j=X+r===e;e=X,S=0,T=Y,p=n[e],_=n[e+1];let Q;if(j){A(),Q=Math.atan2(_-b,p-w),v&&(Q+=Q>0?-I:I);let Z=(V+O)/2,q=(B+W)/2;return M[0]=[Z,q,($-o)/2,Q,i],M}i=i.replace(/\n/g," ");for(let Z=0,q=i.length;Z<q;){A();let K=Math.atan2(_-b,p-w);if(v&&(K+=K>0?-I:I),Q!==void 0){let pe=K-Q;if(pe+=pe>I?-2*I:pe<-I?2*I:0,Math.abs(pe)>s)return null}Q=K;let oe=Z,_e=0;for(;Z<q;++Z){let pe=v?q-Z-1:Z,J=a*l(c,i[pe],f);if(e+r<t&&T+S<o+_e+J/2)break;_e+=J}if(Z===oe)continue;let F=v?i.substring(q-oe,q-Z):i.substring(oe,Z);N=S===0?0:(o+_e/2-T)/S;let ee=us(w,p,N),ce=us(b,_,N);M.push([ee,ce,_e/2,K,F]),o+=_e}return M}var ty=Ci(),Dd=[],Jh=[],Qh=[],Ad=[];function M9(n){return n[3].declutterBox}var N9=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function RP(n,e){return e==="start"?e=N9.test(n)?"right":"left":e==="end"&&(e=N9.test(n)?"left":"right"),M1[e]}function Fae(n,e,t){return t>0&&n.push(`
`,""),n.push(e,""),n}function Bae(n,e,t){return t%2===0&&(n+=e),n}var MP=class{constructor(e,t,r,i,o){this.overlaps=r,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Hr(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Z0:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,r,i){let o=e+t+r+i;if(this.labels_[o])return this.labels_[o];let s=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[t],c=this.pixelRatio,f=[l.scale[0]*c,l.scale[1]*c],d=l.justify?M1[l.justify]:RP(Array.isArray(e)?e[0]:e,l.textAlign||wd),y=i&&s.lineWidth?s.lineWidth:0,p=Array.isArray(e)?e:String(e).split(`
`).reduce(Fae,[]),{width:_,height:w,widths:b,heights:S,lineWidths:T}=JG(l,p),A=_+y,N=[],O=(A+2)*f[0],W=(w+y)*f[1],X={width:O<0?Math.floor(O):Math.ceil(O),height:W<0?Math.floor(W):Math.ceil(W),contextInstructions:N};(f[0]!=1||f[1]!=1)&&N.push("scale",f),i&&(N.push("strokeStyle",s.strokeStyle),N.push("lineWidth",y),N.push("lineCap",s.lineCap),N.push("lineJoin",s.lineJoin),N.push("miterLimit",s.miterLimit),N.push("setLineDash",[s.lineDash]),N.push("lineDashOffset",s.lineDashOffset)),r&&N.push("fillStyle",a.fillStyle),N.push("textBaseline","middle"),N.push("textAlign","center");let Y=.5-d,$=d*A+Y*y,V=[],B=[],v=0,I=0,M=0,j=0,Q;for(let Z=0,q=p.length;Z<q;Z+=2){let K=p[Z];if(K===`
`){I+=v,v=0,$=d*A+Y*y,++j;continue}let oe=p[Z+1]||l.font;oe!==Q&&(i&&V.push("font",oe),r&&B.push("font",oe),Q=oe),v=Math.max(v,S[M]);let _e=[K,$+Y*b[M]+d*(b[M]-T[j]),.5*(y+v)+I];$+=b[M],i&&V.push("strokeText",_e),r&&B.push("fillText",_e),++M}return Array.prototype.push.apply(N,V),Array.prototype.push.apply(N,B),this.labels_[o]=X,X}replayTextBackground_(e,t,r,i,o,s,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),s&&(this.alignAndScaleFill_=s[2],e.fillStyle=s[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,r,i,o,s,a,l,c,f,d,y,p,_,w,b){a*=y[0],l*=y[1];let S=r-a,T=i-l,A=o+c>e?e-c:o,N=s+f>t?t-f:s,O=_[3]+A*y[0]+_[1],W=_[0]+N*y[1]+_[2],X=S-_[3],Y=T-_[0];(w||d!==0)&&(Dd[0]=X,Ad[0]=X,Dd[1]=Y,Jh[1]=Y,Jh[0]=X+O,Qh[0]=Jh[0],Qh[1]=Y+W,Ad[1]=Qh[1]);let $;return d!==0?($=Ri(Hr(),r,i,1,1,d,-r,-i),Ir($,Dd),Ir($,Jh),Ir($,Qh),Ir($,Ad),Du(Math.min(Dd[0],Jh[0],Qh[0],Ad[0]),Math.min(Dd[1],Jh[1],Qh[1],Ad[1]),Math.max(Dd[0],Jh[0],Qh[0],Ad[0]),Math.max(Dd[1],Jh[1],Qh[1],Ad[1]),ty)):Du(Math.min(X,X+O),Math.min(Y,Y+W),Math.max(X,X+O),Math.max(Y,Y+W),ty),p&&(S=Math.round(S),T=Math.round(T)),{drawImageX:S,drawImageY:T,drawImageW:A,drawImageH:N,originX:c,originY:f,declutterBox:{minX:ty[0],minY:ty[1],maxX:ty[2],maxY:ty[3],value:b},canvasTransform:$,scale:y}}replayImageOrLabel_(e,t,r,i,o,s,a){let l=!!(s||a),c=i.declutterBox,f=a?a[2]*i.scale[0]/2:0;return c.minX-f<=t[0]&&c.maxX+f>=0&&c.minY-f<=t[1]&&c.maxY+f>=0&&(l&&this.replayTextBackground_(e,Dd,Jh,Qh,Ad,s,a),QG(e,i.canvasTransform,o,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){let t=this.alignAndScaleFill_;if(t){let r=Ir(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],t[1]&&(e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6]))}drawLabelWithPointPlacement_(e,t,r,i){let o=this.textStates[t],s=this.createLabel(e,t,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=RP(Array.isArray(e)?e[0]:e,o.textAlign||wd),f=M1[o.textBaseline||hg],d=a&&a.lineWidth?a.lineWidth:0,y=s.width/l-2*o.scale[0],p=c*y+2*(.5-c)*d,_=f*s.height/l+2*(.5-f)*d;return{label:s,anchorX:p,anchorY:_}}execute_(e,t,r,i,o,s,a,l){let c=this.zIndexContext_,f;this.pixelCoordinates_&&Gs(r,this.renderedTransform_)?f=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),f=ka(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),HU(this.renderedTransform_,r));let d=0,y=i.length,p=0,_,w,b,S,T,A,N,O,W,X,Y,$,V,B=0,v=0,I=this.coordinateCache_,M=this.viewRotation_,j=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Q={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},Z=this.instructions!=i||this.overlaps?0:200,q,K,oe,_e;for(;d<y;){let F=i[d];switch(F[0]){case Wt.BEGIN_GEOMETRY:q=F[1],_e=F[3],q.getGeometry()?a!==void 0&&!Wn(a,_e.getExtent())?d=F[2]+1:++d:d=F[2],c&&(c.zIndex=F[4]);break;case Wt.BEGIN_PATH:B>Z&&(this.fill_(e),B=0),v>Z&&(e.stroke(),v=0),!B&&!v&&(e.beginPath(),T=NaN,A=NaN),++d;break;case Wt.CIRCLE:p=F[1];let ce=f[p],pe=f[p+1],J=f[p+2],xe=f[p+3],Se=J-ce,ve=xe-pe,re=Math.sqrt(Se*Se+ve*ve);e.moveTo(ce+re,pe),e.arc(ce,pe,re,0,2*Math.PI,!0),++d;break;case Wt.CLOSE_PATH:e.closePath(),++d;break;case Wt.CUSTOM:p=F[1],_=F[2];let Ve=F[3],G=F[4],be=F[5];Q.geometry=Ve,Q.feature=q,d in I||(I[d]=[]);let Ie=I[d];be?be(f,p,_,2,Ie):(Ie[0]=f[p],Ie[1]=f[p+1],Ie.length=2),c&&(c.zIndex=F[6]),G(Ie,Q),++d;break;case Wt.DRAW_IMAGE:p=F[1],_=F[2],W=F[3],w=F[4],b=F[5];let U=F[6],ae=F[7],he=F[8],Fe=F[9],Ce=F[10],we=F[11],Ue=F[12],Le=F[13];S=F[14]||"declutter";let Be=F[15];if(!W&&F.length>=20){X=F[19],Y=F[20],$=F[21],V=F[22];let at=this.drawLabelWithPointPlacement_(X,Y,$,V);W=at.label,F[3]=W;let Fr=F[23];w=(at.anchorX-Fr)*this.pixelRatio,F[4]=w;let Jr=F[24];b=(at.anchorY-Jr)*this.pixelRatio,F[5]=b,U=W.height,F[6]=U,Le=W.width,F[13]=Le}let ft;F.length>25&&(ft=F[25]);let It,qe,Vt;F.length>17?(It=F[16],qe=F[17],Vt=F[18]):(It=qh,qe=null,Vt=null),Ce&&j?we+=M:!Ce&&!j&&(we-=M);let vt=0;for(;p<_;p+=2){if(ft&&ft[vt++]<Le/this.pixelRatio)continue;let at=this.calculateImageOrLabelDimensions_(W.width,W.height,f[p],f[p+1],Le,U,w,b,he,Fe,we,Ue,o,It,!!qe||!!Vt,q),Fr=[e,t,W,at,ae,qe,Vt];if(l){let Jr,Qr,Rt;if(Be){let bn=_-p;if(!Be[bn]){Be[bn]={args:Fr,declutterMode:S};continue}let Er=Be[bn];Jr=Er.args,Qr=Er.declutterMode,delete Be[bn],Rt=M9(Jr)}let wi,Li;if(Jr&&(Qr!=="declutter"||!l.collides(Rt))&&(wi=!0),(S!=="declutter"||!l.collides(at.declutterBox))&&(Li=!0),Qr==="declutter"&&S==="declutter"){let bn=wi&&Li;wi=bn,Li=bn}wi&&(Qr!=="none"&&l.insert(Rt),this.replayImageOrLabel_.apply(this,Jr)),Li&&(S!=="none"&&l.insert(at.declutterBox),this.replayImageOrLabel_.apply(this,Fr))}else this.replayImageOrLabel_.apply(this,Fr)}++d;break;case Wt.DRAW_CHARS:let Ke=F[1],Zt=F[2],ht=F[3],Rr=F[4];V=F[5];let pt=F[6],Yt=F[7],ln=F[8];$=F[9];let hr=F[10];X=F[11],Array.isArray(X)&&(X=X.reduce(Bae,"")),Y=F[12];let Tt=[F[13],F[13]];S=F[14]||"declutter";let ir=F[15],Dt=this.textStates[Y],Gt=Dt.font,Fn=[Dt.scale[0]*Yt,Dt.scale[1]*Yt],mn;Gt in this.widths_?mn=this.widths_[Gt]:(mn={},this.widths_[Gt]=mn);let qt=ey(f,Ke,Zt,2),Rn=Math.abs(Fn[0])*UN(Gt,X,mn);if(Rr||Rn<=qt){let at=this.textStates[Y].textAlign,Fr=(qt-Rn)*RP(X,at),Jr=R9(f,Ke,Zt,2,X,Fr,pt,Math.abs(Fn[0]),UN,Gt,mn,j?0:this.viewRotation_,ir);e:if(Jr){let Qr=[],Rt,wi,Li,bn,Er;if($)for(Rt=0,wi=Jr.length;Rt<wi;++Rt){Er=Jr[Rt],Li=Er[4],bn=this.createLabel(Li,Y,"",$),w=Er[2]+(Fn[0]<0?-hr:hr),b=ht*bn.height+(.5-ht)*2*hr*Fn[1]/Fn[0]-ln;let Zn=this.calculateImageOrLabelDimensions_(bn.width,bn.height,Er[0],Er[1],bn.width,bn.height,w,b,0,0,Er[3],Tt,!1,qh,!1,q);if(l&&S==="declutter"&&l.collides(Zn.declutterBox))break e;Qr.push([e,t,bn,Zn,1,null,null])}if(V)for(Rt=0,wi=Jr.length;Rt<wi;++Rt){Er=Jr[Rt],Li=Er[4],bn=this.createLabel(Li,Y,V,""),w=Er[2],b=ht*bn.height-ln;let Zn=this.calculateImageOrLabelDimensions_(bn.width,bn.height,Er[0],Er[1],bn.width,bn.height,w,b,0,0,Er[3],Tt,!1,qh,!1,q);if(l&&S==="declutter"&&l.collides(Zn.declutterBox))break e;Qr.push([e,t,bn,Zn,1,null,null])}l&&S!=="none"&&l.load(Qr.map(M9));for(let Zn=0,ki=Qr.length;Zn<ki;++Zn)this.replayImageOrLabel_.apply(this,Qr[Zn])}}++d;break;case Wt.END_GEOMETRY:if(s!==void 0){q=F[1];let at=s(q,_e,S);if(at)return at}++d;break;case Wt.FILL:Z?B++:this.fill_(e),++d;break;case Wt.MOVE_TO_LINE_TO:for(p=F[1],_=F[2],K=f[p],oe=f[p+1],e.moveTo(K,oe),T=K+.5|0,A=oe+.5|0,p+=2;p<_;p+=2)K=f[p],oe=f[p+1],N=K+.5|0,O=oe+.5|0,(p==_-2||N!==T||O!==A)&&(e.lineTo(K,oe),T=N,A=O);++d;break;case Wt.SET_FILL_STYLE:this.alignAndScaleFill_=F[2],B&&(this.fill_(e),B=0,v&&(e.stroke(),v=0)),e.fillStyle=F[1],++d;break;case Wt.SET_STROKE_STYLE:v&&(e.stroke(),v=0),this.setStrokeStyle_(e,F),++d;break;case Wt.STROKE:Z?v++:e.stroke(),++d;break;default:++d;break}}B&&this.fill_(e),v&&e.stroke()}execute(e,t,r,i,o,s){this.viewRotation_=i,this.execute_(e,t,r,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,t,r,i,o){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,i,o)}},P9=MP;var Rd=["Polygon","Circle","LineString","Image","Text","Default"],ny=["Image","Text"],L9=Rd.filter(n=>!ny.includes(n)),PP=class{constructor(e,t,r,i,o,s,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=t,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hr(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,t){let r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,t){for(let r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);let o=e[r];for(let s in o){let a=o[s];i[s]=new P9(this.resolution_,this.pixelRatio_,this.overlaps_,a,t)}}}hasExecutors(e){for(let t in this.executorsByZIndex_){let r=this.executorsByZIndex_[t];for(let i=0,o=e.length;i<o;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,t,r,i,o,s){i=Math.round(i);let a=i*2+1,l=Ri(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=$n(a,a));let f=this.hitDetectionContext_;f.canvas.width!==a||f.canvas.height!==a?(f.canvas.width=a,f.canvas.height=a):c||f.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=Ci(),fm(d,e),Zo(d,t*(this.renderBuffer_+i),d));let y=jae(i),p;function _(O,W,X){let Y=f.getImageData(0,0,a,a).data;for(let $=0,V=y.length;$<V;$++)if(Y[y[$]]>0){if(!s||X==="none"||p!=="Image"&&p!=="Text"||s.includes(O)){let B=(y[$]-3)/4,v=i-B%a,I=i-(B/a|0),M=o(O,W,v*v+I*I);if(M)return M}f.clearRect(0,0,a,a);break}}let w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Us);let b,S,T,A,N;for(b=w.length-1;b>=0;--b){let O=w[b].toString();for(T=this.executorsByZIndex_[O],S=Rd.length-1;S>=0;--S)if(p=Rd[S],A=T[p],A!==void 0&&(N=A.executeHitDetection(f,l,r,_,d),N))return N}}getClipCoords(e){let t=this.maxExtent_;if(!t)return null;let r=t[0],i=t[1],o=t[2],s=t[3],a=[r,i,r,s,o,s,o,i];return ka(a,0,8,2,e,a),a}isEmpty(){return la(this.executorsByZIndex_)}execute(e,t,r,i,o,s,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?sb:Us),s=s||Rd;let c=Rd.length;for(let f=0,d=l.length;f<d;++f){let y=l[f].toString(),p=this.executorsByZIndex_[y];for(let _=0,w=s.length;_<w;++_){let b=s[_],S=p[b];if(S!==void 0){let T=a===null?void 0:S.getZIndexContext(),A=T?T.getContext():e,N=this.maxExtent_&&b!=="Image"&&b!=="Text";if(N&&(A.save(),this.clip(A,r)),!T||b==="Text"||b==="Image"?S.execute(A,t,r,i,o,a):T.pushFunction(O=>S.execute(O,t,r,i,o,a)),N&&A.restore(),T){T.offset();let O=l[f]*c+Rd.indexOf(b);this.deferredZIndexContexts_[O]||(this.deferredZIndexContexts_[O]=[]),this.deferredZIndexContexts_[O].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(Us);for(let r=0,i=t.length;r<i;++r)e[t[r]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[t[r]].length=0}},NP={};function jae(n){if(NP[n]!==void 0)return NP[n];let e=n*2+1,t=n*n,r=new Array(t+1);for(let o=0;o<=n;++o)for(let s=0;s<=n;++s){let a=o*o+s*s;if(a>t)break;let l=r[a];l||(l=[],r[a]=l),l.push(((n+o)*e+(n+s))*4+3),o>0&&l.push(((n-o)*e+(n+s))*4+3),s>0&&(l.push(((n+o)*e+(n-s))*4+3),o>0&&l.push(((n-o)*e+(n-s))*4+3))}let i=[];for(let o=0,s=r.length;o<s;++o)r[o]&&i.push(...r[o]);return NP[n]=i,i}var iS=PP;var LP=class extends nS{constructor(e,t,r,i,o,s,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=r,this.transform_=i,this.transformRotation_=i?am(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hr()}drawImages_(e,t,r,i){if(!this.image_)return;let o=ka(e,t,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let f=0,d=o.length;f<d;f+=2){let y=o[f]-this.imageAnchorX_,p=o[f+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let _=y+this.imageAnchorX_,w=p+this.imageAnchorY_;Ri(a,_,w,1,1,c,-_,-w),s.save(),s.transform.apply(s,a),s.translate(_,w),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,p,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,t,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=ka(e,t,r,i,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<r;t+=i){let l=o[t]+this.textOffsetX_,c=o[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,c-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,c),this.textFillState_&&s.fillText(this.text_,l,c))}}moveToLineTo_(e,t,r,i,o){let s=this.context_,a=ka(e,t,r,i,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let c=2;c<l;c+=2)s.lineTo(a[c],a[c+1]);return o&&s.closePath(),r}drawRings_(e,t,r,i){for(let o=0,s=r.length;o<s;++o)t=this.moveToLineTo_(e,t,r[o],i,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=KU(e,this.transform_,this.pixelCoordinates_),r=t[2]-t[0],i=t[3]-t[1],o=Math.sqrt(r*r+i*i),s=this.context_;s.beginPath(),s.arc(t[0],t[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break;default:}}drawFeature(e,t){let r=t.getGeometryFunction()(e);r&&(this.setStyle(t),this.drawGeometry(r))}drawGeometryCollection(e){let t=e.getGeometriesArray();for(let r=0,i=t.length;r<i;++r)this.drawGeometry(t[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(t,0,t.length,r),this.text_!==""&&this.drawText_(t,0,t.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let t=this.context_,r=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){let t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let t=e.getExtent();if(Wn(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let r=this.context_,i=e.getFlatCoordinates(),o=0,s=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=s.length;l<c;++l)o=this.moveToLineTo_(i,o,s[l],a,!1);r.stroke()}if(this.text_!==""){let r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){let t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wn(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let t=this.context_,r=e.getOrientedFlatCoordinates(),i=0,o=e.getEndss(),s=e.getStride();t.beginPath();for(let a=0,l=o.length;a<l;++a){let c=o[a];i=this.drawRings_(r,i,c,s)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){let t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){let t=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let t=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,t.lineCap=e.lineCap),Gs(r.lineDash,e.lineDash)||t.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let t=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:wd;r?(r.font!=e.font&&(r.font=e.font,t.font=e.font),r.textAlign!=i&&(r.textAlign=i,t.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=i,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{let r=e.getColor();this.fillState_={fillStyle:Oa(r||Uo)}}if(!t)this.strokeState_=null;else{let r=t.getColor(),i=t.getLineCap(),o=t.getLineDash(),s=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),f=o||Fa;this.strokeState_={lineCap:i!==void 0?i:Rc,lineDash:this.pixelRatio_===1?f:f.map(d=>d*this.pixelRatio_),lineDashOffset:(s||Ba)*this.pixelRatio_,lineJoin:a!==void 0?a:Mc,lineWidth:(l!==void 0?l:Wh)*this.pixelRatio_,miterLimit:c!==void 0?c:Vh,strokeStyle:Oa(r||Hh)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}let r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=t[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/r,s[1]*this.pixelRatio_/r],this.imageWidth_=t[0]*r}setTextStyle(e){if(!e)this.text_="";else{let t=e.getFill();if(!t)this.textFillState_=null;else{let p=t.getColor();this.textFillState_={fillStyle:Oa(p||Uo)}}let r=e.getStroke();if(!r)this.textStrokeState_=null;else{let p=r.getColor(),_=r.getLineCap(),w=r.getLineDash(),b=r.getLineDashOffset(),S=r.getLineJoin(),T=r.getWidth(),A=r.getMiterLimit();this.textStrokeState_={lineCap:_!==void 0?_:Rc,lineDash:w||Fa,lineDashOffset:b||Ba,lineJoin:S!==void 0?S:Mc,lineWidth:T!==void 0?T:Wh,miterLimit:A!==void 0?A:Vh,strokeStyle:Oa(p||Hh)}}let i=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),f=e.getText(),d=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:i!==void 0?i:zb,textAlign:d!==void 0?d:wd,textBaseline:y!==void 0?y:hg},this.text_=f!==void 0?Array.isArray(f)?f.reduce((p,_,w)=>p+=w%2?" ":_,""):f:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}},k9=LP;var pa=.5;function oS(n,e,t,r,i,o,s,a,l){let c=l?cc(i,l):i,f=n[0]*pa,d=n[1]*pa,y=$n(f,d);y.imageSmoothingEnabled=!1;let p=y.canvas,_=new k9(y,pa,i,null,s,a,l?_m(yh(),l):null),w=t.length,b=Math.floor((256*256*256-1)/w),S={};for(let A=1;A<=w;++A){let N=t[A-1],O=N.getStyleFunction()||r;if(!O)continue;let W=O(N,o);if(!W)continue;Array.isArray(W)||(W=[W]);let Y=(A*b).toString(16).padStart(7,"#00000");for(let $=0,V=W.length;$<V;++$){let B=W[$],v=B.getGeometryFunction()(N);if(!v||!Wn(c,v.getExtent()))continue;let I=B.clone(),M=I.getFill();M&&M.setColor(Y);let j=I.getStroke();j&&(j.setColor(Y),j.setLineDash(null)),I.setText(void 0);let Q=B.getImage();if(Q){let oe=Q.getImageSize();if(!oe)continue;let _e=$n(oe[0],oe[1],void 0,{alpha:!1}),F=_e.canvas;_e.fillStyle=Y,_e.fillRect(0,0,F.width,F.height),I.setImage(new Ed({img:F,anchor:Q.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Q.getOrigin(),opacity:1,size:Q.getSize(),scale:Q.getScale(),rotation:Q.getRotation(),rotateWithView:Q.getRotateWithView()}))}let Z=I.getZIndex()||0,q=S[Z];q||(q={},S[Z]=q,q.Polygon=[],q.Circle=[],q.LineString=[],q.Point=[]);let K=v.getType();if(K==="GeometryCollection"){let oe=v.getGeometriesArrayRecursive();for(let _e=0,F=oe.length;_e<F;++_e){let ee=oe[_e];q[ee.getType().replace("Multi","")].push(ee,I)}}else q[K.replace("Multi","")].push(v,I)}}let T=Object.keys(S).map(Number).sort(Us);for(let A=0,N=T.length;A<N;++A){let O=S[T[A]];for(let W in O){let X=O[W];for(let Y=0,$=X.length;Y<$;Y+=2){_.setStyle(X[Y+1]);for(let V=0,B=e.length;V<B;++V)_.setTransform(e[V]),_.drawGeometry(X[Y])}}}return y.getImageData(0,0,p.width,p.height)}function sS(n,e,t){let r=[];if(t){let i=Math.floor(Math.round(n[0])*pa),o=Math.floor(Math.round(n[1])*pa),s=(Hn(i,0,t.width-1)+Hn(o,0,t.height-1)*t.width)*4,a=t.data[s],l=t.data[s+1],f=t.data[s+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);f&&f%d===0&&r.push(e[f/d-1])}return r}var Uae=.5,O9={Point:$ae,LineString:Hae,Polygon:Xae,MultiPoint:Yae,MultiLineString:qae,MultiPolygon:Wae,GeometryCollection:Vae,Circle:Gae};function F9(n,e){return parseInt(_t(n),10)-parseInt(_t(e),10)}function N1(n,e){let t=kP(n,e);return t*t}function kP(n,e){return Uae*n/e}function Gae(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(o||s){let l=n.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function ry(n,e,t,r,i,o,s,a){let l=[],c=t.getImage();if(c){let y=!0,p=c.getImageState();p==wt.LOADED||p==wt.ERROR?y=!1:p==wt.IDLE&&c.load(),y&&l.push(c.ready())}let f=t.getFill();f&&f.loading()&&l.push(f.ready());let d=l.length>0;return d&&Promise.all(l).then(()=>i(null)),zae(n,e,t,r,o,s,a),d}function zae(n,e,t,r,i,o,s){let a=t.getGeometryFunction()(e);if(!a)return;let l=a.simplifyTransformed(r,i);if(t.getRenderer())B9(n,l,t,e,s);else{let f=O9[l.getType()];f(n,l,t,e,s,o)}}function B9(n,e,t,r,i){if(e.getType()=="GeometryCollection"){let s=e.getGeometries();for(let a=0,l=s.length;a<l;++a)B9(n,s[a],t,r,i);return}n.getBuilder(t.getZIndex(),"Default").drawCustom(e,r,t.getRenderer(),t.getHitDetectionRenderer(),i)}function Vae(n,e,t,r,i,o){let s=e.getGeometriesArray(),a,l;for(a=0,l=s.length;a<l;++a){let c=O9[s[a].getType()];c(n,s[a],t,r,i,o)}}function Hae(n,e,t,r,i){let o=t.getStroke();if(o){let a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,r,i)}let s=t.getText();if(s&&s.getText()){let a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function qae(n,e,t,r,i){let o=t.getStroke();if(o){let a=n.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,r,i)}let s=t.getText();if(s&&s.getText()){let a=n.getBuilder(t.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,r,i)}}function Wae(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(s||o){let l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function $ae(n,e,t,r,i,o){let s=t.getImage(),a=t.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=wt.LOADED)return;let f=n.getBuilder(t.getZIndex(),"Image");f.setImageStyle(s,c),f.drawPoint(e,r,i)}if(l){let f=n.getBuilder(t.getZIndex(),"Text");f.setTextStyle(a,c),f.drawText(e,r,i)}}function Yae(n,e,t,r,i,o){let s=t.getImage(),a=s&&s.getOpacity()!==0,l=t.getText(),c=l&&l.getText(),f=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=wt.LOADED)return;let d=n.getBuilder(t.getZIndex(),"Image");d.setImageStyle(s,f),d.drawMultiPoint(e,r,i)}if(c){let d=n.getBuilder(t.getZIndex(),"Text");d.setTextStyle(l,f),d.drawText(e,r,i)}}function Xae(n,e,t,r,i){let o=t.getFill(),s=t.getStroke();if(o||s){let l=n.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(e,r,i)}let a=t.getText();if(a&&a.getText()){let l=n.getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}var OP=class extends J0{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ci(),this.wrappedRenderedExtent_=Ci(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,r){let i=t.extent,o=t.viewState,s=o.center,a=o.resolution,l=o.projection,c=o.rotation,f=l.getExtent(),d=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),p=t.pixelRatio,_=t.viewHints,w=!(_[Vr.ANIMATING]||_[Vr.INTERACTING]),b=this.context,S=Math.round(nn(i)/a*p),T=Math.round(Qn(i)/a*p),A=d.getWrapX()&&l.canWrapX(),N=A?nn(f):null,O=A?Math.ceil((i[2]-f[2])/N)+1:1,W=A?Math.floor((i[0]-f[0])/N):0;do{let X=this.getRenderTransform(s,a,0,p,S,T,W*N);t.declutter&&(X=X.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],X,c,w,r===void 0?Rd:r?ny:L9,r?y&&t.declutter[y]:void 0)}while(++W<O)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=$n(this.context.canvas.width,this.context.canvas.height,mP))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Uh(this.context),mP.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){let r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;let i=e.viewState;this.prepareContainer(e,t);let o=this.context,s=this.replayGroup_,a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(vi.PRERENDER)||this.getLayer().hasListener(vi.POSTRENDER)))return this.container;this.setDrawContext_(),this.preRender(o,e);let l=i.projection;if(this.clipped_=!1,a&&r.extent&&this.clipping){let c=ko(r.extent,l);a=Wn(c,e.extent),this.clipped_=a&&!Ns(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let r=this.frameState.size.slice(),i=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),f=[],d=r[0]*pa,y=r[1]*pa;f.push(this.getRenderTransform(i,o,s,pa,d,y,0).slice());let p=c.getSource(),_=a.getExtent();if(p.getWrapX()&&a.canWrapX()&&!Ns(_,l)){let b=l[0],S=nn(_),T=0,A;for(;b<_[0];)--T,A=S*T,f.push(this.getRenderTransform(i,o,s,pa,d,y,A).slice()),b+=S;for(T=0,b=l[2];b>_[2];)++T,A=S*T,f.push(this.getRenderTransform(i,o,s,pa,d,y,A).slice()),b-=S}let w=yh();this.hitDetectionImageData_=oS(r,f,this.renderedFeatures_,c.getStyleFunction(),l,o,s,N1(o,this.renderedPixelRatio_),w?a:null)}t(sS(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,r,i,o){if(!this.replayGroup_)return;let s=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},f=function(y,p,_){let w=_t(y),b=c[w];if(b){if(b!==!0&&_<b.distanceSq){if(_===0)return c[w]=!0,o.splice(o.lastIndexOf(b),1),i(y,l,p);b.geometry=p,b.distanceSq=_}}else{if(_===0)return c[w]=!0,i(y,l,p);o.push(c[w]={feature:y,layer:l,geometry:p,distanceSq:_,callback:i})}},d=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,s,a,r,f,d?t.declutter?.[d]?.all().map(y=>y.value):null)}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let t=this.getLayer(),r=t.getSource();if(!r)return!1;let i=e.viewHints[Vr.ANIMATING],o=e.viewHints[Vr.INTERACTING],s=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!s&&i||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=e.extent,c=e.viewState,f=c.projection,d=c.resolution,y=e.pixelRatio,p=t.getRevision(),_=t.getRenderBuffer(),w=t.getRenderOrder();w===void 0&&(w=F9);let b=c.center.slice(),S=Zo(l,_*d),T=S.slice(),A=[S.slice()],N=f.getExtent();if(r.getWrapX()&&f.canWrapX()&&!Ns(N,e.extent)){let j=nn(N),Q=Math.max(nn(S)/2,j);S[0]=N[0]-Q,S[2]=N[2]+Q,ym(b,f);let Z=UF(A[0],f);Z[0]<N[0]&&Z[2]<N[2]?A.push([Z[0]+j,Z[1],Z[2]+j,Z[3]]):Z[0]>N[0]&&Z[2]>N[2]&&A.push([Z[0]-j,Z[1],Z[2]-j,Z[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==p&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&Ns(this.wrappedRenderedExtent_,S))return Gs(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let O=new rS(kP(d,y),S,d,y),W=yh(),X;if(W){for(let j=0,Q=A.length;j<Q;++j){let Z=A[j],q=cc(Z,f);r.loadFeatures(q,XF(d,f),W)}X=_m(W,f)}else for(let j=0,Q=A.length;j<Q;++j)r.loadFeatures(A[j],d,f);let Y=N1(d,y),$=!0,V=(j,Q)=>{let Z,q=j.getStyleFunction()||t.getStyleFunction();if(q&&(Z=q(j,d)),Z){let K=this.renderFeature(j,Y,Z,O,X,this.getLayer().getDeclutter(),Q);$=$&&!K}},B=cc(S,f),v=r.getFeaturesInExtent(B);w&&v.sort(w);for(let j=0,Q=v.length;j<Q;++j)V(v[j],j);this.renderedFeatures_=v,this.ready=$;let I=O.finish(),M=new iS(S,d,y,r.getOverlaps(),I,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=p,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=S,this.renderedCenter_=b,this.renderedProjection_=f,this.renderedPixelRatio_=y,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,r,i,o,s,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,f=r.length;c<f;++c)l=ry(i,e,r[c],t,this.boundHandleStyleImageChange_,o,s,a)||l;else l=ry(i,e,r,t,this.boundHandleStyleImageChange_,o,s,a);return l}},j9=OP;var FP=class extends H0{constructor(e){super(e)}createRenderer(){return new j9(this)}},ef=FP;var Zae=!1;function BP(n,e,t,r,i,o,s){let a=new XMLHttpRequest;a.open("GET",typeof n=="function"?n(t,r,i):n,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=Zae,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let c=e.getType();try{let f;c=="text"||c=="json"?f=a.responseText:c=="xml"?f=a.responseXML||a.responseText:c=="arraybuffer"&&(f=a.response),f?o(e.readFeatures(f,{extent:t,featureProjection:i}),e.readProjection(f)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function jP(n,e){return function(t,r,i,o,s){BP(n,e,t,r,i,(a,l)=>{this.addFeatures(a),o!==void 0&&o(a)},()=>{this.changed(),s!==void 0&&s()})}}function U9(n,e){return[[-1/0,-1/0,1/0,1/0]]}var UP=class n extends yo{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){let t=e;this.setGeometry(t)}else{let t=e;this.setProperties(t)}}clone(){let e=new n(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());let t=this.getGeometry();t&&e.setGeometry(t.clone());let r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(An(this.geometryChangeKey_),this.geometryChangeKey_=null);let e=this.getGeometry();e&&(this.geometryChangeKey_=an(e,gt.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Kae(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function Kae(n){if(typeof n=="function")return n;let e;return Array.isArray(n)?e=n:(on(typeof n.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[n]),function(){return e}}var eo=UP;function aS(n,e,t,r){let i=[],o=Ci();for(let s=0,a=t.length;s<a;++s){let l=t[s];o=cm(n,e,l[0],r),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return i}function gg(n,e,t,r,i,o,s){let a,l,c=(t-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let f=n[e],d=n[e+1],y=0,p=[0];for(let b=e+r;b<t;b+=r){let S=n[b],T=n[b+1];y+=Math.sqrt((S-f)*(S-f)+(T-d)*(T-d)),p.push(y),f=S,d=T}let _=i*y,w=RU(p,_);w<0?(l=(_-p[-w-2])/(p[-w-1]-p[-w-2]),a=e+(-w-2)*r):a=e+w*r}s=s>1?s:2,o=o||new Array(s);for(let f=0;f<s;++f)o[f]=a===void 0?NaN:l===void 0?n[a+f]:us(n[a+f],n[a+r+f],l);return o}function lS(n,e,t,r,i,o){if(t==e)return null;let s;if(i<n[e+r-1])return o?(s=n.slice(e,e+r),s[r-1]=i,s):null;if(n[t-1]<i)return o?(s=n.slice(t-r,t),s[r-1]=i,s):null;if(i==n[e+r-1])return n.slice(e,e+r);let a=e/r,l=t/r;for(;a<l;){let y=a+l>>1;i<n[(y+1)*r-1]?l=y:a=y+1}let c=n[a*r-1];if(i==c)return n.slice((a-1)*r,(a-1)*r+r);let f=n[(a+1)*r-1],d=(i-c)/(f-c);s=[];for(let y=0;y<r-1;++y)s.push(us(n[(a-1)*r+y],n[a*r+y],d));return s.push(i),s}function G9(n,e,t,r,i,o,s){if(s)return lS(n,e,t[t.length-1],r,i,o);let a;if(i<n[r-1])return o?(a=n.slice(0,r),a[r-1]=i,a):null;if(n[n.length-1]<i)return o?(a=n.slice(n.length-r),a[r-1]=i,a):null;for(let l=0,c=t.length;l<c;++l){let f=t[l];if(e!=f){if(i<n[e+r-1])return null;if(i<=n[f-1])return lS(n,e,f,r,i,!1);e=f}}return null}var uS=class n extends zs{constructor(e,t,r){super(),r!==void 0&&t===void 0?this.setFlatCoordinates(r,e):(t=t||0,this.setCenterAndRadius(e,t,r))}clone(){let e=new n(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){let o=this.flatCoordinates,s=e-o[0],a=t-o[1],l=s*s+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=o[c];else{let c=this.getRadius()/Math.sqrt(l);r[0]=o[0]+c*s,r[1]=o[1]+c*a;for(let f=2;f<this.stride;++f)r[f]=o[f]}return r.length=this.stride,l}return i}containsXY(e,t){let r=this.flatCoordinates,i=e-r[0],o=t-r[1];return i*i+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){let t=this.flatCoordinates,r=t[this.stride]-t[0];return Du(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){let t=this.getExtent();if(Wn(e,t)){let r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:dm(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){let t=this.stride,r=this.flatCoordinates[t]-this.flatCoordinates[0],i=e.slice();i[t]=i[0]+r;for(let o=1;o<t;++o)i[t+o]=e[o];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,t,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);let i=this.flatCoordinates,o=yb(i,0,e,this.stride);i[o++]=i[0]+t;for(let s=1,a=this.stride;s<a;++s)i[o++]=i[s];i.length=o,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){let r=this.getCenter(),i=this.getStride();this.setCenter(D0(r,0,r.length,i,e,t,r)),this.changed()}};uS.prototype.transform;var z9=uS;var zP=class n extends mb{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(An),this.changeEventsKeys_.length=0}listenGeometriesChange_(){let e=this.geometries_;for(let t=0,r=e.length;t<r;++t)this.changeEventsKeys_.push(an(e[t],gt.CHANGE,this.changed,this))}clone(){let e=new n(GP(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Ta(this.getExtent(),e,t))return i;let o=this.geometries_;for(let s=0,a=o.length;s<a;++s)i=o[s].closestPointXY(e,t,r,i);return i}containsXY(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)if(r[i].containsXY(e,t))return!0;return!1}computeExtent(e){um(e);let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)hm(e,t[r].getExtent());return e}getGeometries(){return GP(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[],t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].getType()===this.getType()?e=e.concat(t[r].getGeometriesArrayRecursive()):e.push(t[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let t=[],r=this.geometries_,i=!1;for(let o=0,s=r.length;o<s;++o){let a=r[o],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(i=!0)}return i?new n(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)if(t[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].rotate(e,t);this.changed()}scale(e,t,r){r||(r=Lo(this.getExtent()));let i=this.geometries_;for(let o=0,s=i.length;o<s;++o)i[o].scale(e,t,r);this.changed()}setGeometries(e){this.setGeometriesArray(GP(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){let t=this.geometries_;for(let r=0,i=t.length;r<i;++r)t[r].applyTransform(e);this.changed()}translate(e,t){let r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}};function GP(n){return n.map(e=>e.clone())}var _s=zP;var VP=class n extends zs{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){zn(this.flatCoordinates,e),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Ta(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Yv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Zv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,r,i))}forEachSegment(e){return wb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lS(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return gg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return ey(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){let t=[];return t.length=ig(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new n(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return n1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rg(this.flatCoordinates,0,e,this.stride),this.changed()}},to=VP;var HP=class n extends zs{constructor(e,t,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&r)this.setFlatCoordinates(t,e),this.ends_=r;else{let i=e,o=[],s=[];for(let l=0,c=i.length;l<c;++l){let f=i[l];zn(o,f.getFlatCoordinates()),s.push(o.length)}let a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,o),this.ends_=s}}appendLineString(e){zn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,r,i){return i<Ta(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xv(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Kv(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,i))}getCoordinateAtM(e,t,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,r=r!==void 0?r:!1,G9(this.flatCoordinates,0,this.ends_,this.stride,e,t,r))}getCoordinates(){return pd(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new to(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){let e=this.flatCoordinates,t=this.ends_,r=this.layout,i=[],o=0;for(let s=0,a=t.length;s<a;++s){let l=t[s],c=new to(e.slice(o,l),r);i.push(c),o=l}return i}getLength(){let e=this.ends_,t=0,r=0;for(let i=0,o=e.length;i<o;++i)r+=ey(this.flatCoordinates,t,e[i],this.stride),t=e[i];return r}getFlatMidpoints(){let e=[],t=this.flatCoordinates,r=0,i=this.ends_,o=this.stride;for(let s=0,a=i.length;s<a;++s){let l=i[s],c=gg(t,r,l,o,.5);zn(e,c),r=l}return e}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=vb(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r),new n(t,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return oG(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let r=dd(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}},qs=HP;var qP=class n extends zs{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){zn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){let e=new n(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,r,i){if(i<Ta(this.getExtent(),e,t))return i;let o=this.flatCoordinates,s=this.stride;for(let a=0,l=o.length;a<l;a+=s){let c=al(e,t,o[a],o[a+1]);if(c<i){i=c;for(let f=0;f<s;++f)r[f]=o[a+f];r.length=s}}return i}getCoordinates(){return ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){let t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new _o(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){let e=this.flatCoordinates,t=this.layout,r=this.stride,i=[];for(let o=0,s=e.length;o<s;o+=r){let a=new _o(e.slice(o,o+r),t);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){let t=this.flatCoordinates,r=this.stride;for(let i=0,o=t.length;i<o;i+=r){let s=t[i],a=t[i+1];if(_w(e,s,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=rg(this.flatCoordinates,0,e,this.stride),this.changed()}},ml=qP;var WP=class n extends zs{constructor(e,t,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){let i=e,o=[],s=[];for(let a=0,l=i.length;a<l;++a){let c=i[a],f=o.length,d=c.getEnds();for(let y=0,p=d.length;y<p;++y)d[y]+=f;zn(o,c.getFlatCoordinates()),s.push(d)}t=i.length===0?this.getLayout():i[0].getLayout(),e=o,r=s}t!==void 0&&r?(this.setFlatCoordinates(t,e),this.endss_=r):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{let r=this.flatCoordinates.length;zn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let i=0,o=t.length;i<o;++i)t[i]+=r}this.endss_.push(t),this.changed()}clone(){let e=this.endss_.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=this.endss_[i].slice();let r=new n(this.flatCoordinates.slice(),this.layout,t);return r.applyProperties(this),r}closestPointXY(e,t,r,i){return i<Ta(this.getExtent(),e,t)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(eG(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),tG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,i))}containsXY(e,t){return iG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return JU(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),i1(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Jv(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let e=aS(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=xb(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new ml(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;Eb(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=i1(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let t=[],r=[];return t.length=nG(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r),new n(t,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{let o=this.endss_[e-1];t=o[o.length-1]}let r=this.endss_[e].slice(),i=r[r.length-1];if(t!==0)for(let o=0,s=r.length;o<s;++o)r[o]-=t;return new jo(this.flatCoordinates.slice(t,i),this.layout,r)}getPolygons(){let e=this.layout,t=this.flatCoordinates,r=this.endss_,i=[],o=0;for(let s=0,a=r.length;s<a;++s){let l=r[s].slice(),c=l[l.length-1];if(o!==0)for(let d=0,y=l.length;d<y;++d)l[d]-=o;let f=new jo(t.slice(o,c),e,l);i.push(f),o=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return sG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);let r=_b(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{let i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}},yl=WP;var V9=Hr(),P1=class n{constructor(e,t,r,i,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=o,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?vw(this.flatCoordinates_):cm(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=Lo(this.getExtent());this.flatInteriorPoints_=t1(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=bb(this.flatCoordinates_,this.ends_),t=aS(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=xb(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=gg(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,t=0,r=this.ends_;for(let i=0,o=r.length;i<o;++i){let s=r[i],a=gg(e,t,s,2,.5);zn(this.flatMidpoints_,a),t=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=rn(e);let t=e.getExtent(),r=e.getWorldExtent();if(t&&r){let i=Qn(r)/Qn(t);Ri(V9,r[0],r[3],i,-i,0,0,0),ka(this.flatCoordinates_,0,this.flatCoordinates_.length,2,V9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new n(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=ab((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);let r=this.simplifiedGeometry_.getFlatCoordinates(),i;switch(this.type_){case"LineString":r.length=ig(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=vb(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=Qv(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break;default:}return i&&(this.simplifiedGeometry_=new n(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}};P1.prototype.getFlatCoordinates=P1.prototype.getOrientedFlatCoordinates;var Ua=P1;var $P=class{constructor(e){this.rbush_=new U0(e),this.items_={}}insert(e,t){let r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(r),this.items_[_t(t)]=r}load(e,t){let r=new Array(t.length);for(let i=0,o=t.length;i<o;i++){let s=e[i],a=t[i],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[i]=l,this.items_[_t(a)]=l}this.rbush_.load(r)}remove(e){let t=_t(e),r=this.items_[t];return delete this.items_[t],this.rbush_.remove(r)!==null}update(e,t){let r=this.items_[_t(t)],i=[r.minX,r.minY,r.maxX,r.maxY];ll(i,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){let t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let r;for(let i=0,o=e.length;i<o;i++)if(r=t(e[i]),r)return r;return r}isEmpty(){return la(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let t=this.rbush_.toJSON();return Du(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(let t in e.items_)this.items_[t]=e.items_[t]}},YP=$P;var XP=class extends yo{constructor(e){super(),this.projection=rn(e.projection),this.attributions_=H9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let t=this;this.viewPromise_=new Promise(function(r,i){t.viewResolver=r,t.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=H9(e),this.changed()}setState(e){this.state_=e,this.changed()}};function H9(n){return n?typeof n=="function"?n:(Array.isArray(n)||(n=[n]),e=>n):null}var iy=XP;var _l={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};var Oc=class extends _i{constructor(e,t,r){super(e),this.feature=t,this.features=r}},ZP=class extends iy{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=jh,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(on(this.format_,"`format` must be set when `url` is set"),this.loader_=jP(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:U9;let t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new YP:null,this.loadedExtentsRtree_=new YP,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!t&&r===void 0&&(r=new gs(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let t=_t(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);let r=e.getGeometry();if(r){let i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Oc(_l.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Ua||(this.featureChangeKeys_[e]=[an(t,gt.CHANGE,this.handleFeatureChange_,this),an(t,Fu.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let r=!0;if(t.getId()!==void 0){let i=String(t.getId());if(!(i in this.idIndex_))this.idIndex_[i]=t;else if(t instanceof Ua){let o=this.idIndex_[i];o instanceof Ua?Array.isArray(o)?o.push(t):this.idIndex_[i]=[o,t]:r=!1}else r=!1}return r&&(on(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let t=[],r=[],i=[];for(let o=0,s=e.length;o<s;o++){let a=e[o],l=_t(a);this.addToIndex_(l,a)&&r.push(a)}for(let o=0,s=r.length;o<s;o++){let a=r[o],l=_t(a);this.setupChangeEvents_(l,a);let c=a.getGeometry();if(c){let f=c.getExtent();t.push(f),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,i),this.hasListener(_l.ADDFEATURE))for(let o=0,s=r.length;o<s;o++)this.dispatchEvent(new Oc(_l.ADDFEATURE,r[o]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(_l.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),this.addEventListener(_l.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),e.addEventListener(Jo.ADD,r=>{t||(t=!0,this.addFeature(r.element),t=!1)}),e.addEventListener(Jo.REMOVE,r=>{t||(t=!0,this.removeFeature(r.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(let r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(An);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(let r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let t=new Oc(_l.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){let r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){let o=i.getGeometry();if(o instanceof Ua||o.intersectsCoordinate(e))return t(i)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(r){let i=r.getGeometry();if(i instanceof Ua||i.intersectsExtent(e)){let o=t(r);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),la(this.nullGeometryFeatures_)||zn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let t=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){t.push(r)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let i=pm(e,t);return[].concat(...i.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){let r=e[0],i=e[1],o=null,s=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return t=t||Bu,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){let f=c.getGeometry(),d=a;if(a=f instanceof Ua?0:f.closestPointXY(r,i,s,a),a<d){o=c;let y=Math.sqrt(a);l[0]=r-y,l[1]=i-y,l[2]=r+y,l[3]=i+y}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){let t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let t=e.target,r=_t(t),i=t.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[r]=t);else{let s=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(s,t)):this.featuresRtree_&&this.featuresRtree_.update(s,t)}let o=t.getId();if(o!==void 0){let s=o.toString();this.idIndex_[s]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[s]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[r]=t;this.changed(),this.dispatchEvent(new Oc(_l.CHANGEFEATURE,t))}hasFeature(e){let t=e.getId();return t!==void 0?t in this.idIndex_:_t(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&la(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,r){let i=this.loadedExtentsRtree_,o=this.strategy_(e,t,r);for(let s=0,a=o.length;s<a;++s){let l=o[s];i.forEachInExtent(l,function(f){return Ns(f.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Oc(_l.FEATURESLOADSTART)),this.loader_.call(this,l,t,r,f=>{--this.loadingExtentsCount_,this.dispatchEvent(new Oc(_l.FEATURESLOADEND,void 0,f))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Oc(_l.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let t=this.loadedExtentsRtree_,r=t.forEachInExtent(e,function(i){if(ll(i.extent,e))return i});r&&t.remove(r)}removeFeatures(e){let t=!1;for(let r=0,i=e.length;r<i;++r)t=this.removeFeatureInternal(e[r])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let t=_t(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[t]?.forEach(An),delete this.featureChangeKeys_[t];let i=e.getId();if(i!==void 0){let o=i.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[t],this.hasListener(_l.REMOVEFEATURE)&&this.dispatchEvent(new Oc(_l.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(let t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){on(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(jP(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}},ou=ZP;var oy=[0,0,0],Md=5,KP=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,on(NU(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!t)t=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,on(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Ps(r)),on(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,on(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:256,on(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{let s=new W0(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){let a=this.getTileRangeForExtentAndZ(r,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,t,r){let i=this.getTileRangeForExtentAndZ(e,t);for(let o=i.minX,s=i.maxX;o<=s;++o)for(let a=i.minY,l=i.maxY;a<=l;++a)r([t,o,a])}forEachTileCoordParentTileRange(e,t,r,i){let o,s,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=fg(s,s,a,a,r)):o=this.getTileRangeForExtentAndZ(l,c,r),t(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){let o=e[1]*2,s=e[2]*2;return fg(o,o+1,s,s+1,t)}let i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,r){if(t>this.maxZoom||t<this.minZoom)return null;let i=e[0],o=e[1],s=e[2];if(t===i)return fg(o,s,o,s,r);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,t-i),c=Math.floor(o*l),f=Math.floor(s*l);if(t<i)return fg(c,c,f,f,r);let d=Math.floor(l*(o+1))-1,y=Math.floor(l*(s+1))-1;return fg(c,d,f,y,r)}let a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,r)}getTileRangeForExtentAndZ(e,t,r){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,oy);let i=oy[1],o=oy[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,oy);let s=oy[1],a=oy[2];return fg(i,s,o,a,r)}getTileCoordCenter(e){let t=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=Yn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*r,t[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,t){let r=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=Yn(this.getTileSize(e[0]),this.tmpSize_),s=r[0]+e[1]*o[0]*i,a=r[1]-(e[2]+1)*o[1]*i,l=s+o[0]*i,c=a+o[1]*i;return Du(s,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r)}getTileCoordForXYAndResolution_(e,t,r,i,o){let s=this.getZForResolution(r),a=r/this.getResolution(s),l=this.getOrigin(s),c=Yn(this.getTileSize(s),this.tmpSize_),f=a*(e-l[0])/r/c[0],d=a*(l[1]-t)/r/c[1];return i?(f=uc(f,Md)-1,d=uc(d,Md)-1):(f=lm(f,Md),d=lm(d,Md)),Zh(s,f,d,o)}getTileCoordForXYAndZ_(e,t,r,i,o){let s=this.getOrigin(r),a=this.getResolution(r),l=Yn(this.getTileSize(r),this.tmpSize_),c=(e-s[0])/a/l[0],f=(s[1]-t)/a/l[1];return i?(c=uc(c,Md)-1,f=uc(f,Md)-1):(c=lm(c,Md),f=lm(f,Md)),Zh(r,c,f,o)}getTileCoordForCoordAndZ(e,t,r){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){let r=ld(this.resolutions_,e,t||0);return Hn(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return j5(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){let t=this.resolutions_.length,r=new Array(t);for(let i=this.minZoom;i<t;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}},tf=KP;var JP=class extends tf{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}};function q9(n,e,t){let r=[],i=[],o=[],s=[],a=[];t=t!==void 0?t:[];let l="SupportedCRS",c="TileMatrix",f="Identifier",d="ScaleDenominator",y="TopLeftCorner",p="TileWidth",_="TileHeight",w=n[l],b=rn(w),S=b.getMetersPerUnit(),T=b.getAxisOrientation().startsWith("ne");return n[c].sort(function(A,N){return N[d]-A[d]}),n[c].forEach(function(A){let N;if(t.length>0?N=t.find(function(O){return A[f]==O[c]?!0:A[f].includes(":")?!1:n[f]+":"+A[f]===O[c]}):N=!0,N){i.push(A[f]);let O=A[d]*28e-5/S,W=A[p],X=A[_];T?o.push([A[y][1],A[y][0]]):o.push(A[y]),r.push(O),s.push(W==X?W:[W,X]),a.push([A.MatrixWidth,A.MatrixHeight])}}),new JP({extent:e,origins:o,resolutions:r,matrixIds:i,tileSizes:s,sizes:a})}function Nd(n){let e=n.getDefaultTileGrid();return e||(e=ele(n),n.setDefaultTileGrid(e)),e}function W9(n,e,t){let r=e[0],i=n.getTileCoordCenter(e),o=vl(t);if(!Ms(o,i)){let s=nn(o),a=Math.ceil((o[0]-i[0])/s);return i[0]+=s*a,n.getTileCoordForCoordAndZ(i,r)}return e}function Qae(n,e,t,r){r=r!==void 0?r:"top-left";let i=$9(n,e,t);return new tf({extent:n,origin:FF(n,r),resolutions:i,tileSize:t})}function Hu(n){let e=n||{},t=e.extent||rn("EPSG:3857").getExtent(),r={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:$9(t,e.maxZoom,e.tileSize,e.maxResolution)};return new tf(r)}function $9(n,e,t,r){e=e!==void 0?e:42,t=Yn(t!==void 0?t:256);let i=Qn(n),o=nn(n);r=r>0?r:Math.max(o/t[0],i/t[1]);let s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=r/Math.pow(2,l);return a}function ele(n,e,t,r){let i=vl(n);return Qae(i,e,t,r)}function vl(n){n=rn(n);let e=n.getExtent();if(!e){let t=180*Sw.degrees/n.getMetersPerUnit();e=Du(-t,-t,t,t)}return e}function mg(n,e){let t=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&t.push(i+"="+encodeURIComponent(e[i]))});let r=t.join("&");return n=n.replace(/[?&]$/,""),n+=n.includes("?")?"&":"?",n+r}var tle=/\{z\}/g,nle=/\{x\}/g,rle=/\{y\}/g,ile=/\{-y\}/g;function Y9(n,e,t,r,i){return n.replace(tle,e.toString()).replace(nle,t.toString()).replace(rle,r.toString()).replace(ile,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function cS(n){let e=[],t=/\{([a-z])-([a-z])\}/.exec(n);if(t){let r=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o;for(o=r;o<=i;++o)e.push(n.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(n),t){let r=parseInt(t[2],10);for(let i=parseInt(t[1],10);i<=r;i++)e.push(n.replace(t[0],i.toString()));return e}return e.push(n),e}function ole(n,e){return(function(t,r,i){if(!t)return;let o,s=t[0];if(e){let a=e.getFullTileRange(s);a&&(o=a.getHeight()-1)}return Y9(n,s,t[1],t[2],o)})}function hS(n,e){let t=n.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=ole(n[i],e);return fS(r)}function fS(n){return n.length===1?n[0]:(function(e,t,r){if(!e)return;let i=Jb(e),o=Tu(i,n.length);return n[o](e,t,r)})}var QP=class extends iy{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;let t=[256,256];this.tileGrid&&Yn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||_t(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){let t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,r,i,o,s){return Ct()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Nd(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,r){let i=this.getTileGridForProjection(r),o=this.getTilePixelRatio(t),s=Yn(i.getTileSize(e),this.tmpSize);return o==1?s:zG(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){let r=t!==void 0?t:this.getProjection(),i=t!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=W9(i,e,r)),b9(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}},sy=class extends _i{constructor(e,t){super(e),this.tile=t}},dS=QP;var Pd={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var eL=class n extends dS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===n.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){let t=e.target,r=_t(t),i=t.getState(),o;i==Ze.LOADING?(this.tileLoadingKeys_[r]=!0,o=Pd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==Ze.ERROR?Pd.TILELOADERROR:i==Ze.LOADED?Pd.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new sy(o,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){let t=cS(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;let t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(hS(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,r){}},pS=eL;var tL=class extends pS{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:nL,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Id,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!Gr(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){let t=this.getProjection();if(this.tileGrid&&(!t||Gr(t,e)))return this.tileGrid;let r=_t(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Nd(e)),this.tileGridForProjection[r]}createTile_(e,t,r,i,o,s){let a=[e,t,r],l=this.getTileCoordForTileUrlFunction(a,o),c=l?this.tileUrlFunction(l,i,o):void 0,f=new this.tileClass(a,c!==void 0?Ze.IDLE:Ze.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=s,f.addEventListener(gt.CHANGE,this.handleTileChange.bind(this)),f}getTile(e,t,r,i,o,s){let a=this.getProjection();if(!a||!o||Gr(a,o))return this.getTileInternal(e,t,r,i,a||o);let l=[e,t,r],c=this.getKey(),f=this.getTileGridForProjection(a),d=this.getTileGridForProjection(o),y=this.getTileCoordForTileUrlFunction(l,o),p=new X0(a,f,o,d,l,y,this.getTilePixelRatio(i),this.getGutter(),(_,w,b,S)=>this.getTileInternal(_,w,b,S,a,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=c,p}getTileInternal(e,t,r,i,o,s){let a=this.getKey(),l=Td(this,a,e,t,r);if(s&&s.containsKey(l))return s.get(l);let c=this.createTile_(e,t,r,i,o,a);return s?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){let r=rn(e);if(r){let i=_t(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=t)}}};function nL(n,e){if(Ai){let t=n.getCrossOrigin(),r="same-origin",i="same-origin";t==="anonymous"||t===""?(r="cors",i="omit"):t==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(o=>{if(!o.ok)throw new Error(`HTTP ${o.status}`);return o.blob()}).then(o=>createImageBitmap(o)).then(o=>{let s=n.getImage();s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0),o.close?.(),s.dispatchEvent(new Event("load"))}).catch(()=>{n.getImage().dispatchEvent(new Event("error"))});return}n.getImage().src=e}var Ld=tL;var rL=class extends Ld{constructor(e){e=e||{};let t=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:Hu({extent:vl(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}},yg=rL;var oL='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',iL=class extends yg{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[oL];let r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(o,s)=>{let a=o.getImage();!Ai&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||nL)(o,s)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}},X9=iL;var sL=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=eo,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let r=t.dataProjection?rn(t.dataProjection):this.readProjection(e);t.extent&&r&&r.getUnits()==="tile-pixels"&&(r=rn(r),r.setWorldExtent(t.extent)),t={dataProjection:r,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Ct()}readFeature(e,t){return Ct()}readFeatures(e,t){return Ct()}readGeometry(e,t){return Ct()}readProjection(e){return Ct()}writeFeature(e,t){return Ct()}writeFeatures(e,t){return Ct()}writeGeometry(e,t){return Ct()}},kd=sL;function Go(n,e,t){let r=t?rn(t.featureProjection):null,i=t?rn(t.dataProjection):null,o=n;if(r&&i&&!Gr(r,i)){e&&(o=n.clone());let s=e?r:i,a=e?i:r;s.getUnits()==="tile-pixels"?o.transform(s,a):o.applyTransform(mh(s,a))}if(e&&t&&t.decimals!==void 0){let s=Math.pow(10,t.decimals),a=function(l){for(let c=0,f=l.length;c<f;++c)l[c]=Math.round(l[c]*s)/s;return l};o===n&&(o=n.clone()),o.applyTransform(a)}return o}var sle={Point:_o,LineString:to,Polygon:jo,MultiPoint:ml,MultiLineString:qs,MultiPolygon:yl};function ale(n,e,t){return Array.isArray(e[0])?(Eb(n,0,e,t)||(n=n.slice(),i1(n,0,e,t)),n):(r1(n,0,e,t)||(n=n.slice(),A0(n,0,e,t)),n)}function aL(n,e){let t=n.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>aL(tn(dt({},n),{geometry:o}))).flat();let r=t.type==="MultiPolygon"?"Polygon":t.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);let i=t.layout.length;return Go(new Ua(r,r==="Polygon"?ale(t.flatCoordinates,t.ends,i):t.flatCoordinates,t.ends?.flat(),i,n.properties||{},n.id).enableSimplifyTransformed(),!1,e)}function gS(n,e){if(!n)return null;if(Array.isArray(n)){let r=n.map(i=>gS(i,e));return new _s(r)}let t=sle[n.type];return Go(new t(n.flatCoordinates,n.layout||"XY",n.ends),!1,e)}var lL=class extends kd{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(mS(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(mS(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Ct()}readFeaturesFromObject(e,t){return Ct()}readGeometry(e,t){return this.readGeometryFromObject(mS(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Ct()}readProjection(e){return this.readProjectionFromObject(mS(e))}readProjectionFromObject(e){return Ct()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Ct()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Ct()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Ct()}};function mS(n){if(typeof n=="string"){let e=JSON.parse(n);return e||null}return n!==null?n:null}var Z9=lL;var uL=class extends Z9{constructor(e){e=e||{},super(),this.dataProjection=rn(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=rn(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};let i=hL(r.geometry,t);if(this.featureClass===Ua)return aL({geometry:i,id:r.id,properties:r.properties},t);let o=new eo;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&o.setGeometryName(r.geometry_name),o.setGeometry(gS(i,t)),"id"in r&&o.setId(r.id),r.properties&&o.setProperties(r.properties,!0),o}readFeaturesFromObject(e,t){let r=e,i=null;if(r.type==="FeatureCollection"){let o=e;i=[];let s=o.features;for(let a=0,l=s.length;a<l;++a){let c=this.readFeatureFromObject(s[a],t);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,t)];return i.flat()}readGeometryFromObject(e,t){return lle(e,t)}readProjectionFromObject(e){let t=e.crs,r;if(t)if(t.type=="name")r=rn(t.properties.name);else if(t.type==="EPSG")r=rn("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,t){t=this.adaptOptions(t);let r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;let o=e.getProperties(),s=e.getGeometry();return s&&(r.geometry=cL(s,t),delete o[e.getGeometryName()]),la(o)||(r.properties=o),r}writeFeaturesObject(e,t){t=this.adaptOptions(t);let r=[];for(let i=0,o=e.length;i<o;++i)r.push(this.writeFeatureObject(e[i],t));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,t){return cL(e,this.adaptOptions(t))}};function hL(n,e){if(!n)return null;let t;switch(n.type){case"Point":{t=cle(n);break}case"LineString":{t=hle(n);break}case"Polygon":{t=gle(n);break}case"MultiPoint":{t=dle(n);break}case"MultiLineString":{t=fle(n);break}case"MultiPolygon":{t=ple(n);break}case"GeometryCollection":{t=ule(n);break}default:throw new Error("Unsupported GeoJSON type: "+n.type)}return t}function lle(n,e){let t=hL(n,e);return gS(t,e)}function ule(n,e){return n.geometries.map(function(r){return hL(r,e)})}function cle(n){let e=n.coordinates;return{type:"Point",flatCoordinates:e,layout:fd(e.length)}}function hle(n){let e=n.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:fd(e[0]?.length||2)}}function fle(n){let e=n.coordinates,t=e[0]?.[0]?.length||2,r=[],i=dd(r,0,e,t);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:fd(t)}}function dle(n){let e=n.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:fd(e[0]?.length||2)}}function ple(n){let e=n.coordinates,t=[],r=e[0]?.[0]?.[0].length||2,i=_b(t,0,e,r);return{type:"MultiPolygon",flatCoordinates:t,ends:i,layout:fd(r)}}function gle(n){let e=n.coordinates,t=[],r=e[0]?.[0]?.length,i=dd(t,0,e,r);return{type:"Polygon",flatCoordinates:t,ends:i,layout:fd(r)}}function cL(n,e){n=Go(n,!0,e);let t=n.getType(),r;switch(t){case"Point":{r=wle(n,e);break}case"LineString":{r=yle(n,e);break}case"Polygon":{r=Ele(n,e);break}case"MultiPoint":{r=vle(n,e);break}case"MultiLineString":{r=_le(n,e);break}case"MultiPolygon":{r=xle(n,e);break}case"GeometryCollection":{r=mle(n,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return r}function mle(n,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:n.getGeometriesArray().map(function(r){return cL(r,e)})}}function yle(n,e){return{type:"LineString",coordinates:n.getCoordinates()}}function _le(n,e){return{type:"MultiLineString",coordinates:n.getCoordinates()}}function vle(n,e){return{type:"MultiPoint",coordinates:n.getCoordinates()}}function xle(n,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:n.getCoordinates(t)}}function wle(n,e){return{type:"Point",coordinates:n.getCoordinates()}}function Ele(n,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:n.getCoordinates(t)}}var no=uL;var ay="http://www.w3.org/2001/XMLSchema-instance";function nf(n,e){return _g().createElementNS(n,e)}function xl(n,e){return K9(n,e,[]).join("")}function K9(n,e,t){if(n.nodeType==Node.CDATA_SECTION_NODE||n.nodeType==Node.TEXT_NODE)e?t.push(String(n.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(n.nodeValue);else{let r;for(r=n.firstChild;r;r=r.nextSibling)K9(r,e,t)}return t}function Ga(n){return"documentElement"in n}function za(n){return new DOMParser().parseFromString(n,"application/xml")}function pL(n,e){return(function(t,r){let i=n.call(e??this,t,r);if(i!==void 0){let o=r[r.length-1];zn(o,i)}})}function vs(n,e){return(function(t,r){let i=n.call(e??this,t,r);i!==void 0&&r[r.length-1].push(i)})}function yS(n,e){return(function(t,r){let i=n.call(e??this,t,r);i!==void 0&&(r[r.length-1]=i)})}function Ws(n,e,t){return(function(r,i){let o=n.call(t??this,r,i);if(o!==void 0){let s=i[i.length-1],a=e!==void 0?e:r.localName,l;a in s?l=s[a]:(l=[],s[a]=l),l.push(o)}})}function Oe(n,e,t){return(function(r,i){let o=n.call(t??this,r,i);if(o!==void 0){let s=i[i.length-1],a=e!==void 0?e:r.localName;s[a]=o}})}function ct(n,e){return(function(t,r,i){n.call(e??this,t,r,i),i[i.length-1].node.appendChild(t)})}function gL(n,e){let t,r;return function(i,o,s){if(t===void 0){t={};let a={};a[i.localName]=n,t[i.namespaceURI]=a,r=wl(i.localName)}J9(t,r,o,s)}}function wl(n,e){return(function(t,r,i){let s=r[r.length-1].node,a=n;a===void 0&&(a=i);let l=e!==void 0?e:s.namespaceURI;return nf(l,a)})}var es=wl();function $s(n,e){let t=e.length,r=new Array(t);for(let i=0;i<t;++i)r[i]=n[e[i]];return r}function nt(n,e,t){t=t!==void 0?t:{};let r,i;for(r=0,i=n.length;r<i;++r)t[n[r]]=e;return t}function Fc(n,e,t,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){let o=n[i.namespaceURI];if(o!==void 0){let s=o[i.localName];s!==void 0&&s.call(r,i,t)}}}function Mt(n,e,t,r,i){return r.push(n),Fc(e,t,r,i),r.pop()}function J9(n,e,t,r,i,o){let s=(i!==void 0?i:t).length,a,l;for(let c=0;c<s;++c)a=t[c],a!==void 0&&(l=e.call(o,a,r,i!==void 0?i[c]:void 0),l!==void 0&&n[l.namespaceURI][l.localName].call(o,l,a,r))}function Wr(n,e,t,r,i,o,s){return i.push(n),J9(e,t,r,i,o,s),i.pop()}var fL;function Q9(){return fL===void 0&&typeof XMLSerializer<"u"&&(fL=new XMLSerializer),fL}var dL;function _g(){return dL===void 0&&typeof document<"u"&&(dL=document.implementation.createDocument("","",null)),dL}var mL=class extends kd{constructor(){super(),this.xmlSerializer_=Q9()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){let r=za(e);return this.readFeatureFromDocument(r,t)}return Ga(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){let r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){let r=za(e);return this.readFeaturesFromDocument(r,t)}return Ga(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){let r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&zn(r,this.readFeaturesFromNode(i,t));return r}readFeaturesFromNode(e,t){return Ct()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){let r=za(e);return this.readGeometryFromDocument(r,t)}return Ga(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){let t=za(e);return this.readProjectionFromDocument(t)}return Ga(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){let r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,t){return null}writeFeatures(e,t){let r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){let r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,t){return null}},_S=mL;function rf(n){let e=xl(n,!1);return ble(e)}function ble(n){let e=/^\s*(true|1)|(false|0)\s*$/.exec(n);if(e)return e[1]!==void 0||!1}function L1(n){let e=xl(n,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function ar(n){let e=xl(n,!1);return Sle(e)}function Sle(n){let e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(n);if(e)return parseFloat(e[1])}function ga(n){let e=xl(n,!1);return Cle(e)}function Cle(n){let e=/^\s*(\d+)\s*$/.exec(n);if(e)return parseInt(e[1],10)}function Et(n){return xl(n,!1).trim()}function vg(n,e){mr(n,e?"1":"0")}function Ile(n,e){n.appendChild(_g().createCDATASection(e))}function ez(n,e){let t=new Date(e*1e3),r=t.getUTCFullYear()+"-"+gm(t.getUTCMonth()+1,2)+"-"+gm(t.getUTCDate(),2)+"T"+gm(t.getUTCHours(),2)+":"+gm(t.getUTCMinutes(),2)+":"+gm(t.getUTCSeconds(),2)+"Z";n.appendChild(_g().createTextNode(r))}function Ys(n,e){let t=e.toPrecision();n.appendChild(_g().createTextNode(t))}function k1(n,e){let t=e.toString();n.appendChild(_g().createTextNode(t))}var Tle=/^\s/,Dle=/\s$/,Ale=/(\n|\t|\r|<|&| {2})/;function mr(n,e){typeof e=="string"&&(Tle.test(e)||Dle.test(e)||Ale.test(e))?e.split("]]>").forEach((t,r,i)=>{r<i.length-1&&(t+="]]"),r>0&&(t=">"+t),Ile(n,t)}):n.appendChild(_g().createTextNode(e))}var of=["http://www.google.com/kml/ext/2.2"],jt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Rle="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",tz={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Mle=nt(jt,{ExtendedData:wz,Region:Ez,MultiGeometry:Oe(_z,"geometry"),LineString:Oe(mz,"geometry"),LinearRing:Oe(yz,"geometry"),Point:Oe(vz,"geometry"),Polygon:Oe(xz,"geometry"),Style:Oe(TL),StyleMap:due,address:Oe(Et),description:Oe(Et),name:Oe(Et),open:Oe(rf),phoneNumber:Oe(Et),styleUrl:Oe(hz),visibility:Oe(rf)},nt(of,{MultiTrack:Oe(eue,"geometry"),Track:Oe(gz,"geometry")})),Nle=nt(jt,{ExtendedData:wz,Region:Ez,Link:Cue,address:Oe(Et),description:Oe(Et),name:Oe(Et),open:Oe(rf),phoneNumber:Oe(Et),visibility:Oe(rf)}),Ple=nt(jt,{href:Oe(cz)}),Lle=nt(jt,{Altitude:Oe(ar),Longitude:Oe(ar),Latitude:Oe(ar),Tilt:Oe(ar),AltitudeMode:Oe(Et),Heading:Oe(ar),Roll:Oe(ar)}),az=nt(jt,{LatLonAltBox:_ue,Lod:xue}),kle=nt(jt,["Document","Placemark"]),Ole=nt(jt,{Document:ct(Pue),Placemark:ct(Cz)}),ly,xS=null;var vL,O1,F1,B1,ES,xL=null;var CL,wL=null;var EL,xg=null;var nz=null;var bL=null;function bS(n){return 32/Math.min(n[0],n[1])}function Fle(){ly=[255,255,255,1],xS=new qr({color:ly}),vL=[20,2],O1="pixels",F1="pixels",B1=[64,64],ES="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",xL=new Ed({anchor:vL,anchorOrigin:"bottom-left",anchorXUnits:O1,anchorYUnits:F1,crossOrigin:"anonymous",rotation:0,scale:bS(B1),size:B1,src:ES}),CL="NO_IMAGE",wL=new xi({color:ly,width:1}),EL=new xi({color:[51,51,51,1],width:2}),xg=new Sd({font:"bold 16px Helvetica",fill:xS,stroke:EL,scale:.8}),nz=new ri({fill:xS,image:xL,text:xg,stroke:wL,zIndex:0}),bL=[nz]}var vS;function Ble(n){return n}var SL=class extends _S{constructor(e){super(),e=e||{},bL||Fle(),this.dataProjection=rn("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:bL,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Ble,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){let r=nt(jt,{Document:pL(this.readDocumentOrFolder_,this),Folder:pL(this.readDocumentOrFolder_,this),Placemark:vs(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=Mt([],r,e,t,this);if(i)return i}readPlacemark_(e,t){let r=Mt({geometry:null},Mle,e,t,this);if(!r)return;let i=new eo,o=e.getAttribute("id");o!==null&&i.setId(o);let s=t[0],a=r.geometry;if(a&&Go(a,!1,s),i.setGeometry(a),delete r.geometry,this.extractStyles_){let l=r.Style,c=r.styleUrl,f=Ule(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(f)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,t){let r=e.getAttribute("id");if(r!==null){let i=TL.call(this,e,t);if(i){let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=i}}}readSharedStyleMap_(e,t){let r=e.getAttribute("id");if(r===null)return;let i=dz.call(this,e,t);if(!i)return;let o,s=e.baseURI;(!s||s=="about:blank")&&(s=window.location.href),s?o=new URL("#"+r,s).href:o="#"+r,this.sharedStyles_[o]=i}readFeatureFromNode(e,t){if(!jt.includes(e.namespaceURI))return null;let r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null}readFeaturesFromNode(e,t){if(!jt.includes(e.namespaceURI))return[];let r,i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),r||[];if(i=="Placemark"){let o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return o?[o]:[]}if(i=="kml"){r=[];for(let o=e.firstElementChild;o;o=o.nextElementSibling){let s=this.readFeaturesFromNode(o,t);s&&zn(r,s)}return r}return[]}readName(e){if(e){if(typeof e=="string"){let t=za(e);return this.readNameFromDocument(t)}return Ga(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){let r=this.readNameFromNode(t);if(r)return r}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(jt.includes(t.namespaceURI)&&t.localName=="name")return Et(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){let r=t.localName;if(jt.includes(t.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){let i=this.readNameFromNode(t);if(i)return i}}}readNetworkLinks(e){let t=[];if(typeof e=="string"){let r=za(e);zn(t,this.readNetworkLinksFromDocument(r))}else Ga(e)?zn(t,this.readNetworkLinksFromDocument(e)):zn(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&zn(t,this.readNetworkLinksFromNode(r));return t}readNetworkLinksFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(jt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){let i=Mt({},Nle,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;jt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&zn(t,this.readNetworkLinksFromNode(r))}return t}readRegion(e){let t=[];if(typeof e=="string"){let r=za(e);zn(t,this.readRegionFromDocument(r))}else Ga(e)?zn(t,this.readRegionFromDocument(e)):zn(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&zn(t,this.readRegionFromNode(r));return t}readRegionFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(jt.includes(r.namespaceURI)&&r.localName=="Region"){let i=Mt({},az,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;jt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&zn(t,this.readRegionFromNode(r))}return t}readCamera(e){let t=[];if(typeof e=="string"){let r=za(e);zn(t,this.readCameraFromDocument(r))}else Ga(e)?zn(t,this.readCameraFromDocument(e)):zn(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){let t=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&zn(t,this.readCameraFromNode(r));return t}readCameraFromNode(e){let t=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(jt.includes(r.namespaceURI)&&r.localName==="Camera"){let i=Mt({},Lle,r,[]);t.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){let i=r.localName;jt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&zn(t,this.readCameraFromNode(r))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);let r=nf(jt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",of[0]),r.setAttributeNS(i,"xmlns:xsi",ay),r.setAttributeNS(ay,"xsi:schemaLocation",Rle);let o={node:r},s={};e.length>1?s.Document=e:e.length==1&&(s.Placemark=e[0]);let a=kle[r.namespaceURI],l=$s(s,a);return Wr(o,Ole,es,l,[t],a,this),r}};function jle(n,e){let t=[0,0],r="start",i=n.getImage();if(i){let a=i.getSize();if(a&&a.length==2){let l=i.getScaleArray(),c=i.getAnchor();t[0]=l[0]*(a[0]-c[0]),t[1]=l[1]*(a[1]/2-c[1]),r="left"}}let o=n.getText();return o?(o=o.clone(),o.setFont(o.getFont()||xg.getFont()),o.setScale(o.getScale()||xg.getScale()),o.setFill(o.getFill()||xg.getFill()),o.setStroke(o.getStroke()||EL)):o=xg.clone(),o.setText(e),o.setOffsetX(t[0]),o.setOffsetY(t[1]),o.setTextAlign(r),new ri({image:i,text:o})}function Ule(n,e,t,r,i){return(function(o,s){let a=i,l="",c=[];if(a){let d=o.getGeometry();if(d)if(d instanceof _s)c=d.getGeometriesArrayRecursive().filter(function(y){let p=y.getType();return p==="Point"||p==="MultiPoint"}),a=c.length>0;else{let y=d.getType();a=y==="Point"||y==="MultiPoint"}}a&&(l=o.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(vS||(vS=document.createElement("textarea")),vS.innerHTML=l,l=vS.value));let f=t;if(n?f=n:e&&(f=lz(e,t,r)),a){let d=jle(f[0],l);if(c.length>0){d.setGeometry(new _s(c));let y=new ri({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null});return[d,y].concat(f.slice(1))}return d}return f})}function lz(n,e,t){return Array.isArray(n)?n:typeof n=="string"?lz(t[n],e,t):e}function SS(n){let e=xl(n,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){let r=t[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function uz(n){let e=xl(n,!1),t=[];e=e.replace(/\s*,\s*/g,",");let r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i,i;for(;i=r.exec(e);){let o=parseFloat(i[1]),s=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;t.push(o,s,a),e=e.substr(i[0].length)}if(e==="")return t}function cz(n){let e=xl(n,!1).trim(),t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function hz(n){let e=xl(n,!1).trim().replace(/^(?!.*#)/,"#"),t=n.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Gle(n){let e=n.getAttribute("xunits"),t=n.getAttribute("yunits"),r;return e!=="insetPixels"?t!=="insetPixels"?r="bottom-left":r="top-left":t!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(n.getAttribute("x")),xunits:tz[e],y:parseFloat(n.getAttribute("y")),yunits:tz[t],origin:r}}function fz(n){return ar(n)}var zle=nt(jt,{Pair:fue});function dz(n,e){return Mt(void 0,zle,n,e,this)}var Vle=nt(jt,{Icon:Oe(rue),color:Oe(SS),heading:Oe(ar),hotSpot:Oe(Gle),scale:Oe(fz)});function Hle(n,e){let t=Mt({},Vle,n,e);if(!t)return;let r=e[e.length-1],i="Icon"in t?t.Icon:{},o=!("Icon"in t)||Object.keys(i).length>0,s,a=i.href;a?s=a:o&&(s=ES);let l,c,f,d="bottom-left",y=t.hotSpot;y?(l=[y.x,y.y],c=y.xunits,f=y.yunits,d=y.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(s.includes("pushpin")?(l=vL,c=O1,f=F1):s.includes("arrow-reverse")?(l=[54,42],c=O1,f=F1):s.includes("paddle")&&(l=[32,1],c=O1,f=F1));let p,_=i.x,w=i.y;_!==void 0&&w!==void 0&&(p=[_,w]);let b,S=i.w,T=i.h;S!==void 0&&T!==void 0&&(b=[S,T]);let A,N=t.heading;N!==void 0&&(A=mw(N));let O=t.scale,W=t.color;if(o){s==ES&&(b=B1);let X=new Ed({anchor:l,anchorOrigin:d,anchorXUnits:c,anchorYUnits:f,crossOrigin:this.crossOrigin_,offset:p,offsetOrigin:"bottom-left",rotation:A,scale:O,size:b,src:this.iconUrlFunction_(s),color:W}),Y=X.getScaleArray()[0],$=X.getSize();if($===null){let V=X.getImageState();if(V===wt.IDLE||V===wt.LOADING){let B=function(){let v=X.getImageState();if(!(v===wt.IDLE||v===wt.LOADING)){let I=X.getSize();if(I&&I.length==2){let M=bS(I);X.setScale(Y*M)}X.unlistenImageChange(B)}};X.listenImageChange(B),V===wt.IDLE&&X.load()}}else if($.length==2){let V=bS($);X.setScale(Y*V)}r.imageStyle=X}else r.imageStyle=CL}var qle=nt(jt,{color:Oe(SS),scale:Oe(fz)});function Wle(n,e){let t=Mt({},qle,n,e);if(!t)return;let r=e[e.length-1],i=new Sd({fill:new qr({color:"color"in t?t.color:ly}),scale:t.scale});r.textStyle=i}var $le=nt(jt,{color:Oe(SS),width:Oe(ar)});function Yle(n,e){let t=Mt({},$le,n,e);if(!t)return;let r=e[e.length-1],i=new xi({color:"color"in t?t.color:ly,width:"width"in t?t.width:1});r.strokeStyle=i}var Xle=nt(jt,{color:Oe(SS),fill:Oe(rf),outline:Oe(rf)});function Zle(n,e){let t=Mt({},Xle,n,e);if(!t)return;let r=e[e.length-1],i=new qr({color:"color"in t?t.color:ly});r.fillStyle=i;let o=t.fill;o!==void 0&&(r.fill=o);let s=t.outline;s!==void 0&&(r.outline=s)}var Kle=nt(jt,{coordinates:yS(uz)});function pz(n,e){return Mt(null,Kle,n,e)}function Jle(n,e){let r=e[e.length-1].coordinates,i=xl(n,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(s){let a=parseFloat(s[1]),l=parseFloat(s[2]),c=parseFloat(s[3]);r.push([a,l,c])}else r.push([])}var Qle=nt(of,{Track:vs(gz)});function eue(n,e){let t=Mt([],Qle,n,e);if(t)return new qs(t)}var tue=nt(jt,{when:Iue},nt(of,{coord:Jle}));function gz(n,e){let t=Mt({coordinates:[],whens:[]},tue,n,e);if(!t)return;let r=[],i=t.coordinates,o=t.whens;for(let s=0,a=Math.min(i.length,o.length);s<a;++s)i[s].length==3&&r.push(i[s][0],i[s][1],i[s][2],o[s]);return new to(r,"XYZM")}var nue=nt(jt,{href:Oe(cz)},nt(of,{x:Oe(ar),y:Oe(ar),w:Oe(ar),h:Oe(ar)}));function rue(n,e){let t=Mt({},nue,n,e);return t||null}var iue=nt(jt,{coordinates:yS(uz)});function IL(n,e){return Mt(null,iue,n,e)}var CS=nt(jt,{extrude:Oe(rf),tessellate:Oe(rf),altitudeMode:Oe(Et)});function mz(n,e){let t=Mt({},CS,n,e),r=IL(n,e);if(r){let i=new to(r,"XYZ");return i.setProperties(t,!0),i}}function yz(n,e){let t=Mt({},CS,n,e),r=IL(n,e);if(r){let i=new jo(r,"XYZ",[r.length]);return i.setProperties(t,!0),i}}var oue=nt(jt,{LineString:vs(mz),LinearRing:vs(yz),MultiGeometry:vs(_z),Point:vs(vz),Polygon:vs(xz)});function _z(n,e){let t=Mt([],oue,n,e);if(!t)return null;if(t.length===0)return new _s(t);let r,i=!0,o=t[0].getType(),s;for(let a=1,l=t.length;a<l;++a)if(s=t[a],s.getType()!=o){i=!1;break}if(i){let a,l;if(o=="Point"){let c=t[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let f=1,d=t.length;f<d;++f)s=t[f],zn(l,s.getFlatCoordinates());r=new ml(l,a),yL(r,t)}else if(o=="LineString")r=new qs(t),yL(r,t);else if(o=="Polygon")r=new yl(t),yL(r,t);else if(o=="GeometryCollection"||o.startsWith("Multi"))r=new _s(t);else throw new Error("Unknown geometry type found")}else r=new _s(t);return r}function vz(n,e){let t=Mt({},CS,n,e),r=IL(n,e);if(r){let i=new _o(r,"XYZ");return i.setProperties(t,!0),i}}var sue=nt(jt,{innerBoundaryIs:Eue,outerBoundaryIs:Sue});function xz(n,e){let t=Mt({},CS,n,e),r=Mt([null],sue,n,e);if(r&&r[0]){let i=r[0],o=[i.length];for(let a=1,l=r.length;a<l;++a)zn(i,r[a]),o.push(i.length);let s=new jo(i,"XYZ",o);return s.setProperties(t,!0),s}}var aue=nt(jt,{IconStyle:Hle,LabelStyle:Wle,LineStyle:Yle,PolyStyle:Zle});function TL(n,e){let t=Mt({},aue,n,e,this);if(!t)return null;let r="fillStyle"in t?t.fillStyle:xS,i=t.fill;i!==void 0&&!i&&(r=null);let o;"imageStyle"in t?t.imageStyle!=CL&&(o=t.imageStyle):o=xL;let s="textStyle"in t?t.textStyle:xg,a="strokeStyle"in t?t.strokeStyle:wL,l=t.outline;return l!==void 0&&!l?[new ri({geometry:function(c){let f=c.getGeometry(),d=f.getType();if(d==="GeometryCollection"){let y=f;return new _s(y.getGeometriesArrayRecursive().filter(function(p){let _=p.getType();return _!=="Polygon"&&_!=="MultiPolygon"}))}if(d!=="Polygon"&&d!=="MultiPolygon")return f},fill:r,image:o,stroke:a,text:s,zIndex:void 0}),new ri({geometry:function(c){let f=c.getGeometry(),d=f.getType();if(d==="GeometryCollection"){let y=f;return new _s(y.getGeometriesArrayRecursive().filter(function(p){let _=p.getType();return _==="Polygon"||_==="MultiPolygon"}))}if(d==="Polygon"||d==="MultiPolygon")return f},fill:r,stroke:null,zIndex:void 0})]:[new ri({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]}function yL(n,e){let t=e.length,r=new Array(e.length),i=new Array(e.length),o=new Array(e.length),s,a,l;s=!1,a=!1,l=!1;for(let c=0;c<t;++c){let f=e[c];r[c]=f.get("extrude"),i[c]=f.get("tessellate"),o[c]=f.get("altitudeMode"),s=s||r[c]!==void 0,a=a||i[c]!==void 0,l=l||o[c]}s&&n.set("extrude",r),a&&n.set("tessellate",i),l&&n.set("altitudeMode",o)}var lue=nt(jt,{displayName:Oe(Et),value:Oe(Et)});function uue(n,e){let t=n.getAttribute("name");Fc(lue,n,e);let r=e[e.length-1];t&&r.displayName?r[t]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:t!==null?r[t]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}var cue=nt(jt,{Data:uue,SchemaData:gue});function wz(n,e){Fc(cue,n,e)}function Ez(n,e){Fc(az,n,e)}var hue=nt(jt,{Style:Oe(TL),key:Oe(Et),styleUrl:Oe(hz)});function fue(n,e){let t=Mt({},hue,n,e,this);if(!t)return;let r=t.key;if(r&&r=="normal"){let i=t.styleUrl;i&&(e[e.length-1]=i);let o=t.Style;o&&(e[e.length-1]=o)}}function due(n,e){let t=dz.call(this,n,e);if(!t)return;let r=e[e.length-1];if(Array.isArray(t))r.Style=t;else if(typeof t=="string")r.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}var pue=nt(jt,{SimpleData:mue});function gue(n,e){Fc(pue,n,e)}function mue(n,e){let t=n.getAttribute("name");if(t!==null){let r=Et(n),i=e[e.length-1];i[t]=r}}var yue=nt(jt,{altitudeMode:Oe(Et),minAltitude:Oe(ar),maxAltitude:Oe(ar),north:Oe(ar),south:Oe(ar),east:Oe(ar),west:Oe(ar)});function _ue(n,e){let t=Mt({},yue,n,e);if(!t)return;let r=e[e.length-1],i=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];r.extent=i,r.altitudeMode=t.altitudeMode,r.minAltitude=parseFloat(t.minAltitude),r.maxAltitude=parseFloat(t.maxAltitude)}var vue=nt(jt,{minLodPixels:Oe(ar),maxLodPixels:Oe(ar),minFadeExtent:Oe(ar),maxFadeExtent:Oe(ar)});function xue(n,e){let t=Mt({},vue,n,e);if(!t)return;let r=e[e.length-1];r.minLodPixels=parseFloat(t.minLodPixels),r.maxLodPixels=parseFloat(t.maxLodPixels),r.minFadeExtent=parseFloat(t.minFadeExtent),r.maxFadeExtent=parseFloat(t.maxFadeExtent)}var wue=nt(jt,{LinearRing:vs(pz)});function Eue(n,e){let t=Mt([],wue,n,e);t.length>0&&e[e.length-1].push(...t)}var bue=nt(jt,{LinearRing:yS(pz)});function Sue(n,e){let t=Mt(void 0,bue,n,e);if(t){let r=e[e.length-1];r[0]=t}}function Cue(n,e){Fc(Ple,n,e)}function Iue(n,e){let r=e[e.length-1].whens,i=xl(n,!1),o=Date.parse(i);r.push(isNaN(o)?0:o)}function IS(n,e){let t=Vs(e),i=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let o=0;o<4;++o){let s=Math.floor(i[o]).toString(16);i[o]=s.length==1?"0"+s:s}mr(n,i.join(""))}function Tue(n,e,t){let r=t[t.length-1],i=r.layout,o=r.stride,s;if(i=="XY"||i=="XYM")s=2;else if(i=="XYZ"||i=="XYZM")s=3;else throw new Error("Invalid geometry layout");let a=e.length,l="";if(a>0){l+=e[0];for(let c=1;c<s;++c)l+=","+e[c];for(let c=o;c<a;c+=o){l+=" "+e[c];for(let f=1;f<s;++f)l+=","+e[c+f]}}mr(n,l)}var wS=nt(jt,{Data:ct(Due),value:ct(Rue),displayName:ct(Aue)});function Due(n,e,t){n.setAttribute("name",e.name);let r={node:n},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&Wr(r,wS,es,[i.displayName],t,["displayName"]),i!==null&&i.value&&Wr(r,wS,es,[i.value],t,["value"])):Wr(r,wS,es,[i],t,["value"])}function Aue(n,e){mr(n,e)}function Rue(n,e){mr(n,e)}var Mue=nt(jt,{Placemark:ct(Cz)}),Nue=function(n,e,t){let r=e[e.length-1].node;return nf(r.namespaceURI,"Placemark")};function Pue(n,e,t){Wr({node:n},Mue,Nue,e,t,void 0,this)}var Lue=wl("Data");function kue(n,e,t){let r={node:n},i=e.names,o=e.values,s=i.length;for(let a=0;a<s;a++)Wr(r,wS,Lue,[{name:i[a],value:o[a]}],t)}var rz=nt(jt,["href"],nt(of,["x","y","w","h"])),iz=nt(jt,{href:ct(mr)},nt(of,{x:ct(Ys),y:ct(Ys),w:ct(Ys),h:ct(Ys)})),Oue=function(n,e,t){return nf(of[0],"gx:"+t)};function Fue(n,e,t){let r={node:n},i=t[t.length-1].node,o=rz[i.namespaceURI],s=$s(e,o);Wr(r,iz,es,s,t,o),o=rz[of[0]],s=$s(e,o),Wr(r,iz,Oue,s,t,o)}var Bue=nt(jt,["scale","heading","Icon","color","hotSpot"]),jue=nt(jt,{Icon:ct(Fue),color:ct(IS),heading:ct(Ys),hotSpot:ct(fce),scale:ct(Tz)});function Uue(n,e,t){let r={node:n},i={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];let b=e.getAnchor(),S=e.getOrigin();if(S&&a&&S[0]!==0&&S[1]!==s[1]&&(l.x=S[0],l.y=a[1]-(S[1]+s[1])),b&&(b[0]!==s[0]/2||b[1]!==s[1]/2)){let T={x:b[0],xunits:"pixels",y:s[1]-b[1],yunits:"pixels"};i.hotSpot=T}}i.Icon=l;let c=e.getScaleArray()[0],f=s;if(f===null&&(f=B1),f.length==2){let b=bS(f);c=c/b}c!==1&&(i.scale=c);let d=e.getRotation();d!==0&&(i.heading=d);let y=e.getColor();y&&(i.color=y);let p=t[t.length-1].node,_=Bue[p.namespaceURI],w=$s(i,_);Wr(r,jue,es,w,t,_)}var Gue=nt(jt,["color","scale"]),zue=nt(jt,{color:ct(IS),scale:ct(Tz)});function Vue(n,e,t){let r={node:n},i={},o=e.getFill();o&&(i.color=o.getColor());let s=e.getScale();s&&s!==1&&(i.scale=s);let a=t[t.length-1].node,l=Gue[a.namespaceURI],c=$s(i,l);Wr(r,zue,es,c,t,l)}var Hue=nt(jt,["color","width"]),que=nt(jt,{color:ct(IS),width:ct(Ys)});function Wue(n,e,t){let r={node:n},i={color:e.getColor(),width:Number(e.getWidth())||1},o=t[t.length-1].node,s=Hue[o.namespaceURI],a=$s(i,s);Wr(r,que,es,a,t,s)}var $ue={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},bz=function(n,e,t){if(n){let r=e[e.length-1].node;return nf(r.namespaceURI,$ue[n.getType()])}},Yue=wl("Point"),Xue=wl("LineString"),Zue=wl("LinearRing"),Kue=wl("Polygon"),Jue=nt(jt,{LineString:ct(uy),Point:ct(uy),Polygon:ct(Iz),GeometryCollection:ct(Sz)});function Sz(n,e,t){let r={node:n},i=e.getType(),o=[],s;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){let l=a.getType();if(l==="MultiPoint")o=o.concat(a.getPoints());else if(l==="MultiLineString")o=o.concat(a.getLineStrings());else if(l==="MultiPolygon")o=o.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")o.push(a);else throw new Error("Unknown geometry type")}),s=bz;else if(i==="MultiPoint")o=e.getPoints(),s=Yue;else if(i==="MultiLineString")o=e.getLineStrings(),s=Xue;else if(i==="MultiPolygon")o=e.getPolygons(),s=Kue;else throw new Error("Unknown geometry type");Wr(r,Jue,s,o,t)}var Que=nt(jt,{LinearRing:ct(uy)});function oz(n,e,t){Wr({node:n},Que,Zue,[e],t)}var _L=nt(jt,{ExtendedData:ct(kue),MultiGeometry:ct(Sz),LineString:ct(uy),LinearRing:ct(uy),Point:ct(uy),Polygon:ct(Iz),Style:ct(hce),address:ct(mr),description:ct(mr),name:ct(mr),open:ct(vg),phoneNumber:ct(mr),styleUrl:ct(mr),visibility:ct(vg)}),ece=nt(jt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),tce=wl("ExtendedData");function Cz(n,e,t){let r={node:n};e.getId()&&n.setAttribute("id",e.getId());let i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;let s=Object.keys(i||{}).sort().filter(function(p){return!o[p]}),a=e.getStyleFunction();if(a){let p=a(e,0);if(p){let _=Array.isArray(p)?p:[p],w=_;if(e.getGeometry()&&(w=_.filter(function(b){let S=b.getGeometryFunction()(e);if(S){let T=S.getType();return T==="GeometryCollection"?S.getGeometriesArrayRecursive().filter(function(A){let N=A.getType();return N==="Point"||N==="MultiPoint"}).length:T==="Point"||T==="MultiPoint"}})),this.writeStyles_){let b=_,S=_;e.getGeometry()&&(b=_.filter(function(T){let A=T.getGeometryFunction()(e);if(A){let N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(O){let W=O.getType();return W==="LineString"||W==="MultiLineString"}).length:N==="LineString"||N==="MultiLineString"}}),S=_.filter(function(T){let A=T.getGeometryFunction()(e);if(A){let N=A.getType();return N==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(O){let W=O.getType();return W==="Polygon"||W==="MultiPolygon"}).length:N==="Polygon"||N==="MultiPolygon"}})),i.Style={pointStyles:w,lineStyles:b,polyStyles:S}}if(w.length&&i.name===void 0){let b=w[0].getText();b&&(i.name=b.getText())}}}let l=t[t.length-1].node,c=ece[l.namespaceURI],f=$s(i,c);if(Wr(r,_L,es,f,t,c),s.length>0){let p=$s(i,s);Wr(r,_L,tce,[{names:s,values:p}],t)}let d=t[0],y=e.getGeometry();y&&(y=Go(y,!0,d)),Wr(r,_L,bz,[y],t)}var nce=nt(jt,["extrude","tessellate","altitudeMode","coordinates"]),rce=nt(jt,{extrude:ct(vg),tessellate:ct(vg),altitudeMode:ct(mr),coordinates:ct(Tue)});function uy(n,e,t){let r=e.getFlatCoordinates(),i={node:n};i.layout=e.getLayout(),i.stride=e.getStride();let o=e.getProperties();o.coordinates=r;let s=t[t.length-1].node,a=nce[s.namespaceURI],l=$s(o,a);Wr(i,rce,es,l,t,a)}var ice=nt(jt,["color","fill","outline"]),sz=nt(jt,{outerBoundaryIs:ct(oz),innerBoundaryIs:ct(oz)}),oce=wl("innerBoundaryIs"),sce=wl("outerBoundaryIs");function Iz(n,e,t){let r=e.getLinearRings(),i=r.shift(),o={node:n};Wr(o,sz,oce,r,t),Wr(o,sz,sce,[i],t)}var ace=nt(jt,{color:ct(IS),fill:ct(vg),outline:ct(vg)});function lce(n,e,t){let r={node:n},i=e.getFill(),o=e.getStroke(),s={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:o?void 0:!1},a=t[t.length-1].node,l=ice[a.namespaceURI],c=$s(s,l);Wr(r,ace,es,c,t,l)}function Tz(n,e){Ys(n,Math.round(e*1e6)/1e6)}var uce=nt(jt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),cce=nt(jt,{IconStyle:ct(Uue),LabelStyle:ct(Vue),LineStyle:ct(Wue),PolyStyle:ct(lce)});function hce(n,e,t){let r={node:n},i={};if(e.pointStyles.length){let l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);let c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){let l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){let l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}let o=t[t.length-1].node,s=uce[o.namespaceURI],a=$s(i,s);Wr(r,cce,es,a,t,s)}function fce(n,e){n.setAttribute("x",String(e.x)),n.setAttribute("y",String(e.y)),n.setAttribute("xunits",e.xunits),n.setAttribute("yunits",e.yunits)}var TS=SL;var DS=class{type="kml";import(e){return He(this,null,function*(){let t=yield e.text(),r=new TS({extractStyles:!1}).readFeatures(t);return{geojson:new no().writeFeaturesObject(r),crs:"EPSG:4326"}})}};function Dz(n){n("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),n("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),n("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)n("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),n("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");n("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),n.WGS84=n["EPSG:4326"],n["EPSG:3785"]=n["EPSG:3857"],n.GOOGLE=n["EPSG:3857"],n["EPSG:900913"]=n["EPSG:3857"],n["EPSG:102113"]=n["EPSG:3857"]}var qu=1,Wu=2,sf=3,Az=4,j1=5,DL=6378137,Rz=6356752314e-3,AL=.0066943799901413165,wg=484813681109536e-20,Ye=Math.PI/2,Mz=.16666666666666666,Nz=.04722222222222222,Pz=.022156084656084655,ot=1e-10,Zr=.017453292519943295,zo=57.29577951308232,cr=Math.PI/4,Od=Math.PI*2,Mi=3.14159265359;var Va={};Va.greenwich=0;Va.lisbon=-9.131906111111;Va.paris=2.337229166667;Va.bogota=-74.080916666667;Va.madrid=-3.687938888889;Va.rome=12.452333333333;Va.bern=7.439583333333;Va.jakarta=106.807719444444;Va.ferro=-17.666666666667;Va.brussels=4.367975;Va.stockholm=18.058277777778;Va.athens=23.7163375;Va.oslo=10.722916666667;var Lz=Va;var kz={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Oz=/[\s_\-\/\(\)]/g;function El(n,e){if(n[e])return n[e];for(var t=Object.keys(n),r=e.toLowerCase().replace(Oz,""),i=-1,o,s;++i<t.length;)if(o=t[i],s=o.toLowerCase().replace(Oz,""),s===r)return n[o]}function U1(n){var e={},t=n.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,o,s={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Zr},lat_1:function(a){e.lat1=a*Zr},lat_2:function(a){e.lat2=a*Zr},lat_ts:function(a){e.lat_ts=a*Zr},lon_0:function(a){e.long0=a*Zr},lon_1:function(a){e.long1=a*Zr},lon_2:function(a){e.long2=a*Zr},alpha:function(a){e.alpha=parseFloat(a)*Zr},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*Zr},lonc:function(a){e.longc=a*Zr},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=El(kz,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Zr},pm:function(a){var l=El(Lz,a);e.from_greenwich=(l||parseFloat(a))*Zr},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in t)i=t[r],r in s?(o=s[r],typeof o=="function"?o(i):e[o]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=n,e}var RL=class{static getId(e){let t=e.find(r=>Array.isArray(r)&&r[0]==="ID");return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(e,t="unit"){if(!e||e.length<3)return{type:t,name:"unknown",conversion_factor:null};let r=e[1],i=parseFloat(e[2])||null,o=e.find(a=>Array.isArray(a)&&a[0]==="ID"),s=o?{authority:o[1],code:parseInt(o[2],10)}:null;return{type:t,name:r,conversion_factor:i,id:s}}static convertAxis(e){let t=e[1]||"Unknown",r,i=t.match(/^\((.)\)$/);if(i){let c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";let o=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),s=o?parseInt(o[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:t,direction:r,unit:l,order:s}}static extractAxes(e){return e.filter(t=>Array.isArray(t)&&t[0]==="AXIS").map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(e,t={}){switch(e[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=e[1],t.base_crs=e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="BASEGEOGCRS")):null,t.conversion=e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="CONVERSION")):null;let r=e.find(p=>Array.isArray(p)&&p[0]==="CS");r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(e)});let i=e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT");if(i){let p=this.convertUnit(i);t.coordinate_system.unit=p}t.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=e[1];let o=e.find(p=>Array.isArray(p)&&(p[0]==="DATUM"||p[0]==="ENSEMBLE"));if(o){let p=this.convert(o);o[0]==="ENSEMBLE"?t.datum_ensemble=p:t.datum=p;let _=e.find(w=>Array.isArray(w)&&w[0]==="PRIMEM");_&&_[1]!=="Greenwich"&&(p.prime_meridian={name:_[1],longitude:parseFloat(_[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},t.id=this.getId(e);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=e[1],t.ellipsoid=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=e[1],t.members=e.filter(p=>Array.isArray(p)&&p[0]==="MEMBER").map(p=>({type:"DatumEnsembleMember",name:p[1],id:this.getId(p)}));let s=e.find(p=>Array.isArray(p)&&p[0]==="ENSEMBLEACCURACY");s&&(t.accuracy=parseFloat(s[1]));let a=e.find(p=>Array.isArray(p)&&p[0]==="ELLIPSOID");a&&(t.ellipsoid=this.convert(a)),t.id=this.getId(e);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=e[1],t.semi_major_axis=parseFloat(e[2]),t.inverse_flattening=parseFloat(e[3]);let l=e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="LENGTHUNIT"),t):null;break;case"CONVERSION":t.type="Conversion",t.name=e[1],t.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,t.parameters=e.filter(p=>Array.isArray(p)&&p[0]==="PARAMETER").map(p=>this.convert(p));break;case"METHOD":t.type="Method",t.name=e[1],t.id=this.getId(e);break;case"PARAMETER":t.type="Parameter",t.name=e[1],t.value=parseFloat(e[2]),t.unit=this.convertUnit(e.find(p=>Array.isArray(p)&&(p[0]==="LENGTHUNIT"||p[0]==="ANGLEUNIT"||p[0]==="SCALEUNIT"))),t.id=this.getId(e);break;case"BOUNDCRS":t.type="BoundCRS";let c=e.find(p=>Array.isArray(p)&&p[0]==="SOURCECRS");if(c){let p=c.find(_=>Array.isArray(_));t.source_crs=p?this.convert(p):null}let f=e.find(p=>Array.isArray(p)&&p[0]==="TARGETCRS");if(f){let p=f.find(_=>Array.isArray(_));t.target_crs=p?this.convert(p):null}let d=e.find(p=>Array.isArray(p)&&p[0]==="ABRIDGEDTRANSFORMATION");d?t.transformation=this.convert(d):t.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=e[1],t.method=e.find(p=>Array.isArray(p)&&p[0]==="METHOD")?this.convert(e.find(p=>Array.isArray(p)&&p[0]==="METHOD")):null,t.parameters=e.filter(p=>Array.isArray(p)&&(p[0]==="PARAMETER"||p[0]==="PARAMETERFILE")).map(p=>{if(p[0]==="PARAMETER")return this.convert(p);if(p[0]==="PARAMETERFILE")return{name:p[1],value:p[2],id:{authority:"EPSG",code:8656}}}),t.parameters.length===7){let p=t.parameters[6];p.name==="Scale difference"&&(p.value=Math.round((p.value-1)*1e12)/1e6)}t.id=this.getId(e);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":let y=this.convertUnit(e,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(p=>{p.unit||(p.unit=y)}),y.conversion_factor&&y.conversion_factor!==1&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:y});break;default:t.keyword=e[0];break}return t}},AS=RL;var ML=class extends AS{static convert(e,t={}){return super.convert(e,t),t.coordinate_system&&t.coordinate_system.subtype==="Cartesian"&&delete t.coordinate_system,t.usage&&delete t.usage,t}},Fz=ML;var NL=class extends AS{static convert(e,t={}){super.convert(e,t);let r=e.find(o=>Array.isArray(o)&&o[0]==="CS");r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});let i=e.find(o=>Array.isArray(o)&&o[0]==="USAGE");if(i){let o=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),s=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");t.usage={},o&&(t.usage.scope=o[1]),s&&(t.usage.area=s[1]),a&&(t.usage.bbox=a.slice(1))}return t}},Bz=NL;function dce(n){return n.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(n.find(e=>Array.isArray(e)&&e[0]==="CS")||n[0]==="BOUNDCRS"||n[0]==="PROJCRS"||n[0]==="GEOGCRS","2015")}function jz(n){return(dce(n)==="2019"?Bz:Fz).convert(n)}function Uz(n){let e=n.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var Gz=yce,G1=1,zz=2,Vz=3,RS=4,Hz=5,PL=-1,pce=/\s/,gce=/[A-Za-z]/,mce=/[A-Za-z84_]/,MS=/[,\]]/,qz=/[\d\.E\-\+]/;function af(n){if(typeof n!="string")throw new Error("not a string");this.text=n.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=G1}af.prototype.readCharicter=function(){var n=this.text[this.place++];if(this.state!==RS)for(;pce.test(n);){if(this.place>=this.text.length)return;n=this.text[this.place++]}switch(this.state){case G1:return this.neutral(n);case zz:return this.keyword(n);case RS:return this.quoted(n);case Hz:return this.afterquote(n);case Vz:return this.number(n);case PL:return}};af.prototype.afterquote=function(n){if(n==='"'){this.word+='"',this.state=RS;return}if(MS.test(n)){this.word=this.word.trim(),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in afterquote yet, index '+this.place)};af.prototype.afterItem=function(n){if(n===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=G1;return}if(n==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=G1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=PL);return}};af.prototype.number=function(n){if(qz.test(n)){this.word+=n;return}if(MS.test(n)){this.word=parseFloat(this.word),this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in number yet, index '+this.place)};af.prototype.quoted=function(n){if(n==='"'){this.state=Hz;return}this.word+=n};af.prototype.keyword=function(n){if(mce.test(n)){this.word+=n;return}if(n==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=G1;return}if(MS.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in keyword yet, index '+this.place)};af.prototype.neutral=function(n){if(gce.test(n)){this.word=n,this.state=zz;return}if(n==='"'){this.word="",this.state=RS;return}if(qz.test(n)){this.word=n,this.state=Vz;return}if(MS.test(n)){this.afterItem(n);return}throw new Error(`havn't handled "`+n+'" in neutral yet, index '+this.place)};af.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===PL)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function yce(n){var e=new af(n);return e.output()}function LL(n,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var r=e?{}:n,i=t.reduce(function(o,s){return Eg(s,o),o},r);e&&(n[e]=i)}function Eg(n,e){if(!Array.isArray(n)){e[n]=!0;return}var t=n.shift();if(t==="PARAMETER"&&(t=n.shift()),n.length===1){if(Array.isArray(n[0])){e[t]={},Eg(n[0],e[t]);return}e[t]=n[0];return}if(!n.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=n;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(n);return}Array.isArray(t)||(e[t]={});var r;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:n[0].toLowerCase(),convert:n[1]},n.length===3&&Eg(n[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:n[0],a:n[1],rf:n[2]},n.length===4&&Eg(n[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":n[0]=["name",n[0]],LL(e,t,n);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":n[0]=["name",n[0]],LL(e,t,n),e[t].type=t;return;default:for(r=-1;++r<n.length;)if(!Array.isArray(n[r]))return Eg(n,e[t]);return LL(e,t,n)}}var _ce=.017453292519943295;function su(n){return n*_ce}function NS(n){let e=(n.projName||"").toLowerCase().replace(/_/g," ");!n.long0&&n.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(n.long0=n.longc),!n.lat_ts&&n.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(n.lat0=su(n.lat1>0?90:-90),n.lat_ts=n.lat1,delete n.lat1):!n.lat_ts&&n.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(n.lat_ts=n.lat0,n.lat0=su(n.lat0>0?90:-90),delete n.lat1)}function Wz(n){let e={units:null,to_meter:void 0};return typeof n=="string"?(e.units=n.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):n&&n.name&&(e.units=n.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=n.conversion_factor),e}function $z(n){return typeof n=="object"?n.value*n.unit.conversion_factor:n}function Yz(n,e){n.ellipsoid.radius?(e.a=n.ellipsoid.radius,e.rf=0):(e.a=$z(n.ellipsoid.semi_major_axis),n.ellipsoid.inverse_flattening!==void 0?e.rf=n.ellipsoid.inverse_flattening:n.ellipsoid.semi_major_axis!==void 0&&n.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-$z(n.ellipsoid.semi_minor_axis))))}function z1(n,e={}){return!n||typeof n!="object"?n:n.type==="BoundCRS"?(z1(n.source_crs,e),n.transformation&&(n.transformation.method&&n.transformation.method.name==="NTv2"?e.nadgrids=n.transformation.parameters[0].value:e.datum_params=n.transformation.parameters.map(t=>t.value)),e):(Object.keys(n).forEach(t=>{let r=n[t];if(r!==null)switch(t){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&n.conversion&&n.conversion.method&&(e.projName=n.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Yz(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Yz(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{let o=i.direction;if(o==="east")return"e";if(o==="north")return"n";if(o==="west")return"w";if(o==="south")return"s";throw new Error(`Unknown axis direction: ${o}`)}).join("")+"u",r.unit){let{units:i,to_meter:o}=Wz(r.unit);e.units=i,e.to_meter=o}else if(r.axis[0]&&r.axis[0].unit){let{units:i,to_meter:o}=Wz(r.axis[0].unit);e.units=i,e.to_meter=o}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{let o=i.name.toLowerCase().replace(/\s+/g,"_"),s=i.value;i.unit&&i.unit.conversion_factor?e[o]=s*i.unit.conversion_factor:i.unit==="degree"?e[o]=s*Math.PI/180:e[o]=s});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":z1(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break;default:break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),NS(e),e)}var vce=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function xce(n,e){var t=e[0],r=e[1];!(t in n)&&r in n&&(n[t]=n[r],e.length===3&&(n[t]=e[2](n[t])))}function Xz(n){for(var e=Object.keys(n),t=0,r=e.length;t<r;++t){var i=e[t];vce.indexOf(i)!==-1&&wce(n[i]),typeof n[i]=="object"&&Xz(n[i])}}function wce(n){if(n.AUTHORITY){var e=Object.keys(n.AUTHORITY)[0];e&&e in n.AUTHORITY&&(n.title=e+":"+n.AUTHORITY[e])}if(n.type==="GEOGCS"?n.projName="longlat":n.type==="LOCAL_CS"?(n.projName="identity",n.local=!0):typeof n.PROJECTION=="object"?n.projName=Object.keys(n.PROJECTION)[0]:n.projName=n.PROJECTION,n.AXIS){for(var t="",r=0,i=n.AXIS.length;r<i;++r){var o=[n.AXIS[r][0].toLowerCase(),n.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?t+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?t+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?t+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(n.axis=t)}n.UNIT&&(n.units=n.UNIT.name.toLowerCase(),n.units==="metre"&&(n.units="meter"),n.UNIT.convert&&(n.type==="GEOGCS"?n.DATUM&&n.DATUM.SPHEROID&&(n.to_meter=n.UNIT.convert*n.DATUM.SPHEROID.a):n.to_meter=n.UNIT.convert));var s=n.GEOGCS;n.type==="GEOGCS"&&(s=n),s&&(s.DATUM?n.datumCode=s.DATUM.name.toLowerCase():n.datumCode=s.name.toLowerCase(),n.datumCode.slice(0,2)==="d_"&&(n.datumCode=n.datumCode.slice(2)),n.datumCode==="new_zealand_1949"&&(n.datumCode="nzgd49"),(n.datumCode==="wgs_1984"||n.datumCode==="world_geodetic_system_1984")&&(n.PROJECTION==="Mercator_Auxiliary_Sphere"&&(n.sphere=!0),n.datumCode="wgs84"),n.datumCode==="belge_1972"&&(n.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(n.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),n.ellps.toLowerCase().slice(0,13)==="international"&&(n.ellps="intl"),n.a=s.DATUM.SPHEROID.a,n.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(n.datum_params=s.DATUM.TOWGS84),~n.datumCode.indexOf("osgb_1936")&&(n.datumCode="osgb36"),~n.datumCode.indexOf("osni_1952")&&(n.datumCode="osni52"),(~n.datumCode.indexOf("tm65")||~n.datumCode.indexOf("geodetic_datum_of_1965"))&&(n.datumCode="ire65"),n.datumCode==="ch1903+"&&(n.datumCode="ch1903"),~n.datumCode.indexOf("israel")&&(n.datumCode="isr93")),n.b&&!isFinite(n.b)&&(n.b=n.a),n.rectified_grid_angle&&(n.rectified_grid_angle=su(n.rectified_grid_angle));function a(f){var d=n.to_meter||1;return f*d}var l=function(f){return xce(n,f)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",su],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",su],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",su],["lat0","latitude_of_origin",su],["lat0","standard_parallel_1",su],["lat1","standard_parallel_1",su],["lat2","standard_parallel_2",su],["azimuth","Azimuth"],["alpha","azimuth",su],["srsCode","name"]];c.forEach(l),NS(n)}function cy(n){if(typeof n=="object")return z1(n);let e=Uz(n);var t=Gz(n);if(e==="WKT2"){let o=jz(t);return z1(o)}var r=t[0],i={};return Eg(t,i),Xz(i),i[r]}function Ha(n){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Ha[n]=U1(arguments[1]):Ha[n]=cy(arguments[1]):t&&typeof t=="object"&&!("projName"in t)?Ha[n]=cy(arguments[1]):(Ha[n]=t,t||delete Ha[n])}else if(arguments.length===1){if(Array.isArray(n))return n.map(function(r){return Array.isArray(r)?Ha.apply(e,r):Ha(r)});if(typeof n=="string"){if(n in Ha)return Ha[n]}else"EPSG"in n?Ha["EPSG:"+n.EPSG]=n:"ESRI"in n?Ha["ESRI:"+n.ESRI]=n:"IAU2000"in n?Ha["IAU2000:"+n.IAU2000]=n:console.log(n);return}}Dz(Ha);var hy=Ha;function Ece(n){return typeof n=="string"}function bce(n){return n in hy}function Sce(n){return n.indexOf("+")!==0&&n.indexOf("[")!==-1||typeof n=="object"&&!("srsCode"in n)}var Cce=["3857","900913","3785","102113"];function Ice(n){var e=El(n,"authority");if(e){var t=El(e,"epsg");return t&&Cce.indexOf(t)>-1}}function Tce(n){var e=El(n,"extension");if(e)return El(e,"proj4")}function Dce(n){return n[0]==="+"}function Ace(n){if(Ece(n)){if(bce(n))return hy[n];if(Sce(n)){var e=cy(n);if(Ice(e))return hy["EPSG:3857"];var t=Tce(e);return t?U1(t):e}if(Dce(n))return U1(n)}else return"projName"in n?n:cy(n)}var Zz=Ace;function kL(n,e){n=n||{};var t,r;if(!e)return n;for(r in e)t=e[r],t!==void 0&&(n[r]=t);return n}function Xs(n,e,t){var r=n*e;return t/Math.sqrt(1-r*r)}function Bc(n){return n<0?-1:1}function st(n,e){return e||Math.abs(n)<=Mi?n:n-Bc(n)*Od}function ma(n,e,t){var r=n*t,i=.5*n;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(Ye-e))/r}function lf(n,e){for(var t=.5*n,r,i,o=Ye-2*Math.atan(e),s=0;s<=15;s++)if(r=n*Math.sin(o),i=Ye-2*Math.atan(e*Math.pow((1-r)/(1+r),t))-o,o+=i,Math.abs(i)<=1e-10)return o;return-9999}function Rce(){var n=this.b/this.a;this.es=1-n*n,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Xs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Mce(n){var e=n.x,t=n.y;if(t*zo>90&&t*zo<-90&&e*zo>180&&e*zo<-180)return null;var r,i;if(Math.abs(Math.abs(t)-Ye)<=ot)return null;if(this.sphere)r=this.x0+this.a*this.k0*st(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(cr+.5*t));else{var o=Math.sin(t),s=ma(this.e,t,o);r=this.x0+this.a*this.k0*st(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(s)}return n.x=r,n.y=i,n}function Nce(n){var e=n.x-this.x0,t=n.y-this.y0,r,i;if(this.sphere)i=Ye-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var o=Math.exp(-t/(this.a*this.k0));if(i=lf(this.e,o),i===-9999)return null}return r=st(this.long0+e/(this.a*this.k0),this.over),n.x=r,n.y=i,n}var Pce=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"],Kz={init:Rce,forward:Mce,inverse:Nce,names:Pce};function Lce(){}function Jz(n){return n}var OL=["longlat","identity"],Qz={init:Lce,forward:Jz,inverse:Jz,names:OL};var kce=[Kz,Qz],bg={},fy=[];function eV(n,e){var t=fy.length;return n.names?(fy[t]=n,n.names.forEach(function(r){bg[r.toLowerCase()]=t}),this):(console.log(e),!0)}function FL(n){return n.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Oce(n){if(!n)return!1;var e=n.toLowerCase();if(typeof bg[e]<"u"&&fy[bg[e]]||(e=FL(e),e in bg&&fy[bg[e]]))return fy[bg[e]]}function Fce(){kce.forEach(eV)}var tV={start:Fce,add:eV,get:Oce};var Bce={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},BL=Bce;var jce=BL.WGS84;function nV(n,e,t,r){var i=n*n,o=e*e,s=(i-o)/i,a=0;r?(n*=1-s*(Mz+s*(Nz+s*Pz)),i=n*n,s=0):a=Math.sqrt(s);var l=(i-o)/o;return{es:s,e:a,ep2:l}}function rV(n,e,t,r,i){if(!n){var o=El(BL,r);o||(o=jce),n=o.a,e=o.b,t=o.rf}return t&&!e&&(e=(1-1/t)*n),(t===0||Math.abs(n-e)<ot)&&(i=!0,e=n),{a:n,b:e,rf:t,sphere:i}}var LS={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(iV in LS)PS=LS[iV],PS.datumName&&(LS[PS.datumName]=PS);var PS,iV,oV=LS;function Uce(n,e,t,r,i,o,s){var a={};return n===void 0||n==="none"?a.datum_type=j1:a.datum_type=Az,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=qu),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Wu,a.datum_params[3]*=wg,a.datum_params[4]*=wg,a.datum_params[5]*=wg,a.datum_params[6]=a.datum_params[6]/1e6+1)),s&&(a.datum_type=sf,a.grids=s),a.a=t,a.b=r,a.es=i,a.ep2=o,a}var sV=Uce;var UL={};function GL(n,e,t){return e instanceof ArrayBuffer?Gce(n,e,t):{ready:zce(n,e)}}function Gce(n,e,t){var r=!0;t!==void 0&&t.includeErrorFields===!1&&(r=!1);var i=new DataView(e),o=Hce(i),s=qce(i,o),a=Wce(i,s,o,r),l={header:s,subgrids:a};return UL[n]=l,l}function zce(n,e){return He(this,null,function*(){for(var t=[],r=yield e.getImageCount(),i=r-1;i>=0;i--){var o=yield e.getImage(i),s=yield o.readRasters(),a=s,l=[o.getWidth(),o.getHeight()],c=o.getBoundingBox().map(aV),f=[o.fileDirectory.ModelPixelScale[0],o.fileDirectory.ModelPixelScale[1]].map(aV),d=c[0]+(l[0]-1)*f[0],y=c[3]-(l[1]-1)*f[1],p=a[0],_=a[1],w=[];for(let T=l[1]-1;T>=0;T--)for(let A=l[0]-1;A>=0;A--){var b=T*l[0]+A;w.push([-Fd(_[b]),Fd(p[b])])}t.push({del:f,lim:l,ll:[-d,y],cvs:w})}var S={header:{nSubgrids:r},subgrids:t};return UL[n]=S,S})}function lV(n){if(n===void 0)return null;var e=n.split(",");return e.map(Vce)}function Vce(n){if(n.length===0)return null;var e=n[0]==="@";return e&&(n=n.slice(1)),n==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:n,mandatory:!e,grid:UL[n]||null,isNull:!1}}function aV(n){return n*Math.PI/180}function Fd(n){return n/3600*Math.PI/180}function Hce(n){var e=n.getInt32(8,!1);return e===11?!1:(e=n.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function qce(n,e){return{nFields:n.getInt32(8,e),nSubgridFields:n.getInt32(24,e),nSubgrids:n.getInt32(40,e),shiftType:jL(n,56,64).trim(),fromSemiMajorAxis:n.getFloat64(120,e),fromSemiMinorAxis:n.getFloat64(136,e),toSemiMajorAxis:n.getFloat64(152,e),toSemiMinorAxis:n.getFloat64(168,e)}}function jL(n,e,t){return String.fromCharCode.apply(null,new Uint8Array(n.buffer.slice(e,t)))}function Wce(n,e,t,r){for(var i=176,o=[],s=0;s<e.nSubgrids;s++){var a=Yce(n,i,t),l=Xce(n,i,a,t,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),f=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);o.push({ll:[Fd(a.lowerLongitude),Fd(a.lowerLatitude)],del:[Fd(a.longitudeInterval),Fd(a.latitudeInterval)],lim:[c,f],count:a.gridNodeCount,cvs:$ce(l)});var d=16;r===!1&&(d=8),i+=176+a.gridNodeCount*d}return o}function $ce(n){return n.map(function(e){return[Fd(e.longitudeShift),Fd(e.latitudeShift)]})}function Yce(n,e,t){return{name:jL(n,e+8,e+16).trim(),parent:jL(n,e+24,e+24+8).trim(),lowerLatitude:n.getFloat64(e+72,t),upperLatitude:n.getFloat64(e+88,t),lowerLongitude:n.getFloat64(e+104,t),upperLongitude:n.getFloat64(e+120,t),latitudeInterval:n.getFloat64(e+136,t),longitudeInterval:n.getFloat64(e+152,t),gridNodeCount:n.getInt32(e+168,t)}}function Xce(n,e,t,r,i){var o=e+176,s=16;i===!1&&(s=8);for(var a=[],l=0;l<t.gridNodeCount;l++){var c={latitudeShift:n.getFloat32(o+l*s,r),longitudeShift:n.getFloat32(o+l*s+4,r)};i!==!1&&(c.latitudeAccuracy=n.getFloat32(o+l*s+8,r),c.longitudeAccuracy=n.getFloat32(o+l*s+12,r)),a.push(c)}return a}function dy(n,e){if(!(this instanceof dy))return new dy(n);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var t=Zz(n);if(typeof t!="object"){e("Could not parse to valid json: "+n);return}var r=dy.projections.get(t.projName);if(!r){e("Could not get projection name from: "+n);return}if(t.datumCode&&t.datumCode!=="none"){var i=El(oV,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var o=rV(t.a,t.b,t.rf,t.ellps,t.sphere),s=nV(o.a,o.b,o.rf,t.R_A),a=lV(t.nadgrids),l=t.datum||sV(t.datumCode,t.datum_params,o.a,o.b,s.es,s.ep2,a);kL(this,t),kL(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}dy.projections=tV;dy.projections.start();var $u=dy;function uV(n,e){return n.datum_type!==e.datum_type||n.a!==e.a||Math.abs(n.es-e.es)>5e-11?!1:n.datum_type===qu?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]:n.datum_type===Wu?n.datum_params[0]===e.datum_params[0]&&n.datum_params[1]===e.datum_params[1]&&n.datum_params[2]===e.datum_params[2]&&n.datum_params[3]===e.datum_params[3]&&n.datum_params[4]===e.datum_params[4]&&n.datum_params[5]===e.datum_params[5]&&n.datum_params[6]===e.datum_params[6]:!0}function kS(n,e,t){var r=n.x,i=n.y,o=n.z?n.z:0,s,a,l,c;if(i<-Ye&&i>-1.001*Ye)i=-Ye;else if(i>Ye&&i<1.001*Ye)i=Ye;else{if(i<-Ye)return{x:-1/0,y:-1/0,z:n.z};if(i>Ye)return{x:1/0,y:1/0,z:n.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,s=t/Math.sqrt(1-e*l),{x:(s+o)*c*Math.cos(r),y:(s+o)*c*Math.sin(r),z:(s*(1-e)+o)*a}}function OS(n,e,t,r){var i=1e-12,o=i*i,s=30,a,l,c,f,d,y,p,_,w,b,S,T,A,N=n.x,O=n.y,W=n.z?n.z:0,X,Y,$;if(a=Math.sqrt(N*N+O*O),l=Math.sqrt(N*N+O*O+W*W),a/t<i){if(X=0,l/t<i)return Y=Ye,$=-r,{x:n.x,y:n.y,z:n.z}}else X=Math.atan2(O,N);c=W/l,f=a/l,d=1/Math.sqrt(1-e*(2-e)*f*f),_=f*(1-e)*d,w=c*d,A=0;do A++,p=t/Math.sqrt(1-e*w*w),$=a*_+W*w-p*(1-e*w*w),y=e*p/(p+$),d=1/Math.sqrt(1-y*(2-y)*f*f),b=f*(1-y)*d,S=c*d,T=S*_-b*w,_=b,w=S;while(T*T>o&&A<s);return Y=Math.atan(S/Math.abs(b)),{x:X,y:Y,z:$}}function cV(n,e,t){if(e===qu)return{x:n.x+t[0],y:n.y+t[1],z:n.z+t[2]};if(e===Wu){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6];return{x:c*(n.x-l*n.y+a*n.z)+r,y:c*(l*n.x+n.y-s*n.z)+i,z:c*(-a*n.x+s*n.y+n.z)+o}}}function hV(n,e,t){if(e===qu)return{x:n.x-t[0],y:n.y-t[1],z:n.z-t[2]};if(e===Wu){var r=t[0],i=t[1],o=t[2],s=t[3],a=t[4],l=t[5],c=t[6],f=(n.x-r)/c,d=(n.y-i)/c,y=(n.z-o)/c;return{x:f+l*d-a*y,y:-l*f+d+s*y,z:a*f-s*d+y}}}function FS(n){return n===qu||n===Wu}function pV(n,e,t){if(uV(n,e)||n.datum_type===j1||e.datum_type===j1)return t;var r=n.a,i=n.es;if(n.datum_type===sf){var o=fV(n,!1,t);if(o!==0)return;r=DL,i=AL}var s=e.a,a=e.b,l=e.es;if(e.datum_type===sf&&(s=DL,a=Rz,l=AL),i===l&&r===s&&!FS(n.datum_type)&&!FS(e.datum_type))return t;if(t=kS(t,i,r),FS(n.datum_type)&&(t=cV(t,n.datum_type,n.datum_params)),FS(e.datum_type)&&(t=hV(t,e.datum_type,e.datum_params)),t=OS(t,l,s,a),e.datum_type===sf){var c=fV(e,!0,t);if(c!==0)return}return t}function fV(n,e,t){if(n.grids===null||n.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},o=[];e:for(var s=0;s<n.grids.length;s++){var a=n.grids[s];if(o.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,f=l.length;c<f;c++){var d=l[c],y=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-y,_=d.ll[1]-y,w=d.ll[0]+(d.lim[0]-1)*d.del[0]+y,b=d.ll[1]+(d.lim[1]-1)*d.del[1]+y;if(!(_>r.y||p>r.x||b<r.y||w<r.x)&&(i=Zce(r,e,d),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*zo+" "+r.y*zo+" tried: '"+o+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function Zce(n,e,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(n.x))return r;var i={x:n.x,y:n.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=st(i.x-Math.PI)+Math.PI;var o=dV(i,t);if(e){if(isNaN(o.x))return r;o.x=i.x-o.x,o.y=i.y-o.y;var s=9,a=1e-12,l,c;do{if(c=dV(o,t),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+o.x),y:i.y-(c.y+o.y)},o.x+=l.x,o.y+=l.y}while(s--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=st(o.x+t.ll[0]),r.y=o.y+t.ll[1]}else isNaN(o.x)||(r.x=n.x+o.x,r.y=n.y+o.y);return r}function dV(n,e){var t={x:n.x/e.del[0],y:n.y/e.del[1]},r={x:Math.floor(t.x),y:Math.floor(t.y)},i={x:t.x-1*r.x,y:t.y-1*r.y},o={x:Number.NaN,y:Number.NaN},s;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return o;s=r.y*e.lim[0]+r.x;var a={x:e.cvs[s][0],y:e.cvs[s][1]};s++;var l={x:e.cvs[s][0],y:e.cvs[s][1]};s+=e.lim[0];var c={x:e.cvs[s][0],y:e.cvs[s][1]};s--;var f={x:e.cvs[s][0],y:e.cvs[s][1]},d=i.x*i.y,y=i.x*(1-i.y),p=(1-i.x)*(1-i.y),_=(1-i.x)*i.y;return o.x=p*a.x+y*l.x+_*f.x+d*c.x,o.y=p*a.y+y*l.y+_*f.y+d*c.y,o}function zL(n,e,t){var r=t.x,i=t.y,o=t.z||0,s,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(s=r,"ew".indexOf(n.axis[l])!==-1?a="x":a="y"):l===1?(s=i,"ns".indexOf(n.axis[l])!==-1?a="y":a="x"):(s=o,a="z"),n.axis[l]){case"e":c[a]=s;break;case"w":c[a]=-s;break;case"n":c[a]=s;break;case"s":c[a]=-s;break;case"u":t[a]!==void 0&&(c.z=s);break;case"d":t[a]!==void 0&&(c.z=-s);break;default:return null}return c}function BS(n){var e={x:n[0],y:n[1]};return n.length>2&&(e.z=n[2]),n.length>3&&(e.m=n[3]),e}function mV(n){gV(n.x),gV(n.y)}function gV(n){if(typeof Number.isFinite=="function"){if(Number.isFinite(n))return;throw new TypeError("coordinates must be finite numbers")}if(typeof n!="number"||n!==n||!isFinite(n))throw new TypeError("coordinates must be finite numbers")}function Kce(n,e){return(n.datum.datum_type===qu||n.datum.datum_type===Wu||n.datum.datum_type===sf)&&e.datumCode!=="WGS84"||(e.datum.datum_type===qu||e.datum.datum_type===Wu||e.datum.datum_type===sf)&&n.datumCode!=="WGS84"}function Sg(n,e,t,r){var i;Array.isArray(t)?t=BS(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var o=t.z!==void 0;if(mV(t),n.datum&&e.datum&&Kce(n,e)&&(i=new $u("WGS84"),t=Sg(n,i,t,r),n=i),r&&n.axis!=="enu"&&(t=zL(n,!1,t)),n.projName==="longlat")t={x:t.x*Zr,y:t.y*Zr,z:t.z||0};else if(n.to_meter&&(t={x:t.x*n.to_meter,y:t.y*n.to_meter,z:t.z||0}),t=n.inverse(t),!t)return;if(n.from_greenwich&&(t.x+=n.from_greenwich),t=pV(n.datum,e.datum,t),!!t)return t=t,e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*zo,y:t.y*zo,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),r&&e.axis!=="enu"?zL(e,!0,t):(t&&!o&&delete t.z,t)}var yV=$u("WGS84");function VL(n,e,t,r){var i,o,s;return Array.isArray(t)?(i=Sg(n,e,t,r)||{x:NaN,y:NaN},t.length>2?typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(o=Sg(n,e,t,r),s=Object.keys(t),s.length===2||s.forEach(function(a){if(typeof n.name<"u"&&n.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;o[a]=t[a]}),o)}function jS(n){return n instanceof $u?n:typeof n=="object"&&"oProj"in n?n.oProj:$u(n)}function Jce(n,e,t){var r,i,o=!1,s;return typeof e>"u"?(i=jS(n),r=yV,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,i=jS(n),r=yV,o=!0),r||(r=jS(n)),i||(i=jS(e)),t?VL(r,i,t):(s={forward:function(a,l){return VL(r,i,a,l)},inverse:function(a,l){return VL(i,r,a,l)}},o&&(s.oProj=i),s)}var _V=Jce;var vV=6,wV="AJSAJS",EV="AFAFAF",py=65,qa=73,au=79,V1=86,H1=90,bV={forward:qL,inverse:Qce,toPoint:WL};function qL(n,e){return e=e||5,nhe(ehe({lat:n[1],lon:n[0]}),e)}function Qce(n){var e=$L(CV(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function WL(n){var e=$L(CV(n.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function HL(n){return n*(Math.PI/180)}function xV(n){return 180*(n/Math.PI)}function ehe(n){var e=n.lat,t=n.lon,r=6378137,i=.00669438,o=.9996,s,a,l,c,f,d,y,p=HL(e),_=HL(t),w,b;b=Math.floor((t+180)/6)+1,t===180&&(b=60),e>=56&&e<64&&t>=3&&t<12&&(b=32),e>=72&&e<84&&(t>=0&&t<9?b=31:t>=9&&t<21?b=33:t>=21&&t<33?b=35:t>=33&&t<42&&(b=37)),s=(b-1)*6-180+3,w=HL(s),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(p)*Math.sin(p)),c=Math.tan(p)*Math.tan(p),f=a*Math.cos(p)*Math.cos(p),d=Math.cos(p)*(_-w),y=r*((1-i/4-3*i*i/64-5*i*i*i/256)*p-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*p)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*p)-35*i*i*i/3072*Math.sin(6*p));var S=o*l*(d+(1-c+f)*d*d*d/6+(5-18*c+c*c+72*f-58*a)*d*d*d*d*d/120)+5e5,T=o*(y+l*Math.tan(p)*(d*d/2+(5-c+9*f+4*f*f)*d*d*d*d/24+(61-58*c+c*c+600*f-330*a)*d*d*d*d*d*d/720));return e<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(S),zoneNumber:b,zoneLetter:the(e)}}function $L(n){var e=n.northing,t=n.easting,r=n.zoneLetter,i=n.zoneNumber;if(i<0||i>60)return null;var o=.9996,s=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),f,d,y,p,_,w,b,S,T,A=t-5e5,N=e;r<"N"&&(N-=1e7),b=(i-1)*6-180+3,l=a/(1-a),w=N/o,S=w/(s*(1-a/4-3*a*a/64-5*a*a*a/256)),T=S+(3*c/2-27*c*c*c/32)*Math.sin(2*S)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*S)+151*c*c*c/96*Math.sin(6*S),f=s/Math.sqrt(1-a*Math.sin(T)*Math.sin(T)),d=Math.tan(T)*Math.tan(T),y=l*Math.cos(T)*Math.cos(T),p=s*(1-a)/Math.pow(1-a*Math.sin(T)*Math.sin(T),1.5),_=A/(f*o);var O=T-f*Math.tan(T)/p*(_*_/2-(5+3*d+10*y-4*y*y-9*l)*_*_*_*_/24+(61+90*d+298*y+45*d*d-252*l-3*y*y)*_*_*_*_*_*_/720);O=xV(O);var W=(_-(1+2*d+y)*_*_*_/6+(5-2*y+28*d-3*y*y+8*l+24*d*d)*_*_*_*_*_/120)/Math.cos(T);W=b+xV(W);var X;if(n.accuracy){var Y=$L({northing:n.northing+n.accuracy,easting:n.easting+n.accuracy,zoneLetter:n.zoneLetter,zoneNumber:n.zoneNumber});X={top:Y.lat,right:Y.lon,bottom:O,left:W}}else X={lat:O,lon:W};return X}function the(n){var e="Z";return 84>=n&&n>=72?e="X":72>n&&n>=64?e="W":64>n&&n>=56?e="V":56>n&&n>=48?e="U":48>n&&n>=40?e="T":40>n&&n>=32?e="S":32>n&&n>=24?e="R":24>n&&n>=16?e="Q":16>n&&n>=8?e="P":8>n&&n>=0?e="N":0>n&&n>=-8?e="M":-8>n&&n>=-16?e="L":-16>n&&n>=-24?e="K":-24>n&&n>=-32?e="J":-32>n&&n>=-40?e="H":-40>n&&n>=-48?e="G":-48>n&&n>=-56?e="F":-56>n&&n>=-64?e="E":-64>n&&n>=-72?e="D":-72>n&&n>=-80&&(e="C"),e}function nhe(n,e){var t="00000"+n.easting,r="00000"+n.northing;return n.zoneNumber+n.zoneLetter+rhe(n.easting,n.northing,n.zoneNumber)+t.substr(t.length-5,e)+r.substr(r.length-5,e)}function rhe(n,e,t){var r=SV(t),i=Math.floor(n/1e5),o=Math.floor(e/1e5)%20;return ihe(i,o,r)}function SV(n){var e=n%vV;return e===0&&(e=vV),e}function ihe(n,e,t){var r=t-1,i=wV.charCodeAt(r),o=EV.charCodeAt(r),s=i+n-1,a=o+e,l=!1;s>H1&&(s=s-H1+py-1,l=!0),(s===qa||i<qa&&s>qa||(s>qa||i<qa)&&l)&&s++,(s===au||i<au&&s>au||(s>au||i<au)&&l)&&(s++,s===qa&&s++),s>H1&&(s=s-H1+py-1),a>V1?(a=a-V1+py-1,l=!0):l=!1,(a===qa||o<qa&&a>qa||(a>qa||o<qa)&&l)&&a++,(a===au||o<au&&a>au||(a>au||o<au)&&l)&&(a++,a===qa&&a++),a>V1&&(a=a-V1+py-1);var c=String.fromCharCode(s)+String.fromCharCode(a);return c}function CV(n){if(n&&n.length===0)throw"MGRSPoint coverting from nothing";for(var e=n.length,t=null,r="",i,o=0;!/[A-Z]/.test(i=n.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+n;r+=i,o++}var s=parseInt(r,10);if(o===0||o+3>e)throw"MGRSPoint bad conversion from: "+n;var a=n.charAt(o++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+n;t=n.substring(o,o+=2);for(var l=SV(s),c=ohe(t.charAt(0),l),f=she(t.charAt(1),l);f<ahe(a);)f+=2e6;var d=e-o;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+n;var y=d/2,p=0,_=0,w,b,S,T,A;return y>0&&(w=1e5/Math.pow(10,y),b=n.substring(o,o+y),p=parseFloat(b)*w,S=n.substring(o+y),_=parseFloat(S)*w),T=p+c,A=_+f,{easting:T,northing:A,zoneLetter:a,zoneNumber:s,accuracy:w}}function ohe(n,e){for(var t=wV.charCodeAt(e-1),r=1e5,i=!1;t!==n.charCodeAt(0);){if(t++,t===qa&&t++,t===au&&t++,t>H1){if(i)throw"Bad character: "+n;t=py,i=!0}r+=1e5}return r}function she(n,e){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var t=EV.charCodeAt(e-1),r=0,i=!1;t!==n.charCodeAt(0);){if(t++,t===qa&&t++,t===au&&t++,t>V1){if(i)throw"Bad character: "+n;t=py,i=!0}r+=1e5}return r}function ahe(n){var e;switch(n){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+n}function gy(n,e,t){if(!(this instanceof gy))return new gy(n,e,t);if(Array.isArray(n))this.x=n[0],this.y=n[1],this.z=n[2]||0;else if(typeof n=="object")this.x=n.x,this.y=n.y,this.z=n.z||0;else if(typeof n=="string"&&typeof e>"u"){var r=n.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=n,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}gy.fromMGRS=function(n){return new gy(WL(n))};gy.prototype.toMGRS=function(n){return qL([this.x,this.y],n)};var IV=gy;var lhe=1,uhe=.25,TV=.046875,DV=.01953125,AV=.01068115234375,che=.75,hhe=.46875,fhe=.013020833333333334,dhe=.007120768229166667,phe=.3645833333333333,ghe=.005696614583333333,mhe=.3076171875;function my(n){var e=[];e[0]=lhe-n*(uhe+n*(TV+n*(DV+n*AV))),e[1]=n*(che-n*(TV+n*(DV+n*AV)));var t=n*n;return e[2]=t*(hhe-n*(fhe+n*dhe)),t*=n,e[3]=t*(phe-n*ghe),e[4]=t*n*mhe,e}function jc(n,e,t,r){return t*=e,e*=e,r[0]*n-t*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var yhe=20;function yy(n,e,t){for(var r=1/(1-e),i=n,o=yhe;o;--o){var s=Math.sin(i),a=1-e*s*s;if(a=(jc(i,s,Math.cos(i),t)-n)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<ot)return i}return i}function _he(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=my(this.es),this.ml0=jc(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function vhe(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i,o,s,a=Math.sin(t),l=Math.cos(t);if(this.es){var f=l*r,d=Math.pow(f,2),y=this.ep2*Math.pow(l,2),p=Math.pow(y,2),_=Math.abs(l)>ot?Math.tan(t):0,w=Math.pow(_,2),b=Math.pow(w,2);i=1-this.es*Math.pow(a,2),f=f/Math.sqrt(i);var S=jc(t,a,l,this.en);o=this.a*(this.k0*f*(1+d/6*(1-w+y+d/20*(5-18*w+b+14*y-58*w*y+d/42*(61+179*b-b*w-479*w)))))+this.x0,s=this.a*(this.k0*(S-this.ml0+a*r*f/2*(1+d/12*(5-w+9*y+4*p+d/30*(61+b-58*w+270*y-330*w*y+d/56*(1385+543*b-b*w-3111*w))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<ot)return 93;if(o=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,s=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(s),c>=1){if(c-1>ot)return 93;s=0}else s=Math.acos(s);t<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return n.x=o,n.y=s,n}function xhe(n){var e,t,r,i,o=(n.x-this.x0)*(1/this.a),s=(n.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,t=yy(e,this.es,this.en),Math.abs(t)<Ye){var d=Math.sin(t),y=Math.cos(t),p=Math.abs(y)>ot?Math.tan(t):0,_=this.ep2*Math.pow(y,2),w=Math.pow(_,2),b=Math.pow(p,2),S=Math.pow(b,2);e=1-this.es*Math.pow(d,2);var T=o*Math.sqrt(e)/this.k0,A=Math.pow(T,2);e=e*p,r=t-e*A/(1-this.es)*.5*(1-A/12*(5+3*b-9*_*b+_-4*w-A/30*(61+90*b-252*_*b+45*S+46*_-A/56*(1385+3633*b+4095*S+1574*S*b)))),i=st(this.long0+T*(1-A/6*(1+2*b+_-A/20*(5+28*b+24*S+8*_*b+6*_-A/42*(61+662*b+1320*S+720*S*b))))/y,this.over)}else r=Ye*Bc(s),i=0;else{var a=Math.exp(o/this.k0),l=.5*(a-1/a),c=this.lat0+s/this.k0,f=Math.cos(c);e=Math.sqrt((1-Math.pow(f,2))/(1+Math.pow(l,2))),r=Math.asin(e),s<0&&(r=-r),l===0&&f===0?i=0:i=st(Math.atan2(l,f)+this.long0,this.over)}return n.x=i,n.y=r,n}var whe=["Fast_Transverse_Mercator","Fast Transverse Mercator"],_y={init:_he,forward:vhe,inverse:xhe,names:whe};function US(n){var e=Math.exp(n);return e=(e-1/e)/2,e}function wo(n,e){n=Math.abs(n),e=Math.abs(e);var t=Math.max(n,e),r=Math.min(n,e)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function RV(n){var e=1+n,t=e-1;return t===0?n:n*Math.log(e)/t}function MV(n){var e=Math.abs(n);return e=RV(e*(1+e/(wo(1,e)+1))),n<0?-e:e}function GS(n,e){for(var t=2*Math.cos(2*e),r=n.length-1,i=n[r],o=0,s;--r>=0;)s=-o+t*i+n[r],o=i,i=s;return e+s*Math.sin(2*e)}function NV(n,e){for(var t=2*Math.cos(e),r=n.length-1,i=n[r],o=0,s;--r>=0;)s=-o+t*i+n[r],o=i,i=s;return Math.sin(e)*s}function PV(n){var e=Math.exp(n);return e=(e+1/e)/2,e}function YL(n,e,t){for(var r=Math.sin(e),i=Math.cos(e),o=US(t),s=PV(t),a=2*i*s,l=-2*r*o,c=n.length-1,f=n[c],d=0,y=0,p=0,_,w;--c>=0;)_=y,w=d,y=f,d=p,f=-_+a*y-l*d+n[c],p=-w+l*y+a*d;return a=r*s,l=i*o,[a*f-l*p,a*p+l*f]}function Ehe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(_y.init.apply(this),this.forward=_y.forward,this.inverse=_y.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var n=this.es/(1+Math.sqrt(1-this.es)),e=n/(2-n),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var r=GS(this.cbg,this.lat0);this.Zb=-this.Qn*(r+NV(this.gtu,2*r))}function bhe(n){var e=st(n.x-this.long0,this.over),t=n.y;t=GS(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),o=Math.sin(e),s=Math.cos(e);t=Math.atan2(r,s*i),e=Math.atan2(o*i,wo(r,i*s)),e=MV(Math.tan(e));var a=YL(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,c=1/0),n.x=l,n.y=c,n}function She(n){var e=(n.x-this.x0)*(1/this.a),t=(n.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var o=YL(this.utg,2*t,2*e);t=t+o[0],e=e+o[1],e=Math.atan(US(e));var s=Math.sin(t),a=Math.cos(t),l=Math.sin(e),c=Math.cos(e);t=Math.atan2(s*c,wo(l,c*a)),e=Math.atan2(l,c*a),r=st(e+this.long0,this.over),i=GS(this.cgb,t)}else r=1/0,i=1/0;return n.x=r,n.y=i,n}var Che=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],vy={init:Ehe,forward:bhe,inverse:She,names:Che};function LV(n,e){if(n===void 0){if(n=Math.floor((st(e)+Math.PI)*30/Math.PI)+1,n<0)return 0;if(n>60)return 60}return n}var Ihe="etmerc";function The(){var n=LV(this.zone,this.long0);if(n===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(n)-183)*Zr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,vy.init.apply(this),this.forward=vy.forward,this.inverse=vy.inverse}var Dhe=["Universal Transverse Mercator System","utm"],kV={init:The,names:Dhe,dependsOn:Ihe};function zS(n,e){return Math.pow((1-n)/(1+n),e)}var Ahe=20;function Rhe(){var n=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*n*n),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(n/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+cr)/(Math.pow(Math.tan(.5*this.lat0+cr),this.C)*zS(this.e*n,this.ratexp))}function Mhe(n){var e=n.x,t=n.y;return n.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+cr),this.C)*zS(this.e*Math.sin(t),this.ratexp))-Ye,n.x=this.C*e,n}function Nhe(n){for(var e=1e-14,t=n.x/this.C,r=n.y,i=Math.pow(Math.tan(.5*r+cr)/this.K,1/this.C),o=Ahe;o>0&&(r=2*Math.atan(i*zS(this.e*Math.sin(n.y),-.5*this.e))-Ye,!(Math.abs(r-n.y)<e));--o)n.y=r;return o?(n.x=t,n.y=r,n):null}var Phe=["gauss"],VS={init:Rhe,forward:Mhe,inverse:Nhe,names:Phe};function Lhe(){VS.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function khe(n){var e,t,r,i;return n.x=st(n.x-this.long0,this.over),VS.forward.apply(this,[n]),e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*r),n.x=i*t*Math.sin(n.x),n.y=i*(this.cosc0*e-this.sinc0*t*r),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Ohe(n){var e,t,r,i,o;if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,o=wo(n.x,n.y)){var s=2*Math.atan2(o,this.R2);e=Math.sin(s),t=Math.cos(s),i=Math.asin(t*this.sinc0+n.y*e*this.cosc0/o),r=Math.atan2(n.x*e,o*this.cosc0*t-n.y*this.sinc0*e)}else i=this.phic0,r=0;return n.x=r,n.y=i,VS.inverse.apply(this,[n]),n.x=st(n.x+this.long0,this.over),n}var Fhe=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],OV={init:Lhe,forward:khe,inverse:Ohe,names:Fhe};function XL(n,e,t){return e*=t,Math.tan(.5*(Ye+n))*Math.pow((1-e)/(1+e),.5*t)}function Bhe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&(this.k0=.5*(1+Bc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ot&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ot&&Math.abs(Math.cos(this.lat_ts))>ot&&(this.k0=.5*this.cons*Xs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ma(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Xs(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(XL(this.lat0,this.sinlat0,this.e))-Ye,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function jhe(n){var e=n.x,t=n.y,r=Math.sin(t),i=Math.cos(t),o,s,a,l,c,f,d=st(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ot&&Math.abs(t+this.lat0)<=ot?(n.x=NaN,n.y=NaN,n):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(d)),n.x=this.a*o*i*Math.sin(d)+this.x0,n.y=this.a*o*(this.coslat0*r-this.sinlat0*i*Math.cos(d))+this.y0,n):(s=2*Math.atan(XL(t,r,this.e))-Ye,l=Math.cos(s),a=Math.sin(s),Math.abs(this.coslat0)<=ot?(c=ma(this.e,t*this.con,this.con*r),f=2*this.a*this.k0*c/this.cons,n.x=this.x0+f*Math.sin(e-this.long0),n.y=this.y0-this.con*f*Math.cos(e-this.long0),n):(Math.abs(this.sinlat0)<ot?(o=2*this.a*this.k0/(1+l*Math.cos(d)),n.y=o*a):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(d))),n.y=o*(this.cosX0*a-this.sinX0*l*Math.cos(d))+this.y0),n.x=o*l*Math.sin(d)+this.x0,n))}function Uhe(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,o,s=Math.sqrt(n.x*n.x+n.y*n.y);if(this.sphere){var a=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,t=this.lat0,s<=ot?(n.x=e,n.y=t,n):(t=Math.asin(Math.cos(a)*this.sinlat0+n.y*Math.sin(a)*this.coslat0/s),Math.abs(this.coslat0)<ot?this.lat0>0?e=st(this.long0+Math.atan2(n.x,-1*n.y),this.over):e=st(this.long0+Math.atan2(n.x,n.y),this.over):e=st(this.long0+Math.atan2(n.x*Math.sin(a),s*this.coslat0*Math.cos(a)-n.y*this.sinlat0*Math.sin(a)),this.over),n.x=e,n.y=t,n)}else if(Math.abs(this.coslat0)<=ot){if(s<=ot)return t=this.lat0,e=this.long0,n.x=e,n.y=t,n;n.x*=this.con,n.y*=this.con,r=s*this.cons/(2*this.a*this.k0),t=this.con*lf(this.e,r),e=this.con*st(this.con*this.long0+Math.atan2(n.x,-1*n.y),this.over)}else i=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=ot?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+n.y*Math.sin(i)*this.cosX0/s),e=st(this.long0+Math.atan2(n.x*Math.sin(i),s*this.cosX0*Math.cos(i)-n.y*this.sinX0*Math.sin(i)),this.over)),t=-1*lf(this.e,Math.tan(.5*(Ye+o)));return n.x=e,n.y=t,n}var Ghe=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],FV={init:Bhe,forward:jhe,inverse:Uhe,names:Ghe,ssfn_:XL};function zhe(){var n=this.lat0;this.lambda0=this.long0;var e=Math.sin(n),t=this.a,r=this.rf,i=1/r,o=2*i-Math.pow(i,2),s=this.e=Math.sqrt(o);this.R=this.k0*t*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(n),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+n/2)),c=Math.log((1+s*e)/(1-s*e));this.K=a-this.alpha*l+this.alpha*s/2*c}function Vhe(n){var e=Math.log(Math.tan(Math.PI/4-n.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(n.y))/(1-this.e*Math.sin(n.y))),r=-this.alpha*(e+t)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(n.x-this.lambda0),s=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return n.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,n.x=this.R*s+this.x0,n}function Hhe(n){for(var e=n.x-this.x0,t=n.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),s=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+s/this.alpha,l=0,c=o,f=-1e3,d=0;Math.abs(c-f)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),f=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return n.x=a,n.y=c,n}var qhe=["somerc"],BV={init:zhe,forward:Vhe,inverse:Hhe,names:qhe};var xy=1e-7;function Whe(n){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof n.projName=="object"?Object.keys(n.projName)[0]:n.projName;return"no_uoff"in n||"no_off"in n||e.indexOf(t)!==-1||e.indexOf(FL(t))!==-1}function $he(){var n,e,t,r,i,o,s,a,l,c,f=0,d,y=0,p=0,_=0,w=0,b=0,S=0;this.no_off=Whe(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),T&&(S=this.alpha),A&&(f=this.rectified_grid_angle),T||A)y=this.longc;else if(p=this.long1,w=this.lat1,_=this.long2,b=this.lat2,Math.abs(w-b)<=xy||(n=Math.abs(w))<=xy||Math.abs(n-Ye)<=xy||Math.abs(Math.abs(this.lat0)-Ye)<=xy||Math.abs(Math.abs(b)-Ye)<=xy)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>ot?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),n=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/n,r=this.B*e/(t*Math.sqrt(n)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(ma(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),T||A?(T?(d=Math.asin(Math.sin(S)/r),A||(f=S)):(d=f,S=Math.asin(r*Math.sin(d))),this.lam0=y-Math.asin(.5*(i-1/i)*Math.tan(d))/this.B):(o=Math.pow(ma(this.e,w,Math.sin(w)),this.B),s=Math.pow(ma(this.e,b,Math.sin(b)),this.B),i=this.E/o,l=(s-o)/(s+o),c=this.E*this.E,c=(c-s*o)/(c+s*o),n=p-_,n<-Math.PI?_-=Od:n>Math.PI&&(_+=Od),this.lam0=st(.5*(p+_)-Math.atan(c*Math.tan(.5*this.B*(p-_))/l)/this.B,this.over),d=Math.atan(2*Math.sin(this.B*st(p-this.lam0,this.over))/(i-1/i)),f=S=Math.asin(r*Math.sin(d))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(cr-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(cr+i))}function Yhe(n){var e={},t,r,i,o,s,a,l,c;if(n.x=n.x-this.lam0,Math.abs(Math.abs(n.y)-Ye)>ot){if(s=this.E/Math.pow(ma(this.e,n.y,Math.sin(n.y)),this.B),a=1/s,t=.5*(s-a),r=.5*(s+a),o=Math.sin(this.B*n.x),i=(t*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(i)-1)<ot)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*n.x),Math.abs(a)<xy?l=this.A*n.x:l=this.ArB*Math.atan2(t*this.cosgam+o*this.singam,a)}else c=n.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*n.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Xhe(n){var e,t,r,i,o,s,a,l={};if(n.x=(n.x-this.x0)*(1/this.a),n.y=(n.y-this.y0)*(1/this.a),this.no_rot?(t=n.y,e=n.x):(t=n.x*this.cosrot-n.y*this.sinrot,e=n.y*this.cosrot+n.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*t),i=.5*(r-1/r),o=.5*(r+1/r),s=Math.sin(this.BrA*e),a=(s*this.cosgam+i*this.singam)/o,Math.abs(Math.abs(a)-1)<ot)l.x=0,l.y=a<0?-Ye:Ye;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=lf(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-s*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Zhe=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],jV={init:$he,forward:Yhe,inverse:Xhe,names:Zhe};function Khe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ot)){var n=this.b/this.a;this.e=Math.sqrt(1-n*n);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Xs(this.e,e,t),i=ma(this.e,this.lat1,e),o=Math.sin(this.lat2),s=Math.cos(this.lat2),a=Xs(this.e,o,s),l=ma(this.e,this.lat2,o),c=Math.abs(Math.abs(this.lat0)-Ye)<ot?0:ma(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ot?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Jhe(n){var e=n.x,t=n.y;Math.abs(2*Math.abs(t)-Math.PI)<=ot&&(t=Bc(t)*(Ye-2*ot));var r=Math.abs(Math.abs(t)-Ye),i,o;if(r>ot)i=ma(this.e,t,Math.sin(t)),o=this.a*this.f0*Math.pow(i,this.ns);else{if(r=t*this.ns,r<=0)return null;o=0}var s=this.ns*st(e-this.long0,this.over);return n.x=this.k0*(o*Math.sin(s))+this.x0,n.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,n}function Qhe(n){var e,t,r,i,o,s=(n.x-this.x0)/this.k0,a=this.rh-(n.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),t=1):(e=-Math.sqrt(s*s+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*s,t*a)),e!==0||this.ns>0){if(t=1/this.ns,r=Math.pow(e/(this.a*this.f0),t),i=lf(this.e,r),i===-9999)return null}else i=-Ye;return o=st(l/this.ns+this.long0,this.over),n.x=o,n.y=i,n}var efe=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],UV={init:Khe,forward:Jhe,inverse:Qhe,names:efe};function tfe(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function nfe(n){var e,t,r,i,o,s,a,l=n.x,c=n.y,f=st(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-f*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),o=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),s=this.n*o,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),n.y=a*Math.cos(s)/1,n.x=a*Math.sin(s)/1,this.czech||(n.y*=-1,n.x*=-1),n}function rfe(n){var e,t,r,i,o,s,a,l,c=n.x;n.x=n.y,n.y=c,this.czech||(n.y*=-1,n.x*=-1),s=Math.sqrt(n.x*n.x+n.y*n.y),o=Math.atan2(n.y,n.x),i=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),n.x=this.long0-t/this.alfa,a=e,l=0;var f=0;do n.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-n.y)<1e-10&&(l=1),a=n.y,f+=1;while(l===0&&f<15);return f>=15?null:n}var ife=["Krovak","krovak"],GV={init:tfe,forward:nfe,inverse:rfe,names:ife};function Vo(n,e,t,r,i){return n*i-e*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function uf(n){return 1-.25*n*(1+n/16*(3+1.25*n))}function cf(n){return .375*n*(1+.25*n*(1+.46875*n))}function hf(n){return .05859375*n*n*(1+.75*n)}function ff(n){return n*n*n*(35/3072)}function q1(n,e,t){var r=e*t;return n/Math.sqrt(1-r*r)}function Wa(n){return Math.abs(n)<Ye?n:n-Bc(n)*Math.PI}function Cg(n,e,t,r,i){var o,s;o=n/e;for(var a=0;a<15;a++)if(s=(n-(e*o-t*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*t*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),o+=s,Math.abs(s)<=1e-10)return o;return NaN}function ofe(){this.sphere||(this.e0=uf(this.es),this.e1=cf(this.es),this.e2=hf(this.es),this.e3=ff(this.es),this.ml0=this.a*Vo(this.e0,this.e1,this.e2,this.e3,this.lat0))}function sfe(n){var e,t,r=n.x,i=n.y;if(r=st(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),s=Math.cos(i),a=q1(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),f=c*c,d=this.es*s*s/(1-this.es),y=this.a*Vo(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-f*l*(1/6-(8-l+8*d)*f/120)),t=y-this.ml0+a*o/s*f*(.5+(5-l+6*d)*f/24)}return n.x=e+this.x0,n.y=t+this.y0,n}function afe(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i;if(this.sphere){var o=t+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(o))}else{var s=this.ml0/this.a+t,a=Cg(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ye)<=ot)return n.x=this.long0,n.y=Ye,t<0&&(n.y*=-1),n;var l=q1(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),f=Math.pow(Math.tan(a),2),d=e*this.a/l,y=d*d;r=a-l*Math.tan(a)/c*d*d*(.5-(1+3*f)*d*d/24),i=d*(1-y*(f/3+(1+3*f)*f*y/15))/Math.cos(a)}return n.x=st(i+this.long0,this.over),n.y=Wa(r),n}var lfe=["Cassini","Cassini_Soldner","cass"],zV={init:ofe,forward:sfe,inverse:afe,names:lfe};function Yu(n,e){var t;return n>1e-7?(t=n*e,(1-n*n)*(e/(1-t*t)-.5/n*Math.log((1-t)/(1+t)))):2*e}var ZL=1,KL=2,JL=3,HS=4;function ufe(){var n=Math.abs(this.lat0);if(Math.abs(n-Ye)<ot?this.mode=this.lat0<0?ZL:KL:Math.abs(n)<ot?this.mode=JL:this.mode=HS,this.es>0){var e;switch(this.qp=Yu(this.e,1),this.mmf=.5/(1-this.es),this.apa=_fe(this.es),this.mode){case KL:this.dd=1;break;case ZL:this.dd=1;break;case JL:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case HS:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Yu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===HS&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function cfe(n){var e,t,r,i,o,s,a,l,c,f,d=n.x,y=n.y;if(d=st(d-this.long0,this.over),this.sphere){if(o=Math.sin(y),f=Math.cos(y),r=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+f*r:1+this.sinph0*o+this.cosph0*f*r,t<=ot)return null;t=Math.sqrt(2/t),e=t*f*Math.sin(d),t*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*f*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(y+this.lat0)<ot)return null;t=cr-y*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(d),t*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(d),i=Math.sin(d),o=Math.sin(y),s=Yu(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=Ye+y,s=this.qp-s;break;case this.S_POLE:c=y-Ye,s=this.qp+s;break}if(Math.abs(c)<ot)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?t=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):t=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(c=Math.sqrt(s))*i,t=r*(this.mode===this.S_POLE?c:-c)):e=t=0;break}}return n.x=this.a*e+this.x0,n.y=this.a*t+this.y0,n}function hfe(n){n.x-=this.x0,n.y-=this.y0;var e=n.x/this.a,t=n.y/this.a,r,i,o,s,a,l,c;if(this.sphere){var f=0,d,y=0;if(d=Math.sqrt(e*e+t*t),i=d*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(i),f=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=ot?0:Math.asin(t*y/d),e*=y,t=f*d;break;case this.OBLIQ:i=Math.abs(d)<=ot?this.lat0:Math.asin(f*this.sinph0+t*y*this.cosph0/d),e*=y*this.cosph0,t=(f-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:t=-t,i=Ye-i;break;case this.S_POLE:i-=Ye;break}r=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<ot)return n.x=this.long0,n.y=this.lat0,n;s=2*Math.asin(.5*l/this.rq),o=Math.cos(s),e*=s=Math.sin(s),this.mode===this.OBLIQ?(c=o*this.sinb1+t*s*this.cosb1/l,a=this.qp*c,t=l*this.cosb1*o-t*this.sinb1*s):(c=t*s/l,a=this.qp*c,t=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return n.x=this.long0,n.y=this.lat0,n;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,t),i=vfe(Math.asin(c),this.apa)}return n.x=st(this.long0+r,this.over),n.y=i,n}var ffe=.3333333333333333,dfe=.17222222222222222,pfe=.10257936507936508,gfe=.06388888888888888,mfe=.0664021164021164,yfe=.016415012942191543;function _fe(n){var e,t=[];return t[0]=n*ffe,e=n*n,t[0]+=e*dfe,t[1]=e*gfe,e*=n,t[0]+=e*pfe,t[1]+=e*mfe,t[2]=e*yfe,t}function vfe(n,e){var t=n+n;return n+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var xfe=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],VV={init:ufe,forward:cfe,inverse:hfe,names:xfe,S_POLE:ZL,N_POLE:KL,EQUIT:JL,OBLIQ:HS};function $a(n){return Math.abs(n)>1&&(n=n>1?1:-1),Math.asin(n)}function wfe(){Math.abs(this.lat1+this.lat2)<ot||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Xs(this.e3,this.sin_po,this.cos_po),this.qs1=Yu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Xs(this.e3,this.sin_po,this.cos_po),this.qs2=Yu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Yu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ot?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Efe(n){var e=n.x,t=n.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Yu(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*st(e-this.long0,this.over),s=i*Math.sin(o)+this.x0,a=this.rh-i*Math.cos(o)+this.y0;return n.x=s,n.y=a,n}function bfe(n){var e,t,r,i,o,s;return n.x-=this.x0,n.y=this.rh-n.y+this.y0,this.ns0>=0?(e=Math.sqrt(n.x*n.x+n.y*n.y),r=1):(e=-Math.sqrt(n.x*n.x+n.y*n.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*n.x,r*n.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(t=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,t)),o=st(i/this.ns0+this.long0,this.over),n.x=o,n.y=s,n}function Sfe(n,e){var t,r,i,o,s,a=$a(.5*e);if(n<ot)return a;for(var l=n*n,c=1;c<=25;c++)if(t=Math.sin(a),r=Math.cos(a),i=n*t,o=1-i*i,s=.5*o*o/r*(e/(1-l)-t/o+.5/n*Math.log((1-i)/(1+i))),a=a+s,Math.abs(s)<=1e-7)return a;return null}var Cfe=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],HV={init:wfe,forward:Efe,inverse:bfe,names:Cfe,phi1z:Sfe};function Ife(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Tfe(n){var e,t,r,i,o,s,a,l,c=n.x,f=n.y;return r=st(c-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),s=this.sin_p14*e+this.cos_p14*t*i,o=1,s>0||Math.abs(s)<=ot?(a=this.x0+this.a*o*t*Math.sin(r)/s,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*t*i)/s):(a=this.x0+this.infinity_dist*t*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*i)),n.x=a,n.y=l,n}function Dfe(n){var e,t,r,i,o,s;return n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,n.x/=this.k0,n.y/=this.k0,(e=Math.sqrt(n.x*n.x+n.y*n.y))?(i=Math.atan2(e,this.rc),t=Math.sin(i),r=Math.cos(i),s=$a(r*this.sin_p14+n.y*t*this.cos_p14/e),o=Math.atan2(n.x*t,e*this.cos_p14*r-n.y*this.sin_p14*t),o=st(this.long0+o,this.over)):(s=this.phic0,o=0),n.x=o,n.y=s,n}var Afe=["gnom"],qV={init:Ife,forward:Tfe,inverse:Dfe,names:Afe};function WV(n,e){var t=1-(1-n*n)/(2*n)*Math.log((1-n)/(1+n));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ye:Ye;for(var r=Math.asin(.5*e),i,o,s,a,l=0;l<30;l++)if(o=Math.sin(r),s=Math.cos(r),a=n*o,i=Math.pow(1-a*a,2)/(2*s)*(e/(1-n*n)-o/(1-a*a)+.5/n*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Rfe(){this.sphere||(this.k0=Xs(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Mfe(n){var e=n.x,t=n.y,r,i,o=st(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var s=Yu(this.e,Math.sin(t));r=this.x0+this.a*this.k0*o,i=this.y0+this.a*s*.5/this.k0}return n.x=r,n.y=i,n}function Nfe(n){n.x-=this.x0,n.y-=this.y0;var e,t;return this.sphere?(e=st(this.long0+n.x/this.a/Math.cos(this.lat_ts),this.over),t=Math.asin(n.y/this.a*Math.cos(this.lat_ts))):(t=WV(this.e,2*n.y*this.k0/this.a),e=st(this.long0+n.x/(this.a*this.k0),this.over)),n.x=e,n.y=t,n}var Pfe=["cea"],$V={init:Rfe,forward:Mfe,inverse:Nfe,names:Pfe};function Lfe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function kfe(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=Wa(t-this.lat0);return n.x=this.x0+this.a*r*this.rc,n.y=this.y0+this.a*i,n}function Ofe(n){var e=n.x,t=n.y;return n.x=st(this.long0+(e-this.x0)/(this.a*this.rc),this.over),n.y=Wa(this.lat0+(t-this.y0)/this.a),n}var Ffe=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"],YV={init:Lfe,forward:kfe,inverse:Ofe,names:Ffe};var XV=20;function Bfe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uf(this.es),this.e1=cf(this.es),this.e2=hf(this.es),this.e3=ff(this.es),this.ml0=this.a*Vo(this.e0,this.e1,this.e2,this.e3,this.lat0)}function jfe(n){var e=n.x,t=n.y,r,i,o,s=st(e-this.long0,this.over);if(o=s*Math.sin(t),this.sphere)Math.abs(t)<=ot?(r=this.a*s,i=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(t),i=this.a*(Wa(t-this.lat0)+(1-Math.cos(o))/Math.tan(t)));else if(Math.abs(t)<=ot)r=this.a*s,i=-1*this.ml0;else{var a=q1(this.a,this.e,Math.sin(t))/Math.tan(t);r=a*Math.sin(o),i=this.a*Vo(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(o))}return n.x=r+this.x0,n.y=i+this.y0,n}function Ufe(n){var e,t,r,i,o,s,a,l,c;if(r=n.x-this.x0,i=n.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=ot)e=st(r/this.a+this.long0,this.over),t=0;else{s=this.lat0+i/this.a,a=r*r/this.a/this.a+s*s,l=s;var f;for(o=XV;o;--o)if(f=Math.tan(l),c=-1*(s*(l*f+1)-l-.5*(l*l+a)*f)/((l-s)/f-1),l+=c,Math.abs(c)<=ot){t=l;break}e=st(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(t),this.over)}else if(Math.abs(i+this.ml0)<=ot)t=0,e=st(this.long0+r/this.a,this.over);else{s=(this.ml0+i)/this.a,a=r*r/this.a/this.a+s*s,l=s;var d,y,p,_,w;for(o=XV;o;--o)if(w=this.e*Math.sin(l),d=Math.sqrt(1-w*w)*Math.tan(l),y=this.a*Vo(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),_=y/this.a,c=(s*(d*_+1)-_-.5*d*(_*_+a))/(this.es*Math.sin(2*l)*(_*_+a-2*s*_)/(4*d)+(s-_)*(d*p-2/Math.sin(2*l))-p),l-=c,Math.abs(c)<=ot){t=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=st(this.long0+Math.asin(r*d/this.a)/Math.sin(t),this.over)}return n.x=e,n.y=t,n}var Gfe=["Polyconic","American_Polyconic","poly"],ZV={init:Bfe,forward:jfe,inverse:Ufe,names:Gfe};function zfe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Vfe(n){var e,t=n.x,r=n.y,i=r-this.lat0,o=t-this.long0,s=i/wg*1e-5,a=o,l=1,c=0;for(e=1;e<=10;e++)l=l*s,c=c+this.A[e]*l;var f=c,d=a,y=1,p=0,_,w,b=0,S=0;for(e=1;e<=6;e++)_=y*f-p*d,w=p*f+y*d,y=_,p=w,b=b+this.B_re[e]*y-this.B_im[e]*p,S=S+this.B_im[e]*y+this.B_re[e]*p;return n.x=S*this.a+this.x0,n.y=b*this.a+this.y0,n}function Hfe(n){var e,t=n.x,r=n.y,i=t-this.x0,o=r-this.y0,s=o/this.a,a=i/this.a,l=1,c=0,f,d,y=0,p=0;for(e=1;e<=6;e++)f=l*s-c*a,d=c*s+l*a,l=f,c=d,y=y+this.C_re[e]*l-this.C_im[e]*c,p=p+this.C_im[e]*l+this.C_re[e]*c;for(var _=0;_<this.iterations;_++){var w=y,b=p,S,T,A=s,N=a;for(e=2;e<=6;e++)S=w*y-b*p,T=b*y+w*p,w=S,b=T,A=A+(e-1)*(this.B_re[e]*w-this.B_im[e]*b),N=N+(e-1)*(this.B_im[e]*w+this.B_re[e]*b);w=1,b=0;var O=this.B_re[1],W=this.B_im[1];for(e=2;e<=6;e++)S=w*y-b*p,T=b*y+w*p,w=S,b=T,O=O+e*(this.B_re[e]*w-this.B_im[e]*b),W=W+e*(this.B_im[e]*w+this.B_re[e]*b);var X=O*O+W*W;y=(A*O+N*W)/X,p=(N*O-A*W)/X}var Y=y,$=p,V=1,B=0;for(e=1;e<=9;e++)V=V*Y,B=B+this.D[e]*V;var v=this.lat0+B*wg*1e5,I=this.long0+$;return n.x=I,n.y=v,n}var qfe=["New_Zealand_Map_Grid","nzmg"],KV={init:zfe,forward:Vfe,inverse:Hfe,names:qfe};function Wfe(){}function $fe(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return n.x=i,n.y=o,n}function Yfe(n){n.x-=this.x0,n.y-=this.y0;var e=st(this.long0+n.x/this.a,this.over),t=2.5*(Math.atan(Math.exp(.8*n.y/this.a))-Math.PI/4);return n.x=e,n.y=t,n}var Xfe=["Miller_Cylindrical","mill"],JV={init:Wfe,forward:$fe,inverse:Yfe,names:Xfe};var Zfe=20;function Kfe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=my(this.es)}function Jfe(n){var e,t,r=n.x,i=n.y;if(r=st(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var o=this.n*Math.sin(i),s=Zfe;s;--s){var a=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<ot)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);t=this.a*jc(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return n.x=e,n.y=t,n}function Qfe(n){var e,t,r,i;return n.x-=this.x0,r=n.x/this.a,n.y-=this.y0,e=n.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=$a((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=$a(Math.sin(e)/this.n)),r=st(r+this.long0,this.over),e=Wa(e)):(e=yy(n.y/this.a,this.es,this.en),i=Math.abs(e),i<Ye?(i=Math.sin(e),t=this.long0+n.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=st(t,this.over)):i-ot<Ye&&(r=this.long0)),n.x=r,n.y=e,n}var ede=["Sinusoidal","sinu"],QV={init:Kfe,forward:Jfe,inverse:Qfe,names:ede};function tde(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function nde(n){for(var e=n.x,t=n.y,r=st(e-this.long0,this.over),i=t,o=Math.PI*Math.sin(t);;){var s=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=s,Math.abs(s)<ot)break}i/=2,Math.PI/2-Math.abs(t)<ot&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return n.x=a,n.y=l,n}function rde(n){var e,t;n.x-=this.x0,n.y-=this.y0,t=n.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var r=st(this.long0+n.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return n.x=r,n.y=i,n}var ide=["Mollweide","moll"],eH={init:tde,forward:nde,inverse:rde,names:ide};function ode(){Math.abs(this.lat1+this.lat2)<ot||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=uf(this.es),this.e1=cf(this.es),this.e2=hf(this.es),this.e3=ff(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Xs(this.e,this.sin_phi,this.cos_phi),this.ml1=Vo(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ot?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Xs(this.e,this.sin_phi,this.cos_phi),this.ml2=Vo(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Vo(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function sde(n){var e=n.x,t=n.y,r;if(this.sphere)r=this.a*(this.g-t);else{var i=Vo(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var o=this.ns*st(e-this.long0,this.over),s=this.x0+r*Math.sin(o),a=this.y0+this.rh-r*Math.cos(o);return n.x=s,n.y=a,n}function ade(n){n.x-=this.x0,n.y=this.rh-n.y+this.y0;var e,t,r,i;this.ns>=0?(t=Math.sqrt(n.x*n.x+n.y*n.y),e=1):(t=-Math.sqrt(n.x*n.x+n.y*n.y),e=-1);var o=0;if(t!==0&&(o=Math.atan2(e*n.x,e*n.y)),this.sphere)return i=st(this.long0+o/this.ns,this.over),r=Wa(this.g-t/this.a),n.x=i,n.y=r,n;var s=this.g-t/this.a;return r=Cg(s,this.e0,this.e1,this.e2,this.e3),i=st(this.long0+o/this.ns,this.over),n.x=i,n.y=r,n}var lde=["Equidistant_Conic","eqdc"],tH={init:ode,forward:sde,inverse:ade,names:lde};function ude(){this.R=this.a}function cde(n){var e=n.x,t=n.y,r=st(e-this.long0,this.over),i,o;Math.abs(t)<=ot&&(i=this.x0+this.R*r,o=this.y0);var s=$a(2*Math.abs(t/Math.PI));(Math.abs(r)<=ot||Math.abs(Math.abs(t)-Ye)<=ot)&&(i=this.x0,t>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*s):o=this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(s),f=Math.cos(s),d=f/(c+f-1),y=d*d,p=d*(2/c-1),_=p*p,w=Math.PI*this.R*(a*(d-_)+Math.sqrt(l*(d-_)*(d-_)-(_+l)*(y-_)))/(_+l);r<0&&(w=-w),i=this.x0+w;var b=l+d;return w=Math.PI*this.R*(p*b-a*Math.sqrt((_+l)*(l+1)-b*b))/(_+l),t>=0?o=this.y0+w:o=this.y0-w,n.x=i,n.y=o,n}function hde(n){var e,t,r,i,o,s,a,l,c,f,d,y,p;return n.x-=this.x0,n.y-=this.y0,d=Math.PI*this.R,r=n.x/d,i=n.y/d,o=r*r+i*i,s=-Math.abs(i)*(1+o),a=s-2*i*i+r*r,l=-2*s+1+2*i*i+o*o,p=i*i/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,c=(s-a*a/3/l)/l,f=2*Math.sqrt(-c/3),d=3*p/c/f,Math.abs(d)>1&&(d>=0?d=1:d=-1),y=Math.acos(d)/3,n.y>=0?t=(-f*Math.cos(y+Math.PI/3)-a/3/l)*Math.PI:t=-(-f*Math.cos(y+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<ot?e=this.long0:e=st(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r,this.over),n.x=e,n.y=t,n}var fde=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"],nH={init:ude,forward:cde,inverse:hde,names:fde};function rH(n,e,t,r,i,o){let s=r-e,a=Math.atan((1-o)*Math.tan(n)),l=Math.atan((1-o)*Math.tan(t)),c=Math.sin(a),f=Math.cos(a),d=Math.sin(l),y=Math.cos(l),p=s,_,w=100,b,S,T,A,N,O,W,X,Y,$,V,B,v,I;do{if(b=Math.sin(p),S=Math.cos(p),T=Math.sqrt(y*b*(y*b)+(f*d-c*y*S)*(f*d-c*y*S)),T===0)return{azi1:0,s12:0};A=c*d+f*y*S,N=Math.atan2(T,A),O=f*y*b/T,W=1-O*O,X=W!==0?A-2*c*d/W:0,Y=o/16*W*(4+o*(4-3*W)),_=p,p=s+(1-Y)*o*O*(N+Y*T*(X+Y*A*(-1+2*X*X)))}while(Math.abs(p-_)>1e-12&&--w>0);return w===0?{azi1:NaN,s12:NaN}:($=W*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))),V=1+$/16384*(4096+$*(-768+$*(320-175*$))),B=$/1024*(256+$*(-128+$*(74-47*$))),v=B*T*(X+B/4*(A*(-1+2*X*X)-B/6*X*(-3+4*T*T)*(-3+4*X*X))),I=i*(1-o)*V*(N-v),{azi1:Math.atan2(y*b,f*d-c*y*S),s12:I})}function iH(n,e,t,r,i,o){let s=Math.atan((1-o)*Math.tan(n)),a=Math.sin(s),l=Math.cos(s),c=Math.sin(t),f=Math.cos(t),d=Math.atan2(a,l*f),y=l*c,p=1-y*y,_=p*(i*i-i*(1-o)*(i*(1-o)))/(i*(1-o)*(i*(1-o))),w=1+_/16384*(4096+_*(-768+_*(320-175*_))),b=_/1024*(256+_*(-128+_*(74-47*_))),S=r/(i*(1-o)*w),T,A=100,N,O,W,X;do N=Math.cos(2*d+S),O=Math.sin(S),W=Math.cos(S),X=b*O*(N+b/4*(W*(-1+2*N*N)-b/6*N*(-3+4*O*O)*(-3+4*N*N))),T=S,S=r/(i*(1-o)*w)+X;while(Math.abs(S-T)>1e-12&&--A>0);if(A===0)return{lat2:NaN,lon2:NaN};let Y=a*O-l*W*f,$=Math.atan2(a*W+l*O*f,(1-o)*Math.sqrt(y*y+Y*Y)),V=Math.atan2(O*c,l*W-a*O*f),B=o/16*p*(4+o*(4-3*p)),v=V-(1-B)*o*y*(S+B*O*(N+B*W*(-1+2*N*N))),I=e+v;return{lat2:$,lon2:I}}function dde(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function pde(n){var e=n.x,t=n.y,r=Math.sin(n.y),i=Math.cos(n.y),o=st(e-this.long0,this.over),s,a,l,c,f,d,y,p,_,w,b;return this.sphere?Math.abs(this.sin_p12-1)<=ot?(n.x=this.x0+this.a*(Ye-t)*Math.sin(o),n.y=this.y0-this.a*(Ye-t)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=ot?(n.x=this.x0+this.a*(Ye+t)*Math.sin(o),n.y=this.y0+this.a*(Ye+t)*Math.cos(o),n):(_=this.sin_p12*r+this.cos_p12*i*Math.cos(o),y=Math.acos(_),p=y?y/Math.sin(y):1,n.x=this.x0+this.a*p*i*Math.sin(o),n.y=this.y0+this.a*p*(this.cos_p12*r-this.sin_p12*i*Math.cos(o)),n):(s=uf(this.es),a=cf(this.es),l=hf(this.es),c=ff(this.es),Math.abs(this.sin_p12-1)<=ot?(f=this.a*Vo(s,a,l,c,Ye),d=this.a*Vo(s,a,l,c,t),n.x=this.x0+(f-d)*Math.sin(o),n.y=this.y0-(f-d)*Math.cos(o),n):Math.abs(this.sin_p12+1)<=ot?(f=this.a*Vo(s,a,l,c,Ye),d=this.a*Vo(s,a,l,c,t),n.x=this.x0+(f+d)*Math.sin(o),n.y=this.y0+(f+d)*Math.cos(o),n):Math.abs(e)<ot&&Math.abs(t-this.lat0)<ot?(n.x=n.y=0,n):(w=rH(this.lat0,this.long0,t,e,this.a,this.f),b=w.azi1,n.x=w.s12*Math.sin(b),n.y=w.s12*Math.cos(b),n))}function gde(n){n.x-=this.x0,n.y-=this.y0;var e,t,r,i,o,s,a,l,c,f,d,y,p,_,w,b;return this.sphere?(e=Math.sqrt(n.x*n.x+n.y*n.y),e>2*Ye*this.a?void 0:(t=e/this.a,r=Math.sin(t),i=Math.cos(t),o=this.long0,Math.abs(e)<=ot?s=this.lat0:(s=$a(i*this.sin_p12+n.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-Ye,Math.abs(a)<=ot?this.lat0>=0?o=st(this.long0+Math.atan2(n.x,-n.y),this.over):o=st(this.long0-Math.atan2(-n.x,n.y),this.over):o=st(this.long0+Math.atan2(n.x*r,e*this.cos_p12*i-n.y*this.sin_p12*r),this.over)),n.x=o,n.y=s,n)):(l=uf(this.es),c=cf(this.es),f=hf(this.es),d=ff(this.es),Math.abs(this.sin_p12-1)<=ot?(y=this.a*Vo(l,c,f,d,Ye),e=Math.sqrt(n.x*n.x+n.y*n.y),p=y-e,s=Cg(p/this.a,l,c,f,d),o=st(this.long0+Math.atan2(n.x,-1*n.y),this.over),n.x=o,n.y=s,n):Math.abs(this.sin_p12+1)<=ot?(y=this.a*Vo(l,c,f,d,Ye),e=Math.sqrt(n.x*n.x+n.y*n.y),p=e-y,s=Cg(p/this.a,l,c,f,d),o=st(this.long0+Math.atan2(n.x,n.y),this.over),n.x=o,n.y=s,n):(_=Math.atan2(n.x,n.y),w=Math.sqrt(n.x*n.x+n.y*n.y),b=iH(this.lat0,this.long0,_,w,this.a,this.f),n.x=b.lon2,n.y=b.lat2,n))}var mde=["Azimuthal_Equidistant","aeqd"],oH={init:dde,forward:pde,inverse:gde,names:mde};function yde(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function _de(n){var e,t,r,i,o,s,a,l,c=n.x,f=n.y;return r=st(c-this.long0,this.over),e=Math.sin(f),t=Math.cos(f),i=Math.cos(r),s=this.sin_p14*e+this.cos_p14*t*i,o=1,(s>0||Math.abs(s)<=ot)&&(a=this.a*o*t*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*t*i)),n.x=a,n.y=l,n}function vde(n){var e,t,r,i,o,s,a;return n.x-=this.x0,n.y-=this.y0,e=Math.sqrt(n.x*n.x+n.y*n.y),t=$a(e/this.a),r=Math.sin(t),i=Math.cos(t),s=this.long0,Math.abs(e)<=ot?(a=this.lat0,n.x=s,n.y=a,n):(a=$a(i*this.sin_p14+n.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-Ye,Math.abs(o)<=ot?(this.lat0>=0?s=st(this.long0+Math.atan2(n.x,-n.y),this.over):s=st(this.long0-Math.atan2(-n.x,n.y),this.over),n.x=s,n.y=a,n):(s=st(this.long0+Math.atan2(n.x*r,e*this.cos_p14*i-n.y*this.sin_p14*r),this.over),n.x=s,n.y=a,n))}var xde=["ortho"],sH={init:yde,forward:_de,inverse:vde,names:xde};var Ni={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Or={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function wde(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ye-cr/2?this.face=Ni.TOP:this.lat0<=-(Ye-cr/2)?this.face=Ni.BOTTOM:Math.abs(this.long0)<=cr?this.face=Ni.FRONT:Math.abs(this.long0)<=Ye+cr?this.face=this.long0>0?Ni.RIGHT:Ni.LEFT:this.face=Ni.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Ede(n){var e={x:0,y:0},t,r,i,o,s,a,l={value:0};if(n.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(n.y)):t=n.y,r=n.x,this.face===Ni.TOP)o=Ye-t,r>=cr&&r<=Ye+cr?(l.value=Or.AREA_0,i=r-Ye):r>Ye+cr||r<=-(Ye+cr)?(l.value=Or.AREA_1,i=r>0?r-Mi:r+Mi):r>-(Ye+cr)&&r<=-cr?(l.value=Or.AREA_2,i=r+Ye):(l.value=Or.AREA_3,i=r);else if(this.face===Ni.BOTTOM)o=Ye+t,r>=cr&&r<=Ye+cr?(l.value=Or.AREA_0,i=-r+Ye):r<cr&&r>=-cr?(l.value=Or.AREA_1,i=-r):r<-cr&&r>=-(Ye+cr)?(l.value=Or.AREA_2,i=-r-Ye):(l.value=Or.AREA_3,i=r>0?-r+Mi:-r-Mi);else{var c,f,d,y,p,_,w;this.face===Ni.RIGHT?r=wy(r,+Ye):this.face===Ni.BACK?r=wy(r,+Mi):this.face===Ni.LEFT&&(r=wy(r,-Ye)),y=Math.sin(t),p=Math.cos(t),_=Math.sin(r),w=Math.cos(r),c=p*w,f=p*_,d=y,this.face===Ni.FRONT?(o=Math.acos(c),i=qS(o,d,f,l)):this.face===Ni.RIGHT?(o=Math.acos(f),i=qS(o,d,-c,l)):this.face===Ni.BACK?(o=Math.acos(-c),i=qS(o,d,-f,l)):this.face===Ni.LEFT?(o=Math.acos(-f),i=qS(o,d,c,l)):(o=i=0,l.value=Or.AREA_0)}return a=Math.atan(12/Mi*(i+Math.acos(Math.sin(i)*Math.cos(cr))-Ye)),s=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Or.AREA_1?a+=Ye:l.value===Or.AREA_2?a+=Mi:l.value===Or.AREA_3&&(a+=1.5*Mi),e.x=s*Math.cos(a),e.y=s*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,n.x=e.x,n.y=e.y,n}function bde(n){var e={lam:0,phi:0},t,r,i,o,s,a,l,c,f,d={value:0};if(n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a,r=Math.atan(Math.sqrt(n.x*n.x+n.y*n.y)),t=Math.atan2(n.y,n.x),n.x>=0&&n.x>=Math.abs(n.y)?d.value=Or.AREA_0:n.y>=0&&n.y>=Math.abs(n.x)?(d.value=Or.AREA_1,t-=Ye):n.x<0&&-n.x>=Math.abs(n.y)?(d.value=Or.AREA_2,t=t<0?t+Mi:t-Mi):(d.value=Or.AREA_3,t+=Ye),f=Mi/12*Math.tan(t),s=Math.sin(f)/(Math.cos(f)-1/Math.sqrt(2)),a=Math.atan(s),i=Math.cos(t),o=Math.tan(r),l=1-i*i*o*o*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Ni.TOP)c=Math.acos(l),e.phi=Ye-c,d.value===Or.AREA_0?e.lam=a+Ye:d.value===Or.AREA_1?e.lam=a<0?a+Mi:a-Mi:d.value===Or.AREA_2?e.lam=a-Ye:e.lam=a;else if(this.face===Ni.BOTTOM)c=Math.acos(l),e.phi=c-Ye,d.value===Or.AREA_0?e.lam=-a+Ye:d.value===Or.AREA_1?e.lam=-a:d.value===Or.AREA_2?e.lam=-a-Ye:e.lam=a<0?-a-Mi:-a+Mi;else{var y,p,_;y=l,f=y*y,f>=1?_=0:_=Math.sqrt(1-f)*Math.sin(a),f+=_*_,f>=1?p=0:p=Math.sqrt(1-f),d.value===Or.AREA_1?(f=p,p=-_,_=f):d.value===Or.AREA_2?(p=-p,_=-_):d.value===Or.AREA_3&&(f=p,p=_,_=-f),this.face===Ni.RIGHT?(f=y,y=-p,p=f):this.face===Ni.BACK?(y=-y,p=-p):this.face===Ni.LEFT&&(f=y,y=p,p=-f),e.phi=Math.acos(-_)-Ye,e.lam=Math.atan2(p,y),this.face===Ni.RIGHT?e.lam=wy(e.lam,-Ye):this.face===Ni.BACK?e.lam=wy(e.lam,-Mi):this.face===Ni.LEFT&&(e.lam=wy(e.lam,+Ye))}if(this.es!==0){var w,b,S;w=e.phi<0?1:0,b=Math.tan(e.phi),S=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),w&&(e.phi=-e.phi)}return e.lam+=this.long0,n.x=e.lam,n.y=e.phi,n}function qS(n,e,t,r){var i;return n<ot?(r.value=Or.AREA_0,i=0):(i=Math.atan2(e,t),Math.abs(i)<=cr?r.value=Or.AREA_0:i>cr&&i<=Ye+cr?(r.value=Or.AREA_1,i-=Ye):i>Ye+cr||i<=-(Ye+cr)?(r.value=Or.AREA_2,i=i>=0?i-Mi:i+Mi):(r.value=Or.AREA_3,i+=Ye)),i}function wy(n,e){var t=n+e;return t<-Mi?t+=Od:t>+Mi&&(t-=Od),t}var Sde=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],aH={init:wde,forward:Ede,inverse:bde,names:Sde};var QL=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],W1=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lH=.8487,uH=1.3523,cH=zo/5,Cde=1/cH,Ey=18,WS=function(n,e){return n[0]+e*(n[1]+e*(n[2]+e*n[3]))},Ide=function(n,e){return n[1]+e*(2*n[2]+e*3*n[3])};function Tde(n,e,t,r){for(var i=e;r;--r){var o=n(i);if(i-=o,Math.abs(o)<t)break}return i}function Dde(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Ade(n){var e=st(n.x-this.long0,this.over),t=Math.abs(n.y),r=Math.floor(t*cH);r<0?r=0:r>=Ey&&(r=Ey-1),t=zo*(t-Cde*r);var i={x:WS(QL[r],t)*e,y:WS(W1[r],t)};return n.y<0&&(i.y=-i.y),i.x=i.x*this.a*lH+this.x0,i.y=i.y*this.a*uH+this.y0,i}function Rde(n){var e={x:(n.x-this.x0)/(this.a*lH),y:Math.abs(n.y-this.y0)/(this.a*uH)};if(e.y>=1)e.x/=QL[Ey][0],e.y=n.y<0?-Ye:Ye;else{var t=Math.floor(e.y*Ey);for(t<0?t=0:t>=Ey&&(t=Ey-1);;)if(W1[t][0]>e.y)--t;else if(W1[t+1][0]<=e.y)++t;else break;var r=W1[t],i=5*(e.y-r[0])/(W1[t+1][0]-r[0]);i=Tde(function(o){return(WS(r,o)-e.y)/Ide(r,o)},i,ot,100),e.x/=WS(QL[t],i),e.y=(5*t+i)*Zr,n.y<0&&(e.y=-e.y)}return e.x=st(e.x+this.long0,this.over),e}var Mde=["Robinson","robin"],hH={init:Dde,forward:Ade,inverse:Rde,names:Mde};function Nde(){this.name="geocent"}function Pde(n){var e=kS(n,this.es,this.a);return e}function Lde(n){var e=OS(n,this.es,this.a,this.b);return e}var kde=["Geocentric","geocentric","geocent","Geocent"],fH={init:Nde,forward:Pde,inverse:Lde,names:kde};var Zs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},$1={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Ode(){if(Object.keys($1).forEach((function(t){if(typeof this[t]>"u")this[t]=$1[t].def;else{if($1[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);$1[t].num&&(this[t]=parseFloat(this[t]))}$1[t].degrees&&(this[t]=this[t]*Zr)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ye)<ot?this.mode=this.lat0<0?Zs.S_POLE:Zs.N_POLE:Math.abs(this.lat0)<ot?this.mode=Zs.EQUIT:(this.mode=Zs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var n=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(n),this.sw=Math.sin(n)}function Fde(n){n.x-=this.long0;var e=Math.sin(n.y),t=Math.cos(n.y),r=Math.cos(n.x),i,o;switch(this.mode){case Zs.OBLIQ:o=this.sinph0*e+this.cosph0*t*r;break;case Zs.EQUIT:o=t*r;break;case Zs.S_POLE:o=-e;break;case Zs.N_POLE:o=e;break}switch(o=this.pn1/(this.p-o),i=o*t*Math.sin(n.x),this.mode){case Zs.OBLIQ:o*=this.cosph0*e-this.sinph0*t*r;break;case Zs.EQUIT:o*=e;break;case Zs.N_POLE:o*=-(t*r);break;case Zs.S_POLE:o*=t*r;break}var s,a;return s=o*this.cg+i*this.sg,a=1/(s*this.sw*this.h1+this.cw),i=(i*this.cg-o*this.sg)*this.cw*a,o=s*a,n.x=i*this.a,n.y=o*this.a,n}function Bde(n){n.x/=this.a,n.y/=this.a;var e={x:n.x,y:n.y},t,r,i;i=1/(this.pn1-n.y*this.sw),t=this.pn1*n.x*i,r=this.pn1*n.y*this.cw*i,n.x=t*this.cg+r*this.sg,n.y=r*this.cg-t*this.sg;var o=wo(n.x,n.y);if(Math.abs(o)<ot)e.x=0,e.y=n.y;else{var s,a;switch(a=1-o*o*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/o+o/this.pn1),s=Math.sqrt(1-a*a),this.mode){case Zs.OBLIQ:e.y=Math.asin(s*this.sinph0+n.y*a*this.cosph0/o),n.y=(s-this.sinph0*Math.sin(e.y))*o,n.x*=a*this.cosph0;break;case Zs.EQUIT:e.y=Math.asin(n.y*a/o),n.y=s*o,n.x*=a;break;case Zs.N_POLE:e.y=Math.asin(s),n.y=-n.y;break;case Zs.S_POLE:e.y=-Math.asin(s);break}e.x=Math.atan2(n.x,n.y)}return n.x=e.x+this.long0,n.y=e.y,n}var jde=["Tilted_Perspective","tpers"],dH={init:Ode,forward:Fde,inverse:Bde,names:jde};function Ude(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var n=1-this.es,e=1/n;this.radius_p=Math.sqrt(n),this.radius_p2=n,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Gde(n){var e=n.x,t=n.y,r,i,o,s;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/wo(this.radius_p*Math.cos(t),Math.sin(t));if(i=a*Math.cos(e)*Math.cos(t),o=a*Math.sin(e)*Math.cos(t),s=a*Math.sin(t),(this.radius_g-i)*i-o*o-s*s*this.radius_p_inv2<0)return n.x=Number.NaN,n.y=Number.NaN,n;r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/wo(s,r)),n.y=this.radius_g_1*Math.atan(s/r)):(n.x=this.radius_g_1*Math.atan(o/r),n.y=this.radius_g_1*Math.atan(s/wo(o,r)))}else this.shape==="sphere"&&(r=Math.cos(t),i=Math.cos(e)*r,o=Math.sin(e)*r,s=Math.sin(t),r=this.radius_g-i,this.flip_axis?(n.x=this.radius_g_1*Math.atan(o/wo(s,r)),n.y=this.radius_g_1*Math.atan(s/r)):(n.x=this.radius_g_1*Math.atan(o/r),n.y=this.radius_g_1*Math.atan(s/wo(o,r))));return n.x=n.x*this.a,n.y=n.y*this.a,n}function zde(n){var e=-1,t=0,r=0,i,o,s,a;if(n.x=n.x/this.a,n.y=n.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*wo(1,r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*wo(1,t));var l=r/this.radius_p;if(i=t*t+l*l+e*e,o=2*this.radius_g*e,s=o*o-4*i*this.C,s<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-o-Math.sqrt(s))/(2*i),e=this.radius_g+a*e,t*=a,r*=a,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e),n.y=Math.atan(this.radius_p_inv2*Math.tan(n.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(n.y/this.radius_g_1),t=Math.tan(n.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(n.x/this.radius_g_1),r=Math.tan(n.y/this.radius_g_1)*Math.sqrt(1+t*t)),i=t*t+r*r+e*e,o=2*this.radius_g*e,s=o*o-4*i*this.C,s<0)return n.x=Number.NaN,n.y=Number.NaN,n;a=(-o-Math.sqrt(s))/(2*i),e=this.radius_g+a*e,t*=a,r*=a,n.x=Math.atan2(t,e),n.y=Math.atan(r*Math.cos(n.x)/e)}return n.x=n.x+this.long0,n}var Vde=["Geostationary Satellite View","Geostationary_Satellite","geos"],pH={init:Ude,forward:Gde,inverse:zde,names:Vde};var Y1=1.340264,X1=-.081106,Z1=893e-6,K1=.003796,$S=Math.sqrt(3)/2;function Hde(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function qde(n){var e=st(n.x-this.long0,this.over),t=n.y,r=Math.asin($S*Math.sin(t)),i=r*r,o=i*i*i;return n.x=e*Math.cos(r)/($S*(Y1+3*X1*i+o*(7*Z1+9*K1*i))),n.y=r*(Y1+X1*i+o*(Z1+K1*i)),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n}function Wde(n){n.x=(n.x-this.x0)/this.a,n.y=(n.y-this.y0)/this.a;var e=1e-9,t=12,r=n.y,i,o,s,a,l,c;for(c=0;c<t&&(i=r*r,o=i*i*i,s=r*(Y1+X1*i+o*(Z1+K1*i))-n.y,a=Y1+3*X1*i+o*(7*Z1+9*K1*i),r-=l=s/a,!(Math.abs(l)<e));++c);return i=r*r,o=i*i*i,n.x=$S*n.x*(Y1+3*X1*i+o*(7*Z1+9*K1*i))/Math.cos(r),n.y=Math.asin(Math.sin(r)/$S),n.x=st(n.x+this.long0,this.over),n}var $de=["eqearth","Equal Earth","Equal_Earth"],gH={init:Hde,forward:qde,inverse:Wde,names:$de};var J1=1e-10;function Yde(){var n;if(this.phi1=this.lat1,Math.abs(this.phi1)<J1)throw new Error;this.es?(this.en=my(this.es),this.m1=jc(this.phi1,this.am1=Math.sin(this.phi1),n=Math.cos(this.phi1),this.en),this.am1=n/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Zde,this.forward=Xde):(Math.abs(this.phi1)+J1>=Ye?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Jde,this.forward=Kde)}function Xde(n){var e=st(n.x-(this.long0||0),this.over),t=n.y,r,i,o;return r=this.am1+this.m1-jc(t,i=Math.sin(t),o=Math.cos(t),this.en),i=o*e/(r*Math.sqrt(1-this.es*i*i)),n.x=r*Math.sin(i),n.y=this.am1-r*Math.cos(i),n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Zde(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r,i;if(t=wo(n.x,n.y=this.am1-n.y),i=yy(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(i))<Ye)e=Math.sin(i),r=t*Math.atan2(n.x,n.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-Ye)<=J1)r=0;else throw new Error;return n.x=st(r+(this.long0||0),this.over),n.y=Wa(i),n}function Kde(n){var e=st(n.x-(this.long0||0),this.over),t=n.y,r,i;return i=this.cphi1+this.phi1-t,Math.abs(i)>J1?(n.x=i*Math.sin(r=e*Math.cos(t)/i),n.y=this.cphi1-i*Math.cos(r)):n.x=n.y=0,n.x=this.a*n.x+(this.x0||0),n.y=this.a*n.y+(this.y0||0),n}function Jde(n){n.x=(n.x-(this.x0||0))/this.a,n.y=(n.y-(this.y0||0))/this.a;var e,t,r=wo(n.x,n.y=this.cphi1-n.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Ye)throw new Error;return Math.abs(Math.abs(t)-Ye)<=J1?e=0:e=r*Math.atan2(n.x,n.y)/Math.cos(t),n.x=st(e+(this.long0||0),this.over),n.y=Wa(t),n}var Qde=["bonne","Bonne (Werner lat_1=90)"],mH={init:Yde,names:Qde};var yH={OBLIQUE:{forward:ipe,inverse:spe},TRANSVERSE:{forward:ope,inverse:ape}},YS={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function epe(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=OL.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);let n=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=$u(n);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let t,r=Object.keys(YS),i=a=>{if(typeof this[a]>"u")return;let l=parseFloat(this[a])*Zr;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){let l=r[a],c=YS[l],f=Object.entries(c);if(f.some(([y])=>typeof this[y]<"u")){t=c;for(let y=0;y<f.length;y++){let[p,_]=f[y],w=i(p);if(typeof w>"u")throw new Error("Missing parameter: "+p+".");this[_]=w}break}}if(!t)throw new Error("No valid parameters provided for ob_tran projection.");let{lamp:o,phip:s}=rpe(this,t);this.lamp=o,Math.abs(s)>ot?(this.cphip=Math.cos(s),this.sphip=Math.sin(s),this.projectionType=yH.OBLIQUE):this.projectionType=yH.TRANSVERSE}function tpe(n){return this.projectionType.forward(this,n)}function npe(n){return this.projectionType.inverse(this,n)}function rpe(n,e){let t,r;if(e===YS.ROTATE){let i=n.oLongC,o=n.oLatC,s=n.oAlpha;if(Math.abs(Math.abs(o)-Ye)<=ot)throw new Error("Invalid value for o_lat_c: "+n.o_lat_c+" should be < 90\xB0");r=i+Math.atan2(-1*Math.cos(s),-1*Math.sin(s)*Math.sin(o)),t=Math.asin(Math.cos(o)*Math.sin(s))}else if(e===YS.NEW_POLE)r=n.oLongP,t=n.oLatP;else{let i=n.oLong1,o=n.oLat1,s=n.oLong2,a=n.oLat2,l=Math.abs(o);if(Math.abs(o)>Ye-ot)throw new Error("Invalid value for o_lat_1: "+n.o_lat_1+" should be < 90\xB0");if(Math.abs(a)>Ye-ot)throw new Error("Invalid value for o_lat_2: "+n.o_lat_2+" should be < 90\xB0");if(Math.abs(o-a)<ot)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<ot)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(o)*Math.sin(a)*Math.cos(i)-Math.sin(o)*Math.cos(a)*Math.cos(s),Math.sin(o)*Math.cos(a)*Math.sin(s)-Math.cos(o)*Math.sin(a)*Math.sin(i)),t=Math.atan(-1*Math.cos(r-i)/Math.tan(o))}return{lamp:r,phip:t}}function ipe(n,e){let{x:t,y:r}=e;t+=n.long0;let i=Math.cos(t),o=Math.sin(r),s=Math.cos(r);e.x=st(Math.atan2(s*Math.sin(t),n.sphip*s*i+n.cphip*o)+n.lamp),e.y=Math.asin(n.sphip*o-n.cphip*s*i);let a=n.obliqueProjection.forward(e);return n.isIdentity&&(a.x*=zo,a.y*=zo),a}function ope(n,e){let{x:t,y:r}=e;t+=n.long0;let i=Math.cos(r),o=Math.cos(t);e.x=st(Math.atan2(i*Math.sin(t),Math.sin(r))+n.lamp),e.y=Math.asin(-1*i*o);let s=n.obliqueProjection.forward(e);return n.isIdentity&&(s.x*=zo,s.y*=zo),s}function spe(n,e){n.isIdentity&&(e.x*=Zr,e.y*=Zr);let t=n.obliqueProjection.inverse(e),{x:r,y:i}=t;if(r<Number.MAX_VALUE){r-=n.lamp;let o=Math.cos(r),s=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),n.sphip*a*o-n.cphip*s),e.y=Math.asin(n.sphip*s+n.cphip*a*o)}return e.x=st(e.x+n.long0),e}function ape(n,e){n.isIdentity&&(e.x*=Zr,e.y*=Zr);let t=n.obliqueProjection.inverse(e),{x:r,y:i}=t;if(r<Number.MAX_VALUE){let o=Math.cos(i);r-=n.lamp,e.x=Math.atan2(o*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(o*Math.cos(r))}return e.x=st(e.x+n.long0),e}var lpe=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"],_H={init:epe,forward:tpe,inverse:npe,names:lpe};function vH(n){n.Proj.projections.add(_y),n.Proj.projections.add(vy),n.Proj.projections.add(kV),n.Proj.projections.add(OV),n.Proj.projections.add(FV),n.Proj.projections.add(BV),n.Proj.projections.add(jV),n.Proj.projections.add(UV),n.Proj.projections.add(GV),n.Proj.projections.add(zV),n.Proj.projections.add(VV),n.Proj.projections.add(HV),n.Proj.projections.add(qV),n.Proj.projections.add($V),n.Proj.projections.add(YV),n.Proj.projections.add(ZV),n.Proj.projections.add(KV),n.Proj.projections.add(JV),n.Proj.projections.add(QV),n.Proj.projections.add(eH),n.Proj.projections.add(tH),n.Proj.projections.add(nH),n.Proj.projections.add(oH),n.Proj.projections.add(sH),n.Proj.projections.add(aH),n.Proj.projections.add(hH),n.Proj.projections.add(fH),n.Proj.projections.add(dH),n.Proj.projections.add(pH),n.Proj.projections.add(gH),n.Proj.projections.add(mH),n.Proj.projections.add(_H)}var xH=Object.assign(_V,{defaultDatum:"WGS84",Proj:$u,WGS84:new $u("WGS84"),Point:IV,toPoint:BS,defs:hy,nadgrid:GL,transform:Sg,mgrs:bV,version:"__VERSION__"});vH(xH);var Uc=xH;var bH,wH=()=>new DecompressionStream("deflate-raw");try{wH(),bH=n=>He(null,null,function*(){let e=wH(),t=e.writable.getWriter(),r=e.readable.getReader(),i,o=[],s=0,a=0,l;for(t.write(n),t.close();!(l=yield r.read()).done;)i=l.value,o.push(i),s+=i.length;return!o[1]&&i||(i=new Uint8Array(s),o.map(c=>(i.set(c,a),a+=c.length))),i})}catch{}var upe=new TextDecoder,ek=n=>{throw new Error("but-unzip~"+n)},EH=n=>upe.decode(n);function*SH(n,e=bH){let t=n.length-20,r=Math.max(t-65516,2);for(;(t=n.lastIndexOf(80,t-1))!==-1&&!(n[t+1]===75&&n[t+2]===5&&n[t+3]===6)&&t>r;);t===-1&&ek(2);let i=(c,f)=>n.subarray(t+=c,t+=f),o=new DataView(n.buffer,n.byteOffset),s=c=>o.getUint16(c+t,!0),a=c=>o.getUint32(c+t,!0),l=s(10);for(l!==s(8)&&ek(3),t=a(16);l--;){let c=s(10),f=s(30),d=s(32),y=a(20),p=a(42),_=EH(i(46,s(28))),w=EH(i(f,d)),b=t,S;t=p,S=i(30+s(26)+s(28),y),yield{filename:_,comment:w,read:()=>c&8?e(S):c?ek(1):S},t=b}}var cpe=/.+\.(shp|dbf|json|prj|cpg)$/i,CH=n=>He(null,null,function*(){let e={},t=[];for(let o of SH(n))cpe.test(o.filename)&&t.push(Promise.resolve(o.read()).then(s=>e[o.filename]=s));yield Promise.all(t);let r={},i=new TextDecoder;for(let[o,s]of Object.entries(e))o.slice(-3).toLowerCase()==="shp"||o.slice(-3).toLowerCase()==="dbf"?r[o]=new DataView(s.buffer,s.byteOffset,s.byteLength):r[o]=i.decode(s);return r});var hpe=globalThis.URL,IH=(n,e)=>{if(!e)return n;let t=new hpe(n);return t.pathname=`${t.pathname}.${e}`,t.href};function Ig(n,e){return He(this,null,function*(){let t=IH(n,e),r=e==="prj"||e==="cpg";try{let i=yield fetch(t);if(i.status>399)throw new Error(i.statusText);if(r)return i.text();let o=yield i.arrayBuffer();return new DataView(o)}catch(i){if(r||e==="dbf")return!1;throw i}})}function fpe(n){let e=0,t=1,r=n.length,i,o,s=[n[0][0],n[0][1],n[0][0],n[0][1]];for(;t<r;)i=o||n[0],o=n[t],e+=(o[0]-i[0])*(o[1]+i[1]),t++,o[0]<s[0]&&(s[0]=o[0]),o[1]<s[1]&&(s[1]=o[1]),o[0]>s[2]&&(s[2]=o[0]),o[1]>s[3]&&(s[3]=o[1]);return{ring:n,clockWise:e>0,bbox:s,children:[]}}function TH(n,e){return!(n.bbox[0]>e.bbox[0]||n.bbox[1]>e.bbox[1]||n.bbox[2]<e.bbox[2]||n.bbox[3]<e.bbox[3])}function AH(n,e=!1){let t=[],r=[];for(let s of n){let a=fpe(s);a.clockWise!==e?t.push(a):r.push(a)}let i=[];for(let s of r){let a;for(let l of t)TH(l,s)&&(a?TH(a,l)&&(a=l):a=l);a?a.children.push(s.ring):i.push(s)}if(e)return{outers:t,orphens:i};if(i.length&&!e){let s=AH(n,!0);if(s.orphens.length===0){let a=[];for(let l of s.outers)a.push([l.ring.toReversed()].concat(l.children.map(c=>c.toReversed())));return a}}let o=[];for(let s of t)o.push([s.ring].concat(s.children));return o}ro.prototype.parsePoint=function(n){return{type:"Point",coordinates:this.parseCoord(n,0)}};ro.prototype.parseZPoint=function(n){let e=this.parsePoint(n);return e.coordinates.push(n.getFloat64(16,!0)),e};ro.prototype.parsePointArray=function(n,e,t){let r=[],i=0;for(;i<t;)r.push(this.parseCoord(n,e)),e+=16,i++;return r};ro.prototype.parseZPointArray=function(n,e,t,r){let i=0;for(;i<t;)r[i].push(n.getFloat64(e,!0)),i++,e+=8;return r};ro.prototype.parseArrayGroup=function(n,e,t,r,i){let o=[],s=0,a,l=0,c;for(;s<r;)s++,t+=4,a=l,s===r?l=i:l=n.getInt32(t,!0),c=l-a,c&&(o.push(this.parsePointArray(n,e,c)),e+=c<<4);return o};ro.prototype.parseZArrayGroup=function(n,e,t,r){let i=0;for(;i<t;)r[i]=this.parseZPointArray(n,e,r[i].length,r[i]),e+=r[i].length<<3,i++;return r};ro.prototype.parseMultiPoint=function(n){let e={},t=n.getInt32(32,!0);if(!t)return null;let r=this.parseCoord(n,0),i=this.parseCoord(n,16);e.bbox=[r[0],r[1],i[0],i[1]];let o=36;return t===1?(e.type="Point",e.coordinates=this.parseCoord(n,o)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(n,o,t)),e};ro.prototype.parseZMultiPoint=function(n){let e=this.parseMultiPoint(n);if(!e)return null;let t;if(e.type==="Point")return e.coordinates.push(n.getFloat64(72,!0)),e;t=e.coordinates.length;let r=52+(t<<4);return e.coordinates=this.parseZPointArray(n,r,t,e.coordinates),e};ro.prototype.parsePolyline=function(n){let e={},t=n.getInt32(32,!0);if(!t)return null;let r=this.parseCoord(n,0),i=this.parseCoord(n,16);e.bbox=[r[0],r[1],i[0],i[1]];let o=n.getInt32(36,!0),s,a;return t===1?(e.type="LineString",s=44,e.coordinates=this.parsePointArray(n,s,o)):(e.type="MultiLineString",s=40+(t<<2),a=40,e.coordinates=this.parseArrayGroup(n,s,a,t,o)),e};ro.prototype.parseZPolyline=function(n){let e=this.parsePolyline(n);if(!e)return null;let t=e.coordinates.length,r;return e.type==="LineString"?(r=60+(t<<4),e.coordinates=this.parseZPointArray(n,r,t,e.coordinates),e):(r=56+(e.coordinates.reduce(function(o,s){return o+s.length},0)<<4)+(t<<2),e.coordinates=this.parseZArrayGroup(n,r,t,e.coordinates),e)};ro.prototype.polyFuncs=function(n){return n&&(n.type==="LineString"?(n.type="Polygon",n.coordinates=[n.coordinates],n):(n.coordinates=AH(n.coordinates),n.coordinates.length===1?(n.type="Polygon",n.coordinates=n.coordinates[0],n):(n.type="MultiPolygon",n)))};ro.prototype.parsePolygon=function(n){return this.polyFuncs(this.parsePolyline(n))};ro.prototype.parseZPolygon=function(n){return this.polyFuncs(this.parseZPolyline(n))};var DH={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function dpe(n){return n?function(e,t){let r=[e.getFloat64(t,!0),e.getFloat64(t+8,!0)];return n.inverse(r)}:function(e,t){return[e.getFloat64(t,!0),e.getFloat64(t+8,!0)]}}function ro(n,e){if(!(this instanceof ro))return new ro(n,e);this.buffer=n,this.headers=this.parseHeader(),this.shpFuncs(e),this.rows=this.getRows()}ro.prototype.shpFuncs=function(n){let e=this.headers.shpCode;if(e>20&&(e-=20),!(e in DH))throw new Error(`I don't know shp type "${e}"`);this.parseFunc=this[DH[e]],this.parseCoord=dpe(n)};ro.prototype.getShpCode=function(){return this.parseHeader().shpCode};ro.prototype.parseHeader=function(){let n=this.buffer;return{length:n.getInt32(24)<<1,version:n.getInt32(28,!0),shpCode:n.getInt32(32,!0),bbox:[n.getFloat64(36,!0),n.getFloat64(44,!0),n.getFloat64(52,!0),n.getFloat64(60,!0)]}};ro.prototype.getRows=function(){let n=100,e=this.buffer.byteLength-8,t=[],r;for(;n<=e&&(r=this.getRow(n),!!r);)n+=8,n+=r.len,r.type?t.push(this.parseFunc(r.data)):t.push(null);return t};ro.prototype.getRow=function(n){let e=this.buffer.getInt32(n),t=this.buffer.getInt32(n+4)<<1;if(t===0)return{id:e,len:t,type:0};if(!(n+t+8>this.buffer.byteLength))return{id:e,len:t,data:new DataView(this.buffer.buffer,this.buffer.byteOffset+n+12,t-4),type:this.buffer.getInt32(n+8,!0)}};function XS(n,e){return new ro(n,e).rows}var ppe=/^(?:ANSI\s)?(\d+)$/m;function tk(n,e){if(!n)return r;try{new TextDecoder(n.trim())}catch{var t=ppe.exec(n);return t&&!e?tk("windows-"+t[1],!0):(n=void 0,r)}return r;function r(i){var o=new TextDecoder(n||void 0),s=o.decode(i,{stream:!0})+o.decode();return s.replace(/\0/g,"").trim()}}function gpe(n){var e={};return e.lastUpdated=new Date(n.getUint8(1)+1900,n.getUint8(2),n.getUint8(3)),e.records=n.getUint32(4,!0),e.headerLen=n.getUint16(8,!0),e.recLen=n.getUint16(10,!0),e}function mpe(n,e,t){for(var r=[],i=32;i<e&&(r.push({name:t(new Uint8Array(n.buffer.slice(n.byteOffset+i,n.byteOffset+i+11))),dataType:String.fromCharCode(n.getUint8(i+11)),len:n.getUint8(i+16),decimal:n.getUint8(i+17)}),n.getUint8(i+32)!==13);)i+=32;return r}function ype(n,e,t,r,i){let o=new Uint8Array(n.buffer.slice(n.byteOffset+e,n.byteOffset+e+t));var s=i(o);switch(r){case"N":case"F":case"O":return parseFloat(s,10);case"D":return new Date(s.slice(0,4),parseInt(s.slice(4,6),10)-1,s.slice(6,8));case"L":return s.toLowerCase()==="y"||s.toLowerCase()==="t";default:return s}}function _pe(n,e,t,r){for(var i={},o=0,s=t.length,a,l;o<s;)l=t[o],a=ype(n,e,l.len,l.dataType,r),e+=l.len,typeof a<"u"&&(i[l.name]=a),o++;return i}function ZS(n,e){for(var t=tk(e),r=gpe(n),i=mpe(n,r.headerLen-1,t),o=(i.length+1<<5)+2,s=r.recLen,a=r.records,l=[];a;)l.push(_pe(n,o,i,t)),o+=s,a--;return l}var vpe=globalThis.URL,xpe=n=>{if(!n)throw new Error("forgot to pass buffer");if(by(n))return new Uint8Array(n);if(by(n.buffer))return n.BYTES_PER_ELEMENT===1?n:new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("invalid buffer like object")},wpe=new TextDecoder,MH=n=>{if(n){if(typeof n=="string")return n;if(by(n)||ArrayBuffer.isView(n)||nk(n))return wpe.decode(n)}},NH=n=>{if(!n)throw new Error("forgot to pass buffer");if(nk(n))return n;if(by(n))return new DataView(n);if(by(n.buffer))return new DataView(n.buffer,n.byteOffset,n.byteLength);throw new Error("invalid buffer like object")};function by(n){return n instanceof globalThis.ArrayBuffer||Object.prototype.toString.call(n)==="[object ArrayBuffer]"}function nk(n){return n instanceof globalThis.DataView||Object.prototype.toString.call(n)==="[object DataView]"}var rk=function([n,e]){let t={};t.type="FeatureCollection",t.features=[];let r=0,i=n.length;for(e||(e=[]);r<i;)t.features.push({type:"Feature",geometry:n[r],properties:e[r]||{}}),r++;return t},PH=function(n,e){return He(this,null,function*(){let t;n=xpe(n);let r=yield CH(n),i=[];e=e||[];for(t in r)t.indexOf("__MACOSX")===-1&&(t.slice(-4).toLowerCase()===".shp"?(i.push(t.slice(0,-4)),r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=r[t]):t.slice(-4).toLowerCase()===".prj"?r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=Uc(r[t]):t.slice(-5).toLowerCase()===".json"||e.indexOf(t.split(".").pop())>-1?i.push(t.slice(0,-3)+t.slice(-3).toLowerCase()):(t.slice(-4).toLowerCase()===".dbf"||t.slice(-4).toLowerCase()===".cpg")&&(r[t.slice(0,-3)+t.slice(-3).toLowerCase()]=r[t]));if(!i.length)throw new Error("no layers founds");let o=i.map(function(s){let a,l,c=s.lastIndexOf(".");return c>-1&&s.slice(c).indexOf("json")>-1?(a=JSON.parse(r[s]),a.fileName=s.slice(0,c)):e.indexOf(s.slice(c+1))>-1?(a=r[s],a.fileName=s):(r[s+".dbf"]&&(l=ZS(r[s+".dbf"],r[s+".cpg"])),a=rk([XS(r[s+".shp"],r[s+".prj"]),l]),a.fileName=s),a});return o.length===1?o[0]:o})};function Epe(n,e){return He(this,null,function*(){let t=yield Ig(n);return PH(t,e)})}var bpe=n=>He(null,null,function*(){let e=yield Promise.all([Ig(n,"shp"),Ig(n,"prj")]),t=!1;try{e[1]&&(t=Uc(e[1]))}catch{t=!1}return XS(e[0],t)}),Spe=n=>He(null,null,function*(){let[e,t]=yield Promise.all([Ig(n,"dbf"),Ig(n,"cpg")]);if(e)return ZS(e,t)}),RH=(n,e)=>new vpe(n,globalThis?.document?.location).pathname.slice(-4).toLowerCase()===e,Cpe=({shp:n,dbf:e,cpg:t,prj:r})=>{let i=[Tpe(n,r)];return e&&i.push(Dpe(e,t)),rk(i)},Ipe=function(n,e){return He(this,null,function*(){if(typeof n!="string"){if(by(n)||ArrayBuffer.isView(n)||nk(n))return PH(n);if(n.shp)return Cpe(n);throw new TypeError("must be a string, some sort of Buffer, or an object with at least a .shp property")}if(RH(n,".zip"))return Epe(n,e);RH(n,".shp")&&(n=n.slice(0,-4));let t=yield Promise.all([bpe(n),Spe(n)]);return rk(t)})},Tpe=function(n,e){if(n=NH(n),e=MH(e),typeof e=="string")try{e=Uc(e)}catch{e=!1}return XS(n,e)},Dpe=function(n,e){return n=NH(n),e=MH(e),ZS(n,e)},LH=Ipe;var OH=Ol(ok());var KS=class{static _epsgCache=new Map;static getProjection(e){return Uc(e)}static registerWktProjection(e){let t=e.replace(/\s+/g," ").trim(),r=this._epsgCache.get(t);if(r)return r;let i=this._generateCode(t);return Uc.defs(i)||(Uc.defs(i,t),KF(Uc)),this._epsgCache.set(t,i),i}static getEpsgCodeFromWkt(e){let t=e.replace(/\s+/g,"").toUpperCase();if(t.includes("GCS_WGS_1984")||t.includes('DATUM["D_WGS_1984"]'))return"EPSG:4326";if(t.includes("WGS_1984_WEB_MERCATOR"))return"EPSG:3857";if(t.includes("ITRF_1996"))return"EPSG:5254";throw new Error("EPSG code not found in WKT")}static transformPoint(e,t,r){let i=this.getProjection(t),o=this.getProjection(r);return Uc(i,o,e)}static _generateCode(e){return`CUSTOM:${this._hash(e)}`}static _hash(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return Math.abs(t).toString()}};var JS=class{type="zip";import(e){return He(this,null,function*(){let t=yield e.arrayBuffer(),r="EPSG:4326",i=yield LH(t),o=yield this.extractPrj(e);return o&&(r=KS.getEpsgCodeFromWkt(o)),{geojson:i,crs:r}})}extractPrj(e){return He(this,null,function*(){let t=yield OH.default.loadAsync(e),r=Object.values(t.files).find(i=>i.name.toLowerCase().endsWith(".prj"));return r?yield r.async("text"):null})}};var QS=class{type="geojson";import(e){return He(this,null,function*(){let t=yield e.text(),r=JSON.parse(t);return this._validate(r),{geojson:r,crs:this._detectCrs(r)}})}_detectCrs(e){let t=e?.crs?.properties?.name;return console.log("crsName:",t),t??"EPSG:4326"}_validate(e){if(e.type!=="FeatureCollection")throw new Error("Invalid GeoJSON: not a FeatureCollection");if(!Array.isArray(e.features))throw new Error("Invalid GeoJSON: features missing")}};var hi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Ape="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Rpe={rte:FH,trk:BH,wpt:jH},Mpe=nt(hi,{rte:vs(FH),trk:vs(BH),wpt:vs(jH)}),Npe=nt(hi,{text:Oe(Et,"linkText"),type:Oe(Et,"linkType")}),Ppe=nt(hi,{name:Oe(Et),email:oge,link:Q1}),Lpe=nt(hi,{name:Oe(Et),desc:Oe(Et),author:Oe(nge),copyright:Oe(rge),link:Q1,time:Oe(L1),keywords:Oe(Et),bounds:ige,extensions:eC}),kpe=nt(hi,{year:Oe(ga),license:Oe(Et)}),Ope=nt(hi,{rte:ct(uge),trk:ct(cge),wpt:ct(fge)}),sk=class extends _S{constructor(e){super(),e=e||{},this.dataProjection=rn("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,r=e.length;t<r;++t){let i=e[t];if(this.readExtensions_){let o=i.get("extensionsNode_")||null;this.readExtensions_(i,o)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(za(e)):Ga(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){let r=this.readMetadataFromNode(t);if(r)return r}return null}readMetadataFromNode(e){if(!hi.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(hi.includes(t.namespaceURI)&&t.localName==="metadata")return Mt({},Lpe,t,[]);return null}readFeatureFromNode(e,t){if(!hi.includes(e.namespaceURI))return null;let r=Rpe[e.localName];if(!r)return null;let i=r(e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,t){if(!hi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){let r=Mt([],Mpe,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);let r=nf("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ay),r.setAttributeNS(ay,"xsi:schemaLocation",Ape),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),Wr({node:r},Ope,tge,e,[t]),r}},Fpe=nt(hi,{name:Oe(Et),cmt:Oe(Et),desc:Oe(Et),src:Oe(Et),link:Q1,number:Oe(ga),extensions:eC,type:Oe(Et),rtept:sge}),Bpe=nt(hi,{ele:Oe(ar),time:Oe(L1)}),jpe=nt(hi,{name:Oe(Et),cmt:Oe(Et),desc:Oe(Et),src:Oe(Et),link:Q1,number:Oe(ga),type:Oe(Et),extensions:eC,trkseg:lge}),Upe=nt(hi,{trkpt:age}),Gpe=nt(hi,{ele:Oe(ar),time:Oe(L1)}),zpe=nt(hi,{ele:Oe(ar),time:Oe(L1),magvar:Oe(ar),geoidheight:Oe(ar),name:Oe(Et),cmt:Oe(Et),desc:Oe(Et),src:Oe(Et),link:Q1,sym:Oe(Et),type:Oe(Et),fix:Oe(Et),sat:Oe(ga),hdop:Oe(ar),vdop:Oe(ar),pdop:Oe(ar),ageofdgpsdata:Oe(ar),dgpsid:Oe(ga),extensions:eC}),Vpe=["text","type"],Hpe=nt(hi,{text:ct(mr),type:ct(mr)}),qpe=nt(hi,["name","cmt","desc","src","link","number","type","rtept"]),Wpe=nt(hi,{name:ct(mr),cmt:ct(mr),desc:ct(mr),src:ct(mr),link:ct(uk),number:ct(k1),type:ct(mr),rtept:gL(ct(ck))}),$pe=nt(hi,["ele","time"]),Ype=nt(hi,["name","cmt","desc","src","link","number","type","trkseg"]),Xpe=nt(hi,{name:ct(mr),cmt:ct(mr),desc:ct(mr),src:ct(mr),link:ct(uk),number:ct(k1),type:ct(mr),trkseg:gL(ct(hge))}),Zpe=wl("trkpt"),Kpe=nt(hi,{trkpt:ct(ck)}),Jpe=nt(hi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Qpe=nt(hi,{ele:ct(Ys),time:ct(ez),magvar:ct(Ys),geoidheight:ct(Ys),name:ct(mr),cmt:ct(mr),desc:ct(mr),src:ct(mr),link:ct(uk),sym:ct(mr),type:ct(mr),fix:ct(mr),sat:ct(k1),hdop:ct(Ys),vdop:ct(Ys),pdop:ct(Ys),ageofdgpsdata:ct(Ys),dgpsid:ct(k1)}),ege={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function tge(n,e,t){let r=n.getGeometry();if(r){let i=ege[r.getType()];if(i){let o=e[e.length-1].node;return nf(o.namespaceURI,i)}}}function ak(n,e,t,r){return n.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in r?(n.push(r.ele),delete r.ele,e.hasZ=!0):n.push(0),"time"in r?(n.push(r.time),delete r.time,e.hasM=!0):n.push(0),n}function lk(n,e,t){let r="XY",i=2;if(n.hasZ&&n.hasM?(r="XYZM",i=4):n.hasZ?(r="XYZ",i=3):n.hasM&&(r="XYM",i=3),i!==4){for(let o=0,s=e.length/4;o<s;o++)e[o*i]=e[o*4],e[o*i+1]=e[o*4+1],n.hasZ&&(e[o*i+2]=e[o*4+2]),n.hasM&&(e[o*i+2]=e[o*4+3]);if(e.length=e.length/4*i,t)for(let o=0,s=t.length;o<s;o++)t[o]=t[o]/4*i}return r}function nge(n,e){let t=Mt({},Ppe,n,e);if(t)return t}function rge(n,e){let t=Mt({},kpe,n,e);if(t){let r=n.getAttribute("author");return r!==null&&(t.author=r),t}}function ige(n,e){let t=e[e.length-1],r=n.getAttribute("minlat"),i=n.getAttribute("minlon"),o=n.getAttribute("maxlat"),s=n.getAttribute("maxlon");i!==null&&r!==null&&s!==null&&o!==null&&(t.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(s),parseFloat(o)]])}function oge(n,e){let t=e[e.length-1],r=n.getAttribute("id"),i=n.getAttribute("domain");r!==null&&i!==null&&(t.email=`${r}@${i}`)}function Q1(n,e){let t=e[e.length-1],r=n.getAttribute("href");r!==null&&(t.link=r),Fc(Npe,n,e)}function eC(n,e){let t=e[e.length-1];t.extensionsNode_=n}function sge(n,e){let t=Mt({},Bpe,n,e);if(t){let r=e[e.length-1],i=r.flatCoordinates,o=r.layoutOptions;ak(i,o,n,t)}}function age(n,e){let t=Mt({},Gpe,n,e);if(t){let r=e[e.length-1],i=r.flatCoordinates,o=r.layoutOptions;ak(i,o,n,t)}}function lge(n,e){let t=e[e.length-1];Fc(Upe,n,e);let r=t.flatCoordinates;t.ends.push(r.length)}function FH(n,e){let t=e[0],r=Mt({flatCoordinates:[],layoutOptions:{}},Fpe,n,e);if(!r)return;let i=r.flatCoordinates;delete r.flatCoordinates;let o=r.layoutOptions;delete r.layoutOptions;let s=lk(o,i),a=new to(i,s);Go(a,!1,t);let l=new eo(a);return l.setProperties(r,!0),l}function BH(n,e){let t=e[0],r=Mt({flatCoordinates:[],ends:[],layoutOptions:{}},jpe,n,e);if(!r)return;let i=r.flatCoordinates;delete r.flatCoordinates;let o=r.ends;delete r.ends;let s=r.layoutOptions;delete r.layoutOptions;let a=lk(s,i,o),l=new qs(i,a,o);Go(l,!1,t);let c=new eo(l);return c.setProperties(r,!0),c}function jH(n,e){let t=e[0],r=Mt({},zpe,n,e);if(!r)return;let i={},o=ak([],i,n,r),s=lk(i,o),a=new _o(o,s);Go(a,!1,t);let l=new eo(a);return l.setProperties(r,!0),l}function uk(n,e,t){n.setAttribute("href",e);let i=t[t.length-1].properties,o=[i.linkText,i.linkType];Wr({node:n},Hpe,es,o,t,Vpe)}function ck(n,e,t){let r=t[t.length-1],o=r.node.namespaceURI,s=r.properties;switch(n.setAttributeNS(null,"lat",String(e[1])),n.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(s.time=e[3]);case"XYZ":e[2]!==0&&(s.ele=e[2]);break;case"XYM":e[2]!==0&&(s.time=e[2]);break;default:}let l=n.nodeName=="rtept"?$pe[o]:Jpe[o],c=$s(s,l);Wr({node:n,properties:s},Qpe,es,c,t,l)}function uge(n,e,t){let r=t[0],i=e.getProperties(),o={node:n};o.properties=i;let s=e.getGeometry();if(s.getType()=="LineString"){let f=Go(s,!0,r);o.geometryLayout=f.getLayout(),i.rtept=f.getCoordinates()}let a=t[t.length-1].node,l=qpe[a.namespaceURI],c=$s(i,l);Wr(o,Wpe,es,c,t,l)}function cge(n,e,t){let r=t[0],i=e.getProperties(),o={node:n};o.properties=i;let s=e.getGeometry();if(s.getType()=="MultiLineString"){let f=Go(s,!0,r);i.trkseg=f.getLineStrings()}let a=t[t.length-1].node,l=Ype[a.namespaceURI],c=$s(i,l);Wr(o,Xpe,es,c,t,l)}function hge(n,e,t){let r={node:n};r.geometryLayout=e.getLayout(),r.properties={},Wr(r,Kpe,Zpe,e.getCoordinates(),t)}function fge(n,e,t){let r=t[0],i=t[t.length-1];i.properties=e.getProperties();let o=e.getGeometry();if(o.getType()=="Point"){let s=Go(o,!0,r);i.geometryLayout=s.getLayout(),ck(n,s.getCoordinates(),t)}}var UH=sk;var tC=class{type="gpx";import(e){return He(this,null,function*(){let t=yield e.text(),r=new UH().readFeatures(t);return{geojson:new no().writeFeaturesObject(r),crs:"EPSG:4326"}})}};var hk=class extends kd{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(nC(e),this.adaptOptions(t))}readFeatureFromText(e,t){return Ct()}readFeatures(e,t){return this.readFeaturesFromText(nC(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return Ct()}readGeometry(e,t){return this.readGeometryFromText(nC(e),this.adaptOptions(t))}readGeometryFromText(e,t){return Ct()}readProjection(e){return this.readProjectionFromText(nC(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return Ct()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return Ct()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return Ct()}};function nC(n){return typeof n=="string"?n:""}var GH=hk;var dge={POINT:_o,LINESTRING:to,POLYGON:jo,MULTIPOINT:ml,MULTILINESTRING:qs,MULTIPOLYGON:yl},zH="EMPTY",VH="Z",HH="M",pge="ZM",Dr={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},gge={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"},fk=class{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let e=this.nextChar_(),t=this.index_,r=e,i;if(e=="(")i=Dr.LEFT_PAREN;else if(e==",")i=Dr.COMMA;else if(e==")")i=Dr.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")i=Dr.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))i=Dr.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")i=Dr.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:i}}readNumber_(){let e,t=this.index_,r=!1,i=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(i=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!i&&(e=="e"||e=="E")||i&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e,t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}},dk=class{constructor(e){this.lexer_=e,this.token_={position:0,type:Dr.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){let t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY",t=this.token_;if(this.isTokenType(Dr.TEXT)){let r=t.value;r===VH?e="XYZ":r===HH?e="XYM":r===pge&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(Dr.LEFT_PAREN)){let e=[];do e.push(this.parseGeometry_());while(this.match(Dr.COMMA));if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(Dr.LEFT_PAREN)){let e=this.parsePoint_();if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(Dr.LEFT_PAREN)){let e=this.parsePointList_();if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(Dr.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(Dr.LEFT_PAREN)){let e;if(this.token_.type==Dr.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(Dr.LEFT_PAREN)){let e=this.parseLineStringTextList_();if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(Dr.LEFT_PAREN)){let e=this.parsePolygonTextList_();if(this.match(Dr.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){let e=[],t=this.layout_.length;for(let r=0;r<t;++r){let i=this.token_;if(this.match(Dr.NUMBER))e.push(i.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){let e=[this.parsePoint_()];for(;this.match(Dr.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){let e=[this.parsePointText_()];for(;this.match(Dr.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){let e=[this.parseLineStringText_()];for(;this.match(Dr.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){let e=[this.parsePolygonText_()];for(;this.match(Dr.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){let e=this.isTokenType(Dr.TEXT)&&this.token_.value==zH;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let e=this.token_;if(this.match(Dr.TEXT)){let t=e.value;this.layout_=this.parseGeometryLayout_();let r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new _s([]);let s=this.parseGeometryCollectionText_();return new _s(s)}let i=dge[t];if(!i)throw new Error("Invalid geometry type: "+t);let o;if(r)t=="POINT"?o=[NaN,NaN]:o=[];else switch(t){case"POINT":{o=this.parsePointText_();break}case"LINESTRING":{o=this.parseLineStringText_();break}case"POLYGON":{o=this.parsePolygonText_();break}case"MULTIPOINT":{o=this.parseMultiPointText_();break}case"MULTILINESTRING":{o=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{o=this.parseMultiPolygonText_();break}default:break}return new i(o,this.layout_)}throw new Error(this.formatErrorMessage_())}},pk=class extends GH{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){let t=new fk(e);return new dk(t).parse()}readFeatureFromText(e,t){let r=this.readGeometryFromText(e,t),i=new eo;return i.setGeometry(r),i}readFeaturesFromText(e,t){let r=[],i=this.readGeometryFromText(e,t);this.splitCollection_&&i.getType()=="GeometryCollection"?r=i.getGeometriesArray():r=[i];let o=[];for(let s=0,a=r.length;s<a;++s){let l=new eo;l.setGeometry(r[s]),o.push(l)}return o}readGeometryFromText(e,t){let r=this.parse_(e);return Go(r,!1,t)}writeFeatureText(e,t){let r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);let r=[];for(let o=0,s=e.length;o<s;++o)r.push(e[o].getGeometry());let i=new _s(r);return this.writeGeometryText(i,t)}writeGeometryText(e,t){return $H(Go(e,!0,t))}};function qH(n){let e=n.getCoordinates();return e.length===0?"":e.join(" ")}function mge(n){let e=[],t=n.getPoints();for(let r=0,i=t.length;r<i;++r)e.push("("+qH(t[r])+")");return e.join(",")}function yge(n){let e=[],t=n.getGeometries();for(let r=0,i=t.length;r<i;++r)e.push($H(t[r]));return e.join(",")}function gk(n){let e=n.getCoordinates(),t=[];for(let r=0,i=e.length;r<i;++r)t.push(e[r].join(" "));return t.join(",")}function _ge(n){let e=[],t=n.getLineStrings();for(let r=0,i=t.length;r<i;++r)e.push("("+gk(t[r])+")");return e.join(",")}function WH(n){let e=[],t=n.getLinearRings();for(let r=0,i=t.length;r<i;++r)e.push("("+gk(t[r])+")");return e.join(",")}function vge(n){let e=[],t=n.getPolygons();for(let r=0,i=t.length;r<i;++r)e.push("("+WH(t[r])+")");return e.join(",")}function xge(n){let e=n.getLayout(),t="";return(e==="XYZ"||e==="XYZM")&&(t+=VH),(e==="XYM"||e==="XYZM")&&(t+=HH),t}var wge={Point:qH,LineString:gk,Polygon:WH,MultiPoint:mge,MultiLineString:_ge,MultiPolygon:vge,GeometryCollection:yge};function $H(n){let e=n.getType(),t=wge[e],r=t(n),i=gge[e];if(typeof n.getFlatCoordinates=="function"){let o=xge(n);o.length>0&&(i+=" "+o)}return r.length===0?i+" "+zH:i+"("+r+")"}var ex=pk;var rC=class{type="wkt";import(e){return He(this,null,function*(){let t=yield e.text(),r=new ex().readFeatures(t);return{geojson:new no().writeFeaturesObject(r),crs:"EPSG:4326"}})}};var iC=class n{type="kml";export(e){let r=new no().readFeatures(e.geojson,{dataProjection:e.crs,featureProjection:"EPSG:4326"}),i=new TS({extractStyles:!0}).writeFeatures(r,{featureProjection:"EPSG:4326"}),o=new Blob([i],{type:"application/vnd.google-earth.kml+xml"});return Promise.resolve(o)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sy=class{static toEPSG4326(e,t){if(t==="EPSG:4326")return e;let r=new no,i=r.readFeatures(e,{dataProjection:t,featureProjection:"EPSG:4326"});return r.writeFeaturesObject(i)}};var wq=Ol(xq());var hC=class{type="zip";export(e){return He(this,null,function*(){if(e?.geojson===void 0||e?.crs===void 0)throw new Error("Invalid data");let t=Sy.toEPSG4326(e.geojson,e.crs);e.geojson.features.forEach(o=>{o.properties||(o.properties={});for(let s in o.properties)o.properties[s]===void 0&&(o.properties[s]=null)});let r={folder:"export_layers",filename:"map_data",outputType:"blob",compression:"DEFLATE",types:{point:"points",polygon:"polygons",polyline:"lines"}};return wq.default.zip(t,r)})}};var fC=class{type="geojson";export(e){return He(this,null,function*(){let t=Sy.toEPSG4326(e.geojson,e.crs),r=JSON.stringify(t,null,2);return new Blob([r],{type:"application/geo+json"})})}};var Bd=class n{dataSignal=Gn(null);_importStrategies=[new DS,new JS,new QS,new tC,new rC];_exportStrategies=[new iC,new hC,new fC];currentData(){return this.dataSignal()}setData(e){this.dataSignal.set(e)}import(e){return He(this,null,function*(){let t=e.name.split(".").pop()?.toLowerCase(),r=this._importStrategies.find(o=>o.type===t);if(!r)throw new Error(`Unsupported file type: ${t}`);let i=yield r.import(e);this.dataSignal.set(i)})}export(e){return He(this,null,function*(){let t=this.dataSignal();if(!t)throw new Error("No geo data loaded");let r=this._exportStrategies.find(i=>i.type===e);if(!r)throw new Error(`Export strategy not found: ${e}`);return yield r.export(t)})}exportAllData(e,t){return He(this,null,function*(){let r=this._exportStrategies.find(o=>o.type===e);if(!r)throw new Error(`Export strategy not found: ${e}`);let i=t?{geojson:t,crs:"EPSG:4326"}:this.dataSignal();if(!i)throw new Error("No geo data to export");return yield r.export(i)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Eo=class n{rightClickedFeature=Gn(null);_map=Gn(null);_hoveredFeatureInfo=Gn(null);_vectorLayers=Gn([]);hoverSubject=new Jt;_highlightSource;map=this._map.asReadonly();vectorLayers=this._vectorLayers.asReadonly();hoveredFeatureInfo=this._hoveredFeatureInfo.asReadonly();setMap(e){this._map.set(e),this._initialHoverInteraction(e),this.refreshVectorLayers()}handleRightClick(e){e.preventDefault();let t=this.map();if(!t)return;let r=t.getEventPixel(e),i=t.forEachFeatureAtPixel(r,o=>o,{layerFilter:o=>o.get("type")==="vector",hitTolerance:5});if(i){let o=i.getProperties();this.rightClickedFeature.set(tn(dt({ol_uid:_t(i)},o),{clientX:e.clientX,clientY:e.clientY,feature:i}))}else this.rightClickedFeature.set(null)}getLayersByType(e){return this.map().getLayers().getArray().filter(t=>t.get("type")===e)}setBasemapVisibility(e){this.getLayersByType("basemap").forEach(r=>{r.setVisible(!1)}),e.layer.setVisible(!0)}zoomToVectorLayer(e){let t=e.getSource();if(!t)return;let r=t.getExtent();if(!r||r.length===0||Ls(r))return;let i=this.map();if(!i)return;let o=i.getView();if(!o)return;let s=o.getResolution(),a=Zo(r,s*20);o.fit(a,{duration:500})}removeVectorLayer(e){let t=this.map();t&&(t.removeLayer(e),this.refreshVectorLayers())}refreshVectorLayers(){let e=this.map();if(e){let t=e.getLayers().getArray().filter(r=>r.get("type")==="vector");this._vectorLayers.set([...t])}}getImportedSource(){let e=this.map();if(!e)throw new Error("Map has not been initialized yet.");let r=e.getLayers().getArray().find(i=>i.get("id")==="imported");return r?r.getSource():(console.warn("Imported layer not found. Returning an empty source."),new ou)}getVectorSource(){let e=this.map();if(!e)throw new Error("Map not initialized");let t=e.getLayers().getArray(),r=t.find(o=>o.get("id")==="drawing");if(r)return r.getSource();let i=t.find(o=>o.get("type")==="vector");return i?i.getSource():new ou}_initialHoverInteraction(e){this._highlightSource=new ou;let t=new ef({source:this._highlightSource,style:this.HOVER_STYLE,zIndex:9999});e.addLayer(t),this.hoverSubject.pipe(FD(16,fc,{leading:!0,trailing:!0}),fE((r,i)=>r.pixel[0]===i.pixel[0]&&r.pixel[1]===i.pixel[1])).subscribe(r=>{this._performHoverCheck(r,e)}),e.on("pointermove",r=>this.hoverSubject.next(r))}HOVER_STYLE=new ri({stroke:new xi({color:"#fbbf24",width:5}),fill:new qr({color:"rgba(251, 191, 36, 0.4)"}),image:new da({radius:8,fill:new qr({color:"#fbbf24"}),stroke:new xi({color:"#ffffff",width:2})})});_performHoverCheck(e,t){let r=t.forEachFeatureAtPixel(e.pixel,a=>a,{layerFilter:a=>a.get("type")==="vector",hitTolerance:3}),i=r?_t(r):null,o=this.hoveredFeatureInfo()?.ol_uid;if(this._highlightSource&&i!==o)if(this._highlightSource.clear(!0),r&&r instanceof eo){this._highlightSource.addFeature(r);let s=r.getProperties(),{geometry:a}=s,l=_p(s,["geometry"]);this._hoveredFeatureInfo.set(dt({ol_uid:i},l)),t.getTargetElement().style.cursor="pointer"}else this._hoveredFeatureInfo.set(null),t.getTargetElement().style.cursor=""}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};function zge(n,e){if(n&1){let t=Di();Qe(0,"img",34),yn("error",function(){tr(t);let i=Dn().$implicit,o=Dn();return nr(o.handleImageError(i))}),it()}if(n&2){let t=Dn().$implicit;Cr("src",t.get("thumbnail"),LR)("alt",t.get("name"))}}function Vge(n,e){n&1&&(Qe(0,"div",35)(1,"span",36),St(2,"MAP"),it()())}function Hge(n,e){n&1&&(Qe(0,"div",37),yr(),Qe(1,"svg",38),Kt(2,"path",39),it()())}function qge(n,e){if(n&1){let t=Di();Qe(0,"button",27),yn("click",function(){let i=tr(t).$implicit,o=Dn();return nr(o.setBaseLayerVisibility(i))}),Qe(1,"div",28),Ji(2,zge,1,2,"img",29)(3,Vge,3,0,"div",30),it(),Qe(4,"div",31)(5,"p",32),St(6),it()(),Ji(7,Hge,3,0,"div",33),it()}if(n&2){let t=e.$implicit;bc("border-indigo-500",t.getVisible())("border-slate-200",!t.getVisible())("ring-2",t.getVisible())("ring-indigo-100",t.getVisible()),Xt(2),Cr("ngIf",t.get("thumbnail")),Xt(),Cr("ngIf",!t.get("thumbnail")),Xt(3),Ko(" ",t.get("name").replace("Stadia Maps ","")," "),Xt(),Cr("ngIf",t.getVisible())}}function Wge(n,e){if(n&1){let t=Di();Qe(0,"div",40)(1,"div",41)(2,"button",42),yn("click",function(){let i=tr(t).$implicit,o=Dn();return nr(o.toggleLayerVisibility(i))}),Kt(3,"span",43),it(),Qe(4,"span",44),St(5),it()(),Qe(6,"div",45)(7,"button",46),yn("click",function(){let i=tr(t).$implicit,o=Dn();return nr(o.zoomToLayer(i))}),yr(),Qe(8,"svg",47),Kt(9,"path",48),it()(),po(),Qe(10,"button",49),yr(),Qe(11,"svg",47),Kt(12,"path",50),it()()()()}if(n&2){let t=e.$implicit;Xt(2),bc("bg-indigo-600",t.getVisible())("bg-slate-200",!t.getVisible()),Xt(),bc("translate-x-3",t.getVisible())("translate-x-0",!t.getVisible()),Xt(),bc("opacity-50",!t.getVisible()),Xt(),Ko(" ",t.get("name")," ")}}var dC=class n{mapService=Me(Eo);basemaps=yv(()=>{let e=this.mapService.map();if(!e)return[];let t=e.getLayers().getArray().filter(r=>r.get("type")==="basemap");return console.log("bm",t),t});layers=this.mapService.vectorLayers;setBaseLayerVisibility(e){this.mapService.getLayersByType("basemap").forEach(r=>{r.setVisible(!1)}),e.setVisible(!0)}toggleLayerVisibility(e){let t=e.getVisible();e.setVisible(!t)}zoomToLayer(e){this.mapService.zoomToVectorLayer(e)}removeLayer(e){this.mapService.removeVectorLayer(e)}getActiveBasemapName(){let e=this.basemaps().find(t=>t.getVisible());return e?e.get("name").replace("Stadia Maps ",""):"Select"}handleImageError(e){let t="assets/map-previews/osm.webp";e.get("thumbnail")!==t&&e.set("thumbnail",t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-layer-panel"]],decls:34,vars:4,consts:[[1,"absolute","top-4","right-4","z-20","w-72","flex","flex-col","bg-white/90","backdrop-blur-xl","rounded-2xl","shadow-[0_20px_50px_rgba(0,0,0,0.1)]","border","border-slate-200/60","text-slate-700","overflow-hidden","ring-1","ring-slate-900/5"],[1,"px-4","py-3","bg-slate-50/80","border-b","border-slate-200/60","flex","items-center","justify-between"],[1,"flex","items-center","gap-2.5"],[1,"p-1.5","bg-indigo-600","rounded-lg","shadow-sm","shadow-indigo-200"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2.5","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],[1,"font-bold","text-[11px]","uppercase","tracking-wider","text-slate-800"],[1,"text-[9px]","font-black","px-2","py-0.5","rounded-full","bg-slate-200","text-slate-600","tracking-tighter"],[1,"overflow-y-auto","max-h-[calc(100vh-200px)]","custom-scrollbar"],[1,"p-3","border-b","border-slate-100","bg-slate-50/30"],[1,"px-2","mb-2","flex","items-center","justify-between"],[1,"text-[10px]","font-bold","text-slate-400","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-1","h-1","rounded-full","bg-indigo-400"],[1,"text-[9px]","font-medium","text-indigo-500","bg-indigo-50","px-1.5","py-0.5","rounded"],[1,"flex","gap-2","overflow-x-auto","pb-2","px-1","custom-scrollbar-horizontal","snap-x"],["class","relative flex-shrink-0 w-20 h-14 rounded-lg border-2 transition-all duration-300 snap-center overflow-hidden group",3,"border-indigo-500","border-slate-200","ring-2","ring-indigo-100","click",4,"ngFor","ngForOf"],[1,"p-3"],[1,"px-2","mb-2","text-[10px]","font-bold","text-slate-400","uppercase","tracking-widest","flex","items-center","gap-2"],[1,"w-1","h-1","rounded-full","bg-slate-300"],[1,"space-y-1"],["class","group flex items-center justify-between p-2 rounded-xl transition-all duration-200 hover:bg-slate-50 border border-transparent hover:border-slate-100 shadow-none hover:shadow-sm",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-slate-50/80","border-t","border-slate-200/60","flex","justify-between","items-center","text-[10px]"],[1,"flex","items-center","gap-2","font-semibold","text-slate-500","italic"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-emerald-500"],[1,"font-bold","text-slate-400"],[1,"relative","flex-shrink-0","w-20","h-14","rounded-lg","border-2","transition-all","duration-300","snap-center","overflow-hidden","group",3,"click"],[1,"absolute","inset-0","bg-slate-200"],["class","w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",3,"src","alt","error",4,"ngIf"],["class","w-full h-full flex items-center justify-center bg-slate-300",4,"ngIf"],[1,"absolute","bottom-0","inset-x-0","bg-white/90","backdrop-blur-sm","py-0.5","px-1","text-center","border-t","border-slate-100"],[1,"text-[8px]","font-bold","text-slate-600","truncate","uppercase","tracking-tighter"],["class","absolute top-1 right-1 bg-indigo-500 rounded-full p-0.5 shadow-sm",4,"ngIf"],[1,"w-full","h-full","object-cover","transition-transform","duration-500","group-hover:scale-110",3,"error","src","alt"],[1,"w-full","h-full","flex","items-center","justify-center","bg-slate-300"],[1,"text-[10px]","font-bold","text-slate-500"],[1,"absolute","top-1","right-1","bg-indigo-500","rounded-full","p-0.5","shadow-sm"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","4",1,"w-2","h-2","text-white"],["stroke-linecap","round","stroke-linejoin","round","d","M5 13l4 4L19 7"],[1,"group","flex","items-center","justify-between","p-2","rounded-xl","transition-all","duration-200","hover:bg-slate-50","border","border-transparent","hover:border-slate-100","shadow-none","hover:shadow-sm"],[1,"flex","items-center","gap-3","min-w-0"],[1,"relative","inline-flex","h-4","w-7","shrink-0","cursor-pointer","rounded-full","border-2","border-transparent","transition-colors","duration-200","focus:outline-none",3,"click"],[1,"pointer-events-none","inline-block","h-3","w-3","transform","rounded-full","bg-white","shadow","ring-0","transition","duration-200","ease-in-out"],[1,"truncate","text-[11px]","font-medium","text-slate-600","group-hover:text-slate-900","transition-colors"],[1,"flex","items-center","gap-1","opacity-0","group-hover:opacity-100","transition-all","duration-200"],["title","Focus Extent",1,"p-1.5","rounded-lg","hover:bg-indigo-100","text-slate-400","hover:text-indigo-600","transition-colors",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2.5",1,"w-3.5","h-3.5"],["d","M15 3h6m0 0v6m0-6L14 10M9 21H3m0 0v-6m0 6l7-7"],[1,"p-1.5","rounded-lg","hover:bg-red-50","text-slate-300","hover:text-red-500","transition-colors"],["d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(Qe(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),yr(),Qe(4,"svg",4),Kt(5,"path",5),it()(),po(),Qe(6,"span",6),St(7,"Layer Panel"),it()(),Qe(8,"span",7),St(9,"V1.0"),it()(),Qe(10,"div",8)(11,"div",9)(12,"div",10)(13,"h3",11),Kt(14,"span",12),St(15," Basemaps "),it(),Qe(16,"span",13),St(17),it()(),Qe(18,"div",14),Ji(19,qge,8,12,"button",15),it()(),Qe(20,"div",16)(21,"h3",17),Kt(22,"span",18),St(23," Active Layers "),it(),Qe(24,"div",19),Ji(25,Wge,13,11,"div",20),it()()(),Qe(26,"div",21)(27,"div",22)(28,"span",23),Kt(29,"span",24)(30,"span",25),it(),St(31," System Online "),it(),Qe(32,"span",26),St(33),it()()()),t&2&&(Xt(17),Ko(" ",r.getActiveBasemapName()," "),Xt(2),Cr("ngForOf",r.basemaps()),Xt(6),Cr("ngForOf",r.layers()),Xt(8),Ko("",r.layers().length," Sources"))},dependencies:[zi,k2,dl],encapsulation:2})};var $ge='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',Yge='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',Xge='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',Zge={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_toner_dark:{extension:"png"},stamen_toner_blacklite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},Kge={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_dark:{minZoom:0,maxZoom:20,retina:!0},stamen_toner_blacklite:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}},Sk=class extends yg{constructor(e){let t=e.layer.indexOf("-"),r=t==-1?e.layer:e.layer.slice(0,t),i=Kge[r]||{minZoom:0,maxZoom:20,retina:!0},o=Zge[e.layer],s=e.apiKey?"?api_key="+e.apiKey:"",a=i.retina&&e.retina?"@2x":"",l=e.url!==void 0?e.url:"https://tiles.stadiamaps.com/tiles/"+e.layer+"/{z}/{x}/{y}"+a+"."+o.extension+s,c=[$ge,Yge,oL];e.layer.startsWith("stamen_")&&c.splice(1,0,Xge),super({attributions:c,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:i.maxZoom,minZoom:e.minZoom!==void 0?e.minZoom:i.minZoom,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:l,tilePixelRatio:a?2:1,wrapX:e.wrapX,zDirection:e.zDirection})}},Eq=Sk;var pC=class n{constructor(e){this._mapService=e;l0(()=>{let t=this._mapService.map();t&&(console.log("Map detected via Signal!"),this.initPointerListener(t))})}formattedCoords="00.0000, 00.0000";ticking=!1;initPointerListener(e){e.on("pointermove",t=>{this.ticking||(window.requestAnimationFrame(()=>{this._updateCoords(e,t.pixel),this.ticking=!1}),this.ticking=!0)})}_updateCoords(e,t){let r=e.getCoordinateFromPixel(t);if(r){let i=YF(r);this.formattedCoords=zF(i,"{y}, {x}",4)}}static \u0275fac=function(t){return new(t||n)(go(Eo))};static \u0275cmp=vr({type:n,selectors:[["app-mouse-position"]],decls:14,vars:1,consts:[[1,"absolute","bottom-2","left-1","z-20","flex","items-center","gap-3","px-3","py-2","bg-white/80","backdrop-blur-md","rounded-xl","shadow-lg","border","border-white/40","ring-1","ring-black/5","transition-all","duration-300","hover:bg-white/95"],[1,"flex","items-center","justify-center","w-8","h-8","rounded-lg","bg-slate-100","text-slate-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"flex","flex-col"],[1,"text-[9px]","font-bold","text-slate-400","uppercase","tracking-widest","leading-none","mb-1"],[1,"text-xs","font-mono","font-semibold","text-slate-700","tabular-nums"],[1,"flex","items-center","justify-center","ml-1"],[1,"relative","flex","h-2","w-2"],[1,"animate-ping","absolute","inline-flex","h-full","w-full","rounded-full","bg-emerald-400","opacity-75"],[1,"relative","inline-flex","rounded-full","h-2","w-2","bg-emerald-500"]],template:function(t,r){t&1&&(Ti(0,"div",0)(1,"div",1),yr(),Ti(2,"svg",2),Ec(3,"path",3)(4,"path",4),Gi()(),po(),Ti(5,"div",5)(6,"span",6),St(7," Coordinates "),Gi(),Ti(8,"span",7),St(9),Gi()(),Ti(10,"div",8)(11,"span",9),Ec(12,"span",10)(13,"span",11),Gi()()()),t&2&&(Xt(9),Ko(" ",r.formattedCoords," "))},encapsulation:2})};function Tg(n,e){let t=n.length;return e<0?n[e+t]:e>=t?n[e-t]:n[e]}function Dg(n,e){let t=n.length,r=Math.floor(e),i=e-r;r>=t?r-=t:r<0&&(r+=t);let o=r+1;o>=t&&(o-=t);let s=n[r],a=s[0],l=s[1],c=n[o],f=c[0]-a,d=c[1]-l;return[a+f*i,l+d*i]}var gC={index:-1,endIndex:NaN,closestTargetDistance:1/0};function bq(n,e,t,r){let i=n[0],o=n[1],s=1/0,a=-1,l=NaN;for(let d=0;d<e.targets.length;++d){let y=e.targets[d],p=y.coordinates,_=1/0,w;for(let b=0;b<p.length-1;++b){let S=p[b],T=p[b+1],A=Iq(i,o,S,T);A.squaredDistance<_&&(_=A.squaredDistance,w=b+A.along)}_<s&&(s=_,y.ring&&e.targetIndex===d&&(y.endIndex>y.startIndex?w<y.startIndex&&(w+=p.length):y.endIndex<y.startIndex&&w>y.startIndex&&(w-=p.length)),l=w,a=d)}let c=e.targets[a],f=c.ring;if(e.targetIndex===a&&f){let d=Dg(c.coordinates,l),y=t.getPixelFromCoordinate(d),p=t.getPixelFromCoordinate(e.startCoord);bw(y,p)>r&&(f=!1)}if(f){let d=c.coordinates,y=d.length,p=c.startIndex,_=l;if(p<_){let w=_C(d,p,_);_C(d,p,_-y)<w&&(l-=y)}else{let w=_C(d,p,_);_C(d,p,_+y)<w&&(l+=y)}}return gC.index=a,gC.endIndex=l,gC.closestTargetDistance=s,gC}function Sq(n,e){let t=[];for(let r=0;r<e.length;++r){let o=e[r].getGeometry();Cq(n,o,t)}return t}function Cq(n,e,t){if(e instanceof to){mC(n,e.getCoordinates(),!1,t);return}if(e instanceof qs){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)mC(n,r[i],!1,t);return}if(e instanceof jo){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i)mC(n,r[i],!0,t);return}if(e instanceof yl){let r=e.getCoordinates();for(let i=0,o=r.length;i<o;++i){let s=r[i];for(let a=0,l=s.length;a<l;++a)mC(n,s[a],!0,t)}return}if(e instanceof _s){let r=e.getGeometries();for(let i=0;i<r.length;++i)Cq(n,r[i],t);return}}function mC(n,e,t,r){let i=n[0],o=n[1];for(let s=0,a=e.length-1;s<a;++s){let l=e[s],c=e[s+1],f=Iq(i,o,l,c);if(f.squaredDistance===0){let d=s+f.along;r.push({coordinates:e,ring:t,startIndex:d,endIndex:d});return}}}function yC(n,e){return al(n[0],n[1],e[0],e[1])}function _C(n,e,t){let r,i;e<t?(r=e,i=t):(r=t,i=e);let o=Math.ceil(r),s=Math.floor(i);if(o>s){let l=Dg(n,r),c=Dg(n,i);return yC(l,c)}let a=0;if(r<o){let l=Dg(n,r),c=Tg(n,o);a+=yC(l,c)}if(s<i){let l=Tg(n,s),c=Dg(n,i);a+=yC(l,c)}for(let l=o;l<s-1;++l){let c=Tg(n,l),f=Tg(n,l+1);a+=yC(c,f)}return a}var Ck={along:0,squaredDistance:0};function Iq(n,e,t,r){let i=t[0],o=t[1],s=r[0],a=r[1],l=s-i,c=a-o,f=0,d=i,y=o;return(l!==0||c!==0)&&(f=Hn(((n-i)*l+(e-o)*c)/(l*l+c*c),0,1),d+=l*f,y+=c*f),Ck.along=f,Ck.squaredDistance=am(al(n,e,d,y),10),Ck}var vC={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},Ay=class extends _i{constructor(e,t){super(e),this.feature=t}},Ik=class extends iu{constructor(e){let t=e;t.stopDown||(t.stopDown=Ql),super(t),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Qge(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Bu,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){let i=this.mode_;if(i==="Circle")r=(o,s,a)=>{let l=s||new z9([NaN,NaN]),c=Da(o[0],a),f=HF(c,Da(o[o.length-1],a));l.setCenterAndRadius(c,Math.sqrt(f),this.geometryLayout_);let d=yh();return d&&l.transform(a,d),l};else{let o;i==="Point"?o=_o:i==="LineString"?o=to:i==="Polygon"&&(o=jo),r=(s,a,l)=>(a?i==="Polygon"?s[0].length?a.setCoordinates([s[0].concat([s[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(s,this.geometryLayout_):a=new o(s,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new ef({source:new ou({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Jge(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:k0,this.freehandCondition_,e.freehand?this.freehandCondition_=L0:this.freehandCondition_=e.freehandCondition?e.freehandCondition:u1,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(a1.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=L0:t=e:t=bG,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=L0:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:u1}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===gt.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===ur.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===ur.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===ur.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===ur.POINTERDOWN?r=!1:t&&this.getPointerCount()<2?(r=e.type===ur.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===ur.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===ur.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new tu(ur.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}let t=this.getMap(),r=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),o=Bl([r,i]),s=this.traceSource_.getFeaturesInExtent(o);if(s.length===0)return;let a=Sq(e.coordinate,s);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){let r=e.startIndex<=e.endIndex,i=e.startIndex<=t;r===i?r&&t>e.endIndex||!r&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(r&&t<e.endIndex||!r&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let r=0;if(e<t){let i=Math.ceil(e),o=Math.floor(t);o===t&&(o-=1),r=o-i+1}else{let i=Math.floor(e),o=Math.ceil(t);o===t&&(o+=1),r=i-o+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,t,r){if(t===r)return;let i=[];if(t<r){let o=Math.ceil(t),s=Math.floor(r);s===r&&(s-=1);for(let a=o;a<=s;++a)i.push(Tg(e.coordinates,a))}else{let o=Math.floor(t),s=Math.ceil(r);s===r&&(s+=1);for(let a=o;a>=s;--a)i.push(Tg(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){let t=this.traceState_;if(!t.active)return;if(t.targetIndex===-1){let a=e.map.getPixelFromCoordinate(t.startCoord);if(bw(a,e.pixel)<this.snapTolerance_)return}let r=bq(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==r.index){if(t.targetIndex!==-1){let l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}let a=t.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{let a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}t.targetIndex=r.index;let i=t.targets[t.targetIndex];i.endIndex=r.endIndex;let o=Dg(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(o);e.coordinate=o,e.pixel=[Math.round(s[0]),Math.round(s[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);let r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){let i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){let t=this.downPx_,r=e.pixel,i=t[0]-r[0],o=t[1]-r[1],s=i*i+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let r=!1;if(this.sketchFeature_){let i=!1,o=[this.finishCoordinate_],s=this.mode_;if(s==="Point")r=!0;else if(s==="Circle")r=this.sketchCoords_.length===2;else if(s==="LineString")i=!t&&this.sketchCoords_.length>this.minPoints_;else if(s==="Polygon"){let a=this.sketchCoords_;i=a[0].length>this.minPoints_,o=[a[0][0],a[0][a[0].length-2]],t?o=[a[0][0]]:o=[a[0][0],a[0][a[0].length-2]]}if(i){let a=this.getMap();for(let l=0,c=o.length;l<c;l++){let f=o[l],d=a.getPixelFromCoordinate(f),y=e[0]-d[0],p=e[1]-d[1],_=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(y*y+p*p)<=_,r){this.finishCoordinate_=f;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new eo(new _o(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new eo);let t=e.getLinearRing(0),r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),r.changed()):(r=new to(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){let t=this.getMap().getView().getProjection(),r=$v(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new eo(new to(this.sketchLineCoords_)));let i=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new eo,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Ay(vC.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){let t=this.getMap(),r=this.sketchFeature_.getGeometry(),i=t.getView().getProjection(),o=$v(this.geometryLayout_),s,a;for(;e.length<o;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(s=this.sketchCoords_[0],a=s[s.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(s=this.sketchCoords_,a=s[s.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){let t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i,o,s=this.mode_;return s==="LineString"||s==="Circle"?(this.finishCoordinate_=e.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),this.geometryFunction_(o,t,r)):s==="Polygon"&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():i=!0),o.push(e.slice()),i&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,t,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;let t=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let o=0;o<e;++o){let s;if(i==="LineString"||i==="Circle"){if(s=this.sketchCoords_,s.splice(-2,1),s.length>=2){this.finishCoordinate_=s[s.length-2].slice();let a=this.finishCoordinate_.slice();s[s.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(s,t,r),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(i==="Polygon"){s=this.sketchCoords_[0],s.splice(-2,1);let a=this.sketchLine_.getGeometry();if(s.length>=2){let l=s[s.length-2].slice();s[s.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(s),this.geometryFunction_(this.sketchCoords_,t,r)}if(s.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){let e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_,r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,r,i)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,r,i),t=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new ml([t])):this.type_==="MultiLineString"?e.setGeometry(new qs([t])):this.type_==="MultiPolygon"&&e.setGeometry(new yl([t])),this.dispatchEvent(new Ay(vC.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;let e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){let e=this.abortDrawing_();e&&this.dispatchEvent(new Ay(vC.DRAWABORT,e))}appendCoordinates(e){let t=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(t==="LineString"||t==="Circle")i=this.sketchCoords_;else if(t==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let s=0;s<e.length;s++)this.addToDrawing_(e[s]);let o=e[e.length-1];this.sketchFeature_=this.addToDrawing_(o),this.modifyDrawing_(o)}extend(e){let r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();let i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new eo(new _o(i)),this.updateSketchFeatures_(),this.dispatchEvent(new Ay(vC.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){let e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);let t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){let e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}};function Jge(){let n=r9();return function(e,t){return n[e.getGeometry().getType()]}}function Qge(n){switch(n){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+n)}}var Tq=Ik;var lu=class n{_drawSource=new ou;_activeDrawInteraction=null;activeType=Gn(null);zone=Me(rr);get source(){return this._drawSource}startDrawing(e,t,r){this.stopDrawing(e),this._activeDrawInteraction=new Tq({source:this._drawSource,type:t}),r&&this._activeDrawInteraction.on("drawend",i=>{this.zone.run(()=>{r(i.feature),this.stopDrawing(e)})}),e.addInteraction(this._activeDrawInteraction),this.activeType.set(t)}stopDrawing(e){this._activeDrawInteraction&&(e.removeInteraction(this._activeDrawInteraction),this._activeDrawInteraction=null),this.activeType.set(null)}clearDrawings(){this._drawSource.clear()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};function eme(n,e){n&1&&(yr(),Qe(0,"svg",8),Kt(1,"path",9),it())}function tme(n,e){n&1&&(yr(),Qe(0,"svg",10),Kt(1,"circle",11)(2,"path",12),it())}var xC=class n{constructor(e){this.geoDataService=e}loading=!1;error=null;onFileSelected(e){return He(this,null,function*(){let t=e.target.files?.[0];t&&this.geoDataService.import(t)})}static \u0275fac=function(t){return new(t||n)(go(Bd))};static \u0275cmp=vr({type:n,selectors:[["app-upload"]],decls:9,vars:3,consts:[["fileInput",""],[1,"relative","flex","items-center","group"],["type","button",1,"relative","flex","items-center","justify-center","w-10","h-10","rounded-xl","bg-gradient-to-tr","from-emerald-600","to-emerald-500","text-white","shadow-md","hover:shadow-emerald-200","hover:scale-105","transition-all","duration-200","active:scale-95","disabled:opacity-50","disabled:scale-100","disabled:cursor-not-allowed",3,"click","disabled"],["class","w-5 h-5 transition-transform group-hover:translate-y-[-1px]","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","w-5 h-5 animate-spin","viewBox","0 0 24 24","fill","none",4,"ngIf"],["type","file","hidden","",3,"change"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-[60]"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","transition-transform","group-hover:translate-y-[-1px]"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"],["viewBox","0 0 24 24","fill","none",1,"w-5","h-5","animate-spin"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8v8H4z",1,"opacity-75"]],template:function(t,r){if(t&1){let i=Di();Qe(0,"div",1)(1,"button",2),yn("click",function(){tr(i);let s=oM(5);return nr(s.click())}),Ji(2,eme,2,0,"svg",3)(3,tme,3,0,"svg",4),it(),Qe(4,"input",5,0),yn("change",function(s){return tr(i),nr(r.onFileSelected(s))}),it(),Qe(6,"div",6),St(7," IMPORT DATA "),Kt(8,"div",7),it()()}t&2&&(Xt(),Cr("disabled",r.loading),Xt(),Cr("ngIf",!r.loading),Xt(),Cr("ngIf",r.loading))},dependencies:[zi,dl],encapsulation:2})};function nme(n,e){if(n&1){let t=Di();Qe(0,"div",7)(1,"button",8),yn("click",function(){tr(t);let i=Dn();return nr(i.export("kml"))}),Qe(2,"span",9),St(3,"\u{1F30D}"),it(),Qe(4,"span"),St(5,"Google Earth (KML)"),it()(),Qe(6,"button",8),yn("click",function(){tr(t);let i=Dn();return nr(i.export("geojson"))}),Qe(7,"span",10),St(8,"\u{1F9ED}"),it(),Qe(9,"span"),St(10,"GeoJSON File"),it()(),Qe(11,"button",8),yn("click",function(){tr(t);let i=Dn();return nr(i.export("zip"))}),Qe(12,"span",11),St(13,"\u{1F5FA}\uFE0F"),it(),Qe(14,"span"),St(15,"Shapefile (SHP)"),it()()()}}var wC=class n{_el=Me(ni);_geoDataService=Me(Bd);_drawService=Me(lu);_mapService=Me(Eo);showExportMenu=Gn(!1);onDocumentClick(e){this._el.nativeElement.contains(e.target)||this.showExportMenu.set(!1)}toggleExportMenu(){this.showExportMenu.update(e=>!e)}export(e){return He(this,null,function*(){try{if(this.showExportMenu.set(!1),e==="kml"||e==="gpx"||e==="zip"||e==="geojson"){let t=this.mergeSources(),r=yield this._geoDataService.exportAllData(e,t),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=`export.${e}`,o.click(),URL.revokeObjectURL(i)}}catch(t){console.error("Export error:",t),alert(t instanceof Error?t.message:"Export failed")}})}mergeSources(){let e=new no,t=[...this._mapService.getImportedSource().getFeatures(),...this._drawService.source.getFeatures()];return e.writeFeaturesObject(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-download"]],hostBindings:function(t,r){t&1&&yn("click",function(o){return r.onDocumentClick(o)},Mh)},decls:8,vars:1,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","bg-gradient-to-tr","from-blue-600","to-blue-500","text-white","shadow-md","hover:shadow-blue-200","hover:scale-105","transition-all","duration-200","active:scale-95",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","group-hover/btn:translate-y-[-1px]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"flex","items-center","gap-3","px-3","py-2.5","rounded-xl","hover:bg-blue-50","text-xs","font-semibold","text-gray-700","transition-all",3,"click"],[1,"flex","items-center","justify-center","w-7","h-7","bg-orange-100","rounded-lg","text-sm","shadow-sm"],[1,"flex","items-center","justify-center","w-7","h-7","bg-emerald-100","rounded-lg","text-sm","shadow-sm"],[1,"flex","items-center","justify-center","w-7","h-7","bg-blue-100","rounded-lg","text-sm","shadow-sm"]],template:function(t,r){t&1&&(Qe(0,"div",0)(1,"button",1),yn("click",function(){return r.toggleExportMenu()}),yr(),Qe(2,"svg",2),Kt(3,"path",3),it()(),po(),Qe(4,"div",4),St(5," EXPORT DATA "),Kt(6,"div",5),it(),Ji(7,nme,16,0,"div",6),it()),t&2&&(Xt(7),Cr("ngIf",r.showExportMenu()))},dependencies:[zi,dl],encapsulation:2})};function rme(n,e){n&1&&Kt(0,"div",16)}function ime(n,e){n&1&&Kt(0,"div",16)}function ome(n,e){n&1&&Kt(0,"div",16)}function sme(n,e){if(n&1){let t=Di();Qe(0,"div",7)(1,"div",8),St(2,"Select Type"),it(),Qe(3,"button",9),yn("click",function(){tr(t);let i=Dn();return nr(i.startDrawing("Point"))}),Qe(4,"div",10)(5,"span",11),St(6,"\u{1F4CD}"),it(),Qe(7,"span"),St(8,"Point"),it()(),Ji(9,rme,1,0,"div",12),it(),Qe(10,"button",9),yn("click",function(){tr(t);let i=Dn();return nr(i.startDrawing("LineString"))}),Qe(11,"div",10)(12,"span",11),St(13,"\u{1F4CF}"),it(),Qe(14,"span"),St(15,"Line"),it()(),Ji(16,ime,1,0,"div",12),it(),Qe(17,"button",9),yn("click",function(){tr(t);let i=Dn();return nr(i.startDrawing("Polygon"))}),Qe(18,"div",10)(19,"span",11),St(20,"\u2B20"),it(),Qe(21,"span"),St(22,"Polygon"),it()(),Ji(23,ome,1,0,"div",12),it(),Kt(24,"div",13),Qe(25,"button",14),yn("click",function(){tr(t);let i=Dn();return nr(i.startDrawing(null))}),Qe(26,"span",15),St(27,"\u2715"),it(),Qe(28,"span"),St(29,"Stop Drawing"),it()()()}if(n&2){let t=Dn();Xt(9),Cr("ngIf",t.activeType()==="Point"),Xt(7),Cr("ngIf",t.activeType()==="LineString"),Xt(7),Cr("ngIf",t.activeType()==="Polygon")}}var EC=class n{_el=Me(ni);_drawService=Me(lu);_mapService=Me(Eo);showMenu=Gn(!1);activeType=this._drawService.activeType;onDocumentClick(e){this._el.nativeElement.contains(e.target)||this.showMenu.set(!1)}toggleMenu(){this.showMenu.update(e=>!e)}startDrawing(e){let t=this._mapService.map();t&&(e===null?this._drawService.stopDrawing(t):this._drawService.startDrawing(t,e),this.showMenu.set(!1))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-drawing-tools"]],hostBindings:function(t,r){t&1&&yn("click",function(o){return r.onDocumentClick(o)},Mh)},decls:8,vars:2,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","group-hover/btn:rotate-12","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"px-3","py-1.5","mb-1","text-[9px]","uppercase","tracking-wider","font-bold","text-slate-400"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-indigo-50","text-xs","font-semibold","text-slate-700","transition-all",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","justify-center","w-7","h-7","bg-indigo-100","rounded-lg","shadow-sm"],["class","w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse",4,"ngIf"],[1,"h-[1px]","bg-slate-100","my-1"],[1,"flex","items-center","gap-3","px-3","py-2.5","rounded-xl","hover:bg-red-50","text-xs","font-semibold","text-red-600","transition-all",3,"click"],[1,"flex","items-center","justify-center","w-7","h-7","bg-red-100","rounded-lg"],[1,"w-1.5","h-1.5","rounded-full","bg-indigo-500","animate-pulse"]],template:function(t,r){t&1&&(Qe(0,"div",0)(1,"button",1),yn("click",function(){return r.toggleMenu()}),yr(),Qe(2,"svg",2),Kt(3,"path",3),it()(),po(),Qe(4,"div",4),St(5," DRAWING TOOLS "),Kt(6,"div",5),it(),Ji(7,sme,30,3,"div",6),it()),t&2&&(Xt(),Cr("ngClass",r.activeType()?"bg-indigo-600 text-white ring-4 ring-indigo-100":"bg-gradient-to-tr from-indigo-600 to-indigo-500 text-white hover:scale-105"),Xt(6),Cr("ngIf",r.showMenu()))},dependencies:[zi,Jp,dl],encapsulation:2})};var xs=Uint8Array,Sl=Uint16Array,Lk=Int32Array,bC=new xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),SC=new xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rk=new xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mq=function(n,e){for(var t=new Sl(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Lk(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},Nq=Mq(bC,2),Pq=Nq.b,Mk=Nq.r;Pq[28]=258,Mk[258]=28;var Lq=Mq(SC,0),ame=Lq.b,Dq=Lq.r,Nk=new Sl(32768);for(Ar=0;Ar<32768;++Ar)df=(Ar&43690)>>1|(Ar&21845)<<1,df=(df&52428)>>2|(df&13107)<<2,df=(df&61680)>>4|(df&3855)<<4,Nk[Ar]=((df&65280)>>8|(df&255)<<8)>>1;var df,Ar,Gc=function(n,e,t){for(var r=n.length,i=0,o=new Sl(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Sl(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Sl(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var c=i<<4|n[i],f=e-n[i],d=s[n[i]-1]++<<f,y=d|(1<<f)-1;d<=y;++d)a[Nk[d]>>l]=c}else for(a=new Sl(r),i=0;i<r;++i)n[i]&&(a[i]=Nk[s[n[i]-1]++]>>15-n[i]);return a},jd=new xs(288);for(Ar=0;Ar<144;++Ar)jd[Ar]=8;var Ar;for(Ar=144;Ar<256;++Ar)jd[Ar]=9;var Ar;for(Ar=256;Ar<280;++Ar)jd[Ar]=7;var Ar;for(Ar=280;Ar<288;++Ar)jd[Ar]=8;var Ar,ox=new xs(32);for(Ar=0;Ar<32;++Ar)ox[Ar]=5;var Ar,lme=Gc(jd,9,0),ume=Gc(jd,9,1),cme=Gc(ox,5,0),hme=Gc(ox,5,1),Tk=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Xu=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Dk=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},kk=function(n){return(n+7)/8|0},kq=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new xs(n.subarray(e,t))};var fme=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bl=function(n,e,t){var r=new Error(e||fme[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,bl),!t)throw r;return r},Ok=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new xs(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new xs(i*3));var c=function(Ve){var G=t.length;if(Ve>G){var be=new xs(Math.max(G*2,Ve));be.set(t),t=be}},f=e.f||0,d=e.p||0,y=e.b||0,p=e.l,_=e.d,w=e.m,b=e.n,S=i*8;do{if(!p){f=Xu(n,d,1);var T=Xu(n,d+1,3);if(d+=3,T)if(T==1)p=ume,_=hme,w=9,b=5;else if(T==2){var W=Xu(n,d,31)+257,X=Xu(n,d+10,15)+4,Y=W+Xu(n,d+5,31)+1;d+=14;for(var $=new xs(Y),V=new xs(19),B=0;B<X;++B)V[Rk[B]]=Xu(n,d+B*3,7);d+=X*3;for(var v=Tk(V),I=(1<<v)-1,M=Gc(V,v,1),B=0;B<Y;){var j=M[Xu(n,d,I)];d+=j&15;var A=j>>4;if(A<16)$[B++]=A;else{var Q=0,Z=0;for(A==16?(Z=3+Xu(n,d,3),d+=2,Q=$[B-1]):A==17?(Z=3+Xu(n,d,7),d+=3):A==18&&(Z=11+Xu(n,d,127),d+=7);Z--;)$[B++]=Q}}var q=$.subarray(0,W),K=$.subarray(W);w=Tk(q),b=Tk(K),p=Gc(q,w,1),_=Gc(K,b,1)}else bl(1);else{var A=kk(d)+4,N=n[A-4]|n[A-3]<<8,O=A+N;if(O>i){l&&bl(0);break}a&&c(y+N),t.set(n.subarray(A,O),y),e.b=y+=N,e.p=d=O*8,e.f=f;continue}if(d>S){l&&bl(0);break}}a&&c(y+131072);for(var oe=(1<<w)-1,_e=(1<<b)-1,F=d;;F=d){var Q=p[Dk(n,d)&oe],ee=Q>>4;if(d+=Q&15,d>S){l&&bl(0);break}if(Q||bl(2),ee<256)t[y++]=ee;else if(ee==256){F=d,p=null;break}else{var ce=ee-254;if(ee>264){var B=ee-257,pe=bC[B];ce=Xu(n,d,(1<<pe)-1)+Pq[B],d+=pe}var J=_[Dk(n,d)&_e],xe=J>>4;J||bl(3),d+=J&15;var K=ame[xe];if(xe>3){var pe=SC[xe];K+=Dk(n,d)&(1<<pe)-1,d+=pe}if(d>S){l&&bl(0);break}a&&c(y+131072);var Se=y+ce;if(y<K){var ve=o-K,re=Math.min(K,Se);for(ve+y<0&&bl(3);y<re;++y)t[y]=r[ve+y]}for(;y<Se;++y)t[y]=t[y-K]}}e.l=p,e.p=F,e.b=y,e.f=f,p&&(f=1,e.m=w,e.d=_,e.n=b)}while(!f);return y!=t.length&&s?kq(t,0,y):t.subarray(0,y)},pf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},rx=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Ak=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:Fq,l:0};if(i==1){var s=new xs(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(O,W){return O.f-W.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],c=0,f=1,d=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=t[t[c].f<t[d].f?c++:d++],l=t[c!=f&&t[c].f<t[d].f?c++:d++],t[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=o[0].s,r=1;r<i;++r)o[r].s>y&&(y=o[r].s);var p=new Sl(y+1),_=Pk(t[f-1],p,0);if(_>e){var r=0,w=0,b=_-e,S=1<<b;for(o.sort(function(W,X){return p[X.s]-p[W.s]||W.f-X.f});r<i;++r){var T=o[r].s;if(p[T]>e)w+=S-(1<<_-p[T]),p[T]=e;else break}for(w>>=b;w>0;){var A=o[r].s;p[A]<e?w-=1<<e-p[A]++-1:++r}for(;r>=0&&w;--r){var N=o[r].s;p[N]==e&&(--p[N],++w)}_=e}return{t:new xs(p),l:_}},Pk=function(n,e,t){return n.s==-1?Math.max(Pk(n.l,e,t+1),Pk(n.r,e,t+1)):e[n.s]=t},Aq=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Sl(++e),r=0,i=n[0],o=1,s=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},ix=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Oq=function(n,e,t){var r=t.length,i=kk(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},Rq=function(n,e,t,r,i,o,s,a,l,c,f){pf(e,f++,t),++i[256];for(var d=Ak(i,15),y=d.t,p=d.l,_=Ak(o,15),w=_.t,b=_.l,S=Aq(y),T=S.c,A=S.n,N=Aq(w),O=N.c,W=N.n,X=new Sl(19),Y=0;Y<T.length;++Y)++X[T[Y]&31];for(var Y=0;Y<O.length;++Y)++X[O[Y]&31];for(var $=Ak(X,7),V=$.t,B=$.l,v=19;v>4&&!V[Rk[v-1]];--v);var I=c+5<<3,M=ix(i,jd)+ix(o,ox)+s,j=ix(i,y)+ix(o,w)+s+14+3*v+ix(X,V)+2*X[16]+3*X[17]+7*X[18];if(l>=0&&I<=M&&I<=j)return Oq(e,f,n.subarray(l,l+c));var Q,Z,q,K;if(pf(e,f,1+(j<M)),f+=2,j<M){Q=Gc(y,p,0),Z=y,q=Gc(w,b,0),K=w;var oe=Gc(V,B,0);pf(e,f,A-257),pf(e,f+5,W-1),pf(e,f+10,v-4),f+=14;for(var Y=0;Y<v;++Y)pf(e,f+3*Y,V[Rk[Y]]);f+=3*v;for(var _e=[T,O],F=0;F<2;++F)for(var ee=_e[F],Y=0;Y<ee.length;++Y){var ce=ee[Y]&31;pf(e,f,oe[ce]),f+=V[ce],ce>15&&(pf(e,f,ee[Y]>>5&127),f+=ee[Y]>>12)}}else Q=lme,Z=jd,q=cme,K=ox;for(var Y=0;Y<a;++Y){var pe=r[Y];if(pe>255){var ce=pe>>18&31;rx(e,f,Q[ce+257]),f+=Z[ce+257],ce>7&&(pf(e,f,pe>>23&31),f+=bC[ce]);var J=pe&31;rx(e,f,q[J]),f+=K[J],J>3&&(rx(e,f,pe>>5&8191),f+=SC[J])}else rx(e,f,Q[pe]),f+=Z[pe]}return rx(e,f,Q[256]),f+Z[256]},dme=new Lk([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Fq=new xs(0),pme=function(n,e,t,r,i,o){var s=o.z||n.length,a=new xs(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),c=o.l,f=(o.r||0)&7;if(e){f&&(l[0]=o.r>>3);for(var d=dme[e-1],y=d>>13,p=d&8191,_=(1<<t)-1,w=o.p||new Sl(32768),b=o.h||new Sl(_+1),S=Math.ceil(t/3),T=2*S,A=function(Ie){return(n[Ie]^n[Ie+1]<<S^n[Ie+2]<<T)&_},N=new Lk(25e3),O=new Sl(288),W=new Sl(32),X=0,Y=0,$=o.i||0,V=0,B=o.w||0,v=0;$+2<s;++$){var I=A($),M=$&32767,j=b[I];if(w[M]=j,b[I]=M,B<=$){var Q=s-$;if((X>7e3||V>24576)&&(Q>423||!c)){f=Rq(n,l,0,N,O,W,Y,V,v,$-v,f),V=X=Y=0,v=$;for(var Z=0;Z<286;++Z)O[Z]=0;for(var Z=0;Z<30;++Z)W[Z]=0}var q=2,K=0,oe=p,_e=M-j&32767;if(Q>2&&I==A($-_e))for(var F=Math.min(y,Q)-1,ee=Math.min(32767,$),ce=Math.min(258,Q);_e<=ee&&--oe&&M!=j;){if(n[$+q]==n[$+q-_e]){for(var pe=0;pe<ce&&n[$+pe]==n[$+pe-_e];++pe);if(pe>q){if(q=pe,K=_e,pe>F)break;for(var J=Math.min(_e,pe-2),xe=0,Z=0;Z<J;++Z){var Se=$-_e+Z&32767,ve=w[Se],re=Se-ve&32767;re>xe&&(xe=re,j=Se)}}}M=j,j=w[M],_e+=M-j&32767}if(K){N[V++]=268435456|Mk[q]<<18|Dq[K];var Ve=Mk[q]&31,G=Dq[K]&31;Y+=bC[Ve]+SC[G],++O[257+Ve],++W[G],B=$+q,++X}else N[V++]=n[$],++O[n[$]]}}for($=Math.max($,B);$<s;++$)N[V++]=n[$],++O[n[$]];f=Rq(n,l,c,N,O,W,Y,V,v,$-v,f),c||(o.r=f&7|l[f/8|0]<<3,f-=7,o.h=b,o.p=w,o.i=$,o.w=B)}else{for(var $=o.w||0;$<s+c;$+=65535){var be=$+65535;be>=s&&(l[f/8|0]=c,be=s),f=Oq(l,f+1,n.subarray($,be))}o.i=s}return kq(a,0,r+kk(f)+i)};var Bq=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},gme=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new xs(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return pme(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)};var jq=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8};var mme=function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&bl(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!n[t++]);return t+(e&2)},yme=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0};var _me=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Bq();i.p(e.dictionary),jq(n,2,i.d())}},vme=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&bl(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&bl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function xme(n,e){return Ok(n,{i:2},e&&e.out,e&&e.dictionary)}function wme(n,e){var t=mme(n);return t+8>n.length&&bl(6,"invalid gzip data"),Ok(n.subarray(t,-8),{i:2},e&&e.out||new xs(yme(n)),e&&e.dictionary)}function CC(n,e){e||(e={});var t=Bq();t.p(n);var r=gme(n,e,e.dictionary?6:2,4);return _me(r,e),jq(r,r.length-4,t.d()),r}function Eme(n,e){return Ok(n.subarray(vme(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function Uq(n,e){return n[0]==31&&n[1]==139&&n[2]==8?wme(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?xme(n,e):Eme(n,e)}var bme=typeof TextDecoder<"u"&&new TextDecoder,Sme=0;try{bme.decode(Fq,{stream:!0}),Sme=1}catch{}function Gq(n){if(Array.isArray(n))return n}function zq(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=o.call(t)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(f){c=!0,i=f}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}function Fk(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Vq(n,e){if(n){if(typeof n=="string")return Fk(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fk(n,e):void 0}}function Hq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bk(n,e){return Gq(n)||zq(n,e)||Vq(n,e)||Hq()}function jk(n,e="utf8"){return new TextDecoder(e).decode(n)}var Cme=new TextEncoder;function qq(n){return Cme.encode(n)}var Ime=1024*8,Tme=(()=>{let n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Uk={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array},sx=class n{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Ime,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);let i=t.offset?t.offset>>>0:0,o=e.byteLength-i,s=i;(ArrayBuffer.isView(e)||e instanceof n)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){let r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){let r=Uk[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===Tme&&t!=="uint8"&&t!=="int8"){let a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();let l=new Uk[t](a.buffer);return this.offset+=r,l.reverse(),l}let s=new Uk[t](o);return this.offset+=r,s}readInt16(){let e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){let e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){let e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){let e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){let e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){let e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){let e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){let e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return jk(this.readBytes(e))}decodeText(e=1,t="utf8"){return jk(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(qq(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}};var $q=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;$q[n]=e}var Wq=4294967295;function Dme(n,e,t){let r=n;for(let i=0;i<t;i++)r=$q[(r^e[i])&255]^r>>>8;return r}function Ame(n,e){return(Dme(Wq,n,e)^Wq)>>>0}function Gk(n,e,t){let r=n.readUint32(),i=Ame(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function IC(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function TC(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function DC(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function AC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function RC(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+Rme(e[o-i],t[o],t[o-i])&255}}function Rme(n,e,t){let r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),s=Math.abs(r-t);return i<=o&&i<=s?n:o<=s?e:t}function Yq(n,e,t,r,i,o){switch(n){case 0:IC(e,t,i);break;case 1:TC(e,t,i,o);break;case 2:DC(e,t,r,i);break;case 3:AC(e,t,r,i,o);break;case 4:RC(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}var Mme=new Uint16Array([255]),Nme=new Uint8Array(Mme.buffer),Pme=Nme[0]===255;function Xq(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(o/8)*i,l=new Uint8Array(r*t*a),c=0;for(let f=0;f<7;f++){let d=s[f],y=Math.ceil((t-d.x)/d.xStep),p=Math.ceil((r-d.y)/d.yStep);if(y<=0||p<=0)continue;let _=y*a,w=new Uint8Array(_);for(let b=0;b<p;b++){let S=e[c++],T=e.subarray(c,c+_);c+=_;let A=new Uint8Array(_);Yq(S,T,A,w,_,a),w.set(A);for(let N=0;N<y;N++){let O=d.x+N*d.xStep,W=d.y+b*d.yStep;if(!(O>=t||W>=r))for(let X=0;X<a;X++)l[(W*t+O)*a+X]=A[N*a+X]}}}if(o===16){let f=new Uint16Array(l.buffer);if(Pme)for(let d=0;d<f.length;d++)f[d]=Lme(f[d]);return f}else return l}function Lme(n){return(n&255)<<8|n>>8&255}var kme=new Uint16Array([255]),Ome=new Uint8Array(kme.buffer),Fme=Ome[0]===255,Bme=new Uint8Array(0);function zk(n){let{data:e,width:t,height:r,channels:i,depth:o}=n,s=Math.ceil(o/8)*i,a=Math.ceil(o/8*i*t),l=new Uint8Array(r*a),c=Bme,f=0,d,y;for(let p=0;p<r;p++){switch(d=e.subarray(f+1,f+1+a),y=l.subarray(p*a,(p+1)*a),e[f]){case 0:IC(d,y,a);break;case 1:TC(d,y,a,s);break;case 2:DC(d,y,c,a);break;case 3:AC(d,y,c,a,s);break;case 4:RC(d,y,c,a,s);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}c=y,f+=a+1}if(o===16){let p=new Uint16Array(l.buffer);if(Fme)for(let _=0;_<p.length;_++)p[_]=jme(p[_]);return p}else return l}function jme(n){return(n&255)<<8|n>>8&255}var MC=Uint8Array.of(137,80,78,71,13,10,26,10);function Vk(n){if(!Zq(n.readBytes(MC.length)))throw new Error("wrong PNG signature")}function Zq(n){if(n.length<MC.length)return!1;for(let e=0;e<MC.length;e++)if(n[e]!==MC[e])return!1;return!0}var Kq="tEXt",Gme=0,Jq=new TextDecoder("latin1");function zme(n){if(Hme(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}var Vme=/^[\u0000-\u00FF]*$/;function Hme(n){if(!Vme.test(n))throw new Error("invalid latin1 text")}function Qq(n,e,t){let r=Hk(e);n[r]=qme(e,t-r.length-1)}function Hk(n){for(n.mark();n.readByte()!==Gme;);let e=n.offset;n.reset();let t=Jq.decode(n.readBytes(e-n.offset-1));return n.skip(1),zme(t),t}function qme(n,e){return Jq.decode(n.readBytes(e))}var ya={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},ax={UNKNOWN:-1,DEFLATE:0},NC={UNKNOWN:-1,ADAPTIVE:0},lx={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ux={NONE:0,BACKGROUND:1,PREVIOUS:2},PC={SOURCE:0,OVER:1};var LC=class extends sx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);let{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new hD,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=ax.UNKNOWN,this._filterMethod=NC.UNKNOWN,this._interlaceMethod=lx.UNKNOWN,this._colorType=ya.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(Vk(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(Vk(this);!this._end;){let e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){let r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case Kq:Qq(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gk(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){let r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?Gk(this,e+4,t):this.skip(4)}decodeIHDR(){let e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=Wme(this.readUint8());let t=this.readUint8();this._colorType=t;let r;switch(t){case ya.GREYSCALE:r=1;break;case ya.TRUECOLOUR:r=3;break;case ya.INDEXED_COLOUR:r=1;break;case ya.GREYSCALE_ALPHA:r=2;break;case ya.TRUECOLOUR_ALPHA:r=4;break;case ya.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==ax.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){let e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);let t=e/3;this._hasPalette=!0;let r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ya.GREYSCALE:case ya.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ya.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){let r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ya.UNKNOWN:case ya.GREYSCALE_ALPHA:case ya.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){let t=Hk(this),r=this.readUint8();if(r!==ax.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);let i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:JF(i)}}decodepHYs(){let e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){let t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=zk({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{let i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case ux.NONE:break;case ux.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){let s=(i*e.width+o)*this._png.channels;for(let a=0;a<this._png.channels;a++)r.data[s+a]=0}break;case ux.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){let r=1<<this._png.depth,i=(o,s)=>{let a=((o+t.yOffset)*this._png.width+t.xOffset+s)*this._png.channels,l=(o*t.width+s)*this._png.channels;return{index:a,frameIndex:l}};switch(t.blendOp){case PC.SOURCE:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:l}=i(o,s);for(let c=0;c<this._png.channels;c++)e.data[a+c]=t.data[l+c]}break;case PC.OVER:for(let o=0;o<t.height;o++)for(let s=0;s<t.width;s++){let{index:a,frameIndex:l}=i(o,s);for(let c=0;c<this._png.channels;c++){let f=t.data[l+this._png.channels-1]/r,d=c%(this._png.channels-1)===0?1:t.data[l+c],y=Math.floor(f*d+(1-f)*e.data[a+c]);e.data[a+c]+=y}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);let e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==NC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===lx.NO_INTERLACE)this._png.data=zk({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===lx.ADAM7)this._png.data=Xq({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){let e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ux.NONE,blendOp:PC.SOURCE,data:e}),this._inflator=new hD,this._writingDataChunks=!1}};function Wme(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}function eW(n,e){return new LC(n,e).decode()}var dn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function qk(){dn.console&&typeof dn.console.log=="function"&&dn.console.log.apply(dn.console,arguments)}var ii={log:qk,warn:function(n){dn.console&&(typeof dn.console.warn=="function"?dn.console.warn.apply(dn.console,arguments):qk.call(null,arguments))},error:function(n){dn.console&&(typeof dn.console.error=="function"?dn.console.error.apply(dn.console,arguments):qk(n))}};function Wk(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Ag(r.response,e,t)},r.onerror=function(){ii.error("could not download file")},r.send()}function tW(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function kC(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Ag=dn.saveAs||((typeof window>"u"?"undefined":Yr(window))!=="object"||window!==dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=dn.URL||dn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?tW(i.href)?Wk(n,e,t):kC(i,i.target="_blank"):kC(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){kC(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(tW(n))Wk(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){kC(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:Yr(o)!=="object"&&(ii.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Wk(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(dn.HTMLElement)||dn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Yr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=s?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(n)}else{var l=dn.URL||dn.webkitURL,c=l.createObjectURL(n);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function CW(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}var jC=dn.atob.bind(dn),nW=dn.btoa.bind(dn);function $k(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=Ks(t,r,i,o,e[0],7,-680876936),o=Ks(o,t,r,i,e[1],12,-389564586),i=Ks(i,o,t,r,e[2],17,606105819),r=Ks(r,i,o,t,e[3],22,-1044525330),t=Ks(t,r,i,o,e[4],7,-176418897),o=Ks(o,t,r,i,e[5],12,1200080426),i=Ks(i,o,t,r,e[6],17,-1473231341),r=Ks(r,i,o,t,e[7],22,-45705983),t=Ks(t,r,i,o,e[8],7,1770035416),o=Ks(o,t,r,i,e[9],12,-1958414417),i=Ks(i,o,t,r,e[10],17,-42063),r=Ks(r,i,o,t,e[11],22,-1990404162),t=Ks(t,r,i,o,e[12],7,1804603682),o=Ks(o,t,r,i,e[13],12,-40341101),i=Ks(i,o,t,r,e[14],17,-1502002290),t=Js(t,r=Ks(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Js(o,t,r,i,e[6],9,-1069501632),i=Js(i,o,t,r,e[11],14,643717713),r=Js(r,i,o,t,e[0],20,-373897302),t=Js(t,r,i,o,e[5],5,-701558691),o=Js(o,t,r,i,e[10],9,38016083),i=Js(i,o,t,r,e[15],14,-660478335),r=Js(r,i,o,t,e[4],20,-405537848),t=Js(t,r,i,o,e[9],5,568446438),o=Js(o,t,r,i,e[14],9,-1019803690),i=Js(i,o,t,r,e[3],14,-187363961),r=Js(r,i,o,t,e[8],20,1163531501),t=Js(t,r,i,o,e[13],5,-1444681467),o=Js(o,t,r,i,e[2],9,-51403784),i=Js(i,o,t,r,e[7],14,1735328473),t=Qs(t,r=Js(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Qs(o,t,r,i,e[8],11,-2022574463),i=Qs(i,o,t,r,e[11],16,1839030562),r=Qs(r,i,o,t,e[14],23,-35309556),t=Qs(t,r,i,o,e[1],4,-1530992060),o=Qs(o,t,r,i,e[4],11,1272893353),i=Qs(i,o,t,r,e[7],16,-155497632),r=Qs(r,i,o,t,e[10],23,-1094730640),t=Qs(t,r,i,o,e[13],4,681279174),o=Qs(o,t,r,i,e[0],11,-358537222),i=Qs(i,o,t,r,e[3],16,-722521979),r=Qs(r,i,o,t,e[6],23,76029189),t=Qs(t,r,i,o,e[9],4,-640364487),o=Qs(o,t,r,i,e[12],11,-421815835),i=Qs(i,o,t,r,e[15],16,530742520),t=ea(t,r=Qs(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=ea(o,t,r,i,e[7],10,1126891415),i=ea(i,o,t,r,e[14],15,-1416354905),r=ea(r,i,o,t,e[5],21,-57434055),t=ea(t,r,i,o,e[12],6,1700485571),o=ea(o,t,r,i,e[3],10,-1894986606),i=ea(i,o,t,r,e[10],15,-1051523),r=ea(r,i,o,t,e[1],21,-2054922799),t=ea(t,r,i,o,e[8],6,1873313359),o=ea(o,t,r,i,e[15],10,-30611744),i=ea(i,o,t,r,e[6],15,-1560198380),r=ea(r,i,o,t,e[13],21,1309151649),t=ea(t,r,i,o,e[4],6,-145523070),o=ea(o,t,r,i,e[11],10,-1120210379),i=ea(i,o,t,r,e[2],15,718787259),r=ea(r,i,o,t,e[9],21,-343485551),n[0]=Gd(t,n[0]),n[1]=Gd(r,n[1]),n[2]=Gd(i,n[2]),n[3]=Gd(o,n[3])}function WC(n,e,t,r,i,o){return e=Gd(Gd(e,n),Gd(r,o)),Gd(e<<i|e>>>32-i,t)}function Ks(n,e,t,r,i,o,s){return WC(e&t|~e&r,n,e,i,o,s)}function Js(n,e,t,r,i,o,s){return WC(e&r|t&~r,n,e,i,o,s)}function Qs(n,e,t,r,i,o,s){return WC(e^t^r,n,e,i,o,s)}function ea(n,e,t,r,i,o,s){return WC(t^(e|~r),n,e,i,o,s)}function IW(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)$k(r,$me(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for($k(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,$k(r,i),r}function $me(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var rW="0123456789abcdef".split("");function Yme(n){for(var e="",t=0;t<4;t++)e+=rW[n>>8*t+4&15]+rW[n>>8*t&15];return e}function Xme(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function Qk(n){return IW(n).map(Xme).join("")}var Zme=(function(n){for(var e=0;e<n.length;e++)n[e]=Yme(n[e]);return n.join("")})(IW("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gd(n,e){if(Zme){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function eO(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var f=a[l];c=(c+f+s.charCodeAt(l))%256,a[l]=a[c],a[c]=f}t=n,r=a}else a=r;var d=e.length,y=0,p=0,_="";for(l=0;l<d;l++)p=(p+(f=a[y=(y+1)%256]))%256,a[y]=a[p],a[p]=f,s=a[(a[y]+a[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^s);return _}var iW={print:4,modify:8,copy:16,"annot-forms":32};function Ny(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(iW.perm!==void 0)throw new Error("Invalid permission: "+a);i+=iW[a]}),this.padding="(\xBFN^Nu\x8AAd\0NV\xFF\xFA\b..\0\xB6\xD0h>\x80/\f\xA9\xFEdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=Qk(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=eO(this.encryptionKey,this.padding)}function Py(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function oW(n){if(Yr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){dn.console&&ii.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function HC(n){if(!(this instanceof HC))return new HC(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function TW(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Rg(n,e,t,r,i){if(!(this instanceof Rg))return new Rg(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,TW.call(this,r,i)}function Ly(n,e,t,r,i){if(!(this instanceof Ly))return new Ly(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,TW.call(this,r,i)}function Ut(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,c="S",f=null;Yr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(f=n.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),c=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,y={},p={internal:{},__private__:{}};p.__private__.PubSub=oW;var _="1.3",w=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(R){_=R};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var S=p.__private__.getPageFormat=function(R){return b[R]};i=i||"a4";var T="compat",A="advanced",N=T;function O(){this.saveGraphicsState(),U(new Rt(Zt,0,0,-Zt,0,sc()*Zt).toString()+" cm"),this.setFontSize(this.getFontSize()/Zt),c="n",N=A}function W(){this.restoreGraphicsState(),c="S",N=T}var X=p.__private__.combineFontStyleAndFontWeight=function(R,te){if(R=="bold"&&te=="normal"||R=="bold"&&te==400||R=="normal"&&te=="italic"||R=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(R=te==400||te==="normal"?R==="italic"?"italic":"normal":te!=700&&te!=="bold"||R!=="normal"?(te==700?"bold":te)+""+R:"bold"),R};p.advancedAPI=function(R){var te=N===T;return te&&O.call(this),typeof R!="function"||(R(this),te&&W.call(this)),this},p.compatAPI=function(R){var te=N===A;return te&&W.call(this),typeof R!="function"||(R(this),te&&O.call(this)),this},p.isAdvancedAPI=function(){return N===A};var Y,$=function(R){if(N!==A)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=p.roundToPrecision=p.__private__.roundToPrecision=function(R,te){var ge=e||te;if(isNaN(R)||isNaN(ge))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(ge).replace(/0+$/,"")};Y=p.hpf=p.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return V(R,16)};var B=p.f2=p.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return V(R,2)},v=p.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return V(R,3)},I=p.scale=p.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return N===T?R*Zt:N===A?R:void 0},M=function(R){return I((function(te){return N===T?sc()-te:N===A?te:void 0})(R))};p.__private__.setPrecision=p.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var j,Q="00000000000000000000000000000000",Z=p.__private__.getFileId=function(){return Q},q=p.__private__.setFileId=function(R){return Q=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():Q.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Wi=new Ny(f.userPermissions,f.userPassword,f.ownerPassword,Q)),Q};p.setFileId=function(R){return q(R),this},p.getFileId=function(){return Z()};var K=p.__private__.convertDateToPDFDate=function(R){var te=R.getTimezoneOffset(),ge=te<0?"+":"-",Ee=Math.floor(Math.abs(te/60)),Ne=Math.abs(te%60),Xe=[ge,ce(Ee),"'",ce(Ne),"'"].join("");return["D:",R.getFullYear(),ce(R.getMonth()+1),ce(R.getDate()),ce(R.getHours()),ce(R.getMinutes()),ce(R.getSeconds()),Xe].join("")},oe=p.__private__.convertPDFDateToDate=function(R){var te=parseInt(R.substr(2,4),10),ge=parseInt(R.substr(6,2),10)-1,Ee=parseInt(R.substr(8,2),10),Ne=parseInt(R.substr(10,2),10),Xe=parseInt(R.substr(12,2),10),et=parseInt(R.substr(14,2),10);return new Date(te,ge,Ee,Ne,Xe,et,0)},_e=p.__private__.setCreationDate=function(R){var te;if(R===void 0&&(R=new Date),R instanceof Date)te=K(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=R}return j=te},F=p.__private__.getCreationDate=function(R){var te=j;return R==="jsDate"&&(te=oe(j)),te};p.setCreationDate=function(R){return _e(R),this},p.getCreationDate=function(R){return F(R)};var ee,ce=p.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},pe=p.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},J=0,xe=[],Se=[],ve=0,re=[],Ve=[],G=!1,be=Se;p.__private__.setCustomOutputDestination=function(R){G=!0,be=R};var Ie=function(R){G||(be=R)};p.__private__.resetCustomOutputDestination=function(){G=!1,be=Se};var U=p.__private__.out=function(R){return R=R.toString(),ve+=R.length+1,be.push(R),be},ae=p.__private__.write=function(R){return U(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},he=p.__private__.getArrayBuffer=function(R){for(var te=R.length,ge=new ArrayBuffer(te),Ee=new Uint8Array(ge);te--;)Ee[te]=R.charCodeAt(te);return ge},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Fe};var Ce=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(R){return Ce=N===A?R/Zt:R,this};var we,Ue=p.__private__.getFontSize=p.getFontSize=function(){return N===T?Ce:Ce*Zt},Le=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(R){return Le=R,this},p.__private__.getR2L=p.getR2L=function(){return Le};var Be,ft=p.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))we=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');we=R}else we=parseInt(R,10)};p.__private__.getZoomMode=function(){return we};var It,qe=p.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Be=R};p.__private__.getPageMode=function(){return Be};var Vt=p.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');It=R};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(R,te,ge){return ft(R),Vt(te),qe(ge),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(R){if(Object.keys(vt).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[R]},p.__private__.getDocumentProperties=function(){return vt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(R){for(var te in vt)vt.hasOwnProperty(te)&&R[te]&&(vt[te]=R[te]);return this},p.__private__.setDocumentProperty=function(R,te){if(Object.keys(vt).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[R]=te};var Ke,Zt,ht,Rr,pt,Yt={},ln={},hr=[],Tt={},ir={},Dt={},Gt={},Fn=null,mn=0,qt=[],Rn=new oW(p),at=n.hotfixes||[],Fr={},Jr={},Qr=[],Rt=function R(te,ge,Ee,Ne,Xe,et){if(!(this instanceof R))return new R(te,ge,Ee,Ne,Xe,et);isNaN(te)&&(te=1),isNaN(ge)&&(ge=0),isNaN(Ee)&&(Ee=0),isNaN(Ne)&&(Ne=1),isNaN(Xe)&&(Xe=0),isNaN(et)&&(et=0),this._matrix=[te,ge,Ee,Ne,Xe,et]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Y).join(R)},Rt.prototype.multiply=function(R){var te=R.sx*this.sx+R.shy*this.shx,ge=R.sx*this.shy+R.shy*this.sy,Ee=R.shx*this.sx+R.sy*this.shx,Ne=R.shx*this.shy+R.sy*this.sy,Xe=R.tx*this.sx+R.ty*this.shx+this.tx,et=R.tx*this.shy+R.ty*this.sy+this.ty;return new Rt(te,ge,Ee,Ne,Xe,et)},Rt.prototype.decompose=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Xe=this.ty,et=Math.sqrt(R*R+te*te),bt=(R/=et)*ge+(te/=et)*Ee;ge-=R*bt,Ee-=te*bt;var kt=Math.sqrt(ge*ge+Ee*Ee);return bt/=kt,R*(Ee/=kt)<te*(ge/=kt)&&(R=-R,te=-te,bt=-bt,et=-et),{scale:new Rt(et,0,0,kt,0,0),translate:new Rt(1,0,0,1,Ne,Xe),rotate:new Rt(R,te,-te,R,0,0),skew:new Rt(1,0,bt,1,0,0)}},Rt.prototype.toString=function(R){return this.join(" ")},Rt.prototype.inversed=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Xe=this.ty,et=1/(R*Ee-te*ge),bt=Ee*et,kt=-te*et,en=-ge*et,wn=R*et;return new Rt(bt,kt,en,wn,-bt*Ne-en*Xe,-kt*Ne-wn*Xe)},Rt.prototype.applyToPoint=function(R){var te=R.x*this.sx+R.y*this.shx+this.tx,ge=R.x*this.shy+R.y*this.sy+this.ty;return new To(te,ge)},Rt.prototype.applyToRectangle=function(R){var te=this.applyToPoint(R),ge=this.applyToPoint(new To(R.x+R.w,R.y+R.h));return new oc(te.x,te.y,ge.x-te.x,ge.y-te.y)},Rt.prototype.clone=function(){var R=this.sx,te=this.shy,ge=this.shx,Ee=this.sy,Ne=this.tx,Xe=this.ty;return new Rt(R,te,ge,Ee,Ne,Xe)},p.Matrix=Rt;var wi=p.matrixMult=function(R,te){return te.multiply(R)},Li=new Rt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Li;var bn=function(R,te){if(!ir[R]){var ge=(te instanceof Rg?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);te.id=ge,ir[R]=ge,Tt[ge]=te,Rn.publish("addPattern",te)}};p.ShadingPattern=Rg,p.TilingPattern=Ly,p.addShadingPattern=function(R,te){return $("addShadingPattern()"),bn(R,te),this},p.beginTilingPattern=function(R){$("beginTilingPattern()"),$o(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},p.endTilingPattern=function(R,te){$("endTilingPattern()"),te.stream=Ve[ee].join(`
`),bn(R,te),Rn.publish("endTilingPattern",te),Qr.pop().restore()};var Er,Zn=p.__private__.newObject=function(){var R=ki();return lo(R,!0),R},ki=p.__private__.newObjectDeferred=function(){return J++,xe[J]=function(){return ve},J},lo=function(R,te){return te=typeof te=="boolean"&&te,xe[R]=ve,te&&U(R+" 0 obj"),R},Kc=p.__private__.newAdditionalObject=function(){var R={objId:ki(),content:""};return re.push(R),R},Oi=ki(),ta=ki(),Es=p.__private__.decodeColorString=function(R){var te=R.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length!==5||te[4]!=="k"&&te[4]!=="K"||(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var ge=parseFloat(te[0]);te=[ge,ge,ge,"r"]}for(var Ee="#",Ne=0;Ne<3;Ne++)Ee+=("0"+Math.floor(255*parseFloat(te[Ne])).toString(16)).slice(-2);return Ee},So=p.__private__.encodeColorString=function(R){var te;typeof R=="string"&&(R={ch1:R});var ge=R.ch1,Ee=R.ch2,Ne=R.ch3,Xe=R.ch4,et=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ge=="string"&&ge.charAt(0)!=="#"){var bt=new CW(ge);if(bt.ok)ge=bt.toHex();else if(!/^\d*\.?\d*$/.test(ge))throw new Error('Invalid color "'+ge+'" passed to jsPDF.encodeColorString.')}if(typeof ge=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ge)&&(ge="#"+ge[1]+ge[1]+ge[2]+ge[2]+ge[3]+ge[3]),typeof ge=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ge)){var kt=parseInt(ge.substr(1),16);ge=kt>>16&255,Ee=kt>>8&255,Ne=255&kt}if(Ee===void 0||Xe===void 0&&ge===Ee&&Ee===Ne)te=typeof ge=="string"?ge+" "+et[0]:R.precision===2?B(ge/255)+" "+et[0]:v(ge/255)+" "+et[0];else if(Xe===void 0||Yr(Xe)==="object"){if(Xe&&!isNaN(Xe.a)&&Xe.a===0)return["1.","1.","1.",et[1]].join(" ");te=typeof ge=="string"?[ge,Ee,Ne,et[1]].join(" "):R.precision===2?[B(ge/255),B(Ee/255),B(Ne/255),et[1]].join(" "):[v(ge/255),v(Ee/255),v(Ne/255),et[1]].join(" ")}else te=typeof ge=="string"?[ge,Ee,Ne,Xe,et[2]].join(" "):R.precision===2?[B(ge),B(Ee),B(Ne),B(Xe),et[2]].join(" "):[v(ge),v(Ee),v(Ne),v(Xe),et[2]].join(" ");return te},Co=p.__private__.getFilters=function(){return s},bs=p.__private__.putStream=function(R){var te=(R=R||{}).data||"",ge=R.filters||Co(),Ee=R.alreadyAppliedFilters||[],Ne=R.addLength1||!1,Xe=te.length,et=R.objectId,bt=function(br){return br};if(f!==null&&et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(bt=Wi.encryptor(et,0));var kt={};ge===!0&&(ge=["FlateEncode"]);var en=R.additionalKeyValues||[],wn=(kt=Ut.API.processDataByFilters!==void 0?Ut.API.processDataByFilters(te,ge):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(kt.data.length!==0&&(en.push({key:"Length",value:kt.data.length}),Ne===!0&&en.push({key:"Length1",value:Xe})),wn.length!=0)if(wn.split("/").length-1==1)en.push({key:"Filter",value:wn});else{en.push({key:"Filter",value:"["+wn+"]"});for(var Kn=0;Kn<en.length;Kn+=1)if(en[Kn].key==="DecodeParms"){for(var si=[],pi=0;pi<kt.reverseChain.split("/").length-1;pi+=1)si.push("null");si.push(en[Kn].value),en[Kn].value="["+si.join(" ")+"]"}}U("<<");for(var Br=0;Br<en.length;Br++)U("/"+en[Br].key+" "+en[Br].value);U(">>"),kt.data.length!==0&&(U("stream"),U(bt(kt.data)),U("endstream"))},Cl=p.__private__.putPage=function(R){var te=R.number,ge=R.data,Ee=R.objId,Ne=R.contentsObjId;lo(Ee,!0),U("<</Type /Page"),U("/Parent "+R.rootDictionaryObjId+" 0 R"),U("/Resources "+R.resourceDictionaryObjId+" 0 R"),U("/MediaBox ["+parseFloat(Y(R.mediaBox.bottomLeftX))+" "+parseFloat(Y(R.mediaBox.bottomLeftY))+" "+Y(R.mediaBox.topRightX)+" "+Y(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&U("/CropBox ["+Y(R.cropBox.bottomLeftX)+" "+Y(R.cropBox.bottomLeftY)+" "+Y(R.cropBox.topRightX)+" "+Y(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&U("/BleedBox ["+Y(R.bleedBox.bottomLeftX)+" "+Y(R.bleedBox.bottomLeftY)+" "+Y(R.bleedBox.topRightX)+" "+Y(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&U("/TrimBox ["+Y(R.trimBox.bottomLeftX)+" "+Y(R.trimBox.bottomLeftY)+" "+Y(R.trimBox.topRightX)+" "+Y(R.trimBox.topRightY)+"]"),R.artBox!==null&&U("/ArtBox ["+Y(R.artBox.bottomLeftX)+" "+Y(R.artBox.bottomLeftY)+" "+Y(R.artBox.topRightX)+" "+Y(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&U("/UserUnit "+R.userUnit),Rn.publish("putPage",{objId:Ee,pageContext:qt[te],pageNumber:te,page:ge}),U("/Contents "+Ne+" 0 R"),U(">>"),U("endobj");var Xe=ge.join(`
`);return N===A&&(Xe+=`
Q`),lo(Ne,!0),bs({data:Xe,filters:Co(),objectId:Ne}),U("endobj"),Ee},Ss=p.__private__.putPages=function(){var R,te,ge=[];for(R=1;R<=mn;R++)qt[R].objId=ki(),qt[R].contentsObjId=ki();for(R=1;R<=mn;R++)ge.push(Cl({number:R,data:Ve[R],objId:qt[R].objId,contentsObjId:qt[R].contentsObjId,mediaBox:qt[R].mediaBox,cropBox:qt[R].cropBox,bleedBox:qt[R].bleedBox,trimBox:qt[R].trimBox,artBox:qt[R].artBox,userUnit:qt[R].userUnit,rootDictionaryObjId:Oi,resourceDictionaryObjId:ta}));lo(Oi,!0),U("<</Type /Pages");var Ee="/Kids [";for(te=0;te<mn;te++)Ee+=ge[te]+" 0 R ";U(Ee+"]"),U("/Count "+mn),U(">>"),U("endobj"),Rn.publish("postPutPages")},ei=function(R){Rn.publish("putFont",{font:R,out:U,newObject:Zn,putStream:bs}),R.isAlreadyPutted!==!0&&(R.objectNumber=Zn(),U("<<"),U("/Type /Font"),U("/BaseFont /"+Py(R.postScriptName)),U("/Subtype /Type1"),typeof R.encoding=="string"&&U("/Encoding /"+R.encoding),U("/FirstChar 32"),U("/LastChar 255"),U(">>"),U("endobj"))},yf=function(R){R.objectNumber=Zn();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[Y(R.x),Y(R.y),Y(R.x+R.width),Y(R.y+R.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var ge=R.pages[1].join(`
`);bs({data:ge,additionalKeyValues:te,objectId:R.objectNumber}),U("endobj")},_f=function(R,te){te||(te=21);var ge=Zn(),Ee=(function(et,bt){var kt,en=[],wn=1/(bt-1);for(kt=0;kt<1;kt+=wn)en.push(kt);if(en.push(1),et[0].offset!=0){var Kn={offset:0,color:et[0].color};et.unshift(Kn)}if(et[et.length-1].offset!=1){var si={offset:1,color:et[et.length-1].color};et.push(si)}for(var pi="",Br=0,br=0;br<en.length;br++){for(kt=en[br];kt>et[Br+1].offset;)Br++;var Si=et[Br].offset,Sr=(kt-Si)/(et[Br+1].offset-Si),ia=et[Br].color,Qa=et[Br+1].color;pi+=pe(Math.round((1-Sr)*ia[0]+Sr*Qa[0]).toString(16))+pe(Math.round((1-Sr)*ia[1]+Sr*Qa[1]).toString(16))+pe(Math.round((1-Sr)*ia[2]+Sr*Qa[2]).toString(16))}return pi.trim()})(R.colors,te),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+te+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),bs({data:Ee,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ge}),U("endobj"),R.objectNumber=Zn(),U("<< /ShadingType "+R.type),U("/ColorSpace /DeviceRGB");var Xe="/Coords ["+Y(parseFloat(R.coords[0]))+" "+Y(parseFloat(R.coords[1]))+" ";R.type===2?Xe+=Y(parseFloat(R.coords[2]))+" "+Y(parseFloat(R.coords[3])):Xe+=Y(parseFloat(R.coords[2]))+" "+Y(parseFloat(R.coords[3]))+" "+Y(parseFloat(R.coords[4]))+" "+Y(parseFloat(R.coords[5])),U(Xe+="]"),R.matrix&&U("/Matrix ["+R.matrix.toString()+"]"),U("/Function "+ge+" 0 R"),U("/Extend [true true]"),U(">>"),U("endobj")},du=function(R,te){var ge=ki(),Ee=Zn();te.push({resourcesOid:ge,objectOid:Ee}),R.objectNumber=Ee;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+R.boundingBox.map(Y).join(" ")+"]"}),Ne.push({key:"XStep",value:Y(R.xStep)}),Ne.push({key:"YStep",value:Y(R.yStep)}),Ne.push({key:"Resources",value:ge+" 0 R"}),R.matrix&&Ne.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),bs({data:R.stream,additionalKeyValues:Ne,objectId:R.objectNumber}),U("endobj")},Jc=function(R){for(var te in R.objectNumber=Zn(),U("<<"),R)switch(te){case"opacity":U("/ca "+B(R[te]));break;case"stroke-opacity":U("/CA "+B(R[te]))}U(">>"),U("endobj")},Qc=function(R){lo(R.resourcesOid,!0),U("<<"),U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var te in U("/Font <<"),Yt)Yt.hasOwnProperty(te)&&(d===!1||d===!0&&y.hasOwnProperty(te))&&U("/"+te+" "+Yt[te].objectNumber+" 0 R");U(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var te in U("/Shading <<"),Tt)Tt.hasOwnProperty(te)&&Tt[te]instanceof Rg&&Tt[te].objectNumber>=0&&U("/"+te+" "+Tt[te].objectNumber+" 0 R");Rn.publish("putShadingPatternDict"),U(">>")}})(),(function(te){if(Object.keys(Tt).length>0){for(var ge in U("/Pattern <<"),Tt)Tt.hasOwnProperty(ge)&&Tt[ge]instanceof p.TilingPattern&&Tt[ge].objectNumber>=0&&Tt[ge].objectNumber<te&&U("/"+ge+" "+Tt[ge].objectNumber+" 0 R");Rn.publish("putTilingPatternDict"),U(">>")}})(R.objectOid),(function(){if(Object.keys(Dt).length>0){var te;for(te in U("/ExtGState <<"),Dt)Dt.hasOwnProperty(te)&&Dt[te].objectNumber>=0&&U("/"+te+" "+Dt[te].objectNumber+" 0 R");Rn.publish("putGStateDict"),U(">>")}})(),(function(){for(var te in U("/XObject <<"),Fr)Fr.hasOwnProperty(te)&&Fr[te].objectNumber>=0&&U("/"+te+" "+Fr[te].objectNumber+" 0 R");Rn.publish("putXobjectDict"),U(">>")})(),U(">>"),U("endobj")},vf=function(R){ln[R.fontName]=ln[R.fontName]||{},ln[R.fontName][R.fontStyle]=R.id},Qd=function(R,te,ge,Ee,Ne){var Xe={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:R,fontName:te,fontStyle:ge,encoding:Ee,isStandardFont:Ne||!1,metadata:{}};return Rn.publish("addFont",{font:Xe,instance:this}),Yt[Xe.id]=Xe,vf(Xe),Xe.id},Ea=p.__private__.pdfEscape=p.pdfEscape=function(R,te){return(function(ge,Ee){var Ne,Xe,et,bt,kt,en,wn,Kn,si;if(et=(Ee=Ee||{}).sourceEncoding||"Unicode",kt=Ee.outputEncoding,(Ee.autoencode||kt)&&Yt[Ke].metadata&&Yt[Ke].metadata[et]&&Yt[Ke].metadata[et].encoding&&(bt=Yt[Ke].metadata[et].encoding,!kt&&Yt[Ke].encoding&&(kt=Yt[Ke].encoding),!kt&&bt.codePages&&(kt=bt.codePages[0]),typeof kt=="string"&&(kt=bt[kt]),kt)){for(wn=!1,en=[],Ne=0,Xe=ge.length;Ne<Xe;Ne++)(Kn=kt[ge.charCodeAt(Ne)])?en.push(String.fromCharCode(Kn)):en.push(ge[Ne]),en[Ne].charCodeAt(0)>>8&&(wn=!0);ge=en.join("")}for(Ne=ge.length;wn===void 0&&Ne!==0;)ge.charCodeAt(Ne-1)>>8&&(wn=!0),Ne--;if(!wn)return ge;for(en=Ee.noBOM?[]:[254,255],Ne=0,Xe=ge.length;Ne<Xe;Ne++){if((si=(Kn=ge.charCodeAt(Ne))>>8)>>8)throw new Error("Character at position "+Ne+" of string '"+ge+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");en.push(si),en.push(Kn-(si<<8))}return String.fromCharCode.apply(void 0,en)})(R,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},os=p.__private__.beginPage=function(R){Ve[++mn]=[],qt[mn]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},gu(mn),Ie(Ve[ee])},pu=function(R,te){var ge,Ee,Ne;switch(t=te||t,typeof R=="string"&&(ge=S(R.toLowerCase()),Array.isArray(ge)&&(Ee=ge[0],Ne=ge[1])),Array.isArray(R)&&(Ee=R[0]*Zt,Ne=R[1]*Zt),isNaN(Ee)&&(Ee=i[0],Ne=i[1]),(Ee>14400||Ne>14400)&&(ii.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Ne=Math.min(14400,Ne)),i=[Ee,Ne],t.substr(0,1)){case"l":Ne>Ee&&(i=[Ne,Ee]);break;case"p":Ee>Ne&&(i=[Ne,Ee])}os(i),sn(ip),U(Dl),Cf!==0&&U(Cf+" J"),sp!==0&&U(sp+" j"),Rn.publish("addPage",{pageNumber:mn})},eh=function(R){R>0&&R<=mn&&(Ve.splice(R,1),qt.splice(R,1),mn--,ee>mn&&(ee=mn),this.setPage(ee))},gu=function(R){R>0&&R<=mn&&(ee=R)},xf=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ve.length-1},Yg=function(R,te,ge){var Ee,Ne=void 0;return ge=ge||{},R=R!==void 0?R:Yt[Ke].fontName,te=te!==void 0?te:Yt[Ke].fontStyle,Ee=R.toLowerCase(),ln[Ee]!==void 0&&ln[Ee][te]!==void 0?Ne=ln[Ee][te]:ln[R]!==void 0&&ln[R][te]!==void 0?Ne=ln[R][te]:ge.disableWarning===!1&&ii.warn("Unable to look up font label for font '"+R+"', '"+te+"'. Refer to getFontList() for available fonts."),Ne||ge.noFallback||(Ne=ln.times[te])==null&&(Ne=ln.times.normal),Ne},Il=p.__private__.putInfo=function(){var R=Zn(),te=function(Ee){return Ee};for(var ge in f!==null&&(te=Wi.encryptor(R,0)),U("<<"),U("/Producer ("+Ea(te("jsPDF "+Ut.version))+")"),vt)vt.hasOwnProperty(ge)&&vt[ge]&&U("/"+ge.substr(0,1).toUpperCase()+ge.substr(1)+" ("+Ea(te(vt[ge]))+")");U("/CreationDate ("+Ea(te(j))+")"),U(">>"),U("endobj")},wf=p.__private__.putCatalog=function(R){var te=(R=R||{}).rootDictionaryObjId||Oi;switch(Zn(),U("<<"),U("/Type /Catalog"),U("/Pages "+te+" 0 R"),we||(we="fullwidth"),we){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ge=""+we;ge.substr(ge.length-1)==="%"&&(we=parseInt(we)/100),typeof we=="number"&&U("/OpenAction [3 0 R /XYZ null null "+B(we)+"]")}switch(It||(It="continuous"),It){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}Be&&U("/PageMode /"+Be),Rn.publish("putCatalog"),U(">>"),U("endobj")},Xg=p.__private__.putTrailer=function(){U("trailer"),U("<<"),U("/Size "+(J+1)),U("/Root "+J+" 0 R"),U("/Info "+(J-1)+" 0 R"),f!==null&&U("/Encrypt "+Wi.oid+" 0 R"),U("/ID [ <"+Q+"> <"+Q+"> ]"),U(">>")},Ei=p.__private__.putHeader=function(){U("%PDF-"+_),U("%\xBA\xDF\xAC\xE0")},th=p.__private__.putXRef=function(){var R="0000000000";U("xref"),U("0 "+(J+1)),U("0000000000 65535 f ");for(var te=1;te<=J;te++)typeof xe[te]=="function"?U((R+xe[te]()).slice(-10)+" 00000 n "):xe[te]!==void 0?U((R+xe[te]).slice(-10)+" 00000 n "):U("0000000000 00000 n ")},uo=p.__private__.buildDocument=function(){var R;J=0,ve=0,Se=[],xe=[],re=[],Oi=ki(),ta=ki(),Ie(Se),Rn.publish("buildDocument"),Ei(),Ss(),(function(){Rn.publish("putAdditionalObjects");for(var ge=0;ge<re.length;ge++){var Ee=re[ge];lo(Ee.objId,!0),U(Ee.content),U("endobj")}Rn.publish("postPutAdditionalObjects")})(),R=[],(function(){for(var ge in Yt)Yt.hasOwnProperty(ge)&&(d===!1||d===!0&&y.hasOwnProperty(ge))&&ei(Yt[ge])})(),(function(){var ge;for(ge in Dt)Dt.hasOwnProperty(ge)&&Jc(Dt[ge])})(),(function(){for(var ge in Fr)Fr.hasOwnProperty(ge)&&yf(Fr[ge])})(),(function(ge){var Ee;for(Ee in Tt)Tt.hasOwnProperty(Ee)&&(Tt[Ee]instanceof Rg?_f(Tt[Ee]):Tt[Ee]instanceof Ly&&du(Tt[Ee],ge))})(R),Rn.publish("putResources"),R.forEach(Qc),Qc({resourcesOid:ta,objectOid:Number.MAX_SAFE_INTEGER}),Rn.publish("postPutResources"),f!==null&&(Wi.oid=Zn(),U("<<"),U("/Filter /Standard"),U("/V "+Wi.v),U("/R "+Wi.r),U("/U <"+Wi.toHexString(Wi.U)+">"),U("/O <"+Wi.toHexString(Wi.O)+">"),U("/P "+Wi.P),U(">>"),U("endobj")),Il(),wf();var te=ve;return th(),Xg(),U("startxref"),U(""+te),U("%%EOF"),Ie(Ve[ee]),Se.join(`
`)},na=p.__private__.getBlob=function(R){return new Blob([he(R)],{type:"application/pdf"})},ep=p.output=p.__private__.output=(Er=function(R,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",R){case void 0:return uo();case"save":p.save(te.filename);break;case"arraybuffer":return he(uo());case"blob":return na(uo());case"bloburi":case"bloburl":if(dn.URL!==void 0&&typeof dn.URL.createObjectURL=="function")return dn.URL&&dn.URL.createObjectURL(na(uo()))||void 0;ii.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ge="",Ee=uo();try{ge=nW(Ee)}catch{ge=nW(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+te.filename+";base64,"+ge;case"pdfobjectnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Xe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Ne=te.pdfObjectUrl,Xe="");var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Xe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",bt=dn.open();return bt!==null&&bt.document.write(et),bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(dn)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',en=dn.open();if(en!==null){en.document.write(kt);var wn=this;en.document.documentElement.querySelector("#pdfViewer").onload=function(){en.document.title=te.filename,en.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wn.output("bloburl"))}}return en}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(dn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',si=dn.open();if(si!==null&&(si.document.write(Kn),si.document.title=te.filename),si||typeof safari>"u")return si;break;case"datauri":case"dataurl":return dn.document.location.href=this.output("datauristring",te);default:return null}},Er.foo=function(){try{return Er.apply(this,arguments)}catch(ge){var R=ge.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var te="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ge.message;if(!dn.console)throw new Error(te);dn.console.error(te,ge),dn.alert&&alert(te)}},Er.foo.bar=Er,Er.foo),Io=function(R){return Array.isArray(at)===!0&&at.indexOf(R)>-1};switch(r){case"pt":Zt=1;break;case"mm":Zt=72/25.4;break;case"cm":Zt=72/2.54;break;case"in":Zt=72;break;case"px":Zt=Io("px_scaling")==1?.75:96/72;break;case"pc":case"em":Zt=12;break;case"ex":Zt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Zt=r}var Wi=null;_e(),q();var mu=p.__private__.getPageInfo=p.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:qt[R].objId,pageNumber:R,pageContext:qt[R]}},Zg=p.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in qt)if(qt[te].objId===R)break;return mu(te)},f_=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:qt[ee].objId,pageNumber:ee,pageContext:qt[ee]}};p.addPage=function(){return pu.apply(this,arguments),this},p.setPage=function(){return gu.apply(this,arguments),Ie.call(this,Ve[ee]),this},p.insertPage=function(R){return this.addPage(),this.movePage(ee,R),this},p.movePage=function(R,te){var ge,Ee;if(R>te){ge=Ve[R],Ee=qt[R];for(var Ne=R;Ne>te;Ne--)Ve[Ne]=Ve[Ne-1],qt[Ne]=qt[Ne-1];Ve[te]=ge,qt[te]=Ee,this.setPage(te)}else if(R<te){ge=Ve[R],Ee=qt[R];for(var Xe=R;Xe<te;Xe++)Ve[Xe]=Ve[Xe+1],qt[Xe]=qt[Xe+1];Ve[te]=ge,qt[te]=Ee,this.setPage(te)}return this},p.deletePage=function(){return eh.apply(this,arguments),this},p.__private__.text=p.text=function(R,te,ge,Ee,Ne){var Xe,et,bt,kt,en,wn,Kn,si,pi,Br=(Ee=Ee||{}).scope||this;if(typeof R=="number"&&typeof te=="number"&&(typeof ge=="string"||Array.isArray(ge))){var br=ge;ge=te,te=R,R=br}if(arguments[3]instanceof Rt==0?(bt=arguments[4],kt=arguments[5],Yr(Kn=arguments[3])==="object"&&Kn!==null||(typeof bt=="string"&&(kt=bt,bt=null),typeof Kn=="string"&&(kt=Kn,Kn=null),typeof Kn=="number"&&(bt=Kn,Kn=null),Ee={flags:Kn,angle:bt,align:kt})):($("The transform parameter of text() with a Matrix value"),pi=Ne),isNaN(te)||isNaN(ge)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Br;var Si,Sr="",ia=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:Tl,Qa=Br.internal.scaleFactor;function Al(H){return H=H.split("	").join(Array(Ee.TabLen||9).join(" ")),Ea(H,Kn)}function Tf(H){for(var ie,de=H.concat(),Te=[],Pe=de.length;Pe--;)typeof(ie=de.shift())=="string"?Te.push(ie):Array.isArray(H)&&(ie.length===1||ie[1]===void 0&&ie[2]===void 0)?Te.push(ie[0]):Te.push([ie[0],ie[1],ie[2]]);return Te}function ih(H,ie){var de;if(typeof H=="string")de=ie(H)[0];else if(Array.isArray(H)){for(var Te,Pe,tt=H.concat(),mt=[],At=tt.length;At--;)typeof(Te=tt.shift())=="string"?mt.push(ie(Te)[0]):Array.isArray(Te)&&typeof Te[0]=="string"&&(Pe=ie(Te[0],Te[1],Te[2]),mt.push([Pe[0],Pe[1],Pe[2]]));de=mt}return de}var Rl=!1,oh=!0;if(typeof R=="string")Rl=!0;else if(Array.isArray(R)){var sh=R.concat();et=[];for(var ac,Do=sh.length;Do--;)(typeof(ac=sh.shift())!="string"||Array.isArray(ac)&&typeof ac[0]!="string")&&(oh=!1);Rl=oh}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var ah=Ce/Br.internal.scaleFactor,lh=ah*(ia-1);switch(Ee.baseline){case"bottom":ge-=lh;break;case"top":ge+=ah-lh;break;case"hanging":ge+=ah-2*lh;break;case"middle":ge+=ah/2-lh}if((wn=Ee.maxWidth||0)>0&&(typeof R=="string"?R=Br.splitTextToSize(R,wn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(H,ie){return H.concat(Br.splitTextToSize(ie,wn))},[]))),Xe={text:R,x:te,y:ge,options:Ee,mutex:{pdfEscape:Ea,activeFontKey:Ke,fonts:Yt,activeFontSize:Ce}},Rn.publish("preProcessText",Xe),R=Xe.text,bt=(Ee=Xe.options).angle,pi instanceof Rt==0&&bt&&typeof bt=="number"){bt*=Math.PI/180,Ee.rotationDirection===0&&(bt=-bt),N===A&&(bt=-bt);var cp=Math.cos(bt),hp=Math.sin(bt);pi=new Rt(cp,hp,-hp,cp,0,0)}else bt&&bt instanceof Rt&&(pi=bt);N!==A||pi||(pi=Li),(en=Ee.charSpace||Ja)!==void 0&&(Sr+=Y(I(en))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(si=Ee.horizontalScale)!==void 0&&(Sr+=Y(100*si)+` Tz
`),Ee.lang;var Yo=-1,xu=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,uh=Br.internal.getCurrentPageInfo().pageContext;switch(xu){case 0:case!1:case"fill":Yo=0;break;case 1:case!0:case"stroke":Yo=1;break;case 2:case"fillThenStroke":Yo=2;break;case 3:case"invisible":Yo=3;break;case 4:case"fillAndAddForClipping":Yo=4;break;case 5:case"strokeAndAddPathForClipping":Yo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yo=6;break;case 7:case"addToPathForClipping":Yo=7}var im=uh.usedRenderingMode!==void 0?uh.usedRenderingMode:-1;Yo!==-1?Sr+=Yo+` Tr
`:im!==-1&&(Sr+=`0 Tr
`),Yo!==-1&&(uh.usedRenderingMode=Yo),kt=Ee.align||"left";var Sa,ch=Ce*ia,fp=Br.internal.pageSize.getWidth(),dp=Yt[Ke];en=Ee.charSpace||Ja,wn=Ee.maxWidth||0,Kn=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var lc=[],hh=function(H){return Br.getStringUnitWidth(H,{font:dp,charSpace:en,fontSize:Ce,doKerning:!1})*Ce/Qa};if(Object.prototype.toString.call(R)==="[object Array]"){var Ds;et=Tf(R),kt!=="left"&&(Sa=et.map(hh));var As,wu=0;if(kt==="right"){te-=Sa[0],R=[],Do=et.length;for(var Eu=0;Eu<Do;Eu++)Eu===0?(As=Mn(te),Ds=co(ge)):(As=I(wu-Sa[Eu]),Ds=-ch),R.push([et[Eu],As,Ds]),wu=Sa[Eu]}else if(kt==="center"){te-=Sa[0]/2,R=[],Do=et.length;for(var bu=0;bu<Do;bu++)bu===0?(As=Mn(te),Ds=co(ge)):(As=I((wu-Sa[bu])/2),Ds=-ch),R.push([et[bu],As,Ds]),wu=Sa[bu]}else if(kt==="left"){R=[],Do=et.length;for(var fh=0;fh<Do;fh++)R.push(et[fh])}else if(kt==="justify"&&dp.encoding==="Identity-H"){R=[],Do=et.length,wn=wn!==0?wn:fp;for(var Df=0,gi=0;gi<Do;gi++)if(Ds=gi===0?co(ge):-ch,As=gi===0?Mn(te):Df,gi<Do-1){var pp=I((wn-Sa[gi])/(et[gi].split(" ").length-1)),Ml=et[gi].split(" ");R.push([Ml[0]+" ",As,Ds]),Df=0;for(var Nl=1;Nl<Ml.length;Nl++){var Pl=(hh(Ml[Nl-1]+" "+Ml[Nl])-hh(Ml[Nl]))*Qa+pp;Nl==Ml.length-1?R.push([Ml[Nl],Pl,0]):R.push([Ml[Nl]+" ",Pl,0]),Df-=Pl}}else R.push([et[gi],As,Ds]);R.push(["",Df,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Do=et.length,wn=wn!==0?wn:fp,gi=0;gi<Do;gi++){Ds=gi===0?co(ge):-ch,As=gi===0?Mn(te):0;var gp=et[gi].split(" ").length-1,Af=gp>0?(wn-Sa[gi])/gp:0;gi<Do-1?lc.push(Y(I(Af))):lc.push(0),R.push([et[gi],As,Ds])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:Le)===!0&&(R=ih(R,function(H,ie,de){return[H.split("").reverse().join(""),ie,de]})),Xe={text:R,x:te,y:ge,options:Ee,mutex:{pdfEscape:Ea,activeFontKey:Ke,fonts:Yt,activeFontSize:Ce}},Rn.publish("postProcessText",Xe),R=Xe.text,Si=Xe.mutex.isHex||!1;var Xo=Yt[Ke].encoding;Xo!=="WinAnsiEncoding"&&Xo!=="StandardEncoding"||(R=ih(R,function(H,ie,de){return[Al(H),ie,de]})),et=Tf(R),R=[];for(var Ao,m,u,h=Array.isArray(et[0])?1:0,g="",x=function(H,ie,de){var Te="";return de instanceof Rt?(de=typeof Ee.angle=="number"?wi(de,new Rt(1,0,0,1,H,ie)):wi(new Rt(1,0,0,1,H,ie),de),N===A&&(de=wi(new Rt(1,0,0,-1,0,0),de)),Te=de.join(" ")+` Tm
`):Te=Y(H)+" "+Y(ie)+` Td
`,Te},D=0;D<et.length;D++){switch(g="",h){case 1:u=(Si?"<":"(")+et[D][0]+(Si?">":")"),Ao=parseFloat(et[D][1]),m=parseFloat(et[D][2]);break;case 0:u=(Si?"<":"(")+et[D]+(Si?">":")"),Ao=Mn(te),m=co(ge)}lc!==void 0&&lc[D]!==void 0&&(g=lc[D]+` Tw
`),D===0?R.push(g+x(Ao,m,pi)+u):h===0?R.push(g+u):h===1&&R.push(g+x(Ao,m,pi)+u)}R=h===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var k=`BT
/`;return k+=Ke+" "+Ce+` Tf
`,k+=Y(Ce*ia)+` TL
`,k+=bi+`
`,k+=Sr,k+=R,U(k+="ET"),y[Ke]=!0,Br};var Kg=p.__private__.clip=p.clip=function(R){return U(R==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Kg("evenodd")},p.__private__.discardPath=p.discardPath=function(){return U("n"),this};var Cs=p.__private__.isValidStyle=function(R){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(te=!0),te};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(R){return Cs(R)&&(c=R),this};var tp=p.__private__.getStyle=p.getStyle=function(R){var te=c;switch(R){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=R}return te},Jg=p.close=function(){return U("h"),this};p.stroke=function(){return U("S"),this},p.fill=function(R){return nh("f",R),this},p.fillEvenOdd=function(R){return nh("f*",R),this},p.fillStroke=function(R){return nh("B",R),this},p.fillStrokeEvenOdd=function(R){return nh("B*",R),this};var nh=function(R,te){Yr(te)==="object"?$r(te,R):U(R)},rh=function(R){R===null||N===A&&R===void 0||(R=tp(R),U(R))};function np(R,te,ge,Ee,Ne){var Xe=new Ly(te||this.boundingBox,ge||this.xStep,Ee||this.yStep,this.gState,Ne||this.matrix);Xe.stream=this.stream;var et=R+"$$"+this.cloneIndex+++"$$";return bn(et,Xe),Xe}var $r=function(R,te){var ge=ir[R.key],Ee=Tt[ge];if(Ee instanceof Rg)U("q"),U(yu(te)),Ee.gState&&p.setGState(Ee.gState),U(R.matrix.toString()+" cm"),U("/"+ge+" sh"),U("Q");else if(Ee instanceof Ly){var Ne=new Rt(1,0,0,-1,0,sc());R.matrix&&(Ne=Ne.multiply(R.matrix||Li),ge=np.call(Ee,R.key,R.boundingBox,R.xStep,R.yStep,Ne).id),U("q"),U("/Pattern cs"),U("/"+ge+" scn"),Ee.gState&&p.setGState(Ee.gState),U(te),U("Q")}},yu=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},rp=p.moveTo=function(R,te){return U(Y(I(R))+" "+Y(M(te))+" m"),this},Ef=p.lineTo=function(R,te){return U(Y(I(R))+" "+Y(M(te))+" l"),this},di=p.curveTo=function(R,te,ge,Ee,Ne,Xe){return U([Y(I(R)),Y(M(te)),Y(I(ge)),Y(M(Ee)),Y(I(Ne)),Y(M(Xe)),"c"].join(" ")),this};p.__private__.line=p.line=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!Cs(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return N===T?this.lines([[ge-R,Ee-te]],R,te,[1,1],Ne||"S"):this.lines([[ge-R,Ee-te]],R,te,[1,1]).stroke()},p.__private__.lines=p.lines=function(R,te,ge,Ee,Ne,Xe){var et,bt,kt,en,wn,Kn,si,pi,Br,br,Si,Sr;if(typeof R=="number"&&(Sr=ge,ge=te,te=R,R=Sr),Ee=Ee||[1,1],Xe=Xe||!1,isNaN(te)||isNaN(ge)||!Array.isArray(R)||!Array.isArray(Ee)||!Cs(Ne)||typeof Xe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(rp(te,ge),et=Ee[0],bt=Ee[1],en=R.length,br=te,Si=ge,kt=0;kt<en;kt++)(wn=R[kt]).length===2?(br=wn[0]*et+br,Si=wn[1]*bt+Si,Ef(br,Si)):(Kn=wn[0]*et+br,si=wn[1]*bt+Si,pi=wn[2]*et+br,Br=wn[3]*bt+Si,br=wn[4]*et+br,Si=wn[5]*bt+Si,di(Kn,si,pi,Br,br,Si));return Xe&&Jg(),rh(Ne),this},p.path=function(R){for(var te=0;te<R.length;te++){var ge=R[te],Ee=ge.c;switch(ge.op){case"m":rp(Ee[0],Ee[1]);break;case"l":Ef(Ee[0],Ee[1]);break;case"c":di.apply(this,Ee);break;case"h":Jg()}}return this},p.__private__.rect=p.rect=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!Cs(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return N===T&&(Ee=-Ee),U([Y(I(R)),Y(M(te)),Y(I(ge)),Y(I(Ee)),"re"].join(" ")),rh(Ne),this},p.__private__.triangle=p.triangle=function(R,te,ge,Ee,Ne,Xe,et){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||isNaN(Ne)||isNaN(Xe)||!Cs(et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ge-R,Ee-te],[Ne-ge,Xe-Ee],[R-Ne,te-Xe]],R,te,[1,1],et,!0),this},p.__private__.roundedRect=p.roundedRect=function(R,te,ge,Ee,Ne,Xe,et){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||isNaN(Ne)||isNaN(Xe)||!Cs(et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var bt=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*ge),Xe=Math.min(Xe,.5*Ee),this.lines([[ge-2*Ne,0],[Ne*bt,0,Ne,Xe-Xe*bt,Ne,Xe],[0,Ee-2*Xe],[0,Xe*bt,-Ne*bt,Xe,-Ne,Xe],[2*Ne-ge,0],[-Ne*bt,0,-Ne,-Xe*bt,-Ne,-Xe],[0,2*Xe-Ee],[0,-Xe*bt,Ne*bt,-Xe,Ne,-Xe]],R+Ne,te,[1,1],et,!0),this},p.__private__.ellipse=p.ellipse=function(R,te,ge,Ee,Ne){if(isNaN(R)||isNaN(te)||isNaN(ge)||isNaN(Ee)||!Cs(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Xe=4/3*(Math.SQRT2-1)*ge,et=4/3*(Math.SQRT2-1)*Ee;return rp(R+ge,te),di(R+ge,te-et,R+Xe,te-Ee,R,te-Ee),di(R-Xe,te-Ee,R-ge,te-et,R-ge,te),di(R-ge,te+et,R-Xe,te+Ee,R,te+Ee),di(R+Xe,te+Ee,R+ge,te+et,R+ge,te),rh(Ne),this},p.__private__.circle=p.circle=function(R,te,ge,Ee){if(isNaN(R)||isNaN(te)||isNaN(ge)||!Cs(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,te,ge,ge,Ee)},p.setFont=function(R,te,ge){return ge&&(te=X(te,ge)),Ke=Yg(R,te,{disableWarning:!1}),this};var Is=p.__private__.getFont=p.getFont=function(){return Yt[Yg.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var R,te,ge={};for(R in ln)if(ln.hasOwnProperty(R))for(te in ge[R]=[],ln[R])ln[R].hasOwnProperty(te)&&ge[R].push(te);return ge},p.addFont=function(R,te,ge,Ee,Ne){var Xe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Xe.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Xe.indexOf(arguments[3])==-1&&(ge=X(ge,Ee)),Qd.call(this,R,te,ge,Ne=Ne||"Identity-H")};var Tl,ip=n.lineWidth||.200025,d_=p.__private__.getLineWidth=p.getLineWidth=function(){return ip},sn=p.__private__.setLineWidth=p.setLineWidth=function(R){return ip=R,U(Y(I(R))+" w"),this};p.__private__.setLineDash=Ut.API.setLineDash=Ut.API.setLineDashPattern=function(R,te){if(R=R||[],te=te||0,isNaN(te)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(ge){return Y(I(ge))}).join(" "),te=Y(I(te)),U("["+R+"] "+te+" d"),this};var bf=p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*Tl};p.__private__.getLineHeight=p.getLineHeight=function(){return Ce*Tl};var p_=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Tl=R),this},Qg=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Tl};p_(n.lineHeight);var Mn=p.__private__.getHorizontalCoordinate=function(R){return I(R)},co=p.__private__.getVerticalCoordinate=function(R){return N===A?R:qt[ee].mediaBox.topRightY-qt[ee].mediaBox.bottomLeftY-I(R)},op=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(R){return Y(Mn(R))},em=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(R){return Y(co(R))},Dl=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Es(Dl)},p.__private__.setStrokeColor=p.setDrawColor=function(R,te,ge,Ee){return Dl=So({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"draw",precision:2}),U(Dl),this};var Sf=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Es(Sf)},p.__private__.setFillColor=p.setFillColor=function(R,te,ge,Ee){return Sf=So({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"fill",precision:2}),U(Sf),this};var bi=n.textColor||"0 g",tm=p.__private__.getTextColor=p.getTextColor=function(){return Es(bi)};p.__private__.setTextColor=p.setTextColor=function(R,te,ge,Ee){return bi=So({ch1:R,ch2:te,ch3:ge,ch4:Ee,pdfColorType:"text",precision:3}),this};var Ja=n.charSpace,nm=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ja||0)};p.__private__.setCharSpace=p.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ja=R,this};var Cf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(R){var te=p.CapJoinStyles[R];if(te===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Cf=te,U(te+" J"),this};var sp=0;p.__private__.setLineJoin=p.setLineJoin=function(R){var te=p.CapJoinStyles[R];if(te===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=te,U(te+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return U(Y(I(R))+" M"),this},p.GState=HC,p.setGState=function(R){(R=typeof R=="string"?Dt[Gt[R]]:ap(null,R)).equals(Fn)||(U("/"+R.id+" gs"),Fn=R)};var ap=function(R,te){if(!R||!Gt[R]){var ge=!1;for(var Ee in Dt)if(Dt.hasOwnProperty(Ee)&&Dt[Ee].equals(te)){ge=!0;break}if(ge)te=Dt[Ee];else{var Ne="GS"+(Object.keys(Dt).length+1).toString(10);Dt[Ne]=te,te.id=Ne}return R&&(Gt[R]=te.id),Rn.publish("addGState",te),te}};p.addGState=function(R,te){return ap(R,te),this},p.saveGraphicsState=function(){return U("q"),hr.push({key:Ke,size:Ce,color:bi}),this},p.restoreGraphicsState=function(){U("Q");var R=hr.pop();return Ke=R.key,Ce=R.size,bi=R.color,Fn=null,this},p.setCurrentTransformationMatrix=function(R){return U(R.toString()+" cm"),this},p.comment=function(R){return U("#"+R),this};var To=function(R,te){var ge=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ge},set:function(Xe){isNaN(Xe)||(ge=parseFloat(Xe))}});var Ee=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(Xe){isNaN(Xe)||(Ee=parseFloat(Xe))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Xe){Ne=Xe.toString()}}),this},oc=function(R,te,ge,Ee){To.call(this,R,te),this.type="rect";var Ne=ge||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(et){isNaN(et)||(Ne=parseFloat(et))}});var Xe=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Xe},set:function(et){isNaN(et)||(Xe=parseFloat(et))}}),this},If=function(){this.page=mn,this.currentPage=ee,this.pages=Ve.slice(0),this.pagesContext=qt.slice(0),this.x=ht,this.y=Rr,this.matrix=pt,this.width=lp(ee),this.height=up(ee),this.outputDestination=be,this.id="",this.objectNumber=-1};If.prototype.restore=function(){mn=this.page,ee=this.currentPage,qt=this.pagesContext,Ve=this.pages,ht=this.x,Rr=this.y,pt=this.matrix,_u(ee,this.width),Ts(ee,this.height),be=this.outputDestination};var $o=function(R,te,ge,Ee,Ne){Qr.push(new If),mn=ee=0,Ve=[],ht=R,Rr=te,pt=Ne,os([ge,Ee])};for(var ba in p.beginFormObject=function(R,te,ge,Ee,Ne){return $o(R,te,ge,Ee,Ne),this},p.endFormObject=function(R){return(function(te){if(Jr[te])Qr.pop().restore();else{var ge=new If,Ee="Xo"+(Object.keys(Fr).length+1).toString(10);ge.id=Ee,Jr[te]=Ee,Fr[Ee]=ge,Rn.publish("addFormObject",ge),Qr.pop().restore()}})(R),this},p.doFormObject=function(R,te){var ge=Fr[Jr[R]];return U("q"),U(te.toString()+" cm"),U("/"+ge.id+" Do"),U("Q"),this},p.getFormObject=function(R){var te=Fr[Jr[R]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},p.save=function(R,te){return R=R||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(Ag(na(uo()),R),typeof Ag.unload=="function"&&dn.setTimeout&&setTimeout(Ag.unload,911),this):new Promise(function(ge,Ee){try{var Ne=Ag(na(uo()),R);typeof Ag.unload=="function"&&dn.setTimeout&&setTimeout(Ag.unload,911),ge(Ne)}catch(Xe){Ee(Xe.message)}})},Ut.API)Ut.API.hasOwnProperty(ba)&&(ba==="events"&&Ut.API.events.length?(function(R,te){var ge,Ee,Ne;for(Ne=te.length-1;Ne!==-1;Ne--)ge=te[Ne][0],Ee=te[Ne][1],R.subscribe.apply(R,[ge].concat(typeof Ee=="function"?[Ee]:Ee))})(Rn,Ut.API.events):p[ba]=Ut.API[ba]);function lp(R){return qt[R].mediaBox.topRightX-qt[R].mediaBox.bottomLeftX}function _u(R,te){qt[R].mediaBox.topRightX=te+qt[R].mediaBox.bottomLeftX}function up(R){return qt[R].mediaBox.topRightY-qt[R].mediaBox.bottomLeftY}function Ts(R,te){qt[R].mediaBox.topRightY=te+qt[R].mediaBox.bottomLeftY}var vu=p.getPageWidth=function(R){return lp(R=R||ee)/Zt},ra=p.setPageWidth=function(R,te){_u(R,te*Zt)},sc=p.getPageHeight=function(R){return up(R=R||ee)/Zt},rm=p.setPageHeight=function(R,te){Ts(R,te*Zt)};return p.internal={pdfEscape:Ea,getStyle:tp,getFont:Is,getFontSize:Ue,getCharSpace:nm,getTextColor:tm,getLineHeight:bf,getLineHeightFactor:Qg,getLineWidth:d_,write:ae,getHorizontalCoordinate:Mn,getVerticalCoordinate:co,getCoordinateString:op,getVerticalCoordinateString:em,collections:{},newObject:Zn,newAdditionalObject:Kc,newObjectDeferred:ki,newObjectDeferredBegin:lo,getFilters:Co,putStream:bs,events:Rn,scaleFactor:Zt,pageSize:{getWidth:function(){return vu(ee)},setWidth:function(R){ra(ee,R)},getHeight:function(){return sc(ee)},setHeight:function(R){rm(ee,R)}},encryptionOptions:f,encryption:Wi,getEncryptor:function(R){return f!==null?Wi.encryptor(R,0):function(te){return te}},output:ep,getNumberOfPages:xf,get pages(){return Ve},out:U,f2:B,f3:v,getPageInfo:mu,getPageInfoByObjId:Zg,getCurrentPageInfo:f_,getPDFVersion:w,Point:To,Rectangle:oc,Matrix:Rt,hasHotfix:Io},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return vu(ee)},set:function(R){ra(ee,R)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return sc(ee)},set:function(R){rm(ee,R)},enumerable:!0,configurable:!0}),(function(R){for(var te=0,ge=Fe.length;te<ge;te++){var Ee=Qd.call(this,R[te][0],R[te][1],R[te][2],Fe[te][3],!0);d===!1&&(y[Ee]=!0);var Ne=R[te][0].split("-");vf({id:Ee,fontName:Ne[0],fontStyle:Ne[1]||""})}Rn.publish("addFonts",{fonts:Yt,dictionary:ln})}).call(p,Fe),Ke="F1",pu(i,t),Rn.publish("initialized"),p}Ny.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Ny.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ny.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Ny.prototype.processOwnerPassword=function(n,e){return eO(Qk(e).substr(0,5),n)},Ny.prototype.encryptor=function(n,e){var t=Qk(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return eO(t,r)}},HC.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Yr(n)!==Yr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Ut.API={events:[]},Ut.version="4.0.0";var Hi=Ut.API,rO=1,Ng=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ry=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},En=function(n){return n.toFixed(2)},Ud=function(n){return n.toFixed(5)};Hi.__acroform__={};var Ya=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},sW=function(n){return n*rO},zc=function(n){var e=new AW,t=Lt.internal.getHeight(n)||0,r=Lt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(En(r)),Number(En(t))],e},Kme=Hi.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},Jme=Hi.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},Qme=Hi.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},io=Hi.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Qme(n,e-1)},oo=Hi.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Kme(n,e-1)},so=Hi.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Jme(n,e-1)},e0e=Hi.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=r(o)||0,[Number(En(l.lowerLeft_X)),Number(En(l.lowerLeft_Y)),Number(En(l.upperRight_X)),Number(En(l.upperRight_Y))]},t0e=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=tO(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+En(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=zc(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},tO=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var o=t,s=Lt.internal.getHeight(n)||0;s=s<0?-s:s;var a=Lt.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(B,v,I){if(B+1<i.length){var M=v+" "+i[B+1][0];return OC(M,n,I).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var c,f,d=OC("3",n,o).height,y=n.multiline?s-o:(s-d)/2,p=y+=2,_=0,w=0,b=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+OC(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var S="",T=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var N=!1;if(i[A].length!==1&&b!==i[A].length-1){if((d+2)*(T+2)+2>s)continue e;S+=i[A][b],N=!0,w=A,A--}else{S=(S+=i[A][b]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var O=parseInt(A),W=l(O,S,o),X=A>=i.length-1;if(W&&!X){S+=" ",b=0;continue}if(W||X){if(X)w=O;else if(n.multiline&&(d+2)*(T+2)+2>s)continue e}else{if(!n.multiline||(d+2)*(T+2)+2>s)continue e;w=O}}for(var Y="",$=_;$<=w;$++){var V=i[$];if(n.multiline){if($===w){Y+=V[b]+" ",b=(b+1)%V.length;continue}if($===_){Y+=V[V.length-1]+" ";continue}}Y+=V[0]+" "}switch(Y=Y.substr(Y.length-1)==" "?Y.substr(0,Y.length-1):Y,f=OC(Y,n,o).width,n.textAlign){case"right":c=a-f-2;break;case"center":c=(a-f)/2;break;default:c=2}e+=En(c)+" "+En(p)+` Td
`,e+="("+Ng(Y)+`) Tj
`,e+=-En(c)+` 0 Td
`,p=-(o+2),f=0,_=N?w:w+1,T++,S=""}break}return r.text=e,r.fontSize=o,r},OC=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},n0e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},r0e=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},i0e=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ku.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(n0e)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");rO=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new RW,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&r0e(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],c=a.Rect;if(a.Rect&&(a.Rect=e0e(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Lt.createDefaultAppearanceStream(a),Yr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=t0e(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var d="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var p=a.appearanceStreamContent[y];if(d+="/"+y+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var s in p)if(p.hasOwnProperty(s)){var _=p[s];typeof _=="function"&&(_=_.call(i,a)),d+="/"+s+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,a)),d+="/"+s+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&(function(w,b){for(var S in w)if(w.hasOwnProperty(S)){var T=S,A=w[S];b.internal.newObjectDeferredBegin(A.objId,!0),Yr(A)==="object"&&typeof A.putStream=="function"&&A.putStream(),delete w[T]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},DW=Hi.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Yr(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Ng(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Yk=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+Ng(r(n))+")"},Vc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Vc.prototype.toString=function(){return this.objId+" 0 R"},Vc.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Vc.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:DW(i,this.objId,this.scope)}):i instanceof Vc?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var AW=function(){Vc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ya(AW,Vc);var RW=function(){Vc.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ng(t(n))+")"}},set:function(t){n=t}})};Ya(RW,Vc);var Ku=function n(){Vc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');e=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!io(e,3)},set:function(S){S?this.F=oo(e,3):this.F=so(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');t=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof qC)return;o="FieldObject"+n.FieldNum++}var S=function(T){return T};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Ng(S(o))+")"},set:function(S){o=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(S){o=S}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(S){s=S}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/rO:c},set:function(S){c=S}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof qC||this instanceof Mg))return Yk(d,this.objId,this.scope)},set:function(S){S=S.toString(),d=S}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof ts==0?Yk(y,this.objId,this.scope):y},set:function(S){S=S.toString(),y=this instanceof ts==0?S.substr(0,1)==="("?Ry(S.substr(1,S.length-2)):Ry(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Ry(y.substr(1,y.length-1)):y},set:function(S){S=S.toString(),y=this instanceof ts==1?"/"+S:S}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ts==0?Yk(p,this.objId,this.scope):p},set:function(S){S=S.toString(),p=this instanceof ts==0?S.substr(0,1)==="("?Ry(S.substr(1,S.length-2)):Ry(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts==1?Ry(p.substr(1,p.length-1)):p},set:function(S){S=S.toString(),p=this instanceof ts==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(S){_=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,1)},set:function(S){S?this.Ff=oo(this.Ff,1):this.Ff=so(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,2)},set:function(S){S?this.Ff=oo(this.Ff,2):this.Ff=so(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,3)},set:function(S){S?this.Ff=oo(this.Ff,3):this.Ff=so(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');b=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(b){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:b=2;break;case"center":case 1:b=1;break;default:b=0}}})};Ya(Ku,Vc);var ky=function(){Ku.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DW(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,s,a){a||(a=1);for(var l,c=[];l=s.exec(o);)c.push(l[a]);return c})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,18)},set:function(t){t?this.Ff=oo(this.Ff,18):this.Ff=so(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=oo(this.Ff,19):this.Ff=so(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,20)},set:function(t){t?(this.Ff=oo(this.Ff,20),e.sort()):this.Ff=so(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,22)},set:function(t){t?this.Ff=oo(this.Ff,22):this.Ff=so(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,23)},set:function(t){t?this.Ff=oo(this.Ff,23):this.Ff=so(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,27)},set:function(t){t?this.Ff=oo(this.Ff,27):this.Ff=so(this.Ff,27)}}),this.hasAppearanceStream=!1};Ya(ky,Ku);var Oy=function(){ky.call(this),this.fontName="helvetica",this.combo=!1};Ya(Oy,ky);var Fy=function(){Oy.call(this),this.combo=!0};Ya(Fy,Oy);var UC=function(){Fy.call(this),this.edit=!0};Ya(UC,Fy);var ts=function(){Ku.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,15)},set:function(t){t?this.Ff=oo(this.Ff,15):this.Ff=so(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,16)},set:function(t){t?this.Ff=oo(this.Ff,16):this.Ff=so(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,17)},set:function(t){t?this.Ff=oo(this.Ff,17):this.Ff=so(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,26)},set:function(t){t?this.Ff=oo(this.Ff,26):this.Ff=so(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ng(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Yr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ya(ts,Ku);var GC=function(){ts.call(this),this.pushButton=!0};Ya(GC,ts);var By=function(){ts.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Ya(By,ts);var qC=function(){var n,e;Ku.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+Ng(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Yr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Lt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ya(qC,Ku),By.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},By.prototype.createOption=function(n){var e=new qC;return e.Parent=this,e.optionName=n,this.Kids.push(e),o0e.call(this.scope,e),e};var zC=function(){ts.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Lt.CheckBox.createAppearanceStream()};Ya(zC,ts);var Mg=function(){Ku.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,13)},set:function(e){e?this.Ff=oo(this.Ff,13):this.Ff=so(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,21)},set:function(e){e?this.Ff=oo(this.Ff,21):this.Ff=so(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,23)},set:function(e){e?this.Ff=oo(this.Ff,23):this.Ff=so(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,24)},set:function(e){e?this.Ff=oo(this.Ff,24):this.Ff=so(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,25)},set:function(e){e?this.Ff=oo(this.Ff,25):this.Ff=so(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,26)},set:function(e){e?this.Ff=oo(this.Ff,26):this.Ff=so(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ya(Mg,Ku);var VC=function(){Mg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!io(this.Ff,14)},set:function(n){n?this.Ff=oo(this.Ff,14):this.Ff=so(this.Ff,14)}}),this.password=!0};Ya(VC,Mg);var Lt={CheckBox:{createAppearanceStream:function(){return{N:{On:Lt.CheckBox.YesNormal},D:{On:Lt.CheckBox.YesPushDown,Off:Lt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=tO(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+En(Lt.internal.getWidth(n))+" "+En(Lt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+En(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=zc(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=Lt.internal.getHeight(n),s=Lt.internal.getWidth(n),a=tO(n,n.caption);return i.push("1 g"),i.push("0 0 "+En(s)+" "+En(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+En(s-1)+" "+En(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+En(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+En(Lt.internal.getWidth(n))+" "+En(Lt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Lt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Lt.RadioButton.Circle.YesNormal,e.D[n]=Lt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=zc(n);e.scope=n.scope;var t=[],r=Lt.internal.getWidth(n)<=Lt.internal.getHeight(n)?Lt.internal.getWidth(n)/4:Lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Lt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ud(Lt.internal.getWidth(n)/2)+" "+Ud(Lt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=[],r=Lt.internal.getWidth(n)<=Lt.internal.getHeight(n)?Lt.internal.getWidth(n)/4:Lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Lt.internal.Bezier_C).toFixed(5)),s=Number((r*Lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ud(Lt.internal.getWidth(n)/2)+" "+Ud(Lt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ud(Lt.internal.getWidth(n)/2)+" "+Ud(Lt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=[],r=Lt.internal.getWidth(n)<=Lt.internal.getHeight(n)?Lt.internal.getWidth(n)/4:Lt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Lt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ud(Lt.internal.getWidth(n)/2)+" "+Ud(Lt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Lt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Lt.RadioButton.Cross.YesNormal,e.D[n]=Lt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=zc(n);e.scope=n.scope;var t=[],r=Lt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+En(Lt.internal.getWidth(n)-2)+" "+En(Lt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(En(r.x1.x)+" "+En(r.x1.y)+" m"),t.push(En(r.x2.x)+" "+En(r.x2.y)+" l"),t.push(En(r.x4.x)+" "+En(r.x4.y)+" m"),t.push(En(r.x3.x)+" "+En(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=Lt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+En(Lt.internal.getWidth(n))+" "+En(Lt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+En(Lt.internal.getWidth(n)-2)+" "+En(Lt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(En(t.x1.x)+" "+En(t.x1.y)+" m"),r.push(En(t.x2.x)+" "+En(t.x2.y)+" l"),r.push(En(t.x4.x)+" "+En(t.x4.y)+" m"),r.push(En(t.x3.x)+" "+En(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=zc(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+En(Lt.internal.getWidth(n))+" "+En(Lt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Lt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Lt.internal.getWidth(n),t=Lt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Lt.internal.getWidth=function(n){var e=0;return Yr(n)==="object"&&(e=sW(n.Rect[2])),e},Lt.internal.getHeight=function(n){var e=0;return Yr(n)==="object"&&(e=sW(n.Rect[3])),e};var o0e=Hi.addField=function(n){if(i0e(this,n),!(n instanceof Ku))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Hi.AcroFormChoiceField=ky,Hi.AcroFormListBox=Oy,Hi.AcroFormComboBox=Fy,Hi.AcroFormEditBox=UC,Hi.AcroFormButton=ts,Hi.AcroFormPushButton=GC,Hi.AcroFormRadioButton=By,Hi.AcroFormCheckBox=zC,Hi.AcroFormTextField=Mg,Hi.AcroFormPasswordField=VC,Hi.AcroFormAppearance=Lt,Hi.AcroForm={ChoiceField:ky,ListBox:Oy,ComboBox:Fy,EditBox:UC,Button:ts,PushButton:GC,RadioButton:By,CheckBox:zC,TextField:Mg,PasswordField:VC,Appearance:Lt},Ut.AcroForm={ChoiceField:ky,ListBox:Oy,ComboBox:Fy,EditBox:UC,Button:ts,PushButton:GC,RadioButton:By,CheckBox:zC,TextField:Mg,PasswordField:VC,Appearance:Lt};var Ynt=Ut.AcroForm;function MW(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(B,v){var I,M,j,Q,Z,q=t;if((v=v||t)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(W(B))for(Z in r)for(j=r[Z],I=0;I<j.length;I+=1){for(Q=!0,M=0;M<j[I].length;M+=1)if(j[I][M]!==void 0&&j[I][M]!==B[M]){Q=!1;break}if(Q===!0){q=Z;break}}else for(Z in r)for(j=r[Z],I=0;I<j.length;I+=1){for(Q=!0,M=0;M<j[I].length;M+=1)if(j[I][M]!==void 0&&j[I][M]!==B.charCodeAt(M)){Q=!1;break}if(Q===!0){q=Z;break}}return q===t&&v!==t&&(q=v),q},o=function B(v){for(var I=this.internal.write,M=this.internal.putStream,j=(0,this.internal.getFilters)();j.indexOf("FlateEncode")!==-1;)j.splice(j.indexOf("FlateEncode"),1);v.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:v.width}),Q.push({key:"Height",value:v.height}),v.colorSpace===S.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(v.palette.length/3-1)+" "+("sMask"in v&&v.sMask!==void 0?v.objectId+2:v.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+v.colorSpace}),v.colorSpace===S.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:v.bitsPerComponent}),"decodeParameters"in v&&v.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+v.decodeParameters+">>"}),"transparency"in v&&Array.isArray(v.transparency)&&v.transparency.length>0){for(var Z="",q=0,K=v.transparency.length;q<K;q++)Z+=v.transparency[q]+" "+v.transparency[q]+" ";Q.push({key:"Mask",value:"["+Z+"]"})}v.sMask!==void 0&&Q.push({key:"SMask",value:v.objectId+1+" 0 R"});var oe=v.filter!==void 0?["/"+v.filter]:void 0;if(M({data:v.data,additionalKeyValues:Q,alreadyAppliedFilters:oe,objectId:v.objectId}),I("endobj"),"sMask"in v&&v.sMask!==void 0){var _e,F=(_e=v.sMaskBitsPerComponent)!==null&&_e!==void 0?_e:v.bitsPerComponent,ee={width:v.width,height:v.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:v.sMask};"filter"in v&&(ee.decodeParameters="/Predictor ".concat(v.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(v.width),ee.filter=v.filter),B.call(this,ee)}if(v.colorSpace===S.INDEXED){var ce=this.internal.newObject();M({data:Y(new Uint8Array(v.palette)),objectId:ce}),I("endobj")}},s=function(){var B=this.internal.collections[e+"images"];for(var v in B)o.call(this,B[v])},a=function(){var B,v=this.internal.collections[e+"images"],I=this.internal.write;for(var M in v)I("/I"+(B=v[M]).index,B.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var B=this.internal.collections[e+"images"];return l.call(this),B},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(B){return typeof n["process"+B.toUpperCase()]=="function"},y=function(B){return Yr(B)==="object"&&B.nodeType===1},p=function(B,v){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var I=""+B.getAttribute("src");if(I.indexOf("data:image/")===0)return jC(unescape(I).split("base64,").pop());var M=n.loadFile(I,!0);if(M!==void 0)return M}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var j;switch(v){case"PNG":j="image/png";break;case"WEBP":j="image/webp";break;default:j="image/jpeg"}return jC(B.toDataURL(j,1).split("base64,").pop())}},_=function(B){var v=this.internal.collections[e+"images"];if(v){for(var I in v)if(B===v[I].alias)return v[I]}},w=function(B,v,I){return B||v||(B=-96,v=-96),B<0&&(B=-1*I.width*72/B/this.internal.scaleFactor),v<0&&(v=-1*I.height*72/v/this.internal.scaleFactor),B===0&&(B=v*I.width/I.height),v===0&&(v=B*I.height/I.width),[B,v]},b=function(B,v,I,M,j,Q){var Z=w.call(this,I,M,j),q=this.internal.getCoordinateString,K=this.internal.getVerticalCoordinateString,oe=c.call(this);if(I=Z[0],M=Z[1],oe[j.index]=j,Q){Q*=Math.PI/180;var _e=Math.cos(Q),F=Math.sin(Q),ee=function(pe){return pe.toFixed(4)},ce=[ee(_e),ee(F),ee(-1*F),ee(_e),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,q(B),K(v+M),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([q(I),"0","0",q(M),"0","0","cm"].join(" "))):this.internal.write([q(I),"0","0",q(M),q(B),K(v+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+j.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=n.__addimage__.sHashCode=function(B){var v,I,M=0;if(typeof B=="string")for(I=B.length,v=0;v<I;v++)M=(M<<5)-M+B.charCodeAt(v),M|=0;else if(W(B))for(I=B.byteLength/2,v=0;v<I;v++)M=(M<<5)-M+B[v],M|=0;return M},N=n.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var v=!0;return B.length===0&&(v=!1),B.length%4!=0&&(v=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(v=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(v=!1),v},O=n.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var v=B.indexOf(",");return v<0?null:B.substring(0,v).trim().endsWith("base64")?B.substring(v+1):null};n.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var W=n.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},X=n.__addimage__.binaryStringToUint8Array=function(B){for(var v=B.length,I=new Uint8Array(v),M=0;M<v;M++)I[M]=B.charCodeAt(M);return I},Y=n.__addimage__.arrayBufferToBinaryString=function(B){for(var v="",I=W(B)?B:new Uint8Array(B),M=0;M<I.length;M+=8192)v+=String.fromCharCode.apply(null,I.subarray(M,M+8192));return v};n.addImage=function(){var B,v,I,M,j,Q,Z,q,K;if(typeof arguments[1]=="number"?(v=t,I=arguments[1],M=arguments[2],j=arguments[3],Q=arguments[4],Z=arguments[5],q=arguments[6],K=arguments[7]):(v=arguments[1],I=arguments[2],M=arguments[3],j=arguments[4],Q=arguments[5],Z=arguments[6],q=arguments[7],K=arguments[8]),Yr(B=arguments[0])==="object"&&!y(B)&&"imageData"in B){var oe=B;B=oe.imageData,v=oe.format||v||t,I=oe.x||I||0,M=oe.y||M||0,j=oe.w||oe.width||j,Q=oe.h||oe.height||Q,Z=oe.alias||Z,q=oe.compression||q,K=oe.rotation||oe.angle||K}var _e=this.internal.getFilters();if(q===void 0&&_e.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(I)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=$.call(this,B,v,Z,q);return b.call(this,I,M,j,Q,F,K),this};var $=function(B,v,I,M){var j,Q,Z;if(typeof B=="string"&&i(B)===t){B=unescape(B);var q=V(B,!1);(q!==""||(q=n.loadFile(B,!0))!==void 0)&&(B=q)}if(y(B)&&(B=p(B,v)),v=i(B,v),!d(v))throw new Error("addImage does not support files of type '"+v+"', please ensure that a plugin for '"+v+"' support is added.");if(((Z=I)==null||Z.length===0)&&(I=(function(K){return typeof K=="string"||W(K)?A(K):W(K.data)?A(K.data):null})(B)),(j=_.call(this,I))||(B instanceof Uint8Array||v==="RGBA"||(Q=B,B=X(B)),j=this["process"+v.toUpperCase()](B,f.call(this),I,(function(K){return K&&typeof K=="string"&&(K=K.toUpperCase()),K in n.image_compression?K:T.NONE})(M),Q)),!j)throw new Error("An unknown error occurred whilst processing the image.");return j},V=n.__addimage__.convertBase64ToBinaryString=function(B,v){v=typeof v!="boolean"||v;var I,M="";if(typeof B=="string"){var j;I=(j=O(B))!==null&&j!==void 0?j:B;try{M=jC(I)}catch(Q){if(v)throw N(I)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return M};n.getImageProperties=function(B){var v,I,M="";if(y(B)&&(B=p(B)),typeof B=="string"&&i(B)===t&&((M=V(B,!1))===""&&(M=n.loadFile(B)||""),B=M),I=i(B),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(B instanceof Uint8Array||(B=X(B)),!(v=this["process"+I.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return v.fileType=I,v}})(Ut.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Ut.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),c=t.pageContext.annotations,f=!1,d=0;d<c.length&&!f;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<c.length;y++){r=c[y];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),T=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(S(r.contents))+")",o+=" /Popup "+b.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+p(S(T))+") >>",w.content=o;var A=w.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(o+=" /Open true"),o+=" >>",b.content=o,this.internal.write(w.objId,"0 R",b.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var O=this.annotations._nameMap[r.options.name];r.options.pageNumber=O.page,r.options.top=O.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var W=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+W+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:c(r),w:l(t+i),h:c(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,l=this.getTextWidth(t),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var f=this.splitTextToSize(t,a).length;s=Math.ceil(c*f)}else a=l,s=c;return this.text(t,r,i,o),i+=.2*c,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-c,a,s,o),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Ut.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return s(w)&&o(w)&&e[w.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(w){return s(w)&&i.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return s(w)&&o(w)&&e[w.charCodeAt(0)].length>=1};var c=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return s(w)&&o(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return s(w)&&o(w)&&e[w.charCodeAt(0)].length>=3};var f=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return s(w)&&o(w)&&e[w.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(w){var b=0,S=t,T="",A=0;for(b=0;b<w.length;b+=1)S[w.charCodeAt(b)]!==void 0?(A++,typeof(S=S[w.charCodeAt(b)])=="number"&&(T+=String.fromCharCode(S),S=t,A=0),b===w.length-1&&(S=t,T+=w.charAt(b-(A-1)),b-=A-1,A=0)):(S=t,T+=w.charAt(b-A),b-=A,A=0);return T};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var y=n.__arabicParser__.getCorrectForm=function(w,b,S){return s(w)?o(w)===!1?-1:!c(w)||!s(b)&&!s(S)||!s(S)&&a(b)||a(w)&&!s(b)||a(w)&&l(b)||a(w)&&a(b)?0:f(w)&&s(b)&&!a(b)&&s(S)&&c(S)?3:a(w)||!s(S)?1:2:-1},p=function(w){var b=0,S=0,T=0,A="",N="",O="",W=(w=w||"").split("\\s+"),X=[];for(b=0;b<W.length;b+=1){for(X.push(""),S=0;S<W[b].length;S+=1)A=W[b][S],N=W[b][S-1],O=W[b][S+1],s(A)?(T=y(A,N,O),X[b]+=T!==-1?String.fromCharCode(e[A.charCodeAt(0)][T]):A):X[b]+=A;X[b]=d(X[b])}return X.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var w,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(b)){var T=0;for(S=[],T=0;T<b.length;T+=1)Array.isArray(b[T])?S.push([p(b[T][0]),b[T][1],b[T][2]]):S.push([p(b[T])]);w=S}else w=p(b);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",_])})(Ut.API),Ut.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Ut.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(w){y=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(w){_=w}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,c){r.call(this);var f=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),y=c.scaleFactor||this.internal.scaleFactor,p=0,_=0,w=0,b=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var S=c.maxWidth;S>0?typeof l=="string"?l=this.splitTextToSize(l,S):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(A,N){return A.concat(b.splitTextToSize(N,S))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)p<(w=this.getStringUnitWidth(l[T],{font:d})*f)&&(p=w);return p!==0&&(_=l.length),{w:p/=y,h:Math.max((_*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var c=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};n.table=function(l,c,f,d,y){if(r.call(this),!f)throw new Error("No data for PDF table.");var p,_,w,b,S=[],T=[],A=[],N={},O={},W=[],X=[],Y=(y=y||{}).autoSize||!1,$=y.printHeaders!==!1,V=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,B=y.margins||Object.assign({width:this.getPageWidth()},e),v=typeof y.padding=="number"?y.padding:3,I=y.headerBackgroundColor||"#c8c8c8",M=y.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=v,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=M,this.setFontSize(V),d==null)T=S=Object.keys(f[0]),A=S.map(function(){return"left"});else if(Array.isArray(d)&&Yr(d[0])==="object")for(S=d.map(function(oe){return oe.name}),T=d.map(function(oe){return oe.prompt||oe.name||""}),A=d.map(function(oe){return oe.align||"left"}),p=0;p<d.length;p+=1)O[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(T=S=d,A=S.map(function(){return"left"}));if(Y||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<S.length;p+=1){for(N[b=S[p]]=f.map(function(oe){return oe[b]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(T[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=N[b],this.setFont(void 0,"normal"),w=0;w<_.length;w+=1)W.push(this.getTextDimensions(_[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);O[b]=Math.max.apply(null,W)+v+v,W=[]}if($){var j={};for(p=0;p<S.length;p+=1)j[S[p]]={},j[S[p]].text=T[p],j[S[p]].align=A[p];var Q=a.call(this,j,O);X=S.map(function(oe){return new o(l,c,O[oe],Q,j[oe].text,void 0,j[oe].align)}),this.setTableHeaderRow(X),this.printHeaderRow(1,!1)}var Z=d.reduce(function(oe,_e){return oe[_e.name]=_e.align,oe},{});for(p=0;p<f.length;p+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:p,data:f[p]},this);var q=a.call(this,f[p],O);for(w=0;w<S.length;w+=1){var K=f[p][S[w]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:p,col:w,data:K},this),s.call(this,new o(l,c,O[S[w]],q,K,p+2,Z[S[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,c[p]-f-f)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/y+f+f},this).reduce(function(p,_){return Math.max(p,_)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,f),this.setTextColor(_)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),t=!1}})(Ut.API);var NW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],nO=MW(PW),LW=[100,200,300,400,500,600,700,800,900],s0e=MW(LW);function Xk(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return NW[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof nO[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function aW(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var a0e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function uW(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function cW(n){return n.trimLeft()}function l0e(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function u0e(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var FC,hW,fW,My,BC,dW,pW,gW,Zk=["times"];function mW(n,e,t,r,i){var o=4,s=_W;switch(i){case Ut.API.image_compression.FAST:o=1,s=yW;break;case Ut.API.image_compression.MEDIUM:o=6,s=vW;break;case Ut.API.image_compression.SLOW:o=9,s=xW}n=(function(l,c,f,d){for(var y,p=l.length/c,_=new Uint8Array(l.length+p),w=[c0e,yW,_W,vW,xW],b=0;b<p;b+=1){var S=b*c,T=l.subarray(S,S+c);if(d)_.set(d(T,f,y),S+b);else{for(var A=w.length,N=[],O=0;O<A;O+=1)N[O]=w[O](T,f,y);var W=f0e(N.concat());_.set(N[W],S+b)}y=T}return _})(n,e,Math.ceil(t*r/8),s);var a=CC(n,{level:o});return Ut.API.__addimage__.arrayBufferToBinaryString(a)}function c0e(n){var e=Array.apply([],n);return e.unshift(0),e}function yW(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function _W(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var s=t&&t[o]||0;i[o+1]=n[o]-s+256&255}return i}function vW(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var s=n[o-e]||0,a=t&&t[o]||0;i[o+1]=n[o]+256-(s+a>>>1)&255}return i}function xW(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var s=h0e(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-s+256&255}return i}function h0e(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function f0e(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Kk(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),s=(1<<t)-1;return kW(n,i)>>o&s}function wW(n,e,t,r){var i=t*r,o=Math.floor(i/8),s=16-(i-8*o+r),a=(1<<r)-1,l=(e&a)<<s;(function(c,f,d){if(f+1<c.byteLength)c.setUint16(f,d,!1);else{var y=d>>8&255;c.setUint8(f,y)}})(n,o,kW(n,o)&~(a<<s)&65535|l)}function kW(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function d0e(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<1+(7&i);n[e++],n[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,f=[],d=0,y=null,p=0,_=null;for(this.width=t,this.height=r;c&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];d=n[e++]|n[e++]<<8,y=n[e++],1&w||(y=null),p=w>>2&7,e++;break;case 254:for(;;){if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var b=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,A=n[e++]|n[e++]<<8,N=n[e++],O=N>>6&1,W=1<<1+(7&N),X=a,Y=l,$=!1;N>>7&&($=!0,X=e,Y=W,e+=3*W);var V=e;for(e++;;){var B;if(!((B=n[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}f.push({x:b,y:S,width:T,height:A,has_local_palette:$,palette_offset:X,palette_size:Y,data_offset:V,data_length:e-V,transparent_index:y,interlaced:!!O,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return _},this.frameInfo=function(v){if(v<0||v>=f.length)throw new Error("Frame index out of range.");return f[v]},this.decodeAndBlitFrameBGRA=function(v,I){var M=this.frameInfo(v),j=M.width*M.height,Q=new Uint8Array(j);EW(n,M.data_offset,Q,j);var Z=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,oe=t-K,_e=K,F=4*(M.y*t+M.x),ee=4*((M.y+M.height)*t+M.x),ce=F,pe=4*oe;M.interlaced===!0&&(pe+=4*t*7);for(var J=8,xe=0,Se=Q.length;xe<Se;++xe){var ve=Q[xe];if(_e===0&&(_e=K,(ce+=pe)>=ee&&(pe=4*oe+4*t*(J-1),ce=F+(K+oe)*(J<<1),J>>=1)),ve===q)ce+=4;else{var re=n[Z+3*ve],Ve=n[Z+3*ve+1],G=n[Z+3*ve+2];I[ce++]=G,I[ce++]=Ve,I[ce++]=re,I[ce++]=255}--_e}},this.decodeAndBlitFrameRGBA=function(v,I){var M=this.frameInfo(v),j=M.width*M.height,Q=new Uint8Array(j);EW(n,M.data_offset,Q,j);var Z=M.palette_offset,q=M.transparent_index;q===null&&(q=256);var K=M.width,oe=t-K,_e=K,F=4*(M.y*t+M.x),ee=4*((M.y+M.height)*t+M.x),ce=F,pe=4*oe;M.interlaced===!0&&(pe+=4*t*7);for(var J=8,xe=0,Se=Q.length;xe<Se;++xe){var ve=Q[xe];if(_e===0&&(_e=K,(ce+=pe)>=ee&&(pe=4*oe+4*t*(J-1),ce=F+(K+oe)*(J<<1),J>>=1)),ve===q)ce+=4;else{var re=n[Z+3*ve],Ve=n[Z+3*ve+1],G=n[Z+3*ve+2];I[ce++]=re,I[ce++]=Ve,I[ce++]=G,I[ce++]=255}--_e}}}function EW(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,l=i+1,c=(1<<l)-1,f=0,d=0,y=0,p=n[e++],_=new Int32Array(4096),w=null;;){for(;f<16&&p!==0;)d|=n[e++]<<f,f+=8,p===1?p=n[e++]:--p;if(f<l)break;var b=d&c;if(d>>=l,f-=l,b!==o){if(b===s)break;for(var S=b<a?b:w,T=0,A=S;A>o;)A=_[A]>>8,++T;var N=A;if(y+T+(S!==b?1:0)>r)return void ii.log("Warning, gif stream longer than expected.");t[y++]=N;var O=y+=T;for(S!==b&&(t[y++]=N),A=S;T--;)A=_[A],t[--O]=255&A,A>>=8;w!==null&&a<4096&&(_[a++]=w<<8|N,a>=c+1&&l<12&&(++l,c=c<<1|1)),w=b}else a=s+1,c=(1<<(l=i+1))-1,w=null}return y!==r&&ii.log("Warning, gif stream shorter than expected."),t}function Jk(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),f=new Array(64),d=new Array(65535),y=new Array(65535),p=new Array(64),_=new Array(64),w=[],b=0,S=7,T=new Array(64),A=new Array(64),N=new Array(64),O=new Array(256),W=new Array(2048),X=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Y=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],v=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],j=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(F,ee){for(var ce=0,pe=0,J=new Array,xe=1;xe<=16;xe++){for(var Se=1;Se<=F[xe];Se++)J[ee[pe]]=[],J[ee[pe]][0]=ce,J[ee[pe]][1]=xe,pe++,ce++;ce*=2}return J}function Z(F){for(var ee=F[0],ce=F[1]-1;ce>=0;)ee&1<<ce&&(b|=1<<S),ce--,--S<0&&(b==255?(q(255),q(0)):q(b),S=7,b=0)}function q(F){w.push(F)}function K(F){q(F>>8&255),q(255&F)}function oe(F,ee,ce,pe,J){for(var xe,Se=J[0],ve=J[240],re=(function(Ce,we){var Ue,Le,Be,ft,It,qe,Vt,vt,Ke,Zt,ht=0;for(Ke=0;Ke<8;++Ke){Ue=Ce[ht],Le=Ce[ht+1],Be=Ce[ht+2],ft=Ce[ht+3],It=Ce[ht+4],qe=Ce[ht+5],Vt=Ce[ht+6];var Rr=Ue+(vt=Ce[ht+7]),pt=Ue-vt,Yt=Le+Vt,ln=Le-Vt,hr=Be+qe,Tt=Be-qe,ir=ft+It,Dt=ft-It,Gt=Rr+ir,Fn=Rr-ir,mn=Yt+hr,qt=Yt-hr;Ce[ht]=Gt+mn,Ce[ht+4]=Gt-mn;var Rn=.707106781*(qt+Fn);Ce[ht+2]=Fn+Rn,Ce[ht+6]=Fn-Rn;var at=.382683433*((Gt=Dt+Tt)-(qt=ln+pt)),Fr=.5411961*Gt+at,Jr=1.306562965*qt+at,Qr=.707106781*(mn=Tt+ln),Rt=pt+Qr,wi=pt-Qr;Ce[ht+5]=wi+Fr,Ce[ht+3]=wi-Fr,Ce[ht+1]=Rt+Jr,Ce[ht+7]=Rt-Jr,ht+=8}for(ht=0,Ke=0;Ke<8;++Ke){Ue=Ce[ht],Le=Ce[ht+8],Be=Ce[ht+16],ft=Ce[ht+24],It=Ce[ht+32],qe=Ce[ht+40],Vt=Ce[ht+48];var Li=Ue+(vt=Ce[ht+56]),bn=Ue-vt,Er=Le+Vt,Zn=Le-Vt,ki=Be+qe,lo=Be-qe,Kc=ft+It,Oi=ft-It,ta=Li+Kc,Es=Li-Kc,So=Er+ki,Co=Er-ki;Ce[ht]=ta+So,Ce[ht+32]=ta-So;var bs=.707106781*(Co+Es);Ce[ht+16]=Es+bs,Ce[ht+48]=Es-bs;var Cl=.382683433*((ta=Oi+lo)-(Co=Zn+bn)),Ss=.5411961*ta+Cl,ei=1.306562965*Co+Cl,yf=.707106781*(So=lo+Zn),_f=bn+yf,du=bn-yf;Ce[ht+40]=du+Ss,Ce[ht+24]=du-Ss,Ce[ht+8]=_f+ei,Ce[ht+56]=_f-ei,ht++}for(Ke=0;Ke<64;++Ke)Zt=Ce[Ke]*we[Ke],p[Ke]=Zt>0?Zt+.5|0:Zt-.5|0;return p})(F,ee),Ve=0;Ve<64;++Ve)_[X[Ve]]=re[Ve];var G=_[0]-ce;ce=_[0],G==0?Z(pe[0]):(Z(pe[y[xe=32767+G]]),Z(d[xe]));for(var be=63;be>0&&_[be]==0;)be--;if(be==0)return Z(Se),ce;for(var Ie,U=1;U<=be;){for(var ae=U;_[U]==0&&U<=be;)++U;var he=U-ae;if(he>=16){Ie=he>>4;for(var Fe=1;Fe<=Ie;++Fe)Z(ve);he&=15}xe=32767+_[U],Z(J[(he<<4)+y[xe]]),Z(d[xe]),U++}return be!=63&&Z(Se),ce}function _e(F){F=Math.min(Math.max(F,1),100),o!=F&&((function(ee){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],pe=0;pe<64;pe++){var J=s((ce[pe]*ee+50)/100);J=Math.min(Math.max(J,1),255),a[X[pe]]=J}for(var xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var ve=s((xe[Se]*ee+50)/100);ve=Math.min(Math.max(ve,1),255),l[X[Se]]=ve}for(var re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,G=0;G<8;G++)for(var be=0;be<8;be++)c[Ve]=1/(a[X[Ve]]*re[G]*re[be]*8),f[Ve]=1/(l[X[Ve]]*re[G]*re[be]*8),Ve++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,ee){ee&&_e(ee),w=new Array,b=0,S=7,K(65496),K(65504),K(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),K(1),K(1),q(0),q(0),(function(){K(65499),K(132),q(0);for(var Le=0;Le<64;Le++)q(a[Le]);q(1);for(var Be=0;Be<64;Be++)q(l[Be])})(),(function(Le,Be){K(65472),K(17),q(8),K(Be),K(Le),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)})(F.width,F.height),(function(){K(65476),K(418),q(0);for(var Le=0;Le<16;Le++)q(Y[Le+1]);for(var Be=0;Be<=11;Be++)q($[Be]);q(16);for(var ft=0;ft<16;ft++)q(V[ft+1]);for(var It=0;It<=161;It++)q(B[It]);q(1);for(var qe=0;qe<16;qe++)q(v[qe+1]);for(var Vt=0;Vt<=11;Vt++)q(I[Vt]);q(17);for(var vt=0;vt<16;vt++)q(M[vt+1]);for(var Ke=0;Ke<=161;Ke++)q(j[Ke])})(),K(65498),K(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var ce=0,pe=0,J=0;b=0,S=7,this.encode.displayName="_encode_";for(var xe,Se,ve,re,Ve,G,be,Ie,U,ae=F.data,he=F.width,Fe=F.height,Ce=4*he,we=0;we<Fe;){for(xe=0;xe<Ce;){for(Ve=Ce*we+xe,be=-1,Ie=0,U=0;U<64;U++)G=Ve+(Ie=U>>3)*Ce+(be=4*(7&U)),we+Ie>=Fe&&(G-=Ce*(we+1+Ie-Fe)),xe+be>=Ce&&(G-=xe+be-Ce+4),Se=ae[G++],ve=ae[G++],re=ae[G++],T[U]=(W[Se]+W[ve+256|0]+W[re+512|0]>>16)-128,A[U]=(W[Se+768|0]+W[ve+1024|0]+W[re+1280|0]>>16)-128,N[U]=(W[Se+1280|0]+W[ve+1536|0]+W[re+1792|0]>>16)-128;ce=oe(T,c,ce,e,r),pe=oe(A,f,pe,t,i),J=oe(N,f,J,t,i),xe+=32}we+=8}if(S>=0){var Ue=[];Ue[1]=S+1,Ue[0]=(1<<S+1)-1,Z(Ue)}return K(65497),new Uint8Array(w)},n=n||50,(function(){for(var F=String.fromCharCode,ee=0;ee<256;ee++)O[ee]=F(ee)})(),e=Q(Y,$),t=Q(v,I),r=Q(V,B),i=Q(M,j),(function(){for(var F=1,ee=2,ce=1;ce<=15;ce++){for(var pe=F;pe<ee;pe++)y[32767+pe]=ce,d[32767+pe]=[],d[32767+pe][1]=ce,d[32767+pe][0]=pe;for(var J=-(ee-1);J<=-F;J++)y[32767+J]=ce,d[32767+J]=[],d[32767+J][1]=ce,d[32767+J][0]=ee-1+J;F<<=1,ee<<=1}})(),(function(){for(var F=0;F<256;F++)W[F]=19595*F,W[F+256|0]=38470*F,W[F+512|0]=7471*F+32768,W[F+768|0]=-11059*F,W[F+1024|0]=-21709*F,W[F+1280|0]=32768*F+8421375,W[F+1536|0]=-27439*F,W[F+1792|0]=-5329*F})(),_e(n)}function Zu(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bW(n){function e($){if(!$)throw Error("assert :P")}function t($,V,B){for(var v=0;4>v;v++)if($[V+v]!=B.charCodeAt(v))return!0;return!1}function r($,V,B,v,I){for(var M=0;M<I;M++)$[V+M]=B[v+M]}function i($,V,B,v){for(var I=0;I<v;I++)$[V+I]=B}function o($){return new Int32Array($)}function s($,V){for(var B=[],v=0;v<$;v++)B.push(new V);return B}function a($,V){var B=[];return(function v(I,M,j){for(var Q=j[M],Z=0;Z<Q&&(I.push(j.length>M+1?[]:new V),!(j.length<M+1));Z++)v(I[Z],M+1,j)})(B,0,$),B}var l=function(){var $=this;function V(E,C){for(var P=1<<C-1>>>0;E&P;)P>>>=1;return P?(E&P-1)+P:E}function B(E,C,P,z,ne){e(!(z%P));do E[C+(z-=P)]=ne;while(0<z)}function v(E,C,P,z,ne){if(e(2328>=ne),512>=ne)var se=o(512);else if((se=o(ne))==null)return 0;return(function(le,ue,fe,me,De,ze){var ye,Re,ke=ue,We=1<<fe,Ge=o(16),$e=o(16);for(e(De!=0),e(me!=null),e(le!=null),e(0<fe),Re=0;Re<De;++Re){if(15<me[Re])return 0;++Ge[me[Re]]}if(Ge[0]==De)return 0;for($e[1]=0,ye=1;15>ye;++ye){if(Ge[ye]>1<<ye)return 0;$e[ye+1]=$e[ye]+Ge[ye]}for(Re=0;Re<De;++Re)ye=me[Re],0<me[Re]&&(ze[$e[ye]++]=Re);if($e[15]==1)return(me=new I).g=0,me.value=ze[0],B(le,ke,1,We,me),We;var Je,ut=-1,rt=We-1,zt=0,Nt=1,Nn=1,Ot=1<<fe;for(Re=0,ye=1,De=2;ye<=fe;++ye,De<<=1){if(Nt+=Nn<<=1,0>(Nn-=Ge[ye]))return 0;for(;0<Ge[ye];--Ge[ye])(me=new I).g=ye,me.value=ze[Re++],B(le,ke+zt,De,Ot,me),zt=V(zt,ye)}for(ye=fe+1,De=2;15>=ye;++ye,De<<=1){if(Nt+=Nn<<=1,0>(Nn-=Ge[ye]))return 0;for(;0<Ge[ye];--Ge[ye]){if(me=new I,(zt&rt)!=ut){for(ke+=Ot,Je=1<<(ut=ye)-fe;15>ut&&!(0>=(Je-=Ge[ut]));)++ut,Je<<=1;We+=Ot=1<<(Je=ut-fe),le[ue+(ut=zt&rt)].g=Je+fe,le[ue+ut].value=ke-ue-ut}me.g=ye-fe,me.value=ze[Re++],B(le,ke+(zt>>fe),De,Ot,me),zt=V(zt,ye)}}return Nt!=2*$e[15]-1?0:We})(E,C,P,z,ne,se)}function I(){this.value=this.g=0}function M(){this.value=this.g=0}function j(){this.G=s(5,I),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(hh,M)}function Q(E,C,P,z){e(E!=null),e(C!=null),e(2147483648>z),E.Ca=254,E.I=0,E.b=-8,E.Ka=0,E.oa=C,E.pa=P,E.Jd=C,E.Yc=P+z,E.Zc=4<=z?P+z-4+1:P,Se(E)}function Z(E,C){for(var P=0;0<C--;)P|=re(E,128)<<C;return P}function q(E,C){var P=Z(E,C);return ve(E)?-P:P}function K(E,C,P,z){var ne,se=0;for(e(E!=null),e(C!=null),e(4294967288>z),E.Sb=z,E.Ra=0,E.u=0,E.h=0,4<z&&(z=4),ne=0;ne<z;++ne)se+=C[P+ne]<<8*ne;E.Ra=se,E.bb=z,E.oa=C,E.pa=P}function oe(E){for(;8<=E.u&&E.bb<E.Sb;)E.Ra>>>=8,E.Ra+=E.oa[E.pa+E.bb]<<wu-8>>>0,++E.bb,E.u-=8;pe(E)&&(E.h=1,E.u=0)}function _e(E,C){if(e(0<=C),!E.h&&C<=As){var P=ce(E)&Ds[C];return E.u+=C,oe(E),P}return E.h=1,E.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ce(E){return E.Ra>>>(E.u&wu-1)>>>0}function pe(E){return e(E.bb<=E.Sb),E.h||E.bb==E.Sb&&E.u>wu}function J(E,C){E.u=C,E.h=pe(E)}function xe(E){E.u>=Eu&&(e(E.u>=Eu),oe(E))}function Se(E){e(E!=null&&E.oa!=null),E.pa<E.Zc?(E.I=(E.oa[E.pa++]|E.I<<8)>>>0,E.b+=8):(e(E!=null&&E.oa!=null),E.pa<E.Yc?(E.b+=8,E.I=E.oa[E.pa++]|E.I<<8):E.Ka?E.b=0:(E.I<<=8,E.b+=8,E.Ka=1))}function ve(E){return Z(E,1)}function re(E,C){var P=E.Ca;0>E.b&&Se(E);var z=E.b,ne=P*C>>>8,se=(E.I>>>z>ne)+0;for(se?(P-=ne,E.I-=ne+1<<z>>>0):P=ne+1,z=P,ne=0;256<=z;)ne+=8,z>>=8;return z=7^ne+bu[z],E.b-=z,E.Ca=(P<<z)-1,se}function Ve(E,C,P){E[C+0]=P>>24&255,E[C+1]=P>>16&255,E[C+2]=P>>8&255,E[C+3]=255&P}function G(E,C){return E[C+0]|E[C+1]<<8}function be(E,C){return G(E,C)|E[C+2]<<16}function Ie(E,C){return G(E,C)|G(E,C+2)<<16}function U(E,C){var P=1<<C;return e(E!=null),e(0<C),E.X=o(P),E.X==null?0:(E.Mb=32-C,E.Xa=C,1)}function ae(E,C){e(E!=null),e(C!=null),e(E.Xa==C.Xa),r(C.X,0,E.X,0,1<<C.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function Fe(E,C,P,z){e(P!=null),e(z!=null);var ne=P[0],se=z[0];return ne==0&&(ne=(E*se+C/2)/C),se==0&&(se=(C*ne+E/2)/E),0>=ne||0>=se?0:(P[0]=ne,z[0]=se,1)}function Ce(E,C){return E+(1<<C)-1>>>C}function we(E,C){return((4278255360&E)+(4278255360&C)>>>0&4278255360)+((16711935&E)+(16711935&C)>>>0&16711935)>>>0}function Ue(E,C){$[C]=function(P,z,ne,se,le,ue,fe){var me;for(me=0;me<le;++me){var De=$[E](ue[fe+me-1],ne,se+me);ue[fe+me]=we(P[z+me],De)}}}function Le(){this.ud=this.hd=this.jd=0}function Be(E,C){return((4278124286&(E^C))>>>1)+(E&C)>>>0}function ft(E){return 0<=E&&256>E?E:0>E?0:255<E?255:void 0}function It(E,C){return ft(E+(E-C+.5>>1))}function qe(E,C,P){return Math.abs(C-P)-Math.abs(E-P)}function Vt(E,C,P,z,ne,se,le){for(z=se[le-1],P=0;P<ne;++P)se[le+P]=z=we(E[C+P],z)}function vt(E,C,P,z,ne){var se;for(se=0;se<P;++se){var le=E[C+se],ue=le>>8&255,fe=16711935&(fe=(fe=16711935&le)+((ue<<16)+ue));z[ne+se]=(4278255360&le)+fe>>>0}}function Ke(E,C){C.jd=255&E,C.hd=E>>8&255,C.ud=E>>16&255}function Zt(E,C,P,z,ne,se){var le;for(le=0;le<z;++le){var ue=C[P+le],fe=ue>>>8,me=ue,De=255&(De=(De=ue>>>16)+((E.jd<<24>>24)*(fe<<24>>24)>>>5));me=255&(me=(me+=(E.hd<<24>>24)*(fe<<24>>24)>>>5)+((E.ud<<24>>24)*(De<<24>>24)>>>5)),ne[se+le]=(4278255360&ue)+(De<<16)+me}}function ht(E,C,P,z,ne){$[C]=function(se,le,ue,fe,me,De,ze,ye,Re){for(fe=ze;fe<ye;++fe)for(ze=0;ze<Re;++ze)me[De++]=ne(ue[z(se[le++])])},$[E]=function(se,le,ue,fe,me,De,ze){var ye=8>>se.b,Re=se.Ea,ke=se.K[0],We=se.w;if(8>ye)for(se=(1<<se.b)-1,We=(1<<ye)-1;le<ue;++le){var Ge,$e=0;for(Ge=0;Ge<Re;++Ge)Ge&se||($e=z(fe[me++])),De[ze++]=ne(ke[$e&We]),$e>>=ye}else $["VP8LMapColor"+P](fe,me,ke,We,De,ze,le,ue,Re)}}function Rr(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=se>>16&255,z[ne++]=se>>8&255,z[ne++]=255&se}}function pt(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=se>>16&255,z[ne++]=se>>8&255,z[ne++]=255&se,z[ne++]=se>>24&255}}function Yt(E,C,P,z,ne){for(P=C+P;C<P;){var se=(le=E[C++])>>16&240|le>>12&15,le=240&le|le>>28&15;z[ne++]=se,z[ne++]=le}}function ln(E,C,P,z,ne){for(P=C+P;C<P;){var se=(le=E[C++])>>16&248|le>>13&7,le=le>>5&224|le>>3&31;z[ne++]=se,z[ne++]=le}}function hr(E,C,P,z,ne){for(P=C+P;C<P;){var se=E[C++];z[ne++]=255&se,z[ne++]=se>>8&255,z[ne++]=se>>16&255}}function Tt(E,C,P,z,ne,se){if(se==0)for(P=C+P;C<P;)Ve(z,((se=E[C++])[0]>>24|se[1]>>8&65280|se[2]<<8&16711680|se[3]<<24)>>>0),ne+=32;else r(z,ne,E,C,P)}function ir(E,C){$[C][0]=$[E+"0"],$[C][1]=$[E+"1"],$[C][2]=$[E+"2"],$[C][3]=$[E+"3"],$[C][4]=$[E+"4"],$[C][5]=$[E+"5"],$[C][6]=$[E+"6"],$[C][7]=$[E+"7"],$[C][8]=$[E+"8"],$[C][9]=$[E+"9"],$[C][10]=$[E+"10"],$[C][11]=$[E+"11"],$[C][12]=$[E+"12"],$[C][13]=$[E+"13"],$[C][14]=$[E+"0"],$[C][15]=$[E+"0"]}function Dt(E){return E==YT||E==XT||E==ow||E==ZT}function Gt(){this.eb=[],this.size=this.A=this.fb=0}function Fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function mn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gt,this.f.kb=new Fn,this.sd=null}function qt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Rn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function at(E){return alert("todo:WebPSamplerProcessPlane"),E.T}function Fr(E,C){var P=E.T,z=C.ba.f.RGBA,ne=z.eb,se=z.fb+E.ka*z.A,le=kl[C.ba.S],ue=E.y,fe=E.O,me=E.f,De=E.N,ze=E.ea,ye=E.W,Re=C.cc,ke=C.dc,We=C.Mc,Ge=C.Nc,$e=E.ka,Je=E.ka+E.T,ut=E.U,rt=ut+1>>1;for($e==0?le(ue,fe,null,null,me,De,ze,ye,me,De,ze,ye,ne,se,null,null,ut):(le(C.ec,C.fc,ue,fe,Re,ke,We,Ge,me,De,ze,ye,ne,se-z.A,ne,se,ut),++P);$e+2<Je;$e+=2)Re=me,ke=De,We=ze,Ge=ye,De+=E.Rc,ye+=E.Rc,se+=2*z.A,le(ue,(fe+=2*E.fa)-E.fa,ue,fe,Re,ke,We,Ge,me,De,ze,ye,ne,se-z.A,ne,se,ut);return fe+=E.fa,E.j+Je<E.o?(r(C.ec,C.fc,ue,fe,ut),r(C.cc,C.dc,me,De,rt),r(C.Mc,C.Nc,ze,ye,rt),P--):1&Je||le(ue,fe,null,null,me,De,ze,ye,me,De,ze,ye,ne,se+z.A,null,null,ut),P}function Jr(E,C,P){var z=E.F,ne=[E.J];if(z!=null){var se=E.U,le=C.ba.S,ue=le==iw||le==ow;C=C.ba.f.RGBA;var fe=[0],me=E.ka;fe[0]=E.T,E.Kb&&(me==0?--fe[0]:(--me,ne[0]-=E.width),E.j+E.ka+E.T==E.o&&(fe[0]=E.o-E.j-me));var De=C.eb;me=C.fb+me*C.A,E=g_(z,ne[0],E.width,se,fe,De,me+(ue?0:3),C.A),e(P==fe),E&&Dt(le)&&el(De,me,ue,se,fe,C.A)}return 0}function Qr(E){var C=E.ma,P=C.ba.S,z=11>P,ne=P==nw||P==rw||P==iw||P==$T||P==12||Dt(P);if(C.memory=null,C.Ib=null,C.Jb=null,C.Nd=null,!fp(C.Oa,E,ne?11:12))return 0;if(ne&&Dt(P)&&Tf(),E.da)alert("todo:use_scaling");else{if(z){if(C.Ib=at,E.Kb){if(P=E.U+1>>1,C.memory=o(E.U+2*P),C.memory==null)return 0;C.ec=C.memory,C.fc=0,C.cc=C.ec,C.dc=C.fc+E.U,C.Mc=C.cc,C.Nc=C.dc+P,C.Ib=Fr,Tf()}}else alert("todo:EmitYUV");ne&&(C.Jb=Jr,z&&Qa())}if(z&&!_F){for(E=0;256>E;++E)XK[E]=89858*(E-128)+aw>>sw,JK[E]=-22014*(E-128)+aw,KK[E]=-45773*(E-128),ZK[E]=113618*(E-128)+aw>>sw;for(E=E_;E<QT;++E)C=76283*(E-16)+aw>>sw,QK[E-E_]=Il(C,255),eJ[E-E_]=Il(C+8>>4,15);_F=1}return 1}function Rt(E){var C=E.ma,P=E.U,z=E.T;return e(!(1&E.ka)),0>=P||0>=z?0:(P=C.Ib(E,C),C.Jb!=null&&C.Jb(E,C,P),C.Dc+=P,1)}function wi(E){E.ma.memory=null}function Li(E,C,P,z){return _e(E,8)!=47?0:(C[0]=_e(E,14)+1,P[0]=_e(E,14)+1,z[0]=_e(E,1),_e(E,3)!=0?0:!E.h)}function bn(E,C){if(4>E)return E+1;var P=E-2>>1;return(2+(1&E)<<P)+_e(C,P)+1}function Er(E,C){return 120<C?C-120:1<=(P=((P=kK[C-1])>>4)*E+(8-(15&P)))?P:1;var P}function Zn(E,C,P){var z=ce(P),ne=E[C+=255&z].g-8;return 0<ne&&(J(P,P.u+8),z=ce(P),C+=E[C].value,C+=z&(1<<ne)-1),J(P,P.u+E[C].g),E[C].value}function ki(E,C,P){return P.g+=E.g,P.value+=E.value<<C>>>0,e(8>=P.g),E.g}function lo(E,C,P){var z=E.xc;return e((C=z==0?0:E.vc[E.md*(P>>z)+(C>>z)])<E.Wb),E.Ya[C]}function Kc(E,C,P,z){var ne=E.ab,se=E.c*C,le=E.C;C=le+C;var ue=P,fe=z;for(z=E.Ta,P=E.Ua;0<ne--;){var me=E.gc[ne],De=le,ze=C,ye=ue,Re=fe,ke=(fe=z,ue=P,me.Ea);switch(e(De<ze),e(ze<=me.nc),me.hc){case 2:gi(ye,Re,(ze-De)*ke,fe,ue);break;case 0:var We=De,Ge=ze,$e=fe,Je=ue,ut=(Ot=me).Ea;We==0&&(fh(ye,Re,null,null,1,$e,Je),Vt(ye,Re+1,0,0,ut-1,$e,Je+1),Re+=ut,Je+=ut,++We);for(var rt=1<<Ot.b,zt=rt-1,Nt=Ce(ut,Ot.b),Nn=Ot.K,Ot=Ot.w+(We>>Ot.b)*Nt;We<Ge;){var lr=Nn,Mo=Ot,Pn=1;for(Df(ye,Re,$e,Je-ut,1,$e,Je);Pn<ut;){var Ft=(Pn&~zt)+rt;Ft>ut&&(Ft=ut),(0,gp[lr[Mo++]>>8&15])(ye,Re+ +Pn,$e,Je+Pn-ut,Ft-Pn,$e,Je+Pn),Pn=Ft}Re+=ut,Je+=ut,++We&zt||(Ot+=Nt)}ze!=me.nc&&r(fe,ue-ke,fe,ue+(ze-De-1)*ke,ke);break;case 1:for(ke=ye,Ge=Re,ut=(ye=me.Ea)-(Je=ye&~($e=(Re=1<<me.b)-1)),We=Ce(ye,me.b),rt=me.K,me=me.w+(De>>me.b)*We;De<ze;){for(zt=rt,Nt=me,Nn=new Le,Ot=Ge+Je,lr=Ge+ye;Ge<Ot;)Ke(zt[Nt++],Nn),Af(Nn,ke,Ge,Re,fe,ue),Ge+=Re,ue+=Re;Ge<lr&&(Ke(zt[Nt++],Nn),Af(Nn,ke,Ge,ut,fe,ue),Ge+=ut,ue+=ut),++De&$e||(me+=We)}break;case 3:if(ye==fe&&Re==ue&&0<me.b){for(Ge=fe,ye=ke=ue+(ze-De)*ke-(Je=(ze-De)*Ce(me.Ea,me.b)),Re=fe,$e=ue,We=[],Je=(ut=Je)-1;0<=Je;--Je)We[Je]=Re[$e+Je];for(Je=ut-1;0<=Je;--Je)Ge[ye+Je]=We[Je];pp(me,De,ze,fe,ke,fe,ue)}else pp(me,De,ze,ye,Re,fe,ue)}ue=z,fe=P}fe!=P&&r(z,P,ue,fe,se)}function Oi(E,C){var P=E.V,z=E.Ba+E.c*E.C,ne=C-E.C;if(e(C<=E.l.o),e(16>=ne),0<ne){var se=E.l,le=E.Ta,ue=E.Ua,fe=se.width;if(Kc(E,ne,P,z),ne=ue=[ue],e((P=E.C)<(z=C)),e(se.v<se.va),z>se.o&&(z=se.o),P<se.j){var me=se.j-P;P=se.j,ne[0]+=me*fe}if(P>=z?P=0:(ne[0]+=4*se.v,se.ka=P-se.j,se.U=se.va-se.v,se.T=z-P,P=1),P){if(ue=ue[0],11>(P=E.ca).S){var De=P.f.RGBA,ze=(z=P.S,ne=se.U,se=se.T,me=De.eb,De.A),ye=se;for(De=De.fb+E.Ma*De.A;0<ye--;){var Re=le,ke=ue,We=ne,Ge=me,$e=De;switch(z){case tw:Xo(Re,ke,We,Ge,$e);break;case nw:Ao(Re,ke,We,Ge,$e);break;case YT:Ao(Re,ke,We,Ge,$e),el(Ge,$e,0,We,1,0);break;case lF:h(Re,ke,We,Ge,$e);break;case rw:Tt(Re,ke,We,Ge,$e,1);break;case XT:Tt(Re,ke,We,Ge,$e,1),el(Ge,$e,0,We,1,0);break;case iw:Tt(Re,ke,We,Ge,$e,0);break;case ow:Tt(Re,ke,We,Ge,$e,0),el(Ge,$e,1,We,1,0);break;case $T:m(Re,ke,We,Ge,$e);break;case ZT:m(Re,ke,We,Ge,$e),Rf(Ge,$e,We,1,0);break;case uF:u(Re,ke,We,Ge,$e);break;default:e(0)}ue+=fe,De+=ze}E.Ma+=se}else alert("todo:EmitRescaledRowsYUVA");e(E.Ma<=P.height)}}E.C=C,e(E.C<=E.i)}function ta(E){var C;if(0<E.ua)return 0;for(C=0;C<E.Wb;++C){var P=E.Ya[C].G,z=E.Ya[C].H;if(0<P[1][z[1]+0].g||0<P[2][z[2]+0].g||0<P[3][z[3]+0].g)return 0}return 1}function Es(E,C,P,z,ne,se){if(E.Z!=0){var le=E.qd,ue=E.rd;for(e(Nf[E.Z]!=null);C<P;++C)Nf[E.Z](le,ue,z,ne,z,ne,se),le=z,ue=ne,ne+=se;E.qd=le,E.rd=ue}}function So(E,C){var P=E.l.ma,z=P.Z==0||P.Z==1?E.l.j:E.C;if(z=E.C<z?z:E.C,e(C<=E.l.o),C>z){var ne=E.l.width,se=P.ca,le=P.tb+ne*z,ue=E.V,fe=E.Ba+E.c*z,me=E.gc;e(E.ab==1),e(me[0].hc==3),Nl(me[0],z,C,ue,fe,se,le),Es(P,z,C,se,le,ne)}E.C=E.Ma=C}function Co(E,C,P,z,ne,se,le){var ue=E.$/z,fe=E.$%z,me=E.m,De=E.s,ze=P+E.$,ye=ze;ne=P+z*ne;var Re=P+z*se,ke=280+De.ua,We=E.Pb?ue:16777216,Ge=0<De.ua?De.Wa:null,$e=De.wc,Je=ze<Re?lo(De,fe,ue):null;e(E.C<se),e(Re<=ne);var ut=!1;e:for(;;){for(;ut||ze<Re;){var rt=0;if(ue>=We){var zt=ze-P;e((We=E).Pb),We.wd=We.m,We.xd=zt,0<We.s.ua&&ae(We.s.Wa,We.s.vb),We=ue+FK}if(fe&$e||(Je=lo(De,fe,ue)),e(Je!=null),Je.Qb&&(C[ze]=Je.qb,ut=!0),!ut)if(xe(me),Je.jc){rt=me,zt=C;var Nt=ze,Nn=Je.pd[ce(rt)&hh-1];e(Je.jc),256>Nn.g?(J(rt,rt.u+Nn.g),zt[Nt]=Nn.value,rt=0):(J(rt,rt.u+Nn.g-256),e(256<=Nn.value),rt=Nn.value),rt==0&&(ut=!0)}else rt=Zn(Je.G[0],Je.H[0],me);if(me.h)break;if(ut||256>rt){if(!ut)if(Je.nd)C[ze]=(Je.qb|rt<<8)>>>0;else{if(xe(me),ut=Zn(Je.G[1],Je.H[1],me),xe(me),zt=Zn(Je.G[2],Je.H[2],me),Nt=Zn(Je.G[3],Je.H[3],me),me.h)break;C[ze]=(Nt<<24|ut<<16|rt<<8|zt)>>>0}if(ut=!1,++ze,++fe>=z&&(fe=0,++ue,le!=null&&ue<=se&&!(ue%16)&&le(E,ue),Ge!=null))for(;ye<ze;)rt=C[ye++],Ge.X[(506832829*rt&4294967295)>>>Ge.Mb]=rt}else if(280>rt){if(rt=bn(rt-256,me),zt=Zn(Je.G[4],Je.H[4],me),xe(me),zt=Er(z,zt=bn(zt,me)),me.h)break;if(ze-P<zt||ne-ze<rt)break e;for(Nt=0;Nt<rt;++Nt)C[ze+Nt]=C[ze+Nt-zt];for(ze+=rt,fe+=rt;fe>=z;)fe-=z,++ue,le!=null&&ue<=se&&!(ue%16)&&le(E,ue);if(e(ze<=ne),fe&$e&&(Je=lo(De,fe,ue)),Ge!=null)for(;ye<ze;)rt=C[ye++],Ge.X[(506832829*rt&4294967295)>>>Ge.Mb]=rt}else{if(!(rt<ke))break e;for(ut=rt-280,e(Ge!=null);ye<ze;)rt=C[ye++],Ge.X[(506832829*rt&4294967295)>>>Ge.Mb]=rt;rt=ze,e(!(ut>>>(zt=Ge).Xa)),C[rt]=zt.X[ut],ut=!0}ut||e(me.h==pe(me))}if(E.Pb&&me.h&&ze<ne)e(E.m.h),E.a=5,E.m=E.wd,E.$=E.xd,0<E.s.ua&&ae(E.s.vb,E.s.Wa);else{if(me.h)break e;le?.(E,ue>se?se:ue),E.a=0,E.$=ze-P}return 1}return E.a=3,0}function bs(E){e(E!=null),E.vc=null,E.yc=null,E.Ya=null;var C=E.Wa;C!=null&&(C.X=null),E.vb=null,e(E!=null)}function Cl(){var E=new en;return E==null?null:(E.a=0,E.xb=fF,ir("Predictor","VP8LPredictors"),ir("Predictor","VP8LPredictors_C"),ir("PredictorAdd","VP8LPredictorsAdd"),ir("PredictorAdd","VP8LPredictorsAdd_C"),gi=vt,Af=Zt,Xo=Rr,Ao=pt,m=Yt,u=ln,h=hr,$.VP8LMapColor32b=Ml,$.VP8LMapColor8b=Pl,E)}function Ss(E,C,P,z,ne){var se=1,le=[E],ue=[C],fe=z.m,me=z.s,De=null,ze=0;e:for(;;){if(P)for(;se&&_e(fe,1);){var ye=le,Re=ue,ke=z,We=1,Ge=ke.m,$e=ke.gc[ke.ab],Je=_e(Ge,2);if(ke.Oc&1<<Je)se=0;else{switch(ke.Oc|=1<<Je,$e.hc=Je,$e.Ea=ye[0],$e.nc=Re[0],$e.K=[null],++ke.ab,e(4>=ke.ab),Je){case 0:case 1:$e.b=_e(Ge,3)+2,We=Ss(Ce($e.Ea,$e.b),Ce($e.nc,$e.b),0,ke,$e.K),$e.K=$e.K[0];break;case 3:var ut,rt=_e(Ge,8)+1,zt=16<rt?0:4<rt?1:2<rt?2:3;if(ye[0]=Ce($e.Ea,zt),$e.b=zt,ut=We=Ss(rt,1,0,ke,$e.K)){var Nt,Nn=rt,Ot=$e,lr=1<<(8>>Ot.b),Mo=o(lr);if(Mo==null)ut=0;else{var Pn=Ot.K[0],Ft=Ot.w;for(Mo[0]=Ot.K[0][0],Nt=1;Nt<1*Nn;++Nt)Mo[Nt]=we(Pn[Ft+Nt],Mo[Nt-1]);for(;Nt<4*lr;++Nt)Mo[Nt]=0;Ot.K[0]=null,Ot.K[0]=Mo,ut=1}}We=ut;break;case 2:break;default:e(0)}se=We}}if(le=le[0],ue=ue[0],se&&_e(fe,1)&&!(se=1<=(ze=_e(fe,4))&&11>=ze)){z.a=3;break e}var xt;if(xt=se)t:{var $i,Sn,fr,ci=z,ss=le,oa=ue,Fi=ze,Rs=P,sa=ci.m,No=ci.s,pr=[null],jr=1,Bi=0,Ur=OK[Fi];n:for(;;){if(Rs&&_e(sa,1)){var as=_e(sa,3)+2,Cu=Ce(ss,as),Yi=Ce(oa,as),Ca=Cu*Yi;if(!Ss(Cu,Yi,0,ci,pr))break n;for(pr=pr[0],No.xc=as,$i=0;$i<Ca;++$i){var ti=pr[$i]>>8&65535;pr[$i]=ti,ti>=jr&&(jr=ti+1)}}if(sa.h)break n;for(Sn=0;5>Sn;++Sn){var Po=cF[Sn];!Sn&&0<Fi&&(Po+=1<<Fi),Bi<Po&&(Bi=Po)}var nl=s(jr*Ur,I),aa=jr,rl=s(aa,j);if(rl==null)var il=null;else e(65536>=aa),il=rl;var Ia=o(Bi);if(il==null||Ia==null||nl==null){ci.a=1;break n}var ol=nl;for($i=fr=0;$i<jr;++$i){var ai=il[$i],sl=ai.G,Iu=ai.H,yp=0,ph=1,ls=0;for(Sn=0;5>Sn;++Sn){Po=cF[Sn],sl[Sn]=ol,Iu[Sn]=fr,!Sn&&0<Fi&&(Po+=1<<Fi);i:{var uw,eD=Po,cw=ci,b_=Ia,rJ=ol,iJ=fr,tD=0,Pf=cw.m,oJ=_e(Pf,1);if(i(b_,0,0,eD),oJ){var sJ=_e(Pf,1)+1,aJ=_e(Pf,1),wF=_e(Pf,aJ==0?1:8);b_[wF]=1,sJ==2&&(b_[wF=_e(Pf,8)]=1);var hw=1}else{var EF=o(19),bF=_e(Pf,4)+4;if(19<bF){cw.a=3;var fw=0;break i}for(uw=0;uw<bF;++uw)EF[LK[uw]]=_e(Pf,3);var nD=void 0,S_=void 0,SF=cw,lJ=EF,dw=eD,CF=b_,rD=0,Lf=SF.m,IF=8,TF=s(128,I);r:for(;v(TF,0,7,lJ,19);){if(_e(Lf,1)){var uJ=2+2*_e(Lf,3);if((nD=2+_e(Lf,uJ))>dw)break r}else nD=dw;for(S_=0;S_<dw&&nD--;){xe(Lf);var DF=TF[0+(127&ce(Lf))];J(Lf,Lf.u+DF.g);var sm=DF.value;if(16>sm)CF[S_++]=sm,sm!=0&&(IF=sm);else{var cJ=sm==16,AF=sm-16,hJ=NK[AF],RF=_e(Lf,MK[AF])+hJ;if(S_+RF>dw)break r;for(var fJ=cJ?IF:0;0<RF--;)CF[S_++]=fJ}}rD=1;break r}rD||(SF.a=3),hw=rD}(hw=hw&&!Pf.h)&&(tD=v(rJ,iJ,8,b_,eD)),hw&&tD!=0?fw=tD:(cw.a=3,fw=0)}if(fw==0)break n;if(ph&&PK[Sn]==1&&(ph=ol[fr].g==0),yp+=ol[fr].g,fr+=fw,3>=Sn){var C_,iD=Ia[0];for(C_=1;C_<Po;++C_)Ia[C_]>iD&&(iD=Ia[C_]);ls+=iD}}if(ai.nd=ph,ai.Qb=0,ph&&(ai.qb=(sl[3][Iu[3]+0].value<<24|sl[1][Iu[1]+0].value<<16|sl[2][Iu[2]+0].value)>>>0,yp==0&&256>sl[0][Iu[0]+0].value&&(ai.Qb=1,ai.qb+=sl[0][Iu[0]+0].value<<8)),ai.jc=!ai.Qb&&6>ls,ai.jc){var pw,gh=ai;for(pw=0;pw<hh;++pw){var kf=pw,Of=gh.pd[kf],gw=gh.G[0][gh.H[0]+kf];256<=gw.value?(Of.g=gw.g+256,Of.value=gw.value):(Of.g=0,Of.value=0,kf>>=ki(gw,8,Of),kf>>=ki(gh.G[1][gh.H[1]+kf],16,Of),kf>>=ki(gh.G[2][gh.H[2]+kf],0,Of),ki(gh.G[3][gh.H[3]+kf],24,Of))}}}No.vc=pr,No.Wb=jr,No.Ya=il,No.yc=nl,xt=1;break t}xt=0}if(!(se=xt)){z.a=3;break e}if(0<ze){if(me.ua=1<<ze,!U(me.Wa,ze)){z.a=1,se=0;break e}}else me.ua=0;var oD=z,MF=le,dJ=ue,sD=oD.s,aD=sD.xc;if(oD.c=MF,oD.i=dJ,sD.md=Ce(MF,aD),sD.wc=aD==0?-1:(1<<aD)-1,P){z.xb=HK;break e}if((De=o(le*ue))==null){z.a=1,se=0;break e}se=(se=Co(z,De,0,le,ue,ue,null))&&!fe.h;break e}return se?(ne!=null?ne[0]=De:(e(De==null),e(P)),z.$=0,P||bs(me)):bs(me),se}function ei(E,C){var P=E.c*E.i,z=P+C+16*C;return e(E.c<=C),E.V=o(z),E.V==null?(E.Ta=null,E.Ua=0,E.a=1,0):(E.Ta=E.V,E.Ua=E.Ba+P+C,1)}function yf(E,C){var P=E.C,z=C-P,ne=E.V,se=E.Ba+E.c*P;for(e(C<=E.l.o);0<z;){var le=16<z?16:z,ue=E.l.ma,fe=E.l.width,me=fe*le,De=ue.ca,ze=ue.tb+fe*P,ye=E.Ta,Re=E.Ua;Kc(E,le,ne,se),m_(ye,Re,De,ze,me),Es(ue,P,P+le,De,ze,fe),z-=le,ne+=le*E.c,P+=le}e(P==C),E.C=E.Ma=C}function _f(){this.ub=this.yd=this.td=this.Rb=0}function du(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jc(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Qc(){this.Yb=(function(){var E=[];return(function C(P,z,ne){for(var se=ne[z],le=0;le<se&&(P.push(ne.length>z+1?[]:0),!(ne.length<z+1));le++)C(P[le],z+1,ne)})(E,0,[3,11]),E})()}function vf(){this.jb=o(3),this.Wc=a([4,8],Qc),this.Xc=a([4,17],Qc)}function Qd(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ea(){this.ld=this.La=this.dd=this.tc=0}function os(){this.Na=this.la=0}function pu(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function eh(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gu(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ea),this.Y=0,this.ya=Array(new eh),this.aa=0,this.l=new wf}function xf(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Yg(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new _f,this.Kc=new du,this.ed=new Qd,this.Qa=new Jc,this.Ic=this.$c=this.Aa=0,this.D=new gu,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,F),this.ia=0,this.pb=s(4,pu),this.Pa=new vf,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xf),this.Hd=0,this.rb=Array(new os),this.sb=0,this.wa=Array(new Ea),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new eh),this.L=this.aa=0,this.gd=a([4,2],Ea),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Il(E,C){return 0>E?0:E>C?C:E}function wf(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Xg(){var E=new Yg;return E!=null&&(E.a=0,E.sc="OK",E.cb=0,E.Xb=0,w_||(w_=na)),E}function Ei(E,C,P){return E.a==0&&(E.a=C,E.sc=P,E.cb=0),0}function th(E,C,P){return 3<=P&&E[C+0]==157&&E[C+1]==1&&E[C+2]==42}function uo(E,C){if(E==null)return 0;if(E.a=0,E.sc="OK",C==null)return Ei(E,2,"null VP8Io passed to VP8GetHeaders()");var P=C.data,z=C.w,ne=C.ha;if(4>ne)return Ei(E,7,"Truncated header.");var se=P[z+0]|P[z+1]<<8|P[z+2]<<16,le=E.Od;if(le.Rb=!(1&se),le.td=se>>1&7,le.yd=se>>4&1,le.ub=se>>5,3<le.td)return Ei(E,3,"Incorrect keyframe parameters.");if(!le.yd)return Ei(E,4,"Frame not displayable.");z+=3,ne-=3;var ue=E.Kc;if(le.Rb){if(7>ne)return Ei(E,7,"cannot parse picture header");if(!th(P,z,ne))return Ei(E,3,"Bad code word");ue.c=16383&(P[z+4]<<8|P[z+3]),ue.Td=P[z+4]>>6,ue.i=16383&(P[z+6]<<8|P[z+5]),ue.Ud=P[z+6]>>6,z+=7,ne-=7,E.za=ue.c+15>>4,E.Ub=ue.i+15>>4,C.width=ue.c,C.height=ue.i,C.Da=0,C.j=0,C.v=0,C.va=C.width,C.o=C.height,C.da=0,C.ib=C.width,C.hb=C.height,C.U=C.width,C.T=C.height,i((se=E.Pa).jb,0,255,se.jb.length),e((se=E.Qa)!=null),se.Cb=0,se.Bb=0,se.Fb=1,i(se.Zb,0,0,se.Zb.length),i(se.Lb,0,0,se.Lb)}if(le.ub>ne)return Ei(E,7,"bad partition length");Q(se=E.m,P,z,le.ub),z+=le.ub,ne-=le.ub,le.Rb&&(ue.Ld=ve(se),ue.Kd=ve(se)),ue=E.Qa;var fe,me=E.Pa;if(e(se!=null),e(ue!=null),ue.Cb=ve(se),ue.Cb){if(ue.Bb=ve(se),ve(se)){for(ue.Fb=ve(se),fe=0;4>fe;++fe)ue.Zb[fe]=ve(se)?q(se,7):0;for(fe=0;4>fe;++fe)ue.Lb[fe]=ve(se)?q(se,6):0}if(ue.Bb)for(fe=0;3>fe;++fe)me.jb[fe]=ve(se)?Z(se,8):255}else ue.Bb=0;if(se.Ka)return Ei(E,3,"cannot parse segment header");if((ue=E.ed).zd=ve(se),ue.Tb=Z(se,6),ue.wb=Z(se,3),ue.Pc=ve(se),ue.Pc&&ve(se)){for(me=0;4>me;++me)ve(se)&&(ue.vd[me]=q(se,6));for(me=0;4>me;++me)ve(se)&&(ue.od[me]=q(se,6))}if(E.L=ue.Tb==0?0:ue.zd?1:2,se.Ka)return Ei(E,3,"cannot parse filter header");var De=ne;if(ne=fe=z,z=fe+De,ue=De,E.Xb=(1<<Z(E.m,2))-1,De<3*(me=E.Xb))P=7;else{for(fe+=3*me,ue-=3*me,De=0;De<me;++De){var ze=P[ne+0]|P[ne+1]<<8|P[ne+2]<<16;ze>ue&&(ze=ue),Q(E.Jc[+De],P,fe,ze),fe+=ze,ue-=ze,ne+=3}Q(E.Jc[+me],P,fe,ue),P=fe<z?0:5}if(P!=0)return Ei(E,P,"cannot parse partitions");for(P=Z(fe=E.m,7),ne=ve(fe)?q(fe,4):0,z=ve(fe)?q(fe,4):0,ue=ve(fe)?q(fe,4):0,me=ve(fe)?q(fe,4):0,fe=ve(fe)?q(fe,4):0,De=E.Qa,ze=0;4>ze;++ze){if(De.Cb){var ye=De.Zb[ze];De.Fb||(ye+=P)}else{if(0<ze){E.pb[ze]=E.pb[0];continue}ye=P}var Re=E.pb[ze];Re.Sc[0]=KT[Il(ye+ne,127)],Re.Sc[1]=JT[Il(ye+0,127)],Re.Eb[0]=2*KT[Il(ye+z,127)],Re.Eb[1]=101581*JT[Il(ye+ue,127)]>>16,8>Re.Eb[1]&&(Re.Eb[1]=8),Re.Qc[0]=KT[Il(ye+me,117)],Re.Qc[1]=JT[Il(ye+fe,127)],Re.lc=ye+fe}if(!le.Rb)return Ei(E,4,"Not a key frame.");for(ve(se),le=E.Pa,P=0;4>P;++P){for(ne=0;8>ne;++ne)for(z=0;3>z;++z)for(ue=0;11>ue;++ue)me=re(se,zK[P][ne][z][ue])?Z(se,8):UK[P][ne][z][ue],le.Wc[P][ne].Yb[z][ue]=me;for(ne=0;17>ne;++ne)le.Xc[P][ne]=le.Wc[P][VK[ne]]}return E.kc=ve(se),E.kc&&(E.Bd=Z(se,8)),E.cb=1}function na(E,C,P,z,ne,se,le){var ue=C[ne].Yb[P];for(P=0;16>ne;++ne){if(!re(E,ue[P+0]))return ne;for(;!re(E,ue[P+1]);)if(ue=C[++ne].Yb[0],P=0,ne==16)return 16;var fe=C[ne+1].Yb;if(re(E,ue[P+2])){var me=E,De=0;if(re(me,(ye=ue)[(ze=P)+3]))if(re(me,ye[ze+6])){for(ue=0,ze=2*(De=re(me,ye[ze+8]))+(ye=re(me,ye[ze+9+De])),De=0,ye=BK[ze];ye[ue];++ue)De+=De+re(me,ye[ue]);De+=3+(8<<ze)}else re(me,ye[ze+7])?(De=7+2*re(me,165),De+=re(me,145)):De=5+re(me,159);else De=re(me,ye[ze+4])?3+re(me,ye[ze+5]):2;ue=fe[2]}else De=1,ue=fe[1];fe=le+jK[ne],0>(me=E).b&&Se(me);var ze,ye=me.b,Re=(ze=me.Ca>>1)-(me.I>>ye)>>31;--me.b,me.Ca+=Re,me.Ca|=1,me.I-=(ze+1&Re)<<ye,se[fe]=((De^Re)-Re)*z[(0<ne)+0]}return 16}function ep(E){var C=E.rb[E.sb-1];C.la=0,C.Na=0,i(E.zc,0,0,E.zc.length),E.ja=0}function Io(E,C,P,z,ne){ne=E[C+P+32*z]+(ne>>3),E[C+P+32*z]=-256&ne?0>ne?0:255:ne}function Wi(E,C,P,z,ne,se){Io(E,C,0,P,z+ne),Io(E,C,1,P,z+se),Io(E,C,2,P,z-se),Io(E,C,3,P,z-ne)}function mu(E){return(20091*E>>16)+E}function Zg(E,C,P,z){var ne,se=0,le=o(16);for(ne=0;4>ne;++ne){var ue=E[C+0]+E[C+8],fe=E[C+0]-E[C+8],me=(35468*E[C+4]>>16)-mu(E[C+12]),De=mu(E[C+4])+(35468*E[C+12]>>16);le[se+0]=ue+De,le[se+1]=fe+me,le[se+2]=fe-me,le[se+3]=ue-De,se+=4,C++}for(ne=se=0;4>ne;++ne)ue=(E=le[se+0]+4)+le[se+8],fe=E-le[se+8],me=(35468*le[se+4]>>16)-mu(le[se+12]),Io(P,z,0,0,ue+(De=mu(le[se+4])+(35468*le[se+12]>>16))),Io(P,z,1,0,fe+me),Io(P,z,2,0,fe-me),Io(P,z,3,0,ue-De),se++,z+=32}function f_(E,C,P,z){var ne=E[C+0]+4,se=35468*E[C+4]>>16,le=mu(E[C+4]),ue=35468*E[C+1]>>16;Wi(P,z,0,ne+le,E=mu(E[C+1]),ue),Wi(P,z,1,ne+se,E,ue),Wi(P,z,2,ne-se,E,ue),Wi(P,z,3,ne-le,E,ue)}function Kg(E,C,P,z,ne){Zg(E,C,P,z),ne&&Zg(E,C+16,P,z+4)}function Cs(E,C,P,z){x(E,C+0,P,z,1),x(E,C+32,P,z+128,1)}function tp(E,C,P,z){var ne;for(E=E[C+0]+4,ne=0;4>ne;++ne)for(C=0;4>C;++C)Io(P,z,C,ne,E)}function Jg(E,C,P,z){E[C+0]&&H(E,C+0,P,z),E[C+16]&&H(E,C+16,P,z+4),E[C+32]&&H(E,C+32,P,z+128),E[C+48]&&H(E,C+48,P,z+128+4)}function nh(E,C,P,z){var ne,se=o(16);for(ne=0;4>ne;++ne){var le=E[C+0+ne]+E[C+12+ne],ue=E[C+4+ne]+E[C+8+ne],fe=E[C+4+ne]-E[C+8+ne],me=E[C+0+ne]-E[C+12+ne];se[0+ne]=le+ue,se[8+ne]=le-ue,se[4+ne]=me+fe,se[12+ne]=me-fe}for(ne=0;4>ne;++ne)le=(E=se[0+4*ne]+3)+se[3+4*ne],ue=se[1+4*ne]+se[2+4*ne],fe=se[1+4*ne]-se[2+4*ne],me=E-se[3+4*ne],P[z+0]=le+ue>>3,P[z+16]=me+fe>>3,P[z+32]=le-ue>>3,P[z+48]=me-fe>>3,z+=64}function rh(E,C,P){var z,ne=C-32,se=tl,le=255-E[ne-1];for(z=0;z<P;++z){var ue,fe=se,me=le+E[C-1];for(ue=0;ue<P;++ue)E[C+ue]=fe[me+E[ne+ue]];C+=32}}function np(E,C){rh(E,C,4)}function $r(E,C){rh(E,C,8)}function yu(E,C){rh(E,C,16)}function rp(E,C){var P;for(P=0;16>P;++P)r(E,C+32*P,E,C-32,16)}function Ef(E,C){var P;for(P=16;0<P;--P)i(E,C,E[C-1],16),C+=32}function di(E,C,P){var z;for(z=0;16>z;++z)i(C,P+32*z,E,16)}function Is(E,C){var P,z=16;for(P=0;16>P;++P)z+=E[C-1+32*P]+E[C+P-32];di(z>>5,E,C)}function Tl(E,C){var P,z=8;for(P=0;16>P;++P)z+=E[C-1+32*P];di(z>>4,E,C)}function ip(E,C){var P,z=8;for(P=0;16>P;++P)z+=E[C+P-32];di(z>>4,E,C)}function d_(E,C){di(128,E,C)}function sn(E,C,P){return E+2*C+P+2>>2}function bf(E,C){var P,z=C-32;for(z=new Uint8Array([sn(E[z-1],E[z+0],E[z+1]),sn(E[z+0],E[z+1],E[z+2]),sn(E[z+1],E[z+2],E[z+3]),sn(E[z+2],E[z+3],E[z+4])]),P=0;4>P;++P)r(E,C+32*P,z,0,z.length)}function p_(E,C){var P=E[C-1],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96];Ve(E,C+0,16843009*sn(E[C-1-32],P,z)),Ve(E,C+32,16843009*sn(P,z,ne)),Ve(E,C+64,16843009*sn(z,ne,se)),Ve(E,C+96,16843009*sn(ne,se,se))}function Qg(E,C){var P,z=4;for(P=0;4>P;++P)z+=E[C+P-32]+E[C-1+32*P];for(z>>=3,P=0;4>P;++P)i(E,C+32*P,z,4)}function Mn(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1-32],le=E[C+0-32],ue=E[C+1-32],fe=E[C+2-32],me=E[C+3-32];E[C+0+96]=sn(z,ne,E[C-1+96]),E[C+1+96]=E[C+0+64]=sn(P,z,ne),E[C+2+96]=E[C+1+64]=E[C+0+32]=sn(se,P,z),E[C+3+96]=E[C+2+64]=E[C+1+32]=E[C+0+0]=sn(le,se,P),E[C+3+64]=E[C+2+32]=E[C+1+0]=sn(ue,le,se),E[C+3+32]=E[C+2+0]=sn(fe,ue,le),E[C+3+0]=sn(me,fe,ue)}function co(E,C){var P=E[C+1-32],z=E[C+2-32],ne=E[C+3-32],se=E[C+4-32],le=E[C+5-32],ue=E[C+6-32],fe=E[C+7-32];E[C+0+0]=sn(E[C+0-32],P,z),E[C+1+0]=E[C+0+32]=sn(P,z,ne),E[C+2+0]=E[C+1+32]=E[C+0+64]=sn(z,ne,se),E[C+3+0]=E[C+2+32]=E[C+1+64]=E[C+0+96]=sn(ne,se,le),E[C+3+32]=E[C+2+64]=E[C+1+96]=sn(se,le,ue),E[C+3+64]=E[C+2+96]=sn(le,ue,fe),E[C+3+96]=sn(ue,fe,fe)}function op(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1-32],le=E[C+0-32],ue=E[C+1-32],fe=E[C+2-32],me=E[C+3-32];E[C+0+0]=E[C+1+64]=se+le+1>>1,E[C+1+0]=E[C+2+64]=le+ue+1>>1,E[C+2+0]=E[C+3+64]=ue+fe+1>>1,E[C+3+0]=fe+me+1>>1,E[C+0+96]=sn(ne,z,P),E[C+0+64]=sn(z,P,se),E[C+0+32]=E[C+1+96]=sn(P,se,le),E[C+1+32]=E[C+2+96]=sn(se,le,ue),E[C+2+32]=E[C+3+96]=sn(le,ue,fe),E[C+3+32]=sn(ue,fe,me)}function em(E,C){var P=E[C+0-32],z=E[C+1-32],ne=E[C+2-32],se=E[C+3-32],le=E[C+4-32],ue=E[C+5-32],fe=E[C+6-32],me=E[C+7-32];E[C+0+0]=P+z+1>>1,E[C+1+0]=E[C+0+64]=z+ne+1>>1,E[C+2+0]=E[C+1+64]=ne+se+1>>1,E[C+3+0]=E[C+2+64]=se+le+1>>1,E[C+0+32]=sn(P,z,ne),E[C+1+32]=E[C+0+96]=sn(z,ne,se),E[C+2+32]=E[C+1+96]=sn(ne,se,le),E[C+3+32]=E[C+2+96]=sn(se,le,ue),E[C+3+64]=sn(le,ue,fe),E[C+3+96]=sn(ue,fe,me)}function Dl(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96];E[C+0+0]=P+z+1>>1,E[C+2+0]=E[C+0+32]=z+ne+1>>1,E[C+2+32]=E[C+0+64]=ne+se+1>>1,E[C+1+0]=sn(P,z,ne),E[C+3+0]=E[C+1+32]=sn(z,ne,se),E[C+3+32]=E[C+1+64]=sn(ne,se,se),E[C+3+64]=E[C+2+64]=E[C+0+96]=E[C+1+96]=E[C+2+96]=E[C+3+96]=se}function Sf(E,C){var P=E[C-1+0],z=E[C-1+32],ne=E[C-1+64],se=E[C-1+96],le=E[C-1-32],ue=E[C+0-32],fe=E[C+1-32],me=E[C+2-32];E[C+0+0]=E[C+2+32]=P+le+1>>1,E[C+0+32]=E[C+2+64]=z+P+1>>1,E[C+0+64]=E[C+2+96]=ne+z+1>>1,E[C+0+96]=se+ne+1>>1,E[C+3+0]=sn(ue,fe,me),E[C+2+0]=sn(le,ue,fe),E[C+1+0]=E[C+3+32]=sn(P,le,ue),E[C+1+32]=E[C+3+64]=sn(z,P,le),E[C+1+64]=E[C+3+96]=sn(ne,z,P),E[C+1+96]=sn(se,ne,z)}function bi(E,C){var P;for(P=0;8>P;++P)r(E,C+32*P,E,C-32,8)}function tm(E,C){var P;for(P=0;8>P;++P)i(E,C,E[C-1],8),C+=32}function Ja(E,C,P){var z;for(z=0;8>z;++z)i(C,P+32*z,E,8)}function nm(E,C){var P,z=8;for(P=0;8>P;++P)z+=E[C+P-32]+E[C-1+32*P];Ja(z>>4,E,C)}function Cf(E,C){var P,z=4;for(P=0;8>P;++P)z+=E[C+P-32];Ja(z>>3,E,C)}function sp(E,C){var P,z=4;for(P=0;8>P;++P)z+=E[C-1+32*P];Ja(z>>3,E,C)}function ap(E,C){Ja(128,E,C)}function To(E,C,P){var z=E[C-P],ne=E[C+0],se=3*(ne-z)+mp[1020+E[C-2*P]-E[C+P]],le=ew[112+(se+4>>3)];E[C-P]=tl[255+z+ew[112+(se+3>>3)]],E[C+0]=tl[255+ne-le]}function oc(E,C,P,z){var ne=E[C+0],se=E[C+P];return Ll[255+E[C-2*P]-E[C-P]]>z||Ll[255+se-ne]>z}function If(E,C,P,z){return 4*Ll[255+E[C-P]-E[C+0]]+Ll[255+E[C-2*P]-E[C+P]]<=z}function $o(E,C,P,z,ne){var se=E[C-3*P],le=E[C-2*P],ue=E[C-P],fe=E[C+0],me=E[C+P],De=E[C+2*P],ze=E[C+3*P];return 4*Ll[255+ue-fe]+Ll[255+le-me]>z?0:Ll[255+E[C-4*P]-se]<=ne&&Ll[255+se-le]<=ne&&Ll[255+le-ue]<=ne&&Ll[255+ze-De]<=ne&&Ll[255+De-me]<=ne&&Ll[255+me-fe]<=ne}function ba(E,C,P,z){var ne=2*z+1;for(z=0;16>z;++z)If(E,C+z,P,ne)&&To(E,C+z,P)}function lp(E,C,P,z){var ne=2*z+1;for(z=0;16>z;++z)If(E,C+z*P,1,ne)&&To(E,C+z*P,1)}function _u(E,C,P,z){var ne;for(ne=3;0<ne;--ne)ba(E,C+=4*P,P,z)}function up(E,C,P,z){var ne;for(ne=3;0<ne;--ne)lp(E,C+=4,P,z)}function Ts(E,C,P,z,ne,se,le,ue){for(se=2*se+1;0<ne--;){if($o(E,C,P,se,le))if(oc(E,C,P,ue))To(E,C,P);else{var fe=E,me=C,De=P,ze=fe[me-2*De],ye=fe[me-De],Re=fe[me+0],ke=fe[me+De],We=fe[me+2*De],Ge=27*(Je=mp[1020+3*(Re-ye)+mp[1020+ze-ke]])+63>>7,$e=18*Je+63>>7,Je=9*Je+63>>7;fe[me-3*De]=tl[255+fe[me-3*De]+Je],fe[me-2*De]=tl[255+ze+$e],fe[me-De]=tl[255+ye+Ge],fe[me+0]=tl[255+Re-Ge],fe[me+De]=tl[255+ke-$e],fe[me+2*De]=tl[255+We-Je]}C+=z}}function vu(E,C,P,z,ne,se,le,ue){for(se=2*se+1;0<ne--;){if($o(E,C,P,se,le))if(oc(E,C,P,ue))To(E,C,P);else{var fe=E,me=C,De=P,ze=fe[me-De],ye=fe[me+0],Re=fe[me+De],ke=ew[112+(4+(We=3*(ye-ze))>>3)],We=ew[112+(We+3>>3)],Ge=ke+1>>1;fe[me-2*De]=tl[255+fe[me-2*De]+Ge],fe[me-De]=tl[255+ze+We],fe[me+0]=tl[255+ye-ke],fe[me+De]=tl[255+Re-Ge]}C+=z}}function ra(E,C,P,z,ne,se){Ts(E,C,P,1,16,z,ne,se)}function sc(E,C,P,z,ne,se){Ts(E,C,1,P,16,z,ne,se)}function rm(E,C,P,z,ne,se){var le;for(le=3;0<le;--le)vu(E,C+=4*P,P,1,16,z,ne,se)}function R(E,C,P,z,ne,se){var le;for(le=3;0<le;--le)vu(E,C+=4,1,P,16,z,ne,se)}function te(E,C,P,z,ne,se,le,ue){Ts(E,C,ne,1,8,se,le,ue),Ts(P,z,ne,1,8,se,le,ue)}function ge(E,C,P,z,ne,se,le,ue){Ts(E,C,1,ne,8,se,le,ue),Ts(P,z,1,ne,8,se,le,ue)}function Ee(E,C,P,z,ne,se,le,ue){vu(E,C+4*ne,ne,1,8,se,le,ue),vu(P,z+4*ne,ne,1,8,se,le,ue)}function Ne(E,C,P,z,ne,se,le,ue){vu(E,C+4,1,ne,8,se,le,ue),vu(P,z+4,1,ne,8,se,le,ue)}function Xe(){this.ba=new mn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Rn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function et(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kt(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new j,this.yc=new I}function en(){this.xb=this.a=0,this.l=new wf,this.ca=new mn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kt,this.ab=0,this.gc=s(4,bt),this.Oc=0}function wn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wf,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Kn(E,C,P,z,ne,se,le){for(E=E==null?0:E[C+0],C=0;C<le;++C)ne[se+C]=E+P[z+C]&255,E=ne[se+C]}function si(E,C,P,z,ne,se,le){var ue;if(E==null)Kn(null,null,P,z,ne,se,le);else for(ue=0;ue<le;++ue)ne[se+ue]=E[C+ue]+P[z+ue]&255}function pi(E,C,P,z,ne,se,le){if(E==null)Kn(null,null,P,z,ne,se,le);else{var ue,fe=E[C+0],me=fe,De=fe;for(ue=0;ue<le;++ue)me=De+(fe=E[C+ue])-me,De=P[z+ue]+(-256&me?0>me?0:255:me)&255,me=fe,ne[se+ue]=De}}function Br(E,C,P,z){var ne=C.width,se=C.o;if(e(E!=null&&C!=null),0>P||0>=z||P+z>se)return null;if(!E.Cc){if(E.ga==null){var le;if(E.ga=new wn,(le=E.ga==null)||(le=C.width*C.o,e(E.Gb.length==0),E.Gb=o(le),E.Uc=0,E.Gb==null?le=0:(E.mb=E.Gb,E.nb=E.Uc,E.rc=null,le=1),le=!le),!le){le=E.ga;var ue=E.Fa,fe=E.P,me=E.qc,De=E.mb,ze=E.nb,ye=fe+1,Re=me-1,ke=le.l;if(e(ue!=null&&De!=null&&C!=null),Nf[0]=null,Nf[1]=Kn,Nf[2]=si,Nf[3]=pi,le.ca=De,le.tb=ze,le.c=C.width,le.i=C.height,e(0<le.c&&0<le.i),1>=me)C=0;else if(le.$a=3&ue[fe+0],le.Z=ue[fe+0]>>2&3,le.Lc=ue[fe+0]>>4&3,fe=ue[fe+0]>>6&3,0>le.$a||1<le.$a||4<=le.Z||1<le.Lc||fe)C=0;else if(ke.put=Rt,ke.ac=Qr,ke.bc=wi,ke.ma=le,ke.width=C.width,ke.height=C.height,ke.Da=C.Da,ke.v=C.v,ke.va=C.va,ke.j=C.j,ke.o=C.o,le.$a)e:{e(le.$a==1),C=Cl();t:for(;;){if(C==null){C=0;break e}if(e(le!=null),le.mc=C,C.c=le.c,C.i=le.i,C.l=le.l,C.l.ma=le,C.l.width=le.c,C.l.height=le.i,C.a=0,K(C.m,ue,ye,Re),!Ss(le.c,le.i,1,C,null)||(C.ab==1&&C.gc[0].hc==3&&ta(C.s)?(le.ic=1,ue=C.c*C.i,C.Ta=null,C.Ua=0,C.V=o(ue),C.Ba=0,C.V==null?(C.a=1,C=0):C=1):(le.ic=0,C=ei(C,le.c)),!C))break t;C=1;break e}le.mc=null,C=0}else C=Re>=le.c*le.i;le=!C}if(le)return null;E.ga.Lc!=1?E.Ga=0:z=se-P}e(E.ga!=null),e(P+z<=se);e:{if(C=(ue=E.ga).c,se=ue.l.o,ue.$a==0){if(ye=E.rc,Re=E.Vc,ke=E.Fa,fe=E.P+1+P*C,me=E.mb,De=E.nb+P*C,e(fe<=E.P+E.qc),ue.Z!=0)for(e(Nf[ue.Z]!=null),le=0;le<z;++le)Nf[ue.Z](ye,Re,ke,fe,me,De,C),ye=me,Re=De,De+=C,fe+=C;else for(le=0;le<z;++le)r(me,De,ke,fe,C),ye=me,Re=De,De+=C,fe+=C;E.rc=ye,E.Vc=Re}else{if(e(ue.mc!=null),C=P+z,e((le=ue.mc)!=null),e(C<=le.i),le.C>=C)C=1;else if(ue.ic||Qa(),ue.ic){ue=le.V,ye=le.Ba,Re=le.c;var We=le.i,Ge=(ke=1,fe=le.$/Re,me=le.$%Re,De=le.m,ze=le.s,le.$),$e=Re*We,Je=Re*C,ut=ze.wc,rt=Ge<Je?lo(ze,me,fe):null;e(Ge<=$e),e(C<=We),e(ta(ze));t:for(;;){for(;!De.h&&Ge<Je;){if(me&ut||(rt=lo(ze,me,fe)),e(rt!=null),xe(De),256>(We=Zn(rt.G[0],rt.H[0],De)))ue[ye+Ge]=We,++Ge,++me>=Re&&(me=0,++fe<=C&&!(fe%16)&&So(le,fe));else{if(!(280>We)){ke=0;break t}We=bn(We-256,De);var zt,Nt=Zn(rt.G[4],rt.H[4],De);if(xe(De),!(Ge>=(Nt=Er(Re,Nt=bn(Nt,De)))&&$e-Ge>=We)){ke=0;break t}for(zt=0;zt<We;++zt)ue[ye+Ge+zt]=ue[ye+Ge+zt-Nt];for(Ge+=We,me+=We;me>=Re;)me-=Re,++fe<=C&&!(fe%16)&&So(le,fe);Ge<Je&&me&ut&&(rt=lo(ze,me,fe))}e(De.h==pe(De))}So(le,fe>C?C:fe);break t}!ke||De.h&&Ge<$e?(ke=0,le.a=De.h?5:3):le.$=Ge,C=ke}else C=Co(le,le.V,le.Ba,le.c,le.i,C,yf);if(!C){z=0;break e}}P+z>=se&&(E.Cc=1),z=1}if(!z)return null;if(E.Cc&&((z=E.ga)!=null&&(z.mc=null),E.ga=null,0<E.Ga))return alert("todo:WebPDequantizeLevels"),null}return E.nb+P*ne}function br(E,C,P,z,ne,se){for(;0<ne--;){var le,ue=E,fe=C+(P?1:0),me=E,De=C+(P?0:3);for(le=0;le<z;++le){var ze=me[De+4*le];ze!=255&&(ze*=32897,ue[fe+4*le+0]=ue[fe+4*le+0]*ze>>23,ue[fe+4*le+1]=ue[fe+4*le+1]*ze>>23,ue[fe+4*le+2]=ue[fe+4*le+2]*ze>>23)}C+=se}}function Si(E,C,P,z,ne){for(;0<z--;){var se;for(se=0;se<P;++se){var le=E[C+2*se+0],ue=15&(me=E[C+2*se+1]),fe=4369*ue,me=(240&me|me>>4)*fe>>16;E[C+2*se+0]=(240&le|le>>4)*fe>>16&240|(15&le|le<<4)*fe>>16>>4&15,E[C+2*se+1]=240&me|ue}C+=ne}}function Sr(E,C,P,z,ne,se,le,ue){var fe,me,De=255;for(me=0;me<ne;++me){for(fe=0;fe<z;++fe){var ze=E[C+fe];se[le+4*fe]=ze,De&=ze}C+=P,le+=ue}return De!=255}function ia(E,C,P,z,ne){var se;for(se=0;se<ne;++se)P[z+se]=E[C+se]>>8}function Qa(){el=br,Rf=Si,g_=Sr,m_=ia}function Al(E,C,P){$[E]=function(z,ne,se,le,ue,fe,me,De,ze,ye,Re,ke,We,Ge,$e,Je,ut){var rt,zt=ut-1>>1,Nt=ue[fe+0]|me[De+0]<<16,Nn=ze[ye+0]|Re[ke+0]<<16;e(z!=null);var Ot=3*Nt+Nn+131074>>2;for(C(z[ne+0],255&Ot,Ot>>16,We,Ge),se!=null&&(Ot=3*Nn+Nt+131074>>2,C(se[le+0],255&Ot,Ot>>16,$e,Je)),rt=1;rt<=zt;++rt){var lr=ue[fe+rt]|me[De+rt]<<16,Mo=ze[ye+rt]|Re[ke+rt]<<16,Pn=Nt+lr+Nn+Mo+524296,Ft=Pn+2*(lr+Nn)>>3;Ot=Ft+Nt>>1,Nt=(Pn=Pn+2*(Nt+Mo)>>3)+lr>>1,C(z[ne+2*rt-1],255&Ot,Ot>>16,We,Ge+(2*rt-1)*P),C(z[ne+2*rt-0],255&Nt,Nt>>16,We,Ge+(2*rt-0)*P),se!=null&&(Ot=Pn+Nn>>1,Nt=Ft+Mo>>1,C(se[le+2*rt-1],255&Ot,Ot>>16,$e,Je+(2*rt-1)*P),C(se[le+2*rt+0],255&Nt,Nt>>16,$e,Je+(2*rt+0)*P)),Nt=lr,Nn=Mo}1&ut||(Ot=3*Nt+Nn+131074>>2,C(z[ne+ut-1],255&Ot,Ot>>16,We,Ge+(ut-1)*P),se!=null&&(Ot=3*Nn+Nt+131074>>2,C(se[le+ut-1],255&Ot,Ot>>16,$e,Je+(ut-1)*P)))}}function Tf(){kl[tw]=qK,kl[nw]=dF,kl[lF]=WK,kl[rw]=pF,kl[iw]=gF,kl[$T]=mF,kl[uF]=$K,kl[YT]=dF,kl[XT]=pF,kl[ow]=gF,kl[ZT]=mF}function ih(E){return E&~YK?0>E?0:255:E>>yF}function Rl(E,C){return ih((19077*E>>8)+(26149*C>>8)-14234)}function oh(E,C,P){return ih((19077*E>>8)-(6419*C>>8)-(13320*P>>8)+8708)}function sh(E,C){return ih((19077*E>>8)+(33050*C>>8)-17685)}function ac(E,C,P,z,ne){z[ne+0]=Rl(E,P),z[ne+1]=oh(E,C,P),z[ne+2]=sh(E,C)}function Do(E,C,P,z,ne){z[ne+0]=sh(E,C),z[ne+1]=oh(E,C,P),z[ne+2]=Rl(E,P)}function ah(E,C,P,z,ne){var se=oh(E,C,P);C=se<<3&224|sh(E,C)>>3,z[ne+0]=248&Rl(E,P)|se>>5,z[ne+1]=C}function lh(E,C,P,z,ne){var se=240&sh(E,C)|15;z[ne+0]=240&Rl(E,P)|oh(E,C,P)>>4,z[ne+1]=se}function cp(E,C,P,z,ne){z[ne+0]=255,ac(E,C,P,z,ne+1)}function hp(E,C,P,z,ne){Do(E,C,P,z,ne),z[ne+3]=255}function Yo(E,C,P,z,ne){ac(E,C,P,z,ne),z[ne+3]=255}function xu(E,C,P){$[E]=function(z,ne,se,le,ue,fe,me,De,ze){for(var ye=De+(-2&ze)*P;De!=ye;)C(z[ne+0],se[le+0],ue[fe+0],me,De),C(z[ne+1],se[le+0],ue[fe+0],me,De+P),ne+=2,++le,++fe,De+=2*P;1&ze&&C(z[ne+0],se[le+0],ue[fe+0],me,De)}}function uh(E,C,P){return P==0?E==0?C==0?6:5:C==0?4:0:P}function im(E,C,P,z,ne){switch(E>>>30){case 3:x(C,P,z,ne,0);break;case 2:D(C,P,z,ne);break;case 1:H(C,P,z,ne)}}function Sa(E,C){var P,z,ne=C.M,se=C.Nb,le=E.oc,ue=E.pc+40,fe=E.oc,me=E.pc+584,De=E.oc,ze=E.pc+600;for(P=0;16>P;++P)le[ue+32*P-1]=129;for(P=0;8>P;++P)fe[me+32*P-1]=129,De[ze+32*P-1]=129;for(0<ne?le[ue-1-32]=fe[me-1-32]=De[ze-1-32]=129:(i(le,ue-32-1,127,21),i(fe,me-32-1,127,9),i(De,ze-32-1,127,9)),z=0;z<E.za;++z){var ye=C.ya[C.aa+z];if(0<z){for(P=-1;16>P;++P)r(le,ue+32*P-4,le,ue+32*P+12,4);for(P=-1;8>P;++P)r(fe,me+32*P-4,fe,me+32*P+4,4),r(De,ze+32*P-4,De,ze+32*P+4,4)}var Re=E.Gd,ke=E.Hd+z,We=ye.ad,Ge=ye.Hc;if(0<ne&&(r(le,ue-32,Re[ke].y,0,16),r(fe,me-32,Re[ke].f,0,8),r(De,ze-32,Re[ke].ea,0,8)),ye.Za){var $e=le,Je=ue-32+16;for(0<ne&&(z>=E.za-1?i($e,Je,Re[ke].y[15],4):r($e,Je,Re[ke+1].y,0,4)),P=0;4>P;P++)$e[Je+128+P]=$e[Je+256+P]=$e[Je+384+P]=$e[Je+0+P];for(P=0;16>P;++P,Ge<<=2)$e=le,Je=ue+vF[P],Su[ye.Ob[P]]($e,Je),im(Ge,We,16*+P,$e,Je)}else if($e=uh(z,ne,ye.Ob[0]),Mf[$e](le,ue),Ge!=0)for(P=0;16>P;++P,Ge<<=2)im(Ge,We,16*+P,le,ue+vF[P]);for(P=ye.Gc,$e=uh(z,ne,ye.Dd),dh[$e](fe,me),dh[$e](De,ze),Ge=We,$e=fe,Je=me,255&(ye=0|P)&&(170&ye?k(Ge,256,$e,Je):ie(Ge,256,$e,Je)),ye=De,Ge=ze,255&(P>>=8)&&(170&P?k(We,320,ye,Ge):ie(We,320,ye,Ge)),ne<E.Ub-1&&(r(Re[ke].y,0,le,ue+480,16),r(Re[ke].f,0,fe,me+224,8),r(Re[ke].ea,0,De,ze+224,8)),P=8*se*E.B,Re=E.sa,ke=E.ta+16*z+16*se*E.R,We=E.qa,ye=E.ra+8*z+P,Ge=E.Ha,$e=E.Ia+8*z+P,P=0;16>P;++P)r(Re,ke+P*E.R,le,ue+32*P,16);for(P=0;8>P;++P)r(We,ye+P*E.B,fe,me+32*P,8),r(Ge,$e+P*E.B,De,ze+32*P,8)}}function ch(E,C,P,z,ne,se,le,ue,fe){var me=[0],De=[0],ze=0,ye=fe!=null?fe.kd:0,Re=fe??new et;if(E==null||12>P)return 7;Re.data=E,Re.w=C,Re.ha=P,C=[C],P=[P],Re.gb=[Re.gb];e:{var ke=C,We=P,Ge=Re.gb;if(e(E!=null),e(We!=null),e(Ge!=null),Ge[0]=0,12<=We[0]&&!t(E,ke[0],"RIFF")){if(t(E,ke[0]+8,"WEBP")){Ge=3;break e}var $e=Ie(E,ke[0]+4);if(12>$e||4294967286<$e){Ge=3;break e}if(ye&&$e>We[0]-8){Ge=7;break e}Ge[0]=$e,ke[0]+=12,We[0]-=12}Ge=0}if(Ge!=0)return Ge;for($e=0<Re.gb[0],P=P[0];;){e:{var Je=E;We=C,Ge=P;var ut=me,rt=De,zt=ke=[0];if((Ot=ze=[ze])[0]=0,8>Ge[0])Ge=7;else{if(!t(Je,We[0],"VP8X")){if(Ie(Je,We[0]+4)!=10){Ge=3;break e}if(18>Ge[0]){Ge=7;break e}var Nt=Ie(Je,We[0]+8),Nn=1+be(Je,We[0]+12);if(2147483648<=Nn*(Je=1+be(Je,We[0]+15))){Ge=3;break e}zt!=null&&(zt[0]=Nt),ut!=null&&(ut[0]=Nn),rt!=null&&(rt[0]=Je),We[0]+=18,Ge[0]-=18,Ot[0]=1}Ge=0}}if(ze=ze[0],ke=ke[0],Ge!=0)return Ge;if(We=!!(2&ke),!$e&&ze)return 3;if(se!=null&&(se[0]=!!(16&ke)),le!=null&&(le[0]=We),ue!=null&&(ue[0]=0),le=me[0],ke=De[0],ze&&We&&fe==null){Ge=0;break}if(4>P){Ge=7;break}if($e&&ze||!$e&&!ze&&!t(E,C[0],"ALPH")){P=[P],Re.na=[Re.na],Re.P=[Re.P],Re.Sa=[Re.Sa];e:{Nt=E,Ge=C,$e=P;var Ot=Re.gb;ut=Re.na,rt=Re.P,zt=Re.Sa,Nn=22,e(Nt!=null),e($e!=null),Je=Ge[0];var lr=$e[0];for(e(ut!=null),e(zt!=null),ut[0]=null,rt[0]=null,zt[0]=0;;){if(Ge[0]=Je,$e[0]=lr,8>lr){Ge=7;break e}var Mo=Ie(Nt,Je+4);if(4294967286<Mo){Ge=3;break e}var Pn=8+Mo+1&-2;if(Nn+=Pn,0<Ot&&Nn>Ot){Ge=3;break e}if(!t(Nt,Je,"VP8 ")||!t(Nt,Je,"VP8L")){Ge=0;break e}if(lr[0]<Pn){Ge=7;break e}t(Nt,Je,"ALPH")||(ut[0]=Nt,rt[0]=Je+8,zt[0]=Mo),Je+=Pn,lr-=Pn}}if(P=P[0],Re.na=Re.na[0],Re.P=Re.P[0],Re.Sa=Re.Sa[0],Ge!=0)break}P=[P],Re.Ja=[Re.Ja],Re.xa=[Re.xa];e:if(Ot=E,Ge=C,$e=P,ut=Re.gb[0],rt=Re.Ja,zt=Re.xa,Nt=Ge[0],Je=!t(Ot,Nt,"VP8 "),Nn=!t(Ot,Nt,"VP8L"),e(Ot!=null),e($e!=null),e(rt!=null),e(zt!=null),8>$e[0])Ge=7;else{if(Je||Nn){if(Ot=Ie(Ot,Nt+4),12<=ut&&Ot>ut-12){Ge=3;break e}if(ye&&Ot>$e[0]-8){Ge=7;break e}rt[0]=Ot,Ge[0]+=8,$e[0]-=8,zt[0]=Nn}else zt[0]=5<=$e[0]&&Ot[Nt+0]==47&&!(Ot[Nt+4]>>5),rt[0]=$e[0];Ge=0}if(P=P[0],Re.Ja=Re.Ja[0],Re.xa=Re.xa[0],C=C[0],Ge!=0)break;if(4294967286<Re.Ja)return 3;if(ue==null||We||(ue[0]=Re.xa?2:1),le=[le],ke=[ke],Re.xa){if(5>P){Ge=7;break}ue=le,ye=ke,We=se,E==null||5>P?E=0:5<=P&&E[C+0]==47&&!(E[C+4]>>5)?($e=[0],Ot=[0],ut=[0],K(rt=new ee,E,C,P),Li(rt,$e,Ot,ut)?(ue!=null&&(ue[0]=$e[0]),ye!=null&&(ye[0]=Ot[0]),We!=null&&(We[0]=ut[0]),E=1):E=0):E=0}else{if(10>P){Ge=7;break}ue=ke,E==null||10>P||!th(E,C+3,P-3)?E=0:(ye=E[C+0]|E[C+1]<<8|E[C+2]<<16,We=16383&(E[C+7]<<8|E[C+6]),E=16383&(E[C+9]<<8|E[C+8]),1&ye||3<(ye>>1&7)||!(ye>>4&1)||ye>>5>=Re.Ja||!We||!E?E=0:(le&&(le[0]=We),ue&&(ue[0]=E),E=1))}if(!E||(le=le[0],ke=ke[0],ze&&(me[0]!=le||De[0]!=ke)))return 3;fe!=null&&(fe[0]=Re,fe.offset=C-fe.w,e(4294967286>C-fe.w),e(fe.offset==fe.ha-P));break}return Ge==0||Ge==7&&ze&&fe==null?(se!=null&&(se[0]|=Re.na!=null&&0<Re.na.length),z!=null&&(z[0]=le),ne!=null&&(ne[0]=ke),0):Ge}function fp(E,C,P){var z=C.width,ne=C.height,se=0,le=0,ue=z,fe=ne;if(C.Da=E!=null&&0<E.Da,C.Da&&(ue=E.cd,fe=E.bd,se=E.v,le=E.j,11>P||(se&=-2,le&=-2),0>se||0>le||0>=ue||0>=fe||se+ue>z||le+fe>ne))return 0;if(C.v=se,C.j=le,C.va=se+ue,C.o=le+fe,C.U=ue,C.T=fe,C.da=E!=null&&0<E.da,C.da){if(!Fe(ue,fe,P=[E.ib],se=[E.hb]))return 0;C.ib=P[0],C.hb=se[0]}return C.ob=E!=null&&E.ob,C.Kb=E==null||!E.Sd,C.da&&(C.ob=C.ib<3*z/4&&C.hb<3*ne/4,C.Kb=0),1}function dp(E){if(E==null)return 2;if(11>E.S){var C=E.f.RGBA;C.fb+=(E.height-1)*C.A,C.A=-C.A}else C=E.f.kb,E=E.height,C.O+=(E-1)*C.fa,C.fa=-C.fa,C.N+=(E-1>>1)*C.Ab,C.Ab=-C.Ab,C.W+=(E-1>>1)*C.Db,C.Db=-C.Db,C.F!=null&&(C.J+=(E-1)*C.lb,C.lb=-C.lb);return 0}function lc(E,C,P,z){if(z==null||0>=E||0>=C)return 2;if(P!=null){if(P.Da){var ne=P.cd,se=P.bd,le=-2&P.v,ue=-2&P.j;if(0>le||0>ue||0>=ne||0>=se||le+ne>E||ue+se>C)return 2;E=ne,C=se}if(P.da){if(!Fe(E,C,ne=[P.ib],se=[P.hb]))return 2;E=ne[0],C=se[0]}}z.width=E,z.height=C;e:{var fe=z.width,me=z.height;if(E=z.S,0>=fe||0>=me||!(E>=tw&&13>E))E=2;else{if(0>=z.Rd&&z.sd==null){le=se=ne=C=0;var De=(ue=fe*xF[E])*me;if(11>E||(se=(me+1)/2*(C=(fe+1)/2),E==12&&(le=(ne=fe)*me)),(me=o(De+2*se+le))==null){E=1;break e}z.sd=me,11>E?((fe=z.f.RGBA).eb=me,fe.fb=0,fe.A=ue,fe.size=De):((fe=z.f.kb).y=me,fe.O=0,fe.fa=ue,fe.Fd=De,fe.f=me,fe.N=0+De,fe.Ab=C,fe.Cd=se,fe.ea=me,fe.W=0+De+se,fe.Db=C,fe.Ed=se,E==12&&(fe.F=me,fe.J=0+De+2*se),fe.Tc=le,fe.lb=ne)}if(C=1,ne=z.S,se=z.width,le=z.height,ne>=tw&&13>ne)if(11>ne)E=z.f.RGBA,C&=(ue=Math.abs(E.A))*(le-1)+se<=E.size,C&=ue>=se*xF[ne],C&=E.eb!=null;else{E=z.f.kb,ue=(se+1)/2,De=(le+1)/2,fe=Math.abs(E.fa),me=Math.abs(E.Ab);var ze=Math.abs(E.Db),ye=Math.abs(E.lb),Re=ye*(le-1)+se;C&=fe*(le-1)+se<=E.Fd,C&=me*(De-1)+ue<=E.Cd,C=(C&=ze*(De-1)+ue<=E.Ed)&fe>=se&me>=ue&ze>=ue,C&=E.y!=null,C&=E.f!=null,C&=E.ea!=null,ne==12&&(C&=ye>=se,C&=Re<=E.Tc,C&=E.F!=null)}else C=0;E=C?0:2}}return E!=0||P!=null&&P.fd&&(E=dp(z)),E}var hh=64,Ds=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],As=24,wu=32,Eu=8,bu=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ue("Predictor0","PredictorAdd0"),$.Predictor0=function(){return 4278190080},$.Predictor1=function(E){return E},$.Predictor2=function(E,C,P){return C[P+0]},$.Predictor3=function(E,C,P){return C[P+1]},$.Predictor4=function(E,C,P){return C[P-1]},$.Predictor5=function(E,C,P){return Be(Be(E,C[P+1]),C[P+0])},$.Predictor6=function(E,C,P){return Be(E,C[P-1])},$.Predictor7=function(E,C,P){return Be(E,C[P+0])},$.Predictor8=function(E,C,P){return Be(C[P-1],C[P+0])},$.Predictor9=function(E,C,P){return Be(C[P+0],C[P+1])},$.Predictor10=function(E,C,P){return Be(Be(E,C[P-1]),Be(C[P+0],C[P+1]))},$.Predictor11=function(E,C,P){var z=C[P+0];return 0>=qe(z>>24&255,E>>24&255,(C=C[P-1])>>24&255)+qe(z>>16&255,E>>16&255,C>>16&255)+qe(z>>8&255,E>>8&255,C>>8&255)+qe(255&z,255&E,255&C)?z:E},$.Predictor12=function(E,C,P){var z=C[P+0];return(ft((E>>24&255)+(z>>24&255)-((C=C[P-1])>>24&255))<<24|ft((E>>16&255)+(z>>16&255)-(C>>16&255))<<16|ft((E>>8&255)+(z>>8&255)-(C>>8&255))<<8|ft((255&E)+(255&z)-(255&C)))>>>0},$.Predictor13=function(E,C,P){var z=C[P-1];return(It((E=Be(E,C[P+0]))>>24&255,z>>24&255)<<24|It(E>>16&255,z>>16&255)<<16|It(E>>8&255,z>>8&255)<<8|It(255&E,255&z))>>>0};var fh=$.PredictorAdd0;$.PredictorAdd1=Vt,Ue("Predictor2","PredictorAdd2"),Ue("Predictor3","PredictorAdd3"),Ue("Predictor4","PredictorAdd4"),Ue("Predictor5","PredictorAdd5"),Ue("Predictor6","PredictorAdd6"),Ue("Predictor7","PredictorAdd7"),Ue("Predictor8","PredictorAdd8"),Ue("Predictor9","PredictorAdd9"),Ue("Predictor10","PredictorAdd10"),Ue("Predictor11","PredictorAdd11"),Ue("Predictor12","PredictorAdd12"),Ue("Predictor13","PredictorAdd13");var Df=$.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(E){return E>>8&255},function(E){return E}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(E){return E},function(E){return E>>8&255});var gi,pp=$.ColorIndexInverseTransform,Ml=$.MapARGB,Nl=$.VP8LColorIndexInverseTransformAlpha,Pl=$.MapAlpha,gp=$.VP8LPredictorsAdd=[];gp.length=16,($.VP8LPredictors=[]).length=16,($.VP8LPredictorsAdd_C=[]).length=16,($.VP8LPredictors_C=[]).length=16;var Af,Xo,Ao,m,u,h,g,x,D,k,H,ie,de,Te,Pe,tt,mt,At,Ht,Jn,qn,Mr,ho,Ro,el,Rf,g_,m_,y_=o(511),__=o(2041),v_=o(225),x_=o(767),om=0,mp=__,ew=v_,tl=x_,Ll=y_,tw=0,nw=1,lF=2,rw=3,iw=4,$T=5,uF=6,YT=7,XT=8,ow=9,ZT=10,MK=[2,3,7],NK=[3,3,11],cF=[280,256,256,256,40],PK=[0,1,1,1,0],LK=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],kK=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],OK=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],FK=8,KT=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],JT=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],w_=null,BK=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],jK=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hF=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],UK=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],GK=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],zK=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],VK=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mf=[],Su=[],dh=[],HK=1,fF=2,Nf=[],kl=[];Al("UpsampleRgbLinePair",ac,3),Al("UpsampleBgrLinePair",Do,3),Al("UpsampleRgbaLinePair",Yo,4),Al("UpsampleBgraLinePair",hp,4),Al("UpsampleArgbLinePair",cp,4),Al("UpsampleRgba4444LinePair",lh,2),Al("UpsampleRgb565LinePair",ah,2);var qK=$.UpsampleRgbLinePair,WK=$.UpsampleBgrLinePair,dF=$.UpsampleRgbaLinePair,pF=$.UpsampleBgraLinePair,gF=$.UpsampleArgbLinePair,mF=$.UpsampleRgba4444LinePair,$K=$.UpsampleRgb565LinePair,sw=16,aw=1<<sw-1,E_=-227,QT=482,yF=6,YK=(256<<yF)-1,_F=0,XK=o(256),ZK=o(256),KK=o(256),JK=o(256),QK=o(QT-E_),eJ=o(QT-E_);xu("YuvToRgbRow",ac,3),xu("YuvToBgrRow",Do,3),xu("YuvToRgbaRow",Yo,4),xu("YuvToBgraRow",hp,4),xu("YuvToArgbRow",cp,4),xu("YuvToRgba4444Row",lh,2),xu("YuvToRgb565Row",ah,2);var vF=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],lw=[0,2,8],tJ=[8,7,6,4,4,2,2,2,1,1,1,1],nJ=1;this.WebPDecodeRGBA=function(E,C,P,z,ne){var se=nw,le=new Xe,ue=new mn;le.ba=ue,ue.S=se,ue.width=[ue.width],ue.height=[ue.height];var fe=ue.width,me=ue.height,De=new qt;if(De==null||E==null)var ze=2;else e(De!=null),ze=ch(E,C,P,De.width,De.height,De.Pd,De.Qd,De.format,null);if(ze!=0?fe=0:(fe!=null&&(fe[0]=De.width[0]),me!=null&&(me[0]=De.height[0]),fe=1),fe){ue.width=ue.width[0],ue.height=ue.height[0],z!=null&&(z[0]=ue.width),ne!=null&&(ne[0]=ue.height);e:{if(z=new wf,(ne=new et).data=E,ne.w=C,ne.ha=P,ne.kd=1,C=[0],e(ne!=null),((E=ch(ne.data,ne.w,ne.ha,null,null,null,C,null,ne))==0||E==7)&&C[0]&&(E=4),(C=E)==0){if(e(le!=null),z.data=ne.data,z.w=ne.w+ne.offset,z.ha=ne.ha-ne.offset,z.put=Rt,z.ac=Qr,z.bc=wi,z.ma=le,ne.xa){if((E=Cl())==null){le=1;break e}if((function(ye,Re){var ke=[0],We=[0],Ge=[0];t:for(;;){if(ye==null)return 0;if(Re==null)return ye.a=2,0;if(ye.l=Re,ye.a=0,K(ye.m,Re.data,Re.w,Re.ha),!Li(ye.m,ke,We,Ge)){ye.a=3;break t}if(ye.xb=fF,Re.width=ke[0],Re.height=We[0],!Ss(ke[0],We[0],1,ye,null))break t;return 1}return e(ye.a!=0),0})(E,z)){if(z=(C=lc(z.width,z.height,le.Oa,le.ba))==0){t:{z=E;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((P=z.l)!=null),e((ne=P.ma)!=null),z.xb!=0){if(z.ca=ne.ba,z.tb=ne.tb,e(z.ca!=null),!fp(ne.Oa,P,rw)){z.a=2;break n}if(!ei(z,P.width)||P.da)break n;if((P.da||Dt(z.ca.S))&&Qa(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Qa()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!U(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!Co(z,z.V,z.Ba,z.c,z.i,P.o,Oi))break n;ne.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(C=E.a)}else C=E.a}else{if((E=new Xg)==null){le=1;break e}if(E.Fa=ne.na,E.P=ne.P,E.qc=ne.Sa,uo(E,z)){if((C=lc(z.width,z.height,le.Oa,le.ba))==0){if(E.Aa=0,P=le.Oa,e((ne=E)!=null),P!=null){if(0<(fe=0>(fe=P.Md)?0:100<fe?255:255*fe/100)){for(me=De=0;4>me;++me)12>(ze=ne.pb[me]).lc&&(ze.ia=fe*tJ[0>ze.lc?0:ze.lc]>>3),De|=ze.ia;De&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=P.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}(function(ye,Re){if(ye==null)return 0;if(Re==null)return Ei(ye,2,"NULL VP8Io parameter in VP8Decode().");if(!ye.cb&&!uo(ye,Re))return 0;if(e(ye.cb),Re.ac==null||Re.ac(Re)){Re.ob&&(ye.L=0);var ke=lw[ye.L];if(ye.L==2?(ye.yb=0,ye.zb=0):(ye.yb=Re.v-ke>>4,ye.zb=Re.j-ke>>4,0>ye.yb&&(ye.yb=0),0>ye.zb&&(ye.zb=0)),ye.Va=Re.o+15+ke>>4,ye.Hb=Re.va+15+ke>>4,ye.Hb>ye.za&&(ye.Hb=ye.za),ye.Va>ye.Ub&&(ye.Va=ye.Ub),0<ye.L){var We=ye.ed;for(ke=0;4>ke;++ke){var Ge;if(ye.Qa.Cb){var $e=ye.Qa.Lb[ke];ye.Qa.Fb||($e+=We.Tb)}else $e=We.Tb;for(Ge=0;1>=Ge;++Ge){var Je=ye.gd[ke][Ge],ut=$e;if(We.Pc&&(ut+=We.vd[0],Ge&&(ut+=We.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var rt=ut;0<We.wb&&(rt=4<We.wb?rt>>2:rt>>1)>9-We.wb&&(rt=9-We.wb),1>rt&&(rt=1),Je.dd=rt,Je.tc=2*ut+rt,Je.ld=40<=ut?2:15<=ut?1:0}else Je.tc=0;Je.La=Ge}}}ke=0}else Ei(ye,6,"Frame setup failed"),ke=ye.a;if(ke=ke==0){if(ke){ye.$c=0,0<ye.Aa||(ye.Ic=nJ);t:{ke=ye.Ic,We=4*(rt=ye.za);var zt=32*rt,Nt=rt+1,Nn=0<ye.L?rt*(0<ye.Aa?2:1):0,Ot=(ye.Aa==2?2:1)*rt;if((Je=We+832+(Ge=3*(16*ke+lw[ye.L])/2*zt)+($e=ye.Fa!=null&&0<ye.Fa.length?ye.Kc.c*ye.Kc.i:0))!=Je)ke=0;else{if(Je>ye.Vb){if(ye.Vb=0,ye.Ec=o(Je),ye.Fc=0,ye.Ec==null){ke=Ei(ye,1,"no memory during frame initialization.");break t}ye.Vb=Je}Je=ye.Ec,ut=ye.Fc,ye.Ac=Je,ye.Bc=ut,ut+=We,ye.Gd=s(zt,xf),ye.Hd=0,ye.rb=s(Nt+1,os),ye.sb=1,ye.wa=Nn?s(Nn,Ea):null,ye.Y=0,ye.D.Nb=0,ye.D.wa=ye.wa,ye.D.Y=ye.Y,0<ye.Aa&&(ye.D.Y+=rt),e(!0),ye.oc=Je,ye.pc=ut,ut+=832,ye.ya=s(Ot,eh),ye.aa=0,ye.D.ya=ye.ya,ye.D.aa=ye.aa,ye.Aa==2&&(ye.D.aa+=rt),ye.R=16*rt,ye.B=8*rt,rt=(zt=lw[ye.L])*ye.R,zt=zt/2*ye.B,ye.sa=Je,ye.ta=ut+rt,ye.qa=ye.sa,ye.ra=ye.ta+16*ke*ye.R+zt,ye.Ha=ye.qa,ye.Ia=ye.ra+8*ke*ye.B+zt,ye.$c=0,ut+=Ge,ye.mb=$e?Je:null,ye.nb=$e?ut:null,e(ut+$e<=ye.Fc+ye.Vb),ep(ye),i(ye.Ac,ye.Bc,0,We),ke=1}}if(ke){if(Re.ka=0,Re.y=ye.sa,Re.O=ye.ta,Re.f=ye.qa,Re.N=ye.ra,Re.ea=ye.Ha,Re.Vd=ye.Ia,Re.fa=ye.R,Re.Rc=ye.B,Re.F=null,Re.J=0,!om){for(ke=-255;255>=ke;++ke)y_[255+ke]=0>ke?-ke:ke;for(ke=-1020;1020>=ke;++ke)__[1020+ke]=-128>ke?-128:127<ke?127:ke;for(ke=-112;112>=ke;++ke)v_[112+ke]=-16>ke?-16:15<ke?15:ke;for(ke=-255;510>=ke;++ke)x_[255+ke]=0>ke?0:255<ke?255:ke;om=1}g=nh,x=Kg,k=Cs,H=tp,ie=Jg,D=f_,de=ra,Te=sc,Pe=te,tt=ge,mt=rm,At=R,Ht=Ee,Jn=Ne,qn=ba,Mr=lp,ho=_u,Ro=up,Su[0]=Qg,Su[1]=np,Su[2]=bf,Su[3]=p_,Su[4]=Mn,Su[5]=op,Su[6]=co,Su[7]=em,Su[8]=Sf,Su[9]=Dl,Mf[0]=Is,Mf[1]=yu,Mf[2]=rp,Mf[3]=Ef,Mf[4]=Tl,Mf[5]=ip,Mf[6]=d_,dh[0]=nm,dh[1]=$r,dh[2]=bi,dh[3]=tm,dh[4]=sp,dh[5]=Cf,dh[6]=ap,ke=1}else ke=0}ke&&(ke=(function(lr,Mo){for(lr.M=0;lr.M<lr.Va;++lr.M){var Pn,Ft=lr.Jc[lr.M&lr.Xb],xt=lr.m,$i=lr;for(Pn=0;Pn<$i.za;++Pn){var Sn=xt,fr=$i,ci=fr.Ac,ss=fr.Bc+4*Pn,oa=fr.zc,Fi=fr.ya[fr.aa+Pn];if(fr.Qa.Bb?Fi.$b=re(Sn,fr.Pa.jb[0])?2+re(Sn,fr.Pa.jb[2]):re(Sn,fr.Pa.jb[1]):Fi.$b=0,fr.kc&&(Fi.Ad=re(Sn,fr.Bd)),Fi.Za=!re(Sn,145)+0,Fi.Za){var Rs=Fi.Ob,sa=0;for(fr=0;4>fr;++fr){var No,pr=oa[0+fr];for(No=0;4>No;++No){pr=GK[ci[ss+No]][pr];for(var jr=hF[re(Sn,pr[0])];0<jr;)jr=hF[2*jr+re(Sn,pr[jr])];pr=-jr,ci[ss+No]=pr}r(Rs,sa,ci,ss,4),sa+=4,oa[0+fr]=pr}}else pr=re(Sn,156)?re(Sn,128)?1:3:re(Sn,163)?2:0,Fi.Ob[0]=pr,i(ci,ss,pr,4),i(oa,0,pr,4);Fi.Dd=re(Sn,142)?re(Sn,114)?re(Sn,183)?1:3:2:0}if($i.m.Ka)return Ei(lr,7,"Premature end-of-partition0 encountered.");for(;lr.ja<lr.za;++lr.ja){if($i=Ft,Sn=(xt=lr).rb[xt.sb-1],ci=xt.rb[xt.sb+xt.ja],Pn=xt.ya[xt.aa+xt.ja],ss=xt.kc?Pn.Ad:0)Sn.la=ci.la=0,Pn.Za||(Sn.Na=ci.Na=0),Pn.Hc=0,Pn.Gc=0,Pn.ia=0;else{var Bi,Ur;if(Sn=ci,ci=$i,ss=xt.Pa.Xc,oa=xt.ya[xt.aa+xt.ja],Fi=xt.pb[oa.$b],fr=oa.ad,Rs=0,sa=xt.rb[xt.sb-1],pr=No=0,i(fr,Rs,0,384),oa.Za)var as=0,Cu=ss[3];else{jr=o(16);var Yi=Sn.Na+sa.Na;if(Yi=w_(ci,ss[1],Yi,Fi.Eb,0,jr,0),Sn.Na=sa.Na=(0<Yi)+0,1<Yi)g(jr,0,fr,Rs);else{var Ca=jr[0]+3>>3;for(jr=0;256>jr;jr+=16)fr[Rs+jr]=Ca}as=1,Cu=ss[0]}var ti=15&Sn.la,Po=15&sa.la;for(jr=0;4>jr;++jr){var nl=1&Po;for(Ca=Ur=0;4>Ca;++Ca)ti=ti>>1|(nl=(Yi=w_(ci,Cu,Yi=nl+(1&ti),Fi.Sc,as,fr,Rs))>as)<<7,Ur=Ur<<2|(3<Yi?3:1<Yi?2:fr[Rs+0]!=0),Rs+=16;ti>>=4,Po=Po>>1|nl<<7,No=(No<<8|Ur)>>>0}for(Cu=ti,as=Po>>4,Bi=0;4>Bi;Bi+=2){for(Ur=0,ti=Sn.la>>4+Bi,Po=sa.la>>4+Bi,jr=0;2>jr;++jr){for(nl=1&Po,Ca=0;2>Ca;++Ca)Yi=nl+(1&ti),ti=ti>>1|(nl=0<(Yi=w_(ci,ss[2],Yi,Fi.Qc,0,fr,Rs)))<<3,Ur=Ur<<2|(3<Yi?3:1<Yi?2:fr[Rs+0]!=0),Rs+=16;ti>>=2,Po=Po>>1|nl<<5}pr|=Ur<<4*Bi,Cu|=ti<<4<<Bi,as|=(240&Po)<<Bi}Sn.la=Cu,sa.la=as,oa.Hc=No,oa.Gc=pr,oa.ia=43690&pr?0:Fi.ia,ss=!(No|pr)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[Pn.$b][Pn.Za],xt.wa[xt.Y+xt.ja].La|=!ss),$i.Ka)return Ei(lr,7,"Premature end-of-file encountered.")}if(ep(lr),xt=Mo,$i=1,Pn=(Ft=lr).D,Sn=0<Ft.L&&Ft.M>=Ft.zb&&Ft.M<=Ft.Va,Ft.Aa==0)t:{if(Pn.M=Ft.M,Pn.uc=Sn,Sa(Ft,Pn),$i=1,Pn=(Ur=Ft.D).Nb,Sn=(pr=lw[Ft.L])*Ft.R,ci=pr/2*Ft.B,jr=16*Pn*Ft.R,Ca=8*Pn*Ft.B,ss=Ft.sa,oa=Ft.ta-Sn+jr,Fi=Ft.qa,fr=Ft.ra-ci+Ca,Rs=Ft.Ha,sa=Ft.Ia-ci+Ca,Po=(ti=Ur.M)==0,No=ti>=Ft.Va-1,Ft.Aa==2&&Sa(Ft,Ur),Ur.uc)for(nl=(Yi=Ft).D.M,e(Yi.D.uc),Ur=Yi.yb;Ur<Yi.Hb;++Ur){as=Ur,Cu=nl;var aa=(rl=(ls=Yi).D).Nb;Bi=ls.R;var rl=rl.wa[rl.Y+as],il=ls.sa,Ia=ls.ta+16*aa*Bi+16*as,ol=rl.dd,ai=rl.tc;if(ai!=0)if(e(3<=ai),ls.L==1)0<as&&Mr(il,Ia,Bi,ai+4),rl.La&&Ro(il,Ia,Bi,ai),0<Cu&&qn(il,Ia,Bi,ai+4),rl.La&&ho(il,Ia,Bi,ai);else{var sl=ls.B,Iu=ls.qa,yp=ls.ra+8*aa*sl+8*as,ph=ls.Ha,ls=ls.Ia+8*aa*sl+8*as;aa=rl.ld,0<as&&(Te(il,Ia,Bi,ai+4,ol,aa),tt(Iu,yp,ph,ls,sl,ai+4,ol,aa)),rl.La&&(At(il,Ia,Bi,ai,ol,aa),Jn(Iu,yp,ph,ls,sl,ai,ol,aa)),0<Cu&&(de(il,Ia,Bi,ai+4,ol,aa),Pe(Iu,yp,ph,ls,sl,ai+4,ol,aa)),rl.La&&(mt(il,Ia,Bi,ai,ol,aa),Ht(Iu,yp,ph,ls,sl,ai,ol,aa))}}if(Ft.ia&&alert("todo:DitherRow"),xt.put!=null){if(Ur=16*ti,ti=16*(ti+1),Po?(xt.y=Ft.sa,xt.O=Ft.ta+jr,xt.f=Ft.qa,xt.N=Ft.ra+Ca,xt.ea=Ft.Ha,xt.W=Ft.Ia+Ca):(Ur-=pr,xt.y=ss,xt.O=oa,xt.f=Fi,xt.N=fr,xt.ea=Rs,xt.W=sa),No||(ti-=pr),ti>xt.o&&(ti=xt.o),xt.F=null,xt.J=null,Ft.Fa!=null&&0<Ft.Fa.length&&Ur<ti&&(xt.J=Br(Ft,xt,Ur,ti-Ur),xt.F=Ft.mb,xt.F==null&&xt.F.length==0)){$i=Ei(Ft,3,"Could not decode alpha data.");break t}Ur<xt.j&&(pr=xt.j-Ur,Ur=xt.j,e(!(1&pr)),xt.O+=Ft.R*pr,xt.N+=Ft.B*(pr>>1),xt.W+=Ft.B*(pr>>1),xt.F!=null&&(xt.J+=xt.width*pr)),Ur<ti&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=Ur-xt.j,xt.U=xt.va-xt.v,xt.T=ti-Ur,$i=xt.put(xt))}Pn+1!=Ft.Ic||No||(r(Ft.sa,Ft.ta-Sn,ss,oa+16*Ft.R,Sn),r(Ft.qa,Ft.ra-ci,Fi,fr+8*Ft.B,ci),r(Ft.Ha,Ft.Ia-ci,Rs,sa+8*Ft.B,ci))}if(!$i)return Ei(lr,6,"Output aborted.")}return 1})(ye,Re)),Re.bc!=null&&Re.bc(Re),ke&=1}return ke?(ye.cb=0,ke):0})(E,z)||(C=E.a)}}else C=E.a}C==0&&le.Oa!=null&&le.Oa.fd&&(C=dp(le.ba))}le=C}se=le!=0?null:11>se?ue.f.RGBA.eb:ue.f.kb.y}else se=null;return se};var xF=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c($,V){for(var B="",v=0;v<4;v++)B+=String.fromCharCode($[V++]);return B}function f($,V){return $[V+0]|$[V+1]<<8}function d($,V){return($[V+0]|$[V+1]<<8|$[V+2]<<16)>>>0}function y($,V){return($[V+0]|$[V+1]<<8|$[V+2]<<16|$[V+3]<<24)>>>0}new l;var p=[0],_=[0],w=[],b=new l,S=n,T=(function($,V){var B={},v=0,I=!1,M=0,j=0;if(B.frames=[],!(function(F,ee){for(var ce=0;ce<4;ce++)if(F[ee+ce]!="RIFF".charCodeAt(ce))return!0;return!1})($,V)){for(y($,V+=4),V+=8;V<$.length;){var Q=c($,V),Z=y($,V+=4);V+=4;var q=Z+(1&Z);switch(Q){case"VP8 ":case"VP8L":B.frames[v]===void 0&&(B.frames[v]={}),(_e=B.frames[v]).src_off=I?j:V-8,_e.src_size=M+Z+8,v++,I&&(I=!1,M=0,j=0);break;case"VP8X":(_e=B.header={}).feature_flags=$[V];var K=V+4;_e.canvas_width=1+d($,K),K+=3,_e.canvas_height=1+d($,K),K+=3;break;case"ALPH":I=!0,M=q+8,j=V-8;break;case"ANIM":(_e=B.header).bgcolor=y($,V),K=V+4,_e.loop_count=f($,K),K+=2;break;case"ANMF":var oe,_e;(_e=B.frames[v]={}).offset_x=2*d($,V),V+=3,_e.offset_y=2*d($,V),V+=3,_e.width=1+d($,V),V+=3,_e.height=1+d($,V),V+=3,_e.duration=d($,V),V+=3,oe=$[V++],_e.dispose=1&oe,_e.blend=oe>>1&1}Q!="ANMF"&&(V+=q)}return B}})(S,0);T.response=S,T.rgbaoutput=!0,T.dataurl=!1;var A=T.header?T.header:null,N=T.frames?T.frames:null;if(A){A.loop_counter=A.loop_count,p=[A.canvas_height],_=[A.canvas_width];for(var O=0;O<N.length&&N[O].blend!=0;O++);}var W=N[0],X=b.WebPDecodeRGBA(S,W.src_off,W.src_size,_,p);W.rgba=X,W.imgwidth=_[0],W.imgheight=p[0];for(var Y=0;Y<_[0]*p[0]*4;Y++)w[Y]=X[Y];return this.width=_,this.height=p,this.data=w,this}(function(n){var e,t,r,i,o,s,a,l,c,f=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new s,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new s,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new f}]);var d=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=F;Object.defineProperty(this,"pdf",{get:function(){return ee}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(U){ce=!!U}});var pe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return pe},set:function(U){pe=!!U}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(U){isNaN(U)||(J=U)}});var xe=0;Object.defineProperty(this,"posY",{get:function(){return xe},set:function(U){isNaN(U)||(xe=U)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(U){var ae;typeof U=="number"?ae=[U,U,U,U]:((ae=new Array(4))[0]=U[0],ae[1]=U.length>=2?U[1]:ae[0],ae[2]=U.length>=3?U[2]:ae[0],ae[3]=U.length>=4?U[3]:ae[1]),c.margin=ae}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(U){Se=U}});var ve=0;Object.defineProperty(this,"lastBreak",{get:function(){return ve},set:function(U){ve=U}});var re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return re},set:function(U){re=U}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(U){U instanceof f&&(c=U)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(U){c.path=U}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(U){Ve=U}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(U){var ae;ae=y(U),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(U){var ae=y(U);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(U){["butt","round","square"].indexOf(U)!==-1&&(this.ctx.lineCap=U,this.pdf.setLineCap(U))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(U){isNaN(U)||(this.ctx.lineWidth=U,this.pdf.setLineWidth(U))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(U){["bevel","round","miter"].indexOf(U)!==-1&&(this.ctx.lineJoin=U,this.pdf.setLineJoin(U))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(U){isNaN(U)||(this.ctx.miterLimit=U,this.pdf.setMiterLimit(U))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(U){this.ctx.textBaseline=U}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(U){["right","end","center","left","start"].indexOf(U)!==-1&&(this.ctx.textAlign=U)}});var G=null,be=null,Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(U){G=null,be=null,Ie=U}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(U){var ae;if(this.ctx.font=U,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(U))!==null){var he=ae[1];ae[2];var Fe=ae[3],Ce=ae[4];ae[5];var we=ae[6],Ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(Ue==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:Ue==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var Le=(function(ht){var Rr,pt,Yt=[],ln=ht.trim();if(ln==="")return Zk;if(ln in lW)return[lW[ln]];for(;ln!=="";){switch(pt=null,Rr=(ln=cW(ln)).charAt(0)){case'"':case"'":pt=l0e(ln.substring(1),Rr);break;default:pt=u0e(ln)}if(pt===null||(Yt.push(pt[0]),(ln=cW(pt[1]))!==""&&ln.charAt(0)!==","))return Zk;ln=ln.replace(/^,/,"")}return Yt})(we);if(this.fontFaces){var Be=(function(ht,Rr){var pt=ht.getFontList(),Yt=JSON.stringify(pt);if(G===null||be!==Yt){var ln=(function(hr){var Tt=[];return Object.keys(hr).forEach(function(ir){hr[ir].forEach(function(Dt){var Gt=null;switch(Dt){case"bold":Gt={family:ir,weight:"bold"};break;case"italic":Gt={family:ir,style:"italic"};break;case"bolditalic":Gt={family:ir,weight:"bold",style:"italic"};break;case"":case"normal":Gt={family:ir}}Gt!==null&&(Gt.ref={name:ir,style:Dt},Tt.push(Gt))})}),Tt})(pt);G=(function(hr){for(var Tt={},ir=0;ir<hr.length;++ir){var Dt=Xk(hr[ir]),Gt=Dt.family,Fn=Dt.stretch,mn=Dt.style,qt=Dt.weight;Tt[Gt]=Tt[Gt]||{},Tt[Gt][Fn]=Tt[Gt][Fn]||{},Tt[Gt][Fn][mn]=Tt[Gt][Fn][mn]||{},Tt[Gt][Fn][mn][qt]=Dt}return Tt})(ln.concat(Rr)),be=Yt}return G})(this.pdf,this.fontFaces),ft=Le.map(function(ht){return{family:ht,stretch:"normal",weight:Fe,style:he}}),It=(function(ht,Rr,pt){for(var Yt=(pt=pt||{}).defaultFontFamily||"times",ln=Object.assign({},a0e,pt.genericFontFamilies||{}),hr=null,Tt=null,ir=0;ir<Rr.length;++ir)if(ln[(hr=Xk(Rr[ir])).family]&&(hr.family=ln[hr.family]),ht.hasOwnProperty(hr.family)){Tt=ht[hr.family];break}if(!(Tt=Tt||ht[Yt]))throw new Error("Could not find a font-family for the rule '"+uW(hr)+"' and default family '"+Yt+"'.");if(Tt=(function(Dt,Gt){if(Gt[Dt])return Gt[Dt];var Fn=nO[Dt],mn=Fn<=nO.normal?-1:1,qt=aW(Gt,PW,Fn,mn);if(!qt)throw new Error("Could not find a matching font-stretch value for "+Dt);return qt})(hr.stretch,Tt),Tt=(function(Dt,Gt){if(Gt[Dt])return Gt[Dt];for(var Fn=NW[Dt],mn=0;mn<Fn.length;++mn)if(Gt[Fn[mn]])return Gt[Fn[mn]];throw new Error("Could not find a matching font-style for "+Dt)})(hr.style,Tt),!(Tt=(function(Dt,Gt){if(Gt[Dt])return Gt[Dt];if(Dt===400&&Gt[500])return Gt[500];if(Dt===500&&Gt[400])return Gt[400];var Fn=s0e[Dt],mn=aW(Gt,LW,Fn,Dt<400?-1:1);if(!mn)throw new Error("Could not find a matching font-weight for value "+Dt);return mn})(hr.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+uW(hr)+"'.");return Tt})(Be,ft);this.pdf.setFont(It.ref.name,It.ref.style)}else{var qe="";(Fe==="bold"||parseInt(Fe,10)>=700||he==="bold")&&(qe="bold"),he==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Vt="",vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ke=0;Ke<Le.length;Ke++){if(this.pdf.internal.getFont(Le[Ke],qe,{noFallback:!0,disableWarning:!0})!==void 0){Vt=Le[Ke];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(Le[Ke],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Vt=Le[Ke],qe="bold";else if(this.pdf.internal.getFont(Le[Ke],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Vt=Le[Ke],qe="normal";break}}if(Vt===""){for(var Zt=0;Zt<Le.length;Zt++)if(vt[Le[Zt]]){Vt=vt[Le[Zt]];break}}Vt=Vt===""?"Times":Vt,this.pdf.setFont(Vt,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(U){this.ctx.globalCompositeOperation=U}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(U){this.ctx.globalAlpha=U}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(U){this.ctx.lineDashOffset=U,_e.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(U){this.ctx.lineDash=U,_e.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(U){this.ctx.ignoreClearRect=!!U}})};d.prototype.setLineDash=function(F){this.lineDash=F},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){N.call(this,"fill",!1)},d.prototype.stroke=function(){N.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw ii.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(F,ee)},d.prototype.closePath=function(){var F=new s(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Yr(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){F=new s(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(F.x,F.y)},d.prototype.lineTo=function(F,ee){if(isNaN(F)||isNaN(ee))throw ii.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new s(ce.x,ce.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},d.prototype.quadraticCurveTo=function(F,ee,ce,pe){if(isNaN(ce)||isNaN(pe)||isNaN(F)||isNaN(ee))throw ii.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new s(ce,pe)),xe=this.ctx.transform.applyToPoint(new s(F,ee));this.path.push({type:"qct",x1:xe.x,y1:xe.y,x:J.x,y:J.y}),this.ctx.lastPoint=new s(J.x,J.y)},d.prototype.bezierCurveTo=function(F,ee,ce,pe,J,xe){if(isNaN(J)||isNaN(xe)||isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw ii.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new s(J,xe)),ve=this.ctx.transform.applyToPoint(new s(F,ee)),re=this.ctx.transform.applyToPoint(new s(ce,pe));this.path.push({type:"bct",x1:ve.x,y1:ve.y,x2:re.x,y2:re.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new s(Se.x,Se.y)},d.prototype.arc=function(F,ee,ce,pe,J,xe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe)||isNaN(J))throw ii.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(xe=!!xe,!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new s(F,ee));F=Se.x,ee=Se.y;var ve=this.ctx.transform.applyToPoint(new s(0,ce)),re=this.ctx.transform.applyToPoint(new s(0,0));ce=Math.sqrt(Math.pow(ve.x-re.x,2)+Math.pow(ve.y-re.y,2))}Math.abs(J-pe)>=2*Math.PI&&(pe=0,J=2*Math.PI),this.path.push({type:"arc",x:F,y:ee,radius:ce,startAngle:pe,endAngle:J,counterclockwise:xe})},d.prototype.arcTo=function(F,ee,ce,pe,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw ii.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,ee),this.lineTo(F+ce,ee),this.lineTo(F+ce,ee+pe),this.lineTo(F,ee+pe),this.lineTo(F,ee),this.lineTo(F+ce,ee),this.lineTo(F,ee)},d.prototype.fillRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw ii.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,ee,ce,pe),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw ii.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(F,ee,ce,pe),this.stroke())},d.prototype.clearRect=function(F,ee,ce,pe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe))throw ii.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,ee,ce,pe))},d.prototype.save=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var pe=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=pe}},d.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(F){var ee,ce,pe,J;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))ee=0,ce=0,pe=0,J=0;else{var xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(xe!==null)ee=parseInt(xe[1]),ce=parseInt(xe[2]),pe=parseInt(xe[3]),J=1;else if((xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)ee=parseInt(xe[1]),ce=parseInt(xe[2]),pe=parseInt(xe[3]),J=parseFloat(xe[4]);else{if(J=1,typeof F=="string"&&F.charAt(0)!=="#"){var Se=new CW(F);F=Se.ok?Se.toHex():"#000000"}F.length===4?(ee=F.substring(1,2),ee+=ee,ce=F.substring(2,3),ce+=ce,pe=F.substring(3,4),pe+=pe):(ee=F.substring(1,3),ce=F.substring(3,5),pe=F.substring(5,7)),ee=parseInt(ee,16),ce=parseInt(ce,16),pe=parseInt(pe,16)}}return{r:ee,g:ce,b:pe,a:J,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(F,ee,ce,pe){if(isNaN(ee)||isNaN(ce)||typeof F!="string")throw ii.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(pe=isNaN(pe)?void 0:pe,!p.call(this)){var J=q(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;v.call(this,{text:F,x:ee,y:ce,scale:xe,angle:J,align:this.textAlign,maxWidth:pe})}},d.prototype.strokeText=function(F,ee,ce,pe){if(isNaN(ee)||isNaN(ce)||typeof F!="string")throw ii.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){pe=isNaN(pe)?void 0:pe;var J=q(this.ctx.transform.rotation),xe=this.ctx.transform.scaleX;v.call(this,{text:F,x:ee,y:ce,scale:xe,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:pe})}},d.prototype.measureText=function(F){if(typeof F!="string")throw ii.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,ce=this.pdf.internal.scaleFactor,pe=ee.internal.getFontSize(),J=ee.getStringUnitWidth(F)*pe/ee.internal.scaleFactor;return new function(xe){var Se=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Se}}),this}({width:J*=Math.round(96*ce/72*1e4)/1e4})},d.prototype.scale=function(F,ee){if(isNaN(F)||isNaN(ee))throw ii.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new l(F,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},d.prototype.rotate=function(F){if(isNaN(F))throw ii.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},d.prototype.translate=function(F,ee){if(isNaN(F)||isNaN(ee))throw ii.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new l(1,0,0,1,F,ee);this.ctx.transform=this.ctx.transform.multiply(ce)},d.prototype.transform=function(F,ee,ce,pe,J,xe){if(isNaN(F)||isNaN(ee)||isNaN(ce)||isNaN(pe)||isNaN(J)||isNaN(xe))throw ii.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new l(F,ee,ce,pe,J,xe);this.ctx.transform=this.ctx.transform.multiply(Se)},d.prototype.setTransform=function(F,ee,ce,pe,J,xe){F=isNaN(F)?1:F,ee=isNaN(ee)?0:ee,ce=isNaN(ce)?0:ce,pe=isNaN(pe)?1:pe,J=isNaN(J)?0:J,xe=isNaN(xe)?0:xe,this.ctx.transform=new l(F,ee,ce,pe,J,xe)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(F,ee,ce,pe,J,xe,Se,ve,re){var Ve=this.pdf.getImageProperties(F),G=1,be=1,Ie=1,U=1;pe!==void 0&&ve!==void 0&&(Ie=ve/pe,U=re/J,G=Ve.width/pe*ve/pe,be=Ve.height/J*re/J),xe===void 0&&(xe=ee,Se=ce,ee=0,ce=0),pe!==void 0&&ve===void 0&&(ve=pe,re=J),pe===void 0&&ve===void 0&&(ve=Ve.width,re=Ve.height);var ae=this.ctx.transform.decompose(),he=q(ae.rotate.shx),Fe=new l,Ce=(Fe=(Fe=(Fe=Fe.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale)).applyToRectangle(new a(xe-ee*Ie,Se-ce*U,pe*G,J*be));if(this.autoPaging){for(var we,Ue=b.call(this,Ce),Le=[],Be=0;Be<Ue.length;Be+=1)Le.indexOf(Ue[Be])===-1&&Le.push(Ue[Be]);A(Le);for(var ft=Le[0],It=Le[Le.length-1],qe=ft;qe<It+1;qe++){this.pdf.setPage(qe);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=qe===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ht=qe===1?0:Ke+(qe-2)*Zt;if(this.ctx.clip_path.length!==0){var Rr=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(we,this.posX+this.margin[3],-ht+vt+this.ctx.prevPageLastElemOffset),O.call(this,"fill",!0),this.path=Rr}var pt=JSON.parse(JSON.stringify(Ce));pt=T([pt],this.posX+this.margin[3],-ht+vt+this.ctx.prevPageLastElemOffset)[0];var Yt=(qe>ft||qe<It)&&w.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,Zt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",pt.x,pt.y,pt.w,pt.h,null,null,he),Yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(F,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,he)};var b=function(F,ee,ce){var pe=[];ee=ee||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":pe.push(Math.floor((F.y+J)/ce)+1);break;case"arc":pe.push(Math.floor((F.y+J-F.radius)/ce)+1),pe.push(Math.floor((F.y+J+F.radius)/ce)+1);break;case"qct":var xe=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);pe.push(Math.floor((xe.y+J)/ce)+1),pe.push(Math.floor((xe.y+xe.h+J)/ce)+1);break;case"bct":var Se=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);pe.push(Math.floor((Se.y+J)/ce)+1),pe.push(Math.floor((Se.y+Se.h+J)/ce)+1);break;case"rect":pe.push(Math.floor((F.y+J)/ce)+1),pe.push(Math.floor((F.y+F.h+J)/ce)+1)}for(var ve=0;ve<pe.length;ve+=1)for(;this.pdf.internal.getNumberOfPages()<pe[ve];)S.call(this);return pe},S=function(){var F=this.fillStyle,ee=this.strokeStyle,ce=this.font,pe=this.lineCap,J=this.lineWidth,xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=ee,this.font=ce,this.lineCap=pe,this.lineWidth=J,this.lineJoin=xe},T=function(F,ee,ce){for(var pe=0;pe<F.length;pe++)switch(F[pe].type){case"bct":F[pe].x2+=ee,F[pe].y2+=ce;case"qct":F[pe].x1+=ee,F[pe].y1+=ce;default:F[pe].x+=ee,F[pe].y+=ce}return F},A=function(F){return F.sort(function(ee,ce){return ee-ce})},N=function(F,ee){var ce=this.fillStyle,pe=this.strokeStyle,J=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),ve=this.lineJoin;if(this.autoPaging){for(var re,Ve,G=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),Ie=[],U=0;U<be.length;U++)if(be[U].x!==void 0)for(var ae=b.call(this,be[U]),he=0;he<ae.length;he+=1)Ie.indexOf(ae[he])===-1&&Ie.push(ae[he]);for(var Fe=0;Fe<Ie.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Ie[Fe];)S.call(this);A(Ie);for(var Ce=Ie[0],we=Ie[Ie.length-1],Ue=Ce;Ue<we+1;Ue++){this.pdf.setPage(Ue),this.fillStyle=ce,this.strokeStyle=pe,this.lineCap=J,this.lineWidth=Se,this.lineJoin=ve;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Be=Ue===1?this.posY+this.margin[0]:this.margin[0],ft=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=Ue===1?0:ft+(Ue-2)*It;if(this.ctx.clip_path.length!==0){var Vt=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(re,this.posX+this.margin[3],-qe+Be+this.ctx.prevPageLastElemOffset),O.call(this,F,!0),this.path=Vt}if(Ve=JSON.parse(JSON.stringify(G)),this.path=T(Ve,this.posX+this.margin[3],-qe+Be+this.ctx.prevPageLastElemOffset),ee===!1||Ue===0){var vt=(Ue>Ce||Ue<we)&&w.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,It,null).clip().discardPath()),O.call(this,F,ee),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}this.path=G}else this.lineWidth=Se,O.call(this,F,ee),this.lineWidth=xe},O=function(F,ee){if((F!=="stroke"||ee||!_.call(this))&&(F==="stroke"||ee||!p.call(this))){for(var ce,pe,J=[],xe=this.path,Se=0;Se<xe.length;Se++){var ve=xe[Se];switch(ve.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ve,deltas:[],abs:[]});break;case"lt":var re=J.length;if(xe[Se-1]&&!isNaN(xe[Se-1].x)&&(ce=[ve.x-xe[Se-1].x,ve.y-xe[Se-1].y],re>0)){for(;re>=0;re--)if(J[re-1].close!==!0&&J[re-1].begin!==!0){J[re-1].deltas.push(ce),J[re-1].abs.push(ve);break}}break;case"bct":ce=[ve.x1-xe[Se-1].x,ve.y1-xe[Se-1].y,ve.x2-xe[Se-1].x,ve.y2-xe[Se-1].y,ve.x-xe[Se-1].x,ve.y-xe[Se-1].y],J[J.length-1].deltas.push(ce);break;case"qct":var Ve=xe[Se-1].x+2/3*(ve.x1-xe[Se-1].x),G=xe[Se-1].y+2/3*(ve.y1-xe[Se-1].y),be=ve.x+2/3*(ve.x1-ve.x),Ie=ve.y+2/3*(ve.y1-ve.y),U=ve.x,ae=ve.y;ce=[Ve-xe[Se-1].x,G-xe[Se-1].y,be-xe[Se-1].x,Ie-xe[Se-1].y,U-xe[Se-1].x,ae-xe[Se-1].y],J[J.length-1].deltas.push(ce);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ve)}}pe=ee?null:F==="stroke"?"stroke":"fill";for(var he=!1,Fe=0;Fe<J.length;Fe++)if(J[Fe].arc)for(var Ce=J[Fe].abs,we=0;we<Ce.length;we++){var Ue=Ce[we];Ue.type==="arc"?Y.call(this,Ue.x,Ue.y,Ue.radius,Ue.startAngle,Ue.endAngle,Ue.counterclockwise,void 0,ee,!he):I.call(this,Ue.x,Ue.y),he=!0}else if(J[Fe].close===!0)this.pdf.internal.out("h"),he=!1;else if(J[Fe].begin!==!0){var Le=J[Fe].start.x,Be=J[Fe].start.y;M.call(this,J[Fe].deltas,Le,Be),he=!0}pe&&$.call(this,pe),ee&&V.call(this)}},W=function(F){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-ce;case"top":return F+ee-ce;case"hanging":return F+ee-2*ce;case"middle":return F+ee/2-ce;default:return F}},X=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(ee,ce){this.colorStops.push([ee,ce])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Y=function(F,ee,ce,pe,J,xe,Se,ve,re){for(var Ve=Q.call(this,ce,pe,J,xe),G=0;G<Ve.length;G++){var be=Ve[G];G===0&&(re?B.call(this,be.x1+F,be.y1+ee):I.call(this,be.x1+F,be.y1+ee)),j.call(this,F,ee,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}ve?V.call(this):$.call(this,Se)},$=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(F,ee){this.pdf.internal.out(t(F)+" "+r(ee)+" m")},v=function(F){var ee;switch(F.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var ce,pe,J,xe=this.pdf.getTextDimensions(F.text),Se=W.call(this,F.y),ve=X.call(this,Se)-xe.h,re=this.ctx.transform.applyToPoint(new s(F.x,Se));if(this.autoPaging){var Ve=this.ctx.transform.decompose(),G=new l;G=(G=(G=G.multiply(Ve.translate)).multiply(Ve.skew)).multiply(Ve.scale);for(var be=this.ctx.transform.applyToRectangle(new a(F.x,Se,xe.w,xe.h)),Ie=G.applyToRectangle(new a(F.x,ve,xe.w,xe.h)),U=b.call(this,Ie),ae=[],he=0;he<U.length;he+=1)ae.indexOf(U[he])===-1&&ae.push(U[he]);A(ae);for(var Fe=ae[0],Ce=ae[ae.length-1],we=Fe;we<Ce+1;we++){this.pdf.setPage(we);var Ue=we===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Be=this.pdf.internal.pageSize.height-this.margin[2],ft=Be-this.margin[0],It=this.pdf.internal.pageSize.width-this.margin[1],qe=It-this.margin[3],Vt=we===1?0:Le+(we-2)*ft;if(this.ctx.clip_path.length!==0){var vt=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(ce,this.posX+this.margin[3],-1*Vt+Ue),O.call(this,"fill",!0),this.path=vt}var Ke=T([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Vt+Ue+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*F.scale),J=this.lineWidth,this.lineWidth=J*F.scale);var Zt=this.autoPaging!=="text";if(Zt||Ke.y+Ke.h<=Be){if(Zt||Ke.y>=Ue&&Ke.x<=It){var ht=Zt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||It-Ke.x)[0],Rr=T([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-Vt+Ue+this.ctx.prevPageLastElemOffset)[0],pt=Zt&&(we>Fe||we<Ce)&&w.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,ft,null).clip().discardPath()),this.pdf.text(ht,Rr.x,Rr.y,{angle:F.angle,align:ee,renderingMode:F.renderingMode}),pt&&this.pdf.restoreGraphicsState()}}else Ke.y<Be&&(this.ctx.prevPageLastElemOffset+=Be-Ke.y);F.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=J)}}else F.scale>=.01&&(pe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(pe*F.scale),J=this.lineWidth,this.lineWidth=J*F.scale),this.pdf.text(F.text,re.x+this.posX,re.y+this.posY,{angle:F.angle,align:ee,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(pe),this.lineWidth=J)},I=function(F,ee,ce,pe){ce=ce||0,pe=pe||0,this.pdf.internal.out(t(F+ce)+" "+r(ee+pe)+" l")},M=function(F,ee,ce){return this.pdf.lines(F,ee,ce,null,null)},j=function(F,ee,ce,pe,J,xe,Se,ve){this.pdf.internal.out([e(i(ce+F)),e(o(pe+ee)),e(i(J+F)),e(o(xe+ee)),e(i(Se+F)),e(o(ve+ee)),"c"].join(" "))},Q=function(F,ee,ce,pe){for(var J=2*Math.PI,xe=Math.PI/2;ee>ce;)ee-=J;var Se=Math.abs(ce-ee);Se<J&&pe&&(Se=J-Se);for(var ve=[],re=pe?-1:1,Ve=ee;Se>1e-5;){var G=Ve+re*Math.min(Se,xe);ve.push(Z.call(this,F,Ve,G)),Se-=Math.abs(G-Ve),Ve=G}return ve},Z=function(F,ee,ce){var pe=(ce-ee)/2,J=F*Math.cos(pe),xe=F*Math.sin(pe),Se=J,ve=-xe,re=Se*Se+ve*ve,Ve=re+Se*J+ve*xe,G=4/3*(Math.sqrt(2*re*Ve)-Ve)/(Se*xe-ve*J),be=Se-G*ve,Ie=ve+G*Se,U=be,ae=-Ie,he=pe+ee,Fe=Math.cos(he),Ce=Math.sin(he);return{x1:F*Math.cos(ee),y1:F*Math.sin(ee),x2:be*Fe-Ie*Ce,y2:be*Ce+Ie*Fe,x3:U*Fe-ae*Ce,y3:U*Ce+ae*Fe,x4:F*Math.cos(ce),y4:F*Math.sin(ce)}},q=function(F){return 180*F/Math.PI},K=function(F,ee,ce,pe,J,xe){var Se=F+.5*(ce-F),ve=ee+.5*(pe-ee),re=J+.5*(ce-J),Ve=xe+.5*(pe-xe),G=Math.min(F,J,Se,re),be=Math.max(F,J,Se,re),Ie=Math.min(ee,xe,ve,Ve),U=Math.max(ee,xe,ve,Ve);return new a(G,Ie,be-G,U-Ie)},oe=function(F,ee,ce,pe,J,xe,Se,ve){var re,Ve,G,be,Ie,U,ae,he,Fe,Ce,we,Ue,Le,Be,ft=ce-F,It=pe-ee,qe=J-ce,Vt=xe-pe,vt=Se-J,Ke=ve-xe;for(Ve=0;Ve<41;Ve++)Fe=(ae=(G=F+(re=Ve/40)*ft)+re*((Ie=ce+re*qe)-G))+re*(Ie+re*(J+re*vt-Ie)-ae),Ce=(he=(be=ee+re*It)+re*((U=pe+re*Vt)-be))+re*(U+re*(xe+re*Ke-U)-he),Ve==0?(we=Fe,Ue=Ce,Le=Fe,Be=Ce):(we=Math.min(we,Fe),Ue=Math.min(Ue,Ce),Le=Math.max(Le,Fe),Be=Math.max(Be,Ce));return new a(Math.round(we),Math.round(Ue),Math.round(Le-we),Math.round(Be-Ue))},_e=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,ee,ce=(F=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:ee}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(Ut.API),(function(n){var e=function(s){var a,l,c,f,d,y,p,_,w,b;for(/[^\x00-\xFF]/.test(s),l=[],c=0,f=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;f>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(y=(d=((d=((d=((d=(d-(b=d%85))/85)-(w=d%85))/85)-(_=d%85))/85)-(p=d%85))/85)%85,l.push(y+33,p+33,_+33,w+33,b+33)):l.push(122);return(function(S,T){for(var A=T;A>0;A--)S.pop()})(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(s){var a,l,c,f,d,y=String,p="length",_=255,w="charCodeAt",b="slice",S="replace";for(s[b](-2),s=s[b](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],f=0,d=(s+=a="uuuuu"[b](s[p]%5||5))[p];d>f;f+=5)l=52200625*(s[w](f)-33)+614125*(s[w](f+1)-33)+7225*(s[w](f+2)-33)+85*(s[w](f+3)-33)+(s[w](f+4)-33),c.push(_&l>>24,_&l>>16,_&l>>8,_&l);return(function(T,A){for(var N=A;N>0;N--)T.pop()})(c,a[p]),y.fromCharCode.apply(y,c)},r=function(s){return s.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var l="",c=0;c<s.length;c+=2)l+=String.fromCharCode("0x"+(s[c]+s[c+1]));return l},o=function(s){for(var a=new Uint8Array(s.length),l=s.length;l--;)a[l]=s.charCodeAt(l);return(a=CC(a)).reduce(function(c,f){return c+String.fromCharCode(f)},"")};n.processDataByFilters=function(s,a){var l=0,c=s||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=r(c),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=o(c),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:f.reverse().join(" ")}}})(Ut.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=(function(l,c,f){var d=new XMLHttpRequest,y=0,p=function(_){var w=_.length,b=[],S=String.fromCharCode;for(y=0;y<w;y+=1)b.push(S(255&_.charCodeAt(y)));return b.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?f(p(this.responseText)):f(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)})(i,o,s)}catch{}return a})(e,t,r)},n.allowFsRead=void 0,n.loadImageFile=n.loadFile})(Ut.API),(function(n){function e(){return(dn.html2canvas?Promise.resolve(dn.html2canvas):import("./chunk-O2T5FFDR.js")).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(dn.DOMPurify?Promise.resolve(dn.DOMPurify):import("./chunk-VH54VPDW.js")).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Yr(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var c=document.createElement(a);for(var f in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[f]=l.style[f];return c},o=function a(l,c){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||f.appendChild(a(d,c));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},s=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),c);return(f=f.setProgress(1,a,1,[a])).set(l)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,l){return a.__proto__=l||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,l){return this.then(function(){switch(l=l||(function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a),l){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,f=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=f,f)for(var p=0;p<f.length;++p){var _=f[p],w=_.src.find(function(b){return b.format==="truetype"});w&&c.addFont(w.url,_.ref.name,_.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,c.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},s.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},s.prototype.get=function(a,l){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function l(c,f){return Math.floor(c*f/72*96)}return this.then(function(){(a=a||Ut.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,l,c,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,l,c,f){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,f?this.progress.stack.concat(f):null)},s.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(f,d){return c.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return c.updateProgress(null,f),y}).then(f,d).then(function(y){return c.updateProgress(1),y})})},s.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then;var f=this;a&&(a=a.bind(f)),l&&(l=l.bind(f));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:s.convert(Object.assign({},f),Promise.prototype),y=c.call(d,a,l);return s.convert(y,f.__proto__)},s.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},s.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},s.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return s.convert(l,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Ut.getPageSize=function(a,l,c){if(Yr(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,c=f.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,y=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var _,w=0,b=0;if(p.hasOwnProperty(y))w=p[y][1]/d,b=p[y][0]/d;else try{w=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",b>w&&(_=b,b=w,w=_);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",w>b&&(_=b,b=w,w=_)}return{width:b,height:w,unit:l,k:d,orientation:a}},n.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Xk):null;var c=new s(l);return l.worker?c:c.from(a).doCallback()}})(Ut.API),Ut.API.addJS=function(n){return fW=n,this.internal.events.subscribe("postPutResources",function(){FC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(FC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){FC!==void 0&&hW!==void 0&&this.internal.out("/Names <</JavaScript "+FC+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,f=[];for(o=0;o<c;o++){var d=t.internal.newObject();f.push(d);var y=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<f.length;o++)t.internal.write("(page_"+(o+1)+")"+f[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Ut.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var l,c=this.decode.DCT_DECODE,f=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,l=(function(d){for(var y,p=256*d.charCodeAt(4)+d.charCodeAt(5),_=d.length,w={width:0,height:0,numcomponents:1},b=4;b<_;b+=2){if(b+=p,e.indexOf(d.charCodeAt(b+1))!==-1){y=256*d.charCodeAt(b+5)+d.charCodeAt(b+6),w={width:256*d.charCodeAt(b+7)+d.charCodeAt(b+8),height:y,numcomponents:d.charCodeAt(b+9)};break}p=256*d.charCodeAt(b+2)+d.charCodeAt(b+3)}return w})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return f}})(Ut.API),Ut.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=eW(n,{checkCrc:!0}),s=o.width,a=o.height,l=o.channels,c=o.palette,f=o.depth;i=c&&l===1?(function(Y){for(var $=Y.width,V=Y.height,B=Y.data,v=Y.palette,I=Y.depth,M=!1,j=[],Q=[],Z=void 0,q=!1,K=0,oe=0;oe<v.length;oe++){var _e=Bk(v[oe],4),F=_e[0],ee=_e[1],ce=_e[2],pe=_e[3];j.push(F,ee,ce),pe!=null&&(pe===0?(K++,Q.length<1&&Q.push(oe)):pe<255&&(q=!0))}if(q||K>1){M=!0,Q=void 0;var J=$*V;Z=new Uint8Array(J);for(var xe=new DataView(B.buffer),Se=0;Se<J;Se++){var ve=Kk(xe,Se,I),re=Bk(v[ve],4)[3];Z[Se]=re}}else K===0&&(Q=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:M?8:void 0,colorBytes:B,alphaBytes:Z,needSMask:M,palette:j,mask:Q}})(o):l===2||l===4?(function(Y){for(var $=Y.data,V=Y.width,B=Y.height,v=Y.channels,I=Y.depth,M=v===2?"DeviceGray":"DeviceRGB",j=v-1,Q=V*B,Z=j,q=Q*Z,K=1*Q,oe=Math.ceil(q*I/8),_e=Math.ceil(K*I/8),F=new Uint8Array(oe),ee=new Uint8Array(_e),ce=new DataView($.buffer),pe=new DataView(F.buffer),J=new DataView(ee.buffer),xe=!1,Se=0;Se<Q;Se++){for(var ve=Se*v,re=0;re<Z;re++)wW(pe,Kk(ce,ve+re,I),Se*Z+re,I);var Ve=Kk(ce,ve+Z,I);Ve<(1<<I)-1&&(xe=!0),wW(J,Ve,1*Se,I)}return{colorSpace:M,colorsPerPixel:j,sMaskBitsPerComponent:xe?I:void 0,colorBytes:F,alphaBytes:ee,needSMask:xe}})(o):(function(Y){var $=Y.data,V=Y.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:$ instanceof Uint16Array?(function(B){for(var v=B.length,I=new Uint8Array(2*v),M=new DataView(I.buffer,I.byteOffset,I.byteLength),j=0;j<v;j++)M.setUint16(2*j,B[j],!1);return I})($):$,needSMask:!1}})(o);var d,y,p,_=i,w=_.colorSpace,b=_.colorsPerPixel,S=_.sMaskBitsPerComponent,T=_.colorBytes,A=_.alphaBytes,N=_.needSMask,O=_.palette,W=_.mask,X=null;return r!==Ut.API.image_compression.NONE&&typeof CC=="function"?(X=(function(Y){var $;switch(Y){case Ut.API.image_compression.FAST:$=11;break;case Ut.API.image_compression.MEDIUM:$=13;break;case Ut.API.image_compression.SLOW:$=14;break;default:$=12}return $})(r),d=this.decode.FLATE_DECODE,y="/Predictor ".concat(X," /Colors ").concat(b," /BitsPerComponent ").concat(f," /Columns ").concat(s),n=mW(T,Math.ceil(s*b*f/8),b,f,r),N&&(p=mW(A,Math.ceil(s*S/8),1,S,r))):(d=void 0,y=void 0,n=T,N&&(p=A)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:t,data:n,index:e,filter:d,decodeParameters:y,transparency:W,palette:O,sMask:p,predictor:X,width:s,height:a,bitsPerComponent:f,sMaskBitsPerComponent:S,colorSpace:w}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new d0e(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},f=new Jk(100).encode(c,100);return n.processJPEG.call(this,f,t,r,i)},n.processGIF87A=n.processGIF89A})(Ut.API),Zu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zu.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){ii.log("bit decode error:"+t)}},Zu.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Zu.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Zu.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Zu.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=s,this.data[f+3]=c}this.pos+=n}},Zu.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,c=(s>>11)/e*255|0,f=i*this.width*4+4*o;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=n}},Zu.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Zu.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Zu.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new Zu(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Jk(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}})(Ut.API),bW.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new bW(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Jk(100).encode(l,100);return n.processJPEG.call(this,c,t,r,i)}})(Ut.API),Ut.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var f=r[c],d=r[c+1],y=r[c+2],p=r[c+3];o[a++]=f,o[a++]=d,o[a++]=y,s[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Ut.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},My=Ut.API,BC=My.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=c.fof?c.fof:1,d=e.doKerning!==!1,y=0,p=n.length,_=0,w=a[0]||l,b=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?b.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(y=d&&Yr(c[r])==="object"&&!isNaN(parseInt(c[r][_],10))?c[r][_]/f:0,b.push((a[r]||w)/l+y)),_=r;return b},dW=My.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return My.processArabic&&(n=My.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:BC.apply(this,arguments).reduce(function(o,s){return o+s},0)},pW=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(n.slice(l,o)),i},gW=function(n,e,t){t||(t={});var r,i,o,s,a,l,c,f=[],d=[f],y=t.textIndent||0,p=0,_=0,w=n.split(" "),b=BC.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var S=Array(l).join(" "),T=[];w.map(function(N){(N=N.split(/\s*\n/)).length>1?T=T.concat(N.map(function(O,W){return(W&&O.length?`
`:"")+O})):T.push(N[0])}),w=T,l=dW.apply(this,[S,t])}for(o=0,s=w.length;o<s;o++){var A=0;if(r=w[o],l&&r[0]==`
`&&(r=r.substr(1),A=1),y+p+(_=(i=BC.apply(this,[r,t])).reduce(function(N,O){return N+O},0))>e||A){if(_>e){for(a=pW.apply(this,[r,i,e-(y+p),e]),f.push(a.shift()),f=[a.pop()];a.length;)d.push([a.shift()]);_=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(N,O){return N+O},0)}else f=[r];d.push(f),y=_+l,p=b}else f.push(r),y+=p+_,p=b}return c=l?function(N,O){return(O?S:"")+N.join(" ")}:function(N){return N.join(" ")},d.map(c)},My.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return d.metadata[y]?{widths:d.metadata[y].widths||{0:1},kerning:d.metadata[y].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(gW.apply(this,[r[a],s,o]));return c},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var s=function(y){return"0x"+parseInt(y,10).toString(16)},a=n.__fontmetrics__.compress=function(y){var p,_,w,b,S=["{"];for(var T in y){if(p=y[T],isNaN(parseInt(T,10))?_="'"+T+"'":(T=parseInt(T,10),_=(_=s(T).slice(2)).slice(0,-1)+i[_.slice(-1)]),typeof p=="number")p<0?(w=s(p).slice(3),b="-"):(w=s(p).slice(2),b=""),w=b+w.slice(0,-1)+i[w.slice(-1)];else{if(Yr(p)!=="object")throw new Error("Don't know what to do with value type "+Yr(p)+".");w=a(p)}S.push(_+w)}return S.push("}"),S.join("")},l=n.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,_,w,b,S={},T=1,A=S,N=[],O="",W="",X=y.length-1,Y=1;Y<X;Y+=1)(b=y[Y])=="'"?p?(w=p.join(""),p=void 0):p=[]:p?p.push(b):b=="{"?(N.push([A,w]),A={},w=void 0):b=="}"?((_=N.pop())[0][_[1]]=A,w=void 0,A=_[0]):b=="-"?T=-1:w===void 0?r.hasOwnProperty(b)?(O+=r[b],w=parseInt(O,16)*T,T=1,O=""):O+=b:r.hasOwnProperty(b)?(W+=r[b],A[w]=parseInt(W,16)*T,T=1,w=void 0,W=""):W+=b;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(y){var p=y.font,_=d.Unicode[p.postScriptName];_&&(p.metadata.Unicode={},p.metadata.Unicode.widths=_.widths,p.metadata.Unicode.kerning=_.kerning);var w=f.Unicode[p.postScriptName];w&&(p.metadata.Unicode.encoding=w,p.encoding=w.codePages[0])}])})(Ut.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(jC(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])})(Ut),Ut.API.addSvgAsImage=function(n,e,t,r,i,o,s,a){if(isNaN(e)||isNaN(t))throw ii.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw ii.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var c=l.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(dn.canvg?Promise.resolve(dn.canvg):import("./chunk-ZTEKJDVN.js")).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(c,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,t,r,i,s,a)})},Ut.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Ut.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],c=0,f=0,d=0;function y(_,w){var b,S=!1;for(b=0;b<_.length;b+=1)_[b]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)t[a[d]].value=t[a[d]].defaultValue,t[a[d]].explicitSet=!1}if(Yr(n)==="object"){for(i in n)if(o=n[i],y(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&y(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(c=0;c<o.length;c+=1)if(r=!0,o[c].length===1&&typeof o[c][0]=="number")l.push(String(o[c]-1));else if(o[c].length>1){for(f=0;f<o[c].length;f+=1)typeof o[c][f]!="number"&&(r=!1);r===!0&&l.push([o[c][0]-1,o[c][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,w=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?w.push("/"+_+" /"+t[_].value):w.push("/"+_+" "+t[_].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Ut.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,c=["","0","00","000","0000"],f=[""],d=0,y=o.length;d<y;++d){if(a=s.metadata.characterToGlyph(o.charCodeAt(d)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(c[4-a.length],a)}return f.join("")},r=function(o){var s,a,l,c,f,d,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,y=(a=Object.keys(o).sort(function(p,_){return p-_})).length;d<y;d++)s=a[d],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(c=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+c+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,f=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",_=0;_<y.length;_++)p+=String.fromCharCode(y[_]);var w=c();f({data:p,addLength1:!0,objectId:w}),l("endobj");var b=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var S=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Py(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Py(a.fontName)),l("/FontDescriptor "+S+" 0 R"),l("/W "+n.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+b+" 0 R"),l("/BaseFont /"+Py(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,c=s.newObject,f=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,y="",p=0;p<d.length;p++)y+=String.fromCharCode(d[p]);var _=c();f({data:y,addLength1:!0,objectId:_}),l("endobj");var w=c();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var b=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Py(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var S=0;S<a.metadata.hmtx.widths.length;S++)a.metadata.hmtx.widths[S]=parseInt(a.metadata.hmtx.widths[S]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+Py(a.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,c=o.y,f=o.options||{},d=o.mutex||{},y=d.pdfEscape,p=d.activeFontKey,_=d.fonts,w=p,b="",S=0,T="",A=_[w].encoding;if(_[w].encoding!=="Identity-H")return{text:a,x:l,y:c,options:f,mutex:d};for(T=a,w=p,Array.isArray(a)&&(T=a[0]),S=0;S<T.length;S+=1)_[w].metadata.hasOwnProperty("cmap")&&(s=_[w].metadata.cmap.unicode.codeMap[T[S].charCodeAt(0)]),s||T[S].charCodeAt(0)<256&&_[w].metadata.hasOwnProperty("Unicode")?b+=T[S]:b+="";var N="";return parseInt(w.slice(1))<14||A==="WinAnsiEncoding"?N=y(b,w).split("").map(function(O){return O.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(N=t(b,_[w])),d.isHex=!0,{text:N,x:l,y:c,options:f,mutex:d}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var c=0;for(c=0;c<s.length;c+=1)Array.isArray(s[c])&&s[c].length===3?a.push([i(Object.assign({},l,{text:s[c][0]})).text,s[c][1],s[c][2]]):a.push(i(Object.assign({},l,{text:s[c]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])})(Ut),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Ut.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,l,c,f,d=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","\xAB","\xBB","\xAB","\u2039","\u203A","\u2039","\u2045","\u2046","\u2045","\u207D","\u207E","\u207D","\u208D","\u208E","\u208D","\u2264","\u2265","\u2264","\u2329","\u232A","\u2329","\uFE59","\uFE5A","\uFE59","\uFE5B","\uFE5C","\uFE5B","\uFE5D","\uFE5E","\uFE5D","\uFE64","\uFE65","\uFE64"],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,A=0;this.__bidiEngine__={};var N=function(B){var v=B.charCodeAt(),I=v>>8,M=w[I];return M!==void 0?d[256*M+(255&v)]:I===252||I===253?"AL":S.test(I)?"L":I===8?"R":"N"},O=function(B){for(var v,I=0;I<B.length;I++){if((v=N(B.charAt(I)))==="L")return!1;if(v==="R")return!0}return!1},W=function(B,v,I,M){var j,Q,Z,q,K=v[M];switch(K){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(K="AN");break;case"AL":T=!0,K="R";break;case"WS":case"BN":K="N";break;case"CS":M<1||M+1>=v.length||(j=I[M-1])!=="EN"&&j!=="AN"||(Q=v[M+1])!=="EN"&&Q!=="AN"?K="N":T&&(Q="AN"),K=Q===j?Q:"N";break;case"ES":K=(j=M>0?I[M-1]:"B")==="EN"&&M+1<v.length&&v[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&I[M-1]==="EN"){K="EN";break}if(T){K="N";break}for(Z=M+1,q=v.length;Z<q&&v[Z]==="ET";)Z++;K=Z<q&&v[Z]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(q=v.length,Z=M+1;Z<q&&v[Z]==="NSM";)Z++;if(Z<q){var oe=B[M],_e=oe>=1425&&oe<=2303||oe===64286;if(j=v[Z],_e&&(j==="R"||j==="AL")){K="R";break}}}K=M<1||(j=v[M-1])==="B"?"N":I[M-1];break;case"B":T=!1,i=!0,K=A;break;case"S":o=!0,K="N"}return K},X=function(B,v,I){var M=B.split("");return I&&Y(M,I,{hiLevel:A}),M.reverse(),v&&v.reverse(),M.join("")},Y=function(B,v,I){var M,j,Q,Z,q,K=-1,oe=B.length,_e=0,F=[],ee=A?p:y,ce=[];for(T=!1,i=!1,o=!1,j=0;j<oe;j++)ce[j]=N(B[j]);for(Q=0;Q<oe;Q++){if(q=_e,F[Q]=W(B,ce,F,Q),M=240&(_e=ee[q][_[F[Q]]]),_e&=15,v[Q]=Z=ee[_e][5],M>0)if(M===16){for(j=K;j<Q;j++)v[j]=1;K=-1}else K=-1;if(ee[_e][6])K===-1&&(K=Q);else if(K>-1){for(j=K;j<Q;j++)v[j]=Z;K=-1}ce[Q]==="B"&&(v[Q]=0),I.hiLevel|=Z}o&&(function(pe,J,xe){for(var Se=0;Se<xe;Se++)if(pe[Se]==="S"){J[Se]=A;for(var ve=Se-1;ve>=0&&pe[ve]==="WS";ve--)J[ve]=A}})(ce,v,oe)},$=function(B,v,I,M,j){if(!(j.hiLevel<B)){if(B===1&&A===1&&!i)return v.reverse(),void(I&&I.reverse());for(var Q,Z,q,K,oe=v.length,_e=0;_e<oe;){if(M[_e]>=B){for(q=_e+1;q<oe&&M[q]>=B;)q++;for(K=_e,Z=q-1;K<Z;K++,Z--)Q=v[K],v[K]=v[Z],v[Z]=Q,I&&(Q=I[K],I[K]=I[Z],I[Z]=Q);_e=q}_e++}}},V=function(B,v,I){var M=B.split(""),j={hiLevel:A};return I||(I=[]),Y(M,I,j),(function(Q,Z,q){if(q.hiLevel!==0&&f)for(var K,oe=0;oe<Q.length;oe++)Z[oe]===1&&(K=b.indexOf(Q[oe]))>=0&&(Q[oe]=b[K+1])})(M,I,j),$(2,M,v,I,j),$(1,M,v,I,j),M.join("")};return this.__bidiEngine__.doBidiReorder=function(B,v,I){if((function(j,Q){if(Q)for(var Z=0;Z<j.length;Z++)Q[Z]=Z;a===void 0&&(a=O(j)),c===void 0&&(c=O(j))})(B,v),s||!l||c)if(s&&l&&a^c)A=a?1:0,B=X(B,v,I);else if(!s&&l&&c)A=a?1:0,B=V(B,v,I),B=X(B,v);else if(!s||a||l||c){if(s&&!l&&a^c)B=X(B,v),a?(A=0,B=V(B,v,I)):(A=1,B=V(B,v,I),B=X(B,v));else if(s&&a&&!l&&c)A=1,B=V(B,v,I),B=X(B,v);else if(!s&&!l&&a^c){var M=f;a?(A=1,B=V(B,v,I),A=0,f=!1,B=V(B,v,I),f=M):(A=0,B=V(B,v,I),B=X(B,v),A=1,f=!1,B=V(B,v,I),f=M,B=X(B,v))}}else A=0,B=V(B,v,I);else A=a?1:0,B=V(B,v,I);return B},this.__bidiEngine__.setOptions=function(B){B&&(s=B.isInputVisual,l=B.isOutputVisual,a=B.isInputRtl,c=B.isOutputRtl,f=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Ut),Ut.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new zd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new D0e(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new p0e(this.contents),this.head=new m0e(this),this.name=new w0e(this),this.cmap=new OW(this),this.toUnicode={},this.hhea=new y0e(this),this.maxp=new E0e(this),this.hmtx=new b0e(this),this.post=new v0e(this),this.os2=new _0e(this),this.loca=new T0e(this),this.glyf=new S0e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var s,a,l,c;for(c=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Ju,zd=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),p0e=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,l,c,f,d,y,p,_,w;for(w in p=Object.keys(t).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),s=Math.floor(d/l),f=16*p-d,(i=new zd).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(s),i.writeShort(f),o=16*p,c=i.pos+o,a=null,_=[],t)for(y=t[w],i.writeString(w),i.writeInt(n(y)),i.writeInt(c),i.writeInt(y.length),_=_.concat(y),w==="head"&&(a=c),c+=y.length;c%4;)_.push(0),c++;return i.write(_),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=FW.call(t);t.length%4;)t.push(0);for(o=new zd(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),g0e={}.hasOwnProperty,Hc=function(n,e){for(var t in e)g0e.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Ju=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var m0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new zd).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),SW=(function(){function n(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,w,b,S,T,A;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),y=p/2,e.pos+=6,o=(function(){var N,O;for(O=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)O.push(e.readUInt16());return O})(),e.pos+=2,w=(function(){var N,O;for(O=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)O.push(e.readUInt16());return O})(),c=(function(){var N,O;for(O=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)O.push(e.readUInt16());return O})(),f=(function(){var N,O;for(O=[],l=N=0;0<=y?N<y:N>y;l=0<=y?++N:--N)O.push(e.readUInt16());return O})(),i=(this.length-e.pos+this.offset)/2,a=(function(){var N,O;for(O=[],l=N=0;0<=i?N<i:N>i;l=0<=i?++N:--N)O.push(e.readUInt16());return O})(),l=S=0,A=o.length;S<A;l=++S)for(b=o[l],r=T=_=w[l];_<=b?T<=b:T>=b;r=_<=b?++T:--T)f[l]===0?s=r+c[l]:(s=a[f[l]/2+(r-_)-(y-l)]||0)!==0&&(s+=c[l]),this.codeMap[r]=65535&s}e.pos=d}return n.encode=function(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,w,b,S,T,A,N,O,W,X,Y,$,V,B,v,I,M,j,Q,Z,q,K,oe,_e,F,ee,ce,pe,J,xe,Se,ve,re,Ve,G;switch(M=new zd,s=Object.keys(e).sort(function(be,Ie){return be-Ie}),t){case"macroman":for(w=0,b=(function(){var be=[];for(_=0;_<256;++_)be.push(0);return be})(),T={0:0},o={},j=0,K=s.length;j<K;j++)T[ve=e[i=s[j]]]==null&&(T[ve]=++w),o[i]={old:e[i],new:T[e[i]]},b[i]=T[e[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:o,subtable:M.data,maxGlyphID:w+1};case"unicode":for(v=[],d=[],A=0,T={},r={},S=c=null,Q=0,oe=s.length;Q<oe;Q++)T[O=e[i=s[Q]]]==null&&(T[O]=++A),r[i]={old:O,new:T[O]},a=T[O]-i,S!=null&&a===c||(S&&d.push(S),v.push(i),c=a),S=i;for(S&&d.push(S),d.push(65535),v.push(65535),V=2*($=v.length),Y=2*Math.pow(Math.log($)/Math.LN2,2),y=Math.log(Y/2)/Math.LN2,X=2*$-Y,l=[],W=[],p=[],_=Z=0,_e=v.length;Z<_e;_=++Z){if(B=v[_],f=d[_],B===65535){l.push(0),W.push(0);break}if(B-(I=r[B].new)>=32768)for(l.push(0),W.push(2*(p.length+$-_)),i=q=B;B<=f?q<=f:q>=f;i=B<=f?++q:--q)p.push(r[i].new);else l.push(I-B),W.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*$+2*p.length),M.writeUInt16(0),M.writeUInt16(V),M.writeUInt16(Y),M.writeUInt16(y),M.writeUInt16(X),xe=0,F=d.length;xe<F;xe++)i=d[xe],M.writeUInt16(i);for(M.writeUInt16(0),Se=0,ee=v.length;Se<ee;Se++)i=v[Se],M.writeUInt16(i);for(re=0,ce=l.length;re<ce;re++)a=l[re],M.writeUInt16(a);for(Ve=0,pe=W.length;Ve<pe;Ve++)N=W[Ve],M.writeUInt16(N);for(G=0,J=p.length;G<J;G++)w=p[G],M.writeUInt16(w);return{charMap:r,subtable:M.data,maxGlyphID:A+1}}},n})(),OW=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new SW(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=SW.encode(e,t),(i=new zd).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),y0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),_0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),v0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var s,a,l;for(l=[],o=s=0,a=this.file.maxp.numGlyphs;0<=a?s<a:s>a;o=0<=a?++s:--s)l.push(e.readUInt32());return l}).call(this)}},n})(),x0e=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},w0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,s,a,l,c,f,d,y;for(e.pos=this.offset,e.readShort(),t=e.readShort(),a=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},o=f=0,d=r.length;f<d;o=++f)i=r[o],e.pos=i.offset,c=e.readString(i.length),s=new x0e(c,i),l[y=i.nameID]==null&&(l[y]=[]),l[i.nameID].push(s);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},n})(),E0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),b0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,s,a,l;for(e.pos=this.offset,this.metrics=[],t=0,a=this.file.hhea.numberOfMetrics;0<=a?t<a:t>a;t=0<=a?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,f;for(f=[],t=c=0;0<=i?c<i:c>i;t=0<=i?++c:--c)f.push(e.readInt16());return f})(),this.widths=(function(){var c,f,d,y;for(y=[],c=0,f=(d=this.metrics).length;c<f;c++)o=d[c],y.push(o.advance);return y}).call(this),r=this.widths[this.widths.length-1],l=[],t=s=0;0<=i?s<i:s>i;t=0<=i?++s:--s)l.push(this.widths.push(r));return l},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),FW=[].slice,S0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,s,a,l,c,f,d;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,s=(a=new zd(t.read(i))).readShort(),c=a.readShort(),d=a.readShort(),l=a.readShort(),f=a.readShort(),this.cache[e]=s===-1?new I0e(a,c,d,l,f):new C0e(a,s,c,d,l,f),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,s,a,l;for(s=[],o=[],a=0,l=t.length;a<l;a++)i=e[t[a]],o.push(s.length),i&&(s=s.concat(i.encode(r)));return o.push(s.length),{table:s,offsets:o}},n})(),C0e=(function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),I0e=(function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new zd(FW.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),T0e=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return Hc(n,Ju),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,s=0;s<r.length;++s)if(r[s]=i,o<t.length&&t[o]==s){++o,r[s]=i;var a=this.offsets[s],l=this.offsets[s+1]-a;l>0&&(i+=l)}for(var c=new Array(4*r.length),f=0;f<r.length;++f)c[4*f+3]=255&r[f],c[4*f+2]=(65280&r[f])>>8,c[4*f+1]=(16711680&r[f])>>16,c[4*f]=(4278190080&r[f])>>24;return c},n})(),D0e=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))r=l[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,l,c,f,d,y,p,_,w,b,S;for(i in r=OW.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),p={0:0},S=r.charMap)p[(l=S[i]).old]=l.new;for(_ in y=r.maxGlyphID,s)_ in p||(p[_]=y++);return f=(function(T){var A,N;for(A in N={},T)N[T[A]]=A;return N})(p),d=Object.keys(f).sort(function(T,A){return T-A}),w=(function(){var T,A,N;for(N=[],T=0,A=d.length;T<A;T++)a=d[T],N.push(f[a]);return N})(),o=this.font.glyf.encode(s,w,p),c=this.font.loca.encode(o.offsets,w),b={cmap:this.font.cmap.raw(),glyf:o.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},n})();Ut.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+(function(){var a,l,c;for(c=[],a=0,l=t.length;a<l;a++)r=t[a],c.push(e.convert(r));return c})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e})();function A0e(n,e){n&1&&(yr(),Qe(0,"svg",7),Kt(1,"path",8),it())}function R0e(n,e){n&1&&Kt(0,"div",9)}function M0e(n,e){if(n&1){let t=Di();Qe(0,"div",10)(1,"div",11),St(2,"Select Format"),it(),Qe(3,"button",12),yn("click",function(){tr(t);let i=Dn();return nr(i.export("png"))}),Qe(4,"div",13)(5,"span",14),yr(),Qe(6,"svg",15),Kt(7,"path",16),it()(),po(),Qe(8,"div",17)(9,"span"),St(10,"Image"),it(),Qe(11,"span",18),St(12,"High Res PNG"),it()()()(),Qe(13,"button",19),yn("click",function(){tr(t);let i=Dn();return nr(i.export("pdf"))}),Qe(14,"div",13)(15,"span",20),yr(),Qe(16,"svg",15),Kt(17,"path",21)(18,"path",22),it()(),po(),Qe(19,"div",17)(20,"span"),St(21,"Document"),it(),Qe(22,"span",18),St(23,"Portable PDF"),it()()()()()}}var $C=class n{isExporting=!1;showMenu=Gn(!1);_el=Me(ni);_mapService=Me(Eo);get map(){return this._mapService.map()}clickout(e){this._el.nativeElement.contains(e.target)||this.showMenu.set(!1)}toggleMenu(){this.showMenu.update(e=>!e)}export(e){this.map&&(this.isExporting=!0,this.showMenu.set(!1),setTimeout(()=>{this.map?.once("rendercomplete",()=>{let t=document.createElement("canvas"),r=this.map?.getSize();if(!r)return;t.width=r[0],t.height=r[1];let i=t.getContext("2d");document.querySelectorAll(".ol-layer canvas").forEach(a=>{if(a.width>0){let l=a.parentNode.style.opacity;i.globalAlpha=l===""?1:Number(l);let f=a.style.transform.match(/^matrix\(([^\(]*)\)$/)?.[1].split(",").map(Number);f&&i.setTransform(f[0],f[1],f[2],f[3],f[4],f[5]),i.drawImage(a,0,0)}});let s=t.toDataURL("image/png");e==="png"?this.downloadPNG(s):this.downloadPDF(s,t.width,t.height),this.isExporting=!1}),this.map?.renderSync()},100))}downloadPNG(e){let t=document.createElement("a");t.href=e,t.download=`map_${Date.now()}.png`,t.click()}downloadPDF(e,t,r){let i=t>r?"l":"p",o=new Ut(i,"px",[t,r]);o.addImage(e,"PNG",0,0,t,r),o.save(`map_${Date.now()}.pdf`)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-map-print"]],hostBindings:function(t,r){t&1&&yn("click",function(o){return r.clickout(o)},Mh)},decls:8,vars:4,consts:[[1,"relative","group",3,"clickOutside"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["class","w-5 h-5 text-white transition-transform group-hover/btn:rotate-6","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin",4,"ngIf"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"],["class","absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.1)] border border-gray-100 flex flex-col overflow-hidden min-w-[180px] p-1.5 ring-1 ring-black/5 z-50",4,"ngIf"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","none","viewBox","0 0 24 24",1,"w-5","h-5","text-white","transition-transform","group-hover/btn:rotate-6"],["stroke","currentColor","stroke-linejoin","round","stroke-width","2","d","M16.444 18H19a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h2.556M17 11V5a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v6h10ZM7 15h10v4a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-4Z"],[1,"w-5","h-5","border-2","border-white/30","border-t-white","rounded-full","animate-spin"],[1,"absolute","top-full","left-1/2","-translate-x-1/2","mt-4","bg-white/95","backdrop-blur-xl","rounded-2xl","shadow-[0_10px_40px_rgba(0,0,0,0.1)]","border","border-gray-100","flex","flex-col","overflow-hidden","min-w-[180px]","p-1.5","ring-1","ring-black/5","z-50"],[1,"px-3","py-1.5","mb-1","text-[9px]","uppercase","tracking-wider","font-bold","text-slate-400"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-violet-50","text-xs","font-semibold","text-slate-700","transition-all","group/item",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","justify-center","w-8","h-8","bg-violet-100","text-violet-600","rounded-lg","shadow-sm","group-hover/item:scale-110","transition-transform"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"flex","flex-col","items-start"],[1,"text-[9px]","text-slate-400","font-normal"],[1,"flex","items-center","justify-between","px-3","py-2.5","rounded-xl","hover:bg-rose-50","text-xs","font-semibold","text-slate-700","transition-all","group/item",3,"click"],[1,"flex","items-center","justify-center","w-8","h-8","bg-rose-100","text-rose-600","rounded-lg","shadow-sm","group-hover/item:scale-110","transition-transform"],["d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 9h1v1H9V9z","stroke-width","2"]],template:function(t,r){t&1&&(Qe(0,"div",0),yn("clickOutside",function(){return r.showMenu.set(!1)}),Qe(1,"button",1),yn("click",function(){return r.toggleMenu()}),Ji(2,A0e,2,0,"svg",2)(3,R0e,1,0,"div",3),it(),Qe(4,"div",4),St(5," PRINT MAP "),Kt(6,"div",5),it(),Ji(7,M0e,24,0,"div",6),it()),t&2&&(Xt(),Cr("ngClass",r.isExporting?"bg-rose-500 text-white animate-pulse":"bg-gradient-to-tr from-violet-600 to-indigo-500 text-white hover:scale-105 shadow-violet-200"),Xt(),Cr("ngIf",!r.isExporting),Xt(),Cr("ngIf",r.isExporting),Xt(4),Cr("ngIf",r.showMenu()))},dependencies:[zi,Jp,dl],encapsulation:2})};var iO;try{iO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{iO=!1}var Pg=(()=>{class n{_platformId=Me(Zp);isBrowser=this._platformId?Rj(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||iO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var oO;function N0e(){if(oO==null){let n=typeof document<"u"?document.head:null;oO=!!(n&&(n.createShadowRoot||n.attachShadow))}return oO}function YC(n){if(N0e()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Vd(n){return n.composedPath?n.composedPath()[0]:n.target}function sO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var XC=new WeakMap,cx=(()=>{class n{_appRef;_injector=Me(yi);_environmentInjector=Me(Ii);load(t){let r=this._appRef=this._appRef||this._injector.get(Xl),i=XC.get(r);i||(i={loaders:new Set,refs:[]},XC.set(r,i),r.onDestroy(()=>{XC.get(r)?.refs.forEach(o=>o.destroy()),XC.delete(r)})),i.loaders.has(t)||(i.loaders.add(t),i.refs.push(C2(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ao(n){return n==null?"":typeof n=="string"?n:`${n}px`}function aO(n){return Array.isArray(n)?n:[n]}function lO(n,e=0){return P0e(n)?Number(n):arguments.length===2?e:0}function P0e(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Qu(n){return n instanceof ni?n.nativeElement:n}var L0e=new Bt("cdk-dir-doc",{providedIn:"root",factory:k0e});function k0e(){return Me(_r)}var O0e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function F0e(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?O0e.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var ZC=(()=>{class n{get value(){return this.valueSignal()}valueSignal=Gn("ltr");change=new li;constructor(){let t=Me(L0e,{optional:!0});if(t){let r=t.body?t.body.dir:null,i=t.documentElement?t.documentElement.dir:null;this.valueSignal.set(F0e(r||i||"ltr"))}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Lg;function BW(){if(Lg==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Lg=!1,Lg;if("scrollBehavior"in document.documentElement.style)Lg=!0;else{let n=Element.prototype.scrollTo;n?Lg=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Lg=!1}}return Lg}var B0e=20,KC=(()=>{class n{_ngZone=Me(rr);_platform=Me(Pg);_renderer=Me(ds).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Jt;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=B0e){return this._platform.isBrowser?new Bn(r=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let i=t>0?this._scrolled.pipe(hE(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):cn()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Fs(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_scrollableContainsElement(t,r){let i=Qu(r),o=t.getElementRef().nativeElement;do if(i==o)return!0;while(i=i.parentElement);return!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j0e=20,kg=(()=>{class n{_platform=Me(Pg);_listeners;_viewportSize;_change=new Jt;_document=Me(_r);constructor(){let t=Me(rr),r=Me(ds).createRenderer(null,null);t.runOutsideAngular(()=>{if(this._platform.isBrowser){let i=o=>this._change.next(o);this._listeners=[r.listen("window","resize",i),r.listen("window","orientationchange",i)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(t=>t()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect(),s=-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,a=-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0;return{top:s,left:a}}change(t=j0e){return t>0?this._change.pipe(hE(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hx=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},fx=class extends hx{component;viewContainerRef;injector;projectableNodes;constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.projectableNodes=i}},JC=class extends hx{templateRef;viewContainerRef;context;injector;constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},uO=class extends hx{element;constructor(e){super(),this.element=e instanceof ni?e.nativeElement:e}},cO=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof fx)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof JC)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof uO)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},QC=class extends cO{outletElement;_appRef;_defaultInjector;constructor(e,t,r){super(),this.outletElement=e,this._appRef=t,this._defaultInjector=r}attachComponentPortal(e){let t;if(e.viewContainerRef){let r=e.injector||e.viewContainerRef.injector,i=r.get(Rh,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:r,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let r=this._appRef,i=e.injector||this._defaultInjector||yi.NULL,o=i.get(Ii,r.injector);t=C2(e.component,{elementInjector:i,environmentInjector:o,projectableNodes:e.projectableNodes||void 0}),r.attachView(t.hostView),this.setDisposeFn(()=>{r.viewCount>0&&r.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);i!==-1&&t.remove(i)}),this._attachedPortal=e,r}attachDomPortal=e=>{let t=e.element;t.parentNode;let r=this.outletElement.ownerDocument.createComment("dom-portal");t.parentNode.insertBefore(r,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(t,r)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var hO={},jW=(()=>{class n{_appId=Me(i0);getId(t){return this._appId!=="ng"&&(t+=this._appId),hO.hasOwnProperty(t)||(hO[t]=0),`${t}${hO[t]++}`}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UW=BW();function $W(n){return new eI(n.get(kg),n.get(_r))}var eI=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ao(-this._previousScrollPosition.left),e.style.top=ao(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,r=e.style,i=t.style,o=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),UW&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),UW&&(r.scrollBehavior=o,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.documentElement,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}};function YW(n,e){return new tI(n.get(KC),n.get(rr),n.get(kg),e)}var tI=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Fs(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}};var dx=class{enable(){}disable(){}attach(){}};function fO(n,e){return e.some(t=>{let r=n.bottom<t.top,i=n.top>t.bottom,o=n.right<t.left,s=n.left>t.right;return r||i||o||s})}function GW(n,e){return e.some(t=>{let r=n.top<t.top,i=n.bottom>t.bottom,o=n.left<t.left,s=n.right>t.right;return r||i||o||s})}function XW(n,e){return new nI(n.get(KC),n.get(kg),n.get(rr),e)}var nI=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();fO(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ZW=(()=>{class n{_injector=Me(yi);constructor(){}noop=()=>new dx;close=t=>YW(this._injector,t);block=()=>$W(this._injector);reposition=t=>XW(this._injector,t);static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rI=class{positionStrategy;scrollStrategy=new dx;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";disableAnimations;width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let r of t)e[r]!==void 0&&(this[r]=e[r])}}};var iI=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var KW=(()=>{class n{_attachedOverlays=[];_document=Me(_r);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JW=(()=>{class n extends KW{_ngZone=Me(rr);_renderer=Me(ds).createRenderer(null,null);_cleanupKeydown;add(t){super.add(t),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=t=>{let r=this._attachedOverlays;for(let i=r.length-1;i>-1;i--)if(r[i]._keydownEvents.observers.length>0){this._ngZone.run(()=>r[i]._keydownEvents.next(t));break}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QW=(()=>{class n extends KW{_platform=Me(Pg);_ngZone=Me(rr);_renderer=Me(ds).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(t){if(super.add(t),!this._isAttached){let r=this._document.body,i={capture:!0},o=this._renderer;this._cleanups=this._ngZone.runOutsideAngular(()=>[o.listen(r,"pointerdown",this._pointerDownListener,i),o.listen(r,"click",this._clickListener,i),o.listen(r,"auxclick",this._clickListener,i),o.listen(r,"contextmenu",this._clickListener,i)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(t=>t()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=t=>{this._pointerDownEventTarget=Vd(t)};_clickListener=t=>{let r=Vd(t),i=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:r;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(zW(a.overlayElement,r)||zW(a.overlayElement,i))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(t)):l.next(t)}};static \u0275fac=(()=>{let t;return function(i){return(t||(t=Xp(n)))(i||n)}})();static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zW(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}var e$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(r,i){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return n})(),t$=(()=>{class n{_platform=Me(Pg);_containerElement;_document=Me(_r);_styleLoader=Me(cx);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||sO()){let i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}let r=this._document.createElement("div");r.classList.add(t),sO()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}_loadStyles(){this._styleLoader.load(e$)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dO=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(e,t,r,i){this._renderer=t,this._ngZone=r,this.element=e.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=t.listen(this.element,"click",i)}detach(){this._ngZone.runOutsideAngular(()=>{let e=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(e,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),e.style.pointerEvents="none",e.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},oI=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Jt;_attachments=new Jt;_detachments=new Jt;_positionStrategy;_scrollStrategy;_locationChanges=dr.EMPTY;_backdropRef=null;_detachContentMutationObserver;_detachContentAfterRenderRef;_previousHostParent;_keydownEvents=new Jt;_outsidePointerEvents=new Jt;_afterNextRenderRef;constructor(e,t,r,i,o,s,a,l,c,f=!1,d,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=f,this._injector=d,this._renderer=y,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Jf(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._completeDetachContent(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._completeDetachContent(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,e&&this._detachments.next(),this._detachments.complete(),this._completeDetachContent()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=dt(dt({},this._config),e),this._updateElementSize()}setDirection(e){this._config=tn(dt({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=ao(this._config.width),e.height=ao(this._config.height),e.minWidth=ao(this._config.minWidth),e.minHeight=ao(this._config.minHeight),e.maxWidth=ao(this._config.maxWidth),e.maxHeight=ao(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new dO(this._document,this._renderer,this._ngZone,t=>{this._backdropClick.next(t)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(e))}):this._backdropRef.element.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(e,t,r){let i=aO(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenEmpty(){let e=!1;try{this._detachContentAfterRenderRef=Jf(()=>{e=!0,this._detachContent()},{injector:this._injector})}catch(t){if(e)throw t;this._detachContent()}globalThis.MutationObserver&&this._pane&&(this._detachContentMutationObserver||=new globalThis.MutationObserver(()=>{this._detachContent()}),this._detachContentMutationObserver.observe(this._pane,{childList:!0}))}_detachContent(){(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),this._completeDetachContent())}_completeDetachContent(){this._detachContentAfterRenderRef?.destroy(),this._detachContentAfterRenderRef=void 0,this._detachContentMutationObserver?.disconnect()}_disposeScrollStrategy(){let e=this._scrollStrategy;e?.disable(),e?.detach?.()}},VW="cdk-overlay-connected-position-bounding-box",U0e=/([A-Za-z%]+)$/;function n$(n,e){return new sI(e,n.get(kg),n.get(_r),n.get(Pg),n.get(t$))}var sI=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Jt;_resizeSubscription=dr.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(VW),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,i,a),c=this._getOverlayPoint(l,t,a),f=this._getOverlayFit(c,t,r,a);if(f.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(f,c,r)){o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<f.visibleArea)&&(s={overlayFit:f,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(let c of o){let f=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);f>l&&(l=f,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Og(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(VW),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i;if(r.originX=="center")i=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;i=r.originX=="start"?s:a}t.left<0&&(i-=t.left);let o;return r.originY=="center"?o=e.top+e.height/2:o=r.originY=="top"?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i;r.overlayX=="center"?i=-t.width/2:r.overlayX==="start"?i=this._isRtl()?-t.width:0:i=this._isRtl()?0:-t.width;let o;return r.overlayY=="center"?o=-t.height/2:o=r.overlayY=="top"?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){let o=qW(t),{x:s,y:a}=e,l=this._getOffset(i,"x"),c=this._getOffset(i,"y");l&&(s+=l),c&&(a+=c);let f=0-s,d=s+o.width-r.width,y=0-a,p=a+o.height-r.height,_=this._subtractOverflows(o.width,f,d),w=this._subtractOverflows(o.height,y,p),b=_*w;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:w===o.height,fitsInViewportHorizontally:_==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){let i=r.bottom-t.y,o=r.right-t.x,s=HW(this._overlayRef.getConfig().minHeight),a=HW(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||s!=null&&s<=i,c=e.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let i=qW(t),o=this._viewportRect,s=Math.max(e.x+i.width-o.width,0),a=Math.max(e.y+i.height-o.height,0),l=Math.max(o.top-r.top-e.y,0),c=Math.max(o.left-r.left-e.x,0),f=0,d=0;return i.width<=o.width?f=c||-s:f=e.x<this._viewportMargin?o.left-r.left-e.x:0,i.height<=o.height?d=l||-a:d=e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:f,y:d},{x:e.x+f,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!G0e(this._lastScrollVisibility,r)){let i=new iI(e,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=e.overlayY;e.overlayX==="center"?r="center":this._isRtl()?r=e.overlayX==="start"?"right":"left":r=e.overlayX==="start"?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){let r=this._viewportRect,i=this._isRtl(),o,s,a;if(t.overlayY==="top")s=e.y,o=r.height-s+this._viewportMargin;else if(t.overlayY==="bottom")a=r.height-e.y+this._viewportMargin*2,o=r.height-a+this._viewportMargin;else{let p=Math.min(r.bottom-e.y+r.top,e.y),_=this._lastBoundingBoxSize.height;o=p*2,s=e.y-p,o>_&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-_/2)}let l=t.overlayX==="start"&&!i||t.overlayX==="end"&&i,c=t.overlayX==="end"&&!i||t.overlayX==="start"&&i,f,d,y;if(c)y=r.width-e.x+this._viewportMargin*2,f=e.x-this._viewportMargin;else if(l)d=e.x,f=r.right-e.x;else{let p=Math.min(r.right-e.x+r.left,e.x),_=this._lastBoundingBoxSize.width;f=p*2,d=e.x-p,f>_&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-_/2)}return{top:s,left:d,bottom:a,right:y,width:f,height:o}}_setBoundingBoxStyles(e,t){let r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=ao(r.height),i.top=ao(r.top),i.bottom=ao(r.bottom),i.width=ao(r.width),i.left=ao(r.left),i.right=ao(r.right),t.overlayX==="center"?i.alignItems="center":i.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?i.justifyContent="center":i.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",o&&(i.maxHeight=ao(o)),s&&(i.maxWidth=ao(s))}this._lastBoundingBoxSize=r,Og(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Og(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Og(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let f=this._viewportRuler.getViewportScrollPosition();Og(r,this._getExactOverlayY(t,e,f)),Og(r,this._getExactOverlayX(t,e,f))}else r.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=ao(s.maxHeight):o&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=ao(s.maxWidth):o&&(r.maxWidth="")),Og(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(o.y+this._overlayRect.height)}px`}else i.top=ao(o.y);return i}_getExactOverlayX(e,t,r){let i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(o.x+this._overlayRect.width)}px`}else i.left=ao(o.x);return i}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GW(e,r),isOriginOutsideView:fO(e,r),isOverlayClipped:GW(t,r),isOverlayOutsideView:fO(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&aO(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ni)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}};function Og(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function HW(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(U0e);return!t||t==="px"?parseFloat(e):null}return n||null}function qW(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function G0e(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var WW="cdk-global-overlay-wrapper";function r$(n){return new aI}var aI=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(WW),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:s,maxHeight:a}=r,l=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),f=this._xPosition,d=this._xOffset,y=this._overlayRef.getConfig().direction==="rtl",p="",_="",w="";l?w="flex-start":f==="center"?(w="center",y?_=d:p=d):y?f==="left"||f==="end"?(w="flex-end",p=d):(f==="right"||f==="start")&&(w="flex-start",_=d):f==="left"||f==="start"?(w="flex-start",p=d):(f==="right"||f==="end")&&(w="flex-end",_=d),e.position=this._cssPosition,e.marginLeft=l?"0":p,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":_,t.justifyContent=w,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(WW),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},i$=(()=>{class n{_injector=Me(yi);constructor(){}global(){return r$()}flexibleConnectedTo(t){return n$(this._injector,t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function o$(n,e){n.get(cx).load(e$);let t=n.get(t$),r=n.get(_r),i=n.get(jW),o=n.get(Xl),s=n.get(ZC),a=r.createElement("div"),l=r.createElement("div");l.id=i.getId("cdk-overlay-"),l.classList.add("cdk-overlay-pane"),a.appendChild(l),t.getContainerElement().appendChild(a);let c=new QC(l,o,n),f=new rI(e),d=n.get(o0,null,{optional:!0})||n.get(ds).createRenderer(null,null);return f.direction=f.direction||s.value,new oI(c,a,l,f,n.get(rr),n.get(JW),r,n.get(id),n.get(QW),e?.disableAnimations??n.get(RR,null,{optional:!0})==="NoopAnimations",n.get(Ii),d)}var pO=(()=>{class n{scrollStrategies=Me(ZW);_positionBuilder=Me(i$);_injector=Me(yi);constructor(){}create(t){return o$(this._injector,t)}position(){return this._positionBuilder}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ns=63710088e-1,a$={centimeters:ns*100,centimetres:ns*100,degrees:360/(2*Math.PI),feet:ns*3.28084,inches:ns*39.37,kilometers:ns/1e3,kilometres:ns/1e3,meters:ns,metres:ns,miles:ns/1609.344,millimeters:ns*1e3,millimetres:ns*1e3,nauticalmiles:ns/1852,radians:1,yards:ns*1.0936};function Fg(n,e,t={}){let r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function ec(n,e,t={}){if(!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s$(n[0])||!s$(n[1]))throw new Error("coordinates must contain numbers");return Fg({type:"Point",coordinates:n},e,t)}function l$(n,e,t={}){if(n.length<2)throw new Error("coordinates must be an array of two or more positions");return Fg({type:"LineString",coordinates:n},e,t)}function lI(n,e={}){let t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function uI(n,e="kilometers"){let t=a$[e];if(!t)throw new Error(e+" units is invalid");return n*t}function cI(n,e="kilometers"){let t=a$[e];if(!t)throw new Error(e+" units is invalid");return n/t}function px(n){return n%(2*Math.PI)*180/Math.PI}function Xa(n){return n%360*Math.PI/180}function s$(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Hd(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function u$(n){return n.type==="Feature"?n.geometry:n}function gO(n,e,t={}){if(t.final===!0)return z0e(n,e);let r=Hd(n),i=Hd(e),o=Xa(r[0]),s=Xa(i[0]),a=Xa(r[1]),l=Xa(i[1]),c=Math.sin(s-o)*Math.cos(l),f=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-o);return px(Math.atan2(c,f))}function z0e(n,e){let t=gO(e,n);return t=(t+180)%360,t}function c$(n,e,t,r={}){let i=Hd(n),o=Xa(i[0]),s=Xa(i[1]),a=Xa(t),l=cI(e,r.units),c=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a)),f=o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(c)),d=px(f),y=px(c);return i[2]!==void 0?ec([d,y,i[2]],r.properties):ec([d,y],r.properties)}function hI(n,e,t={}){var r=Hd(n),i=Hd(e),o=Xa(i[1]-r[1]),s=Xa(i[0]-r[0]),a=Xa(r[1]),l=Xa(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return uI(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),t.units)}function mO(n,e,t={}){let i=u$(n).coordinates,o=0;for(let s=0;s<i.length&&!(e>=o&&s===i.length-1);s++)if(o>=e){let a=e-o;if(a){let l=gO(i[s],i[s-1])-180;return c$(i[s],a,l,t)}else return ec(i[s])}else o+=hI(i[s],i[s+1],t);return ec(i[i.length-1])}function jy(n,e,t){if(n!==null)for(var r,i,o,s,a,l,c,f=0,d=0,y,p=n.type,_=p==="FeatureCollection",w=p==="Feature",b=_?n.features.length:1,S=0;S<b;S++){c=_?n.features[S].geometry:w?n.geometry:n,y=c?c.type==="GeometryCollection":!1,a=y?c.geometries.length:1;for(var T=0;T<a;T++){var A=0,N=0;if(s=y?c.geometries[T]:c,s!==null){l=s.coordinates;var O=s.type;switch(f=t&&(O==="Polygon"||O==="MultiPolygon")?1:0,O){case null:break;case"Point":if(e(l,d,S,A,N)===!1)return!1;d++,A++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],d,S,A,N)===!1)return!1;d++,O==="MultiPoint"&&A++}O==="LineString"&&A++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-f;i++){if(e(l[r][i],d,S,A,N)===!1)return!1;d++}O==="MultiLineString"&&A++,O==="Polygon"&&N++}O==="Polygon"&&A++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(N=0,i=0;i<l[r].length;i++){for(o=0;o<l[r][i].length-f;o++){if(e(l[r][i][o],d,S,A,N)===!1)return!1;d++}N++}A++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(jy(s.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yO(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function gx(n,e){var t,r,i,o,s,a,l,c,f,d,y=0,p=n.type==="FeatureCollection",_=n.type==="Feature",w=p?n.features.length:1;for(t=0;t<w;t++){for(a=p?n.features[t].geometry:_?n.geometry:n,c=p?n.features[t].properties:_?n.properties:{},f=p?n.features[t].bbox:_?n.bbox:void 0,d=p?n.features[t].id:_?n.id:void 0,l=a?a.type==="GeometryCollection":!1,s=l?a.geometries.length:1,i=0;i<s;i++){if(o=l?a.geometries[i]:a,o===null){if(e(null,y,c,f,d)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,y,c,f,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(e(o.geometries[r],y,c,f,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function h$(n,e,t){var r=t;return gx(n,function(i,o,s,a,l){o===0&&t===void 0?r=i:r=e(r,i,o,s,a,l)}),r}function V0e(n,e){gx(n,function(t,r,i,o,s){var a=t===null?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Fg(t,i,{bbox:o,id:s}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<t.coordinates.length;c++){var f=t.coordinates[c],d={type:l,coordinates:f};if(e(Fg(d,i),r,c)===!1)return!1}})}function H0e(n,e){V0e(n,function(t,r,i){var o=0;if(t.geometry){var s=t.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var a,l=0,c=0,f=0;if(jy(t,function(d,y,p,_,w){if(a===void 0||r>l||_>c||w>f){a=d,l=r,c=_,f=w,o=0;return}var b=l$([a,d],t.properties);if(e(b,r,i,w,o)===!1)return!1;o++,a=d})===!1)return!1}}})}function f$(n,e,t){var r=t,i=!1;return H0e(n,function(o,s,a,l,c){i===!1&&t===void 0?r=o:r=e(r,o,s,a,l,c),i=!0}),r}function vO(n){return h$(n,(e,t)=>e+q0e(t),0)}function q0e(n){let e=0,t;switch(n.type){case"Polygon":return d$(n.coordinates);case"MultiPolygon":for(t=0;t<n.coordinates.length;t++)e+=d$(n.coordinates[t]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function d$(n){let e=0;if(n&&n.length>0){e+=Math.abs(p$(n[0]));for(let t=1;t<n.length;t++)e-=Math.abs(p$(n[t]))}return e}var W0e=ns*ns/2,_O=Math.PI/180;function p$(n){let e=n.length-1;if(e<=2)return 0;let t=0,r=0;for(;r<e;){let i=n[r],o=n[r+1===e?0:r+1],s=n[r+2>=e?(r+2)%e:r+2],a=i[0]*_O,l=o[1]*_O,c=s[0]*_O;t+=(c-a)*Math.sin(l),r++}return t*W0e}function mx(n,e={}){if(n.bbox!=null&&e.recompute!==!0)return n.bbox;let t=[1/0,1/0,-1/0,-1/0];return jy(n,r=>{t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}function g$(n,e={}){let t=mx(n),r=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return ec([r,i],e.properties,e)}var H$=Ol(m$(),1);function Za(){return new dI}function dI(){this.reset()}dI.prototype={constructor:dI,reset:function(){this.s=this.t=0},add:function(n){y$(fI,n,this.t),y$(this,fI.s,this.s),this.s?this.t+=fI.t:this.s=fI.t},valueOf:function(){return this.s}};var fI=new dI;function y$(n,e,t){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}var vn=1e-6;var Xn=Math.PI,Ho=Xn/2,pI=Xn/4,ws=Xn*2,_a=180/Xn,Pi=Xn/180,xr=Math.abs,tc=Math.atan,rs=Math.atan2,pn=Math.cos;var gI=Math.exp;var yx=Math.log;var gn=Math.sin;var bo=Math.sqrt,_x=Math.tan;function mI(n){return n>1?0:n<-1?Xn:Math.acos(n)}function qo(n){return n>1?Ho:n<-1?-Ho:Math.asin(n)}function va(){}function yI(n,e){n&&v$.hasOwnProperty(n.type)&&v$[n.type](n,e)}var _$={Feature:function(n,e){yI(n.geometry,e)},FeatureCollection:function(n,e){for(var t=n.features,r=-1,i=t.length;++r<i;)yI(t[r].geometry,e)}},v$={Sphere:function(n,e){e.sphere()},Point:function(n,e){n=n.coordinates,e.point(n[0],n[1],n[2])},MultiPoint:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)n=t[r],e.point(n[0],n[1],n[2])},LineString:function(n,e){EO(n.coordinates,e,0)},MultiLineString:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)EO(t[r],e,0)},Polygon:function(n,e){x$(n.coordinates,e)},MultiPolygon:function(n,e){for(var t=n.coordinates,r=-1,i=t.length;++r<i;)x$(t[r],e)},GeometryCollection:function(n,e){for(var t=n.geometries,r=-1,i=t.length;++r<i;)yI(t[r],e)}};function EO(n,e,t){var r=-1,i=n.length-t,o;for(e.lineStart();++r<i;)o=n[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function x$(n,e){var t=-1,r=n.length;for(e.polygonStart();++t<r;)EO(n[t],e,1);e.polygonEnd()}function qd(n,e){n&&_$.hasOwnProperty(n.type)?_$[n.type](n,e):yI(n,e)}var $0e=Za(),got=Za();function Uy(n){return[rs(n[1],n[0]),qo(n[2])]}function nc(n){var e=n[0],t=n[1],r=pn(t);return[r*pn(e),r*gn(e),gn(t)]}function vx(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function Bg(n,e){return[n[1]*e[2]-n[2]*e[1],n[2]*e[0]-n[0]*e[2],n[0]*e[1]-n[1]*e[0]]}function _I(n,e){n[0]+=e[0],n[1]+=e[1],n[2]+=e[2]}function xx(n,e){return[n[0]*e,n[1]*e,n[2]*e]}function Gy(n){var e=bo(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=e,n[1]/=e,n[2]/=e}var Cot=Za();function vI(n,e){function t(r,i){return r=n(r,i),e(r[0],r[1])}return n.invert&&e.invert&&(t.invert=function(r,i){return r=e.invert(r,i),r&&n.invert(r[0],r[1])}),t}function bO(n,e){return[n>Xn?n-ws:n<-Xn?n+ws:n,e]}bO.invert=bO;function SO(n,e,t){return(n%=ws)?e||t?vI(E$(n),b$(e,t)):E$(n):e||t?b$(e,t):bO}function w$(n){return function(e,t){return e+=n,[e>Xn?e-ws:e<-Xn?e+ws:e,t]}}function E$(n){var e=w$(n);return e.invert=w$(-n),e}function b$(n,e){var t=pn(n),r=gn(n),i=pn(e),o=gn(e);function s(a,l){var c=pn(l),f=pn(a)*c,d=gn(a)*c,y=gn(l),p=y*t+f*r;return[rs(d*i-p*o,f*t-y*r),qo(p*i+d*o)]}return s.invert=function(a,l){var c=pn(l),f=pn(a)*c,d=gn(a)*c,y=gn(l),p=y*i-d*o;return[rs(d*i+y*o,f*t+p*r),qo(p*t-f*r)]},s}function C$(n,e,t,r,i,o){if(t){var s=pn(e),a=gn(e),l=r*t;i==null?(i=e+r*ws,o=e-l/2):(i=S$(s,i),o=S$(s,o),(r>0?i<o:i>o)&&(i+=r*ws));for(var c,f=i;r>0?f>o:f<o;f-=l)c=Uy([s,-a*pn(f),-a*gn(f)]),n.point(c[0],c[1])}}function S$(n,e){e=nc(e),e[0]-=n,Gy(e);var t=mI(-e[1]);return((-e[2]<0?-t:t)+ws-vn)%ws}function xI(){var n=[],e;return{point:function(t,r){e.push([t,r])},lineStart:function(){n.push(e=[])},lineEnd:va,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var t=n;return n=[],e=null,t}}}function I$(n,e,t,r,i,o){var s=n[0],a=n[1],l=e[0],c=e[1],f=0,d=1,y=l-s,p=c-a,_;if(_=t-s,!(!y&&_>0)){if(_/=y,y<0){if(_<f)return;_<d&&(d=_)}else if(y>0){if(_>d)return;_>f&&(f=_)}if(_=i-s,!(!y&&_<0)){if(_/=y,y<0){if(_>d)return;_>f&&(f=_)}else if(y>0){if(_<f)return;_<d&&(d=_)}if(_=r-a,!(!p&&_>0)){if(_/=p,p<0){if(_<f)return;_<d&&(d=_)}else if(p>0){if(_>d)return;_>f&&(f=_)}if(_=o-a,!(!p&&_<0)){if(_/=p,p<0){if(_>d)return;_>f&&(f=_)}else if(p>0){if(_<f)return;_<d&&(d=_)}return f>0&&(n[0]=s+f*y,n[1]=a+f*p),d<1&&(e[0]=s+d*y,e[1]=a+d*p),!0}}}}}function zy(n,e){return xr(n[0]-e[0])<vn&&xr(n[1]-e[1])<vn}function wI(n,e,t,r){this.x=n,this.z=e,this.o=t,this.e=r,this.v=!1,this.n=this.p=null}function EI(n,e,t,r,i){var o=[],s=[],a,l;if(n.forEach(function(_){if(!((w=_.length-1)<=0)){var w,b=_[0],S=_[w],T;if(zy(b,S)){for(i.lineStart(),a=0;a<w;++a)i.point((b=_[a])[0],b[1]);i.lineEnd();return}o.push(T=new wI(b,_,null,!0)),s.push(T.o=new wI(b,null,T,!1)),o.push(T=new wI(S,_,null,!1)),s.push(T.o=new wI(S,null,T,!0))}}),!!o.length){for(s.sort(e),T$(o),T$(s),a=0,l=s.length;a<l;++a)s[a].e=t=!t;for(var c=o[0],f,d;;){for(var y=c,p=!0;y.v;)if((y=y.n)===c)return;f=y.z,i.lineStart();do{if(y.v=y.o.v=!0,y.e){if(p)for(a=0,l=f.length;a<l;++a)i.point((d=f[a])[0],d[1]);else r(y.x,y.n.x,1,i);y=y.n}else{if(p)for(f=y.p.z,a=f.length-1;a>=0;--a)i.point((d=f[a])[0],d[1]);else r(y.x,y.p.x,-1,i);y=y.p}y=y.o,f=y.z,p=!p}while(!y.v);i.lineEnd()}}}function T$(n){if(e=n.length){for(var e,t=0,r=n[0],i;++t<e;)r.n=i=n[t],i.p=r,r=i;r.n=i=n[0],i.p=r}}function Wd(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function CO(n){return n.length===1&&(n=Y0e(n)),{left:function(e,t,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r},right:function(e,t,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}function Y0e(n){return function(e,t){return Wd(n(e),t)}}var D$=CO(Wd),X0e=D$.right,Z0e=D$.left;var A$=Array.prototype,J0e=A$.slice,Q0e=A$.map;var yst=Math.sqrt(50),_st=Math.sqrt(10),vst=Math.sqrt(2);function wx(n){for(var e=n.length,t,r=-1,i=0,o,s;++r<e;)i+=n[r].length;for(o=new Array(i);--e>=0;)for(s=n[e],t=s.length;--t>=0;)o[--i]=s[t];return o}var Ex=1e9,SI=-Ex;function IO(n,e,t,r){function i(c,f){return n<=c&&c<=t&&e<=f&&f<=r}function o(c,f,d,y){var p=0,_=0;if(c==null||(p=s(c,d))!==(_=s(f,d))||l(c,f)<0^d>0)do y.point(p===0||p===3?n:t,p>1?r:e);while((p=(p+d+4)%4)!==_);else y.point(f[0],f[1])}function s(c,f){return xr(c[0]-n)<vn?f>0?0:3:xr(c[0]-t)<vn?f>0?2:1:xr(c[1]-e)<vn?f>0?1:0:f>0?3:2}function a(c,f){return l(c.x,f.x)}function l(c,f){var d=s(c,1),y=s(f,1);return d!==y?d-y:d===0?f[1]-c[1]:d===1?c[0]-f[0]:d===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,d=xI(),y,p,_,w,b,S,T,A,N,O,W,X={point:Y,lineStart:v,lineEnd:I,polygonStart:V,polygonEnd:B};function Y(j,Q){i(j,Q)&&f.point(j,Q)}function $(){for(var j=0,Q=0,Z=p.length;Q<Z;++Q)for(var q=p[Q],K=1,oe=q.length,_e=q[0],F,ee,ce=_e[0],pe=_e[1];K<oe;++K)F=ce,ee=pe,_e=q[K],ce=_e[0],pe=_e[1],ee<=r?pe>r&&(ce-F)*(r-ee)>(pe-ee)*(n-F)&&++j:pe<=r&&(ce-F)*(r-ee)<(pe-ee)*(n-F)&&--j;return j}function V(){f=d,y=[],p=[],W=!0}function B(){var j=$(),Q=W&&j,Z=(y=wx(y)).length;(Q||Z)&&(c.polygonStart(),Q&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),Z&&EI(y,a,j,o,c),c.polygonEnd()),f=c,y=p=_=null}function v(){X.point=M,p&&p.push(_=[]),O=!0,N=!1,T=A=NaN}function I(){y&&(M(w,b),S&&N&&d.rejoin(),y.push(d.result())),X.point=Y,N&&f.lineEnd()}function M(j,Q){var Z=i(j,Q);if(p&&_.push([j,Q]),O)w=j,b=Q,S=Z,O=!1,Z&&(f.lineStart(),f.point(j,Q));else if(Z&&N)f.point(j,Q);else{var q=[T=Math.max(SI,Math.min(Ex,T)),A=Math.max(SI,Math.min(Ex,A))],K=[j=Math.max(SI,Math.min(Ex,j)),Q=Math.max(SI,Math.min(Ex,Q))];I$(q,K,n,e,t,r)?(N||(f.lineStart(),f.point(q[0],q[1])),f.point(K[0],K[1]),Z||f.lineEnd(),W=!1):Z&&(f.lineStart(),f.point(j,Q),W=!1)}T=j,A=Q,N=Z}return X}}var TO=Za();function DO(n,e){var t=e[0],r=e[1],i=[gn(t),-pn(t),0],o=0,s=0;TO.reset();for(var a=0,l=n.length;a<l;++a)if(f=(c=n[a]).length)for(var c,f,d=c[f-1],y=d[0],p=d[1]/2+pI,_=gn(p),w=pn(p),b=0;b<f;++b,y=T,_=N,w=O,d=S){var S=c[b],T=S[0],A=S[1]/2+pI,N=gn(A),O=pn(A),W=T-y,X=W>=0?1:-1,Y=X*W,$=Y>Xn,V=_*N;if(TO.add(rs(V*X*gn(Y),w*O+V*pn(Y))),o+=$?W+X*ws:W,$^y>=t^T>=t){var B=Bg(nc(d),nc(S));Gy(B);var v=Bg(i,B);Gy(v);var I=($^W>=0?-1:1)*qo(v[2]);(r>I||r===I&&(B[0]||B[1]))&&(s+=$^W>=0?1:-1)}}return(o<-vn||o<vn&&TO<-vn)^s&1}var clt=Za();function bx(n){return n}var Alt=Za(),Rlt=Za();var Vy=1/0,CI=Vy,Sx=-Vy,II=Sx,uye={point:cye,lineStart:va,lineEnd:va,polygonStart:va,polygonEnd:va,result:function(){var n=[[Vy,CI],[Sx,II]];return Sx=II=-(CI=Vy=1/0),n}};function cye(n,e){n<Vy&&(Vy=n),n>Sx&&(Sx=n),e<CI&&(CI=e),e>II&&(II=e)}var TI=uye;function AO(n){this._context=n}AO.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._context.moveTo(n,e),this._point=1;break}case 1:{this._context.lineTo(n,e);break}default:{this._context.moveTo(n+this._radius,e),this._context.arc(n,e,this._radius,0,ws);break}}},result:va};var zlt=Za();function RO(){this._string=[]}RO.prototype={_radius:4.5,_circle:N$(4.5),pointRadius:function(n){return(n=+n)!==this._radius&&(this._radius=n,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(n,e){switch(this._point){case 0:{this._string.push("M",n,",",e),this._point=1;break}case 1:{this._string.push("L",n,",",e);break}default:{this._circle==null&&(this._circle=N$(this._radius)),this._string.push("M",n,",",e,this._circle);break}}},result:function(){if(this._string.length){var n=this._string.join("");return this._string=[],n}else return null}};function N$(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function DI(n,e,t,r){return function(i,o){var s=e(o),a=i.invert(r[0],r[1]),l=xI(),c=e(l),f=!1,d,y,p,_={point:w,lineStart:S,lineEnd:T,polygonStart:function(){_.point=A,_.lineStart=N,_.lineEnd=O,y=[],d=[]},polygonEnd:function(){_.point=w,_.lineStart=S,_.lineEnd=T,y=wx(y);var W=DO(d,a);y.length?(f||(o.polygonStart(),f=!0),EI(y,fye,W,t,o)):W&&(f||(o.polygonStart(),f=!0),o.lineStart(),t(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),y=d=null},sphere:function(){o.polygonStart(),o.lineStart(),t(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function w(W,X){var Y=i(W,X);n(W=Y[0],X=Y[1])&&o.point(W,X)}function b(W,X){var Y=i(W,X);s.point(Y[0],Y[1])}function S(){_.point=b,s.lineStart()}function T(){_.point=w,s.lineEnd()}function A(W,X){p.push([W,X]);var Y=i(W,X);c.point(Y[0],Y[1])}function N(){c.lineStart(),p=[]}function O(){A(p[0][0],p[0][1]),c.lineEnd();var W=c.clean(),X=l.result(),Y,$=X.length,V,B,v;if(p.pop(),d.push(p),p=null,!!$){if(W&1){if(B=X[0],(V=B.length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),Y=0;Y<V;++Y)o.point((v=B[Y])[0],v[1]);o.lineEnd()}return}$>1&&W&2&&X.push(X.pop().concat(X.shift())),y.push(X.filter(hye))}}return _}}function hye(n){return n.length>1}function fye(n,e){return((n=n.x)[0]<0?n[1]-Ho-vn:Ho-n[1])-((e=e.x)[0]<0?e[1]-Ho-vn:Ho-e[1])}var MO=DI(function(){return!0},dye,gye,[-Xn,-Ho]);function dye(n){var e=NaN,t=NaN,r=NaN,i;return{lineStart:function(){n.lineStart(),i=1},point:function(o,s){var a=o>0?Xn:-Xn,l=xr(o-e);xr(l-Xn)<vn?(n.point(e,t=(t+s)/2>0?Ho:-Ho),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),n.point(o,t),i=0):r!==a&&l>=Xn&&(xr(e-r)<vn&&(e-=r*vn),xr(o-a)<vn&&(o-=a*vn),t=pye(e,t,o,s),n.point(r,t),n.lineEnd(),n.lineStart(),n.point(a,t),i=0),n.point(e=o,t=s),r=a},lineEnd:function(){n.lineEnd(),e=t=NaN},clean:function(){return 2-i}}}function pye(n,e,t,r){var i,o,s=gn(n-t);return xr(s)>vn?tc((gn(e)*(o=pn(r))*gn(t)-gn(r)*(i=pn(e))*gn(n))/(i*o*s)):(e+r)/2}function gye(n,e,t,r){var i;if(n==null)i=t*Ho,r.point(-Xn,i),r.point(0,i),r.point(Xn,i),r.point(Xn,0),r.point(Xn,-i),r.point(0,-i),r.point(-Xn,-i),r.point(-Xn,0),r.point(-Xn,i);else if(xr(n[0]-e[0])>vn){var o=n[0]<e[0]?Xn:-Xn;i=t*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function P$(n,e){var t=pn(n),r=t>0,i=xr(t)>vn;function o(f,d,y,p){C$(p,n,e,y,f,d)}function s(f,d){return pn(f)*pn(d)>t}function a(f){var d,y,p,_,w;return{lineStart:function(){_=p=!1,w=1},point:function(b,S){var T=[b,S],A,N=s(b,S),O=r?N?0:c(b,S):N?c(b+(b<0?Xn:-Xn),S):0;if(!d&&(_=p=N)&&f.lineStart(),N!==p&&(A=l(d,T),(!A||zy(d,A)||zy(T,A))&&(T[0]+=vn,T[1]+=vn,N=s(T[0],T[1]))),N!==p)w=0,N?(f.lineStart(),A=l(T,d),f.point(A[0],A[1])):(A=l(d,T),f.point(A[0],A[1]),f.lineEnd()),d=A;else if(i&&d&&r^N){var W;!(O&y)&&(W=l(T,d,!0))&&(w=0,r?(f.lineStart(),f.point(W[0][0],W[0][1]),f.point(W[1][0],W[1][1]),f.lineEnd()):(f.point(W[1][0],W[1][1]),f.lineEnd(),f.lineStart(),f.point(W[0][0],W[0][1])))}N&&(!d||!zy(d,T))&&f.point(T[0],T[1]),d=T,p=N,y=O},lineEnd:function(){p&&f.lineEnd(),d=null},clean:function(){return w|(_&&p)<<1}}}function l(f,d,y){var p=nc(f),_=nc(d),w=[1,0,0],b=Bg(p,_),S=vx(b,b),T=b[0],A=S-T*T;if(!A)return!y&&f;var N=t*S/A,O=-t*T/A,W=Bg(w,b),X=xx(w,N),Y=xx(b,O);_I(X,Y);var $=W,V=vx(X,$),B=vx($,$),v=V*V-B*(vx(X,X)-1);if(!(v<0)){var I=bo(v),M=xx($,(-V-I)/B);if(_I(M,X),M=Uy(M),!y)return M;var j=f[0],Q=d[0],Z=f[1],q=d[1],K;Q<j&&(K=j,j=Q,Q=K);var oe=Q-j,_e=xr(oe-Xn)<vn,F=_e||oe<vn;if(!_e&&q<Z&&(K=Z,Z=q,q=K),F?_e?Z+q>0^M[1]<(xr(M[0]-j)<vn?Z:q):Z<=M[1]&&M[1]<=q:oe>Xn^(j<=M[0]&&M[0]<=Q)){var ee=xx($,(-V+I)/B);return _I(ee,X),[M,Uy(ee)]}}}function c(f,d){var y=r?n:Xn-n,p=0;return f<-y?p|=1:f>y&&(p|=2),d<-y?p|=4:d>y&&(p|=8),p}return DI(s,a,o,r?[0,-n]:[-Xn,n-Xn])}function Cx(n){return function(e){var t=new NO;for(var r in n)t[r]=n[r];return t.stream=e,t}}function NO(){}NO.prototype={constructor:NO,point:function(n,e){this.stream.point(n,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ix(n,e,t){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),o!=null&&n.clipExtent(null),qd(t,n.stream(TI));var s=TI.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),l=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return o!=null&&n.clipExtent(o),n.scale(a*150).translate([l,c])}function AI(n,e,t){return Ix(n,[[0,0],e],t)}var L$=16,mye=pn(30*Pi);function PO(n,e){return+e?_ye(n,e):yye(n)}function yye(n){return Cx({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}})}function _ye(n,e){function t(r,i,o,s,a,l,c,f,d,y,p,_,w,b){var S=c-r,T=f-i,A=S*S+T*T;if(A>4*e&&w--){var N=s+y,O=a+p,W=l+_,X=bo(N*N+O*O+W*W),Y=qo(W/=X),$=xr(xr(W)-1)<vn||xr(o-d)<vn?(o+d)/2:rs(O,N),V=n($,Y),B=V[0],v=V[1],I=B-r,M=v-i,j=T*I-S*M;(j*j/A>e||xr((S*I+T*M)/A-.5)>.3||s*y+a*p+l*_<mye)&&(t(r,i,o,s,a,l,B,v,$,N/=X,O/=X,W,w,b),b.point(B,v),t(B,v,$,N,O,W,c,f,d,y,p,_,w,b))}}return function(r){var i,o,s,a,l,c,f,d,y,p,_,w,b={point:S,lineStart:T,lineEnd:N,polygonStart:function(){r.polygonStart(),b.lineStart=O},polygonEnd:function(){r.polygonEnd(),b.lineStart=T}};function S(Y,$){Y=n(Y,$),r.point(Y[0],Y[1])}function T(){d=NaN,b.point=A,r.lineStart()}function A(Y,$){var V=nc([Y,$]),B=n(Y,$);t(d,y,f,p,_,w,d=B[0],y=B[1],f=Y,p=V[0],_=V[1],w=V[2],L$,r),r.point(d,y)}function N(){b.point=S,r.lineEnd()}function O(){T(),b.point=W,b.lineEnd=X}function W(Y,$){A(i=Y,$),o=d,s=y,a=p,l=_,c=w,b.point=A}function X(){t(d,y,f,p,_,w,o,s,i,a,l,c,L$,r),b.lineEnd=N,N()}return b}}var vye=Cx({point:function(n,e){this.stream.point(n*Pi,e*Pi)}});function rc(n){return LO(function(){return n})()}function LO(n){var e,t=150,r=480,i=250,o,s,a=0,l=0,c=0,f=0,d=0,y,p,_=null,w=MO,b=null,S,T,A,N=bx,O=.5,W=PO(B,O),X,Y;function $(M){return M=p(M[0]*Pi,M[1]*Pi),[M[0]*t+o,s-M[1]*t]}function V(M){return M=p.invert((M[0]-o)/t,(s-M[1])/t),M&&[M[0]*_a,M[1]*_a]}function B(M,j){return M=e(M,j),[M[0]*t+o,s-M[1]*t]}$.stream=function(M){return X&&Y===M?X:X=vye(w(y,W(N(Y=M))))},$.clipAngle=function(M){return arguments.length?(w=+M?P$(_=M*Pi,6*Pi):(_=null,MO),I()):_*_a},$.clipExtent=function(M){return arguments.length?(N=M==null?(b=S=T=A=null,bx):IO(b=+M[0][0],S=+M[0][1],T=+M[1][0],A=+M[1][1]),I()):b==null?null:[[b,S],[T,A]]},$.scale=function(M){return arguments.length?(t=+M,v()):t},$.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],v()):[r,i]},$.center=function(M){return arguments.length?(a=M[0]%360*Pi,l=M[1]%360*Pi,v()):[a*_a,l*_a]},$.rotate=function(M){return arguments.length?(c=M[0]%360*Pi,f=M[1]%360*Pi,d=M.length>2?M[2]%360*Pi:0,v()):[c*_a,f*_a,d*_a]},$.precision=function(M){return arguments.length?(W=PO(B,O=M*M),I()):bo(O)},$.fitExtent=function(M,j){return Ix($,M,j)},$.fitSize=function(M,j){return AI($,M,j)};function v(){p=vI(y=SO(c,f,d),e);var M=e(a,l);return o=r-M[0]*t,s=i+M[1]*t,I()}function I(){return X=Y=null,$}return function(){return e=n.apply(this,arguments),$.invert=e.invert&&V,v()}}function RI(n){return function(e,t){var r=pn(e),i=pn(t),o=n(r*i);return[o*i*gn(e),o*gn(t)]}}function qc(n){return function(e,t){var r=bo(e*e+t*t),i=n(r),o=gn(i),s=pn(i);return[rs(e*o,r*s),qo(r&&t*o/r)]}}var B$=RI(function(n){return bo(2/(1+n))});B$.invert=qc(function(n){return 2*qo(n/2)});var kO=RI(function(n){return(n=mI(n))&&n/gn(n)});kO.invert=qc(function(n){return n});function OO(){return rc(kO).scale(79.4188).clipAngle(180-.001)}function FO(n,e){return[n,yx(_x((Ho+e)/2))]}FO.invert=function(n,e){return[n,2*tc(gI(e))-Ho]};function MI(n,e){return[n,e]}MI.invert=MI;function j$(n,e){var t=pn(e),r=pn(n)*t;return[t*gn(n)/r,gn(e)/r]}j$.invert=qc(tc);function U$(n,e){var t=e*e,r=t*t;return[n*(.8707-.131979*t+r*(-.013791+r*(.003971*t-.001529*r))),e*(1.007226+t*(.015085+r*(-.044475+.028874*t-.005916*r)))]}U$.invert=function(n,e){var t=e,r=25,i;do{var o=t*t,s=o*o;t-=i=(t*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-e)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(xr(i)>vn&&--r>0);return[n/(.8707+(o=t*t)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),t]};function G$(n,e){return[pn(e)*gn(n),gn(e)]}G$.invert=qc(qo);function z$(n,e){var t=pn(e),r=1+pn(n)*t;return[t*gn(n)/r,gn(e)/r]}z$.invert=qc(function(n){return 2*tc(n)});function V$(n,e){return[yx(_x((Ho+e)/2)),-n]}V$.invert=function(n,e){return[-e,2*tc(gI(n))-Ho]};var{BufferOp:Eye,GeoJSONReader:bye,GeoJSONWriter:Sye}=H$.default;function BO(n,e,t){t=t||{};var r=t.units||"kilometers",i=t.steps||8;if(!n)throw new Error("geojson is required");if(typeof t!="object")throw new Error("options must be an object");if(typeof i!="number")throw new Error("steps must be an number");if(e===void 0)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(n.type){case"GeometryCollection":return gx(n,function(s){var a=NI(s,e,r,i);a&&o.push(a)}),lI(o);case"FeatureCollection":return yO(n,function(s){var a=NI(s,e,r,i);a&&yO(a,function(l){l&&o.push(l)})}),lI(o)}return NI(n,e,r,i)}function NI(n,e,t,r){var i=n.properties||{},o=n.type==="Feature"?n.geometry:n;if(o.type==="GeometryCollection"){var s=[];return gx(n,function(w){var b=NI(w,e,t,r);b&&s.push(b)}),lI(s)}var a=Cye(o),l={type:o.type,coordinates:W$(o.coordinates,a)},c=new bye,f=c.read(l),d=uI(cI(e,t),"meters"),y=Eye.bufferOp(f,d,r),p=new Sye;if(y=p.write(y),!q$(y.coordinates)){var _={type:y.type,coordinates:$$(y.coordinates,a)};return Fg(_,i)}}function q$(n){return Array.isArray(n[0])?q$(n[0]):isNaN(n[0])}function W$(n,e){return typeof n[0]!="object"?e(n):n.map(function(t){return W$(t,e)})}function $$(n,e){return typeof n[0]!="object"?e.invert(n):n.map(function(t){return $$(t,e)})}function Cye(n){var e=g$(n).geometry.coordinates,t=[-e[0],-e[1]];return OO().rotate(t).scale(ns)}function jO(n,e={}){let t=0,r=0,i=0;return jy(n,function(o){t+=o[0],r+=o[1],i++},!0),ec([t/i,r/i],e.properties)}function PI(n,e={}){return f$(n,(t,r)=>{let i=r.geometry.coordinates;return t+hI(i[0],i[1],e)},0)}var X$=23283064365386963e-26,Iye=12,Z$=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),UO=0,LI=1,Tx=2,kI=5,OI=class{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,r=this.length){for(;this.pos<r;){let i=this.readVarint(),o=i>>3,s=this.pos;this.type=i&7,e(o,t,this),this.pos===s&&this.skip(i)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){let e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){let e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readSFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readFloat(){let e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){let e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){let t=this.buf,r,i;return i=t[this.pos++],r=i&127,i<128||(i=t[this.pos++],r|=(i&127)<<7,i<128)||(i=t[this.pos++],r|=(i&127)<<14,i<128)||(i=t[this.pos++],r|=(i&127)<<21,i<128)?r:(i=t[this.pos],r|=(i&15)<<28,Tye(r,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){let e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=Iye&&Z$?Z$.decode(this.buf.subarray(t,e)):Uye(this.buf,t,e)}readBytes(){let e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){let r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===Tx?this.readVarint()+this.pos:this.pos+1}skip(e){let t=e&7;if(t===UO)for(;this.buf[this.pos++]>127;);else if(t===Tx)this.pos=this.readVarint()+this.pos;else if(t===kI)this.pos+=4;else if(t===LI)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){let r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.dataView=new DataView(r.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*X$),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*X$),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){Dye(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;let t=this.pos;this.pos=Gye(this.buf,e,this.pos);let r=this.pos-t;r>=128&&K$(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){let t=e.length;this.writeVarint(t),this.realloc(t);for(let r=0;r<t;r++)this.buf[this.pos++]=e[r]}writeRawMessage(e,t){this.pos++;let r=this.pos;e(t,this);let i=this.pos-r;i>=128&&K$(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i}writeMessage(e,t,r){this.writeTag(e,Tx),this.writeRawMessage(t,r)}writePackedVarint(e,t){t.length&&this.writeMessage(e,Mye,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,Nye,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,kye,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,Pye,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,Lye,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,Oye,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,Fye,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,Bye,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,jye,t)}writeBytesField(e,t){this.writeTag(e,Tx),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,kI),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,kI),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,LI),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,LI),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,UO),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,UO),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,Tx),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,kI),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,LI),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}};function Tye(n,e,t){let r=t.buf,i,o;if(o=r[t.pos++],i=(o&112)>>4,o<128||(o=r[t.pos++],i|=(o&127)<<3,o<128)||(o=r[t.pos++],i|=(o&127)<<10,o<128)||(o=r[t.pos++],i|=(o&127)<<17,o<128)||(o=r[t.pos++],i|=(o&127)<<24,o<128)||(o=r[t.pos++],i|=(o&1)<<31,o<128))return Hy(n,i,e);throw new Error("Expected varint not more than 10 bytes")}function Hy(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}function Dye(n,e){let t,r;if(n>=0?(t=n%4294967296|0,r=n/4294967296|0):(t=~(-n%4294967296),r=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,r=r+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),Aye(t,r,e),Rye(r,e)}function Aye(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}function Rye(n,e){let t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}function K$(n,e,t){let r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(r);for(let i=t.pos-1;i>=n;i--)t.buf[i+r]=t.buf[i]}function Mye(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}function Nye(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}function Pye(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}function Lye(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}function kye(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}function Oye(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}function Fye(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}function Bye(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}function jye(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}function Uye(n,e,t){let r="",i=e;for(;i<t;){let o=n[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>t)break;let l,c,f;a===1?o<128&&(s=o):a===2?(l=n[i+1],(l&192)===128&&(s=(o&31)<<6|l&63,s<=127&&(s=null))):a===3?(l=n[i+1],c=n[i+2],(l&192)===128&&(c&192)===128&&(s=(o&15)<<12|(l&63)<<6|c&63,(s<=2047||s>=55296&&s<=57343)&&(s=null))):a===4&&(l=n[i+1],c=n[i+2],f=n[i+3],(l&192)===128&&(c&192)===128&&(f&192)===128&&(s=(o&15)<<18|(l&63)<<12|(c&63)<<6|f&63,(s<=65535||s>=1114112)&&(s=null))),s===null?(s=65533,a=1):s>65535&&(s-=65536,r+=String.fromCharCode(s>>>10&1023|55296),s=56320|s&1023),r+=String.fromCharCode(s),i+=a}return r}function Gye(n,e,t){for(let r=0,i,o;r<e.length;r++){if(i=e.charCodeAt(r),i>55295&&i<57344)if(o)if(i<56320){n[t++]=239,n[t++]=191,n[t++]=189,o=i;continue}else i=o-55296<<10|i-56320|65536,o=null;else{i>56319||r+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):o=i;continue}else o&&(n[t++]=239,n[t++]=191,n[t++]=189,o=null);i<128?n[t++]=i:(i<2048?n[t++]=i>>6|192:(i<65536?n[t++]=i>>12|224:(n[t++]=i>>18|240,n[t++]=i>>12&63|128),n[t++]=i>>6&63|128),n[t++]=i&63|128)}return t}var GO=class extends kd{constructor(e){super(),e=e||{},this.dataProjection=new Cw({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:Ua,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,r,i){e.pos=t.geometry;let o=e.readVarint()+e.pos,s=1,a=0,l=0,c=0,f=0,d=0;for(;e.pos<o;){if(!a){let y=e.readVarint();s=y&7,a=y>>3}if(a--,s===1||s===2)l+=e.readSVarint(),c+=e.readSVarint(),s===1&&f>d&&(i.push(f),d=f),r.push(l,c),f+=2;else if(s===7)f>d&&(r.push(r[d],r[d+1]),f+=2);else throw new Error("Invalid command found in the PBF")}f>d&&(i.push(f),d=f)}createFeature_(e,t,r){let i=t.type;if(i===0)return null;let o,s=t.properties,a;this.idProperty_?(a=s[this.idProperty_],delete s[this.idProperty_]):a=t.id,s[this.layerName_]=t.layer.name;let l=[],c=[];this.readRawGeometry_(e,t,l,c);let f=Wye(i,c.length);if(this.featureClass===Ua)o=new this.featureClass(f,l,c,2,s,a),o.transform(r.dataProjection);else{let d;if(f=="Polygon"){let _=bb(l,c);d=_.length>1?new yl(l,"XY",_):new jo(l,"XY",c)}else d=f==="Point"?new _o(l,"XY"):f==="LineString"?new to(l,"XY"):f==="MultiPoint"?new ml(l,"XY"):f==="MultiLineString"?new qs(l,"XY",c):null;let y=this.featureClass;o=new y,this.geometryName_&&o.setGeometryName(this.geometryName_);let p=Go(d,!1,r);o.setGeometry(p),a!==void 0&&o.setId(a),o.setProperties(s,!0)}return o}getType(){return"arraybuffer"}readFeatures(e,t){let r=this.layers_;t=this.adaptOptions(t);let i=rn(t.dataProjection);i.setWorldExtent(t.extent),t.dataProjection=i;let o=new OI(e),s=o.readFields(zye,{}),a=[];for(let l in s){if(r&&!r.includes(l))continue;let c=s[l],f=c?[0,0,c.extent,c.extent]:null;i.setExtent(f);for(let d=0,y=c.length;d<y;++d){let p=qye(o,c,d),_=this.createFeature_(o,p,t);_!==null&&a.push(_)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}};function zye(n,e,t){if(n===3){let r={keys:[],values:[],features:[]},i=t.readVarint()+t.pos;t.readFields(Vye,r,i),r.length=r.features.length,r.length&&(e[r.name]=r)}}function Vye(n,e,t){if(n===15)e.version=t.readVarint();else if(n===1)e.name=t.readString();else if(n===5)e.extent=t.readVarint();else if(n===2)e.features.push(t.pos);else if(n===3)e.keys.push(t.readString());else if(n===4){let r=null,i=t.readVarint()+t.pos;for(;t.pos<i;)n=t.readVarint()>>3,r=n===1?t.readString():n===2?t.readFloat():n===3?t.readDouble():n===4?t.readVarint64():n===5?t.readVarint():n===6?t.readSVarint():n===7?t.readBoolean():null;e.values.push(r)}}function Hye(n,e,t){if(n==1)e.id=t.readVarint();else if(n==2){let r=t.readVarint()+t.pos;for(;t.pos<r;){let i=e.layer.keys[t.readVarint()],o=e.layer.values[t.readVarint()];e.properties[i]=o}}else n==3?e.type=t.readVarint():n==4&&(e.geometry=t.pos)}function qye(n,e,t){n.pos=e.features[t];let r=n.readVarint()+n.pos,i={layer:e,type:0,properties:{}};return n.readFields(Hye,i,r),i}function Wye(n,e){let t;return n===1?t=e===1?"Point":"MultiPoint":n===2?t=e===1?"LineString":"MultiLineString":n===3&&(t="Polygon"),t}var zO=GO;var VO=class{read(e){if(!e)return null;if(typeof e=="string"){let t=za(e);return this.readFromDocument(t)}return Ga(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){Ct()}},FI=VO;var $ye="http://www.w3.org/1999/xlink";function Dx(n){return n.getAttributeNS($ye,"href")}var Ka=[null,"http://www.opengis.net/ows/1.1"],Yye=nt(Ka,{ServiceIdentification:Oe(__e),ServiceProvider:Oe(x_e),OperationsMetadata:Oe(m_e)}),HO=class extends FI{constructor(){super()}readFromNode(e){let t=Mt({},Yye,e,[]);return t||null}},Xye=nt(Ka,{DeliveryPoint:Oe(Et),City:Oe(Et),AdministrativeArea:Oe(Et),PostalCode:Oe(Et),Country:Oe(Et),ElectronicMailAddress:Oe(Et)}),Zye=nt(Ka,{Value:Ws(w_e)}),Kye=nt(Ka,{AllowedValues:Oe(u_e)}),Jye=nt(Ka,{Phone:Oe(y_e),Address:Oe(l_e)}),Qye=nt(Ka,{HTTP:Oe(p_e)}),e_e=nt(Ka,{Get:Ws(d_e),Post:void 0}),t_e=nt(Ka,{DCP:Oe(f_e)}),n_e=nt(Ka,{Operation:g_e}),r_e=nt(Ka,{Voice:Oe(Et),Facsimile:Oe(Et)}),i_e=nt(Ka,{Constraint:Ws(c_e)}),o_e=nt(Ka,{IndividualName:Oe(Et),PositionName:Oe(Et),ContactInfo:Oe(h_e)}),s_e=nt(Ka,{Abstract:Oe(Et),AccessConstraints:Oe(Et),Fees:Oe(Et),Title:Oe(Et),ServiceTypeVersion:Oe(Et),ServiceType:Oe(Et)}),a_e=nt(Ka,{ProviderName:Oe(Et),ProviderSite:Oe(Dx),ServiceContact:Oe(v_e)});function l_e(n,e){return Mt({},Xye,n,e)}function u_e(n,e){return Mt({},Zye,n,e)}function c_e(n,e){let t=n.getAttribute("name");if(t)return Mt({name:t},Kye,n,e)}function h_e(n,e){return Mt({},Jye,n,e)}function f_e(n,e){return Mt({},Qye,n,e)}function d_e(n,e){let t=Dx(n);if(t)return Mt({href:t},i_e,n,e)}function p_e(n,e){return Mt({},e_e,n,e)}function g_e(n,e){let t=n.getAttribute("name"),r=Mt({},t_e,n,e);if(!r)return;let i=e[e.length-1];i[t]=r}function m_e(n,e){return Mt({},n_e,n,e)}function y_e(n,e){return Mt({},r_e,n,e)}function __e(n,e){return Mt({},s_e,n,e)}function v_e(n,e){return Mt({},o_e,n,e)}function x_e(n,e){return Mt({},a_e,n,e)}function w_e(n,e){return Et(n)}var J$=HO;var Wc=[null,"http://www.opengis.net/wmts/1.0"],qy=[null,"http://www.opengis.net/ows/1.1"],E_e=nt(Wc,{Contents:Oe(N_e)}),qO=class extends FI{constructor(){super(),this.owsParser_=new J$}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let r=this.owsParser_.readFromNode(e);return r?(r.version=t,r=Mt(r,E_e,e,[]),r||null):null}},b_e=nt(Wc,{Layer:Ws(P_e),TileMatrixSet:Ws(L_e)}),S_e=nt(Wc,{Style:Ws(k_e),Format:Ws(Et),TileMatrixSetLink:Ws(O_e),Dimension:Ws(F_e),ResourceURL:Ws(B_e)},nt(qy,{Title:Oe(Et),Abstract:Oe(Et),WGS84BoundingBox:Oe(eY),BoundingBox:Ws(j_e),Identifier:Oe(Et)})),C_e=nt(Wc,{LegendURL:Ws(U_e)},nt(qy,{Title:Oe(Et),Identifier:Oe(Et)})),I_e=nt(Wc,{TileMatrixSet:Oe(Et),TileMatrixSetLimits:Oe(z_e)}),T_e=nt(Wc,{TileMatrixLimits:vs(V_e)}),D_e=nt(Wc,{TileMatrix:Oe(Et),MinTileRow:Oe(ga),MaxTileRow:Oe(ga),MinTileCol:Oe(ga),MaxTileCol:Oe(ga)}),A_e=nt(Wc,{Default:Oe(Et),Value:Ws(Et)},nt(qy,{Identifier:Oe(Et)})),Q$=nt(qy,{LowerCorner:vs(WO),UpperCorner:vs(WO)}),R_e=nt(Wc,{WellKnownScaleSet:Oe(Et),TileMatrix:Ws(G_e)},nt(qy,{SupportedCRS:Oe(Et),Identifier:Oe(Et),BoundingBox:Oe(eY)})),M_e=nt(Wc,{TopLeftCorner:Oe(WO),ScaleDenominator:Oe(ar),TileWidth:Oe(ga),TileHeight:Oe(ga),MatrixWidth:Oe(ga),MatrixHeight:Oe(ga)},nt(qy,{Identifier:Oe(Et)}));function N_e(n,e){return Mt({},b_e,n,e)}function P_e(n,e){return Mt({},S_e,n,e)}function L_e(n,e){return Mt({},R_e,n,e)}function k_e(n,e){let t=Mt({},C_e,n,e);if(!t)return;let r=n.getAttribute("isDefault")==="true";return t.isDefault=r,t}function O_e(n,e){return Mt({},I_e,n,e)}function F_e(n,e){return Mt({},A_e,n,e)}function B_e(n,e){let t=n.getAttribute("format"),r=n.getAttribute("template"),i=n.getAttribute("resourceType"),o={};return t&&(o.format=t),r&&(o.template=r),i&&(o.resourceType=i),o}function eY(n,e){let t=Mt([],Q$,n,e);if(t.length==2)return Bl(t)}function j_e(n,e){let t=n.getAttribute("crs"),r=Mt([],Q$,n,e);if(r.length==2)return{extent:Bl(r),crs:t}}function U_e(n,e){let t={};return t.format=n.getAttribute("format"),t.href=Dx(n),t}function WO(n,e){let t=Et(n).split(/\s+/);if(!t||t.length!=2)return;let r=+t[0],i=+t[1];if(!(isNaN(r)||isNaN(i)))return[r,i]}function G_e(n,e){return Mt({},M_e,n,e)}function z_e(n,e){return Mt([],T_e,n,e)}function V_e(n,e){return Mt({},D_e,n,e)}var tY=qO;var BI=class n{STAC_API_URL="https://earth-search.aws.element84.com/v1/search";format=new no;searchSTAC(e){return He(this,null,function*(){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return yield(yield fetch(this.STAC_API_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bbox:mx(t),collections:["sentinel-2-l2a"],limit:10,query:{"eo:cloud_cover":{lt:15}}})})).json()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})};var $O=class extends J0{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){let t=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,o=i.resolution,s=this.getLayer().getSource(),a=e.viewHints,l=e.extent;if(t.extent!==void 0&&(l=Nr(l,ko(t.extent,i.projection))),!a[Vr.ANIMATING]&&!a[Vr.INTERACTING]&&!Ls(l))if(s){let c=i.projection,f=s.getImage(l,o,r,c);f&&(this.loadImage(f)?this.image=f:f.getState()===wt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){let t=this.frameState;if(!t)return null;let r=this.getLayer(),i=Ir(t.pixelToCoordinateTransform,e.slice()),o=r.getExtent();if(o&&!Ms(o,i))return null;let s=this.image.getExtent(),a=this.image.getImage(),l=nn(s),c=Math.floor(a.width*((i[0]-s[0])/l));if(c<0||c>=a.width)return null;let f=Qn(s),d=Math.floor(a.height*((s[3]-i[1])/f));return d<0||d>=a.height?null:this.getImageData(a,c,d)}renderFrame(e,t){let r=this.image,i=r.getExtent(),o=r.getResolution(),[s,a]=Array.isArray(o)?o:[o,o],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],f=e.pixelRatio,d=e.viewState,y=d.center,p=d.resolution,_=f*s/(p*l),w=f*a/(p*l);this.prepareContainer(e,t);let b=this.context.canvas.width,S=this.context.canvas.height,T=this.getRenderContext(e),A=!1,N=!0;if(c.extent){let $=ko(c.extent,d.projection);N=Wn($,e.extent),A=N&&!Ns($,e.extent),A&&this.clipUnrotated(T,e,$)}let O=r.getImage(),W=Ri(this.tempTransform,b/2,S/2,_,w,0,l*(i[0]-y[0])/s,l*(y[1]-i[3])/a);this.renderedResolution=a*f/l;let X=O.width*W[0],Y=O.height*W[3];if(this.getLayer().getSource().getInterpolate()||(T.imageSmoothingEnabled=!1),this.preRender(T,e),N&&X>=.5&&Y>=.5){let $=W[4],V=W[5],B=c.opacity;B!==1&&(T.save(),T.globalAlpha=B),T.drawImage(O,0,0,+O.width,+O.height,$,V,X,Y),B!==1&&T.restore()}return this.postRender(this.context,e),A&&T.restore(),T.imageSmoothingEnabled=!0,this.container}},nY=$O;var YO=class extends zh{constructor(e){e=e||{},super(e)}},rY=YO;var XO=class extends rY{constructor(e){super(e)}createRenderer(){return new nY(this)}getData(e){return super.getData(e)}},iY=XO;var H_e={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},oY={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},ZO=class extends eS{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Hr(),this.tileClipContexts_=null}enqueueTilesForNextExtent(){return this.getLayer().getRenderMode()!=="vector"}drawTile(e,t,r,i,o,s,a,l){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,r,i,o,s,a,l)}getTile(e,t,r,i){let o=this.getOrCreateTile(e,t,r,i);if(!o)return null;let s=i.viewState,a=s.resolution,l=i.viewHints,c=this.getLayer().getSource(),f=c.getTileGridForProjection(s.projection),d=!(l[Vr.ANIMATING]||l[Vr.INTERACTING]),y=f.getZForResolution(a,c.zDirection)===e;return d&&y?o.wantedResolution=a:o.wantedResolution||(o.wantedResolution=f.getResolution(e)),o}prepareFrame(e){let t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,r){let i=this.getLayer(),o=i.getRevision(),s=i.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(i);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==o&&l.renderedRenderOrder==s)return;let c=i.getSource(),f=!!i.getDeclutter(),d=c.getTileGrid(),p=c.getTileGridForProjection(r).getTileCoordExtent(e.wrappedTileCoord),_=c.getSourceTiles(t,r,e),w=_t(i);delete e.hitDetectionImageData[w],e.executorGroups[w]=[],l.dirty=!1;for(let b=0,S=_.length;b<S;++b){let T=_[b];if(T.getState()!=Ze.LOADED)continue;let A=c.getProjection(),N=T.tileCoord,O=d.getTileCoordExtent(N);r&&A&&!Gr(r,A)&&(O=jl(O,A,r,32));let W=Nr(p,O),X=Zo(W,i.getRenderBuffer()*a,this.tempExtent),Y=ll(O,W)?null:X,$=new rS(0,W,a,t),V=N1(a,t),B=function(Q,Z){let q,K=Q.getStyleFunction()||i.getStyleFunction();if(K&&(q=K(Q,a)),q){let oe=this.renderFeature(Q,V,q,$,f,Z);l.dirty=l.dirty||oe}},v=T.getFeatures();s&&s!==l.renderedRenderOrder&&v.sort(s);for(let Q=0,Z=v.length;Q<Z;++Q){let q=v[Q];r&&T.projection&&!Gr(r,T.projection)&&(q=q.clone(),q.getGeometry().applyTransform(mh(T.projection,r))),(!Y||Wn(Y,q.getGeometry().getExtent()))&&B.call(this,q,Q)}let I=$.finish(),M=i.getRenderMode()!=="vector"&&f&&_.length===1?null:W,j=new iS(M,a,t,c.getOverlaps(),I,i.getRenderBuffer(),!0);e.executorGroups[w].push(j)}l.renderedRevision=o,l.renderedRenderOrder=s,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,r,i,o){let s=t.viewState.resolution,a=t.viewState.rotation;r=r??0;let l=this.getLayer(),f=l.getSource().getTileGridForProjection(t.viewState.projection),d=Bl([e]);Zo(d,s*r,d);let y={},p=function(A,N,O){let W=A.getId();W===void 0&&(W=_t(A));let X=y[W];if(X){if(X!==!0&&O<X.distanceSq){if(O===0)return y[W]=!0,o.splice(o.lastIndexOf(X),1),i(A,l,N);X.geometry=N,X.distanceSq=O}}else{if(O===0)return y[W]=!0,i(A,l,N);o.push(y[W]={feature:A,layer:l,geometry:N,distanceSq:O,callback:i})}},_=this.renderedTiles,w=_t(l),b=l.getDeclutter(),S=b?t.declutter?.[b]?.all().map(A=>A.value):null,T;e:for(let A=0,N=_.length;A<N;++A){let O=_[A],W=f.getTileCoordExtent(O.wrappedTileCoord);if(!Wn(W,d))continue;let X=O.executorGroups[w];for(let Y=0,$=X.length;Y<$;++Y)if(T=X[Y].forEachFeatureAtCoordinate(e,s,a,r,p,S),T)break e}return T}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,r)=>{let i=this.getLayer(),o=i.getSource(),s=this.renderedProjection,a=s.getExtent(),l=this.renderedResolution,c=o.getTileGridForProjection(s),f=Ir(this.renderedPixelToCoordinateTransform_,e.slice()),d=c.getTileCoordForCoordAndResolution(f,l).toString(),y=this.renderedTiles.find(A=>A.tileCoord.toString()===d&&A.getState()===Ze.LOADED);if(!y||y.loadingSourceTiles>0){t([]);return}o.getWrapX()&&s.canWrapX()&&!Ns(a,c.getTileCoordExtent(y.tileCoord))&&ym(f,s);let p=_t(i),_=c.getTileCoordExtent(y.wrappedTileCoord),w=Ps(_),b=[(f[0]-w[0])/l,(w[1]-f[1])/l],S=y.getSourceTiles().reduce((A,N)=>A.concat(N.getFeatures()),[]),T=y.hitDetectionImageData[p];if(!T){let A=Yn(c.getTileSize(c.getZForResolution(l,o.zDirection))),N=this.renderedRotation_,O=[this.getRenderTransform(c.getTileCoordCenter(y.wrappedTileCoord),l,0,pa,A[0]*pa,A[1]*pa,0)];T=oS(A,O,S,i.getStyleFunction(),c.getTileCoordExtent(y.wrappedTileCoord),y.getReplayState(i).renderedResolution,N),y.hitDetectionImageData[p]=T}t(sS(b,S,T))})}getFeaturesInExtent(e){let t=[],r=this.getTileCache();if(r.getCount()===0)return t;let o=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=o.getZForResolution(this.renderedResolution),a={};return r.forEach(l=>{if(l.tileCoord[0]!==s||l.getState()!==Ze.LOADED)return;let c=l.getSourceTiles();for(let f=0,d=c.length;f<d;++f){let y=c[f],p=y.getKey();if(p in a)continue;a[p]=!0;let _=y.tileCoord;if(Wn(e,o.getTileCoordExtent(_))){let w=y.getFeatures();if(w)for(let b=0,S=w.length;b<S;++b){let T=w[b],A=T.getGeometry();Wn(e,A.getExtent())&&t.push(T)}}}}),t}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){let r=this.context,i=r.globalAlpha;r.globalAlpha=t.opacity;let o=e.viewHints,s=!(o[Vr.ANIMATING]||o[Vr.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),c=l?e.declutter?.[l]:void 0,f=_t(this.getLayer()),d=this.renderedTiles;for(let y=0,p=d.length;y<p;++y){let _=d[y],w=_.executorGroups[f];if(w)for(let b=w.length-1;b>=0;--b)w[b].execute(this.context,a,this.getTileRenderTransform(_,e),e.viewState.rotation,s,ny,c)}r.globalAlpha=i}renderDeferredInternal(e){let t=this.renderedTiles,r=_t(this.getLayer()),i=t.reduce((l,c,f)=>(c.executorGroups[r].forEach(d=>l.push({executorGroup:d,index:f})),l),[]),o=i.map(({executorGroup:l})=>l.getDeferredZIndexContexts()),s={};for(let l=0,c=i.length;l<c;++l){let f=i[l].executorGroup.getDeferredZIndexContexts();for(let d in f)s[d]=!0}Object.keys(s).map(Number).sort(Us).forEach(l=>{o.forEach((c,f)=>{c[l]&&(c[l].forEach(d=>{let{executorGroup:y,index:p}=i[f],_=y.getRenderedContext(),w=_.globalAlpha;_.globalAlpha=this.renderedOpacity_;let b=this.tileClipContexts_[p];b&&b.draw(_),d.draw(_),b&&_.restore(),_.globalAlpha=w,d.clear()}),c[l].length=0)})})}getTileRenderTransform(e,t){let r=t.pixelRatio,i=t.viewState,o=i.center,s=i.resolution,a=i.rotation,l=t.size,c=Math.round(l[0]*r),f=Math.round(l[1]*r),y=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),p=e.tileCoord,_=y.getTileCoordExtent(e.wrappedTileCoord),w=y.getTileCoordExtent(p,this.tempExtent)[0]-_[0];return cd(hd(this.inversePixelTransform.slice(),1/r,1/r),this.getRenderTransform(o,s,a,r,c,f,w))}postRender(e,t){let r=t.viewHints,i=!(r[Vr.ANIMATING]||r[Vr.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;let o=this.getLayer(),s=o.getRenderMode(),a=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;let l=o.getDeclutter(),c=l?oY[s].filter(O=>!ny.includes(O)):oY[s],f=t.viewState,d=f.rotation,y=o.getSource(),_=y.getTileGridForProjection(f.projection).getZForResolution(f.resolution,y.zDirection),w=this.renderedTiles,b=[],S=[],T=[],A=_t(o),N=!0;for(let O=w.length-1;O>=0;--O){let W=w[O];N=N&&!W.getReplayState(o).dirty;let X=W.executorGroups[A].filter(M=>M.hasExecutors(c));if(X.length===0)continue;let Y=this.getTileRenderTransform(W,t),$=W.tileCoord[0],V=!1,B=X[0].getClipCoords(Y),v=e,I;if(B){I=new Z0,v=I.getContext();for(let M=0,j=b.length;M<j;++M)if(_!==$&&$<S[M]){let Q=b[M];Wn([B[0],B[3],B[4],B[7]],[Q[0],Q[3],Q[4],Q[7]])&&(V||(v.save(),V=!0),v.beginPath(),v.moveTo(B[0],B[1]),v.lineTo(B[2],B[3]),v.lineTo(B[4],B[5]),v.lineTo(B[6],B[7]),v.moveTo(Q[6],Q[7]),v.lineTo(Q[4],Q[5]),v.lineTo(Q[2],Q[3]),v.lineTo(Q[0],Q[1]),v.clip())}b.push(B),S.push($)}for(let M=0,j=X.length;M<j;++M)X[M].execute(e,[e.canvas.width,e.canvas.height],Y,d,i,c,t.declutter?.[l]);V&&(v===e?v.restore():T[O]=I)}e.globalAlpha=a,this.ready=N,this.tileClipContexts_=T,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,r,i,o,s){if(!r)return!1;let a=!1;if(Array.isArray(r))for(let l=0,c=r.length;l<c;++l)a=ry(i,e,r[l],t,this.boundHandleStyleImageChange_,void 0,o,s)||a;else a=ry(i,e,r,t,this.boundHandleStyleImageChange_,void 0,o,s);return a}tileImageNeedsRender_(e){let t=this.getLayer();if(t.getRenderMode()==="vector")return!1;let r=e.getReplayState(t),i=t.getRevision(),o=e.wantedResolution;return r.renderedTileResolution!==o||r.renderedTileRevision!==i}renderTileImage_(e,t){let r=this.getLayer(),i=e.getReplayState(r),o=r.getRevision(),s=e.executorGroups[_t(r)];i.renderedTileRevision=o;let a=e.wrappedTileCoord,l=a[0],c=r.getSource(),f=t.pixelRatio,y=t.viewState.projection,p=c.getTileGridForProjection(y),_=p.getResolution(e.tileCoord[0]),w=t.pixelRatio/e.wantedResolution*_,b=p.getResolution(l),S=e.getContext();f=Math.round(Math.max(f,w/f));let T=c.getTilePixelSize(l,f,y);S.canvas.width=T[0],S.canvas.height=T[1];let A=f/w;if(A!==1){let X=Wv(this.tmpTransform_);hd(X,A,A),S.setTransform.apply(S,X)}let N=p.getTileCoordExtent(a,this.tempExtent),O=w/b,W=Wv(this.tmpTransform_);hd(W,O,-O),gb(W,-N[0],-N[3]);for(let X=0,Y=s.length;X<Y;++X)s[X].execute(S,[S.canvas.width*A,S.canvas.height*A],W,0,!0,H_e[r.getRenderMode()],null);i.renderedTileResolution=e.wantedResolution}},sY=ZO;var KO=class extends H0{constructor(e){e=e||{};let t=Object.assign({},e);delete t.preload;let r=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=r;let i=e.renderMode||"hybrid";on(i=="hybrid"||i=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new sY(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(Pc.PRELOAD)}getUseInterimTilesOnError(){return this.get(Pc.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(Pc.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(Pc.USE_INTERIM_TILES_ON_ERROR,e)}},aY=KO;function $d(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function jI(n,e){return n[0]=e[0],n[1]=e[1],n[4]=e[2],n[5]=e[3],n[12]=e[4],n[13]=e[5],n}function Ax(n,e,t,r,i,o,s){s=s??$d();let a=1/(n-e),l=1/(t-r),c=1/(i-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(n+e)*a,s[13]=(r+t)*l,s[14]=(o+i)*c,s[15]=1,s}function JO(n,e,t,r,i){return i=i??$d(),i[0]=n[0]*e,i[1]=n[1]*e,i[2]=n[2]*e,i[3]=n[3]*e,i[4]=n[4]*t,i[5]=n[5]*t,i[6]=n[6]*t,i[7]=n[7]*t,i[8]=n[8]*r,i[9]=n[9]*r,i[10]=n[10]*r,i[11]=n[11]*r,i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],i}function lY(n,e,t,r,i){i=i??$d();let o,s,a,l,c,f,d,y,p,_,w,b;return n===i?(i[12]=n[0]*e+n[4]*t+n[8]*r+n[12],i[13]=n[1]*e+n[5]*t+n[9]*r+n[13],i[14]=n[2]*e+n[6]*t+n[10]*r+n[14],i[15]=n[3]*e+n[7]*t+n[11]*r+n[15]):(o=n[0],s=n[1],a=n[2],l=n[3],c=n[4],f=n[5],d=n[6],y=n[7],p=n[8],_=n[9],w=n[10],b=n[11],i[0]=o,i[1]=s,i[2]=a,i[3]=l,i[4]=c,i[5]=f,i[6]=d,i[7]=y,i[8]=p,i[9]=_,i[10]=w,i[11]=b,i[12]=o*e+c*t+p*r+n[12],i[13]=s*e+f*t+_*r+n[13],i[14]=a*e+d*t+w*r+n[14],i[15]=l*e+y*t+b*r+n[15]),i}function uY(n,e,t,r){return r=r??$d(),r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=n,r[13]=e,r[14]=t,r[15]=1,r}var Rx=34962,Mx=34963,fY=35040,Wy=35044,dY=35048,pY=5121,gY=5123,mY=5125,QO=5126,hY=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function yY(n,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!LU},e);let t=hY.length;for(let r=0;r<t;++r)try{let i=n.getContext(hY[r],e);if(i)return i}catch{}return null}var q_e={STATIC_DRAW:Wy,STREAM_DRAW:fY,DYNAMIC_DRAW:dY},e3=class{constructor(e,t){this.array_=null,this.type_=e,on(e===Rx||e===Mx,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=t!==void 0?t:q_e.STATIC_DRAW}ofSize(e){return this.array_=new(UI(this.type_))(e),this}fromArray(e){return this.array_=UI(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(UI(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){let t=UI(this.type_);if(!(e instanceof t))throw new Error(`Expected ${t}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}};function UI(n){switch(n){case Rx:return Float32Array;case Mx:return Uint32Array;default:return Float32Array}}var GI=e3;var Nx={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var W_e=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,$_e=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,t3=class{constructor(e){this.gl_=e.webGlContext;let t=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=t.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=t.createFramebuffer(),this.depthBuffer_=t.createRenderbuffer();let r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,e.vertexShader||W_e),t.compileShader(r);let i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,e.fragmentShader||$_e),t.compileShader(i),this.renderTargetProgram_=t.createProgram(),t.attachShader(this.renderTargetProgram_,r),t.attachShader(this.renderTargetProgram_,i),t.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=t.createBuffer();let o=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),this.renderTargetAttribLocation_=t.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=t.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(s=>{this.uniforms_.push({value:e.uniforms[s],location:t.getUniformLocation(this.renderTargetProgram_,s)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){let t=this.getGL(),r=[t.drawingBufferWidth*this.scaleRatio_,t.drawingBufferHeight*this.scaleRatio_];if(t.bindFramebuffer(t.FRAMEBUFFER,this.getFrameBuffer()),t.bindRenderbuffer(t.RENDERBUFFER,this.getDepthBuffer()),t.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;let i=0,o=t.RGBA,s=0,a=t.RGBA,l=t.UNSIGNED_BYTE,c=null;t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.texImage2D(t.TEXTURE_2D,i,o,r[0],r[1],s,a,l,c),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.renderTargetTexture_,0),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r[0],r[1]),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer_)}}apply(e,t,r,i){let o=this.getGL(),s=e.size;if(o.bindFramebuffer(o.FRAMEBUFFER,t?t.getFrameBuffer():null),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,this.renderTargetTexture_),!t){let l=_t(o.canvas);if(!e.renderTargets[l]){let c=o.getContextAttributes();c&&c.preserveDrawingBuffer&&(o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}o.disable(o.DEPTH_TEST),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.bindBuffer(o.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),o.useProgram(this.renderTargetProgram_),o.enableVertexAttribArray(this.renderTargetAttribLocation_),o.vertexAttribPointer(this.renderTargetAttribLocation_,2,o.FLOAT,!1,0,0),o.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),o.uniform1i(this.renderTargetTextureLocation_,0);let a=e.layerStatesArray[e.layerIndex].opacity;o.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(o,e),o.drawArrays(o.TRIANGLES,0,6),i&&i(o,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){let t=this.getGL(),r,i=1;this.uniforms_.forEach(function(o){if(r=typeof o.value=="function"?o.value(e):o.value,r instanceof HTMLCanvasElement||r instanceof ImageData)o.texture||(o.texture=t.createTexture()),t.activeTexture(t[`TEXTURE${i}`]),t.bindTexture(t.TEXTURE_2D,o.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(o.location,i++);else if(Array.isArray(r))switch(r.length){case 2:t.uniform2f(o.location,r[0],r[1]);return;case 3:t.uniform3f(o.location,r[0],r[1],r[2]);return;case 4:t.uniform4f(o.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(o.location,r)})}},n3=t3;var Yd={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},$y={UNSIGNED_BYTE:pY,UNSIGNED_SHORT:gY,UNSIGNED_INT:mY,FLOAT:QO},zI={};function _Y(n){return"shared/"+n}var vY=0;function Y_e(){let n="unique/"+vY;return vY+=1,n}function X_e(n){let e=zI[n];if(!e){let t=document.createElement("canvas");t.width=1,t.height=1,t.style.position="absolute",t.style.left="0",e={users:0,context:yY(t)},zI[n]=e}return e.users+=1,e.context}function Z_e(n){let e=zI[n];if(!e||(e.users-=1,e.users>0))return;let t=e.context,r=t.getExtension("WEBGL_lose_context");r&&r.loseContext();let i=t.canvas;i.width=1,i.height=1,delete zI[n]}var r3=class extends Ic{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?_Y(e.canvasCacheKey):Y_e(),this.gl_=X_e(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;let t=this.gl_.canvas;t.addEventListener(Nx.LOST,this.boundHandleWebGLContextLost_),t.addEventListener(Nx.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Hr(),this.offsetScaleMatrix_=Hr(),this.tmpMat4_=$d(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new n3({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new n3({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(let t in e)this.uniforms_.push({name:t,value:e[t]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===_Y(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];let t=this.gl_.getExtension(e);return this.extensionCache_[e]=t,t}getInstancedRenderingExtension_(){let e=this.getExtension("ANGLE_instanced_arrays");return on(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){let t=this.gl_,r=_t(e),i=this.bufferCache_[r];if(!i){let o=t.createBuffer();i={buffer:e,webGlBuffer:o},this.bufferCache_[r]=i}t.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){let t=this.gl_;this.bindBuffer(e),t.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){let t=_t(e);delete this.bufferCache_[t]}disposeInternal(){let e=this.gl_.canvas;e.removeEventListener(Nx.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(Nx.RESTORED,this.boundHandleWebGLContextRestored_),Z_e(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,t,r){let i=this.gl_,o=this.getCanvas(),s=e.size,a=e.pixelRatio;(o.width!==s[0]*a||o.height!==s[1]*a)&&(o.width=s[0]*a,o.height=s[1]*a,o.style.width=s[0]+"px",o.style.height=s[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,t?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,t){let r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),t&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0)}bindInitialFrameBuffer(){let e=this.getGL(),t=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);let r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,t,r){let i=this.gl_;i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),t)}bindAttribute(e,t,r){let i=this.getGL();this.bindBuffer(e);let o=this.getAttributeLocation(t);i.enableVertexAttribArray(o),i.vertexAttribPointer(o,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,t,r,i){let o=this.gl_,s=t.getSize();o.bindFramebuffer(o.FRAMEBUFFER,t.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,t.getDepthbuffer()),o.viewport(0,0,s[0],s[1]),o.bindTexture(o.TEXTURE_2D,t.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,r?o.ZERO:o.ONE_MINUS_SRC_ALPHA),i?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(e,t){let r=this.gl_;this.getExtension("OES_element_index_uint");let i=r.UNSIGNED_INT,o=4,s=t-e,a=e*o;r.drawElements(r.TRIANGLES,s,i,a)}drawElementsInstanced(e,t,r){let i=this.gl_;this.getExtension("OES_element_index_uint");let o=this.getInstancedRenderingExtension_(),s=i.UNSIGNED_INT,a=4,l=t-e,c=e*a;o.drawElementsInstancedANGLE(i.TRIANGLES,l,s,c,r);for(let f=0;f<this.maxAttributeCount_;f++)o.vertexAttribDivisorANGLE(f,0)}finalizeDraw(e,t,r){for(let i=0,o=this.postProcessPasses_.length;i<o;i++)i===o-1?this.postProcessPasses_[i].apply(e,null,t,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){let t=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(Yd.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Yd.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Yd.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Yd.PIXEL_RATIO,i),this.setUniformFloatVec2(Yd.VIEWPORT_SIZE_PX,[t[0],t[1]]),this.setUniformFloatValue(Yd.ROTATION,r)}applyHitDetectionUniform(e){let t=this.getUniformLocation(Yd.HIT_DETECTION);this.getGL().uniform1i(t,e?1:0),e&&this.setUniformFloatValue(Yd.PIXEL_RATIO,.5)}applyUniforms(e){let t=this.gl_,r,i=0;this.uniforms_.forEach(o=>{if(r=typeof o.value=="function"?o.value(e):o.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!o.texture?(o.prevValue=void 0,o.texture=r):o.texture||(o.prevValue=void 0,o.texture=t.createTexture()),this.bindTexture(o.texture,i,o.name),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE);let s=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&s&&o.prevValue!==r&&(o.prevValue=r,t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(o.name,jI(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:t.uniform2f(this.getUniformLocation(o.name),r[0],r[1]);return;case 3:t.uniform3f(this.getUniformLocation(o.name),r[0],r[1],r[2]);return;case 4:t.uniform4f(this.getUniformLocation(o.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&t.uniform1f(this.getUniformLocation(o.name),r)})}useProgram(e,t){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,t&&(this.applyFrameState(t),this.applyUniforms(t))}compileShader(e,t){let r=this.gl_,i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,t){let r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),o=this.compileShader(t,r.VERTEX_SHADER),s=r.createProgram();if(r.attachShader(s,i),r.attachShader(s,o),r.linkProgram(s),!r.getShaderParameter(i,r.COMPILE_STATUS)){let a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(o,r.COMPILE_STATUS)){let a=`Vertex shader compilation failed: ${r.getShaderInfoLog(o)}`;throw new Error(a)}if(r.deleteShader(o),!r.getProgramParameter(s,r.LINK_STATUS)){let a=`GL program linking failed: ${r.getProgramInfoLog(s)}`;throw new Error(a)}return s}getUniformLocation(e){let t=_t(this.currentProgram_);return this.uniformLocationsByProgram_[t]===void 0&&(this.uniformLocationsByProgram_[t]={}),this.uniformLocationsByProgram_[t][e]===void 0&&(this.uniformLocationsByProgram_[t][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[t][e]}getAttributeLocation(e){let t=_t(this.currentProgram_);return this.attribLocationsByProgram_[t]===void 0&&(this.attribLocationsByProgram_[t]={}),this.attribLocationsByProgram_[t][e]===void 0&&(this.attribLocationsByProgram_[t][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[t][e]}makeProjectionTransform(e,t){let r=e.size,i=e.viewState.rotation,o=e.viewState.resolution,s=e.viewState.center;return Ri(t,0,0,2/(o*r[0]),2/(o*r[1]),-i,-s[0],-s[1]),t}setUniformFloatValue(e,t){this.gl_.uniform1f(this.getUniformLocation(e),t)}setUniformFloatVec2(e,t){this.gl_.uniform2fv(this.getUniformLocation(e),t)}setUniformFloatVec4(e,t){this.gl_.uniform4fv(this.getUniformLocation(e),t)}setUniformMatrixValue(e,t){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,t)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,t,r,i,o,s){let a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,t,r,!1,i,o),s&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,t){let r=K_e(e),i=0;for(let o=0;o<e.length;o++){let s=e[o];s.name&&this.enableAttributeArray_(s.name,s.size,s.type||QO,r,i,t),i+=s.size*xY(s.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){Fl(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,t,r,i){let o=this.gl_;r=r||o.createTexture();let s=i?o.NEAREST:o.LINEAR;o.bindTexture(o.TEXTURE_2D,r),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,s),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let a=0,l=o.RGBA,c=0,f=o.RGBA,d=o.UNSIGNED_BYTE;return t instanceof Uint8Array?o.texImage2D(o.TEXTURE_2D,a,l,e[0],e[1],c,f,d,t):t?o.texImage2D(o.TEXTURE_2D,a,l,f,d,t):o.texImage2D(o.TEXTURE_2D,a,l,e[0],e[1],c,f,d,null),r}};function K_e(n){let e=0;for(let t=0;t<n.length;t++){let r=n[t];e+=r.size*xY(r.type)}return e}function xY(n){switch(n){case $y.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case $y.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case $y.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case $y.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var wY=r3;var i3=class extends eu{constructor(e){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=e.gutter||0,this.helper=e.helper,this.loaded=!1,this.ready=!1}setTile(e){if(e!==this.tile)if(this.tile&&this.tile.removeEventListener(gt.CHANGE,this.handleTileChange_),this.tile=e,this.loaded=e.getState()===Ze.LOADED,this.loaded)this.uploadTile();else{if(e instanceof Id){let t=e.getImage();t instanceof Image&&!t.crossOrigin&&(t.crossOrigin="anonymous")}e.addEventListener(gt.CHANGE,this.handleTileChange_)}}uploadTile(){Ct()}setReady(){this.ready=!0,this.dispatchEvent(gt.CHANGE)}handleTileChange_(){this.tile.getState()===Ze.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(e){this.helper=e,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(gt.CHANGE,this.handleTileChange_)}},EY=i3;function SY(n,e,t){let r=t?n.LINEAR:n.NEAREST;n.bindTexture(n.TEXTURE_2D,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r)}function J_e(n,e,t,r){SY(n,e,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t)}function bY(n,e,t,r,i,o){let s=n.getGL(),a,l;t instanceof Float32Array?(a=s.FLOAT,n.getExtension("OES_texture_float"),l=n.getExtension("OES_texture_float_linear")!==null):(a=s.UNSIGNED_BYTE,l=!0),SY(s,e,o&&l);let c=t.byteLength/r[1],f=1;c%8===0?f=8:c%4===0?f=4:c%2===0&&(f=2);let d;switch(i){case 1:{d=s.LUMINANCE;break}case 2:{d=s.LUMINANCE_ALPHA;break}case 3:{d=s.RGB;break}case 4:{d=s.RGBA;break}default:throw new Error(`Unsupported number of bands: ${i}`)}let y=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,f),s.texImage2D(s.TEXTURE_2D,0,d,r[0],r[1],0,d,a,t),s.pixelStorei(s.UNPACK_ALIGNMENT,y)}var Yy=null;function Q_e(){Yy=$n(1,1,void 0,{willReadFrequently:!0})}var o3=class extends EY{constructor(e){super(e),this.textures=[],this.renderSize_=Yn(e.grid.getTileSize(e.tile.tileCoord[0])),this.bandCount=NaN;let t=new GI(Rx,Wy);t.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(t),this.coords=t,this.setTile(e.tile)}setHelper(e){let t=this.helper?.getGL();if(t){this.helper.deleteBuffer(this.coords);for(let r=0;r<this.textures.length;++r)t.deleteTexture(this.textures[r])}super.setHelper(e),e&&e.flushBufferData(this.coords)}uploadTile(){let e=this.helper,t=e.getGL(),r=this.tile;this.textures.length=0;let i;r instanceof Id||r instanceof X0?i=r.getImage():i=r.getData();let o=Yh(i);if(o){let T=t.createTexture();this.textures.push(T),this.bandCount=4,J_e(t,T,o,r.interpolate),this.setReady();return}i=T1(i);let s=r.getSize(),a=[s[0]+2*this.gutter,s[1]+2*this.gutter],l=i instanceof Float32Array,c=a[0]*a[1],f=l?Float32Array:Uint8Array,d=f.BYTES_PER_ELEMENT,y=i.byteLength/a[1];this.bandCount=Math.floor(y/d/a[0]);let p=Math.ceil(this.bandCount/4);if(p===1){let T=t.createTexture();this.textures.push(T),bY(e,T,i,a,this.bandCount,r.interpolate),this.setReady();return}let _=new Array(p);for(let T=0;T<p;++T){let A=t.createTexture();this.textures.push(A);let N=T<p-1?4:(this.bandCount-1)%4+1;_[T]=new f(c*N)}let w=0,b=0,S=a[0]*this.bandCount;for(let T=0;T<a[1];++T){for(let A=0;A<S;++A){let N=i[b+A],O=Math.floor(w/this.bandCount),W=A%this.bandCount,X=Math.floor(W/4),Y=_[X],$=Y.length/c,V=W%4;Y[O*$+V]=N,++w}b+=y/d}for(let T=0;T<p;++T){let A=this.textures[T],N=_[T],O=N.length/c;bY(e,A,N,a,O,r.interpolate)}this.setReady()}getImagePixelData_(e,t,r){let i=this.gutter,o=this.renderSize_[0],s=this.renderSize_[1];Yy||Q_e(),Yy.clearRect(0,0,1,1);let a=e.width,l=e.height,c=a-2*i,f=l-2*i,d=i+Math.floor(c*(t/o)),y=i+Math.floor(f*(r/s)),p;try{Yy.drawImage(e,d,y,1,1,0,0,1,1),p=Yy.getImageData(0,0,1,1).data}catch{return Yy=null,null}return p}getArrayPixelData_(e,t,r,i){let o=this.gutter,s=this.renderSize_[0],a=this.renderSize_[1],l=t[0],c=t[1],f=l+2*o,d=c+2*o,y=o+Math.floor(l*(r/s)),p=o+Math.floor(c*(i/a));if(e instanceof DataView){let w=e.byteLength/(f*d),b=w*(p*f+y),S=e.buffer.slice(b,b+w);return new DataView(S)}let _=this.bandCount*(p*f+y);return e.slice(_,_+this.bandCount)}getPixelData(e,t){if(!this.loaded)return null;if(this.tile instanceof Xh){let r=this.tile.getData(),i=T1(r);if(i){let o=this.tile.getSize();return this.getArrayPixelData_(i,o,e,t)}return this.getImagePixelData_(Yh(r),e,t)}return this.getImagePixelData_(this.tile.getImage(),e,t)}},CY=o3;var s3=class n extends Qb{constructor(e,t){super(e),t=t||{},this.inversePixelTransform_=Hr(),this.postProcesses_=t.postProcesses,this.uniforms_=t.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(sr.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,t){let r=this.getLayer();if(r.hasListener(vi.PRECOMPOSE)){let i=new Cd(vi.PRECOMPOSE,void 0,t,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,t){let r=this.getLayer();if(r.hasListener(vi.POSTCOMPOSE)){let i=new Cd(vi.POSTCOMPOSE,void 0,t,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let t=!0,r=-1,i;for(let s=0,a=e.layerStatesArray.length;s<a;s++){let l=e.layerStatesArray[s].layer,c=l.getRenderer();if(!(c instanceof n)){t=!0;continue}let f=l.getClassName();if((t||f!==i)&&(r+=1,t=!1),i=f,c===this)break}let o="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new wY({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(sr.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,t,r){let i=this.getLayer();if(i.hasListener(e)){Ri(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);let o=new Cd(e,this.inversePixelTransform_,r,t);i.dispatchEvent(o)}}preRender(e,t){this.dispatchRenderEvent_(vi.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(vi.POSTRENDER,e,t)}},IY=s3;var RY={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function TY(n){return 1/(n+2)}function eve(){return{tileIds:new Set,representationsByZ:{}}}function DY(n,e){return n.tileIds.has(_t(e))}function AY(n,e,t){let r=n.representationsByZ;t in r||(r[t]=new Set),r[t].add(e),n.tileIds.add(_t(e.tile))}function a3(n,e){let t=n.layerStatesArray[n.layerIndex];t.extent&&(e=Nr(e,ko(t.extent,n.viewState.projection)));let r=t.layer.getRenderSource();if(!r.getWrapX()){let i=r.getTileGridForProjection(n.viewState.projection).getExtent();i&&(e=Nr(e,i))}return e}function VI(n,e){return`${_t(n)},${n.getKey()},${n.getRevision()},${pg(e)}`}var l3=class extends IY{constructor(e,t){super(e,{uniforms:t.uniforms,postProcesses:t.postProcesses}),this.renderComplete=!1,this.tileTransform_=Hr(),this.tempMat4=$d(),this.tempTileRange_=new W0(0,0,0,0),this.tempTileCoord_=Zh(0,0,0),this.tempSize_=[0,0];let r=t.cacheSize!==void 0?t.cacheSize:512;this.tileRepresentationCache=new D1(r),this.frameState=null,this.renderedProjection_=void 0}reset(e){super.reset({uniforms:e.uniforms})}prepareFrameInternal(e){this.renderedProjection_?e.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=e.viewState.projection):this.renderedProjection_=e.viewState.projection;let r=this.getLayer().getRenderSource();return!r||Ls(a3(e,e.extent))?!1:r.getState()==="ready"}createTileRepresentation(e){return Ct()}enqueueTiles(e,t,r,i,o){let s=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(s.projection),f=l.getGutterForProjection(s.projection),d=_t(l);d in e.wantedTiles||(e.wantedTiles[d]={});let y=e.wantedTiles[d],p=this.tileRepresentationCache,_=a.getMapInternal(),w=Math.max(r-o,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),_?_.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),b=s.rotation,S=b?xw(s.center,s.resolution,b,e.size):void 0;for(let T=r;T>=w;--T){let A=c.getTileRangeForExtentAndZ(t,T,this.tempTileRange_),N=c.getResolution(T);for(let O=A.minX;O<=A.maxX;++O)for(let W=A.minY;W<=A.maxY;++W){if(b&&!c.tileCoordIntersectsViewport([T,O,W],S))continue;let X=Zh(T,O,W,this.tempTileCoord_),Y=VI(l,X),$,V;if(p.containsKey(Y)&&($=p.get(Y),V=$.tile),(!$||$.tile.key!==l.getKey())&&(V=l.getTile(T,O,W,e.pixelRatio,s.projection),!V)||DY(i,V))continue;$?$.setTile(V):($=this.createTileRepresentation({tile:V,grid:c,helper:this.helper,gutter:f}),p.set(Y,$)),AY(i,$,T);let B=V.getKey();y[B]=!0,V.getState()===Ze.IDLE&&(e.tileQueue.isKeyQueued(B)||e.tileQueue.enqueue([V,d,c.getTileCoordCenter(X),N]))}}}beforeTilesRender(e,t){this.helper.prepareDraw(this.frameState,!t,!0)}beforeTilesMaskRender(e){return!1}renderTile(e,t,r,i,o,s,a,l,c,f,d){}renderTileMask(e,t,r,i){}drawTile_(e,t,r,i,o,s,a){if(!t.ready)return;let c=t.tile.tileCoord,f=pg(c),d=f in s?s[f]:1,y=a.getResolution(r),p=Yn(a.getTileSize(r),this.tempSize_),_=a.getOrigin(r),w=a.getTileCoordExtent(c),b=d<1?-1:TY(r);d<1&&(e.animate=!0);let S=e.viewState,T=S.center[0],A=S.center[1],N=p[0]+2*i,O=p[1]+2*i,W=N/O,X=(T-_[0])/(p[0]*y),Y=(_[1]-A)/(p[1]*y),$=S.resolution/y,V=c[1],B=c[2];Wv(this.tileTransform_),hd(this.tileTransform_,2/(e.size[0]*$/N),-2/(e.size[1]*$/N)),qU(this.tileTransform_,S.rotation),hd(this.tileTransform_,1,1/W),gb(this.tileTransform_,(p[0]*(V-X)-i)/N,(p[1]*(B-Y)-i)/O),this.renderTile(t,this.tileTransform_,e,o,y,p,_,w,b,i,d)}renderFrame(e){this.frameState=e,this.renderComplete=!0;let t=this.helper.getGL();this.preRender(t,e);let r=e.viewState,i=this.getLayer(),o=i.getRenderSource(),s=o.getTileGridForProjection(r.projection),a=o.getGutterForProjection(r.projection),l=a3(e,e.extent),c=s.getZForResolution(r.resolution,o.zDirection),f=eve(),d=i.getPreload();if(e.nextExtent){let A=s.getZForResolution(r.nextResolution,o.zDirection),N=a3(e,e.nextExtent);this.enqueueTiles(e,N,A,f,d)}this.enqueueTiles(e,l,c,f,0),d>0&&setTimeout(()=>{this.enqueueTiles(e,l,c-1,f,d-1)},0);let y={},p=!1,_=f.representationsByZ;if(c in _){let A=_t(this),N=e.time;for(let O of _[c]){let W=O.tile;if(W.getState()===Ze.EMPTY)continue;let X=W.tileCoord;if(O.ready){let V=W.getAlpha(A,N);if(V===1){W.endTransition(A);continue}p=!0;let B=pg(X);y[B]=V}if(this.renderComplete=!1,this.findAltTiles_(s,X,c+1,f))continue;let $=s.getMinZoom();for(let V=c-1;V>=$&&!this.findAltTiles_(s,X,V,f);--V);}}let w=Object.keys(_).map(Number).sort(sb);if(this.beforeTilesMaskRender(e))for(let A=0,N=w.length;A<N;++A){let O=w[A];for(let W of _[O]){let X=W.tile.tileCoord;if(pg(X)in y)continue;let $=s.getTileCoordExtent(X);this.renderTileMask(W,O,$,TY(O))}}this.beforeTilesRender(e,p);for(let A=0,N=w.length;A<N;++A){let O=w[A];for(let W of _[O]){let X=W.tile.tileCoord;pg(X)in y||this.drawTile_(e,W,O,a,l,y,s)}}if(c in _)for(let A of _[c]){let N=A.tile.tileCoord;pg(N)in y&&this.drawTile_(e,A,c,a,l,y,s)}this.beforeFinalize(e),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);let S=this.helper.getCanvas();return this.tileRepresentationCache.expireCache(),this.postRender(t,e),S}beforeFinalize(e){}findAltTiles_(e,t,r,i){let o=e.getTileRangeForTileCoordAndZ(t,r,this.tempTileRange_);if(!o)return!1;let s=!0,a=this.tileRepresentationCache,l=this.getLayer().getRenderSource();for(let c=o.minX;c<=o.maxX;++c)for(let f=o.minY;f<=o.maxY;++f){let d=VI(l,[r,c,f]),y=!1;if(a.containsKey(d)){let p=a.get(d);p.ready&&!DY(i,p.tile)&&(AY(i,p,r),y=!0)}y||(s=!1)}return s}clearCache(){super.clearCache();let e=this.tileRepresentationCache;e.forEach(t=>t.dispose()),e.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach(e=>e.setHelper(this.helper))}disposeInternal(){super.disposeInternal(),delete this.frameState}},MY=l3;var xn=tn(dt({},RY),{TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"}),Px={TEXTURE_COORD:"a_textureCoord"},tve=[{name:Px.TEXTURE_COORD,size:2,type:$y.FLOAT}],u3=class extends MY{constructor(e,t){super(e,t),this.program_,this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.indices_=new GI(Mx,Wy),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=t.paletteTextures||[]}reset(e){if(super.reset(e),this.helper){let t=this.helper.getGL();for(let r of this.paletteTextures_)r.delete(t)}if(this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);let t=this.helper.getGL();for(let r of this.paletteTextures_)r.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();let e=this.helper.getGL();for(let t of this.paletteTextures_)t.getTexture(e);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){let e=this.helper.getGL();for(let t of this.paletteTextures_)t.delete(e)}super.removeHelper()}createTileRepresentation(e){return new CY(e)}beforeTilesRender(e,t){super.beforeTilesRender(e,t),this.helper.useProgram(this.program_,e)}renderTile(e,t,r,i,o,s,a,l,c,f,d){let y=this.helper.getGL();this.helper.bindBuffer(e.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(tve);let p=0;for(;p<e.textures.length;){let W=`${xn.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(e.textures[p],p,W),++p}for(let W=0;W<this.paletteTextures_.length;++W){let X=this.paletteTextures_[W],Y=X.getTexture(y);this.helper.bindTexture(Y,p,X.name),++p}let _=r.viewState,w=s[0]+2*f,b=s[1]+2*f,T=e.tile.tileCoord,A=T[1],N=T[2];this.helper.setUniformMatrixValue(xn.TILE_TRANSFORM,jI(this.tempMat4,t)),this.helper.setUniformFloatValue(xn.TRANSITION_ALPHA,d),this.helper.setUniformFloatValue(xn.DEPTH,c);let O=i;f>0&&(O=l,Nr(O,i,O)),this.helper.setUniformFloatVec4(xn.RENDER_EXTENT,O),this.helper.setUniformFloatValue(xn.RESOLUTION,_.resolution),this.helper.setUniformFloatValue(xn.ZOOM,_.zoom),this.helper.setUniformFloatValue(xn.TEXTURE_PIXEL_WIDTH,w),this.helper.setUniformFloatValue(xn.TEXTURE_PIXEL_HEIGHT,b),this.helper.setUniformFloatValue(xn.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(xn.TEXTURE_ORIGIN_X,a[0]+A*s[0]*o-f*o),this.helper.setUniformFloatValue(xn.TEXTURE_ORIGIN_Y,a[1]-N*s[1]*o+f*o),this.helper.drawElements(0,this.indices_.getSize())}getData(e){if(!this.helper.getGL())return null;let r=this.frameState;if(!r)return null;let i=this.getLayer(),o=Ir(r.pixelToCoordinateTransform,e.slice()),s=r.viewState,a=i.getExtent();if(a&&!Ms(ko(a,s.projection),o))return null;let l=i.getSources(Bl([o]),s.resolution),c,f,d;for(c=l.length-1;c>=0;--c)if(f=l[c],f.getState()==="ready"){if(d=f.getTileGridForProjection(s.projection),f.getWrapX())break;let p=d.getExtent();if(!p||Ms(p,o))break}if(c<0)return null;let y=this.tileRepresentationCache;for(let p=d.getZForResolution(s.resolution);p>=d.getMinZoom();--p){let _=d.getTileCoordForCoordAndZ(o,p),w=VI(f,_);if(!y.containsKey(w))continue;let b=y.get(w);if(b.tile.getState()===Ze.EMPTY)return null;if(!b.loaded)continue;let T=d.getOrigin(p),A=Yn(d.getTileSize(p)),N=d.getResolution(p),O=(o[0]-T[0])/N-_[1]*A[0],W=(T[1]-o[1])/N-_[2]*A[1];return b.getPixelData(O,W)}return null}disposeInternal(){let e=this.helper;if(e){let t=e.getGL();for(let r of this.paletteTextures_)r.delete(t);this.paletteTextures_.length=0,t.deleteProgram(this.program_),delete this.program_,e.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}},NY=u3;var c3=class{constructor(e,t){this.name=e,this.data=t,this.texture_=null}getTexture(e){if(!this.texture_){let t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=t}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}},PY=c3;function nve(n,e){return`operator_${n}_${Object.keys(e.functions).length}`}function Lx(n){let e=n.toString();return e.includes(".")?e:e+".0"}function d3(n){if(n.length<2||n.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${n.length}(${n.map(Lx).join(", ")})`}function rve(n){let e=Vs(n),t=e.length>3?e[3]:1;return d3([e[0]/255,e[1]/255,e[2]/255,t])}function ive(n){let e=Yn(n);return d3(e)}var h3={},ove=0;function HI(n){return n in h3||(h3[n]=ove++),h3[n]}function sve(n){return Lx(HI(n))}function qI(n){return"u_var_"+n}function LY(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}var f3="getBandValue",p3="u_paletteTextures",ave="featureId",lve="geometryType",uve=-9999999;function kY(n,e,t,r){let i=xo(n,e,t);return g3(i,e,r)}function wr(n){return(e,t,r)=>{let i=t.args.length,o=new Array(i);for(let s=0;s<i;++s)o[s]=g3(t.args[s],r,e);return n(o,e)}}var cve={[je.Get]:(n,e)=>{let r=e.args[0].value;r in n.properties||(n.properties[r]={name:r,type:e.type});let o="a_prop_"+r;return Gu(e.type,vo)&&(o=`(${o} > 0.0)`),o},[je.Id]:n=>(n.featureId=!0,"a_"+ave),[je.GeometryType]:n=>(n.geometryType=!0,"a_"+lve),[je.LineMetric]:()=>"currentLineMetric",[je.Var]:(n,e)=>{let r=e.args[0].value;r in n.variables||(n.variables[r]={name:r,type:e.type});let o=qI(r);return Gu(e.type,vo)&&(o=`(${o} > 0.0)`),o},[je.Has]:(n,e)=>{let r=e.args[0].value;return r in n.properties||(n.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${Lx(uve)})`},[je.Resolution]:()=>"u_resolution",[je.Zoom]:()=>"u_zoom",[je.Time]:()=>"u_time",[je.Any]:wr(n=>`(${n.join(" || ")})`),[je.All]:wr(n=>`(${n.join(" && ")})`),[je.Not]:wr(([n])=>`(!${n})`),[je.Equal]:wr(([n,e])=>`(${n} == ${e})`),[je.NotEqual]:wr(([n,e])=>`(${n} != ${e})`),[je.GreaterThan]:wr(([n,e])=>`(${n} > ${e})`),[je.GreaterThanOrEqualTo]:wr(([n,e])=>`(${n} >= ${e})`),[je.LessThan]:wr(([n,e])=>`(${n} < ${e})`),[je.LessThanOrEqualTo]:wr(([n,e])=>`(${n} <= ${e})`),[je.Multiply]:wr(n=>`(${n.join(" * ")})`),[je.Divide]:wr(([n,e])=>`(${n} / ${e})`),[je.Add]:wr(n=>`(${n.join(" + ")})`),[je.Subtract]:wr(([n,e])=>`(${n} - ${e})`),[je.Clamp]:wr(([n,e,t])=>`clamp(${n}, ${e}, ${t})`),[je.Mod]:wr(([n,e])=>`mod(${n}, ${e})`),[je.Pow]:wr(([n,e])=>`pow(${n}, ${e})`),[je.Abs]:wr(([n])=>`abs(${n})`),[je.Floor]:wr(([n])=>`floor(${n})`),[je.Ceil]:wr(([n])=>`ceil(${n})`),[je.Round]:wr(([n])=>`floor(${n} + 0.5)`),[je.Sin]:wr(([n])=>`sin(${n})`),[je.Cos]:wr(([n])=>`cos(${n})`),[je.Atan]:wr(([n,e])=>e!==void 0?`atan(${n}, ${e})`:`atan(${n})`),[je.Sqrt]:wr(([n])=>`sqrt(${n})`),[je.Match]:wr(n=>{let e=n[0],t=n[n.length-1],r=null;for(let i=n.length-3;i>=1;i-=2){let o=n[i],s=n[i+1];r=`(${e} == ${o} ? ${s} : ${r||t})`}return r}),[je.Between]:wr(([n,e,t])=>`(${n} >= ${e} && ${n} <= ${t})`),[je.Interpolate]:wr(([n,e,...t])=>{let r="";for(let i=0;i<t.length-2;i+=2){let o=t[i],s=r||t[i+1],a=t[i+2],l=t[i+3],c;n===Lx(1)?c=`(${e} - ${o}) / (${a} - ${o})`:c=`(pow(${n}, (${e} - ${o})) - 1.0) / (pow(${n}, (${a} - ${o})) - 1.0)`,r=`mix(${s}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[je.Case]:wr(n=>{let e=n[n.length-1],t=null;for(let r=n.length-3;r>=0;r-=2){let i=n[r],o=n[r+1];t=`(${i} ? ${o} : ${t||e})`}return t}),[je.In]:wr(([n,...e],t)=>{let r=nve("in",t),i=[];for(let o=0;o<e.length;o+=1)i.push(`  if (inputValue == ${e[o]}) { return true; }`);return t.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${n})`}),[je.Array]:wr(n=>`vec${n.length}(${n.join(", ")})`),[je.Color]:wr(n=>{if(n.length===1)return`vec4(vec3(${n[0]} / 255.0), 1.0)`;if(n.length===2)return`vec4(vec3(${n[0]} / 255.0), ${n[1]})`;let e=n.slice(0,3).map(r=>`${r} / 255.0`);if(n.length===3)return`vec4(${e.join(", ")}, 1.0)`;let t=n[3];return`vec4(${e.join(", ")}, ${t})`}),[je.Band]:wr(([n,e,t],r)=>{if(!(f3 in r.functions)){let i="",o=r.bandCount||1;for(let s=0;s<o;s++){let a=Math.floor(s/4),l=s%4;s===o-1&&l===1&&(l=3);let c=`${xn.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${s+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[f3]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${xn.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${xn.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${f3}(${n}, ${e??"0.0"}, ${t??"0.0"})`}),[je.Palette]:(n,e)=>{let[t,...r]=e.args,i=r.length,o=new Uint8Array(i*4);for(let c=0;c<r.length;c++){let f=r[c].value,d=Vs(f),y=c*4;o[y]=d[0],o[y+1]=d[1],o[y+2]=d[2],o[y+3]=d[3]*255}n.paletteTextures||(n.paletteTextures=[]);let s=`${p3}[${n.paletteTextures.length}]`,a=new PY(s,o);n.paletteTextures.push(a);let l=g3(t,_n,n);return`texture2D(${s}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function g3(n,e,t){if(n instanceof v1){let r=cve[n.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(n.operator)}`);return r(t,n,e)}if((n.type&_n)>0)return Lx(n.value);if((n.type&vo)>0)return n.value.toString();if((n.type&ys)>0)return sve(n.value.toString());if((n.type&Qo)>0)return rve(n.value);if((n.type&zu)>0)return d3(n.value);if((n.type&xd)>0)return ive(n.value);throw new Error(`Unexpected expression ${n.value} (expected type ${ag(e)})`)}function jg(n,e,t){let r=x1();return kY(e,t,r,n)}function OY(n,e){let t=`
    attribute vec2 ${Px.TEXTURE_COORD};
    uniform mat4 ${xn.TILE_TRANSFORM};
    uniform float ${xn.TEXTURE_PIXEL_WIDTH};
    uniform float ${xn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${xn.TEXTURE_RESOLUTION};
    uniform float ${xn.TEXTURE_ORIGIN_X};
    uniform float ${xn.TEXTURE_ORIGIN_Y};
    uniform float ${xn.DEPTH};

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = ${Px.TEXTURE_COORD};
      v_mapCoord = vec2(
        ${xn.TEXTURE_ORIGIN_X} + ${xn.TEXTURE_RESOLUTION} * ${xn.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],
        ${xn.TEXTURE_ORIGIN_Y} - ${xn.TEXTURE_RESOLUTION} * ${xn.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]
      );
      gl_Position = ${xn.TILE_TRANSFORM} * vec4(${Px.TEXTURE_COORD}, ${xn.DEPTH}, 1.0);
    }
  `,r=tn(dt({},LY()),{bandCount:e}),i=[];if(n.color!==void 0){let d=jg(r,n.color,Qo);i.push(`color = ${d};`)}if(n.contrast!==void 0){let d=jg(r,n.contrast,_n);i.push(`color.rgb = clamp((${d} + 1.0) * color.rgb - (${d} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.exposure!==void 0){let d=jg(r,n.exposure,_n);i.push(`color.rgb = clamp((${d} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(n.saturation!==void 0){let d=jg(r,n.saturation,_n);i.push(`
      float saturation = ${d} + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `)}if(n.gamma!==void 0){let d=jg(r,n.gamma,_n);i.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${d}));`)}if(n.brightness!==void 0){let d=jg(r,n.brightness,_n);i.push(`color.rgb = clamp(color.rgb + ${d}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}let o={},s=Object.keys(r.variables).length;if(s>1&&!n.variables)throw new Error(`Missing variables in style (expected ${r.variables})`);for(let d=0;d<s;++d){let y=r.variables[Object.keys(r.variables)[d]];if(!(y.name in n.variables))throw new Error(`Missing '${y.name}' in style variables`);let p=qI(y.name);o[p]=function(){let _=n.variables[y.name];return typeof _=="string"&&(_=HI(_)),_!==void 0?_:-9999999}}let a=Object.keys(o).map(function(d){return`uniform float ${d};`}),l=Math.ceil(e/4);a.push(`uniform sampler2D ${xn.TILE_TEXTURE_ARRAY}[${l}];`),r.paletteTextures&&a.push(`uniform sampler2D ${p3}[${r.paletteTextures.length}];`);let c=Object.keys(r.functions).map(function(d){return r.functions[d]}),f=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 ${xn.RENDER_EXTENT};
    uniform float ${xn.TRANSITION_ALPHA};
    uniform float ${xn.TEXTURE_PIXEL_WIDTH};
    uniform float ${xn.TEXTURE_PIXEL_HEIGHT};
    uniform float ${xn.RESOLUTION};
    uniform float ${xn.ZOOM};

    ${a.join(`
`)}

    ${c.join(`
`)}

    void main() {
      if (
        v_mapCoord[0] < ${xn.RENDER_EXTENT}[0] ||
        v_mapCoord[1] < ${xn.RENDER_EXTENT}[1] ||
        v_mapCoord[0] > ${xn.RENDER_EXTENT}[2] ||
        v_mapCoord[1] > ${xn.RENDER_EXTENT}[3]
      ) {
        discard;
      }

      vec4 color = texture2D(${xn.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);

      ${i.join(`
`)}

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= ${xn.TRANSITION_ALPHA};
    }`;return{vertexShader:t,fragmentShader:f,uniforms:o,paletteTextures:r.paletteTextures}}var WI=class extends tS{constructor(e){e=e?Object.assign({},e):{};let t=e.style||{};delete e.style,super(e),this.sources_=e.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=t,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(sr.SOURCE,this.handleSourceUpdate_)}getSources(e,t){let r=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(e,t):this.sources_:r?[r]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){let e=this.getRenderSource();return e?e.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();let e=this.getSource();if(e)if(e.getState()==="loading"){let t=()=>{e.getState()==="ready"&&(e.removeEventListener("change",t),this.setStyle(this.style_))};e.addEventListener("change",t)}else this.setStyle(this.style_)}getSourceBandCount_(){let e=Number.MAX_SAFE_INTEGER,t=this.getSources([-e,-e,e,e],e);return t&&t.length&&"bandCount"in t[0]?t[0].bandCount:4}createRenderer(){let e=OY(this.style_,this.getSourceBandCount_());return new NY(this,{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,cacheSize:this.getCacheSize(),paletteTextures:e.paletteTextures})}renderSources(e,t){let r=this.getRenderer(),i;for(let o=0,s=t.length;o<s;++o)this.renderedSource_=t[o],r.prepareFrame(e)&&(i=r.renderFrame(e));return i}render(e,t){this.rendered=!0;let r=e.viewState,i=this.getSources(e.extent,r.resolution),o=!0;for(let a=0,l=i.length;a<l;++a){let c=i[a],f=c.getState();if(f=="loading"){let d=()=>{c.getState()=="ready"&&(c.removeEventListener("change",d),this.changed())};c.addEventListener("change",d)}o=o&&f=="ready"}let s=this.renderSources(e,i);if(this.getRenderer().renderComplete&&o)return this.renderedResolution_=r.resolution,s;if(this.renderedResolution_>.5*r.resolution){let a=this.getSources(e.extent,this.renderedResolution_).filter(l=>!i.includes(l));if(a.length>0)return this.renderSources(e,a)}return s}setStyle(e){if(this.styleVariables_=e.variables||{},this.style_=e,this.hasRenderer()){let t=OY(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}};WI.prototype.dispose;var m3=WI;function kx(n){return Array.isArray(n)?Math.min(...n):n}var y3=class extends z0{constructor(e,t,r,i,o,s,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let f=c?Nr(r,c):r,d=Lo(f),y=$0(e,t,d,i),p=.5,_=new Y0(e,t,f,l,y*p,i),w=_.calculateSourceExtent(),b=Ls(w)?null:s(w,y,o),S=b?wt.IDLE:wt.EMPTY,T=b?b.getPixelRatio():1;super(r,i,T,S),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=_,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=T,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==wt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){let e=this.sourceImage_.getState();if(e==wt.LOADED){let t=nn(this.targetExtent_)/this.targetResolution_,r=Qn(this.targetExtent_)/this.targetResolution_;this.canvas_=Kb(t,r,this.sourcePixelRatio_,kx(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==wt.IDLE){this.state=wt.LOADING,this.changed();let e=this.sourceImage_.getState();e==wt.LOADED||e==wt.ERROR?this.reproject_():(this.sourceListenerKey_=an(this.sourceImage_,gt.CHANGE,t=>{let r=this.sourceImage_.getState();(r==wt.LOADED||r==wt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){An(this.sourceListenerKey_),this.sourceListenerKey_=null}},FY=y3;var _3={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},v3=class extends _i{constructor(e,t){super(e),this.image=t}},x3=class extends iy{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){let t=this.getResolutions();if(t){let r=ld(t,e,0);e=t[r]}return e}getImage(e,t,r,i){let o=this.getProjection();if(!o||!i||Gr(o,i))return o&&(i=o),this.getImageInternal(e,t,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Gr(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==t&&ll(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new FY(o,i,e,t,r,(s,a,l)=>this.getImageInternal(s,a,l,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,r,i){if(this.loader){let o=hve(e,t,r,1),s=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Ns(this.wantedExtent_,o)||Ns(this.image.getExtent(),o))&&(this.wantedResolution_&&kx(this.wantedResolution_)===s||kx(this.image.getResolution())===s)))return this.image;this.wantedProjection_=i,this.wantedExtent_=o,this.wantedResolution_=s,this.image=new z0(o,s,r,this.loader),this.image.addEventListener(gt.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){let t=e.target,r;switch(t.getState()){case wt.LOADING:this.loading=!0,r=_3.IMAGELOADSTART;break;case wt.LOADED:this.loading=!1,r=_3.IMAGELOADEND;break;case wt.ERROR:this.loading=!1,r=_3.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new v3(r,t))}};function BY(n,e){n.getImage().src=e}function hve(n,e,t,r){let i=e/t,o=Lo(n),s=uc(nn(n)/i,4),a=uc(Qn(n)/i,4),l=uc((r-1)*s/2,4),c=s+2*l,f=uc((r-1)*a/2,4),d=a+2*f;return Bf(o,i,0,[c,d])}var jY=x3;function UY(n){let e=n.load||Ub,t=n.imageExtent,r=n.crossOrigin??null;return()=>{let i=new Image;return i.crossOrigin=r,e(i,n.url).then(o=>{let s=nn(t)/o.width,a=Qn(t)/o.height;return{image:o,extent:t,resolution:s!==a?[s,a]:a,pixelRatio:1}})}}var w3=class extends jY{constructor(e){let t=e.crossOrigin!==void 0?e.crossOrigin:null,r=e.imageLoadFunction!==void 0?e.imageLoadFunction:BY;super({attributions:e.attributions,interpolate:e.interpolate,projection:rn(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image=null,this.image=new z0(this.imageExtent_,void 0,1,UY({url:e.url,imageExtent:e.imageExtent,crossOrigin:t,load:(i,o)=>(this.image.setImage(i),r(this.image,o),Ub(i))})),this.image.addEventListener(gt.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(e,t,r,i){return Wn(e,this.image.getExtent())?this.image:null}getUrl(){return this.url_}},GY=w3;function zY(n,e,t,r){let i=document.createElement("script"),o="olc_"+_t(e);function s(){delete window[o],i.parentNode.removeChild(i)}i.async=!0,i.src=n+(n.includes("?")?"&":"?")+(r||"callback")+"="+o;let a=setTimeout(function(){s(),t&&t()},1e4);window[o]=function(l){clearTimeout(a),s(),e(l)},document.head.appendChild(i)}var E3=class extends Ld{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:rn("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)zY(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{let t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){let t=e.target;if(!t.status||t.status>=200&&t.status<300){let r;try{r=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(r)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){let t=rn("EPSG:4326"),r=this.getProjection(),i;if(e.bounds!==void 0){let c=_m(t,r);i=ww(e.bounds,c)}let o=vl(r),s=e.minzoom||0,a=e.maxzoom||22,l=Hu({extent:o,maxZoom:a,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=hS(e.tiles,l),e.attribution&&!this.getAttributions()){let c=i!==void 0?i:o;this.setAttributions(function(f){return Wn(c,f.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}},VY=E3;var $I="1.3.0";function fve(n,e,t,r,i){i.WIDTH=t[0],i.HEIGHT=t[1];let o=r.getAxisOrientation(),s=Ew(i.VERSION,"1.3")>=0;i[s?"CRS":"SRS"]=r.getCode();let a=s&&o.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),mg(n,i)}function HY(n,e,t,r,i,o,s){o=Object.assign({REQUEST:"GetMap"},o);let a=e/t,l=[lD(nn(n)/a,4),lD(Qn(n)/a,4)];if(t!=1)switch(s){case"geoserver":let f=90*t+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+f:o.FORMAT_OPTIONS="dpi:"+f;break;case"mapserver":o.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":o.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return fve(i,n,l,r,o)}function b3(n,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:$I,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},n)}var S3=class extends Ld{constructor(e){e=e||{};let t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Ci(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,r,i){let o=rn(r),s=this.getProjection()||o,a=this.getTileGrid();a||(a=this.getTileGridForProjection(s));let l=vm(e,o,s),c=$0(s,o,e,t),f=a.getZForResolution(c,this.zDirection),d=a.getResolution(f),y=a.getTileCoordForCoordAndZ(l,f);if(a.getResolutions().length<=y[0])return;let p=a.getTileCoordExtent(y,this.tmpExtent_),_=this.gutter_;_!==0&&(p=Zo(p,d*_,p));let w={QUERY_LAYERS:this.params_.LAYERS};Object.assign(w,b3(this.params_,"GetFeatureInfo"),i);let b=Math.floor((l[0]-p[0])/d),S=Math.floor((p[3]-l[1])/d);return w[this.v13_?"I":"X"]=b,w[this.v13_?"J":"Y"]=S,this.getRequestUrl_(y,p,1,s||o,w)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;let r={SERVICE:"WMS",VERSION:$I,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){let i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){let i=this.getProjection()?this.getProjection().getMetersPerUnit():1,o=28e-5;r.SCALE=e*i/o}return Object.assign(r,t),mg(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,r,i,o){let s=this.urls;if(!s)return;let a;if(s.length==1)a=s[0];else{let l=Tu(Jb(e),s.length);a=s[l]}return HY(t,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,o,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0,t=[];for(let r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){let e=this.params_.VERSION||$I;this.v13_=Ew(e,"1.3")>=0}tileUrlFunction(e,t,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);let o=i.getResolution(e[0]),s=i.getTileCoordExtent(e,this.tmpExtent_),a=this.gutter_;a!==0&&(s=Zo(s,o*a,s));let l=Object.assign({},b3(this.params_,"GetMap"));return this.getRequestUrl_(e,s,t,r,l)}},qY=S3;var WY=[],C3=class extends Nc{constructor(e,t,r,i,o){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=o,this.wrappedTileCoord=r}getContext(){return this.context_||(this.context_=$n(1,1,WY)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){let t=_t(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(Uh(this.context_),WY.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}},$Y=C3;var I3=class extends Nc{constructor(e,t,r,i,o,s){super(e,t,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=r,this.key=r}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Ze.IDLE&&(this.setState(Ze.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(Ze.ERROR)}setFeatures(e){this.features_=e,this.setState(Ze.LOADED)}setLoader(e){this.loader_=e}},YY=I3;var T3=class extends pS{constructor(e){let t=e.projection||"EPSG:3857",r=e.extent||vl(t),i=e.tileGrid||Hu({extent:r,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:i,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:dve,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:YY,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,r){if(r.getState()===Ze.IDLE){r.setState(Ze.LOADING);let i=r.wrappedTileCoord,o=this.getTileGridForProjection(t),s=o.getTileCoordExtent(i),a=i[0],l=o.getResolution(a);Zo(s,-l,s);let c=this.projection;t&&this.projection&&!Gr(t,c)&&(s=jl(s,t,c));let f=this.tileGrid,d=f.getExtent();d&&Nr(s,d,s);let y=l;t&&c&&!Gr(t,c)&&(y=l/c.getMetersPerUnit()/t.getMetersPerUnit());let p=f.getZForResolution(y,this.zDirection);f.forEachTileCoord(s,p,_=>{let w=this.tileUrlFunction(_,e,t);this.sourceTiles_[w]||(this.sourceTiles_[w]=new this.tileClass(_,w?Ze.IDLE:Ze.EMPTY,w,this.format_,this.tileLoadFunction));let b=this.sourceTiles_[w];r.sourceTiles.push(b),this.tileKeysBySourceTileUrl_[w]||(this.tileKeysBySourceTileUrl_[w]=[]),this.tileKeysBySourceTileUrl_[w].push(r.getKey());let S=b.getState();if(S<Ze.LOADED){let T=A=>{this.handleTileChange(A);let N=b.getState();if(N===Ze.LOADED||N===Ze.ERROR){let O=b.getKey();O in r.errorTileKeys?b.getState()===Ze.LOADED&&delete r.errorTileKeys[O]:r.loadingSourceTiles--,N===Ze.ERROR?r.errorTileKeys[O]=!0:b.removeEventListener(gt.CHANGE,T),r.loadingSourceTiles===0&&r.setState(la(r.errorTileKeys)?Ze.LOADED:Ze.ERROR)}};b.addEventListener(gt.CHANGE,T),r.loadingSourceTiles++}S===Ze.IDLE&&(b.extent=f.getTileCoordExtent(_),b.projection=this.projection,b.resolution=f.getResolution(_[0]),b.load())}),r.loadingSourceTiles||r.setState(r.sourceTiles.some(_=>_.getState()===Ze.ERROR)?Ze.ERROR:Ze.LOADED)}return r.sourceTiles}removeSourceTiles(e){let t=e.getKey(),r=e.sourceTiles;for(let i=0,o=r.length;i<o;++i){let s=r[i].getTileUrl();if(!this.tileKeysBySourceTileUrl_[s])return;let a=this.tileKeysBySourceTileUrl_[s].indexOf(t);a!==-1&&(this.tileKeysBySourceTileUrl_[s].splice(a,1),this.tileKeysBySourceTileUrl_[s].length===0&&(delete this.tileKeysBySourceTileUrl_[s],delete this.sourceTiles_[s]))}}getTile(e,t,r,i,o){let s=[e,t,r],a=this.getTileCoordForTileUrlFunction(s,o),l=this.getTileGrid().getExtent(),c=this.projection,f=this.getTileGridForProjection(o);if(a&&l){let p=f.getTileCoordExtent(a);Zo(p,-f.getResolution(e),p),Wn(l,!o||!c||Gr(o,c)?p:jl(p,o,c))||(a=null)}let d=!0;if(a!==null){let p=this.tileGrid,_=f.getResolution(e),w=_;o&&c&&!Gr(o,c)&&(w=_/c.getMetersPerUnit()/o.getMetersPerUnit());let b=p.getZForResolution(w,1),S=f.getTileCoordExtent(a);Zo(S,-_,S),p.forEachTileCoord(!o||!c||Gr(o,c)?S:jl(S,o,c),b,T=>{d=d&&!this.tileUrlFunction(T,i,c)})}let y=new $Y(s,d?Ze.EMPTY:Ze.IDLE,a,this.getSourceTiles.bind(this,i,o),this.removeSourceTiles.bind(this));return y.key=this.getKey(),y}getTileGridForProjection(e){let t=e.getCode(),r=this.tileGrids_[t];if(!r){let i=this.projection;if(i!==null&&!Gr(i,e))return Nd(e);let o=this.tileGrid,s=o.getResolutions().slice(),a=s.map(function(f,d){return o.getOrigin(d)}),l=s.map(function(f,d){return o.getTileSize(d)}),c=43;for(let f=s.length;f<c;++f)s.push(s[f-1]/2),a.push(a[f-1]),l.push(l[f-1]);r=new tf({extent:o.getExtent(),origins:a,resolutions:s,tileSizes:l}),this.tileGrids_[t]=r}return r}getTilePixelRatio(e){return e}getTilePixelSize(e,t,r){let i=this.getTileGridForProjection(r),o=Yn(i.getTileSize(e),this.tmpSize);return[Math.round(o[0]*t),Math.round(o[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}},YI=T3;function dve(n,e){n.setLoader(function(t,r,i){BP(e,n.getFormat(),t,r,i,n.onLoad.bind(n),n.onError.bind(n))})}var D3=class extends Ld{constructor(e){let t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",r=e.tileGrid,i=e.urls;i===void 0&&e.url!==void 0&&(i=cS(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:i,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=fS(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;let t=e.join(`
`);this.setTileUrlFunction(fS(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let e=this.urls?this.urls.slice(0):[];for(let t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){let t=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?mg(e,r):e.replace(/\{(\w+?)\}/g,function(s,a){return a.toLowerCase()in r?r[a.toLowerCase()]:s});let i=this.tileGrid,o=this.dimensions_;return(function(s,a,l){if(!s)return;let c={TileMatrix:i.getMatrixId(s[0]),TileCol:s[1],TileRow:s[2]};Object.assign(c,o);let f=e;return t=="KVP"?f=mg(f,c):f=f.replace(/\{(\w+?)\}/g,function(d,y){return encodeURIComponent(c[y])}),f})}},XY=D3;function ZY(n,e){let r=n.Contents.Layer?.find(function(I){return I.Identifier==e.layer});if(!r)return null;let i=n.Contents.TileMatrixSet,o;r.TileMatrixSetLink.length>1?"projection"in e?o=r.TileMatrixSetLink.findIndex(function(I){let j=i.find(function(q){return q.Identifier==I.TileMatrixSet}).SupportedCRS,Q=rn(j),Z=rn(e.projection);return Q&&Z?Gr(Q,Z):j==e.projection}):o=r.TileMatrixSetLink.findIndex(function(I){return I.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);let s=r.TileMatrixSetLink[o].TileMatrixSet,a=r.TileMatrixSetLink[o].TileMatrixSetLimits,l=r.Format[0];"format"in e&&(l=e.format),o=r.Style.findIndex(function(I){return"style"in e?I.Title==e.style:I.isDefault}),o<0&&(o=0);let c=r.Style[o].Identifier,f={};"Dimension"in r&&r.Dimension.forEach(function(I,M,j){let Q=I.Identifier,Z=I.Default;Z===void 0&&(Z=I.Value[0]),f[Q]=Z});let y=n.Contents.TileMatrixSet.find(function(I){return I.Identifier==s}),p,_=y.SupportedCRS;if(_&&(p=rn(_)),"projection"in e){let I=rn(e.projection);I&&(!p||Gr(I,p))&&(p=I)}let w=!1,b=p.getAxisOrientation().startsWith("ne"),S=y.TileMatrix[0],T={MinTileCol:0,MinTileRow:0,MaxTileCol:S.MatrixWidth-1,MaxTileRow:S.MatrixHeight-1};if(a){T=a[a.length-1];let I=y.TileMatrix.find(M=>M.Identifier===T.TileMatrix||y.Identifier+":"+M.Identifier===T.TileMatrix);I&&(S=I)}let A=r.BoundingBox?.find(I=>rn(I.crs)&&Gr(rn(I.crs),p)),N=S.ScaleDenominator*28e-5/p.getMetersPerUnit(),O=b?[S.TopLeftCorner[1],S.TopLeftCorner[0]]:S.TopLeftCorner,W=S.TileWidth*N,X=S.TileHeight*N,Y=A?.extent??y.BoundingBox;Y&&b&&(Y=[Y[1],Y[0],Y[3],Y[2]]);let $=[O[0]+W*T.MinTileCol,O[1]-X*(1+T.MaxTileRow),O[0]+W*(1+T.MaxTileCol),O[1]-X*T.MinTileRow];if(Y!==void 0&&!Ns(Y,$)){let I=r.WGS84BoundingBox,M=rn("EPSG:4326").getExtent();if($=Y,I)w=I[0]===M[0]&&I[2]===M[2];else{let j=jl(Y,y.SupportedCRS,"EPSG:4326");w=j[0]-1e-10<=M[0]&&j[2]+1e-10>=M[2]}}let V=q9(y,$,a),B=[],v=e.requestEncoding;if(v=v!==void 0?v:"","OperationsMetadata"in n&&"GetTile"in n.OperationsMetadata){let I=n.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let M=0,j=I.length;M<j;++M)if(I[M].Constraint){let Z=I[M].Constraint.find(function(q){return q.name=="GetEncoding"}).AllowedValues.Value;if(v===""&&(v=Z[0]),v==="KVP")Z.includes("KVP")&&B.push(I[M].href);else break}else I[M].href&&(v="KVP",B.push(I[M].href))}return B.length===0&&(v="REST",r.ResourceURL.forEach(function(I){I.resourceType==="tile"&&(l=I.format,B.push(I.template))})),{urls:B,layer:e.layer,matrixSet:s,format:l,projection:p,requestEncoding:v,tileGrid:V,style:c,dimensions:f,wrapX:w,crossOrigin:e.crossOrigin}}var pve=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,gve=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`,XI=class{constructor(e){this.gl_=e,this.program_=ZI(e,gve,pve),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,r,i,o,s,a,l,c,f,d,y,p){let _=this.gl_;l===void 0&&(l=i),c===void 0&&(c=o),s===void 0&&(s=t),a===void 0&&(a=r),f===void 0&&(f=s),d===void 0&&(d=a),y===void 0&&(y=_.canvas.width),p===void 0&&(p=_.canvas.height),_.bindTexture(_.TEXTURE_2D,e),_.useProgram(this.program_),_.bindBuffer(_.ARRAY_BUFFER,this.positionBuffer),_.enableVertexAttribArray(this.positionLocation),_.vertexAttribPointer(this.positionLocation,2,_.FLOAT,!1,0,0),_.bindBuffer(_.ARRAY_BUFFER,this.texcoordBuffer),_.enableVertexAttribArray(this.texcoordLocation),_.vertexAttribPointer(this.texcoordLocation,2,_.FLOAT,!1,0,0);let w=Ax(0,y,0,p,-1,1);w=lY(w,l,c,0),w=JO(w,f,d,1),_.uniformMatrix4fv(this.matrixLocation,!1,w);let b=uY(i/t,o/r,0);b=JO(b,s/t,a/r,1),_.uniformMatrix4fv(this.textureMatrixLocation,!1,b),_.uniform1i(this.textureLocation,0),_.drawArrays(_.TRIANGLES,0,this.positions.length/2)}};function KY(n,e,t){let r=n.createShader(e);if(r===null)throw new Error("Shader compilation failed");if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){let i=n.getShaderInfoLog(r);throw i===null?new Error("Shader info log creation failed"):new Error(i)}return r}function ZI(n,e,t){let r=n.createProgram(),i=KY(n,n.VERTEX_SHADER,t),o=KY(n,n.FRAGMENT_SHADER,e);if(r===null)throw new Error("Program creation failed");if(n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw n.getProgramInfoLog(r)===null?new Error("Program info log creation failed"):new Error;return r}var mve=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,yve=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,_ve=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,vve=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function JY(n,e,t,r){let i;return t&&t.length?i=t.shift():Ai?i=new OffscreenCanvas(n||300,e||300):i=document.createElement("canvas"),n&&(i.width=n),e&&(i.height=e),i.getContext("webgl",r)}function QY(n){let e=n.canvas;e.width=1,e.height=1,n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)}var A3=[];function eX(n,e,t,r,i,o,s,a,l,c,f,d,y,p){let _=Math.round(r*e),w=Math.round(r*t);n.canvas.width=_,n.canvas.height=w;let b,S;if(S=n.createTexture(),n.bindTexture(n.TEXTURE_2D,S),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),y?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,_,w,0,n.RGBA,f,null),b=n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,b),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,S,0),b===null)throw new Error("Could not create framebuffer");if(S===null)throw new Error("Could not create texture");if(l.length===0)return{width:_,height:w,framebuffer:b,texture:S};let T=Ci();l.forEach(function(V,B,v){hm(T,V.extent)});let A,N,O,W=1/i;if(!p||l.length!==1||c!==0){if(A=n.createTexture(),S===null)throw new Error("Could not create texture");N=Math.round(nn(T)*W),O=Math.round(Qn(T)*W);let V=n.getParameter(n.MAX_TEXTURE_SIZE),B=Math.max(N,O),v=B>V?V/B:1,I=Math.round(N*v),M=Math.round(O*v);n.bindTexture(n.TEXTURE_2D,A),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),y?(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)):(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,I,M,0,n.RGBA,f,null);let j=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,j),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0);let Q=new XI(n);l.forEach(function(Z,q,K){let oe=(Z.extent[0]-T[0])*W*v,_e=-(Z.extent[3]-T[3])*W*v,F=nn(Z.extent)*W*v,ee=Qn(Z.extent)*W*v;if(n.bindFramebuffer(n.FRAMEBUFFER,j),n.viewport(0,0,I,M),Z.clipExtent){let ce=(Z.clipExtent[0]-T[0])*W*v,pe=-(Z.clipExtent[3]-T[3])*W*v,J=nn(Z.clipExtent)*W*v,xe=Qn(Z.clipExtent)*W*v;n.enable(n.SCISSOR_TEST),n.scissor(y?ce:Math.round(ce),y?pe:Math.round(pe),y?J:Math.round(ce+J)-Math.round(ce),y?xe:Math.round(pe+xe)-Math.round(pe))}Q.drawImage(Z.texture,Z.width,Z.height,c,c,Z.width-2*c,Z.height-2*c,y?oe:Math.round(oe),y?_e:Math.round(_e),y?F:Math.round(oe+F)-Math.round(oe),y?ee:Math.round(_e+ee)-Math.round(_e),I,M),n.disable(n.SCISSOR_TEST)}),n.deleteFramebuffer(j)}else A=l[0].texture,N=l[0].width,O=l[0].width;let X=Ps(s),Y=Ps(T),$=V=>{let B=(V[0][0]-X[0])/o*r,v=-(V[0][1]-X[1])/o*r,I=(V[1][0]-X[0])/o*r,M=-(V[1][1]-X[1])/o*r,j=(V[2][0]-X[0])/o*r,Q=-(V[2][1]-X[1])/o*r;return{u1:I,v1:M,u0:B,v0:v,u2:j,v2:Q}};n.bindFramebuffer(n.FRAMEBUFFER,b),n.viewport(0,0,_,w);{let V=[],B=[],v=ZI(n,vve,_ve);n.useProgram(v);let I=n.getUniformLocation(v,"u_texture");n.bindTexture(n.TEXTURE_2D,A),n.uniform1i(I,0),a.getTriangles().forEach(function(oe,_e,F){let ee=oe.source,ce=oe.target,{u1:pe,v1:J,u0:xe,v0:Se,u2:ve,v2:re}=$(ce),Ve=(ee[0][0]-Y[0])/i/N,G=-(ee[0][1]-Y[1])/i/O,be=(ee[1][0]-Y[0])/i/N,Ie=-(ee[1][1]-Y[1])/i/O,U=(ee[2][0]-Y[0])/i/N,ae=-(ee[2][1]-Y[1])/i/O;V.push(pe,J,xe,Se,ve,re),B.push(be,Ie,Ve,G,U,ae)});let M=Ax(0,_,w,0,-1,1),j=n.getUniformLocation(v,"u_matrix");n.uniformMatrix4fv(j,!1,M);let Q=n.getAttribLocation(v,"a_position"),Z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Z),n.bufferData(n.ARRAY_BUFFER,new Float32Array(V),n.STATIC_DRAW),n.vertexAttribPointer(Q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Q);let q=n.getAttribLocation(v,"a_texcoord"),K=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,K),n.bufferData(n.ARRAY_BUFFER,new Float32Array(B),n.STATIC_DRAW),n.vertexAttribPointer(q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(q),n.drawArrays(n.TRIANGLES,0,V.length/2)}if(d){let V=ZI(n,yve,mve);n.useProgram(V);let B=Ax(0,_,w,0,-1,1),v=n.getUniformLocation(V,"u_matrix");n.uniformMatrix4fv(v,!1,B);let I=Array.isArray(d)?d:[0,0,0,255],M=n.getUniformLocation(V,"u_val");!0?n.uniform4fv(M,I):n.uniform4iv(M,I);let Q=n.getAttribLocation(V,"a_position"),Z=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,Z),n.vertexAttribPointer(Q,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(Q);let q=a.getTriangles().reduce(function(K,oe){let _e=oe.target,{u1:F,v1:ee,u0:ce,v0:pe,u2:J,v2:xe}=$(_e);return K.concat([F,ee,ce,pe,ce,pe,J,xe,J,xe,F,ee])},[]);n.bufferData(n.ARRAY_BUFFER,new Float32Array(q),n.STATIC_DRAW),n.drawArrays(n.LINES,0,q.length/2)}return{width:_,height:w,framebuffer:b,texture:S}}var R3=class extends Xh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let t=e.sourceProj,r=t.getExtent(),i=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?i?Nr(r,i):r:i;let o=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),s=this.targetTileGrid_.getExtent(),a=this.sourceTileGrid_.getExtent(),l=s?Nr(o,s):o;if(Ff(l)===0){this.state=Ze.EMPTY;return}r&&(a?a=Nr(a,r):a=r);let c=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=e.targetProj,d=Zb(t,f,l,c);if(!isFinite(d)||d<=0){this.state=Ze.EMPTY;return}let y=e.errorThreshold!==void 0?e.errorThreshold:.5;if(this.triangulation_=new Y0(t,f,l,a,d*y,c,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=Ze.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(d);let p=this.triangulation_.calculateSourceExtent();if(a&&(t.canWrapX()?(p[1]=Hn(p[1],a[1],a[3]),p[3]=Hn(p[3],a[1],a[3])):p=Nr(p,a)),!Ff(p))this.state=Ze.EMPTY;else{let _=0,w=0;t.canWrapX()&&(_=nn(r),w=Math.floor((p[0]-r[0])/_)),pm(p.slice(),t,!0).forEach(S=>{let T=this.sourceTileGrid_.getTileRangeForExtentAndZ(S,this.sourceZ_),A=e.getTileFunction;for(let N=T.minX;N<=T.maxX;N++)for(let O=T.minY;O<=T.maxY;O++){let W=A(this.sourceZ_,N,O,this.pixelRatio_);if(W){let X=w*_;this.sourceTiles_.push({tile:W,offset:X})}}++w}),this.sourceTiles_.length===0&&(this.state=Ze.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){let e=[],t=!1;if(this.sourceTiles_.forEach(N=>{let O=N.tile;if(!O||O.getState()!==Ze.LOADED)return;let W=O.getSize(),X=this.gutter_,Y,$=T1(O.getData());$?Y=$:(t=!0,Y=_9(Yh(O.getData())));let V=[W[0]+2*X,W[1]+2*X],B=Y instanceof Float32Array,v=V[0]*V[1],I=B?Float32Array:Uint8ClampedArray,M=new I(Y.buffer),j=I.BYTES_PER_ELEMENT,Q=j*M.length/v,Z=M.byteLength/V[1],q=Math.floor(Z/j/V[0]),K=this.sourceTileGrid_.getTileCoordExtent(O.tileCoord);K[0]+=N.offset,K[2]+=N.offset;let oe=this.clipExtent_?.slice();oe&&(oe[0]+=N.offset,oe[2]+=N.offset),e.push({extent:K,clipExtent:oe,data:M,dataType:I,bytesPerPixel:Q,pixelSize:V,bandCount:q})}),this.sourceTiles_.length=0,e.length===0){this.state=Ze.ERROR,this.changed();return}let r=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(r),o=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],a=Math.round(o*this.pixelRatio_),l=Math.round(s*this.pixelRatio_),c=this.targetTileGrid_.getResolution(r),f=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,p=new e[0].dataType(y*a*l),_=JY(a,l,A3,{premultipliedAlpha:!1,antialias:!1}),w,b=_.RGBA,S;e[0].dataType==Float32Array?(S=_.FLOAT,_.getExtension("WEBGL_color_buffer_float"),_.getExtension("OES_texture_float"),_.getExtension("EXT_float_blend"),w=_.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(S=_.UNSIGNED_BYTE,w=this.interpolate);let T=4,A=Math.ceil(y/T);for(let N=A-1;N>=0;--N){let O=[];for(let I=0,M=e.length;I<M;++I){let j=e[I],Q=j.pixelSize,Z=Q[0],q=Q[1],K=new j.dataType(T*Z*q),oe=j.data,_e=N*T;for(let ee=0,ce=K.length;ee<ce;ee+=T)K[ee]=oe[_e],K[ee+1]=oe[_e+1],K[ee+2]=oe[_e+2],K[ee+3]=oe[_e+3],_e+=y;let F=_.createTexture();_.bindTexture(_.TEXTURE_2D,F),w?(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR)):(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST)),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texImage2D(_.TEXTURE_2D,0,b,Z,q,0,b,S,K),O.push({extent:j.extent,clipExtent:j.clipExtent,texture:F,width:Z,height:q})}let{framebuffer:W,width:X,height:Y}=eX(_,o,s,this.pixelRatio_,f,c,d,this.triangulation_,O,this.gutter_,S,this.renderEdges_,w),$=X,V=Y*T,B=new e[0].dataType($*V);_.bindFramebuffer(_.FRAMEBUFFER,W),_.readPixels(0,0,X,Y,_.RGBA,S,B);let v=N*T;for(let I=0,M=B.length;I<M;I+=T){let j=($-1-(I/V|0))*V+I%V;p[v]=B[j],p[v+1]=B[j+1],p[v+2]=B[j+2],p[v+3]=B[j+3],v+=y}}if(QY(_),A3.push(_.canvas),t){let N=$n(o,s),O=new ImageData(p,o);N.putImageData(O,0,0),this.reprojData_=N.canvas}else this.reprojData_=p;this.reprojSize_=[a,l],this.state=Ze.LOADED,this.changed()}load(){if(this.state!==Ze.IDLE&&this.state!==Ze.ERROR)return;this.state=Ze.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{let r=t.getState();if(r!==Ze.IDLE&&r!==Ze.LOADING)return;e++;let i=an(t,gt.CHANGE,()=>{let o=t.getState();(o==Ze.LOADED||o==Ze.ERROR||o==Ze.EMPTY)&&(An(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==Ze.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(An),this.sourcesListenerKeys_=null}},tX=R3;var M3=class extends dS{constructor(e){let t=e.projection===void 0?"EPSG:3857":e.projection,r=e.tileGrid;r===void 0&&t&&(r=Hu({extent:vl(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize})),super({cacheSize:.1,attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:t,tileGrid:r,state:e.state,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.tileSize_=e.tileSize?Yn(e.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=e.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=e.bandCount===void 0?4:e.bandCount,this.tileGridForProjection_={},this.crossOrigin_=e.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(e){this.tileSizes_=e}getTileSize(e){if(this.tileSizes_)return this.tileSizes_[e];if(this.tileSize_)return this.tileSize_;let t=this.getTileGrid();return t?Yn(t.getTileSize(e)):[256,256]}getGutterForProjection(e){let t=this.getProjection();return(!t||Gr(t,e))&&!this.transformMatrix?this.gutter_:0}setLoader(e){this.loader_=e}getReprojTile_(e,t,r,i,o,s){let a=this.tileGrid||this.getTileGridForProjection(o||i),l=Math.max.apply(null,a.getResolutions().map((_,w)=>{let b=Yn(a.getTileSize(w)),S=this.getTileSize(w);return Math.max(S[0]/b[0],S[1]/b[1])})),c=this.getTileGridForProjection(i),f=[e,t,r],d=this.getTileCoordForTileUrlFunction(f,i),y=Object.assign({sourceProj:o||i,sourceTileGrid:a,targetProj:i,targetTileGrid:c,tileCoord:f,wrappedTileCoord:d,pixelRatio:l,gutter:this.gutter_,getTileFunction:(_,w,b,S)=>this.getTile(_,w,b,S,void 0,s),transformMatrix:this.transformMatrix},this.tileOptions),p=new tX(y);return p.key=this.getKey(),p}getTile(e,t,r,i,o,s){let a=this.getProjection();if(o&&(a&&!Gr(a,o)||this.transformMatrix))return this.getReprojTile_(e,t,r,o,a,s);let l=this.getTileSize(e),c=this.loader_,f=new AbortController,d={signal:f.signal,crossOrigin:this.crossOrigin_},y=this.getTileCoordForTileUrlFunction([e,t,r]);if(!y)return null;let p=this.getKey(),_=Td(this,p,e,t,r);if(s&&s.containsKey(_))return s.get(_);let w=y[0],b=y[1],S=y[2],T=this.getTileGrid()?.getFullTileRange(w);T&&(d.maxY=T.getHeight()-1);function A(){return b0(function(){return c(w,b,S,d)})}let N=Object.assign({tileCoord:[e,t,r],loader:A,size:l,controller:f},this.tileOptions),O=new Xh(N);return O.key=this.getKey(),O.addEventListener(gt.CHANGE,this.handleTileChange_),s?.set(_,O),O}handleTileChange_(e){let t=e.target,r=_t(t),i=t.getState(),o;i==Ze.LOADING?(this.tileLoadingKeys_[r]=!0,o=Pd.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],o=i==Ze.ERROR?Pd.TILELOADERROR:i==Ze.LOADED?Pd.TILELOADEND:void 0),o&&this.dispatchEvent(new sy(o,t))}getTileGridForProjection(e){let t=this.getProjection();if(this.tileGrid&&(!t||Gr(t,e))&&!this.transformMatrix)return this.tileGrid;let r=_t(e);return r in this.tileGridForProjection_||(this.tileGridForProjection_[r]=Nd(e)),this.tileGridForProjection_[r]}setTileGridForProjection(e,t){let r=rn(e);if(r){let i=_t(r);i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=t)}}},KI=M3;var xve=Object.defineProperty,wve=Math.pow,Kr=(n,e)=>xve(n,"name",{value:e,configurable:!0}),is=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())}),E0t=Kr((n,e)=>{let t=!1,r="",i=L.GridLayer.extend({createTile:Kr((o,s)=>{let a=document.createElement("img"),l=new AbortController,c=l.signal;return a.cancel=()=>{l.abort()},t||(n.getHeader().then(f=>{f.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):f.tileType===2?r="image/png":f.tileType===3?r="image/jpeg":f.tileType===4?r="image/webp":f.tileType===5&&(r="image/avif")}),t=!0),n.getZxy(o.z,o.x,o.y,c).then(f=>{if(f){let d=new Blob([f.data],{type:r}),y=window.URL.createObjectURL(d);a.src=y}else a.style.display="none";a.cancel=void 0,s(void 0,a)}).catch(f=>{if(f.name!=="AbortError")throw f}),a},"createTile"),_removeTile:Kr(function(o){let s=this._tiles[o];s&&(s.el.cancel&&s.el.cancel(),s.el.width=0,s.el.height=0,s.el.deleted=!0,L.DomUtil.remove(s.el),delete this._tiles[o],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(o)}))},"_removeTile")});return new i(e)},"leafletRasterLayer"),Eve=Kr(n=>(e,t)=>{if(t instanceof AbortController)return n(e,t);let r=new AbortController;return n(e,r).then(i=>t(void 0,i.data,i.cacheControl||"",i.expires||""),i=>t(i)).catch(i=>t(i)),{cancel:Kr(()=>r.abort(),"cancel")}},"v3compat"),bve=class{constructor(e){this.tilev4=Kr((t,r)=>is(this,null,function*(){if(t.type==="json"){let p=t.url.substr(10),_=this.tiles.get(p);if(_||(_=new Ug(p),this.tiles.set(p,_)),this.metadata){let b=yield _.getTileJson(t.url);return r.signal.throwIfAborted(),{data:b}}let w=yield _.getHeader();return r.signal.throwIfAborted(),(w.minLon>=w.maxLon||w.minLat>=w.maxLat)&&console.error(`Bounds of PMTiles archive ${w.minLon},${w.minLat},${w.maxLon},${w.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:w.minZoom,maxzoom:w.maxZoom,bounds:[w.minLon,w.minLat,w.maxLon,w.maxLat]}}}let i=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=t.url.match(i);if(!o)throw new Error("Invalid PMTiles protocol URL");let s=o[1],a=this.tiles.get(s);a||(a=new Ug(s),this.tiles.set(s,a));let l=o[2],c=o[3],f=o[4],d=yield a.getHeader(),y=yield a?.getZxy(+l,+c,+f,r.signal);if(r.signal.throwIfAborted(),y)return{data:new Uint8Array(y.data),cacheControl:y.cacheControl,expires:y.expires};if(d.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=Eve(this.tilev4),this.tiles=new Map,this.metadata=e?.metadata||!1,this.errorOnMissingTile=e?.errorOnMissingTile||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};Kr(bve,"Protocol");function nX(n,e){return(e>>>0)*4294967296+(n>>>0)}Kr(nX,"toNum");function rX(n,e){let t=e.buf,r=t[e.pos++],i=(r&112)>>4;if(r<128||(r=t[e.pos++],i|=(r&127)<<3,r<128)||(r=t[e.pos++],i|=(r&127)<<10,r<128)||(r=t[e.pos++],i|=(r&127)<<17,r<128)||(r=t[e.pos++],i|=(r&127)<<24,r<128)||(r=t[e.pos++],i|=(r&1)<<31,r<128))return nX(n,i);throw new Error("Expected varint not more than 10 bytes")}Kr(rX,"readVarintRemainder");function Xy(n){let e=n.buf,t=e[n.pos++],r=t&127;return t<128||(t=e[n.pos++],r|=(t&127)<<7,t<128)||(t=e[n.pos++],r|=(t&127)<<14,t<128)||(t=e[n.pos++],r|=(t&127)<<21,t<128)?r:(t=e[n.pos],r|=(t&15)<<28,rX(r,n))}Kr(Xy,"readVarint");function P3(n,e,t,r,i){return i===0?r!==0?[n-1-t,n-1-e]:[t,e]:[e,t]}Kr(P3,"rotate");function iX(n,e,t){if(n>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>=1<<n||t>=1<<n)throw new Error("tile x/y outside zoom level bounds");let r=((1<<n)*(1<<n)-1)/3,i=n-1,[o,s]=[e,t];for(let a=1<<i;a>0;a>>=1){let l=o&a,c=s&a;r+=(3*l^c)*(1<<i),[o,s]=P3(a,o,s,l,c),i--}return r}Kr(iX,"zxyToTileId");function oX(n){let e=3*n+1;return e<4294967296?31-Math.clz32(e):63-Math.clz32(e/4294967296)}Kr(oX,"tileIdToZ");function Sve(n){let e=oX(n)>>1;if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let t=((1<<e)*(1<<e)-1)/3,r=n-t,i=0,o=0,s=1<<e;for(let a=1;a<s;a<<=1){let l=a&r/2,c=a&(r^l);[i,o]=P3(a,i,o,l,c),r=r/2,i+=l,o+=c}return[e,i,o]}Kr(Sve,"tileIdToZxy");var Cve=(n=>(n[n.Unknown=0]="Unknown",n[n.None=1]="None",n[n.Gzip=2]="Gzip",n[n.Brotli=3]="Brotli",n[n.Zstd=4]="Zstd",n))(Cve||{});function JI(n,e){return is(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Uq(new Uint8Array(n));let t=new Response(n).body;if(!t)throw new Error("Failed to read response stream");let r=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}throw new Error("Compression method not supported")})}Kr(JI,"defaultDecompress");var Gg=(n=>(n[n.Unknown=0]="Unknown",n[n.Mvt=1]="Mvt",n[n.Png=2]="Png",n[n.Jpeg=3]="Jpeg",n[n.Webp=4]="Webp",n[n.Avif=5]="Avif",n))(Gg||{});function sX(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}Kr(sX,"tileTypeExt");var Ive=127;function aX(n,e){let t=0,r=n.length-1;for(;t<=r;){let i=r+t>>1,o=e-n[i].tileId;if(o>0)t=i+1;else if(o<0)r=i-1;else return n[i]}return r>=0&&(n[r].runLength===0||e-n[r].tileId<n[r].runLength)?n[r]:null}Kr(aX,"findTile");var Tve=class{constructor(e){this.file=e}getKey(){return this.file.name}getBytes(e,t){return is(this,null,function*(){return{data:yield this.file.slice(e,e+t).arrayBuffer()}})}};Kr(Tve,"FileSource");var lX=class{constructor(e,t=new Headers){var r,i;this.url=e,this.customHeaders=t,this.mustReload=!1;let o="";"navigator"in globalThis&&(o=(i=(r=globalThis.navigator)==null?void 0:r.userAgent)!=null?i:"");let s=o.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(o);this.chromeWindowsNoCache=!1,s&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,i){return is(this,null,function*(){let o,s;r?s=r:(o=new AbortController,s=o.signal);let a=new Headers(this.customHeaders);a.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload?l="reload":this.chromeWindowsNoCache&&(l="no-store");let c=yield fetch(this.url,{signal:s,cache:l,headers:a});if(e===0&&c.status===416){let y=c.headers.get("Content-Range");if(!y||!y.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let p=+y.substr(8);c=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:`bytes=0-${p-1}`}})}let f=c.headers.get("Etag");if(f!=null&&f.startsWith("W/")&&(f=null),c.status===416||i&&f&&f!==i)throw this.mustReload=!0,new N3(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(c.status>=300)throw new Error(`Bad response code: ${c.status}`);let d=c.headers.get("Content-Length");if(c.status===200&&(!d||+d>t))throw o&&o.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield c.arrayBuffer(),etag:f||void 0,cacheControl:c.headers.get("Cache-Control")||void 0,expires:c.headers.get("Expires")||void 0}})}};Kr(lX,"FetchSource");var Dve=lX;function uu(n,e){let t=n.getUint32(e+4,!0),r=n.getUint32(e+0,!0);return t*wve(2,32)+r}Kr(uu,"getUint64");function uX(n,e){let t=new DataView(n),r=t.getUint8(7);if(r>3)throw new Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:uu(t,8),rootDirectoryLength:uu(t,16),jsonMetadataOffset:uu(t,24),jsonMetadataLength:uu(t,32),leafDirectoryOffset:uu(t,40),leafDirectoryLength:uu(t,48),tileDataOffset:uu(t,56),tileDataLength:uu(t,64),numAddressedTiles:uu(t,72),numTileEntries:uu(t,80),numTileContents:uu(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}Kr(uX,"bytesToHeader");function L3(n){let e={buf:new Uint8Array(n),pos:0},t=Xy(e),r=[],i=0;for(let o=0;o<t;o++){let s=Xy(e);r.push({tileId:i+s,offset:0,length:0,runLength:1}),i+=s}for(let o=0;o<t;o++)r[o].runLength=Xy(e);for(let o=0;o<t;o++)r[o].length=Xy(e);for(let o=0;o<t;o++){let s=Xy(e);s===0&&o>0?r[o].offset=r[o-1].offset+r[o-1].length:r[o].offset=s-1}return r}Kr(L3,"deserializeIndex");var cX=class extends Error{};Kr(cX,"EtagMismatch");var N3=cX;function k3(n,e){return is(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let r=t.data.slice(0,Ive),i=uX(r,t.etag),o=t.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),s=`${n.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,a=L3(yield e(o,i.internalCompression));return[i,[s,a.length,a]]})}Kr(k3,"getHeaderAndRoot");function O3(n,e,t,r,i){return is(this,null,function*(){let o=yield n.getBytes(t,r,void 0,i.etag),s=yield e(o.data,i.internalCompression),a=L3(s);if(a.length===0)throw new Error("Empty directory is invalid");return a})}Kr(O3,"getDirectory");var Ave=class{constructor(e=100,t=!0,r=JI){this.cache=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return is(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,r.data;let i=yield k3(e,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(t,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]})}getDirectory(e,t,r,i){return is(this,null,function*(){let o=`${e.getKey()}|${i.etag||""}|${t}|${r}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,s.data;let a=yield O3(e,this.decompress,t,r,i);return this.cache.set(o,{lastUsed:this.counter++,data:a}),this.prune(),a})}prune(){if(this.cache.size>this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return is(this,null,function*(){this.cache.delete(e.getKey())})}};Kr(Ave,"ResolvedValueCache");var hX=class{constructor(e=100,t=!0,r=JI){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return is(this,null,function*(){let t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;let i=new Promise((o,s)=>{k3(e,this.decompress).then(a=>{a[1]&&this.cache.set(a[1][0],{lastUsed:this.counter++,data:Promise.resolve(a[1][2])}),o(a[0]),this.prune()}).catch(a=>{s(a)})});return this.cache.set(t,{lastUsed:this.counter++,data:i}),i})}getDirectory(e,t,r,i){return is(this,null,function*(){let o=`${e.getKey()}|${i.etag||""}|${t}|${r}`,s=this.cache.get(o);if(s)return s.lastUsed=this.counter++,yield s.data;let a=new Promise((l,c)=>{O3(e,this.decompress,t,r,i).then(f=>{l(f),this.prune()}).catch(f=>{c(f)})});return this.cache.set(o,{lastUsed:this.counter++,data:a}),a})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,i)=>{r.lastUsed<e&&(e=r.lastUsed,t=i)}),t&&this.cache.delete(t)}}invalidate(e){return is(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let r=new Promise((i,o)=>{this.getHeader(e).then(s=>{i(),this.invalidations.delete(t)}).catch(s=>{o(s)})});this.invalidations.set(t,r)})}};Kr(hX,"SharedPromiseCache");var Rve=hX,fX=class{constructor(e,t,r){typeof e=="string"?this.source=new Dve(e):this.source=e,r?this.decompress=r:this.decompress=JI,t?this.cache=t:this.cache=new Rve}getHeader(){return is(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,i){return is(this,null,function*(){let o=iX(e,t,r),s=yield this.cache.getHeader(this.source);if(e<s.minZoom||e>s.maxZoom)return;let a=s.rootDirectoryOffset,l=s.rootDirectoryLength;for(let c=0;c<=3;c++){let f=yield this.cache.getDirectory(this.source,a,l,s),d=aX(f,o);if(d){if(d.runLength>0){let y=yield this.source.getBytes(s.tileDataOffset+d.offset,d.length,i,s.etag);return{data:yield this.decompress(y.data,s.tileCompression),cacheControl:y.cacheControl,expires:y.expires}}a=s.leafDirectoryOffset+d.offset,l=d.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(e,t,r,i){return is(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,i)}catch(o){if(o instanceof N3)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,i);throw o}})}getMetadataAttempt(){return is(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(r))})}getMetadata(){return is(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof N3)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return is(this,null,function*(){let t=yield this.getHeader(),r=yield this.getMetadata(),i=sX(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${i}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};Kr(fX,"PMTiles");var Ug=fX;var gX=Object.defineProperty,dX=Object.getOwnPropertySymbols,Nve=Object.prototype.hasOwnProperty,Pve=Object.prototype.propertyIsEnumerable,pX=(n,e,t)=>e in n?gX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,QI=(n,e)=>{for(var t in e||(e={}))Nve.call(e,t)&&pX(n,t,e[t]);if(dX)for(var t of dX(e))Pve.call(e,t)&&pX(n,t,e[t]);return n},eT=(n,e)=>gX(n,"name",{value:e,configurable:!0}),Lve=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{a(t.next(l))}catch(c){i(c)}},s=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(n,e)).next())}),mX=class extends KI{constructor(e){super(QI(QI({},e),{state:"loading"})),this.loadImage=eT(r=>new Promise((i,o)=>{let s=new Image;s.addEventListener("load",()=>i(s)),s.addEventListener("error",()=>o(new Error("load failed"))),s.src=r}),"loadImage");let t=new Ug(e.url);t.getHeader().then(r=>{let i=e.projection===void 0?"EPSG:3857":e.projection;this.tileGrid=e.tileGrid||Hu({extent:vl(i),maxResolution:e.maxResolution,minZoom:r.minZoom,maxZoom:r.maxZoom,tileSize:e.tileSize}),this.setLoader((o,s,a)=>Lve(this,null,function*(){let l=yield t.getZxy(o,s,a);if(!l)return new Uint8Array;let c=URL.createObjectURL(new Blob([l.data])),f=yield this.loadImage(c);return URL.revokeObjectURL(c),f})),this.setState("ready")})}};eT(mX,"PMTilesRasterSource");var F3=mX,yX=class extends YI{constructor(e){super(QI(QI({},e),{state:"loading",url:"pmtiles://{z}/{x}/{y}",format:e.format||new zO})),this.tileLoadFunction=eT((t,r)=>{let i=t,o=new RegExp(/pmtiles:\/\/(\d+)\/(\d+)\/(\d+)/),s=r.match(o);if(!(s&&s.length>=4))throw Error("Could not parse tile URL");let a=+s[1],l=+s[2],c=+s[3];i.setLoader((f,d,y)=>{this.pmtiles_.getZxy(a,l,c).then(p=>{if(p){let _=i.getFormat();i.setFeatures(_.readFeatures(p.data,{extent:f,featureProjection:y})),i.setState(Ze.LOADED)}else i.setFeatures([]),i.setState(Ze.EMPTY)}).catch(p=>{i.setFeatures([]),i.setState(Ze.ERROR)})})},"tileLoadFunction"),this.pmtiles_=new Ug(e.url),this.pmtiles_.getHeader().then(t=>{let r=e.projection||"EPSG:3857",i=e.extent||vl(r);this.tileGrid=e.tileGrid||Hu({extent:i,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:e.tileSize||512}),this.setTileLoadFunction(this.tileLoadFunction),this.setState("ready")})}};eT(yX,"PMTilesVectorSource");var _X=yX;var jX=Ol(SX(),1);function qi(n){return typeof n=="string"&&n.length>0}function Vg(n,e,t,r=1e-8){if(typeof n!="number")return null;let i=e-r,o=t+r;return n<i||n>o?null:Math.min(Math.max(n,e),t)}function fi(n){return typeof n=="object"&&n===Object(n)&&!Array.isArray(n)}function kve(n){switch(n){case"int8":return-128;case"int16":return-32768;case"int32":return-2147483648}return n.startsWith("u")?0:null}function Ove(n){switch(n){case"int8":return 127;case"uint8":return 255;case"int16":return 32767;case"uint16":return 65535;case"int32":return 2147483647;case"uint32":return 4294967295}return null}function tT(n){let e={minimum:null,maximum:null},t=l=>l.minimum!==null&&l.maximum!==null,r=n.getMetadata("statistics");if(fi(r)&&(typeof r.minimum=="number"&&(e.minimum=r.minimum),typeof r.maximum=="number"&&(e.maximum=r.maximum),t(e)))return e;let i=n.getMetadata("raster:histogram");if(fi(i)&&(typeof i.min=="number"&&(e.minimum=i.min),typeof i.max=="number"&&(e.maximum=i.max),t(e)))return e;let o=n.getMetadata("classification:classes");if(Array.isArray(o)&&(o.reduce((l,c)=>(l.minimum=Math.min(l.minimum,c.value),l.maximum=Math.max(l.maximum,c.value),l),e),t(e)))return e;let s=n.getMetadata("file:values");if(Array.isArray(s)&&(s.reduce((l,c)=>(l.minimum=Math.min(l.minimum,...c.values),l.maximum=Math.max(l.maximum,...c.values),l),e),t(e)))return e;let a=n.getMetadata("data_type");return a&&(e.minimum=kve(a),e.maximum=Ove(a)),e}function nT(n){let e=[],t=n.getMetadata("nodata");if(typeof t<"u")e.push(t);else{let r=n.getMetadata("file:nodata");if(typeof r<"u")e=r;else{let i=n.getMetadata("classification:classes");Array.isArray(i)&&(e=i.filter(o=>!!o.nodata).map(o=>o.value))}}return e.map(r=>r==="nan"?NaN:r==="+inf"?1/0:r==="-inf"?-1/0:r)}function Ky(n){let e=n.length>=6,t=n[0],r=n[e?3:2],i=n[1],o=n[e?4:3],s={west:t,east:r,south:i,north:o};return e&&(s.base=n[2],s.height=n[5]),s}function q3(n){let{west:e,east:t,south:r,north:i}=Ky(n);return[[[e,i],[e,r],[t,r],[t,i],[e,i]]]}function CX(n){if(n=cu(n,!0),!n)return null;let e=Ky(n),t=[];if(TX(n)){let r=(e.west+360+e.east)/2;r>180&&(r-=360),t.push(r)}else t.push((e.west+e.east)/2);return t.push((e.south+e.north)/2),typeof e.base<"u"&&t.push((e.base+e.height)/2),t}function IX(n){if(Array.isArray(n[0]))return n.map(IX);let[e,t]=n;return[Vg(e,-180,180),Vg(t,-90,90)]}function Ux(n){return fi(n)&&(n.bbox&&(n.bbox=cu(n.bbox)),n.type==="FeatureCollection"?n.features.forEach(e=>Ux(e)):n.type==="Feature"?n.geometry=Ux(n.geometry):n.type==="GeometryCollection"?n.geometries.forEach(e=>Ux(e)):n.coordinates&&(n.coordinates=IX(n.coordinates))),n}function rT(n){if(n.every(r=>typeof r=="number")&&(n=[n]),n=n.map(r=>cu(r)).filter(r=>r!==null),!Array.isArray(n)||n.length===0)return null;let e=n.reduce((r,i)=>{if(TX(i)){let{west:o,east:s,south:a,north:l}=Ky(i);r.push(q3([-180,a,s,l])),r.push(q3([o,a,180,l]))}else r.push(q3(i));return r},[]),t=null;if(e.length===1?t={type:"Polygon",coordinates:e[0]}:e.length>1&&(t={type:"MultiPolygon",coordinates:e}),t)return{type:"Feature",geometry:t,properties:{}}}function cu(n,e=!1){if(!Array.isArray(n)||![4,6].includes(n.length))return null;let{west:t,east:r,south:i,north:o,base:s,height:a}=Ky(n);return t=Vg(t,-180,180),i=Vg(i,-90,90),r=Vg(r,-180,180),o=Vg(o,-90,90),e&&n.length===6?n=[t,i,s,r,o,a]:n=[t,i,r,o],n.some(l=>l===null)?null:n}function TX(n){if(n=cu(n),!n)return!1;let{west:e,east:t}=Ky(n);return e>t}function Jy(n){if(!Array.isArray(n)||n.length===0)return null;let e={west:null,south:null,east:null,north:null},t=["west","south"];for(let i of n){if(i=cu(i),!i)continue;let o=Ky(i);for(let s in o)if(e[s]===null)e[s]=o[s];else{let a=t.includes(s)?Math.min:Math.max;e[s]=a(e[s],o[s])}}let r=[e.west,e.south,e.east,e.north];return cu(r)}var W3=class n{constructor(e,t={},r=[]){if(!fi(e))throw new Error("Given data is not an object");if(e instanceof n){for(let i of r)this[i]=e[i];e=e.toJSON()}this._keyMap=t,this._privateKeys=["_keyMap","_privateKeys"].concat(r);for(let i in e)typeof this[i]>"u"&&(i in t?this[i]=t[i](e[i],this):this[i]=e[i])}isItem(){return this.type==="Feature"}isCatalog(){return this.type==="Catalog"}isCatalogLike(){return this.isCatalog()||this.isCollection()}isCollection(){return this.type==="Collection"}isItemCollection(){return this.type==="FeatureCollection"}isCollectionCollection(){return!1}isAsset(){return!1}isLink(){return!1}isBand(){return!1}getObjectType(){}getAbsoluteUrl(e=!0){return null}getMetadata(e){return this[e]}toGeoJSON(){return null}getBoundingBox(){return null}getCenter(){return CX(this.getBoundingBox())}getBoundingBoxes(){return[]}toJSON(){let e={};return Object.keys(this).forEach(t=>{if(typeof this[t]=="function"||this._privateKeys.includes(t))return;let r=this[t];if(t in this._keyMap){let i=Array.isArray(r)?[]:{};for(let o in r)typeof r[o].toJSON=="function"?i[o]=r[o].toJSON():i[o]=r[o];r=i}e[t]=r}),e}},Hg=W3;var $3=Ol(aT(),1),Y3=["http","https"];function LX(n,e,t=!0){return Fve(n,e,!1,t)}function Fve(n,e=null,t=!1,r=!0){let i=(0,$3.default)(n);if(e&&i.is("relative")){let o=(0,$3.default)(e),s=o.path();!s.endsWith("/")&&!s.endsWith(".json")&&o.path(s+"/"),i=i.absoluteTo(o)}return i.normalize(),t&&(i.query(""),i.fragment("")),r?i.toString():i}var lT="application/geo+json",Bve=["application/json",lT,"text/json"],uT=["image/gif","image/jpeg","image/apng","image/png","image/webp"],X3=["image/tiff; application=geotiff; profile=cloud-optimized","image/vnd.stac.geotiff; cloud-optimized=true"],Gx=["application/geotiff","image/tiff; application=geotiff","image/vnd.stac.geotiff"].concat(X3),$0t=uT.concat(Gx);function zx(n,e,t=!1){return Array.isArray(e)||(e=[e]),t&&typeof n>"u"?!0:typeof n!="string"?!1:(e=e.map(r=>r.toLowerCase()),e.includes(n.toLowerCase()))}function kX(n,e=!1){return zx(n,Bve,e)}var Z3=Ol(aT(),1),K3=class extends Hg{constructor(e,t=null,r={},i=[]){super(e,r,["_context"].concat(i)),this._context||(this._context=t)}getAbsoluteUrl(e=!0){return this._context?LX(this.href,this._context.getAbsoluteUrl(),e):this.href.includes("://")?e?this.href:(0,Z3.default)(this.href):null}getContext(){return this._context}canBrowserDisplayImage(e=!1){if(typeof this.href!="string")return!1;if(!e&&typeof this.type>"u")return!1;let t=this.getAbsoluteUrl(!1);t||(t=(0,Z3.default)(this.href));let r=t.protocol().toLowerCase(),i=t.suffix().toLowerCase();return qi(r)&&!Y3.includes(r)?!1:qi(this.type)&&uT.includes(this.type.toLowerCase())?!0:!!(typeof this.type>"u"&&qi(i)&&(i==="jpg"||uT.includes("image/"+i)))}isType(e){return qi(this.type)&&zx(this.type,e)}isGeoTIFF(){return this.isType(Gx)}isCOG(){return this.isType(X3)}isHTTP(){let e=this.getAbsoluteUrl(!1);if(!e)return null;let t=e.protocol().toLowerCase();return qi(t)&&Y3.includes(t)}isPreview(){return!1}},Vx=K3;var J3=class n extends Vx{constructor(e,t=null){super(e,t)}isLink(){return!0}getObjectType(){return"Link"}isPreview(){return this.rel==="preview"}static fromLinks(e,t=null){return Array.isArray(e)?e.map(r=>fi(r)?new n(r,t):r):[]}},Q3=J3;var OX=Ol(aT(),1),e4=class extends Hg{constructor(e,t=null,r={},i=[]){if(super(e,Object.assign({links:Q3.fromLinks},r),["_url"].concat(i)),!this._url&&(this._url=t,!this._url)){let o=this.getSelfLink();o&&(this._url=o.href)}}getAbsoluteUrl(e=!0){return e?this._url:(0,OX.default)(this._url)}setAbsoluteUrl(e){this._url=e}getStacLinksWithRel(e,t=!0){return this.getLinksWithRels([e]).filter(r=>kX(r.type,t))}getStacLinkWithRel(e,t=!0){let r=this.getStacLinksWithRel(e,t);return r.length>0?r[0]:null}getLinks(){return Array.isArray(this.links)?this.links.filter(e=>fi(e)&&qi(e.href)):[]}getLinkWithRel(e){return this.getLinks().find(t=>t.rel===e)||null}getLinksWithRels(e){return this.getLinks().filter(t=>e.includes(t.rel))}getLinksWithOtherRels(e){return this.getLinks().filter(t=>!e.includes(t.rel))}getSelfLink(){return this.getStacLinkWithRel("self")}getRootLink(){return this.getStacLinkWithRel("root")}getParentLink(){return this.getStacLinkWithRel("parent")}},Hx=e4;var t4=class extends Hx{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getAll(){return[]}},qg=t4;var n4=class n extends Hg{constructor(e,t=null,r=null){super(e,{},["_index","_context"]),typeof this._index!="number"&&(this._index=typeof t=="string"?parseInt(t,10):t),this._context||(this._context=r)}getContext(){return this._context}getObjectType(){return"Band"}isBand(){return!0}getIndex(){return this._index}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context)return this._context.getMetadata(e)}getMinMaxValues(){return tT(this)}getNoDataValues(){return nT(this)}static fromBands(e,t=null){let r=[];if(Array.isArray(e))for(let i in e){let o=e[i],s=o instanceof n?o:new n(o,i,t);r.push(s)}return r}},t_=n4;var jve=["created","updated","published","expires","unpublished","bands"],r4=class n extends Vx{constructor(e,t=null,r=null){let i={bands:t_.fromBands,alternate:n.fromAssets};super(e,r,i,["_key"]),this._key||(this._key=t)}getObjectType(){return"Asset"}isAsset(){return!0}getAbsoluteUrl(e=!0){return this.isDefinition()?null:super.getAbsoluteUrl(e)}getKey(){return this._key}getMetadata(e){if(typeof this[e]<"u")return this[e];if(this._context instanceof n)return this._context.getMetadata(e);if(this._context&&!jve.includes(e))return this._context.getMetadata(e)}getBands(){return this.bands||[]}findVisualBands(){let e={red:null,green:null,blue:null},t=this.getBands();for(let i in t){let o=parseInt(i,10),s=t[o];fi(s)&&qi(s["eo:common_name"])&&s["eo:common_name"]in e&&(e[s["eo:common_name"]]=s)}return Object.values(e).every(i=>i!==null)?e:null}findBand(e,t="name"){Array.isArray(e)||(e=[e]);let r=this.getBands(),i=r.findIndex(o=>fi(o)&&e.includes(o[t]));return i>=0?r[i]:null}getBand(e){return fi(e)||e===null?e:this.getBands()[e]||null}getMinMaxValues(){return tT(this)}getNoDataValues(){return nT(this)}isDefinition(){return!qi(this.href)}isHTTP(){return this.isDefinition()?null:super.isHTTP()}isPreview(){let e=["thumbnail","overview"];return e.includes(this.getKey())?!0:Array.isArray(this.roles)&&this.roles.some(t=>e.includes(t))}hasRole(e,t=!1){return Array.isArray(e)||(e=[e]),t&&e.includes(this.getKey())?!0:Array.isArray(this.roles)&&!!this.roles.find(r=>e.includes(r))}static fromAssets(e,t=null){let r={};if(fi(e))for(let i in e){let o=e[i],s=o instanceof n?o:new n(o,i,t);r[i]=s}return r}},ic=r4;function i4(n){if(!n)return;let e=String(n),t=e.indexOf("@"),r=t!==-1?e.substr(t+1):void 0,i=t!==-1?e.substr(0,t):e,o=String(i).replace(/-/g,"_").split("_");if(!o.length||o.length>4)return;let s=o.shift();if(!s)return;let a={keyword:r,language:s.toLowerCase()};if(!o.length)return a;if(o.length===3){let f=o.pop();f&&(a.variant=f.toUpperCase())}let l=o.pop();if(l.length>3&&(a.keyword=l,l=o.pop()),l&&(a.country=l.toUpperCase()),!o.length)return a;let c=o.pop();return typeof c=="string"&&c.length>=1&&(a.script=c[0].toUpperCase()+c.substring(1).toLowerCase()),a}function Uve(n){let e={};return n.forEach(t=>{let{language:r,country:i}=i4(t);if(!r)throw new Error(`Locale ${t} is not parsable`);e[r]||(e[r]={countries:{},firstCountry:void 0,main:void 0});let o=e[r];i?(o.countries[i]=t,o.firstCountry||(o.firstCountry=t)):o.main=t}),e}function cT(n,e,t,r){let i=Array.isArray(n)?Uve(n):n;if(!e&&t)return cT(n,t,void 0,r);if(!e)return;let{language:o,country:s}=i4(e);if(!o)return t;if(!i[o])return e===t?void 0:cT(n,t,null,r);let{countries:a,main:l=t,firstCountry:c}=i[o];return!a||!s?r&&c?c:l:r&&c?a[s]?a[s]:c:a[s]?a[s]:l}var o4=class n extends Hx{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getTemporalExtent(){return null}getTemporalExtents(){return[]}getLocaleLink(e,t=null){let r=this.getStacLinksWithRel("alternate").filter(s=>qi(s.hreflang)),i;Array.isArray(this.languages)?i=this.languages.map(s=>s.code):i=r.map(s=>s.hreflang);let o=cT(i,e,t);return r.find(s=>s.hreflang===o)||null}getIcons(e=!0){return this.getLinksWithRels(["icon"]).filter(t=>t.canBrowserDisplayImage(e))}getThumbnails(e=!0,t=null){let r=this.getAssets().filter(i=>i.isPreview());if(r.length===0&&(r=this.getLinks().filter(i=>i.isPreview())),r.length===0){let i=this.getAsset("thumbnail");i&&r.push(i)}if(e&&(r=r.filter(i=>i.canBrowserDisplayImage())),t&&r.length>1){let i=o=>Array.isArray(o.roles)&&o.roles.includes(t)||o.getKey()===t;r=r.filter(i).concat(r.filter(o=>!i(o)))}return r}getDefaultGeoTIFF(e=!0,t=!1){return this.rankGeoTIFFs(e,t)[0]?.asset}rankGeoTIFFs(e=!0,t=!1,r=null,i=null){fi(r)||(r={data:1,visual:2,thumbnail:2,overview:3});let o=[],s=this.getAssetsByTypes(Gx);e&&(s=s.filter(l=>l.isHTTP()&&(!t||l.isCOG())));let a=Object.entries(r);for(let l of s){let c=0;if(a.length>0){let f=a.filter(([d])=>l.hasRole(d,!0)).map(([,d])=>d);f.length>0&&(c+=Math.max(...f))}!t&&l.isCOG()&&(c+=2),l.findVisualBands()&&(c+=1),typeof i=="function"&&(c+=i(l)),o.push({asset:l,score:c})}return o.sort((l,c)=>c.score-l.score),o}findVisualAssets(){let e={red:null,green:null,blue:null},t=Object.keys(e),r=this.getAssets();for(let o of r){let s=o.findBand(t,"eo:common_name");s&&(e[s["eo:common_name"]]=o)}return Object.values(e).every(o=>o!==null)?e:null}getAsset(e){return fi(this.assets)&&this.assets[e]||null}getAssets(){return fi(this.assets)?Object.values(this.assets):[]}getAssetsWithRoles(e,t=!1){return this.getAssets().filter(r=>r.hasRole(e,t))}getAssetWithRole(e,t=!1){return this.getAssetsWithRoles([e],t)[0]||null}getAssetsByTypes(e){return this.getAssets().filter(t=>zx(t.type,e))}equals(e){return this===e?!0:!(e instanceof n)||this.getObjectType()!==e.getObjectType()?!1:!!(this.id&&this.id===e.id)}supportsExtension(e){if(!Array.isArray(this.stac_extensions))return!1;let t=new RegExp("^"+e.replaceAll("*","[^/]+")+"$");return this.stac_extensions.some(r=>t.test(r))}},hu=o4;var s4=class extends hu{constructor(e,t=null,r={},i=[]){super(e,t,r,i)}getObjectType(){return this.type}getSearchLink(e=null){let t=this.getStacLinksWithRel("search");return e?t[0]||null:t.find(r=>r.method===e||!e&&!r.method)||null}getApiCollectionsLink(){return this.getStacLinkWithRel("data")}getApiItemsLink(){return this.getStacLinkWithRel("items")}getChildLinks(){return this.getStacLinksWithRel("child")}getItemLinks(){return this.getStacLinksWithRel("item")}},qx=s4;var a4=class extends qx{constructor(e,t=null){super(e,t)}},FX=a4;function Wg(n){if(qi(n)&&n.length>=10)try{let t=n.match(/^(-?\d{1,})-(\d\d)-(\d\d)[T ](\d\d):(\d\d):(\d\d)(?:\.(\d*))?(?:Z|[+-]00:00)?$/i).slice(1).map(r=>parseInt(r,10));return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5],t[6]||0))}catch{return null}return null}function BX(n,e){return new Date(n.valueOf()+(e-n)/2)}function hT(n){if(!Array.isArray(n)||n.length===0)return null;let e,t,r=(i,o,s)=>typeof i>"u"?o:i===null||o===null?null:s(i,o);return n.forEach(([i,o])=>{e=r(e,i,Math.min),t=r(t,o,Math.max)}),[e===null?null:new Date(e),t===null?null:new Date(t)]}var l4=class extends qx{constructor(e,t=null){let r={assets:ic.fromAssets,item_assets:ic.fromAssets};super(e,t,r)}toGeoJSON(){let e=rT(this.getBoundingBoxes());return e&&(e.id=this.id),e}getBoundingBox(){let e=this.getRawBoundingBoxes();return e.length>0?cu(e[0]):null}getBoundingBoxes(){let e=this.getRawBoundingBoxes();return e.length===1?[cu(e[0])]:e.length>1?e.slice(1).map(cu):null}getRawBoundingBoxes(){let e=this.extent?.spatial?.bbox;return Array.isArray(e)&&e.length>0?e:[]}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=this.extent?.temporal?.interval;return Array.isArray(e)&&e.length>0?e.filter(t=>Array.isArray(t)&&(qi(t[0])||qi(t[1]))).map(t=>t.map(r=>Wg(r))):[]}getSummary(e){if(fi(this.summaries))return this.summaries[e]}getBands(){let e=this.getMetadata("bands");return Array.isArray(e)||(e=this.getSummary("bands")),Array.isArray(e)?t_.fromBands(e,this):[]}},Wx=l4;var u4=class extends qg{constructor(e,t=null){let r={collections:i=>i.map(o=>o instanceof Wx?o:new Wx(o))};super(e,t,r)}getObjectType(){return"CollectionCollection"}getAll(){return this.collections}isCollectionCollection(){return!0}toGeoJSON(){return{type:"FeatureCollection",features:this.collections.map(t=>t.toGeoJSON()).filter(t=>t!==null)}}getBoundingBox(){return Jy(this.getBoundingBoxes())}getBoundingBoxes(){return this.collections.map(e=>e.getBoundingBox())}getTemporalExtent(){return hT(this.getTemporalExtents())}getTemporalExtents(){return this.collections.map(e=>e.getTemporalExtent())}},fT=u4;var c4=class extends hu{constructor(e,t=null){super(e,t,{assets:ic.fromAssets})}getObjectType(){return"Item"}toGeoJSON(){return this.toJSON()}getBoundingBox(){return cu(this.bbox)}getBoundingBoxes(){let e=this.getBoundingBox();return e?[e]:[]}getDateTime(){let e=Wg(this.properties.datetime);if(!e){let t=Wg(this.properties.start_datetime),r=Wg(this.properties.end_datetime);return t&&r?BX(t,r):t||r}return e}getTemporalExtent(){return this.getTemporalExtents()[0]||null}getTemporalExtents(){let e=[];return qi(this.properties.start_datetime)||qi(this.properties.end_datetime)?e=[[this.properties.start_datetime||null,this.properties.end_datetime||null]]:qi(this.properties.datetime)&&(e=[[this.properties.datetime,this.properties.datetime]]),e.map(t=>t.map(r=>Wg(r)))}getMetadata(e){return this.properties[e]}getBands(){let e=this.getMetadata("bands");return Array.isArray(e)?t_.fromBands(e,this):[]}getCollectionLink(){return this.getStacLinkWithRel("collection")}},$g=c4;var h4=class extends qg{constructor(e,t=null){let r={features:i=>i.map(o=>o instanceof $g?o:new $g(o))};super(e,t,r)}getObjectType(){return"ItemCollection"}getAll(){return this.features}toGeoJSON(){return this.toJSON()}getBoundingBox(){return Jy(this.getBoundingBoxes())}getBoundingBoxes(){return this.features.map(e=>e.getBoundingBox())}getTemporalExtent(){return hT(this.getTemporalExtents())}getTemporalExtents(){return this.features.map(e=>e.getTemporalExtent())}},dT=h4;function n_(n,e=!0,t=!1){return e&&(n=jX.default.stac(n,t)),n.type==="Feature"?new $g(n):n.type==="FeatureCollection"?new dT(n):n.type==="Collection"||!n.type&&typeof n.extent<"u"&&typeof n.license<"u"?new Wx(n):!n.type&&Array.isArray(n.collections)?new fT(n):new FX(n)}var f4=class extends _i{constructor(e){super(gt.ERROR),this.error=e}},UX=f4;var GX="Cannot convert undefined or null to object";function oi(n){return(e,...t)=>Gve(n,e,t)}function r_(n,e){return oi(pT(n,e).get)}var{apply:Gve,construct:v_t,defineProperty:x_t,get:w_t,getOwnPropertyDescriptor:pT,getPrototypeOf:gT,has:E_t,ownKeys:VX,set:b_t,setPrototypeOf:S_t}=Reflect;var{EPSILON:HX,MAX_SAFE_INTEGER:C_t,isFinite:zve,isNaN:Vve}=Number,{iterator:i_,species:I_t,toStringTag:Hve,for:T_t}=Symbol,mT=Object,{create:yT,defineProperty:qX,freeze:D_t,is:A_t}=mT,d4=mT.prototype,R_t=d4.__lookupGetter__?oi(d4.__lookupGetter__):(n,e)=>{if(n==null)throw Yve(GX);let t=mT(n);do{let r=pT(t,e);if(r!==void 0)return qve(r,"get")?r.get:void 0}while((t=gT(t))!==null)},qve=mT.hasOwn||oi(d4.hasOwnProperty),WX=Array,M_t=WX.isArray,_T=WX.prototype,N_t=oi(_T.join),P_t=oi(_T.push),L_t=oi(_T.toLocaleString),p4=_T[i_],$X=oi(p4),{abs:Wve,trunc:k_t}=Math,vT=ArrayBuffer,O_t=vT.isView,YX=vT.prototype,F_t=oi(YX.slice),B_t=r_(YX,"byteLength"),zX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null,j_t=zX&&r_(zX.prototype,"byteLength"),XX=gT(Uint8Array),U_t=XX.from,xa=XX.prototype,G_t=xa[i_],z_t=oi(xa.keys),V_t=oi(xa.values),H_t=oi(xa.entries),q_t=oi(xa.set),W_t=oi(xa.reverse),$_t=oi(xa.fill),Y_t=oi(xa.copyWithin),X_t=oi(xa.sort),Z_t=oi(xa.slice),K_t=oi(xa.subarray),J_t=r_(xa,"buffer"),Q_t=r_(xa,"byteOffset"),evt=r_(xa,"length"),tvt=r_(xa,Hve),ZX=Uint8Array,g4=Uint16Array;var xT=Uint32Array,KX=Float32Array,o_=gT([][i_]()),m4=oi(o_.next),JX=oi((function*(){})().next),QX=gT(o_),eZ=DataView.prototype,tZ=oi(eZ.getUint16),$ve=oi(eZ.setUint16),Yve=TypeError;var Xve=WeakSet,nZ=Xve.prototype,nvt=oi(nZ.add),rvt=oi(nZ.has),wT=WeakMap,y4=wT.prototype,_4=oi(y4.get),ivt=oi(y4.has),rZ=oi(y4.set);var iZ=new wT,Zve=yT(null,{next:{value:function(){let e=_4(iZ,this);return m4(e)}},[i_]:{value:function(){return this}}});function oZ(n){if(n[i_]===p4&&o_.next===m4)return n;let e=yT(Zve);return rZ(iZ,e,$X(n)),e}var Kve=new wT,Jve=yT(QX,{next:{value:function(){let e=_4(Kve,this);return JX(e)},writable:!0,configurable:!0}});for(let n of VX(o_))n!=="next"&&qX(Jve,n,pT(o_,n));var Qve=1/HX;var e1e=6103515625e-14;var sZ=.0009765625,uvt=sZ*e1e,cvt=sZ*Qve;var aZ=new vT(4),t1e=new KX(aZ),n1e=new xT(aZ),Yc=new g4(512),Xc=new ZX(512);for(let n=0;n<256;++n){let e=n-127;e<-24?(Yc[n]=0,Yc[n|256]=32768,Xc[n]=24,Xc[n|256]=24):e<-14?(Yc[n]=1024>>-e-14,Yc[n|256]=1024>>-e-14|32768,Xc[n]=-e-1,Xc[n|256]=-e-1):e<=15?(Yc[n]=e+15<<10,Yc[n|256]=e+15<<10|32768,Xc[n]=13,Xc[n|256]=13):e<128?(Yc[n]=31744,Yc[n|256]=64512,Xc[n]=24,Xc[n|256]=24):(Yc[n]=31744,Yc[n|256]=64512,Xc[n]=13,Xc[n|256]=13)}var v4=new xT(2048);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;(e&8388608)===0;)e<<=1,t-=8388608;e&=-8388609,t+=947912704,v4[n]=e|t}for(let n=1024;n<2048;++n)v4[n]=939524096+(n-1024<<13);var s_=new xT(64);for(let n=1;n<31;++n)s_[n]=n<<23;s_[31]=1199570944;s_[32]=2147483648;for(let n=33;n<63;++n)s_[n]=2147483648+(n-32<<23);s_[63]=3347054592;var lZ=new g4(64);for(let n=1;n<64;++n)n!==32&&(lZ[n]=1024);function uZ(n){let e=n>>10;return n1e[0]=v4[lZ[e]+(n&1023)]+s_[e],t1e[0]}function $x(n,e,...t){return uZ(tZ(n,e,...oZ(t)))}var ST=Ol(hZ(),1),NZ=Ol(EZ(),1);function bZ(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o;for(let s=0,a=0;s<n.length;++s,a+=3)o=256-n[s]/e*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function SZ(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o;for(let s=0,a=0;s<n.length;++s,a+=3)o=n[s]/e*256,i[a]=o,i[a+1]=o,i[a+2]=o;return i}function CZ(n,e){let{width:t,height:r}=n,i=new Uint8Array(t*r*3),o=e.length/3,s=e.length/3*2;for(let a=0,l=0;a<n.length;++a,l+=3){let c=n[a];i[l]=e[c]/65536*256,i[l+1]=e[c+o]/65536*256,i[l+2]=e[c+s]/65536*256}return i}function IZ(n){let{width:e,height:t}=n,r=new Uint8Array(e*t*3);for(let i=0,o=0;i<n.length;i+=4,o+=3){let s=n[i],a=n[i+1],l=n[i+2],c=n[i+3];r[o]=255*((255-s)/256)*((255-c)/256),r[o+1]=255*((255-a)/256)*((255-c)/256),r[o+2]=255*((255-l)/256)*((255-c)/256)}return r}function TZ(n){let{width:e,height:t}=n,r=new Uint8ClampedArray(e*t*3);for(let i=0,o=0;i<n.length;i+=3,o+=3){let s=n[i],a=n[i+1],l=n[i+2];r[o]=s+1.402*(l-128),r[o+1]=s-.34414*(a-128)-.71414*(l-128),r[o+2]=s+1.772*(a-128)}return r}var o1e=.95047,s1e=1,a1e=1.08883;function DZ(n){let{width:e,height:t}=n,r=new Uint8Array(e*t*3);for(let i=0,o=0;i<n.length;i+=3,o+=3){let s=n[i+0],a=n[i+1]<<24>>24,l=n[i+2]<<24>>24,c=(s+16)/116,f=a/500+c,d=c-l/200,y,p,_;f=o1e*(f*f*f>.008856?f*f*f:(f-16/116)/7.787),c=s1e*(c*c*c>.008856?c*c*c:(c-16/116)/7.787),d=a1e*(d*d*d>.008856?d*d*d:(d-16/116)/7.787),y=f*3.2406+c*-1.5372+d*-.4986,p=f*-.9689+c*1.8758+d*.0415,_=f*.0557+c*-.204+d*1.057,y=y>.0031308?1.055*y**(1/2.4)-.055:12.92*y,p=p>.0031308?1.055*p**(1/2.4)-.055:12.92*p,_=_>.0031308?1.055*_**(1/2.4)-.055:12.92*_,r[o]=Math.max(0,Math.min(1,y))*255,r[o+1]=Math.max(0,Math.min(1,p))*255,r[o+2]=Math.max(0,Math.min(1,_))*255}return r}var AZ=new Map;function Xd(n,e){Array.isArray(n)||(n=[n]),n.forEach(t=>AZ.set(t,e))}function ET(n){return He(this,null,function*(){let e=AZ.get(n.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${n.Compression}`);let t=yield e();return new t(n)})}Xd([void 0,1],()=>import("./chunk-LKT4BZJV.js").then(n=>n.default));Xd(5,()=>import("./chunk-472BQ3KV.js").then(n=>n.default));Xd(6,()=>{throw new Error("old style JPEG compression is not supported.")});Xd(7,()=>import("./chunk-W3424FDJ.js").then(n=>n.default));Xd([8,32946],()=>import("./chunk-GN6AM7XZ.js").then(n=>n.default));Xd(32773,()=>import("./chunk-VZD4E52D.js").then(n=>n.default));Xd(34887,()=>import("./chunk-JHPJYD7P.js").then(n=>He(null,null,function*(){return yield n.zstd.init(),n})).then(n=>n.default));Xd(50001,()=>import("./chunk-VK5LBO7Z.js").then(n=>n.default));function bT(n,e,t,r=1){return new(Object.getPrototypeOf(n)).constructor(e*t*r)}function l1e(n,e,t,r,i){let o=e/r,s=t/i;return n.map(a=>{let l=bT(a,r,i);for(let c=0;c<i;++c){let f=Math.min(Math.round(s*c),t-1);for(let d=0;d<r;++d){let y=Math.min(Math.round(o*d),e-1),p=a[f*e+y];l[c*r+d]=p}}return l})}function a_(n,e,t){return(1-t)*n+t*e}function u1e(n,e,t,r,i){let o=e/r,s=t/i;return n.map(a=>{let l=bT(a,r,i);for(let c=0;c<i;++c){let f=s*c,d=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let p=0;p<r;++p){let _=o*p,w=_%1,b=Math.floor(_),S=Math.min(Math.ceil(_),e-1),T=a[d*e+b],A=a[d*e+S],N=a[y*e+b],O=a[y*e+S],W=a_(a_(T,A,w),a_(N,O,w),f%1);l[c*r+p]=W}}return l})}function RZ(n,e,t,r,i,o="nearest"){switch(o.toLowerCase()){case"nearest":return l1e(n,e,t,r,i);case"bilinear":case"linear":return u1e(n,e,t,r,i);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function c1e(n,e,t,r,i,o){let s=e/r,a=t/i,l=bT(n,r,i,o);for(let c=0;c<i;++c){let f=Math.min(Math.round(a*c),t-1);for(let d=0;d<r;++d){let y=Math.min(Math.round(s*d),e-1);for(let p=0;p<o;++p){let _=n[f*e*o+y*o+p];l[c*r*o+d*o+p]=_}}}return l}function h1e(n,e,t,r,i,o){let s=e/r,a=t/i,l=bT(n,r,i,o);for(let c=0;c<i;++c){let f=a*c,d=Math.floor(f),y=Math.min(Math.ceil(f),t-1);for(let p=0;p<r;++p){let _=s*p,w=_%1,b=Math.floor(_),S=Math.min(Math.ceil(_),e-1);for(let T=0;T<o;++T){let A=n[d*e*o+b*o+T],N=n[d*e*o+S*o+T],O=n[y*e*o+b*o+T],W=n[y*e*o+S*o+T],X=a_(a_(A,N,w),a_(O,W,w),f%1);l[c*r*o+p*o+T]=X}}}return l}function MZ(n,e,t,r,i,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return c1e(n,e,t,r,i,o);case"bilinear":case"linear":return h1e(n,e,t,r,i,o);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function f1e(n,e,t){let r=0;for(let i=e;i<t;++i)r+=n[i];return r}function T4(n,e,t){switch(n){case 1:if(e<=8)return new Uint8Array(t);if(e<=16)return new Uint16Array(t);if(e<=32)return new Uint32Array(t);break;case 2:if(e===8)return new Int8Array(t);if(e===16)return new Int16Array(t);if(e===32)return new Int32Array(t);break;case 3:switch(e){case 16:case 32:return new Float32Array(t);case 64:return new Float64Array(t);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function d1e(n,e){return(n===1||n===2)&&e<=32&&e%8===0?!1:!(n===3&&(e===16||e===32||e===64))}function p1e(n,e,t,r,i,o,s){let a=new DataView(n),l=t===2?s*o:s*o*r,c=t===2?1:r,f=T4(e,i,l),d=parseInt("1".repeat(i),2);if(e===1){let y;t===1?y=r*i:y=i;let p=o*y;(p&7)!==0&&(p=p+7&-8);for(let _=0;_<s;++_){let w=_*p;for(let b=0;b<o;++b){let S=w+b*c*i;for(let T=0;T<c;++T){let A=S+T*i,N=(_*o+b)*c+T,O=Math.floor(A/8),W=A%8;if(W+i<=8)f[N]=a.getUint8(O)>>8-i-W&d;else if(W+i<=16)f[N]=a.getUint16(O)>>16-i-W&d;else if(W+i<=24){let X=a.getUint16(O)<<8|a.getUint8(O+2);f[N]=X>>24-i-W&d}else f[N]=a.getUint32(O)>>32-i-W&d}}}}return f.buffer}var D4=class{constructor(e,t,r,i,o,s){this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=i,this.tiles=o?{}:null,this.isTiled=!e.StripOffsets;let a=e.PlanarConfiguration;if(this.planarConfiguration=typeof a>"u"?1:a,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(e){return this.isTiled||(e+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-e*this.getTileHeight()}getBytesPerPixel(){let e=0;for(let t=0;t<this.fileDirectory.BitsPerSample.length;++t)e+=this.getSampleByteSize(t);return e}getSampleByteSize(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${e} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[e]/8)}getReaderForSample(e){let t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(i,o){return $x(this,i,o)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(e=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1}getBitsPerSample(e=0){return this.fileDirectory.BitsPerSample[e]}getArrayForSample(e,t){let r=this.getSampleFormat(e),i=this.getBitsPerSample(e);return T4(r,i,t)}getTileOrStrip(e,t,r,i,o){return He(this,null,function*(){let s=Math.ceil(this.getWidth()/this.getTileWidth()),a=Math.ceil(this.getHeight()/this.getTileHeight()),l,{tiles:c}=this;this.planarConfiguration===1?l=t*s+e:this.planarConfiguration===2&&(l=r*s*a+t*s+e);let f,d;this.isTiled?(f=this.fileDirectory.TileOffsets[l],d=this.fileDirectory.TileByteCounts[l]):(f=this.fileDirectory.StripOffsets[l],d=this.fileDirectory.StripByteCounts[l]);let y=(yield this.source.fetch([{offset:f,length:d}],o))[0],p;return c===null||!c[l]?(p=He(this,null,function*(){let _=yield i.decode(this.fileDirectory,y),w=this.getSampleFormat(),b=this.getBitsPerSample();return d1e(w,b)&&(_=p1e(_,w,this.planarConfiguration,this.getSamplesPerPixel(),b,this.getTileWidth(),this.getBlockHeight(t))),_}),c!==null&&(c[l]=p)):p=c[l],{x:e,y:t,sample:r,data:yield p}})}_readRaster(e,t,r,i,o,s,a,l,c){return He(this,null,function*(){let f=this.getTileWidth(),d=this.getTileHeight(),y=this.getWidth(),p=this.getHeight(),_=Math.max(Math.floor(e[0]/f),0),w=Math.min(Math.ceil(e[2]/f),Math.ceil(y/f)),b=Math.max(Math.floor(e[1]/d),0),S=Math.min(Math.ceil(e[3]/d),Math.ceil(p/d)),T=e[2]-e[0],A=this.getBytesPerPixel(),N=[],O=[];for(let Y=0;Y<t.length;++Y)this.planarConfiguration===1?N.push(f1e(this.fileDirectory.BitsPerSample,0,t[Y])/8):N.push(0),O.push(this.getReaderForSample(t[Y]));let W=[],{littleEndian:X}=this;for(let Y=b;Y<S;++Y)for(let $=_;$<w;++$){let V;this.planarConfiguration===1&&(V=this.getTileOrStrip($,Y,0,o,c));for(let B=0;B<t.length;++B){let v=B,I=t[B];this.planarConfiguration===2&&(A=this.getSampleByteSize(I),V=this.getTileOrStrip($,Y,I,o,c));let M=V.then(j=>{let Q=j.data,Z=new DataView(Q),q=this.getBlockHeight(j.y),K=j.y*d,oe=j.x*f,_e=K+q,F=(j.x+1)*f,ee=O[v],ce=Math.min(q,q-(_e-e[3]),p-K),pe=Math.min(f,f-(F-e[2]),y-oe);for(let J=Math.max(0,e[1]-K);J<ce;++J)for(let xe=Math.max(0,e[0]-oe);xe<pe;++xe){let Se=(J*f+xe)*A,ve=ee.call(Z,Se+N[v],X),re;i?(re=(J+K-e[1])*T*t.length+(xe+oe-e[0])*t.length+v,r[re]=ve):(re=(J+K-e[1])*T+xe+oe-e[0],r[v][re]=ve)}});W.push(M)}}if(yield Promise.all(W),s&&e[2]-e[0]!==s||a&&e[3]-e[1]!==a){let Y;return i?Y=MZ(r,e[2]-e[0],e[3]-e[1],s,a,t.length,l):Y=RZ(r,e[2]-e[0],e[3]-e[1],s,a,l),Y.width=s,Y.height=a,Y}return r.width=s||e[2]-e[0],r.height=a||e[3]-e[1],r})}readRasters(){return He(this,arguments,function*({window:e,samples:t=[],interleave:r,pool:i=null,width:o,height:s,resampleMethod:a,fillValue:l,signal:c}={}){let f=e||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw new Error("Invalid subsets");let d=f[2]-f[0],y=f[3]-f[1],p=d*y,_=this.getSamplesPerPixel();if(!t||!t.length)for(let T=0;T<_;++T)t.push(T);else for(let T=0;T<t.length;++T)if(t[T]>=_)return Promise.reject(new RangeError(`Invalid sample index '${t[T]}'.`));let w;if(r){let T=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,A=Math.max.apply(null,this.fileDirectory.BitsPerSample);w=T4(T,A,p*t.length),l&&w.fill(l)}else{w=[];for(let T=0;T<t.length;++T){let A=this.getArrayForSample(t[T],p);Array.isArray(l)&&T<l.length?A.fill(l[T]):l&&!Array.isArray(l)&&A.fill(l),w.push(A)}}let b=i||(yield ET(this.fileDirectory));return yield this._readRaster(f,t,w,r,b,o,s,a,c)})}readRGB(){return He(this,arguments,function*({window:e,interleave:t=!0,pool:r=null,width:i,height:o,resampleMethod:s,enableAlpha:a=!1,signal:l}={}){let c=e||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");let f=this.fileDirectory.PhotometricInterpretation;if(f===Aa.RGB){let S=[0,1,2];if(this.fileDirectory.ExtraSamples!==e8.Unspecified&&a){S=[];for(let T=0;T<this.fileDirectory.BitsPerSample.length;T+=1)S.push(T)}return this.readRasters({window:e,interleave:t,samples:S,pool:r,width:i,height:o,resampleMethod:s,signal:l})}let d;switch(f){case Aa.WhiteIsZero:case Aa.BlackIsZero:case Aa.Palette:d=[0];break;case Aa.CMYK:d=[0,1,2,3];break;case Aa.YCbCr:case Aa.CIELab:d=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}let y={window:c,interleave:!0,samples:d,pool:r,width:i,height:o,resampleMethod:s,signal:l},{fileDirectory:p}=this,_=yield this.readRasters(y),w=2**this.fileDirectory.BitsPerSample[0],b;switch(f){case Aa.WhiteIsZero:b=bZ(_,w);break;case Aa.BlackIsZero:b=SZ(_,w);break;case Aa.Palette:b=CZ(_,p.ColorMap);break;case Aa.CMYK:b=IZ(_);break;case Aa.YCbCr:b=TZ(_);break;case Aa.CIELab:b=DZ(_);break;default:throw new Error("Unsupported photometric interpretation.")}if(!t){let S=new Uint8Array(b.length/3),T=new Uint8Array(b.length/3),A=new Uint8Array(b.length/3);for(let N=0,O=0;N<b.length;N+=3,++O)S[O]=b[N],T[O]=b[N+1],A[O]=b[N+2];b=[S,T,A]}return b.width=_.width,b.height=_.height,b})}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];let e=[];for(let t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}getGDALMetadata(e=null){let t={};if(!this.fileDirectory.GDAL_METADATA)return null;let r=this.fileDirectory.GDAL_METADATA,i=(0,NZ.default)(r,"Item");e===null?i=i.filter(o=>(0,ST.default)(o,"sample")===void 0):i=i.filter(o=>Number((0,ST.default)(o,"sample"))===e);for(let o=0;o<i.length;++o){let s=i[o];t[(0,ST.default)(s,"name")]=s.inner}return t}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;let e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}getOrigin(){let e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&e.length===6)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}getResolution(e=null){let t=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(t)return[t[0],-t[1],t[2]];if(r)return r[1]===0&&r[4]===0?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(e){let[i,o,s]=e.getResolution();return[i*e.getWidth()/this.getWidth(),o*e.getHeight()/this.getHeight(),s*e.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(e=!1){let t=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!e){let[i,o,s,a,l,c,f,d]=this.fileDirectory.ModelTransformation,p=[[0,0],[0,t],[r,0],[r,t]].map(([b,S])=>[a+i*b+o*S,d+l*b+c*S]),_=p.map(b=>b[0]),w=p.map(b=>b[1]);return[Math.min(..._),Math.min(...w),Math.max(..._),Math.max(...w)]}else{let i=this.getOrigin(),o=this.getResolution(),s=i[0],a=i[1],l=s+o[0]*r,c=a+o[1]*t;return[Math.min(s,l),Math.min(a,c),Math.max(s,l),Math.max(a,c)]}}},A4=D4;var CT=class{constructor(e){this._dataView=new DataView(e)}get buffer(){return this._dataView.buffer}getUint64(e,t){let r=this.getUint32(e,t),i=this.getUint32(e+4,t),o;if(t){if(o=r+2**32*i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}if(o=2**32*r+i,!Number.isSafeInteger(o))throw new Error(`${o} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return o}getInt64(e,t){let r=0,i=(this._dataView.getUint8(e+(t?7:0))&128)>0,o=!0;for(let s=0;s<8;s++){let a=this._dataView.getUint8(e+(t?s:7-s));i&&(o?a!==0&&(a=~(a-1)&255,o=!1):a=~a&255),r+=a*256**s}return i&&(r=-r),r}getUint8(e,t){return this._dataView.getUint8(e,t)}getInt8(e,t){return this._dataView.getInt8(e,t)}getUint16(e,t){return this._dataView.getUint16(e,t)}getInt16(e,t){return this._dataView.getInt16(e,t)}getUint32(e,t){return this._dataView.getUint32(e,t)}getInt32(e,t){return this._dataView.getInt32(e,t)}getFloat16(e,t){return $x(this._dataView,e,t)}getFloat32(e,t){return this._dataView.getFloat32(e,t)}getFloat64(e,t){return this._dataView.getFloat64(e,t)}};var IT=class{constructor(e,t,r,i){this._dataView=new DataView(e),this._sliceOffset=t,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(e,t){return this.sliceOffset<=e&&this.sliceTop>=e+t}readUint8(e){return this._dataView.getUint8(e-this._sliceOffset,this._littleEndian)}readInt8(e){return this._dataView.getInt8(e-this._sliceOffset,this._littleEndian)}readUint16(e){return this._dataView.getUint16(e-this._sliceOffset,this._littleEndian)}readInt16(e){return this._dataView.getInt16(e-this._sliceOffset,this._littleEndian)}readUint32(e){return this._dataView.getUint32(e-this._sliceOffset,this._littleEndian)}readInt32(e){return this._dataView.getInt32(e-this._sliceOffset,this._littleEndian)}readFloat32(e){return this._dataView.getFloat32(e-this._sliceOffset,this._littleEndian)}readFloat64(e){return this._dataView.getFloat64(e-this._sliceOffset,this._littleEndian)}readUint64(e){let t=this.readUint32(e),r=this.readUint32(e+4),i;if(this._littleEndian){if(i=t+2**32*r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*t+r,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(e){let t=0,r=(this._dataView.getUint8(e+(this._littleEndian?7:0))&128)>0,i=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(e+(this._littleEndian?o:7-o));r&&(i?s!==0&&(s=~(s-1)&255,i=!1):s=~s&255),t+=s*256**o}return r&&(t=-t),t}readOffset(e){return this._bigTiff?this.readUint64(e):this.readUint32(e)}};var g1e=typeof navigator<"u"&&navigator.hardwareConcurrency||2,R4=class{constructor(e=g1e,t){this.workers=null,this._awaitingDecoder=null,this.size=e,this.messageId=0,e&&(this._awaitingDecoder=t?Promise.resolve(t):new Promise(r=>{import("./chunk-IP6GTOYP.js").then(i=>{r(i.create)})}),this._awaitingDecoder.then(r=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<e;i++)this.workers.push({worker:r(),idle:!0})}))}decode(e,t){return He(this,null,function*(){return this._awaitingDecoder&&(yield this._awaitingDecoder),this.size===0?ET(e).then(r=>r.decode(e,t)):new Promise(r=>{let i=this.workers.find(a=>a.idle)||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;let o=this.messageId++,s=a=>{a.data.id===o&&(i.idle=!0,r(a.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:e,buffer:t,id:o},[t])})})}destroy(){this.workers&&(this.workers.forEach(e=>{e.worker.terminate()}),this.workers=null)}},M4=R4;var PZ=`\r
\r
`;function LZ(n){if(typeof Object.fromEntries<"u")return Object.fromEntries(n);let e={};for(let[t,r]of n)e[t.toLowerCase()]=r;return e}function m1e(n){let e=n.split(`\r
`).map(t=>{let r=t.split(":").map(i=>i.trim());return r[0]=r[0].toLowerCase(),r});return LZ(e)}function kZ(n){let[e,...t]=n.split(";").map(i=>i.trim()),r=t.map(i=>i.split("="));return{type:e,params:LZ(r)}}function TT(n){let e,t,r;return n&&([,e,t,r]=n.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),t=parseInt(t,10),r=parseInt(r,10)),{start:e,end:t,total:r}}function OZ(n,e){let t=null,r=new TextDecoder("ascii"),i=[],o=`--${e}`,s=`${o}--`;for(let a=0;a<10;++a)r.decode(new Uint8Array(n,a,o.length))===o&&(t=a);if(t===null)throw new Error("Could not find initial boundary");for(;t<n.byteLength;){let a=r.decode(new Uint8Array(n,t,Math.min(o.length+1024,n.byteLength-t)));if(a.length===0||a.startsWith(s))break;if(!a.startsWith(o))throw new Error("Part does not start with boundary");let l=a.substr(o.length+2);if(l.length===0)break;let c=l.indexOf(PZ),f=m1e(l.substr(0,c)),{start:d,end:y,total:p}=TT(f["content-range"]),_=t+o.length+c+PZ.length,w=parseInt(y,10)+1-parseInt(d,10);i.push({headers:f,data:n.slice(_,_+w),offset:d,length:w,fileSize:p}),t=_+w+4}return i}var Zd=class{fetch(e,t=void 0){return He(this,null,function*(){return Promise.all(e.map(r=>this.fetchSlice(r,t)))})}fetchSlice(e){return He(this,null,function*(){throw new Error(`fetching of slice ${e} not possible, not implemented`)})}get fileSize(){return null}close(){return He(this,null,function*(){})}};var DT=class extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(let[t,r]of e)this.onEviction(t,r.value)}_deleteIfExpired(e,t){return typeof t.expiry=="number"&&t.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,t.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,t){if(this._deleteIfExpired(e,t)===!1)return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){let r=t.get(e);return this._getItemValue(e,r)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield e)}for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){let t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){let t=this.oldCache.get(e);if(this._deleteIfExpired(e,t)===!1)return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:r=this.maxAge}={}){let i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i}),this}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){let t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");let t=[...this._entriesAscending()],r=t.length-e;r<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(r>0&&this._emitEvictions(t.slice(0,r)),this.oldCache=new Map(t.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache){let[t,r]=e;this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}for(let e of this.oldCache){let[t,r]=e;this.cache.has(t)||this._deleteIfExpired(t,r)===!1&&(yield[t,r.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){let r=e[t],[i,o]=r;this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){let r=e[t],[i,o]=r;this.cache.has(i)||this._deleteIfExpired(i,o)===!1&&(yield[i,o.value])}}*entriesAscending(){for(let[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(let t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(let[r,i]of this.entriesAscending())e.call(t,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};function FZ(n){return He(this,null,function*(){return new Promise(e=>setTimeout(e,n))})}function BZ(n,e){let t=Array.isArray(n)?n:Array.from(n),r=Array.isArray(e)?e:Array.from(e);return t.map((i,o)=>[i,r[o]])}var gf=class n extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="AbortError"}},N4=class extends Error{constructor(e,t){super(t),this.errors=e,this.message=t,this.name="AggregateError"}},jZ=N4;var P4=class{constructor(e,t,r=null){this.offset=e,this.length=t,this.data=r}get top(){return this.offset+this.length}},AT=class{constructor(e,t,r){this.offset=e,this.length=t,this.blockIds=r}},RT=class extends Zd{constructor(e,{blockSize:t=65536,cacheSize:r=100}={}){super(),this.source=e,this.blockSize=t,this.blockCache=new DT({maxSize:r,onEviction:(i,o)=>{this.evictedBlocks.set(i,o)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}fetch(e,t){return He(this,null,function*(){let r=[],i=[],o=[];this.evictedBlocks.clear();for(let{offset:y,length:p}of e){let _=y+p,{fileSize:w}=this;w!==null&&(_=Math.min(_,w));let b=Math.floor(y/this.blockSize)*this.blockSize;for(let S=b;S<_;S+=this.blockSize){let T=Math.floor(S/this.blockSize);!this.blockCache.has(T)&&!this.blockRequests.has(T)&&(this.blockIdsToFetch.add(T),i.push(T)),this.blockRequests.has(T)&&r.push(this.blockRequests.get(T)),o.push(T)}}yield FZ(),this.fetchBlocks(t);let s=[];for(let y of i)this.blockRequests.has(y)&&s.push(this.blockRequests.get(y));yield Promise.allSettled(r),yield Promise.allSettled(s);let a=[],l=o.filter(y=>this.abortedBlockIds.has(y)||!this.blockCache.has(y));if(l.forEach(y=>this.blockIdsToFetch.add(y)),l.length>0&&t&&!t.aborted){this.fetchBlocks(null);for(let y of l){let p=this.blockRequests.get(y);if(!p)throw new Error(`Block ${y} is not in the block requests`);a.push(p)}yield Promise.allSettled(a)}if(t&&t.aborted)throw new gf("Request was aborted");let c=o.map(y=>this.blockCache.get(y)||this.evictedBlocks.get(y)),f=c.filter(y=>!y);if(f.length)throw new jZ(f,"Request failed");let d=new Map(BZ(o,c));return this.readSliceData(e,d)})}fetchBlocks(e){if(this.blockIdsToFetch.size>0){let t=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(t,e);for(let i=0;i<t.length;++i){let o=t[i];for(let s of o.blockIds)this.blockRequests.set(s,He(this,null,function*(){try{let a=(yield r)[i],l=s*this.blockSize,c=l-a.offset,f=Math.min(c+this.blockSize,a.data.byteLength),d=a.data.slice(c,f),y=new P4(l,d.byteLength,d,s);this.blockCache.set(s,y),this.abortedBlockIds.delete(s)}catch(a){if(a.name==="AbortError")a.signal=e,this.blockCache.delete(s),this.abortedBlockIds.add(s);else throw a}finally{this.blockRequests.delete(s)}}))}this.blockIdsToFetch.clear()}}groupBlocks(e){let t=Array.from(e).sort((s,a)=>s-a);if(t.length===0)return[];let r=[],i=null,o=[];for(let s of t)i===null||i+1===s?(r.push(s),i=s):(o.push(new AT(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[s],i=s);return o.push(new AT(r[0]*this.blockSize,r.length*this.blockSize,r)),o}readSliceData(e,t){return e.map(r=>{let i=r.offset+r.length;this.fileSize!==null&&(i=Math.min(this.fileSize,i));let o=Math.floor(r.offset/this.blockSize),s=Math.floor(i/this.blockSize),a=new ArrayBuffer(r.length),l=new Uint8Array(a);for(let c=o;c<=s;++c){let f=t.get(c),d=f.offset-r.offset,y=f.top-i,p=0,_=0,w;d<0?p=-d:d>0&&(_=d),y<0?w=f.length-p:w=i-f.offset-p;let b=new Uint8Array(f.data,p,w);l.set(b,_)}return a})}};var Kd=class{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(e){throw new Error("not implemented")}getData(){return He(this,null,function*(){throw new Error("not implemented")})}},Jd=class{constructor(e){this.url=e}request(){return He(this,arguments,function*({headers:e,signal:t}={}){throw new Error("request is not implemented")})}};var L4=class extends Kd{constructor(e){super(),this.response=e}get status(){return this.response.status}getHeader(e){return this.response.headers.get(e)}getData(){return He(this,null,function*(){return this.response.arrayBuffer?yield this.response.arrayBuffer():(yield this.response.buffer()).buffer})}},MT=class extends Jd{constructor(e,t){super(e),this.credentials=t}request(){return He(this,arguments,function*({headers:e,signal:t}={}){let r=yield fetch(this.url,{headers:e,credentials:this.credentials,signal:t});return new L4(r)})}};var k4=class extends Kd{constructor(e,t){super(),this.xhr=e,this.data=t}get status(){return this.xhr.status}getHeader(e){return this.xhr.getResponseHeader(e)}getData(){return He(this,null,function*(){return this.data})}},NT=class extends Jd{constructRequest(e,t){return new Promise((r,i)=>{let o=new XMLHttpRequest;o.open("GET",this.url),o.responseType="arraybuffer";for(let[s,a]of Object.entries(e))o.setRequestHeader(s,a);o.onload=()=>{let s=o.response;r(new k4(o,s))},o.onerror=i,o.onabort=()=>i(new gf("Request aborted")),o.send(),t&&(t.aborted&&o.abort(),t.addEventListener("abort",()=>o.abort()))})}request(){return He(this,arguments,function*({headers:e,signal:t}={}){return yield this.constructRequest(e,t)})}};var VZ=Ol(UZ(),1),HZ=Ol(GZ(),1),qZ=Ol(zZ(),1);var O4=class extends Kd{constructor(e,t){super(),this.response=e,this.dataPromise=t}get status(){return this.response.statusCode}getHeader(e){return this.response.headers[e]}getData(){return He(this,null,function*(){return yield this.dataPromise})}},PT=class extends Jd{constructor(e){super(e),this.parsedUrl=qZ.default.parse(this.url),this.httpApi=this.parsedUrl.protocol==="http:"?VZ.default:HZ.default}constructRequest(e,t){return new Promise((r,i)=>{let o=this.httpApi.get(tn(dt({},this.parsedUrl),{headers:e}),s=>{let a=new Promise(l=>{let c=[];s.on("data",f=>{c.push(f)}),s.on("end",()=>{let f=Buffer.concat(c).buffer;l(f)}),s.on("error",i)});r(new O4(s,a))});o.on("error",i),t&&(t.aborted&&o.destroy(new gf("Request aborted")),t.addEventListener("abort",()=>o.destroy(new gf("Request aborted"))))})}request(){return He(this,arguments,function*({headers:e,signal:t}={}){return yield this.constructRequest(e,t)})}};var Yx=class extends Zd{constructor(e,t,r,i){super(),this.client=e,this.headers=t,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}fetch(e,t){return He(this,null,function*(){return this.maxRanges>=e.length?this.fetchSlices(e,t):(this.maxRanges>0&&e.length>1,Promise.all(e.map(r=>this.fetchSlice(r,t))))})}fetchSlices(e,t){return He(this,null,function*(){let r=yield this.client.request({headers:tn(dt({},this.headers),{Range:`bytes=${e.map(({offset:i,length:o})=>`${i}-${i+o}`).join(",")}`}),signal:t});if(r.ok)if(r.status===206){let{type:i,params:o}=kZ(r.getHeader("content-type"));if(i==="multipart/byteranges"){let d=OZ(yield r.getData(),o.boundary);return this._fileSize=d[0].fileSize||null,d}let s=yield r.getData(),{start:a,end:l,total:c}=TT(r.getHeader("content-range"));this._fileSize=c||null;let f=[{data:s,offset:a,length:l-a}];if(e.length>1){let d=yield Promise.all(e.slice(1).map(y=>this.fetchSlice(y,t)));return f.concat(d)}return f}else{if(!this.allowFullFile)throw new Error("Server responded with full file");let i=yield r.getData();return this._fileSize=i.byteLength,[{data:i,offset:0,length:i.byteLength}]}else throw new Error("Error fetching data.")})}fetchSlice(e,t){return He(this,null,function*(){let{offset:r,length:i}=e,o=yield this.client.request({headers:tn(dt({},this.headers),{Range:`bytes=${r}-${r+i}`}),signal:t});if(o.ok)if(o.status===206){let s=yield o.getData(),{total:a}=TT(o.getHeader("content-range"));return this._fileSize=a||null,{data:s,offset:r,length:i}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");let s=yield o.getData();return this._fileSize=s.byteLength,{data:s,offset:0,length:s.byteLength}}else throw new Error("Error fetching data.")})}get fileSize(){return this._fileSize}};function F4(n,{blockSize:e,cacheSize:t}){return e===null?n:new RT(n,{blockSize:e,cacheSize:t})}function y1e(n,s={}){var a=s,{headers:e={},credentials:t,maxRanges:r=0,allowFullFile:i=!1}=a,o=_p(a,["headers","credentials","maxRanges","allowFullFile"]);let l=new MT(n,t),c=new Yx(l,e,r,i);return F4(c,o)}function _1e(n,o={}){var s=o,{headers:e={},maxRanges:t=0,allowFullFile:r=!1}=s,i=_p(s,["headers","maxRanges","allowFullFile"]);let a=new NT(n),l=new Yx(a,e,t,r);return F4(l,i)}function v1e(n,o={}){var s=o,{headers:e={},maxRanges:t=0,allowFullFile:r=!1}=s,i=_p(s,["headers","maxRanges","allowFullFile"]);let a=new PT(n),l=new Yx(a,e,t,r);return F4(l,i)}function LT(n,r={}){var i=r,{forceXHR:e=!1}=i,t=_p(i,["forceXHR"]);return typeof fetch=="function"&&!e?y1e(n,t):typeof XMLHttpRequest<"u"?_1e(n,t):v1e(n,t)}var B4=class extends Zd{constructor(e){super(),this.file=e}fetchSlice(e,t){return He(this,null,function*(){return new Promise((r,i)=>{let o=this.file.slice(e.offset,e.offset+e.length),s=new FileReader;s.onload=a=>r(a.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(o),t&&t.addEventListener("abort",()=>s.abort())})})}};function WZ(n){return new B4(n)}function j4(n){switch(n){case Ln.BYTE:case Ln.ASCII:case Ln.SBYTE:case Ln.UNDEFINED:return 1;case Ln.SHORT:case Ln.SSHORT:return 2;case Ln.LONG:case Ln.SLONG:case Ln.FLOAT:case Ln.IFD:return 4;case Ln.RATIONAL:case Ln.SRATIONAL:case Ln.DOUBLE:case Ln.LONG8:case Ln.SLONG8:case Ln.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${n}`)}}function x1e(n){let e=n.GeoKeyDirectory;if(!e)return null;let t={};for(let r=4;r<=e[3]*4;r+=4){let i=t8[e[r]],o=e[r+1]?fD[e[r+1]]:null,s=e[r+2],a=e[r+3],l=null;if(!o)l=a;else{if(l=n[o],typeof l>"u"||l===null)throw new Error(`Could not get value of geoKey '${i}'.`);typeof l=="string"?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),s===1&&(l=l[0]))}t[i]=l}return t}function l_(n,e,t,r){let i=null,o=null,s=j4(e);switch(e){case Ln.BYTE:case Ln.ASCII:case Ln.UNDEFINED:i=new Uint8Array(t),o=n.readUint8;break;case Ln.SBYTE:i=new Int8Array(t),o=n.readInt8;break;case Ln.SHORT:i=new Uint16Array(t),o=n.readUint16;break;case Ln.SSHORT:i=new Int16Array(t),o=n.readInt16;break;case Ln.LONG:case Ln.IFD:i=new Uint32Array(t),o=n.readUint32;break;case Ln.SLONG:i=new Int32Array(t),o=n.readInt32;break;case Ln.LONG8:case Ln.IFD8:i=new Array(t),o=n.readUint64;break;case Ln.SLONG8:i=new Array(t),o=n.readInt64;break;case Ln.RATIONAL:i=new Uint32Array(t*2),o=n.readUint32;break;case Ln.SRATIONAL:i=new Int32Array(t*2),o=n.readInt32;break;case Ln.FLOAT:i=new Float32Array(t),o=n.readFloat32;break;case Ln.DOUBLE:i=new Float64Array(t),o=n.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e===Ln.RATIONAL||e===Ln.SRATIONAL)for(let a=0;a<t;a+=2)i[a]=o.call(n,r+a*s),i[a+1]=o.call(n,r+(a*s+4));else for(let a=0;a<t;++a)i[a]=o.call(n,r+a*s);return e===Ln.ASCII?new TextDecoder("utf-8").decode(i):i}var U4=class{constructor(e,t,r){this.fileDirectory=e,this.geoKeyDirectory=t,this.nextIFDByteOffset=r}},u_=class extends Error{constructor(e){super(`No image at index ${e}`),this.index=e}},kT=class{readRasters(){return He(this,arguments,function*(e={}){let{window:t,width:r,height:i}=e,{resX:o,resY:s,bbox:a}=e,l=yield this.getImage(),c=l,f=yield this.getImageCount(),d=l.getBoundingBox();if(t&&a)throw new Error('Both "bbox" and "window" passed.');if(r||i){if(t){let[_,w]=l.getOrigin(),[b,S]=l.getResolution();a=[_+t[0]*b,w+t[1]*S,_+t[2]*b,w+t[3]*S]}let p=a||d;if(r){if(o)throw new Error("Both width and resX passed");o=(p[2]-p[0])/r}if(i){if(s)throw new Error("Both width and resY passed");s=(p[3]-p[1])/i}}if(o||s){let p=[];for(let _=0;_<f;++_){let w=yield this.getImage(_),{SubfileType:b,NewSubfileType:S}=w.fileDirectory;(_===0||b===2||S&1)&&p.push(w)}p.sort((_,w)=>_.getWidth()-w.getWidth());for(let _=0;_<p.length;++_){let w=p[_],b=(d[2]-d[0])/w.getWidth(),S=(d[3]-d[1])/w.getHeight();if(c=w,o&&o>b||s&&s>S)break}}let y=t;if(a){let[p,_]=l.getOrigin(),[w,b]=c.getResolution(l);y=[Math.round((a[0]-p)/w),Math.round((a[1]-_)/b),Math.round((a[2]-p)/w),Math.round((a[3]-_)/b)],y=[Math.min(y[0],y[2]),Math.min(y[1],y[3]),Math.max(y[0],y[2]),Math.max(y[1],y[3])]}return c.readRasters(tn(dt({},e),{window:y}))})}},c_=class n extends kT{constructor(e,t,r,i,o={}){super(),this.source=e,this.littleEndian=t,this.bigTiff=r,this.firstIFDOffset=i,this.cache=o.cache||!1,this.ifdRequests=[],this.ghostValues=null}getSlice(e,t){return He(this,null,function*(){let r=this.bigTiff?4048:1024;return new IT((yield this.source.fetch([{offset:e,length:typeof t<"u"?t:r}]))[0],e,this.littleEndian,this.bigTiff)})}parseFileDirectoryAt(e){return He(this,null,function*(){let t=this.bigTiff?20:12,r=this.bigTiff?8:2,i=yield this.getSlice(e),o=this.bigTiff?i.readUint64(e):i.readUint16(e),s=o*t+(this.bigTiff?16:6);i.covers(e,s)||(i=yield this.getSlice(e,s));let a={},l=e+(this.bigTiff?8:2);for(let d=0;d<o;l+=t,++d){let y=i.readUint16(l),p=i.readUint16(l+2),_=this.bigTiff?i.readUint64(l+4):i.readUint32(l+4),w,b,S=j4(p),T=l+(this.bigTiff?12:8);if(S*_<=(this.bigTiff?8:4))w=l_(i,p,_,T);else{let A=i.readOffset(T),N=j4(p)*_;if(i.covers(A,N))w=l_(i,p,_,A);else{let O=yield this.getSlice(A,N);w=l_(O,p,_,A)}}_===1&&QF.indexOf(y)===-1&&!(p===Ln.RATIONAL||p===Ln.SRATIONAL)?b=w[0]:b=w,a[fD[y]]=b}let c=x1e(a),f=i.readOffset(e+r+t*o);return new U4(a,c,f)})}requestIFD(e){return He(this,null,function*(){if(this.ifdRequests[e])return this.ifdRequests[e];if(e===0)return this.ifdRequests[e]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[e];if(!this.ifdRequests[e-1])try{this.ifdRequests[e-1]=this.requestIFD(e-1)}catch(t){throw t instanceof u_?new u_(e):t}return this.ifdRequests[e]=He(this,null,function*(){let t=yield this.ifdRequests[e-1];if(t.nextIFDByteOffset===0)throw new u_(e);return this.parseFileDirectoryAt(t.nextIFDByteOffset)}),this.ifdRequests[e]})}getImage(e=0){return He(this,null,function*(){let t=yield this.requestIFD(e);return new A4(t.fileDirectory,t.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)})}getImageCount(){return He(this,null,function*(){let e=0,t=!0;for(;t;)try{yield this.requestIFD(e),++e}catch(r){if(r instanceof u_)t=!1;else throw r}return e})}getGhostValues(){return He(this,null,function*(){let e=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;let t="GDAL_STRUCTURAL_METADATA_SIZE=",r=t.length+100,i=yield this.getSlice(e,r);if(t===l_(i,Ln.ASCII,t.length,e)){let s=l_(i,Ln.ASCII,r,e).split(`
`)[0],a=Number(s.split("=")[1].split(" ")[0])+s.length;a>r&&(i=yield this.getSlice(e,a));let l=l_(i,Ln.ASCII,a,e);this.ghostValues={},l.split(`
`).filter(c=>c.length>0).map(c=>c.split("=")).forEach(([c,f])=>{this.ghostValues[c]=f})}return this.ghostValues})}static fromSource(e,t,r){return He(this,null,function*(){let i=(yield e.fetch([{offset:0,length:1024}],r))[0],o=new CT(i),s=o.getUint16(0,0),a;if(s===18761)a=!0;else if(s===19789)a=!1;else throw new TypeError("Invalid byte order value.");let l=o.getUint16(2,a),c;if(l===42)c=!1;else if(l===43){if(c=!0,o.getUint16(4,a)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");let f=c?o.getUint64(8,a):o.getUint32(4,a);return new n(e,a,c,f,t)})}close(){return typeof this.source.close=="function"?this.source.close():!1}};var G4=class extends kT{constructor(e,t){super(),this.mainFile=e,this.overviewFiles=t,this.imageFiles=[e].concat(t),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}parseFileDirectoriesPerFile(){return He(this,null,function*(){let e=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(t=>t.parseFileDirectoryAt(t.firstIFDOffset)));return this.fileDirectoriesPerFile=yield Promise.all(e),this.fileDirectoriesPerFile})}getImage(e=0){return He(this,null,function*(){yield this.getImageCount(),yield this.parseFileDirectoriesPerFile();let t=0,r=0;for(let i=0;i<this.imageFiles.length;i++){let o=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(e===t){let a=yield o.requestIFD(r);return new A4(a.fileDirectory,a.geoKeyDirectory,o.dataView,o.littleEndian,o.cache,o.source)}t++,r++}r=0}throw new RangeError("Invalid image index")})}getImageCount(){return He(this,null,function*(){if(this.imageCount!==null)return this.imageCount;let e=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(t=>t.getImageCount()));return this.imageCounts=yield Promise.all(e),this.imageCount=this.imageCounts.reduce((t,r)=>t+r,0),this.imageCount})}};function $Z(r){return He(this,arguments,function*(n,e={},t){return c_.fromSource(LT(n,e),t)})}function YZ(n,e){return He(this,null,function*(){return c_.fromSource(WZ(n),e)})}function XZ(i){return He(this,arguments,function*(n,e=[],t={},r){let o=yield c_.fromSource(LT(n,t),r),s=yield Promise.all(e.map(a=>c_.fromSource(LT(a,t))));return new G4(o,s)})}var ZZ="https://stac-extensions.github.io/label/v1.*/schema.json",KZ=new qr({color:"rgba(0,0,0,0)"});function JZ(n,e,t="rgba(255,255,255,0.4)",r=5){let i=KZ;t&&(i=new qr({color:t}));let o=new xi({color:n,width:e});return new ri({image:new da({fill:i,stroke:o,radius:r}),fill:i,stroke:o})}var QZ=JZ("#3399CC",3),z4=JZ("#ff9933",2,null);function eK(n,e){let t={url:n.getAbsoluteUrl()},r=n,i=n.getBands();i.length===1&&(r=i[0],i=[]);let{minimum:o,maximum:s}=r.getMinMaxValues();if(typeof o=="number"&&(t.min=o),typeof s=="number"&&(t.max=s),typeof t.min!="number"&&typeof t.max!="number"&&i.length>1)for(let l of i){let{minimum:c,maximum:f}=l.getMinMaxValues();typeof c=="number"&&(typeof t.min>"u"||c<t.min)&&(t.min=c),typeof f=="number"&&(typeof t.max>"u"||f>t.max)&&(t.max=f)}let a=r.getNoDataValues();if(a.length>0)t.nodata=a[0];else if(i.length>1){let l;for(let c of i){let f=c.getNoDataValues();if(f.length>0){if(typeof l>"u")l=f[0];else if(l!==f[0]){l=void 0;break}}}typeof l<"u"&&(t.nodata=l)}if(e.length>0)t.bands=e;else{let l=n.findVisualBands();l&&(t.bands=[l.red.getIndex()+1,l.green.getIndex()+1,l.blue.getIndex()+1])}return t}function V4(n){return He(this,null,function*(){try{let{fromProjectionCode:e,fromEPSGCode:t}=yield import("./chunk-OTUKNQIC.js");return typeof e=="function"?yield e(n):yield t(n)}catch{return null}})}function H4(n,e=void 0){return He(this,null,function*(){let t;if(ZF()){let r=n.getMetadata("proj:code");r&&(t=yield V4(r))}return t||e})}function q4(n,e){let t=n.clone();return e.hasOnlyBounds()||t.setFill(KZ),t}function tK(n){let e=n.href;if(e.includes("{s}"))if(Array.isArray(n["href:servers"])&&n["href:servers"].length>0){let t=Math.random()*n["href:servers"].length|0;e=e.replace("{s}",n["href:servers"][t])}else return null;return e}function W4(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function w1e(n){return((n.fileDirectory.NewSubfileType||0)&4)===4}function E1e(n,e){if(!n)return!1;if(n===!0)return!0;if(e.getSamplesPerPixel()!==3)return!1;let t=e.fileDirectory.PhotometricInterpretation,r=dD.photometricInterpretations;return t===r.CMYK||t===r.YCbCr||t===r.CIELab||t===r.ICCLab}var nK="STATISTICS_MAXIMUM",rK="STATISTICS_MINIMUM",$4=256,Y4;function b1e(){return Y4||(Y4=new M4),Y4}function S1e(n){try{return n.getBoundingBox(!0)}catch{return[0,0,n.getWidth(),n.getHeight()]}}function C1e(n){try{return n.getOrigin().slice(0,2)}catch{return[0,n.getHeight()]}}function I1e(n,e){try{return n.getResolution(e)}catch{return[e.getWidth()/n.getWidth(),e.getHeight()/n.getHeight()]}}function iK(n,e,t,r){return He(this,null,function*(){let i=n[e];if(i&&i!==32767){let o="EPSG:"+i,s=rn(o);if(!s&&r&&(s=yield V4(o)),!s){let a=WF(n[t]);a&&(s=new Cw({code:o,units:a}))}return s||null}})}function T1e(n,e){return He(this,null,function*(){let t=n.geoKeys;if(!t)return null;let r=yield iK(t,"ProjectedCSTypeGeoKey","ProjLinearUnitsGeoKey",e);return r||(yield iK(t,"GeographicTypeGeoKey","GeogAngularUnitsGeoKey",e))})}function D1e(n){return n.getImageCount().then(function(e){let t=new Array(e);for(let r=0;r<e;++r)t[r]=n.getImage(r);return Promise.all(t)})}function A1e(n,e){let t;return n.blob?t=YZ(n.blob):n.overviews?t=XZ(n.url,n.overviews,e):t=$Z(n.url,e),t.then(D1e)}function Xx(n,e,t,r,i){if(Array.isArray(n)){let o=n.length;if(!Array.isArray(e)||o!=e.length){let s=new Error(r);throw i(s),s}for(let s=0;s<o;++s)Xx(n[s],e[s],t,r,i);return}if(e=e,Math.abs(n-e)>t*n)throw new Error(r)}function R1e(n){return n instanceof Int8Array?-128:n instanceof Int16Array?-32768:n instanceof Int32Array?-2147483648:n instanceof Float32Array?12e-39:0}function M1e(n){return n instanceof Int8Array?127:n instanceof Uint8Array||n instanceof Uint8ClampedArray?255:n instanceof Int16Array?32767:n instanceof Uint16Array?65535:n instanceof Int32Array?2147483647:n instanceof Uint32Array?4294967295:n instanceof Float32Array?34e37:255}var OT=class extends KI{constructor(e){super({state:"loading",tileGrid:null,projection:e.projection||null,transition:e.transition,interpolate:e.interpolate!==!1,wrapX:e.wrapX}),this.sourceInfo_=e.sources;let t=this.sourceInfo_.length;this.sourceOptions_=e.sourceOptions,this.sourceImagery_=new Array(t),this.sourceMasks_=new Array(t),this.resolutionFactors_=new Array(t),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=e.normalize!==!1,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=e.convertToRGB||!1,this.loadMissingProjection_=e.loadMissingProjection||!1,this.setKey(this.sourceInfo_.map(o=>o.url).join(","));let r=this,i=new Array(t);for(let o=0;o<t;++o)i[o]=A1e(this.sourceInfo_[o],this.sourceOptions_);Promise.all(i).then(function(o){return r.configure_(o)}).catch(function(o){uD(o),r.error_=o,r.setState("error")})}getError(){return this.error_}determineProjection(e){return He(this,null,function*(){let t=e[0];for(let r=t.length-1;r>=0;--r){let i=t[r],o=yield T1e(i,this.loadMissingProjection_);if(o){this.projection=o;break}}})}determineTransformMatrix(e){let t=e[0];for(let r=t.length-1;r>=0;--r){let o=t[r].fileDirectory.ModelTransformation;if(o){let[s,a,l,c,f,d,y,p]=o,_=cd(cd([1/Math.sqrt(s*s+f*f),0,0,-1/Math.sqrt(a*a+d*d),c,p],[s,f,a,d,0,0]),[1,0,0,1,-c,-p]);this.transformMatrix=_,this.addAlpha_=!0;break}}}configure_(e){return He(this,null,function*(){let t,r,i,o,s,a=new Array(e.length),l=new Array(e.length),c=new Array(e.length),f=0,d=e.length;for(let b=0;b<d;++b){let S=[],T=[];e[b].forEach($=>{w1e($)?T.push($):S.push($)});let A=S.length;if(T.length>0&&T.length!==A)throw new Error(`Expected one mask per image found ${T.length} masks and ${A} images`);let N,O,W=new Array(A),X=new Array(A),Y=new Array(A);l[b]=new Array(A),c[b]=new Array(A);for(let $=0;$<A;++$){let V=S[$],B=V.getGDALNoData();c[b][$]=V.getGDALMetadata(0),l[b][$]=B;let v=this.sourceInfo_[b].bands;a[b]=v?v.length:V.getSamplesPerPixel();let I=A-($+1);N||(N=S1e(V)),O||(O=C1e(V));let M=I1e(V,S[0]);Y[I]=M[0];let j=[V.getTileWidth(),V.getTileHeight()];j[0]!==j[1]&&j[1]<$4&&(j[0]=$4,j[1]=$4),W[I]=j;let Q=M[0]/Math.abs(M[1]);X[I]=[j[0],j[1]/Q]}if(t?Nr(t,N,t):t=N,!r)r=O;else{let $=`Origin mismatch for source ${b}, got [${O}] but expected [${r}]`;Xx(r,O,0,$,this.viewRejector)}if(!s)s=Y,this.resolutionFactors_[b]=1;else{s.length-f>Y.length&&(f=s.length-Y.length);let $=s[s.length-1]/Y[Y.length-1];this.resolutionFactors_[b]=$;let V=Y.map(v=>v*=$),B=`Resolution mismatch for source ${b}, got [${V}] but expected [${s}]`;Xx(s.slice(f,s.length),V,.02,B,this.viewRejector)}i?Xx(i.slice(f,i.length),X,.01,`Tile size mismatch for source ${b}`,this.viewRejector):i=X,o?Xx(o.slice(f,o.length),W,0,`Tile size mismatch for source ${b}`,this.viewRejector):o=W,this.sourceImagery_[b]=S.reverse(),this.sourceMasks_[b]=T.reverse()}for(let b=0,S=this.sourceImagery_.length;b<S;++b){let T=this.sourceImagery_[b];for(;T.length<s.length;)T.unshift(void 0)}this.getProjection()||(yield this.determineProjection(e)),this.determineTransformMatrix(e),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;e:for(let b=0;b<d;++b){if(this.sourceInfo_[b].nodata!==void 0){this.addAlpha_=!0;break}if(this.sourceMasks_[b].length){this.addAlpha_=!0;break}let S=l[b],T=this.sourceInfo_[b].bands;if(T){for(let A=0;A<T.length;++A)if(S[T[A]-1]!==null){this.addAlpha_=!0;break e}continue}for(let A=0;A<S.length;++A)if(S[A]!==null){this.addAlpha_=!0;break e}}let y=this.addAlpha_?1:0;for(let b=0;b<d;++b)y+=a[b];this.bandCount=y;let p=new tf({extent:t,minZoom:f,origin:r,resolutions:s,tileSizes:i});this.tileGrid=p,this.setTileSizes(o),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");let _=1;s.length===2?s=[s[0],s[1],s[1]/2]:s.length===1&&(s=[s[0]*2,s[0],s[0]/2]);let w=t;if(this.transformMatrix){let b=T0(Hr(),this.transformMatrix.slice()),S=Tw(T=>Ir(b,T));w=ww(t,S)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:vp(Lo(w),this.projection),extent:cc(w,this.projection),zoom:_})})}loadTile_(e,t,r,i){let o=this.getTileSize(e),s=this.sourceImagery_.length,a=new Array(s*2),l=this.nodataValues_,c=this.sourceInfo_,f=b1e();for(let d=0;d<s;++d){let y=c[d],p=this.resolutionFactors_[d],_=[Math.round(t*(o[0]*p)),Math.round(r*(o[1]*p)),Math.round((t+1)*(o[0]*p)),Math.round((r+1)*(o[1]*p))],w=this.sourceImagery_[d][e],b;y.bands&&(b=y.bands.map(function(O){return O-1}));let S;"nodata"in y&&y.nodata!==null?S=y.nodata:b?S=b.map(function(O){return l[d][O]}):S=l[d];let T={window:_,width:o[0],height:o[1],samples:b,fillValue:S,pool:f,interleave:!1,signal:i.signal};E1e(this.convertToRGB_,w)?a[d]=w.readRGB(T):a[d]=w.readRasters(T);let A=s+d,N=this.sourceMasks_[d][e];if(!N){a[A]=Promise.resolve(null);continue}a[A]=N.readRasters({window:_,width:o[0],height:o[1],samples:[0],pool:f,interleave:!1})}return Promise.all(a).then(this.composeTile_.bind(this,o)).catch(function(d){throw uD(d),d})}composeTile_(e,t){let r=this.metadata_,i=this.sourceInfo_,o=this.sourceImagery_.length,s=this.bandCount,a=this.samplesPerPixel_,l=this.nodataValues_,c=this.normalize_,f=this.addAlpha_,d=e[0]*e[1],y=d*s,p;c?p=new Uint8Array(y):p=new Float32Array(y);let _=0;for(let w=0;w<d;++w){let b=f;for(let S=0;S<o;++S){let T=i[S],A=T.min,N=T.max,O,W;if(c){let X=r[S][0];A===void 0&&(X&&rK in X?A=parseFloat(X[rK]):A=R1e(t[S][0])),N===void 0&&(X&&nK in X?N=parseFloat(X[nK]):N=M1e(t[S][0])),O=255/(N-A),W=-A*O}for(let X=0;X<a[S];++X){let Y=t[S][X][w],$;if(c?$=Hn(O*Y+W,0,255):$=Y,!f)p[_]=$;else{let V=T.nodata;if(V===void 0){let v;T.bands?v=T.bands[X]-1:v=X,V=l[S][v]}let B=isNaN(V);(!B&&Y!==V||B&&!isNaN(Y))&&(b=!1,p[_]=$)}_++}if(!b){let X=o+S,Y=t[X];Y&&!Y[0][w]&&(b=!0)}}f&&(b||(p[_]=255),_++)}return p}};OT.prototype.getView;var oK=OT;var Wo=class{constructor(e){this.name=e}toString(){return this.name}};Wo.GeoTIFF=new Wo("GeoTIFF");Wo.ImageStatic=new Wo("ImageStatic");Wo.PMTilesRaster=new Wo("PMTilesRaster");Wo.PMTilesVector=new Wo("PMTilesVector");Wo.TileJSON=new Wo("TileJSON");Wo.TileWMS=new Wo("TileWMS");Wo.WMTS=new Wo("WMTS");Wo.XYZ=new Wo("XYZ");var Zc=Wo;var X4=class n extends sg{constructor(e){let t={};if(["opacity","visible","zIndex","minResolution","maxResolution","minZoom","maxZoom","properties"].forEach(r=>t[r]=e[r]),super(t),this.getSourceOptions_=e.getSourceOptions,this.children_=null,this.childrenOptions_=e.childrenOptions||{},this.assets_=null,this.bands_=[],this.crossOrigin_=e.crossOrigin||null,this.displayFootprint_=e.displayFootprint!==!1,this.displayGeoTiffByDefault_=!!e.displayGeoTiffByDefault,this.displayPreview_=!!e.displayPreview,this.displayOverview_=e.displayOverview!==!1,this.displayWebMapLink_=e.displayWebMapLink||!1,this.buildTileUrlTemplate_=e.buildTileUrlTemplate||null,this.useTileLayerAsFallback_=e.useTileLayerAsFallback||!1,this.boundsStyle_=e.boundsStyle||QZ,this.collectionStyle_=e.collectionStyle||z4,this.boundsLayer_=null,this.disableMigration_=e.disableMigration||!1,this.map_=null,this.eventQueue_=[],e.httpRequestFn&&(this.fetch_=e.httpRequestFn),e.data){try{this.configure_(e.data,e.url,e.children,e.assets,e.bands)}catch(r){this.handleError_(r)}return}if(!e.url)throw new Error("Either url or data must be provided");this.fetch_(e.url).then(r=>this.configure_(r,e.url,e.children,e.assets,e.bands)).catch(r=>this.handleError_(r))}fetch_(e,t="json"){return He(this,null,function*(){let r=yield fetch(e);if(!r.ok)throw new Error(`Unexpected response from ${e}: ${r.status}`);return t==="json"?yield r.json():t==="text"?yield r.text():null})}getBoundsLayer(){return this.boundsLayer_}isEmpty(){var e;if(this.getLayers().getLength()>1)return!1;let r=(e=this.getData())===null||e===void 0?void 0:e.getBoundingBox();return!r||Ls(r)?!0:!this.boundsLayer_||!this.displayFootprint_}handleError_(e){this.dispatch_(new UX(e))}configure_(e,t=null,r=null,i=null,o=[]){let s;e instanceof ic||e instanceof hu?s=e:(s=n_(e,!this.disableMigration_),t&&t.includes("://")&&s.setAbsoluteUrl(t)),this.set("stac",s),this.bands_=o,this.boundsLayer_=this.addFootprint_();let a=()=>{this.boundsLayer_&&this.boundsLayer_.setStyle(q4(this.boundsStyle_,this))};this.getLayers().on("add",a),this.getLayers().on("remove",a);let l=f=>this.handleError_(f),c=[];r&&c.push(this.setChildren(r,null,!1).catch(l)),i&&c.push(this.setAssets(i,!1).catch(l)),Promise.all(c).then(()=>this.updateLayers().catch(l)),this.dispatch_("sourceready")}dispatch_(e){this.eventQueue_.push(e),this.flush_()}flush_(){if(this.map_){for(let e of this.eventQueue_)this.dispatchEvent(e);this.eventQueue_=[]}}setMap_(e){this.map_!==e&&(this.map_=e,this.flush_())}addChildren_(r){return He(this,arguments,function*(e,t={}){let i=e.map(o=>{let s={data:o,crossOrigin:this.crossOrigin_,boundsStyle:this.collectionStyle_,displayGeoTiffByDefault:this.displayGeoTiffByDefault_,displayOverview:this.displayOverview_,displayPreview:this.displayPreview_,displayFootprint:this.displayFootprint_,useTileLayerAsFallback:this.useTileLayerAsFallback_,buildTileUrlTemplate:this.buildTileUrlTemplate_},a=new n(Object.assign(s,t));return a.on("sourceready",()=>{a.map_&&this.setMap_(a.map_)}),this.addLayer_(a,null),a});return yield Promise.all(i)})}addPreviewImage_(e){return He(this,null,function*(){let t=yield H4(e,"EPSG:4326"),r=e.getContext().getBoundingBoxes();if(r.length!==1)return;let i=r[0],o={url:e.getAbsoluteUrl(),projection:t,imageExtent:jl(i,"EPSG:4326",t),crossOrigin:this.crossOrigin_};this.getSourceOptions_&&(o=yield this.getSourceOptions_(Zc.ImageStatic,o,e));let s=new iY({source:new GY(o)});return this.addLayer_(s,e),s})}addLayerForLink(e){return He(this,null,function*(){let t=tK(e);if(!t)return;let r={attributions:e.getMetadata("attribution")||this.getData().getMetadata("attribution"),crossOrigin:this.crossOrigin_,url:t},i=(s,a)=>He(this,null,function*(){return this.getSourceOptions_&&(a=yield this.getSourceOptions_(s,a,e)),a}),o=[];switch(e.rel){case"pmtiles":let a=yield new Ug(r.url).getHeader(),l;switch(a.tileType){case Gg.Mvt:l=new _X(yield i(Zc.PMTilesVector,r));break;case Gg.Avif:case Gg.Jpeg:case Gg.Png:case Gg.Webp:l=new F3(yield i(Zc.PMTilesRaster,r));break;default:return}o.push(l);break;case"tilejson":o.push(new VY(yield i(Zc.TileJSON,r)));break;case"wms":if(!Array.isArray(e["wms:layers"]))break;for(let d in e["wms:layers"]){let y=e["wms:layers"][d]||"",p="";Array.isArray(e["wms:styles"])&&typeof e["wms:styles"][d]=="string"&&(p=e["wms:styles"][d]);let _=Object.assign({LAYERS:y,STYLES:p},e["wms:dimensions"]);typeof e["wms:transparent"]=="boolean"&&(_.TRANSPARENT=String(e["wms:transparent"])),typeof e.type=="string"&&e.type.startsWith("image/")&&(_.FORMAT=e.type);let w=yield i(Zc.TileWMS,Object.assign({},r,{params:_}));o.push(new qY(w))}break;case"wmts":let c=yield this.getWmtsCapabilities_(t,e["wmts:encoding"]);if(!c)return;let f=[];Array.isArray(e["wmts:layer"])?f=e["wmts:layer"]:typeof e["wmts:layer"]=="string"&&(f=[e["wmts:layer"]]);for(let d of f){let y=Object.assign({},r,{layer:d,requestEncoding:e["wmts:encoding"]==="rest"?"REST":"KVP"});typeof e.type=="string"&&e.type.startsWith("image/")&&(y.format=e.type),y=yield i(Zc.WMTS,y);let p=ZY(c,y);if(p!==null){if(typeof e.uriTemplate=="string"){let _=e.uriTemplate,w=fi(e.variables)?e.variables:{};for(let b in w){let S=w[b],T;if(W4(S.const)?T=S.const:W4(S.default)?T=S.default:Array.isArray(S.enum)&&S.enum.length>0&&(T=S.enum[0]),typeof T<"u")_=_.replaceAll(`{${b}}`,String(T));else continue}delete p.urls,p.url=_}o.push(new XY(p))}}break;case"xyz":o.push(new yg(yield i(Zc.XYZ,r)));break;default:return}return o.map(s=>{let a;return s instanceof YI?a=new aY({source:s,declutter:!0}):s instanceof F3?a=new m3({source:s}):a=new Q0({source:s}),this.addLayer_(a,e),a})})}addGeoTiff_(e){return He(this,null,function*(){if(this.buildTileUrlTemplate_&&!this.useTileLayerAsFallback_)return yield this.addTileLayerForImagery_(e);let r={sources:[eK(e,this.bands_)],convertToRGB:"auto",loadMissingProjection:!0},i=yield H4(e);i&&(r.projection=i),this.getSourceOptions_&&(r=yield this.getSourceOptions_(Zc.GeoTIFF,r,e));let o=new oK(r),s=new Promise((a,l)=>{o.on("error",l),o.on("change",()=>{o.getState()==="error"?l(o.getError()):a()})});try{yield s;let a=new m3({source:o});return this.addLayer_(a,e),a}catch(a){if(this.useTileLayerAsFallback_)return yield this.addTileLayerForImagery_(e);this.handleError_(a)}})}addTileLayerForImagery_(e){return He(this,null,function*(){let t=this.buildTileUrlTemplate_(e);t instanceof Promise&&(t=yield t);let r={crossOrigin:this.crossOrigin_,url:t};this.getSourceOptions_&&(r=yield this.getSourceOptions_(Zc.XYZ,r,e));let i=new Q0({source:new yg(r)});return this.addLayer_(i,e),i})}addLayer_(e,t=null,r=0){t&&e.set("stac",t),e.setZIndex(r),this.getLayers().push(e)}addFootprint_(){let e=null,t=this.getData();if(t.isItemCollection()||t.isCollectionCollection()?e=rT(t.getBoundingBox()):e=t.toGeoJSON(),e){let r=this.createGeoJsonLayer_(e,q4(this.boundsStyle_,this),this.displayFootprint_);return r.set("bounds",!0),r.on("change",()=>this.setMap_(r.getMapInternal())),this.addLayer_(r,t,1),r}return null}addGeoJson_(e){return He(this,null,function*(){try{let t=yield this.fetch_(e.getAbsoluteUrl()),r=this.createGeoJsonLayer_(t);return this.addLayer_(r,e),r}catch(t){this.handleError_(t)}})}createGeoJsonLayer_(e,t=null,r=!0){let i=new no,o=new ou({format:i,loader:(s,a,l)=>{e=Ux(e);let c=i.readFeatures(e,{featureProjection:l});o.addFeatures(c)}});return t||(t=z4),new ef({source:o,style:t,visible:r})}addLabelExtension_(){return He(this,null,function*(){let e=this.getData();if(!(e instanceof $g))return;let t=e.getAssetsWithRoles(["labels","labels-vector"],!0),r;t.length>1&&(r=t.find(o=>o.roles.includes("labels-vector"))),r||(r=e.getAsset("vector_labels")),r||(t=e.getAssets().filter(o=>o.type===lT&&!o.roles),t.length===1&&(r=t[0]));let i=e.getLinksWithRels(["source"]);if(r&&i.length>0){let o=i.map(a=>He(this,null,function*(){try{let l=yield this.fetch_(a.getAbsoluteUrl());return n_(l)}catch(l){return this.handleError_(l),null}})),s=(yield Promise.all(o)).filter(a=>a instanceof hu);yield this.addChildren_(s,{displayFootprint:!1})}try{yield this.addGeoJson_(r)}catch(o){this.handleError_(o)}})}updateLayers(e=!0){return He(this,null,function*(){let t=this.getLayers();for(let o=t.getLength()-1;o>=0;o--){let s=t.item(o);s.get("stac")&&!s.get("bounds")&&t.removeAt(o)}let r=this.getData();if(Array.isArray(this.displayWebMapLink_)){let o=this.getWebMapLinks().map(s=>He(this,null,function*(){return yield this.addLayerForLink(s)}));yield Promise.all(o)}this.children_&&(yield this.addChildren_(this.children_,this.childrenOptions_));let i=this.getAssets();if(i){let o=i.map(s=>He(this,null,function*(){if(s){if(s.type===lT)return yield this.addGeoJson_(s);if(s.isGeoTIFF())return yield this.addGeoTiff_(s);if(s.canBrowserDisplayImage())return yield this.addPreviewImage_(s)}}));yield Promise.all(o)}if(this.hasOnlyBounds()){if(r instanceof qg)yield this.addChildren_(r.getAll(),this.childrenOptions_);else if(r instanceof hu){if(r.isItem()&&r.supportsExtension(ZZ)&&r.getMetadata("label:type")==="vector"){yield this.addLabelExtension_(),e&&this.dispatch_("layersready");return}let o=this.getWebMapLinks();if(o.length>0)yield this.addLayerForLink(o[0]);else{let s=r.getDefaultGeoTIFF(!0,!this.displayGeoTiffByDefault_),a;if(s&&this.displayOverview_&&(a=yield this.addGeoTiff_(s)),this.displayPreview_&&(!s||!a)){let l=r.getThumbnails(!0,"overview");l.length>0&&(yield this.addPreviewImage_(l[0]))}}}}e&&this.dispatch_("layersready")})}hasOnlyBounds(){let e=this.getBoundsLayer();return typeof this.getLayersArray().find(r=>r!==e)>"u"}getWebMapLinks(){let e=this.getData();if(e instanceof ic)return[];let t=["xyz","tilejson","pmtiles","wmts","wms"];typeof this.displayWebMapLink_=="string"&&(t=[this.displayWebMapLink_]);let r=e.getLinksWithRels(t);return Array.isArray(this.displayWebMapLink_)?r=this.displayWebMapLink_.map(i=>{if(typeof i=="string"){let o=r.find(s=>s.id===i);return o||null}return i}).filter(i=>!!i):r.sort((i,o)=>{let s=t.indexOf(i.rel),a=t.indexOf(o.rel);return s-a}),r}setAssets(e,t=!0){return He(this,null,function*(){if(e!==this.assets_){if(Array.isArray(e)){let r=this.getData();this.assets_=e.map(i=>r instanceof hu&&typeof i=="string"?r.getAsset(i):i instanceof ic?i:new ic(i))}else this.assets_=null;t&&(yield this.updateLayers())}})}setChildren(e,t=null,r=!0){return He(this,null,function*(){e instanceof dT?this.children_=e.getAll():e instanceof fT?this.children_=e.getAll():fi(e)&&e.type==="FeatureCollection"?this.children_=n_(e,!this.disableMigration_).getAll():Array.isArray(e)?this.children_=e.map(i=>i instanceof hu?i:n_(i,!this.disableMigration_)):this.children_=null,this.children_&&this.children_.length===0&&(this.children_=null),this.children_&&fi(t)&&(this.childrenOptions_=t),r&&(yield this.updateLayers())})}getData(){return this.get("stac")}getChildren(){return this.children_}getAssets(){return this.assets_}getExtent(){if(!this.map_)return;let e=this.map_.getView();if(!e)return;let t,r=this.getData();r&&(t=r.getBoundingBox());let i=this.getChildren();if(i){let o=i.map(s=>s.getBoundingBox());t=Jy(o)}if(t)return jl(t,"EPSG:4326",e.getProjection())}getLayerState(){let e=super.getLayerState();return e.extent=void 0,e}getAttributions(){let e=[],t=this.getData();if(t){let r=t.getMetadata("attribution");r&&r.push(r)}return e}getSource(){return null}getWmtsCapabilities_(e,t="kvp"){return He(this,null,function*(){try{let r=new URL(e);t!=="rest"&&(r.searchParams.set("service","wmts"),r.searchParams.set("request","GetCapabilities"));let i=yield this.fetch_(r.toString(),"text");return new tY().read(i)}catch{return null}})}},sK=X4;var N1e=(n,e)=>e.id;function P1e(n,e){n&1&&(Ti(0,"div",8),Ec(1,"div",10),Ti(2,"span",11),St(3,"Searching Catalog..."),Gi()())}function L1e(n,e){if(n&1){let t=Di();Ti(0,"div",14),dv("click",function(i){let o=tr(t).$implicit;return Dn(2).displayLayer(o),nr(i.stopPropagation())}),Ti(1,"div",15)(2,"span",16),St(3),sM(4,"date"),Gi(),Ti(5,"span",17),St(6),Gi()(),Ti(7,"div",18),yr(),Ti(8,"svg",6),Ec(9,"path",19),Gi()()()}if(n&2){let t=e.$implicit;Xt(3),a0(aM(4,2,t.properties.datetime,"dd MMM yyyy")),Xt(3),Ko("Cloud: %",t.properties["eo:cloud_cover"].toFixed(1))}}function k1e(n,e){if(n&1&&(Ti(0,"div",9)(1,"p",12),St(2,"Available Scenes"),Gi(),cv(3,L1e,10,5,"div",13,N1e),Gi()),n&2){let t=Dn();Xt(3),hv(t.results())}}var FT=class n{drawService=Me(lu);stacService=Me(BI);mapService=Me(Eo);zone=Me(rr);cdr=Me(nd);results=Gn([]);loading=Gn(!1);initSearchArea(){let e=this.mapService.map();e&&this.drawService.startDrawing(e,"Polygon",t=>He(this,null,function*(){this.zone.run(()=>He(this,null,function*(){try{this.loading.set(!0),this.results.set([]);let r=yield this.stacService.searchSTAC(t);r&&r.features&&(console.log("Veri geldi:",r.features.length),this.results.set([...r.features]),this.cdr.markForCheck(),this.cdr.detectChanges())}catch(r){console.error(r),alert(r.message)}finally{this.loading.set(!1),this.drawService.clearDrawings(),this.cdr.detectChanges()}}))}))}displayLayer(e){let t=this.mapService.map();if(!t)return;let r=t.getLayers().getArray();for(let o=r.length-1;o>=0;o--){let s=r[o];s.get("name")==="stac"&&(s.getSource()?.clear&&s.getSource().clear(),t.removeLayer(s))}let i=new sK({data:e});i.set("name","stac"),t.addLayer(i),i.on("addlayer",()=>{let o=i.getExtent();o&&t.getView().fit(o,{duration:1e3,padding:[50,50,50,50]})})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-stac-panel"]],decls:14,vars:2,consts:[[1,"w-80","bg-white/90","backdrop-blur-xl","rounded-2xl","shadow-2xl","border","border-white/50","p-4","ring-1","ring-black/5","animate-in","fade-in","zoom-in","duration-200"],[1,"flex","items-center","justify-between","mb-4","border-b","border-gray-100","pb-2"],[1,"text-sm","font-semibold","text-gray-800","flex","items-center","gap-2"],[1,"p-1","bg-indigo-100","rounded-md","text-indigo-600"],[1,"text-[10px]","bg-gray-100","text-gray-500","px-2","py-0.5","rounded-full","font-medium","italic"],[1,"w-full","flex","items-center","justify-center","gap-2","bg-indigo-600","hover:bg-indigo-700","text-white","py-2.5","rounded-xl","text-sm","font-medium","transition-all","shadow-md","active:scale-95",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z","stroke-width","2"],[1,"mt-6","flex","flex-col","items-center","gap-3","py-4"],[1,"mt-4","space-y-2","max-h-64","overflow-y-auto","pr-1","scrollbar-thin","scrollbar-thumb-gray-200"],[1,"w-6","h-6","border-2","border-indigo-600","border-t-transparent","rounded-full","animate-spin"],[1,"text-xs","text-gray-500","font-medium","tracking-tight"],[1,"text-[11px]","font-bold","text-gray-400","uppercase","tracking-wider","mb-1"],[1,"group","p-3","border","border-gray-100","rounded-xl","cursor-pointer","hover:border-indigo-300","hover:bg-indigo-50/50","transition-all","flex","items-center","justify-between"],[1,"group","p-3","border","border-gray-100","rounded-xl","cursor-pointer","hover:border-indigo-300","hover:bg-indigo-50/50","transition-all","flex","items-center","justify-between",3,"click"],[1,"flex","flex-col"],[1,"text-xs","font-bold","text-gray-700"],[1,"text-[10px]","text-gray-400"],[1,"opacity-0","group-hover:opacity-100","text-indigo-600","transition-opacity"],["d","M12 4v16m8-8H4","stroke-width","2"]],template:function(t,r){t&1&&(Ti(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),St(4,"\u{1F6F0}\uFE0F"),Gi(),St(5," Satellite Search "),Gi(),Ti(6,"span",4),St(7,"Sentinel-2"),Gi()(),Ti(8,"button",5),dv("click",function(){return r.initSearchArea()}),yr(),Ti(9,"svg",6),Ec(10,"path",7),Gi(),St(11," Draw Search AOI "),Gi(),ed(12,P1e,4,0,"div",8),ed(13,k1e,5,0,"div",9),Gi()),t&2&&(Xt(12),td(r.loading()?12:-1),Xt(),td(r.results().length>0?13:-1))},dependencies:[zi,SM],encapsulation:2})};var BT=class n{overlay=Me(pO);elementRef=Me(ni);overlayRef=null;isOpen=!1;togglePanel(){if(this.overlayRef?.hasAttached()){this.overlayRef.detach(),this.isOpen=!1;return}this.isOpen=!0;let e=this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"center",originY:"bottom",overlayX:"center",overlayY:"top",offsetY:15}]);this.overlayRef=this.overlay.create({positionStrategy:e,hasBackdrop:!1,backdropClass:"cdk-overlay-transparent-backdrop"}),this.overlayRef.attach(new fx(FT))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-stac-toolbar"]],decls:7,vars:1,consts:[[1,"relative","group"],[1,"group/btn","flex","items-center","justify-center","w-10","h-10","rounded-xl","transition-all","duration-200","active:scale-95","shadow-md",3,"click","ngClass"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-5","h-5","text-white","transition-transform","group-hover/btn:rotate-12"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"],[1,"absolute","top-full","mt-4","left-1/2","-translate-x-1/2","px-2.5","py-1.5","text-[10px]","font-bold","text-white","bg-slate-800","rounded-lg","opacity-0","group-hover:opacity-100","transition-all","duration-300","pointer-events-none","whitespace-nowrap","shadow-xl","z-50"],[1,"absolute","-top-1","left-1/2","-translate-x-1/2","w-2","h-2","bg-slate-800","rotate-45"]],template:function(t,r){t&1&&(Qe(0,"div",0)(1,"button",1),yn("click",function(){return r.togglePanel()}),yr(),Qe(2,"svg",2),Kt(3,"path",3),it()(),po(),Qe(4,"div",4),St(5," SEARCH STAC "),Kt(6,"div",5),it()()),t&2&&(Xt(),Cr("ngClass",r.isOpen?"bg-emerald-500 text-white shadow-emerald-200 ring-2 ring-emerald-400 ring-offset-2":"bg-gradient-to-tr from-emerald-600 to-teal-500 text-white hover:scale-105 shadow-emerald-200"))},dependencies:[zi,Jp],encapsulation:2})};var jT=class n{_mapService=Me(Eo);_drawService=Me(lu);showDrawMenu=Gn(!1);activeDrawType=this._drawService.activeType;toggleDrawMenu(){this.showDrawMenu.update(e=>!e)}startDrawing(e){let t=this._mapService.map();t&&(e===null?this._drawService.stopDrawing(t):this._drawService.startDrawing(t,e),this.showDrawMenu.set(!1))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-toolbar"]],decls:10,vars:0,consts:[[1,"absolute","top-6","left-1/2","-translate-x-1/2","z-20","flex","items-center","gap-2","p-1.5","bg-white/80","backdrop-blur-lg","rounded-2xl","shadow-lg","border","border-white/40","ring-1","ring-black/5"],[1,"w-[1px]","h-6","bg-gray-300/50","mx-1"]],template:function(t,r){t&1&&(Qe(0,"div",0),Kt(1,"app-drawing-tools")(2,"div",1)(3,"app-upload")(4,"div",1)(5,"app-download")(6,"div",1)(7,"app-map-print")(8,"div",1)(9,"app-stac-toolbar"),it())},dependencies:[zi,xC,wC,EC,$C,BT],encapsulation:2})};var UT=class extends Gh{levelDisplay;viewListenerKey;constructor(e){let t=e||{},r=document.createElement("div");r.className="ol-zoom advanced-zoom ol-unselectable ol-control";let i=document.createElement("button");i.innerHTML="+";let o=document.createElement("div");o.className="zoom-level-indicator",o.innerHTML="-";let s=document.createElement("button");s.innerHTML="-",r.appendChild(i),r.appendChild(o),r.appendChild(s),super({element:r,target:t.target}),this.levelDisplay=o,i.onclick=()=>this.handleZoom(1),s.onclick=()=>this.handleZoom(-1)}setMap(e){this.viewListenerKey&&lb(this.viewListenerKey),super.setMap(e),e&&(e.on("change:view",()=>{this.setupViewListener(e)}),this.setupViewListener(e))}setupViewListener(e){this.viewListenerKey&&lb(this.viewListenerKey);let t=e.getView();t&&(this.viewListenerKey=t.on("change:resolution",()=>{this.updateDisplay(e)}),this.updateDisplay(e))}updateDisplay(e){let t=e.getView().getZoom();t!==void 0&&(this.levelDisplay.innerHTML=t%1===0?t.toString():t.toFixed(1))}handleZoom(e){let t=this.getMap()?.getView();if(t){let r=t.getZoom();r!==void 0&&t.animate({zoom:r+e,duration:300,easing:La})}}};function aK(n){return n.buttons===0||n.detail===0}function lK(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}function J4(n){let e=n.cloneNode(!0),t=e.querySelectorAll("[id]"),r=n.nodeName.toLowerCase();e.removeAttribute("id");for(let i=0;i<t.length;i++)t[i].removeAttribute("id");return r==="canvas"?hK(n,e):(r==="input"||r==="select"||r==="textarea")&&cK(n,e),uK("canvas",n,e,hK),uK("input, textarea, select",n,e,cK),e}function uK(n,e,t,r){let i=e.querySelectorAll(n);if(i.length){let o=t.querySelectorAll(n);for(let s=0;s<i.length;s++)r(i[s],o[s])}}var O1e=0;function cK(n,e){e.type!=="file"&&(e.value=n.value),e.type==="radio"&&e.name&&(e.name=`mat-clone-${e.name}-${O1e++}`)}function hK(n,e){let t=e.getContext("2d");if(t)try{t.drawImage(n,0,0)}catch{}}function oF(n){let e=n.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Q4(n,e,t){let{top:r,bottom:i,left:o,right:s}=n;return t>=r&&t<=i&&e>=o&&e<=s}function F1e(n,e){let t=e.left<n.left,r=e.left+e.width>n.right,i=e.top<n.top,o=e.top+e.height>n.bottom;return t||r||i||o}function Jx(n,e,t){n.top+=e,n.bottom=n.top+n.height,n.left+=t,n.right=n.left+n.width}function fK(n,e,t,r){let{top:i,right:o,bottom:s,left:a,width:l,height:c}=n,f=l*e,d=c*e;return r>i-d&&r<s+d&&t>a-f&&t<o+f}var GT=class{_document;positions=new Map;constructor(e){this._document=e}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:oF(t)})})}handleScroll(e){let t=Vd(e),r=this.positions.get(t);if(!r)return null;let i=r.scrollPosition,o,s;if(t===this._document){let c=this.getViewportScrollPosition();o=c.top,s=c.left}else o=t.scrollTop,s=t.scrollLeft;let a=i.top-o,l=i.left-s;return this.positions.forEach((c,f)=>{c.clientRect&&t!==f&&t.contains(f)&&Jx(c.clientRect,a,l)}),i.top=o,i.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function bK(n,e){let t=n.rootNodes;if(t.length===1&&t[0].nodeType===e.ELEMENT_NODE)return t[0];let r=e.createElement("div");return t.forEach(i=>r.appendChild(i)),r}function sF(n,e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];i?n.setProperty(r,i,t?.has(r)?"important":""):n.removeProperty(r)}return n}function h_(n,e){let t=e?"":"none";sF(n.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function dK(n,e,t){sF(n.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function zT(n,e){return e&&e!="none"?n+" "+e:n}function pK(n,e){n.style.width=`${e.width}px`,n.style.height=`${e.height}px`,n.style.transform=Qx(e.left,e.top)}function Qx(n,e){return`translate3d(${Math.round(n)}px, ${Math.round(e)}px, 0)`}function gK(n){let e=n.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(n)*e}function B1e(n){let e=getComputedStyle(n),t=Z4(e,"transition-property"),r=t.find(a=>a==="transform"||a==="all");if(!r)return 0;let i=t.indexOf(r),o=Z4(e,"transition-duration"),s=Z4(e,"transition-delay");return gK(o[i])+gK(s[i])}function Z4(n,e){return n.getPropertyValue(e).split(",").map(r=>r.trim())}var j1e=new Set(["position"]),eF=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(e,t,r,i,o,s,a,l,c,f){this._document=e,this._rootElement=t,this._direction=r,this._initialDomRect=i,this._previewTemplate=o,this._previewClass=s,this._pickupPositionOnPage=a,this._initialTransform=l,this._zIndex=c,this._renderer=f}attach(e){this._preview=this._createPreview(),e.appendChild(this._preview),mK(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(e){this._preview.style.transform=e}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(e){this._preview.classList.add(e)}getTransitionDuration(){return B1e(this._preview)}addEventListener(e,t){return this._renderer.listen(this._preview,e,t)}_createPreview(){let e=this._previewTemplate,t=this._previewClass,r=e?e.template:null,i;if(r&&e){let o=e.matchSize?this._initialDomRect:null,s=e.viewContainer.createEmbeddedView(r,e.context);s.detectChanges(),i=bK(s,this._document),this._previewEmbeddedView=s,e.matchSize?pK(i,o):i.style.transform=Qx(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=J4(this._rootElement),pK(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return sF(i.style,{"pointer-events":"none",margin:mK(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},j1e),h_(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(o=>i.classList.add(o)):i.classList.add(t)),i}};function mK(n){return"showPopover"in n}var U1e={passive:!0},yK={passive:!1},G1e={passive:!1,capture:!0},z1e=800,_K="cdk-drag-placeholder",vK=new Set(["position"]),tF=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=Gn(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new Jt;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=dr.EMPTY;_pointerUpSubscription=dr.EMPTY;_scrollSubscription=dr.EMPTY;_resizeSubscription=dr.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(e){e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>h_(t,e)))}_disabled=!1;beforeStarted=new Jt;started=new Jt;released=new Jt;ended=new Jt;entered=new Jt;exited=new Jt;dropped=new Jt;moved=this._moveEvents;data;constrainPosition;constructor(e,t,r,i,o,s,a){this._config=t,this._document=r,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s,this._renderer=a,this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new GT(r),s.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(r=>Qu(r)),this._handles.forEach(r=>h_(r,this.disabled)),this._toggleNativeDragInteractions();let t=new Set;return this._disabledHandles.forEach(r=>{this._handles.indexOf(r)>-1&&t.add(r)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){let t=Qu(e);if(t!==this._rootElement){this._removeRootElementListeners();let r=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(t,"mousedown",this._pointerDown,yK),r.listen(t,"touchstart",this._pointerDown,U1e),r.listen(t,"dragstart",this._nativeDragStart,yK)]),this._initialTransform=void 0,this._rootElement=t}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Qu(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&F1e(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){let e=this._boundaryElement.getBoundingClientRect(),t=this._rootElement.getBoundingClientRect(),r=0,i=0;t.left<e.left?r=e.left-t.left:t.right>e.right&&(r=e.right-t.right),t.top<e.top?i=e.top-t.top:t.bottom>e.bottom&&(i=e.bottom-t.bottom);let o=this._activeTransform.x,s=this._activeTransform.y,a=o+r,l=s+i;this._rootElement.style.transform=Qx(a,l),this._activeTransform={x:a,y:l},this._passiveTransform={x:a,y:l}}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),h_(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),h_(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){let e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){let e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=e=>{if(this.beforeStarted.next(),this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&this._initializeDragSequence(t,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)};_pointerMove=e=>{let t=this._getPointerPositionOnPage(e);if(!this._hasStartedDragging()){let i=Math.abs(t.x-this._pickupPositionOnPage.x),o=Math.abs(t.y-this._pickupPositionOnPage.y);if(i+o>=this._config.dragStartThreshold){let a=Date.now()>=this._dragStartTime+this._getDragStartDelay(e),l=this._dropContainer;if(!a){this._endDragSequence(e);return}(!l||!l.isDragging()&&!l.isReceiving())&&(e.cancelable&&e.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(e)))}return}e.cancelable&&e.preventDefault();let r=this._getConstrainedPointerPosition(t);if(this._hasMoved=!0,this._lastKnownPointerPosition=t,this._updatePointerDirectionDelta(r),this._dropContainer)this._updateActiveDropContainer(r,t);else{let i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,o=this._activeTransform;o.x=r.x-i.x+this._passiveTransform.x,o.y=r.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(o.x,o.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:r,event:e,distance:this._getDragDistance(r),delta:this._pointerDirectionDelta})})};_pointerUp=e=>{this._endDragSequence(e)};_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Zx(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let t=this._getShadowRoot(),r=this._dropContainer;if(t&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(t,"selectstart",V1e,G1e)}),r){let i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._marker=this._marker||this._document.createComment("");o.insertBefore(a,i),this._initialTransform=i.style.transform||"",this._preview=new eF(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(o,t)),dK(i,!1,vK),this._document.body.appendChild(o.replaceChild(s,i)),this.started.next({source:this,event:e}),r.start(),this._initialContainer=r,this._initialIndex=r.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(r?r.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();let r=this.isDragging(),i=Zx(t),o=!i&&t.button!==0,s=this._rootElement,a=Vd(t),l=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+z1e>Date.now(),c=i?lK(t):aK(t);if(a&&a.draggable&&t.type==="mousedown"&&t.preventDefault(),r||o||l||c)return;if(this._handles.length){let y=s.style;this._rootElementTapHighlight=y.webkitTapHighlightColor||"",y.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(y=>this._updateOnScroll(y)),this._boundaryElement&&(this._boundaryRect=oF(this._boundaryElement));let f=this._previewTemplate;this._pickupPositionInElement=f&&f.template&&!f.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,e,t);let d=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:d.x,y:d.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){dK(this._rootElement,!0,vK),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let t=this._dropContainer,r=t.getItemIndex(this),i=this._getPointerPositionOnPage(e),o=this._getDragDistance(i),s=t._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:o,dropPoint:i,event:e}),this.dropped.next({item:this,currentIndex:r,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:i,event:e}),t.drop(this,r,this._initialIndex,this._initialContainer,s,o,i,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:r,y:i}){let o=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{let s=this._dropContainer.getItemIndex(this),a=this._dropContainer.getItemAtIndex(s+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(o,this._dropContainer,a),this._dropContainer=o,this._dropContainer.enter(this,e,t,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(r,i),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let e=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);let t=this._preview.getTransitionDuration();return t===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(r=>{let i=a=>{(!a||this._preview&&Vd(a)===this._preview.element&&a.propertyName==="transform")&&(s(),r(),clearTimeout(o))},o=setTimeout(i,t*1.5),s=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){let e=this._placeholderTemplate,t=e?e.template:null,r;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),r=bK(this._placeholderRef,this._document)):r=J4(this._rootElement),r.style.pointerEvents="none",r.classList.add(_K),r}_getPointerPositionInElement(e,t,r){let i=t===this._rootElement?null:t,o=i?i.getBoundingClientRect():e,s=Zx(r)?r.targetTouches[0]:r,a=this._getViewportScrollPosition(),l=s.pageX-o.left-a.left,c=s.pageY-o.top-a.top;return{x:o.left-e.left+l,y:o.top-e.top+c}}_getPointerPositionOnPage(e){let t=this._getViewportScrollPosition(),r=Zx(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,i=r.pageX-t.left,o=r.pageY-t.top;if(this._ownerSVGElement){let s=this._ownerSVGElement.getScreenCTM();if(s){let a=this._ownerSVGElement.createSVGPoint();return a.x=i,a.y=o,a.matrixTransform(s.inverse())}}return{x:i,y:o}}_getConstrainedPointerPosition(e){let t=this._dropContainer?this._dropContainer.lockAxis:null,{x:r,y:i}=this.constrainPosition?this.constrainPosition(e,this,this._initialDomRect,this._pickupPositionInElement):e;if(this.lockAxis==="x"||t==="x"?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||t==="y")&&(r=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:o,y:s}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:c}=this._getPreviewRect(),f=a.top+s,d=a.bottom-(c-s),y=a.left+o,p=a.right-(l-o);r=xK(r,y,p),i=xK(i,f,d)}return{x:r,y:i}}_updatePointerDirectionDelta(e){let{x:t,y:r}=e,i=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(t-o.x),a=Math.abs(r-o.y);return s>this._config.pointerDirectionChangeThreshold&&(i.x=t>o.x?1:-1,o.x=t),a>this._config.pointerDirectionChangeThreshold&&(i.y=r>o.y?1:-1,o.y=r),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,h_(this._rootElement,e))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(e=>e()),this._rootElementCleanups=void 0}_applyRootElementTransform(e,t){let r=1/this.scale,i=Qx(e*r,t*r),o=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=o.transform&&o.transform!="none"?o.transform:""),o.transform=zT(i,this._initialTransform)}_applyPreviewTransform(e,t){let r=this._previewTemplate?.template?void 0:this._initialTransform,i=Qx(e,t);this._preview.setTransform(zT(i,r))}_getDragDistance(e){let t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(e===0&&t===0||this.isDragging()||!this._boundaryElement)return;let r=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(i.width===0&&i.height===0||r.width===0&&r.height===0)return;let o=i.left-r.left,s=r.right-i.right,a=i.top-r.top,l=r.bottom-i.bottom;i.width>r.width?(o>0&&(e+=o),s>0&&(e-=s)):e=0,i.height>r.height?(a>0&&(t+=a),l>0&&(t-=l)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){let t=this.dragStartDelay;return typeof t=="number"?t:Zx(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){let t=this._parentPositions.handleScroll(e);if(t){let r=Vd(e);this._boundaryRect&&r!==this._boundaryElement&&r.contains(this._boundaryElement)&&Jx(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=YC(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){let r=this._previewContainer||"global";if(r==="parent")return e;if(r==="global"){let i=this._document;return t||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return Qu(r)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=e=>{if(this._handles.length){let t=this._getTargetHandle(e);t&&!this._disabledHandles.has(t)&&!this.disabled&&e.preventDefault()}else this.disabled||e.preventDefault()};_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}_conditionallyInsertAnchor(e,t,r){if(e===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(t===this._initialContainer&&t.hasAnchor){let i=this._anchor??=J4(this._placeholder);i.classList.remove(_K),i.classList.add("cdk-drag-anchor"),i.style.transform="",r?r.before(i):Qu(t.element).appendChild(i)}}};function xK(n,e,t){return Math.max(e,Math.min(t,n))}function Zx(n){return n.type[0]==="t"}function V1e(n){n.preventDefault()}function SK(n,e,t){let r=wK(e,n.length-1),i=wK(t,n.length-1);if(r===i)return;let o=n[r],s=i<r?-1:1;for(let a=r;a!==i;a+=s)n[a]=n[a+s];n[i]=o}function wK(n,e){return Math.max(0,Math.min(e,n))}var VT=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(e){this._dragDropRegistry=e}_previousSwap={drag:null,delta:0,overlaps:!1};start(e){this.withItems(e)}sort(e,t,r,i){let o=this._itemPositions,s=this._getItemIndexFromPointerPosition(e,t,r,i);if(s===-1&&o.length>0)return null;let a=this.orientation==="horizontal",l=o.findIndex(b=>b.drag===e),c=o[s],f=o[l].clientRect,d=c.clientRect,y=l>s?1:-1,p=this._getItemOffsetPx(f,d,y),_=this._getSiblingOffsetPx(l,o,y),w=o.slice();return SK(o,l,s),o.forEach((b,S)=>{if(w[S]===b)return;let T=b.drag===e,A=T?p:_,N=T?e.getPlaceholderElement():b.drag.getRootElement();b.offset+=A;let O=Math.round(b.offset*(1/b.drag.scale));a?(N.style.transform=zT(`translate3d(${O}px, 0, 0)`,b.initialTransform),Jx(b.clientRect,0,A)):(N.style.transform=zT(`translate3d(0, ${O}px, 0)`,b.initialTransform),Jx(b.clientRect,A,0))}),this._previousSwap.overlaps=Q4(d,t,r),this._previousSwap.drag=c.drag,this._previousSwap.delta=a?i.x:i.y,{previousIndex:l,currentIndex:s}}enter(e,t,r,i){let o=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i,s=this._activeDraggables,a=s.indexOf(e),l=e.getPlaceholderElement(),c=s[o];if(c===e&&(c=s[o+1]),!c&&(o==null||o===-1||o<s.length-1)&&this._shouldEnterAsFirstChild(t,r)&&(c=s[0]),a>-1&&s.splice(a,1),c&&!this._dragDropRegistry.isDragging(c)){let f=c.getRootElement();f.parentElement.insertBefore(l,f),s.splice(o,0,e)}else this._element.appendChild(l),s.push(e);l.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables?.forEach(e=>{let t=e.getRootElement();if(t){let r=this._itemPositions.find(i=>i.drag===e)?.initialTransform;t.style.transform=r||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return this._getVisualItemPositions().findIndex(t=>t.drag===e)}getItemAtIndex(e){return this._getVisualItemPositions()[e]?.drag||null}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:r})=>{Jx(r,e,t)}),this._itemPositions.forEach(({drag:r})=>{this._dragDropRegistry.isDragging(r)&&r._sortFromLastPointerPosition()})}withElementContainer(e){this._element=e}_cacheItemPositions(){let e=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(t=>{let r=t.getVisibleElement();return{drag:t,offset:0,initialTransform:r.style.transform||"",clientRect:oF(r)}}).sort((t,r)=>e?t.clientRect.left-r.clientRect.left:t.clientRect.top-r.clientRect.top)}_getVisualItemPositions(){return this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=i?t.left-e.left:t.top-e.top;return r===-1&&(o+=i?t.width-e.width:t.height-e.height),o}_getSiblingOffsetPx(e,t,r){let i=this.orientation==="horizontal",o=t[e].clientRect,s=t[e+r*-1],a=o[i?"width":"height"]*r;if(s){let l=i?"left":"top",c=i?"right":"bottom";r===-1?a-=s.clientRect[l]-o[c]:a+=o[l]-s.clientRect[c]}return a}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;let r=this._itemPositions,i=this.orientation==="horizontal";if(r[0].drag!==this._activeDraggables[0]){let s=r[r.length-1].clientRect;return i?e>=s.right:t>=s.bottom}else{let s=r[0].clientRect;return i?e<=s.left:t<=s.top}}_getItemIndexFromPointerPosition(e,t,r,i){let o=this.orientation==="horizontal",s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===e)return!1;if(i){let c=o?i.x:i.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&c===this._previousSwap.delta)return!1}return o?t>=Math.floor(l.left)&&t<Math.floor(l.right):r>=Math.floor(l.top)&&r<Math.floor(l.bottom)});return s===-1||!this._sortPredicate(s,e)?-1:s}},nF=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(e,t){this._document=e,this._dragDropRegistry=t}start(e){let t=this._element.childNodes;this._relatedNodes=[];for(let r=0;r<t.length;r++){let i=t[r];this._relatedNodes.push([i,i.nextSibling])}this.withItems(e)}sort(e,t,r,i){let o=this._getItemIndexFromPointerPosition(e,t,r),s=this._previousSwap;if(o===-1||this._activeItems[o]===e)return null;let a=this._activeItems[o];if(s.drag===a&&s.overlaps&&s.deltaX===i.x&&s.deltaY===i.y)return null;let l=this.getItemIndex(e),c=e.getPlaceholderElement(),f=a.getRootElement();o>l?f.after(c):f.before(c),SK(this._activeItems,l,o);let d=this._getRootNode().elementFromPoint(t,r);return s.deltaX=i.x,s.deltaY=i.y,s.drag=a,s.overlaps=f===d||f.contains(d),{previousIndex:l,currentIndex:o}}enter(e,t,r,i){let o=this._activeItems.indexOf(e);o>-1&&this._activeItems.splice(o,1);let s=i==null||i<0?this._getItemIndexFromPointerPosition(e,t,r):i;s===-1&&(s=this._getClosestItemIndexToPointer(e,t,r));let a=this._activeItems[s];a&&!this._dragDropRegistry.isDragging(a)?(this._activeItems.splice(s,0,e),a.getRootElement().before(e.getPlaceholderElement())):(this._activeItems.push(e),this._element.appendChild(e.getPlaceholderElement()))}withItems(e){this._activeItems=e.slice()}withSortPredicate(e){this._sortPredicate=e}reset(){let e=this._element,t=this._previousSwap;for(let r=this._relatedNodes.length-1;r>-1;r--){let[i,o]=this._relatedNodes[r];i.parentNode===e&&i.nextSibling!==o&&(o===null?e.appendChild(i):o.parentNode===e&&e.insertBefore(i,o))}this._relatedNodes=[],this._activeItems=[],t.drag=null,t.deltaX=t.deltaY=0,t.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(e){return this._activeItems.indexOf(e)}getItemAtIndex(e){return this._activeItems[e]||null}updateOnScroll(){this._activeItems.forEach(e=>{this._dragDropRegistry.isDragging(e)&&e._sortFromLastPointerPosition()})}withElementContainer(e){e!==this._element&&(this._element=e,this._rootNode=void 0)}_getItemIndexFromPointerPosition(e,t,r){let i=this._getRootNode().elementFromPoint(Math.floor(t),Math.floor(r)),o=i?this._activeItems.findIndex(s=>{let a=s.getRootElement();return i===a||a.contains(i)}):-1;return o===-1||!this._sortPredicate(o,e)?-1:o}_getRootNode(){return this._rootNode||(this._rootNode=YC(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(e,t,r){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let i=1/0,o=-1;for(let s=0;s<this._activeItems.length;s++){let a=this._activeItems[s];if(a!==e){let{x:l,y:c}=a.getRootElement().getBoundingClientRect(),f=Math.hypot(t-l,r-c);f<i&&(i=f,o=s)}}return o}},EK=.05,CK=.05,fu=(function(n){return n[n.NONE=0]="NONE",n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n})(fu||{}),wa=(function(n){return n[n.NONE=0]="NONE",n[n.LEFT=1]="LEFT",n[n.RIGHT=2]="RIGHT",n})(wa||{}),rF=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new Jt;entered=new Jt;exited=new Jt;dropped=new Jt;sorted=new Jt;receivingStarted=new Jt;receivingStopped=new Jt;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=dr.EMPTY;_verticalScrollDirection=fu.NONE;_horizontalScrollDirection=wa.NONE;_scrollNode;_stopScrollTimers=new Jt;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(e,t,r,i,o){this._dragDropRegistry=t,this._ngZone=i,this._viewportRuler=o;let s=this.element=Qu(e);this._document=r,this.withOrientation("vertical").withElementContainer(s),t.registerDropContainer(this),this._parentPositions=new GT(r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,r,i){this._draggingStarted(),i==null&&this.sortingDisabled&&(i=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,r,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,r,i,o,s,a,l={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:r,container:this,previousContainer:i,isPointerOverContainer:o,distance:s,dropPoint:a,event:l})}withItems(e){let t=this._draggables;return this._draggables=e,e.forEach(r=>r._withDropContainer(this)),this.isDragging()&&(t.filter(i=>i.isDragging()).every(i=>e.indexOf(i)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._direction=e,this._sortStrategy instanceof VT&&(this._sortStrategy.direction=e),this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){if(e==="mixed")this._sortStrategy=new nF(this._document,this._dragDropRegistry);else{let t=new VT(this._dragDropRegistry);t.direction=this._direction,t.orientation=e,this._sortStrategy=t}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((t,r)=>this.sortPredicate(t,r,this)),this}withScrollableParents(e){let t=this._container;return this._scrollableElements=e.indexOf(t)===-1?[t,...e]:e.slice(),this}withElementContainer(e){if(e===this._container)return this;let t=Qu(this.element),r=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(e);return r>-1&&this._scrollableElements.splice(r,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(e),this._cachedShadowRoot=null,this._scrollableElements.unshift(e),this._container=e,this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}getItemAtIndex(e){return this._isDragging?this._sortStrategy.getItemAtIndex(e):this._draggables[e]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,r,i){if(this.sortingDisabled||!this._domRect||!fK(this._domRect,EK,t,r))return;let o=this._sortStrategy.sort(e,t,r,i);o&&this.sorted.next({previousIndex:o.previousIndex,currentIndex:o.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let r,i=fu.NONE,o=wa.NONE;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||r||fK(s.clientRect,EK,e,t)&&([i,o]=H1e(a,s.clientRect,this._direction,e,t),(i||o)&&(r=a))}),!i&&!o){let{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};i=IK(l,t),o=TK(l,e),r=window}r&&(i!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||r!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=o,this._scrollNode=r,(i||o)&&r?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let e=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let e=this._container.style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),LD(0,$w).pipe(xh(this._stopScrollTimers)).subscribe(()=>{let e=this._scrollNode,t=this.autoScrollStep;this._verticalScrollDirection===fu.UP?e.scrollBy(0,-t):this._verticalScrollDirection===fu.DOWN&&e.scrollBy(0,t),this._horizontalScrollDirection===wa.LEFT?e.scrollBy(-t,0):this._horizontalScrollDirection===wa.RIGHT&&e.scrollBy(t,0)})};_isOverContainer(e,t){return this._domRect!=null&&Q4(this._domRect,e,t)}_getSiblingContainerFromPosition(e,t,r){return this._siblings.find(i=>i._canReceive(e,t,r))}_canReceive(e,t,r){if(!this._domRect||!Q4(this._domRect,t,r)||!this.enterPredicate(e,this))return!1;let i=this._getShadowRoot().elementFromPoint(t,r);return i?i===this._container||this._container.contains(i):!1}_startReceiving(e,t){let r=this._activeSiblings;!r.has(e)&&t.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(r.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){let t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let e=YC(this._container);this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}};function IK(n,e){let{top:t,bottom:r,height:i}=n,o=i*CK;return e>=t-o&&e<=t+o?fu.UP:e>=r-o&&e<=r+o?fu.DOWN:fu.NONE}function TK(n,e){let{left:t,right:r,width:i}=n,o=i*CK;return e>=t-o&&e<=t+o?wa.LEFT:e>=r-o&&e<=r+o?wa.RIGHT:wa.NONE}function H1e(n,e,t,r,i){let o=IK(e,i),s=TK(e,r),a=fu.NONE,l=wa.NONE;if(o){let c=n.scrollTop;o===fu.UP?c>0&&(a=fu.UP):n.scrollHeight-c>n.clientHeight&&(a=fu.DOWN)}if(s){let c=n.scrollLeft;t==="rtl"?s===wa.RIGHT?c<0&&(l=wa.RIGHT):n.scrollWidth+c>n.clientWidth&&(l=wa.LEFT):s===wa.LEFT?c>0&&(l=wa.LEFT):n.scrollWidth-c>n.clientWidth&&(l=wa.RIGHT)}return[a,l]}var Kx={capture:!0},K4={passive:!1,capture:!0},q1e=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vr({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(r,i){},styles:[`@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}
`],encapsulation:2,changeDetection:0})}return n})(),aF=(()=>{class n{_ngZone=Me(rr);_document=Me(_r);_styleLoader=Me(cx);_renderer=Me(ds).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new Jt;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=Gn([]);_globalListeners;_draggingPredicate=t=>t.isDragging();_domNodesToDirectives=null;pointerMove=new Jt;pointerUp=new Jt;constructor(){}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,K4)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),this._dragInstances.size===0&&this._cleanupDocumentTouchmove?.()}startDragging(t,r){if(!(this._activeDragInstances().indexOf(t)>-1)&&(this._styleLoader.load(q1e),this._activeDragInstances.update(i=>[...i,t]),this._activeDragInstances().length===1)){let i=r.type.startsWith("touch"),o=a=>this.pointerUp.next(a),s=[["scroll",a=>this._scroll.next(a),Kx],["selectstart",this._preventDefaultWhileDragging,K4]];i?s.push(["touchend",o,Kx],["touchcancel",o,Kx]):s.push(["mouseup",o,Kx]),i||s.push(["mousemove",a=>this.pointerMove.next(a),K4]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=s.map(([a,l,c])=>this._renderer.listen(this._document,a,l,c))})}}stopDragging(t){this._activeDragInstances.update(r=>{let i=r.indexOf(t);return i>-1?(r.splice(i,1),[...r]):r}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances().indexOf(t)>-1}scrolled(t){let r=[this._scroll];return t&&t!==this._document&&r.push(new Bn(i=>this._ngZone.runOutsideAngular(()=>{let o=this._renderer.listen(t,"scroll",s=>{this._activeDragInstances().length&&i.next(s)},Kx);return()=>{o()}}))),cE(...r)}registerDirectiveNode(t,r){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(t,r)}removeDirectiveNode(t){this._domNodesToDirectives?.delete(t)}getDragDirectiveForNode(t){return this._domNodesToDirectives?.get(t)||null}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=t=>{this._activeDragInstances().length>0&&t.preventDefault()};_persistentTouchmoveListener=t=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))};_clearGlobalListeners(){this._globalListeners?.forEach(t=>t()),this._globalListeners=void 0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),W1e={dragStartThreshold:5,pointerDirectionChangeThreshold:5},$1e=(()=>{class n{_document=Me(_r);_ngZone=Me(rr);_viewportRuler=Me(kg);_dragDropRegistry=Me(aF);_renderer=Me(ds).createRenderer(null,null);constructor(){}createDrag(t,r=W1e){return new tF(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(t){return new rF(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=yt({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iF=new Bt("CDK_DRAG_PARENT");var DK=new Bt("CdkDragHandle"),AK=(()=>{class n{element=Me(ni);_parentDrag=Me(iF,{optional:!0,skipSelf:!0});_dragDropRegistry=Me(aF);_stateChanges=new Jt;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let t=this.element.nativeElement.parentElement;for(;t;){let r=this._dragDropRegistry.getDragDirectiveForNode(t);if(r){this._parentDrag=r,r._addHandle(this);break}t=t.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yl({type:n,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",u0]},features:[gv([{provide:DK,useExisting:n}])]})}return n})(),Y1e=new Bt("CDK_DRAG_CONFIG"),X1e=new Bt("CdkDropList"),RK=(()=>{class n{element=Me(ni);dropContainer=Me(X1e,{optional:!0,skipSelf:!0});_ngZone=Me(rr);_viewContainerRef=Me(Ma);_dir=Me(ZC,{optional:!0});_changeDetectorRef=Me(nd);_selfHandle=Me(DK,{optional:!0,self:!0});_parentDrag=Me(iF,{optional:!0,skipSelf:!0});_dragDropRegistry=Me(aF);_destroyed=new Jt;_handles=new Oo([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(t){this._disabled=t,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new li;released=new li;ended=new li;entered=new li;exited=new li;dropped=new li;moved=new Bn(t=>{let r=this._dragRef.moved.pipe(or(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(t);return()=>{r.unsubscribe()}});_injector=Me(yi);constructor(){let t=this.dropContainer,r=Me(Y1e,{optional:!0}),i=Me($1e);this._dragRef=i.createDrag(this.element,{dragStartThreshold:r&&r.dragStartThreshold!=null?r.dragStartThreshold:5,pointerDirectionChangeThreshold:r&&r.pointerDirectionChangeThreshold!=null?r.pointerDirectionChangeThreshold:5,zIndex:r?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),r&&this._assignDefaults(r),t&&(t.addItem(this),t._dropListRef.beforeStarted.pipe(xh(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){Jf(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(t){let r=t.rootElementSelector,i=t.freeDragPosition;r&&!r.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(t){let r=this._handles.getValue();r.push(t),this._handles.next(r)}_removeHandle(t){let r=this._handles.getValue(),i=r.indexOf(t);i>-1&&(r.splice(i,1),this._handles.next(r))}_setPreviewTemplate(t){this._previewTemplate=t}_resetPreviewTemplate(t){t===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(t){this._placeholderTemplate=t}_resetPlaceholderTemplate(t){t===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let t=this.element.nativeElement,r=t;this.rootElementSelector&&(r=t.closest!==void 0?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(r||t)}_getBoundaryElement(){let t=this.boundaryElement;return t?typeof t=="string"?this.element.nativeElement.closest(t):Qu(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){let r=this._dir,i=this.dragStartDelay,o=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,s=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.scale=this.scale,t.dragStartDelay=typeof i=="object"&&i?i:lO(i),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(o).withPreviewTemplate(s).withPreviewContainer(this.previewContainer||"global"),r&&t.withDirection(r.value)}}),t.beforeStarted.pipe(Ru(1)).subscribe(()=>{if(this._parentDrag){t.withParent(this._parentDrag._dragRef);return}let r=this.element.nativeElement.parentElement;for(;r;){let i=this._dragDropRegistry.getDragDirectiveForNode(r);if(i){t.withParent(i._dragRef);break}r=r.parentElement}})}_handleEvents(t){t.started.subscribe(r=>{this.started.emit({source:this,event:r.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(r=>{this.released.emit({source:this,event:r.event})}),t.ended.subscribe(r=>{this.ended.emit({source:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(r=>{this.entered.emit({container:r.container.data,item:this,currentIndex:r.currentIndex})}),t.exited.subscribe(r=>{this.exited.emit({container:r.container.data,item:this})}),t.dropped.subscribe(r=>{this.dropped.emit({previousIndex:r.previousIndex,currentIndex:r.currentIndex,previousContainer:r.previousContainer.data,container:r.container.data,isPointerOverContainer:r.isPointerOverContainer,item:this,distance:r.distance,dropPoint:r.dropPoint,event:r.event})})}_assignDefaults(t){let{lockAxis:r,dragStartDelay:i,constrainPosition:o,previewClass:s,boundaryElement:a,draggingDisabled:l,rootElementSelector:c,previewContainer:f}=t;this.disabled=l??!1,this.dragStartDelay=i||0,r&&(this.lockAxis=r),o&&(this.constrainPosition=o),s&&(this.previewClass=s),a&&(this.boundaryElement=a),c&&(this.rootElementSelector=c),f&&(this.previewContainer=f)}_setupHandlesListener(){this._handles.pipe(fo(t=>{let r=t.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&r.push(this.element),this._dragRef.withHandles(r)}),cs(t=>cE(...t.map(r=>r._stateChanges.pipe(zm(r))))),xh(this._destroyed)).subscribe(t=>{let r=this._dragRef,i=t.element.nativeElement;t.disabled?r.disableHandle(i):r.enableHandle(i)})}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Yl({type:n,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(r,i){r&2&&bc("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",u0],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",oj]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[gv([{provide:iF,useExisting:n}]),Kf]})}return n})();var mf=class{static format=new no;static createBuffer(e,t){let r=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),i=BO(r,t,{units:"meters"});return this.format.readFeature(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static calculateMeasurement(e){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});if((e.getGeometry()?.getType()).includes("Polygon")){let i=vO(t);return{value:i>1e4?(i/1e4).toFixed(2)+" ha":i.toFixed(2)+" m\xB2",label:"Area"}}else{let i=PI(t,{units:"kilometers"});return{value:i<1?(i*1e3).toFixed(2)+" m":i.toFixed(2)+" km",label:"Length"}}}static getCentroid(e){let t=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),r=jO(t);return this.format.readFeature(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static getLineMiddlePoint(e){let r=this.format.writeFeatureObject(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),i=PI(r),o=mO(r,i/2);return this.format.readFeature(o,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}static convertToWKT(e){return new ex().writeFeature(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}};var Z1e=(n,e)=>e.key;function K1e(n,e){if(n&1){let t=Di();Qe(0,"button",4),yn("click",function(i){tr(t);let o=Dn();return Dn().onCentroidClick(o),nr(i.stopPropagation())}),yr(),Qe(1,"svg",5),Kt(2,"path",14)(3,"path",15),it(),St(4," Find Centroid "),it()}}function J1e(n,e){if(n&1){let t=Di();Qe(0,"button",4),yn("click",function(i){tr(t);let o=Dn();return Dn().onMeasureClick(o),nr(i.stopPropagation())}),yr(),Qe(1,"svg",5),Kt(2,"path",16),it(),St(3),it()}if(n&2){let t=Dn(),r=Dn();Xt(3),Ko(" ",r.isPolygon(t)?"Calculate Area":"Calculate Length"," ")}}function Q1e(n,e){if(n&1){let t=Di();Qe(0,"div",3)(1,"button",4),yn("click",function(i){let o=tr(t);return Dn().openWindow(o),nr(i.stopPropagation())}),yr(),Qe(2,"svg",5),Kt(3,"path",6),it(),St(4," View Details "),it(),po(),Qe(5,"button",7),yn("click",function(i){let o=tr(t);return Dn().onCopyWKTClick(o),nr(i.stopPropagation())}),yr(),Qe(6,"svg",8),Kt(7,"path",9),it(),po(),Qe(8,"span"),St(9,"Copy as WKT"),it()(),Kt(10,"div",10),Qe(11,"button",4),yn("click",function(i){let o=tr(t);return Dn().onBufferClick(o),nr(i.stopPropagation())}),yr(),Qe(12,"svg",5),Kt(13,"circle",11)(14,"circle",12),it(),St(15," Buffer Analysis "),it(),Ji(16,K1e,5,0,"button",13)(17,J1e,4,1,"button",13),it()}if(n&2){let t=e,r=Dn();pv("left",t.clientX,"px")("top",t.clientY,"px"),Xt(16),Cr("ngIf",r.isPolygon(t)),Xt(),Cr("ngIf",r.isPolygon(t)||r.isLine(t))}}function exe(n,e){if(n&1&&(Qe(0,"tr",27)(1,"td",32),St(2),it(),Qe(3,"td",33),St(4),it()()),n&2){let t=e.$implicit;Xt(2),Ko(" ",t.key," "),Xt(2),Ko(" ",t.value," ")}}function txe(n,e){n&1&&(Qe(0,"tr")(1,"td",34),St(2," No data available to display. "),it()())}function nxe(n,e){if(n&1){let t=Di();Qe(0,"div",1)(1,"div",17)(2,"div",18),Kt(3,"div",19),Qe(4,"h3",20),St(5,"Feature Attributes"),it()(),Qe(6,"button",21),yn("click",function(){tr(t);let i=Dn();return nr(i.closeWindow())}),yr(),Qe(7,"svg",22),Kt(8,"path",23),it()()(),po(),Qe(9,"div",24)(10,"table",25)(11,"tbody",26),cv(12,exe,5,2,"tr",27,Z1e,!1,txe,3,0,"tr"),it()()(),Qe(15,"div",28)(16,"button",29),yn("click",function(){tr(t);let i=Dn();return nr(i.closeWindow())}),St(17," Close "),it(),Qe(18,"div",30)(19,"span",31),St(20),it()()()()}if(n&2){let t,r=Dn();Xt(12),hv(r.filteredData()),Xt(8),Ko("UID: ",(t=r.selectedFeatureData())==null?null:t.ol_uid)}}function rxe(n,e){if(n&1){let t=Di();Qe(0,"div",2)(1,"div",35)(2,"div",36)(3,"h3",37)(4,"span",38),St(5,"\u{1F4C4}"),it(),St(6," WKT Geometry Data "),it(),Qe(7,"button",39),yn("click",function(){tr(t);let i=Dn();return nr(i.showWktModal.set(!1))}),St(8," \u2715 "),it()(),Qe(9,"div",40),St(10),it(),Qe(11,"div",41)(12,"button",42),yn("click",function(){tr(t);let i=Dn();return nr(i.showWktModal.set(!1))}),St(13," Close "),it(),Qe(14,"button",43),yn("click",function(){tr(t);let i=Dn();return nr(i.copyFromModal())}),Qe(15,"span"),St(16),it()()()()()}if(n&2){let t=Dn();Xt(10),Ko(" ",t.currentWkt()," "),Xt(6),a0(t.copySuccess()?"Done!":"Copy to Clipboard")}}var HT=class n{mapService=Me(Eo);filteredData;selectedFeatureData=Gn(null);isWindowOpen=Gn(!1);showWktModal=Gn(!1);currentWkt=Gn("");copySuccess=Gn(!1);_el=Me(ni);bufferStyle=new ri({stroke:new xi({color:"#4f46e5",width:2}),fill:new qr({color:"rgba(79, 70, 229, 0.2)"})});constructor(){this.filteredData=yv(()=>{let e=this.selectedFeatureData();if(!e||typeof e!="object")return[];let t=["geometry","ol_uid","clientX","clientY"];return Object.entries(e).filter(([r])=>!t.includes(r)).map(([r,i])=>({key:String(r),value:i==null?"---":String(i)}))})}clickout(e){this.mapService.rightClickedFeature()&&(this._el.nativeElement.contains(e.target)||this.mapService.rightClickedFeature.set(null))}openWindow(e){this.selectedFeatureData.set(e),this.isWindowOpen.set(!0),this.mapService.rightClickedFeature.set(null)}closeWindow(){this.isWindowOpen.set(!1)}onBufferClick(e){let t=e.feature?e.feature:e,r=prompt("Enter buffer distance in meters:","100");if(r===null||r.trim()==="")return;let i=parseFloat(r);if(isNaN(i)||i<=0){alert("Please enter a valid positive number.");return}try{let o=mf.createBuffer(t,i);o.setStyle(this.bufferStyle),this.mapService.getVectorSource().addFeature(o),this.mapService.rightClickedFeature.set(null)}catch(o){console.error("Buffer error:",o)}}onMeasureClick(e){try{let t=e?.feature,r=this.mapService.getVectorSource(),i=t.getGeometry()?.getType();r.getFeatures().filter(l=>l.get("type")==="measurement").forEach(l=>r.removeFeature(l));let s=mf.calculateMeasurement(t),a;i.includes("Polygon")?a=mf.getCentroid(t):a=mf.getLineMiddlePoint(t),a.set("type","measurement"),a.setStyle(new ri({text:new Sd({text:`${s.label}: ${s.value}`,font:"bold 13px Inter, sans-serif",fill:new qr({color:"#ffffff"}),backgroundFill:new qr({color:"#334155"}),padding:[4,8,4,8],offsetY:-20}),image:new da({radius:4,fill:new qr({color:"#334155"})})})),r.addFeature(a),this.mapService.rightClickedFeature.set(null)}catch(t){console.error("Measurement error:",t)}}onCentroidClick(e){try{let t=e.feature,r=this.mapService.getVectorSource();r.getFeatures().filter(a=>a.get("type")==="centroid").forEach(a=>r.removeFeature(a));let s=mf.getCentroid(t);s.set("type","centroid"),s.setStyle(new ri({image:new da({radius:6,fill:new qr({color:"#ef4444"}),stroke:new xi({color:"#fff",width:2.5})}),zIndex:1e3})),r.addFeature(s),this.mapService.rightClickedFeature.set(null)}catch(t){console.error("Centroid calculation error:",t)}}isPolygon(e){if(!e?.feature)return!1;let t=e.feature.getGeometry()?.getType();return t==="Polygon"||t==="MultiPolygon"}isLine(e){if(!e?.feature)return!1;let t=e.feature.getGeometry()?.getType();return t==="LineString"||t==="MultiLineString"}onCopyWKTClick(e){let t=mf.convertToWKT(e.feature);this.currentWkt.set(t),this.showWktModal.set(!0),this.mapService.rightClickedFeature.set(null)}copyFromModal(){return He(this,null,function*(){yield navigator.clipboard.writeText(this.currentWkt()),this.copySuccess.set(!0),setTimeout(()=>this.copySuccess.set(!1),2e3)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-map-context-menu"]],hostBindings:function(t,r){t&1&&yn("click",function(o){return r.clickout(o)},Mh)},decls:3,vars:3,consts:[[1,"fixed","z-[2000]","bg-white","shadow-xl","rounded-lg","py-2","min-w-[160px]","border","border-slate-200",3,"left","top"],["cdkDrag","",1,"fixed","z-[1001]","w-[350px]","bg-white","rounded-xl","shadow-2xl","border","border-slate-300","flex","flex-col","pointer-events-auto","overflow-hidden",2,"left","60px","top","100px"],["div","","cdkDrag","",1,"fixed","z-[1001]","w-[350px]","bg-white","rounded-xl","shadow-2xl","border","border-slate-300","flex","flex-col","pointer-events-auto","overflow-hidden",2,"left","45%","top","45%"],[1,"fixed","z-[2000]","bg-white","shadow-xl","rounded-lg","py-2","min-w-[160px]","border","border-slate-200"],[1,"w-full","px-3","py-1.5","text-left","text-[13px]","text-slate-700","hover:bg-indigo-600","hover:text-white","transition-colors","flex","items-center","gap-2.5",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","opacity-70"],["d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z","stroke-width","2"],[1,"w-full","px-3","py-1.5","text-left","text-[13px]","text-slate-700","hover:bg-slate-100","transition-colors","flex","items-center","gap-2.5",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-slate-500","opacity-70"],["d","M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"my-1","border-t","border-slate-100"],["cx","12","cy","12","r","9","stroke-width","2","stroke-dasharray","3 3"],["cx","12","cy","12","r","3","fill","currentColor"],["class","w-full px-3 py-1.5 text-left text-[13px] text-slate-700 hover:bg-indigo-600 hover:text-white transition-colors flex items-center gap-2.5",3,"click",4,"ngIf"],["d","M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0","fill","currentColor"],["d","M12 2v4m0 12v4M2 12h4m12 0h4","stroke","currentColor","stroke-width","2"],["d","M9 7v10m4-10v10M9 7h4m-4 10h4m3-14L5 19","stroke-width","2"],["cdkDragHandle","",1,"flex","items-center","justify-between","bg-slate-900","px-4","py-2.5","cursor-move","active:cursor-grabbing","select-none"],[1,"flex","items-center","gap-2"],[1,"w-2","h-2","rounded-full","bg-indigo-500","animate-pulse"],[1,"text-white","text-[11px]","font-bold","uppercase","tracking-widest"],[1,"text-slate-400","hover:text-white","p-1","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["d","M6 18L18 6M6 6l12 12","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"max-h-[350px]","overflow-y-auto"],[1,"w-full","text-[12px]","text-left"],[1,"divide-y","divide-slate-100"],[1,"hover:bg-slate-50","transition-colors"],[1,"p-2.5","bg-slate-50","border-t","border-slate-200","flex","justify-between","items-center"],[1,"text-[10px]","bg-indigo-600","text-white","px-4","py-1.5","rounded","shadow-sm","font-bold","uppercase","hover:bg-indigo-700","transition-all","active:scale-95",3,"click"],[1,"flex","flex-col","items-end"],[1,"text-[9px]","text-slate-400","font-mono"],[1,"px-4","py-2.5","font-bold","text-slate-500","bg-slate-50/50","w-[120px]","border-r","border-slate-100","uppercase","text-[10px]"],[1,"px-4","py-2.5","text-slate-700","font-medium","selection:bg-indigo-100"],["colspan","2",1,"px-4","py-8","text-center","text-slate-400","italic"],[1,"bg-white","rounded-xl","shadow-2xl","w-full","max-w-2xl","overflow-hidden","flex","flex-col","max-h-[80vh]"],[1,"px-6","py-4","border-b","border-slate-100","flex","justify-between","items-center","bg-slate-50"],[1,"font-semibold","text-slate-800","flex","items-center","gap-2"],[1,"text-indigo-600"],[1,"text-slate-400","hover:text-slate-600","transition-colors",3,"click"],[1,"p-6","overflow-y-auto","bg-slate-900","font-mono","text-sm","text-indigo-300","leading-relaxed","break-all"],[1,"px-6","py-4","border-t","border-slate-100","flex","justify-end","gap-3","bg-white"],[1,"px-4","py-2","text-sm","font-medium","text-slate-600","hover:bg-slate-50","rounded-lg","transition-colors",3,"click"],[1,"px-4","py-2","text-sm","font-medium","bg-indigo-600","text-white","hover:bg-indigo-700","rounded-lg","shadow-sm","transition-all","flex","items-center","gap-2",3,"click"]],template:function(t,r){if(t&1&&(ed(0,Q1e,18,6,"div",0),ed(1,nxe,21,2,"div",1),ed(2,rxe,17,2,"div",2)),t&2){let i;td((i=r.mapService.rightClickedFeature())?0:-1,i),Xt(),td(r.isWindowOpen()?1:-1),Xt(),td(r.showWktModal()?2:-1)}},dependencies:[zi,dl,RK,AK],encapsulation:2})};var ixe=["mapContainer"],qT=class n{mapViewerService=Me(Eo);_geoDataService=Me(Bd);_drawService=Me(lu);mapContainer;map;importedDataVectorSource;showExportMenu=!1;static BASEMAP_CRS="EPSG:3857";static FALLBACK_CRS="EPSG:4326";constructor(){l0(()=>{let e=this._geoDataService.currentData();if(console.log("data signal:",e),!e||!this.importedDataVectorSource)return;let t=new no,r=[];Array.isArray(e.geojson)?e.geojson.forEach(i=>{let o=t.readFeatures(i,{dataProjection:e.crs,featureProjection:n.BASEMAP_CRS});r.push(...o)}):r=t.readFeatures(e.geojson,{dataProjection:e.crs,featureProjection:n.BASEMAP_CRS}),this.importedDataVectorSource.clear(),this.importedDataVectorSource.addFeatures(r)})}ngAfterViewInit(){this._initializeMap()}_initializeMap(){this.importedDataVectorSource=new ou,this.map=new y9({target:this.mapContainer.nativeElement,layers:[...this._createBasemaps(),this._createImportedVectorLayer(),this._createDrawingVectorLayer()],view:new gl({center:[0,0],zoom:2,projection:n.BASEMAP_CRS}),controls:s1({zoom:!1}).extend([new UT])}),this.mapViewerService.setMap(this.map)}_styleByGeometryType=e=>{let t=e.getGeometry()?.getType();return console.log("style called for:",t),this._styleCache[t??"Point"]};_styleCache={Point:new ri({image:new da({radius:6,fill:new qr({color:"#d11313"})})}),LineString:new ri({stroke:new xi({color:"#005eff",width:3})}),MultiLineString:new ri({stroke:new xi({color:"#0752d4ff",width:3})}),Polygon:new ri({fill:new qr({color:"rgba(0,255,153,0.4)"}),stroke:new xi({color:"#009966",width:2})})};_createImportedVectorLayer(){let e=new ef({source:this.importedDataVectorSource,style:this._styleByGeometryType});return e.setProperties({id:"imported",name:"Imported Data",type:"vector",removable:!1}),e}_createDrawingVectorLayer(){let e=new ef({source:this._drawService.source,style:this._styleByGeometryType});return e.setProperties({id:"drawing",name:"Drawing Data",type:"vector",removable:!1}),e}_createBasemaps(){let e=new Q0({source:new X9,visible:!0});e.setProperties({id:"osm",name:"OpenStreetMap",type:"basemap",removable:!1,thumbnail:"assets/map-previews/osm.webp"});let t=new Q0({source:new Eq({layer:"alidade_smooth_dark",retina:!0}),visible:!1});return t.setProperties({id:"Stadia Maps Dark",name:"Stadia Maps Dark",type:"basemap",removable:!1,thumbnail:"assets/map-previews/dark.webp"}),[e,t]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-map-viewer"]],viewQuery:function(t,r){if(t&1&&v2(ixe,7),t&2){let i;x2(i=w2())&&(r.mapContainer=i.first)}},decls:8,vars:0,consts:[["mapContainer",""],[1,"relative","w-full","h-screen","font-sans","overflow-hidden","bg-slate-900"],[1,"w-full","h-full","opacity-90",3,"contextmenu"],[1,"absolute","top-6","right-1","z-20","transition-all","duration-500"]],template:function(t,r){if(t&1){let i=Di();Qe(0,"div",1)(1,"div",2,0),yn("contextmenu",function(s){return tr(i),nr(r.mapViewerService.handleRightClick(s))}),it(),Kt(3,"app-toolbar"),Qe(4,"div",3),Kt(5,"app-layer-panel"),it(),Kt(6,"app-mouse-position")(7,"app-map-context-menu"),it()}},dependencies:[zi,dC,pC,jT,HT],styles:[".ol-control.advanced-zoom{top:20px;left:20px;background:#ffffffe6!important;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);padding:4px;border-radius:8px;border:1px solid rgba(255,255,255,.3);box-shadow:0 8px 32px #00000026;display:flex;flex-direction:column;gap:2px;transition:transform .2s ease;height:auto;width:auto}  .ol-control.advanced-zoom:hover{transform:translateY(-2px)}  .ol-control.advanced-zoom button{width:24px!important;height:24px!important;background-color:transparent!important;color:#2c3e50!important;border:none;border-radius:8px!important;font-size:22px;font-weight:300;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;position:relative}  .ol-control.advanced-zoom button.ol-zoom-in:hover{background-color:#3498db33!important;color:#3498db!important}  .ol-control.advanced-zoom button.ol-zoom-out:hover{background-color:#e74c3c33!important;color:#e74c3c!important}  .ol-control.advanced-zoom button:active{transform:scale(.9)}  .zoom-level-indicator{height:28px;display:flex;align-items:center;justify-content:center;font-family:Inter,Segoe UI,sans-serif;font-size:13px;font-weight:700;color:#34495e;background:#0000000f;margin:4px 0;border-radius:6px;cursor:default;-webkit-user-select:none;user-select:none;pointer-events:none}"]})};var WT=class n{title=Gn("geo-etl-engine");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=vr({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"main"]],template:function(t,r){t&1&&(Qe(0,"main",0),Kt(1,"app-map-viewer"),it())},dependencies:[qT],encapsulation:2})};kM(WT,AU).catch(n=>console.error(n));
